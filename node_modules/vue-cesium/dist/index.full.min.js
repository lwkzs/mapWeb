/*! VueCesium v3.2.9 */(function(F,u){typeof exports=="object"&&typeof module!="undefined"?u(exports,require("vue"),require("echarts")):typeof define=="function"&&define.amd?define(["exports","vue","echarts"],u):(F=typeof globalThis!="undefined"?globalThis:F||self,u(F.VueCesium={},F.Vue,F.echarts))})(this,function(F,u,QM){"use strict";function JM(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,Object.freeze(t)}var bl=JM(QM);const XM="3.2.9",k1=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Or=k1?Symbol("VueCesium"):"VueCesium",z1=k1?Symbol("_vc_f_"):"_vc_f_",yd=Symbol();var G1=typeof global=="object"&&global&&global.Object===Object&&global,YM=typeof self=="object"&&self&&self.Object===Object&&self,Hi=G1||YM||Function("return this")(),Pi=Hi.Symbol,U1=Object.prototype,KM=U1.hasOwnProperty,eS=U1.toString,Ja=Pi?Pi.toStringTag:void 0;function tS(e){var t=KM.call(e,Ja),n=e[Ja];try{e[Ja]=void 0;var i=!0}catch(a){}var r=eS.call(e);return i&&(t?e[Ja]=n:delete e[Ja]),r}var nS=Object.prototype,iS=nS.toString;function rS(e){return iS.call(e)}var oS="[object Null]",aS="[object Undefined]",H1=Pi?Pi.toStringTag:void 0;function bo(e){return e==null?e===void 0?aS:oS:H1&&H1 in Object(e)?tS(e):rS(e)}function sr(e){return e!=null&&typeof e=="object"}var sS="[object Symbol]";function Cl(e){return typeof e=="symbol"||sr(e)&&bo(e)==sS}function W1(e,t){for(var n=-1,i=e==null?0:e.length,r=Array(i);++n<i;)r[n]=t(e[n],n,e);return r}var li=Array.isArray,lS=1/0,q1=Pi?Pi.prototype:void 0,Z1=q1?q1.toString:void 0;function Q1(e){if(typeof e=="string")return e;if(li(e))return W1(e,Q1)+"";if(Cl(e))return Z1?Z1.call(e):"";var t=e+"";return t=="0"&&1/e==-lS?"-0":t}var cS=/\s/;function uS(e){for(var t=e.length;t--&&cS.test(e.charAt(t)););return t}var dS=/^\s+/;function hS(e){return e&&e.slice(0,uS(e)+1).replace(dS,"")}function Ei(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var J1=0/0,mS=/^[-+]0x[0-9a-f]+$/i,pS=/^0b[01]+$/i,fS=/^0o[0-7]+$/i,gS=parseInt;function bd(e){if(typeof e=="number")return e;if(Cl(e))return J1;if(Ei(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ei(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=hS(e);var n=pS.test(e);return n||fS.test(e)?gS(e.slice(2),n?2:8):mS.test(e)?J1:+e}var X1=1/0,vS=17976931348623157e292;function yS(e){if(!e)return e===0?e:0;if(e=bd(e),e===X1||e===-X1){var t=e<0?-1:1;return t*vS}return e===e?e:0}function bS(e){var t=yS(e),n=t%1;return t===t?n?t-n:t:0}function Cd(e){return e}var CS="[object AsyncFunction]",wS="[object Function]",_S="[object GeneratorFunction]",PS="[object Proxy]";function wd(e){if(!Ei(e))return!1;var t=bo(e);return t==wS||t==_S||t==CS||t==PS}var _d=Hi["__core-js_shared__"],Y1=function(){var e=/[^.]+$/.exec(_d&&_d.keys&&_d.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function ES(e){return!!Y1&&Y1 in e}var xS=Function.prototype,OS=xS.toString;function Co(e){if(e!=null){try{return OS.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var MS=/[\\^$.*+?()[\]{}|]/g,SS=/^\[object .+?Constructor\]$/,TS=Function.prototype,IS=Object.prototype,AS=TS.toString,DS=IS.hasOwnProperty,LS=RegExp("^"+AS.call(DS).replace(MS,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function BS(e){if(!Ei(e)||ES(e))return!1;var t=wd(e)?LS:SS;return t.test(Co(e))}function RS(e,t){return e==null?void 0:e[t]}function wo(e,t){var n=RS(e,t);return BS(n)?n:void 0}var Pd=wo(Hi,"WeakMap"),K1=Object.create,VS=function(){function e(){}return function(t){if(!Ei(t))return{};if(K1)return K1(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function FS(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function $S(){}function eb(e,t){var n=-1,i=e.length;for(t||(t=Array(i));++n<i;)t[n]=e[n];return t}var NS=800,jS=16,kS=Date.now;function zS(e){var t=0,n=0;return function(){var i=kS(),r=jS-(i-n);if(n=i,r>0){if(++t>=NS)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function GS(e){return function(){return e}}var wl=function(){try{var e=wo(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),US=wl?function(e,t){return wl(e,"toString",{configurable:!0,enumerable:!1,value:GS(t),writable:!0})}:Cd,HS=zS(US);function WS(e,t){for(var n=-1,i=e==null?0:e.length;++n<i&&t(e[n],n,e)!==!1;);return e}function tb(e,t,n,i){for(var r=e.length,a=n+(i?1:-1);i?a--:++a<r;)if(t(e[a],a,e))return a;return-1}function qS(e){return e!==e}function ZS(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}function QS(e,t,n){return t===t?ZS(e,t,n):tb(e,qS,n)}function nb(e,t){var n=e==null?0:e.length;return!!n&&QS(e,t,0)>-1}var JS=9007199254740991,XS=/^(?:0|[1-9]\d*)$/;function _l(e,t){var n=typeof e;return t=t==null?JS:t,!!t&&(n=="number"||n!="symbol"&&XS.test(e))&&e>-1&&e%1==0&&e<t}function Ed(e,t,n){t=="__proto__"&&wl?wl(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Xa(e,t){return e===t||e!==e&&t!==t}var YS=Object.prototype,KS=YS.hasOwnProperty;function ib(e,t,n){var i=e[t];(!(KS.call(e,t)&&Xa(i,n))||n===void 0&&!(t in e))&&Ed(e,t,n)}function Ya(e,t,n,i){var r=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var l=t[a],d=i?i(n[l],e[l],l,n,e):void 0;d===void 0&&(d=e[l]),r?Ed(n,l,d):ib(n,l,d)}return n}var rb=Math.max;function e5(e,t,n){return t=rb(t===void 0?e.length-1:t,0),function(){for(var i=arguments,r=-1,a=rb(i.length-t,0),s=Array(a);++r<a;)s[r]=i[t+r];r=-1;for(var l=Array(t+1);++r<t;)l[r]=i[r];return l[t]=n(s),FS(e,this,l)}}function ob(e,t){return HS(e5(e,t,Cd),e+"")}var t5=9007199254740991;function xd(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=t5}function Ka(e){return e!=null&&xd(e.length)&&!wd(e)}function n5(e,t,n){if(!Ei(n))return!1;var i=typeof t;return(i=="number"?Ka(n)&&_l(t,n.length):i=="string"&&t in n)?Xa(n[t],e):!1}function i5(e){return ob(function(t,n){var i=-1,r=n.length,a=r>1?n[r-1]:void 0,s=r>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(r--,a):void 0,s&&n5(n[0],n[1],s)&&(a=r<3?void 0:a,r=1),t=Object(t);++i<r;){var l=n[i];l&&e(t,l,i,a)}return t})}var r5=Object.prototype;function Od(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||r5;return e===n}function o5(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}var a5="[object Arguments]";function ab(e){return sr(e)&&bo(e)==a5}var sb=Object.prototype,s5=sb.hasOwnProperty,l5=sb.propertyIsEnumerable,es=ab(function(){return arguments}())?ab:function(e){return sr(e)&&s5.call(e,"callee")&&!l5.call(e,"callee")};function c5(){return!1}var lb=typeof F=="object"&&F&&!F.nodeType&&F,cb=lb&&typeof module=="object"&&module&&!module.nodeType&&module,u5=cb&&cb.exports===lb,ub=u5?Hi.Buffer:void 0,d5=ub?ub.isBuffer:void 0,ts=d5||c5,h5="[object Arguments]",m5="[object Array]",p5="[object Boolean]",f5="[object Date]",g5="[object Error]",v5="[object Function]",y5="[object Map]",b5="[object Number]",C5="[object Object]",w5="[object RegExp]",_5="[object Set]",P5="[object String]",E5="[object WeakMap]",x5="[object ArrayBuffer]",O5="[object DataView]",M5="[object Float32Array]",S5="[object Float64Array]",T5="[object Int8Array]",I5="[object Int16Array]",A5="[object Int32Array]",D5="[object Uint8Array]",L5="[object Uint8ClampedArray]",B5="[object Uint16Array]",R5="[object Uint32Array]",Dt={};Dt[M5]=Dt[S5]=Dt[T5]=Dt[I5]=Dt[A5]=Dt[D5]=Dt[L5]=Dt[B5]=Dt[R5]=!0,Dt[h5]=Dt[m5]=Dt[x5]=Dt[p5]=Dt[O5]=Dt[f5]=Dt[g5]=Dt[v5]=Dt[y5]=Dt[b5]=Dt[C5]=Dt[w5]=Dt[_5]=Dt[P5]=Dt[E5]=!1;function V5(e){return sr(e)&&xd(e.length)&&!!Dt[bo(e)]}function Pl(e){return function(t){return e(t)}}var db=typeof F=="object"&&F&&!F.nodeType&&F,ns=db&&typeof module=="object"&&module&&!module.nodeType&&module,F5=ns&&ns.exports===db,Md=F5&&G1.process,ea=function(){try{var e=ns&&ns.require&&ns.require("util").types;return e||Md&&Md.binding&&Md.binding("util")}catch(t){}}(),hb=ea&&ea.isTypedArray,Sd=hb?Pl(hb):V5,$5=Object.prototype,N5=$5.hasOwnProperty;function mb(e,t){var n=li(e),i=!n&&es(e),r=!n&&!i&&ts(e),a=!n&&!i&&!r&&Sd(e),s=n||i||r||a,l=s?o5(e.length,String):[],d=l.length;for(var h in e)(t||N5.call(e,h))&&!(s&&(h=="length"||r&&(h=="offset"||h=="parent")||a&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||_l(h,d)))&&l.push(h);return l}function pb(e,t){return function(n){return e(t(n))}}var j5=pb(Object.keys,Object),k5=Object.prototype,z5=k5.hasOwnProperty;function G5(e){if(!Od(e))return j5(e);var t=[];for(var n in Object(e))z5.call(e,n)&&n!="constructor"&&t.push(n);return t}function is(e){return Ka(e)?mb(e):G5(e)}function U5(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var H5=Object.prototype,W5=H5.hasOwnProperty;function q5(e){if(!Ei(e))return U5(e);var t=Od(e),n=[];for(var i in e)i=="constructor"&&(t||!W5.call(e,i))||n.push(i);return n}function rs(e){return Ka(e)?mb(e,!0):q5(e)}var Z5=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Q5=/^\w*$/;function Td(e,t){if(li(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||Cl(e)?!0:Q5.test(e)||!Z5.test(e)||t!=null&&e in Object(t)}var os=wo(Object,"create");function J5(){this.__data__=os?os(null):{},this.size=0}function X5(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Y5="__lodash_hash_undefined__",K5=Object.prototype,eT=K5.hasOwnProperty;function tT(e){var t=this.__data__;if(os){var n=t[e];return n===Y5?void 0:n}return eT.call(t,e)?t[e]:void 0}var nT=Object.prototype,iT=nT.hasOwnProperty;function rT(e){var t=this.__data__;return os?t[e]!==void 0:iT.call(t,e)}var oT="__lodash_hash_undefined__";function aT(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=os&&t===void 0?oT:t,this}function _o(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}_o.prototype.clear=J5,_o.prototype.delete=X5,_o.prototype.get=tT,_o.prototype.has=rT,_o.prototype.set=aT;function sT(){this.__data__=[],this.size=0}function El(e,t){for(var n=e.length;n--;)if(Xa(e[n][0],t))return n;return-1}var lT=Array.prototype,cT=lT.splice;function uT(e){var t=this.__data__,n=El(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():cT.call(t,n,1),--this.size,!0}function dT(e){var t=this.__data__,n=El(t,e);return n<0?void 0:t[n][1]}function hT(e){return El(this.__data__,e)>-1}function mT(e,t){var n=this.__data__,i=El(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}function Mr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Mr.prototype.clear=sT,Mr.prototype.delete=uT,Mr.prototype.get=dT,Mr.prototype.has=hT,Mr.prototype.set=mT;var as=wo(Hi,"Map");function pT(){this.size=0,this.__data__={hash:new _o,map:new(as||Mr),string:new _o}}function fT(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function xl(e,t){var n=e.__data__;return fT(t)?n[typeof t=="string"?"string":"hash"]:n.map}function gT(e){var t=xl(this,e).delete(e);return this.size-=t?1:0,t}function vT(e){return xl(this,e).get(e)}function yT(e){return xl(this,e).has(e)}function bT(e,t){var n=xl(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}function Sr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}Sr.prototype.clear=pT,Sr.prototype.delete=gT,Sr.prototype.get=vT,Sr.prototype.has=yT,Sr.prototype.set=bT;var CT="Expected a function";function Id(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(CT);var n=function(){var i=arguments,r=t?t.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var s=e.apply(this,i);return n.cache=a.set(r,s)||a,s};return n.cache=new(Id.Cache||Sr),n}Id.Cache=Sr;var wT=500;function _T(e){var t=Id(e,function(i){return n.size===wT&&n.clear(),i}),n=t.cache;return t}var PT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ET=/\\(\\)?/g,xT=_T(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(PT,function(n,i,r,a){t.push(r?a.replace(ET,"$1"):i||n)}),t});function ss(e){return e==null?"":Q1(e)}function Ad(e,t){return li(e)?e:Td(e,t)?[e]:xT(ss(e))}var OT=1/0;function ls(e){if(typeof e=="string"||Cl(e))return e;var t=e+"";return t=="0"&&1/e==-OT?"-0":t}function Dd(e,t){t=Ad(t,e);for(var n=0,i=t.length;e!=null&&n<i;)e=e[ls(t[n++])];return n&&n==i?e:void 0}function fb(e,t,n){var i=e==null?void 0:Dd(e,t);return i===void 0?n:i}function Ld(e,t){for(var n=-1,i=t.length,r=e.length;++n<i;)e[r+n]=t[n];return e}var gb=Pi?Pi.isConcatSpreadable:void 0;function MT(e){return li(e)||es(e)||!!(gb&&e&&e[gb])}function vb(e,t,n,i,r){var a=-1,s=e.length;for(n||(n=MT),r||(r=[]);++a<s;){var l=e[a];t>0&&n(l)?t>1?vb(l,t-1,n,i,r):Ld(r,l):i||(r[r.length]=l)}return r}var Bd=pb(Object.getPrototypeOf,Object),ST="[object Object]",TT=Function.prototype,IT=Object.prototype,yb=TT.toString,AT=IT.hasOwnProperty,DT=yb.call(Object);function LT(e){if(!sr(e)||bo(e)!=ST)return!1;var t=Bd(e);if(t===null)return!0;var n=AT.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&yb.call(n)==DT}function bb(e,t,n){var i=-1,r=e.length;t<0&&(t=-t>r?0:r+t),n=n>r?r:n,n<0&&(n+=r),r=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(r);++i<r;)a[i]=e[i+t];return a}function BT(e,t,n){var i=e.length;return n=n===void 0?i:n,!t&&n>=i?e:bb(e,t,n)}var RT="\\ud800-\\udfff",VT="\\u0300-\\u036f",FT="\\ufe20-\\ufe2f",$T="\\u20d0-\\u20ff",NT=VT+FT+$T,jT="\\ufe0e\\ufe0f",kT="\\u200d",zT=RegExp("["+kT+RT+NT+jT+"]");function Cb(e){return zT.test(e)}function GT(e){return e.split("")}var wb="\\ud800-\\udfff",UT="\\u0300-\\u036f",HT="\\ufe20-\\ufe2f",WT="\\u20d0-\\u20ff",qT=UT+HT+WT,ZT="\\ufe0e\\ufe0f",QT="["+wb+"]",Rd="["+qT+"]",Vd="\\ud83c[\\udffb-\\udfff]",JT="(?:"+Rd+"|"+Vd+")",_b="[^"+wb+"]",Pb="(?:\\ud83c[\\udde6-\\uddff]){2}",Eb="[\\ud800-\\udbff][\\udc00-\\udfff]",XT="\\u200d",xb=JT+"?",Ob="["+ZT+"]?",YT="(?:"+XT+"(?:"+[_b,Pb,Eb].join("|")+")"+Ob+xb+")*",KT=Ob+xb+YT,e3="(?:"+[_b+Rd+"?",Rd,Pb,Eb,QT].join("|")+")",t3=RegExp(Vd+"(?="+Vd+")|"+e3+KT,"g");function n3(e){return e.match(t3)||[]}function i3(e){return Cb(e)?n3(e):GT(e)}function r3(e){return function(t){t=ss(t);var n=Cb(t)?i3(t):void 0,i=n?n[0]:t.charAt(0),r=n?BT(n,1).join(""):t.slice(1);return i[e]()+r}}var o3=r3("toUpperCase");function a3(e){return o3(ss(e).toLowerCase())}function s3(e,t,n,i){var r=-1,a=e==null?0:e.length;for(i&&a&&(n=e[++r]);++r<a;)n=t(n,e[r],r,e);return n}function l3(e){return function(t){return e==null?void 0:e[t]}}var c3={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},u3=l3(c3),d3=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,h3="\\u0300-\\u036f",m3="\\ufe20-\\ufe2f",p3="\\u20d0-\\u20ff",f3=h3+m3+p3,g3="["+f3+"]",v3=RegExp(g3,"g");function y3(e){return e=ss(e),e&&e.replace(d3,u3).replace(v3,"")}var b3=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function C3(e){return e.match(b3)||[]}var w3=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function _3(e){return w3.test(e)}var Mb="\\ud800-\\udfff",P3="\\u0300-\\u036f",E3="\\ufe20-\\ufe2f",x3="\\u20d0-\\u20ff",O3=P3+E3+x3,Sb="\\u2700-\\u27bf",Tb="a-z\\xdf-\\xf6\\xf8-\\xff",M3="\\xac\\xb1\\xd7\\xf7",S3="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",T3="\\u2000-\\u206f",I3=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ib="A-Z\\xc0-\\xd6\\xd8-\\xde",A3="\\ufe0e\\ufe0f",Ab=M3+S3+T3+I3,Db="['\u2019]",Lb="["+Ab+"]",D3="["+O3+"]",Bb="\\d+",L3="["+Sb+"]",Rb="["+Tb+"]",Vb="[^"+Mb+Ab+Bb+Sb+Tb+Ib+"]",B3="\\ud83c[\\udffb-\\udfff]",R3="(?:"+D3+"|"+B3+")",V3="[^"+Mb+"]",Fb="(?:\\ud83c[\\udde6-\\uddff]){2}",$b="[\\ud800-\\udbff][\\udc00-\\udfff]",ta="["+Ib+"]",F3="\\u200d",Nb="(?:"+Rb+"|"+Vb+")",$3="(?:"+ta+"|"+Vb+")",jb="(?:"+Db+"(?:d|ll|m|re|s|t|ve))?",kb="(?:"+Db+"(?:D|LL|M|RE|S|T|VE))?",zb=R3+"?",Gb="["+A3+"]?",N3="(?:"+F3+"(?:"+[V3,Fb,$b].join("|")+")"+Gb+zb+")*",j3="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",k3="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",z3=Gb+zb+N3,G3="(?:"+[L3,Fb,$b].join("|")+")"+z3,U3=RegExp([ta+"?"+Rb+"+"+jb+"(?="+[Lb,ta,"$"].join("|")+")",$3+"+"+kb+"(?="+[Lb,ta+Nb,"$"].join("|")+")",ta+"?"+Nb+"+"+jb,ta+"+"+kb,k3,j3,Bb,G3].join("|"),"g");function H3(e){return e.match(U3)||[]}function W3(e,t,n){return e=ss(e),t=n?void 0:t,t===void 0?_3(e)?H3(e):C3(e):e.match(t)||[]}var q3="['\u2019]",Z3=RegExp(q3,"g");function Q3(e){return function(t){return s3(W3(y3(t).replace(Z3,"")),e,"")}}var J3=Q3(function(e,t,n){return t=t.toLowerCase(),e+(n?a3(t):t)}),Ub=J3;function X3(){this.__data__=new Mr,this.size=0}function Y3(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function K3(e){return this.__data__.get(e)}function eI(e){return this.__data__.has(e)}var tI=200;function nI(e,t){var n=this.__data__;if(n instanceof Mr){var i=n.__data__;if(!as||i.length<tI-1)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new Sr(i)}return n.set(e,t),this.size=n.size,this}function Wi(e){var t=this.__data__=new Mr(e);this.size=t.size}Wi.prototype.clear=X3,Wi.prototype.delete=Y3,Wi.prototype.get=K3,Wi.prototype.has=eI,Wi.prototype.set=nI;function iI(e,t){return e&&Ya(t,is(t),e)}function rI(e,t){return e&&Ya(t,rs(t),e)}var Hb=typeof F=="object"&&F&&!F.nodeType&&F,Wb=Hb&&typeof module=="object"&&module&&!module.nodeType&&module,oI=Wb&&Wb.exports===Hb,qb=oI?Hi.Buffer:void 0,Zb=qb?qb.allocUnsafe:void 0;function Qb(e,t){if(t)return e.slice();var n=e.length,i=Zb?Zb(n):new e.constructor(n);return e.copy(i),i}function aI(e,t){for(var n=-1,i=e==null?0:e.length,r=0,a=[];++n<i;){var s=e[n];t(s,n,e)&&(a[r++]=s)}return a}function Jb(){return[]}var sI=Object.prototype,lI=sI.propertyIsEnumerable,Xb=Object.getOwnPropertySymbols,Fd=Xb?function(e){return e==null?[]:(e=Object(e),aI(Xb(e),function(t){return lI.call(e,t)}))}:Jb;function cI(e,t){return Ya(e,Fd(e),t)}var uI=Object.getOwnPropertySymbols,Yb=uI?function(e){for(var t=[];e;)Ld(t,Fd(e)),e=Bd(e);return t}:Jb;function dI(e,t){return Ya(e,Yb(e),t)}function Kb(e,t,n){var i=t(e);return li(e)?i:Ld(i,n(e))}function $d(e){return Kb(e,is,Fd)}function hI(e){return Kb(e,rs,Yb)}var Nd=wo(Hi,"DataView"),jd=wo(Hi,"Promise"),na=wo(Hi,"Set"),eC="[object Map]",mI="[object Object]",tC="[object Promise]",nC="[object Set]",iC="[object WeakMap]",rC="[object DataView]",pI=Co(Nd),fI=Co(as),gI=Co(jd),vI=Co(na),yI=Co(Pd),Po=bo;(Nd&&Po(new Nd(new ArrayBuffer(1)))!=rC||as&&Po(new as)!=eC||jd&&Po(jd.resolve())!=tC||na&&Po(new na)!=nC||Pd&&Po(new Pd)!=iC)&&(Po=function(e){var t=bo(e),n=t==mI?e.constructor:void 0,i=n?Co(n):"";if(i)switch(i){case pI:return rC;case fI:return eC;case gI:return tC;case vI:return nC;case yI:return iC}return t});var cs=Po,bI=Object.prototype,CI=bI.hasOwnProperty;function wI(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&CI.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var Ol=Hi.Uint8Array;function kd(e){var t=new e.constructor(e.byteLength);return new Ol(t).set(new Ol(e)),t}function _I(e,t){var n=t?kd(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var PI=/\w*$/;function EI(e){var t=new e.constructor(e.source,PI.exec(e));return t.lastIndex=e.lastIndex,t}var oC=Pi?Pi.prototype:void 0,aC=oC?oC.valueOf:void 0;function xI(e){return aC?Object(aC.call(e)):{}}function sC(e,t){var n=t?kd(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var OI="[object Boolean]",MI="[object Date]",SI="[object Map]",TI="[object Number]",II="[object RegExp]",AI="[object Set]",DI="[object String]",LI="[object Symbol]",BI="[object ArrayBuffer]",RI="[object DataView]",VI="[object Float32Array]",FI="[object Float64Array]",$I="[object Int8Array]",NI="[object Int16Array]",jI="[object Int32Array]",kI="[object Uint8Array]",zI="[object Uint8ClampedArray]",GI="[object Uint16Array]",UI="[object Uint32Array]";function HI(e,t,n){var i=e.constructor;switch(t){case BI:return kd(e);case OI:case MI:return new i(+e);case RI:return _I(e,n);case VI:case FI:case $I:case NI:case jI:case kI:case zI:case GI:case UI:return sC(e,n);case SI:return new i;case TI:case DI:return new i(e);case II:return EI(e);case AI:return new i;case LI:return xI(e)}}function lC(e){return typeof e.constructor=="function"&&!Od(e)?VS(Bd(e)):{}}var WI="[object Map]";function qI(e){return sr(e)&&cs(e)==WI}var cC=ea&&ea.isMap,ZI=cC?Pl(cC):qI,QI="[object Set]";function JI(e){return sr(e)&&cs(e)==QI}var uC=ea&&ea.isSet,XI=uC?Pl(uC):JI,YI=1,KI=2,eA=4,dC="[object Arguments]",tA="[object Array]",nA="[object Boolean]",iA="[object Date]",rA="[object Error]",hC="[object Function]",oA="[object GeneratorFunction]",aA="[object Map]",sA="[object Number]",mC="[object Object]",lA="[object RegExp]",cA="[object Set]",uA="[object String]",dA="[object Symbol]",hA="[object WeakMap]",mA="[object ArrayBuffer]",pA="[object DataView]",fA="[object Float32Array]",gA="[object Float64Array]",vA="[object Int8Array]",yA="[object Int16Array]",bA="[object Int32Array]",CA="[object Uint8Array]",wA="[object Uint8ClampedArray]",_A="[object Uint16Array]",PA="[object Uint32Array]",Mt={};Mt[dC]=Mt[tA]=Mt[mA]=Mt[pA]=Mt[nA]=Mt[iA]=Mt[fA]=Mt[gA]=Mt[vA]=Mt[yA]=Mt[bA]=Mt[aA]=Mt[sA]=Mt[mC]=Mt[lA]=Mt[cA]=Mt[uA]=Mt[dA]=Mt[CA]=Mt[wA]=Mt[_A]=Mt[PA]=!0,Mt[rA]=Mt[hC]=Mt[hA]=!1;function Ml(e,t,n,i,r,a){var s,l=t&YI,d=t&KI,h=t&eA;if(n&&(s=r?n(e,i,r,a):n(e)),s!==void 0)return s;if(!Ei(e))return e;var m=li(e);if(m){if(s=wI(e),!l)return eb(e,s)}else{var p=cs(e),g=p==hC||p==oA;if(ts(e))return Qb(e,l);if(p==mC||p==dC||g&&!r){if(s=d||g?{}:lC(e),!l)return d?dI(e,rI(s,e)):cI(e,iI(s,e))}else{if(!Mt[p])return r?e:{};s=HI(e,p,l)}}a||(a=new Wi);var v=a.get(e);if(v)return v;a.set(e,s),XI(e)?e.forEach(function(w){s.add(Ml(w,t,n,w,e,a))}):ZI(e)&&e.forEach(function(w,S){s.set(S,Ml(w,t,n,S,e,a))});var b=h?d?hI:$d:d?rs:is,P=m?void 0:b(e);return WS(P||e,function(w,S){P&&(S=w,w=e[S]),ib(s,S,Ml(w,t,n,S,e,a))}),s}var EA=1,xA=4;function ut(e){return Ml(e,EA|xA)}var OA="__lodash_hash_undefined__";function MA(e){return this.__data__.set(e,OA),this}function SA(e){return this.__data__.has(e)}function ia(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Sr;++t<n;)this.add(e[t])}ia.prototype.add=ia.prototype.push=MA,ia.prototype.has=SA;function TA(e,t){for(var n=-1,i=e==null?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1}function zd(e,t){return e.has(t)}var IA=1,AA=2;function pC(e,t,n,i,r,a){var s=n&IA,l=e.length,d=t.length;if(l!=d&&!(s&&d>l))return!1;var h=a.get(e),m=a.get(t);if(h&&m)return h==t&&m==e;var p=-1,g=!0,v=n&AA?new ia:void 0;for(a.set(e,t),a.set(t,e);++p<l;){var b=e[p],P=t[p];if(i)var w=s?i(P,b,p,t,e,a):i(b,P,p,e,t,a);if(w!==void 0){if(w)continue;g=!1;break}if(v){if(!TA(t,function(S,T){if(!zd(v,T)&&(b===S||r(b,S,n,i,a)))return v.push(T)})){g=!1;break}}else if(!(b===P||r(b,P,n,i,a))){g=!1;break}}return a.delete(e),a.delete(t),g}function DA(e){var t=-1,n=Array(e.size);return e.forEach(function(i,r){n[++t]=[r,i]}),n}function Gd(e){var t=-1,n=Array(e.size);return e.forEach(function(i){n[++t]=i}),n}var LA=1,BA=2,RA="[object Boolean]",VA="[object Date]",FA="[object Error]",$A="[object Map]",NA="[object Number]",jA="[object RegExp]",kA="[object Set]",zA="[object String]",GA="[object Symbol]",UA="[object ArrayBuffer]",HA="[object DataView]",fC=Pi?Pi.prototype:void 0,Ud=fC?fC.valueOf:void 0;function WA(e,t,n,i,r,a,s){switch(n){case HA:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case UA:return!(e.byteLength!=t.byteLength||!a(new Ol(e),new Ol(t)));case RA:case VA:case NA:return Xa(+e,+t);case FA:return e.name==t.name&&e.message==t.message;case jA:case zA:return e==t+"";case $A:var l=DA;case kA:var d=i&LA;if(l||(l=Gd),e.size!=t.size&&!d)return!1;var h=s.get(e);if(h)return h==t;i|=BA,s.set(e,t);var m=pC(l(e),l(t),i,r,a,s);return s.delete(e),m;case GA:if(Ud)return Ud.call(e)==Ud.call(t)}return!1}var qA=1,ZA=Object.prototype,QA=ZA.hasOwnProperty;function JA(e,t,n,i,r,a){var s=n&qA,l=$d(e),d=l.length,h=$d(t),m=h.length;if(d!=m&&!s)return!1;for(var p=d;p--;){var g=l[p];if(!(s?g in t:QA.call(t,g)))return!1}var v=a.get(e),b=a.get(t);if(v&&b)return v==t&&b==e;var P=!0;a.set(e,t),a.set(t,e);for(var w=s;++p<d;){g=l[p];var S=e[g],T=t[g];if(i)var _=s?i(T,S,g,t,e,a):i(S,T,g,e,t,a);if(!(_===void 0?S===T||r(S,T,n,i,a):_)){P=!1;break}w||(w=g=="constructor")}if(P&&!w){var M=e.constructor,A=t.constructor;M!=A&&"constructor"in e&&"constructor"in t&&!(typeof M=="function"&&M instanceof M&&typeof A=="function"&&A instanceof A)&&(P=!1)}return a.delete(e),a.delete(t),P}var XA=1,gC="[object Arguments]",vC="[object Array]",Sl="[object Object]",YA=Object.prototype,yC=YA.hasOwnProperty;function KA(e,t,n,i,r,a){var s=li(e),l=li(t),d=s?vC:cs(e),h=l?vC:cs(t);d=d==gC?Sl:d,h=h==gC?Sl:h;var m=d==Sl,p=h==Sl,g=d==h;if(g&&ts(e)){if(!ts(t))return!1;s=!0,m=!1}if(g&&!m)return a||(a=new Wi),s||Sd(e)?pC(e,t,n,i,r,a):WA(e,t,d,n,i,r,a);if(!(n&XA)){var v=m&&yC.call(e,"__wrapped__"),b=p&&yC.call(t,"__wrapped__");if(v||b){var P=v?e.value():e,w=b?t.value():t;return a||(a=new Wi),r(P,w,n,i,a)}}return g?(a||(a=new Wi),JA(e,t,n,i,r,a)):!1}function Tl(e,t,n,i,r){return e===t?!0:e==null||t==null||!sr(e)&&!sr(t)?e!==e&&t!==t:KA(e,t,n,i,Tl,r)}var e6=1,t6=2;function n6(e,t,n,i){var r=n.length,a=r,s=!i;if(e==null)return!a;for(e=Object(e);r--;){var l=n[r];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++r<a;){l=n[r];var d=l[0],h=e[d],m=l[1];if(s&&l[2]){if(h===void 0&&!(d in e))return!1}else{var p=new Wi;if(i)var g=i(h,m,d,e,t,p);if(!(g===void 0?Tl(m,h,e6|t6,i,p):g))return!1}}return!0}function bC(e){return e===e&&!Ei(e)}function i6(e){for(var t=is(e),n=t.length;n--;){var i=t[n],r=e[i];t[n]=[i,r,bC(r)]}return t}function CC(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}function r6(e){var t=i6(e);return t.length==1&&t[0][2]?CC(t[0][0],t[0][1]):function(n){return n===e||n6(n,e,t)}}function o6(e,t){return e!=null&&t in Object(e)}function a6(e,t,n){t=Ad(t,e);for(var i=-1,r=t.length,a=!1;++i<r;){var s=ls(t[i]);if(!(a=e!=null&&n(e,s)))break;e=e[s]}return a||++i!=r?a:(r=e==null?0:e.length,!!r&&xd(r)&&_l(s,r)&&(li(e)||es(e)))}function s6(e,t){return e!=null&&a6(e,t,o6)}var l6=1,c6=2;function u6(e,t){return Td(e)&&bC(t)?CC(ls(e),t):function(n){var i=fb(n,e);return i===void 0&&i===t?s6(n,e):Tl(t,i,l6|c6)}}function d6(e){return function(t){return t==null?void 0:t[e]}}function h6(e){return function(t){return Dd(t,e)}}function m6(e){return Td(e)?d6(ls(e)):h6(e)}function Il(e){return typeof e=="function"?e:e==null?Cd:typeof e=="object"?li(e)?u6(e[0],e[1]):r6(e):m6(e)}function p6(e){return function(t,n,i){for(var r=-1,a=Object(t),s=i(t),l=s.length;l--;){var d=s[e?l:++r];if(n(a[d],d,a)===!1)break}return t}}var f6=p6(),Hd=function(){return Hi.Date.now()},g6="Expected a function",v6=Math.max,y6=Math.min;function b6(e,t,n){var i,r,a,s,l,d,h=0,m=!1,p=!1,g=!0;if(typeof e!="function")throw new TypeError(g6);t=bd(t)||0,Ei(n)&&(m=!!n.leading,p="maxWait"in n,a=p?v6(bd(n.maxWait)||0,t):a,g="trailing"in n?!!n.trailing:g);function v(D){var z=i,$=r;return i=r=void 0,h=D,s=e.apply($,z),s}function b(D){return h=D,l=setTimeout(S,t),m?v(D):s}function P(D){var z=D-d,$=D-h,L=t-z;return p?y6(L,a-$):L}function w(D){var z=D-d,$=D-h;return d===void 0||z>=t||z<0||p&&$>=a}function S(){var D=Hd();if(w(D))return T(D);l=setTimeout(S,P(D))}function T(D){return l=void 0,g&&i?v(D):(i=r=void 0,s)}function _(){l!==void 0&&clearTimeout(l),h=0,i=d=r=l=void 0}function M(){return l===void 0?s:T(Hd())}function A(){var D=Hd(),z=w(D);if(i=arguments,r=this,d=D,z){if(l===void 0)return b(d);if(p)return clearTimeout(l),l=setTimeout(S,t),v(d)}return l===void 0&&(l=setTimeout(S,t)),s}return A.cancel=_,A.flush=M,A}function Wd(e,t,n){(n!==void 0&&!Xa(e[t],n)||n===void 0&&!(t in e))&&Ed(e,t,n)}function Al(e){return sr(e)&&Ka(e)}function qd(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function C6(e){return Ya(e,rs(e))}function w6(e,t,n,i,r,a,s){var l=qd(e,n),d=qd(t,n),h=s.get(d);if(h){Wd(e,n,h);return}var m=a?a(l,d,n+"",e,t,s):void 0,p=m===void 0;if(p){var g=li(d),v=!g&&ts(d),b=!g&&!v&&Sd(d);m=d,g||v||b?li(l)?m=l:Al(l)?m=eb(l):v?(p=!1,m=Qb(d,!0)):b?(p=!1,m=sC(d,!0)):m=[]:LT(d)||es(d)?(m=l,es(l)?m=C6(l):(!Ei(l)||wd(l))&&(m=lC(d))):p=!1}p&&(s.set(d,m),r(m,d,i,a,s),s.delete(d)),Wd(e,n,m)}function wC(e,t,n,i,r){e!==t&&f6(t,function(a,s){if(r||(r=new Wi),Ei(a))w6(e,t,s,n,wC,i,r);else{var l=i?i(qd(e,s),a,s+"",e,t,r):void 0;l===void 0&&(l=a),Wd(e,s,l)}},rs)}function _C(e,t,n){for(var i=-1,r=e==null?0:e.length;++i<r;)if(n(t,e[i]))return!0;return!1}var _6=200;function P6(e,t,n,i){var r=-1,a=nb,s=!0,l=e.length,d=[],h=t.length;if(!l)return d;n&&(t=W1(t,Pl(n))),i?(a=_C,s=!1):t.length>=_6&&(a=zd,s=!1,t=new ia(t));e:for(;++r<l;){var m=e[r],p=n==null?m:n(m);if(m=i||m!==0?m:0,s&&p===p){for(var g=h;g--;)if(t[g]===p)continue e;d.push(m)}else a(t,p,i)||d.push(m)}return d}function PC(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var E6=ob(function(e,t){var n=PC(t);return Al(n)&&(n=void 0),Al(e)?P6(e,vb(t,1,Al,!0),Il(n)):[]}),Nt=E6;function x6(e){return function(t,n,i){var r=Object(t);if(!Ka(t)){var a=Il(n);t=is(t),n=function(l){return a(r[l],l,r)}}var s=e(t,n,i);return s>-1?r[a?t[s]:s]:void 0}}var O6=Math.max;function EC(e,t,n){var i=e==null?0:e.length;if(!i)return-1;var r=n==null?0:bS(n);return r<0&&(r=O6(i+r,0)),tb(e,Il(t),r)}var M6=x6(EC),xC=M6;function S6(e,t){return t.length<2?e:Dd(e,bb(t,0,-1))}function Dl(e,t){return Tl(e,t)}function T6(e){return e===null}function ci(e){return e===void 0}var I6=i5(function(e,t,n){wC(e,t,n)}),jt=I6;function A6(e,t){return t=Ad(t,e),e=S6(e,t),e==null||delete e[ls(PC(t))]}var D6=Array.prototype,L6=D6.splice;function B6(e,t){for(var n=e?t.length:0,i=n-1;n--;){var r=t[n];if(n==i||r!==a){var a=r;_l(r)?L6.call(e,r,1):A6(e,r)}}return e}function OC(e,t){var n=[];if(!(e&&e.length))return n;var i=-1,r=[],a=e.length;for(t=Il(t);++i<a;){var s=e[i];t(s,i,e)&&(n.push(s),r.push(i))}return B6(e,r),n}var R6=1/0,V6=na&&1/Gd(new na([,-0]))[1]==R6?function(e){return new na(e)}:$S,F6=200;function $6(e,t,n){var i=-1,r=nb,a=e.length,s=!0,l=[],d=l;if(n)s=!1,r=_C;else if(a>=F6){var h=t?null:V6(e);if(h)return Gd(h);s=!1,r=zd,d=new ia}else d=t?[]:l;e:for(;++i<a;){var m=e[i],p=t?t(m):m;if(m=n||m!==0?m:0,s&&p===p){for(var g=d.length;g--;)if(d[g]===p)continue e;t&&d.push(p),l.push(m)}else r(d,p,n)||(d!==l&&d.push(p),l.push(m))}return l}function N6(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?$6(e,void 0,t):[]}const j6=Object.prototype.hasOwnProperty,dt=(e,t)=>j6.call(e,t),St=Array.isArray,nn=e=>typeof e=="function",xi=e=>typeof e=="string",lr=e=>e!==null&&typeof e=="object",k6=Object.prototype.toString,z6=e=>k6.call(e),Lt=e=>z6(e)==="[object Object]",Zd=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},G6=/-(\w)/g,En=Zd(e=>e.replace(G6,(t,n)=>n?n.toUpperCase():"")),U6=/\B([A-Z])/g,H6=Zd(e=>e.replace(U6,"-$1").toLowerCase()),Ll=Zd(e=>e.charAt(0).toUpperCase()+e.slice(1));function MC(e){if(typeof e!="string"&&(e=e+""),e.length===0)return".";let t=e.charCodeAt(0);const n=t===47;let i=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!r){i=a;break}}else r=!1;return i===-1?n?"/":".":n&&i===1?"/":e.slice(0,i)}function us(e){return ci(e)||T6(e)?!0:e instanceof Element?!1:Object.keys(e).length===0}const pe=H6;function W6(e,t){if(typeof e!="object"||e===null)return!1;let n=Object.getPrototypeOf(e);for(;;){if(n===null)return!1;if(n===(t==null?void 0:t.prototype))return!0;n=Object.getPrototypeOf(n)}}function q6(e){let t;const n=Object.keys(Cesium);for(let i=0;i<n.length;i++){const r=n[i];if(W6(e,Cesium[r])){t=r;break}}return t}function Qd(e,t=!1){if(e&&e.constructor){if(t){const n=q6(e);if(n)return n}return e.constructor.name}return typeof e}function Zn(e,t){return e!=null?e:t}function Oi(e,t=[]){const n={};return Object.keys(e).forEach(i=>{if(t.indexOf(i)===-1){const r=e[i];n[i]=nn(r)?void 0:Lt(r)?nn(r.default)?r.default():r.default:r}}),n}const qi=(e,t,n=[])=>{for(const i in t)!e[i]&&n.indexOf(i)===-1&&(e[i]=t[i])};function Z6(e){if(Array.isArray(e))return!0;if(typeof e!="object"||!e)return!1;const t=e.length;return typeof t=="number"&&t>=0}function Q6(e){return typeof e=="number"&&isFinite(e)}function Bl(e,t,n){const{JulianDate:i,Color:r}=Cesium,a=i.now();return e?(typeof e.getValue=="function"&&(e=e.getValue(n||a)),typeof e=="string"?r.fromCssColorString(e):typeof e=="function"?Bl(e(n),t):e):t}function Jd(e,t,n){const{JulianDate:i,Property:r}=Cesium,a=i.now();if(!e)return e;if(t){if(e instanceof t)return e;if(e instanceof r&&e._value instanceof t)return e._value}return nn(e.getValue)?e.getValue(n||a):e}const SC=e=>Object.keys(e),Rl=u.ref();function Vl(e,t=void 0){const n=u.getCurrentInstance()?u.inject(yd,Rl):Rl;return e?u.computed(()=>{var i,r;return(r=(i=n.value)==null?void 0:i[e])!=null?r:t}):n}const TC=(e,t,n=!1)=>{var i;const r=!!u.getCurrentInstance(),a=r?Vl():void 0;if(!((i=t==null?void 0:t.provide)!=null?i:r&&u.provide)){console.warn("provideGlobalConfig","provideGlobalConfig() can only be used inside setup().");return}const s=u.computed(()=>{const l=u.unref(e);return a!=null&&a.value?J6(a.value,l):l});return t!=null&&t.provide?t.provide(yd,s):u.provide(yd,s),(n||!Rl.value)&&(Rl.value=s.value),s},J6=(e,t)=>{var n;const i=[...new Set([...SC(e),...SC(t)])],r={};for(const a of i)r[a]=(n=t[a])!=null?n:e[a];return r};function ds(e){var t,n,i,r;const a=(w="")=>function(...S){w&&(xi(S[0])?S[0]=w.trim()+" "+S[0]:S=[w.trim(),...S]),console.log(...S)},s=(w="")=>function(...S){w&&(xi(S[0])?S[0]=w.trim()+" "+S[0]:S=[w.trim(),...S]),console.warn(...S)},l=(w="")=>function(...S){w&&(xi(S[0])?S[0]=w.trim()+" "+S[0]:S=[w.trim(),...S]),console.error(...S)},d=(w="")=>function(...S){w&&(xi(S[0])?S[0]=w.trim()+" "+S[0]:S=[w.trim(),...S])},h=(w="default")=>{let S="";switch(w){case"default":S="#35495E";break;case"primary":S="#3488ff";break;case"success":S="#43B883";break;case"warning":S="#e6a23c";break;case"danger":S="#f56c6c";break}return S},m=(w,S,T="primary")=>{console.log(`%c ${w} %c ${S} %c`,"background:#35495E; padding: 1px; border-radius: 3px 0 0 3px; color: #fff;",`background:${h(T)}; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff;`,"background:transparent")},p=w=>{console.log(`%c${w.map(S=>S.text||"").join("%c")}`,...w.map(S=>`color: ${h(S.type)};`))},g=w=>{p([{text:w,type:"success"}])},v=w=>{p([{text:w,type:"warning"}])},b=w=>{p([{text:w,type:"danger"}])},P=w=>{p([{text:w,type:"primary"}])};return{log:a(`[VueCesium] ${(t=e==null?void 0:e.proxy)==null?void 0:t.$options.name}`),warn:s(`[VueCesium] WARN ${(n=e==null?void 0:e.proxy)==null?void 0:n.$options.name}`),error:l(`[VueCesium] ERR ${(i=e==null?void 0:e.proxy)==null?void 0:i.$options.name}`),debug:d(`[VueCesium] Debug ${(r=e==null?void 0:e.proxy)==null?void 0:r.$options.name}`),capsule:m,success:g,warning:v,danger:b,primary:P}}ds(void 0);const IC=Symbol("INSTALLED_KEY"),Xd=(e=[])=>({version:XM,install:(t,n)=>{if(t[IC])return;const i={cesiumPath:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js",accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"};t[IC]=!0;const r=Object.assign(i,n);e.forEach(a=>{t.use(a,r)}),TC(r,t,!0)}});function AC(e){return{all:e=e||new Map,on:function(t,n){var i=e.get(t);i?i.push(n):e.set(t,[n])},off:function(t,n){var i=e.get(t);i&&(n?i.splice(i.indexOf(n)>>>0,1):e.set(t,[]))},emit:function(t,n){var i=e.get(t);i&&i.slice().map(function(r){r(n)}),(i=e.get("*"))&&i.slice().map(function(r){r(t,n)})}}}/*!
 * merge-descriptors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */const X6=Object.prototype.hasOwnProperty;function Y6(e,t,n){if(!e)throw new TypeError("argument dest is required");if(!t)throw new TypeError("argument src is required");return n===void 0&&(n=!0),Object.getOwnPropertyNames(t).forEach(function(i){if(!n&&X6.call(e,i))return;const r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(e,i,r)}),e}function Eo(...e){let t;return typeof e[e.length-1]!="object"&&(t=e.pop()),e.slice(1).reduce((n,i,r)=>Y6(n,i,t),e[0])}function K6(e){return e.appContext.config.globalProperties.$router!==void 0}function Yd(e,t){return e.vnode.props!==null&&e.vnode.props[t]!==void 0}function ze(e,t){const n=e.vnode.props;if(n===null)return;const i=Object.keys(n),r=EC(i,a=>a.includes(`on${Ll(t)}`)||a.includes(`on${Ll(Ub(t))}`));return n[i[r]]}function Me(e){return e.value}function cn(e){var t;const n=e.parent;return!n.cesiumClass&&((t=n.proxy)==null?void 0:t.$options.name)!=="VcViewer"?cn(n):n}const eD=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,LC=e=>{if(typeof e!="string")throw new TypeError("Invalid argument expected string");const t=e.match(eD);if(!t)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},BC=e=>e==="*"||e==="x"||e==="X",RC=e=>{const t=parseInt(e,10);return isNaN(t)?e:t},tD=(e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t],nD=(e,t)=>{if(BC(e)||BC(t))return 0;const[n,i]=tD(RC(e),RC(t));return n>i?1:n<i?-1:0},VC=(e,t)=>{for(let n=0;n<Math.max(e.length,t.length);n++){const i=nD(e[n]||"0",t[n]||"0");if(i!==0)return i}return 0},iD=(e,t)=>{const n=LC(e),i=LC(t),r=n.pop(),a=i.pop(),s=VC(n,i);return s!==0?s:r&&a?VC(r.split("."),a.split(".")):r||a?r?-1:1:0},rD=(e,t,n)=>{oD(n);const i=iD(e,t);return FC[n].includes(i)},FC={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},$C=Object.keys(FC),oD=e=>{if(typeof e!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof e}`);if($C.indexOf(e)===-1)throw new Error(`Invalid operator, expected one of ${$C.join("|")}`)};var aD=`
czm_material czm_getMaterial(czm_materialInput materialInput) {
czm_material material = czm_getDefaultMaterial(materialInput);
material.diffuse = 1.5 * color.rgb;
vec2 st = materialInput.st;
vec3 str = materialInput.str;
float dis = distance(st, vec2(0.5, 0.5));
float per = fract(time);
if (abs(str.z) > 0.001) {
  discard;
}
if (dis > 0.5) {
  discard;
} else {
  float perDis = 0.5 / count;
  float disNum;
  float bl = .0;
  for (int i = 0; i <= 9; i++) {
    if (float(i) <= count) {
      disNum = perDis *float(i) - dis + per / count;
      if (disNum > 0.0) {
        if (disNum < perDis) {
          bl = 1.0 - disNum / perDis;
        } else if(disNum - perDis < perDis) {
          bl = 1.0 - abs(1.0 - disNum / perDis);
        }
        material.alpha = pow(bl, gradient);
      }
    }
  }
}
return material;
}`,sD=`
uniform float globalAlpha;
uniform bool axisY;
uniform bool mixt;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = repeat * materialInput.st;

  vec4 colorImage;
  if (speed != 0.0) {
    float currTime;
    if (time < 0.0) {
      currTime = speed * czm_frameNumber / 1000.0;
    } else {
      currTime = time;
    }
    colorImage = texture(image, vec2(fract((axisY ? st.t : st.s) - currTime), st.t));
  } else {
    colorImage = texture(image, st);
  }

  if (color.a == 0.0) {
    if (colorImage.rgb == vec3(1.0)) {
      discard;
    }
  }

  if (color.rgb == vec3(1.0)) {
    material.alpha = colorImage.a * globalAlpha;
    material.diffuse = colorImage.rgb;
  } else {
    material.alpha = colorImage.a * color.a * globalAlpha;
    if (mixt)
      material.diffuse = max(colorImage.rgb * color.rgb * material.alpha * 3.0, colorImage.rgb * color.rgb);
    else
      material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);
  }

  if (hasImage2) {
    vec4 colorBG = texture(image2, materialInput.st);
    if (colorBG.a > 0.5) {
      material.diffuse = color2.rgb;
    }
  }
  return material;
}
`,lD=`
czm_material czm_getMaterial(czm_materialInput materialInput)
{
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec4 colorImage = texture(image, vec2(fract(st.s - time), st.t));
  material.alpha = colorImage.a * color.a;
  material.diffuse = (colorImage.rgb+color.rgb)/2.0;
  return material;
}
`;let Fl=!1;class Kd{static extend(t){var n;if(Fl)return;const{Material:i,Color:r,Cartesian2:a}=Cesium,s=(n=t.scene.context)==null?void 0:n.webgl2;let l=sD,d=aD,h=lD;s||(l=l.replace(/texture\(/g,"texture2D("),d=d.replace(/texture\(/g,"texture2D("),h=h.replace(/texture\(/g,"texture2D(")),i.VcCircleWave="VcCircleWave",Cesium.Material._materialCache.addMaterial(i.VcCircleWave,{fabric:{type:i.VcCircleWave,uniforms:{color:new r(1,0,0,1),time:1,count:1,gradient:.1},source:d},translucent(){return!0}}),i.VcLineFlow="VcLineFlow",Cesium.Material._materialCache.addMaterial(i.VcLineFlow,{fabric:{type:i.VcLineFlow,uniforms:{image:i.DefaultImageId,color:new r(1,1,1,1),repeat:new a(1,1),axisY:!1,mixt:!1,speed:10,time:-1,hasImage2:!1,image2:i.DefaultImageId,color2:new r(1,1,1),globalAlpha:1},source:l},translucent(){return!0}}),i.VcLineTrail="VcLineTrail",Cesium.Material._materialCache.addMaterial(i.VcLineTrail,{fabric:{type:i.VcLineTrail,uniforms:{image:i.DefaultImageId,color:new r(1,0,0,1),repeat:new a(1,1),time:0,axisY:!1},source:h},translucent(){return!0}}),Fl=!0}static revoke(t){Fl&&(Fl=!1)}}class eh{constructor(t={}){this.options=t,this._definitionChanged=new Cesium.Event}get isConstant(){return!0}get definitionChanged(){return this._definitionChanged}getType(t){return null}getValue(t,n={}){return n}equals(t){return this===t}}class Zr extends eh{constructor(t){super(t);const{Event:n,defaultValue:i}=Cesium;Object.getOwnPropertyDescriptor(Zr.prototype,"color")||Object.defineProperties(Zr.prototype,{color:Cesium.createPropertyDescriptor("color")}),this._definitionChanged=new n,this._color=new Cesium.ConstantProperty(t.color),this._duration=i(t.duration,1e3),this.count=i(t.count,2),this.count<=0&&(this.count=1),this._gradient=i(t.gradient,.1),this._gradient===0&&(this._gradient=0),this._gradient>1&&(this._gradient=1),this._time=new Date().getTime()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}get color(){return this._color}set color(t){const n=this._color;n!==t&&(this._color=new Cesium.ConstantProperty(t),this._definitionChanged.raiseEvent(this,"color",t,n))}get duration(){return this._duration}set duration(t){const n=this._duration;n!==t&&(this._duration=t,this._definitionChanged.raiseEvent(this,"duration",t,n))}get count(){return this._count}set count(t){const n=this._count;n!==t&&(this._count=t,this._definitionChanged.raiseEvent(this,"count",t,n))}getType(){return"VcCircleWave"}getValue(t,n){return Cesium.defined(n)||(n={}),n.color=Cesium.Property.getValueOrClonedDefault(this._color,t,Cesium.Color.YELLOW,n.color),n.time=(new Date().getTime()-this._time)%this.duration/this.duration,n.count=this.count,n.gradient=1+10*(1-this._gradient),n}equals(t){return this===t||t instanceof Zr&&Cesium.Property.equals(this._color,t._color)}}class ra extends eh{constructor(t={}){var n,i,r,a,s,l,d,h,m,p;super(t);const{Color:g,Cartesian2:v,defined:b}=Cesium;this.image=(n=t.image)!=null?n:t.url,this.color=(i=t.color)!=null?i:new g(1,1,1,0),this.axisY=(r=t.axisY)!=null?r:!1,this.mixt=(a=t.mixt)!=null?a:!1,this.speed=(s=t.speed)!=null?s:10,this.duration=t.duration,this.repeat=(l=t.repeat)!=null?l:new v(1,1),this.image2=(d=t.image2)!=null?d:t.bgUrl,this.color2=(m=(h=t.color2)!=null?h:t.bgColor)!=null?m:new g(1,1,1,0),this.hasImage2=b(this.image2),this.globalAlpha=(p=t.globalAlpha)!=null?p:!0}getType(t){return"VcLineFlow"}getValue(t,n){const{Color:i,Cartesian2:r,defined:a}=Cesium;return!a(n)&&(n={}),n.image=this.image,n.color=Bl(this.color,new i(1,1,1,0),t),n.repeat=Jd(this.repeat,r,t),n.axisY=this.axisY,n.mixt=this.mixt,n.speed=Jd(this.speed,Number,t),this.duration?this._time===void 0&&(this._time=new Date().getTime(),n.time=(new Date().getTime()-this._time)/(this.duration*1e3)):n.time=-1,n.hasImage2=this.hasImage2,n.image2=this.image2,n.color2=Bl(this.color2,new i(1,1,1,0),t),n.globalAlpha=this.globalAlpha,n}equals(t){return this===t||t instanceof ra&&Cesium.Property.equals(this.color,t.color)&&Cesium.Property.equals(this.repeat,t.repeat)&&this.image===t.image&&this.axisY===t.axisY&&this.speed===t.speed&&this.hasImage2===t.hasImage2&&this.image2===t.image2&&this.image2===t.image2&&Cesium.Property.equals(this.color2,t.color2)}}class oa extends eh{constructor(t={}){var n,i,r,a,s,l,d;super(t);const{Color:h,Cartesian2:m,defined:p}=Cesium;this.image=(n=t.image)!=null?n:t.url,this.color=(i=t.color)!=null?i:new h(1,0,0,1),this.axisY=(r=t.axisY)!=null?r:!1,this.time=(a=t.time)!=null?a:0,this.repeat=(s=t.repeat)!=null?s:new m(1,1),this.loop=(l=t.loop)!=null?l:!0,this.duration=(d=t.duration)!=null?d:3,this._time=new Date().getTime()}getType(t){return"VcLineTrail"}getValue(t,n){const{Color:i,Cartesian2:r,defined:a}=Cesium;return!a(n)&&(n={}),this.lastTime>=.99&&!this.loop||(n.image=this.image,n.color=Bl(this.color,new i(1,1,1,0),t),n.repeat=Jd(this.repeat,r,t),n.axisY=this.axisY,n.time=(new Date().getTime()-this._time)%this.duration/this.duration,this.lastTime=n.time),n}equals(t){return this===t||t instanceof oa&&Cesium.Property.equals(this.color,t.color)&&Cesium.Property.equals(this.repeat,t.repeat)&&this.image===t.image&&this.axisY===t.axisY&&this.duration===t.duration}}var ui=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function th(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var $l={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */$l.exports,function(e,t){(function(){var n,i="4.17.21",r=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",d="__lodash_hash_undefined__",h=500,m="__lodash_placeholder__",p=1,g=2,v=4,b=1,P=2,w=1,S=2,T=4,_=8,M=16,A=32,D=64,z=128,$=256,L=512,U=30,Z="...",W=800,y=16,C=1,x=2,B=3,O=1/0,I=9007199254740991,V=17976931348623157e292,j=0/0,N=4294967295,H=N-1,ne=N>>>1,ie=[["ary",z],["bind",w],["bindKey",S],["curry",_],["curryRight",M],["flip",L],["partial",A],["partialRight",D],["rearg",$]],ee="[object Arguments]",Q="[object Array]",G="[object AsyncFunction]",J="[object Boolean]",oe="[object Date]",Y="[object DOMException]",X="[object Error]",se="[object Function]",re="[object GeneratorFunction]",de="[object Map]",ce="[object Number]",he="[object Null]",ge="[object Object]",Pe="[object Promise]",Ie="[object Proxy]",_e="[object RegExp]",Ee="[object Set]",De="[object String]",Se="[object Symbol]",xe="[object Undefined]",je="[object WeakMap]",K="[object WeakSet]",ve="[object ArrayBuffer]",Te="[object DataView]",Ae="[object Float32Array]",It="[object Float64Array]",pn="[object Int8Array]",Ze="[object Int16Array]",Ce="[object Int32Array]",Ge="[object Uint8Array]",Ne="[object Uint8ClampedArray]",He="[object Uint16Array]",ft="[object Uint32Array]",gt=/\b__p \+= '';/g,tt=/\b(__p \+=) '' \+/g,Ye=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Vi=/&(?:amp|lt|gt|quot|#39);/g,Go=/[&<>"']/g,Uo=RegExp(Vi.source),Iy=RegExp(Go.source),Pt=/<%-([\s\S]+?)%>/g,Ou=/<%([\s\S]+?)%>/g,Ft=/<%=([\s\S]+?)%>/g,lt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_n=/^\w*$/,mt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ht=/[\\^$.*+?()[\]{}|]/g,wr=RegExp(Ht.source),_r=/^\s+/,il=/\s/,Mu=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Su=/\{\n\/\* \[wrapped with (.+)\] \*/,Tu=/,? & /,R7=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,V7=/[()=,{}\[\]\/\s]/,F7=/\\(\\)?/g,$7=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Px=/\w*$/,N7=/^[-+]0x[0-9a-f]+$/i,j7=/^0b[01]+$/i,k7=/^\[object .+?Constructor\]$/,z7=/^0o[0-7]+$/i,G7=/^(?:0|[1-9]\d*)$/,U7=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Iu=/($^)/,H7=/['\n\r\u2028\u2029\\]/g,Au="\\ud800-\\udfff",W7="\\u0300-\\u036f",q7="\\ufe20-\\ufe2f",Z7="\\u20d0-\\u20ff",Ex=W7+q7+Z7,xx="\\u2700-\\u27bf",Ox="a-z\\xdf-\\xf6\\xf8-\\xff",Q7="\\xac\\xb1\\xd7\\xf7",J7="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",X7="\\u2000-\\u206f",Y7=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mx="A-Z\\xc0-\\xd6\\xd8-\\xde",Sx="\\ufe0e\\ufe0f",Tx=Q7+J7+X7+Y7,Ay="['\u2019]",K7="["+Au+"]",Ix="["+Tx+"]",Du="["+Ex+"]",Ax="\\d+",e$="["+xx+"]",Dx="["+Ox+"]",Lx="[^"+Au+Tx+Ax+xx+Ox+Mx+"]",Dy="\\ud83c[\\udffb-\\udfff]",t$="(?:"+Du+"|"+Dy+")",Bx="[^"+Au+"]",Ly="(?:\\ud83c[\\udde6-\\uddff]){2}",By="[\\ud800-\\udbff][\\udc00-\\udfff]",Va="["+Mx+"]",Rx="\\u200d",Vx="(?:"+Dx+"|"+Lx+")",n$="(?:"+Va+"|"+Lx+")",Fx="(?:"+Ay+"(?:d|ll|m|re|s|t|ve))?",$x="(?:"+Ay+"(?:D|LL|M|RE|S|T|VE))?",Nx=t$+"?",jx="["+Sx+"]?",i$="(?:"+Rx+"(?:"+[Bx,Ly,By].join("|")+")"+jx+Nx+")*",r$="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",o$="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",kx=jx+Nx+i$,a$="(?:"+[e$,Ly,By].join("|")+")"+kx,s$="(?:"+[Bx+Du+"?",Du,Ly,By,K7].join("|")+")",l$=RegExp(Ay,"g"),c$=RegExp(Du,"g"),Ry=RegExp(Dy+"(?="+Dy+")|"+s$+kx,"g"),u$=RegExp([Va+"?"+Dx+"+"+Fx+"(?="+[Ix,Va,"$"].join("|")+")",n$+"+"+$x+"(?="+[Ix,Va+Vx,"$"].join("|")+")",Va+"?"+Vx+"+"+Fx,Va+"+"+$x,o$,r$,Ax,a$].join("|"),"g"),d$=RegExp("["+Rx+Au+Ex+Sx+"]"),h$=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,m$=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],p$=-1,$t={};$t[Ae]=$t[It]=$t[pn]=$t[Ze]=$t[Ce]=$t[Ge]=$t[Ne]=$t[He]=$t[ft]=!0,$t[ee]=$t[Q]=$t[ve]=$t[J]=$t[Te]=$t[oe]=$t[X]=$t[se]=$t[de]=$t[ce]=$t[ge]=$t[_e]=$t[Ee]=$t[De]=$t[je]=!1;var At={};At[ee]=At[Q]=At[ve]=At[Te]=At[J]=At[oe]=At[Ae]=At[It]=At[pn]=At[Ze]=At[Ce]=At[de]=At[ce]=At[ge]=At[_e]=At[Ee]=At[De]=At[Se]=At[Ge]=At[Ne]=At[He]=At[ft]=!0,At[X]=At[se]=At[je]=!1;var f$={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},g$={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},v$={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},y$={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},b$=parseFloat,C$=parseInt,zx=typeof ui=="object"&&ui&&ui.Object===Object&&ui,w$=typeof self=="object"&&self&&self.Object===Object&&self,An=zx||w$||Function("return this")(),Vy=t&&!t.nodeType&&t,Ho=Vy&&!0&&e&&!e.nodeType&&e,Gx=Ho&&Ho.exports===Vy,Fy=Gx&&zx.process,Fi=function(){try{var le=Ho&&Ho.require&&Ho.require("util").types;return le||Fy&&Fy.binding&&Fy.binding("util")}catch(fe){}}(),Ux=Fi&&Fi.isArrayBuffer,Hx=Fi&&Fi.isDate,Wx=Fi&&Fi.isMap,qx=Fi&&Fi.isRegExp,Zx=Fi&&Fi.isSet,Qx=Fi&&Fi.isTypedArray;function vi(le,fe,me){switch(me.length){case 0:return le.call(fe);case 1:return le.call(fe,me[0]);case 2:return le.call(fe,me[0],me[1]);case 3:return le.call(fe,me[0],me[1],me[2])}return le.apply(fe,me)}function _$(le,fe,me,$e){for(var Ke=-1,vt=le==null?0:le.length;++Ke<vt;){var fn=le[Ke];fe($e,fn,me(fn),le)}return $e}function $i(le,fe){for(var me=-1,$e=le==null?0:le.length;++me<$e&&fe(le[me],me,le)!==!1;);return le}function P$(le,fe){for(var me=le==null?0:le.length;me--&&fe(le[me],me,le)!==!1;);return le}function Jx(le,fe){for(var me=-1,$e=le==null?0:le.length;++me<$e;)if(!fe(le[me],me,le))return!1;return!0}function co(le,fe){for(var me=-1,$e=le==null?0:le.length,Ke=0,vt=[];++me<$e;){var fn=le[me];fe(fn,me,le)&&(vt[Ke++]=fn)}return vt}function Lu(le,fe){var me=le==null?0:le.length;return!!me&&Fa(le,fe,0)>-1}function $y(le,fe,me){for(var $e=-1,Ke=le==null?0:le.length;++$e<Ke;)if(me(fe,le[$e]))return!0;return!1}function Gt(le,fe){for(var me=-1,$e=le==null?0:le.length,Ke=Array($e);++me<$e;)Ke[me]=fe(le[me],me,le);return Ke}function uo(le,fe){for(var me=-1,$e=fe.length,Ke=le.length;++me<$e;)le[Ke+me]=fe[me];return le}function Ny(le,fe,me,$e){var Ke=-1,vt=le==null?0:le.length;for($e&&vt&&(me=le[++Ke]);++Ke<vt;)me=fe(me,le[Ke],Ke,le);return me}function E$(le,fe,me,$e){var Ke=le==null?0:le.length;for($e&&Ke&&(me=le[--Ke]);Ke--;)me=fe(me,le[Ke],Ke,le);return me}function jy(le,fe){for(var me=-1,$e=le==null?0:le.length;++me<$e;)if(fe(le[me],me,le))return!0;return!1}var x$=ky("length");function O$(le){return le.split("")}function M$(le){return le.match(R7)||[]}function Xx(le,fe,me){var $e;return me(le,function(Ke,vt,fn){if(fe(Ke,vt,fn))return $e=vt,!1}),$e}function Bu(le,fe,me,$e){for(var Ke=le.length,vt=me+($e?1:-1);$e?vt--:++vt<Ke;)if(fe(le[vt],vt,le))return vt;return-1}function Fa(le,fe,me){return fe===fe?N$(le,fe,me):Bu(le,Yx,me)}function S$(le,fe,me,$e){for(var Ke=me-1,vt=le.length;++Ke<vt;)if($e(le[Ke],fe))return Ke;return-1}function Yx(le){return le!==le}function Kx(le,fe){var me=le==null?0:le.length;return me?Gy(le,fe)/me:j}function ky(le){return function(fe){return fe==null?n:fe[le]}}function zy(le){return function(fe){return le==null?n:le[fe]}}function eO(le,fe,me,$e,Ke){return Ke(le,function(vt,fn,Ot){me=$e?($e=!1,vt):fe(me,vt,fn,Ot)}),me}function T$(le,fe){var me=le.length;for(le.sort(fe);me--;)le[me]=le[me].value;return le}function Gy(le,fe){for(var me,$e=-1,Ke=le.length;++$e<Ke;){var vt=fe(le[$e]);vt!==n&&(me=me===n?vt:me+vt)}return me}function Uy(le,fe){for(var me=-1,$e=Array(le);++me<le;)$e[me]=fe(me);return $e}function I$(le,fe){return Gt(fe,function(me){return[me,le[me]]})}function tO(le){return le&&le.slice(0,oO(le)+1).replace(_r,"")}function yi(le){return function(fe){return le(fe)}}function Hy(le,fe){return Gt(fe,function(me){return le[me]})}function rl(le,fe){return le.has(fe)}function nO(le,fe){for(var me=-1,$e=le.length;++me<$e&&Fa(fe,le[me],0)>-1;);return me}function iO(le,fe){for(var me=le.length;me--&&Fa(fe,le[me],0)>-1;);return me}function A$(le,fe){for(var me=le.length,$e=0;me--;)le[me]===fe&&++$e;return $e}var D$=zy(f$),L$=zy(g$);function B$(le){return"\\"+y$[le]}function R$(le,fe){return le==null?n:le[fe]}function $a(le){return d$.test(le)}function V$(le){return h$.test(le)}function F$(le){for(var fe,me=[];!(fe=le.next()).done;)me.push(fe.value);return me}function Wy(le){var fe=-1,me=Array(le.size);return le.forEach(function($e,Ke){me[++fe]=[Ke,$e]}),me}function rO(le,fe){return function(me){return le(fe(me))}}function ho(le,fe){for(var me=-1,$e=le.length,Ke=0,vt=[];++me<$e;){var fn=le[me];(fn===fe||fn===m)&&(le[me]=m,vt[Ke++]=me)}return vt}function Ru(le){var fe=-1,me=Array(le.size);return le.forEach(function($e){me[++fe]=$e}),me}function $$(le){var fe=-1,me=Array(le.size);return le.forEach(function($e){me[++fe]=[$e,$e]}),me}function N$(le,fe,me){for(var $e=me-1,Ke=le.length;++$e<Ke;)if(le[$e]===fe)return $e;return-1}function j$(le,fe,me){for(var $e=me+1;$e--;)if(le[$e]===fe)return $e;return $e}function Na(le){return $a(le)?z$(le):x$(le)}function ir(le){return $a(le)?G$(le):O$(le)}function oO(le){for(var fe=le.length;fe--&&il.test(le.charAt(fe)););return fe}var k$=zy(v$);function z$(le){for(var fe=Ry.lastIndex=0;Ry.test(le);)++fe;return fe}function G$(le){return le.match(Ry)||[]}function U$(le){return le.match(u$)||[]}var H$=function le(fe){fe=fe==null?An:ja.defaults(An.Object(),fe,ja.pick(An,m$));var me=fe.Array,$e=fe.Date,Ke=fe.Error,vt=fe.Function,fn=fe.Math,Ot=fe.Object,qy=fe.RegExp,W$=fe.String,Ni=fe.TypeError,Vu=me.prototype,q$=vt.prototype,ka=Ot.prototype,Fu=fe["__core-js_shared__"],$u=q$.toString,Et=ka.hasOwnProperty,Z$=0,aO=function(){var o=/[^.]+$/.exec(Fu&&Fu.keys&&Fu.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Nu=ka.toString,Q$=$u.call(Ot),J$=An._,X$=qy("^"+$u.call(Et).replace(Ht,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ju=Gx?fe.Buffer:n,mo=fe.Symbol,ku=fe.Uint8Array,sO=ju?ju.allocUnsafe:n,zu=rO(Ot.getPrototypeOf,Ot),lO=Ot.create,cO=ka.propertyIsEnumerable,Gu=Vu.splice,uO=mo?mo.isConcatSpreadable:n,ol=mo?mo.iterator:n,Wo=mo?mo.toStringTag:n,Uu=function(){try{var o=Xo(Ot,"defineProperty");return o({},"",{}),o}catch(c){}}(),Y$=fe.clearTimeout!==An.clearTimeout&&fe.clearTimeout,K$=$e&&$e.now!==An.Date.now&&$e.now,eN=fe.setTimeout!==An.setTimeout&&fe.setTimeout,Hu=fn.ceil,Wu=fn.floor,Zy=Ot.getOwnPropertySymbols,tN=ju?ju.isBuffer:n,dO=fe.isFinite,nN=Vu.join,iN=rO(Ot.keys,Ot),gn=fn.max,Vn=fn.min,rN=$e.now,oN=fe.parseInt,hO=fn.random,aN=Vu.reverse,Qy=Xo(fe,"DataView"),al=Xo(fe,"Map"),Jy=Xo(fe,"Promise"),za=Xo(fe,"Set"),sl=Xo(fe,"WeakMap"),ll=Xo(Ot,"create"),qu=sl&&new sl,Ga={},sN=Yo(Qy),lN=Yo(al),cN=Yo(Jy),uN=Yo(za),dN=Yo(sl),Zu=mo?mo.prototype:n,cl=Zu?Zu.valueOf:n,mO=Zu?Zu.toString:n;function k(o){if(tn(o)&&!et(o)&&!(o instanceof ct)){if(o instanceof ji)return o;if(Et.call(o,"__wrapped__"))return pM(o)}return new ji(o)}var Ua=function(){function o(){}return function(c){if(!Wt(c))return{};if(lO)return lO(c);o.prototype=c;var f=new o;return o.prototype=n,f}}();function Qu(){}function ji(o,c){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=n}k.templateSettings={escape:Pt,evaluate:Ou,interpolate:Ft,variable:"",imports:{_:k}},k.prototype=Qu.prototype,k.prototype.constructor=k,ji.prototype=Ua(Qu.prototype),ji.prototype.constructor=ji;function ct(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=N,this.__views__=[]}function hN(){var o=new ct(this.__wrapped__);return o.__actions__=ii(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=ii(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=ii(this.__views__),o}function mN(){if(this.__filtered__){var o=new ct(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function pN(){var o=this.__wrapped__.value(),c=this.__dir__,f=et(o),E=c<0,R=f?o.length:0,q=Oj(0,R,this.__views__),te=q.start,ae=q.end,ue=ae-te,ye=E?ae:te-1,be=this.__iteratees__,we=be.length,Re=0,ke=Vn(ue,this.__takeCount__);if(!f||!E&&R==ue&&ke==ue)return FO(o,this.__actions__);var Qe=[];e:for(;ue--&&Re<ke;){ye+=c;for(var it=-1,Je=o[ye];++it<we;){var st=be[it],ht=st.iteratee,wi=st.type,qn=ht(Je);if(wi==x)Je=qn;else if(!qn){if(wi==C)continue e;break e}}Qe[Re++]=Je}return Qe}ct.prototype=Ua(Qu.prototype),ct.prototype.constructor=ct;function qo(o){var c=-1,f=o==null?0:o.length;for(this.clear();++c<f;){var E=o[c];this.set(E[0],E[1])}}function fN(){this.__data__=ll?ll(null):{},this.size=0}function gN(o){var c=this.has(o)&&delete this.__data__[o];return this.size-=c?1:0,c}function vN(o){var c=this.__data__;if(ll){var f=c[o];return f===d?n:f}return Et.call(c,o)?c[o]:n}function yN(o){var c=this.__data__;return ll?c[o]!==n:Et.call(c,o)}function bN(o,c){var f=this.__data__;return this.size+=this.has(o)?0:1,f[o]=ll&&c===n?d:c,this}qo.prototype.clear=fN,qo.prototype.delete=gN,qo.prototype.get=vN,qo.prototype.has=yN,qo.prototype.set=bN;function Nr(o){var c=-1,f=o==null?0:o.length;for(this.clear();++c<f;){var E=o[c];this.set(E[0],E[1])}}function CN(){this.__data__=[],this.size=0}function wN(o){var c=this.__data__,f=Ju(c,o);if(f<0)return!1;var E=c.length-1;return f==E?c.pop():Gu.call(c,f,1),--this.size,!0}function _N(o){var c=this.__data__,f=Ju(c,o);return f<0?n:c[f][1]}function PN(o){return Ju(this.__data__,o)>-1}function EN(o,c){var f=this.__data__,E=Ju(f,o);return E<0?(++this.size,f.push([o,c])):f[E][1]=c,this}Nr.prototype.clear=CN,Nr.prototype.delete=wN,Nr.prototype.get=_N,Nr.prototype.has=PN,Nr.prototype.set=EN;function jr(o){var c=-1,f=o==null?0:o.length;for(this.clear();++c<f;){var E=o[c];this.set(E[0],E[1])}}function xN(){this.size=0,this.__data__={hash:new qo,map:new(al||Nr),string:new qo}}function ON(o){var c=ld(this,o).delete(o);return this.size-=c?1:0,c}function MN(o){return ld(this,o).get(o)}function SN(o){return ld(this,o).has(o)}function TN(o,c){var f=ld(this,o),E=f.size;return f.set(o,c),this.size+=f.size==E?0:1,this}jr.prototype.clear=xN,jr.prototype.delete=ON,jr.prototype.get=MN,jr.prototype.has=SN,jr.prototype.set=TN;function Zo(o){var c=-1,f=o==null?0:o.length;for(this.__data__=new jr;++c<f;)this.add(o[c])}function IN(o){return this.__data__.set(o,d),this}function AN(o){return this.__data__.has(o)}Zo.prototype.add=Zo.prototype.push=IN,Zo.prototype.has=AN;function rr(o){var c=this.__data__=new Nr(o);this.size=c.size}function DN(){this.__data__=new Nr,this.size=0}function LN(o){var c=this.__data__,f=c.delete(o);return this.size=c.size,f}function BN(o){return this.__data__.get(o)}function RN(o){return this.__data__.has(o)}function VN(o,c){var f=this.__data__;if(f instanceof Nr){var E=f.__data__;if(!al||E.length<r-1)return E.push([o,c]),this.size=++f.size,this;f=this.__data__=new jr(E)}return f.set(o,c),this.size=f.size,this}rr.prototype.clear=DN,rr.prototype.delete=LN,rr.prototype.get=BN,rr.prototype.has=RN,rr.prototype.set=VN;function pO(o,c){var f=et(o),E=!f&&Ko(o),R=!f&&!E&&yo(o),q=!f&&!E&&!R&&Za(o),te=f||E||R||q,ae=te?Uy(o.length,W$):[],ue=ae.length;for(var ye in o)(c||Et.call(o,ye))&&!(te&&(ye=="length"||R&&(ye=="offset"||ye=="parent")||q&&(ye=="buffer"||ye=="byteLength"||ye=="byteOffset")||Ur(ye,ue)))&&ae.push(ye);return ae}function fO(o){var c=o.length;return c?o[s1(0,c-1)]:n}function FN(o,c){return cd(ii(o),Qo(c,0,o.length))}function $N(o){return cd(ii(o))}function Xy(o,c,f){(f!==n&&!or(o[c],f)||f===n&&!(c in o))&&kr(o,c,f)}function ul(o,c,f){var E=o[c];(!(Et.call(o,c)&&or(E,f))||f===n&&!(c in o))&&kr(o,c,f)}function Ju(o,c){for(var f=o.length;f--;)if(or(o[f][0],c))return f;return-1}function NN(o,c,f,E){return po(o,function(R,q,te){c(E,R,f(R),te)}),E}function gO(o,c){return o&&Er(c,Pn(c),o)}function jN(o,c){return o&&Er(c,oi(c),o)}function kr(o,c,f){c=="__proto__"&&Uu?Uu(o,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):o[c]=f}function Yy(o,c){for(var f=-1,E=c.length,R=me(E),q=o==null;++f<E;)R[f]=q?n:D1(o,c[f]);return R}function Qo(o,c,f){return o===o&&(f!==n&&(o=o<=f?o:f),c!==n&&(o=o>=c?o:c)),o}function ki(o,c,f,E,R,q){var te,ae=c&p,ue=c&g,ye=c&v;if(f&&(te=R?f(o,E,R,q):f(o)),te!==n)return te;if(!Wt(o))return o;var be=et(o);if(be){if(te=Sj(o),!ae)return ii(o,te)}else{var we=Fn(o),Re=we==se||we==re;if(yo(o))return jO(o,ae);if(we==ge||we==ee||Re&&!R){if(te=ue||Re?{}:oM(o),!ae)return ue?vj(o,jN(te,o)):gj(o,gO(te,o))}else{if(!At[we])return R?o:{};te=Tj(o,we,ae)}}q||(q=new rr);var ke=q.get(o);if(ke)return ke;q.set(o,te),BM(o)?o.forEach(function(Je){te.add(ki(Je,c,f,Je,o,q))}):DM(o)&&o.forEach(function(Je,st){te.set(st,ki(Je,c,f,st,o,q))});var Qe=ye?ue?y1:v1:ue?oi:Pn,it=be?n:Qe(o);return $i(it||o,function(Je,st){it&&(st=Je,Je=o[st]),ul(te,st,ki(Je,c,f,st,o,q))}),te}function kN(o){var c=Pn(o);return function(f){return vO(f,o,c)}}function vO(o,c,f){var E=f.length;if(o==null)return!E;for(o=Ot(o);E--;){var R=f[E],q=c[R],te=o[R];if(te===n&&!(R in o)||!q(te))return!1}return!0}function yO(o,c,f){if(typeof o!="function")throw new Ni(s);return vl(function(){o.apply(n,f)},c)}function dl(o,c,f,E){var R=-1,q=Lu,te=!0,ae=o.length,ue=[],ye=c.length;if(!ae)return ue;f&&(c=Gt(c,yi(f))),E?(q=$y,te=!1):c.length>=r&&(q=rl,te=!1,c=new Zo(c));e:for(;++R<ae;){var be=o[R],we=f==null?be:f(be);if(be=E||be!==0?be:0,te&&we===we){for(var Re=ye;Re--;)if(c[Re]===we)continue e;ue.push(be)}else q(c,we,E)||ue.push(be)}return ue}var po=HO(Pr),bO=HO(e1,!0);function zN(o,c){var f=!0;return po(o,function(E,R,q){return f=!!c(E,R,q),f}),f}function Xu(o,c,f){for(var E=-1,R=o.length;++E<R;){var q=o[E],te=c(q);if(te!=null&&(ae===n?te===te&&!Ci(te):f(te,ae)))var ae=te,ue=q}return ue}function GN(o,c,f,E){var R=o.length;for(f=nt(f),f<0&&(f=-f>R?0:R+f),E=E===n||E>R?R:nt(E),E<0&&(E+=R),E=f>E?0:VM(E);f<E;)o[f++]=c;return o}function CO(o,c){var f=[];return po(o,function(E,R,q){c(E,R,q)&&f.push(E)}),f}function Dn(o,c,f,E,R){var q=-1,te=o.length;for(f||(f=Aj),R||(R=[]);++q<te;){var ae=o[q];c>0&&f(ae)?c>1?Dn(ae,c-1,f,E,R):uo(R,ae):E||(R[R.length]=ae)}return R}var Ky=WO(),wO=WO(!0);function Pr(o,c){return o&&Ky(o,c,Pn)}function e1(o,c){return o&&wO(o,c,Pn)}function Yu(o,c){return co(c,function(f){return Hr(o[f])})}function Jo(o,c){c=go(c,o);for(var f=0,E=c.length;o!=null&&f<E;)o=o[xr(c[f++])];return f&&f==E?o:n}function _O(o,c,f){var E=c(o);return et(o)?E:uo(E,f(o))}function Hn(o){return o==null?o===n?xe:he:Wo&&Wo in Ot(o)?xj(o):$j(o)}function t1(o,c){return o>c}function UN(o,c){return o!=null&&Et.call(o,c)}function HN(o,c){return o!=null&&c in Ot(o)}function WN(o,c,f){return o>=Vn(c,f)&&o<gn(c,f)}function n1(o,c,f){for(var E=f?$y:Lu,R=o[0].length,q=o.length,te=q,ae=me(q),ue=1/0,ye=[];te--;){var be=o[te];te&&c&&(be=Gt(be,yi(c))),ue=Vn(be.length,ue),ae[te]=!f&&(c||R>=120&&be.length>=120)?new Zo(te&&be):n}be=o[0];var we=-1,Re=ae[0];e:for(;++we<R&&ye.length<ue;){var ke=be[we],Qe=c?c(ke):ke;if(ke=f||ke!==0?ke:0,!(Re?rl(Re,Qe):E(ye,Qe,f))){for(te=q;--te;){var it=ae[te];if(!(it?rl(it,Qe):E(o[te],Qe,f)))continue e}Re&&Re.push(Qe),ye.push(ke)}}return ye}function qN(o,c,f,E){return Pr(o,function(R,q,te){c(E,f(R),q,te)}),E}function hl(o,c,f){c=go(c,o),o=cM(o,c);var E=o==null?o:o[xr(Gi(c))];return E==null?n:vi(E,o,f)}function PO(o){return tn(o)&&Hn(o)==ee}function ZN(o){return tn(o)&&Hn(o)==ve}function QN(o){return tn(o)&&Hn(o)==oe}function ml(o,c,f,E,R){return o===c?!0:o==null||c==null||!tn(o)&&!tn(c)?o!==o&&c!==c:JN(o,c,f,E,ml,R)}function JN(o,c,f,E,R,q){var te=et(o),ae=et(c),ue=te?Q:Fn(o),ye=ae?Q:Fn(c);ue=ue==ee?ge:ue,ye=ye==ee?ge:ye;var be=ue==ge,we=ye==ge,Re=ue==ye;if(Re&&yo(o)){if(!yo(c))return!1;te=!0,be=!1}if(Re&&!be)return q||(q=new rr),te||Za(o)?nM(o,c,f,E,R,q):Pj(o,c,ue,f,E,R,q);if(!(f&b)){var ke=be&&Et.call(o,"__wrapped__"),Qe=we&&Et.call(c,"__wrapped__");if(ke||Qe){var it=ke?o.value():o,Je=Qe?c.value():c;return q||(q=new rr),R(it,Je,f,E,q)}}return Re?(q||(q=new rr),Ej(o,c,f,E,R,q)):!1}function XN(o){return tn(o)&&Fn(o)==de}function i1(o,c,f,E){var R=f.length,q=R,te=!E;if(o==null)return!q;for(o=Ot(o);R--;){var ae=f[R];if(te&&ae[2]?ae[1]!==o[ae[0]]:!(ae[0]in o))return!1}for(;++R<q;){ae=f[R];var ue=ae[0],ye=o[ue],be=ae[1];if(te&&ae[2]){if(ye===n&&!(ue in o))return!1}else{var we=new rr;if(E)var Re=E(ye,be,ue,o,c,we);if(!(Re===n?ml(be,ye,b|P,E,we):Re))return!1}}return!0}function EO(o){if(!Wt(o)||Lj(o))return!1;var c=Hr(o)?X$:k7;return c.test(Yo(o))}function YN(o){return tn(o)&&Hn(o)==_e}function KN(o){return tn(o)&&Fn(o)==Ee}function ej(o){return tn(o)&&fd(o.length)&&!!$t[Hn(o)]}function xO(o){return typeof o=="function"?o:o==null?ai:typeof o=="object"?et(o)?SO(o[0],o[1]):MO(o):qM(o)}function r1(o){if(!gl(o))return iN(o);var c=[];for(var f in Ot(o))Et.call(o,f)&&f!="constructor"&&c.push(f);return c}function tj(o){if(!Wt(o))return Fj(o);var c=gl(o),f=[];for(var E in o)E=="constructor"&&(c||!Et.call(o,E))||f.push(E);return f}function o1(o,c){return o<c}function OO(o,c){var f=-1,E=ri(o)?me(o.length):[];return po(o,function(R,q,te){E[++f]=c(R,q,te)}),E}function MO(o){var c=C1(o);return c.length==1&&c[0][2]?sM(c[0][0],c[0][1]):function(f){return f===o||i1(f,o,c)}}function SO(o,c){return _1(o)&&aM(c)?sM(xr(o),c):function(f){var E=D1(f,o);return E===n&&E===c?L1(f,o):ml(c,E,b|P)}}function Ku(o,c,f,E,R){o!==c&&Ky(c,function(q,te){if(R||(R=new rr),Wt(q))nj(o,c,te,f,Ku,E,R);else{var ae=E?E(E1(o,te),q,te+"",o,c,R):n;ae===n&&(ae=q),Xy(o,te,ae)}},oi)}function nj(o,c,f,E,R,q,te){var ae=E1(o,f),ue=E1(c,f),ye=te.get(ue);if(ye){Xy(o,f,ye);return}var be=q?q(ae,ue,f+"",o,c,te):n,we=be===n;if(we){var Re=et(ue),ke=!Re&&yo(ue),Qe=!Re&&!ke&&Za(ue);be=ue,Re||ke||Qe?et(ae)?be=ae:on(ae)?be=ii(ae):ke?(we=!1,be=jO(ue,!0)):Qe?(we=!1,be=kO(ue,!0)):be=[]:yl(ue)||Ko(ue)?(be=ae,Ko(ae)?be=FM(ae):(!Wt(ae)||Hr(ae))&&(be=oM(ue))):we=!1}we&&(te.set(ue,be),R(be,ue,E,q,te),te.delete(ue)),Xy(o,f,be)}function TO(o,c){var f=o.length;if(f)return c+=c<0?f:0,Ur(c,f)?o[c]:n}function IO(o,c,f){c.length?c=Gt(c,function(q){return et(q)?function(te){return Jo(te,q.length===1?q[0]:q)}:q}):c=[ai];var E=-1;c=Gt(c,yi(We()));var R=OO(o,function(q,te,ae){var ue=Gt(c,function(ye){return ye(q)});return{criteria:ue,index:++E,value:q}});return T$(R,function(q,te){return fj(q,te,f)})}function ij(o,c){return AO(o,c,function(f,E){return L1(o,E)})}function AO(o,c,f){for(var E=-1,R=c.length,q={};++E<R;){var te=c[E],ae=Jo(o,te);f(ae,te)&&pl(q,go(te,o),ae)}return q}function rj(o){return function(c){return Jo(c,o)}}function a1(o,c,f,E){var R=E?S$:Fa,q=-1,te=c.length,ae=o;for(o===c&&(c=ii(c)),f&&(ae=Gt(o,yi(f)));++q<te;)for(var ue=0,ye=c[q],be=f?f(ye):ye;(ue=R(ae,be,ue,E))>-1;)ae!==o&&Gu.call(ae,ue,1),Gu.call(o,ue,1);return o}function DO(o,c){for(var f=o?c.length:0,E=f-1;f--;){var R=c[f];if(f==E||R!==q){var q=R;Ur(R)?Gu.call(o,R,1):u1(o,R)}}return o}function s1(o,c){return o+Wu(hO()*(c-o+1))}function oj(o,c,f,E){for(var R=-1,q=gn(Hu((c-o)/(f||1)),0),te=me(q);q--;)te[E?q:++R]=o,o+=f;return te}function l1(o,c){var f="";if(!o||c<1||c>I)return f;do c%2&&(f+=o),c=Wu(c/2),c&&(o+=o);while(c);return f}function ot(o,c){return x1(lM(o,c,ai),o+"")}function aj(o){return fO(Qa(o))}function sj(o,c){var f=Qa(o);return cd(f,Qo(c,0,f.length))}function pl(o,c,f,E){if(!Wt(o))return o;c=go(c,o);for(var R=-1,q=c.length,te=q-1,ae=o;ae!=null&&++R<q;){var ue=xr(c[R]),ye=f;if(ue==="__proto__"||ue==="constructor"||ue==="prototype")return o;if(R!=te){var be=ae[ue];ye=E?E(be,ue,ae):n,ye===n&&(ye=Wt(be)?be:Ur(c[R+1])?[]:{})}ul(ae,ue,ye),ae=ae[ue]}return o}var LO=qu?function(o,c){return qu.set(o,c),o}:ai,lj=Uu?function(o,c){return Uu(o,"toString",{configurable:!0,enumerable:!1,value:R1(c),writable:!0})}:ai;function cj(o){return cd(Qa(o))}function zi(o,c,f){var E=-1,R=o.length;c<0&&(c=-c>R?0:R+c),f=f>R?R:f,f<0&&(f+=R),R=c>f?0:f-c>>>0,c>>>=0;for(var q=me(R);++E<R;)q[E]=o[E+c];return q}function uj(o,c){var f;return po(o,function(E,R,q){return f=c(E,R,q),!f}),!!f}function ed(o,c,f){var E=0,R=o==null?E:o.length;if(typeof c=="number"&&c===c&&R<=ne){for(;E<R;){var q=E+R>>>1,te=o[q];te!==null&&!Ci(te)&&(f?te<=c:te<c)?E=q+1:R=q}return R}return c1(o,c,ai,f)}function c1(o,c,f,E){var R=0,q=o==null?0:o.length;if(q===0)return 0;c=f(c);for(var te=c!==c,ae=c===null,ue=Ci(c),ye=c===n;R<q;){var be=Wu((R+q)/2),we=f(o[be]),Re=we!==n,ke=we===null,Qe=we===we,it=Ci(we);if(te)var Je=E||Qe;else ye?Je=Qe&&(E||Re):ae?Je=Qe&&Re&&(E||!ke):ue?Je=Qe&&Re&&!ke&&(E||!it):ke||it?Je=!1:Je=E?we<=c:we<c;Je?R=be+1:q=be}return Vn(q,H)}function BO(o,c){for(var f=-1,E=o.length,R=0,q=[];++f<E;){var te=o[f],ae=c?c(te):te;if(!f||!or(ae,ue)){var ue=ae;q[R++]=te===0?0:te}}return q}function RO(o){return typeof o=="number"?o:Ci(o)?j:+o}function bi(o){if(typeof o=="string")return o;if(et(o))return Gt(o,bi)+"";if(Ci(o))return mO?mO.call(o):"";var c=o+"";return c=="0"&&1/o==-O?"-0":c}function fo(o,c,f){var E=-1,R=Lu,q=o.length,te=!0,ae=[],ue=ae;if(f)te=!1,R=$y;else if(q>=r){var ye=c?null:wj(o);if(ye)return Ru(ye);te=!1,R=rl,ue=new Zo}else ue=c?[]:ae;e:for(;++E<q;){var be=o[E],we=c?c(be):be;if(be=f||be!==0?be:0,te&&we===we){for(var Re=ue.length;Re--;)if(ue[Re]===we)continue e;c&&ue.push(we),ae.push(be)}else R(ue,we,f)||(ue!==ae&&ue.push(we),ae.push(be))}return ae}function u1(o,c){return c=go(c,o),o=cM(o,c),o==null||delete o[xr(Gi(c))]}function VO(o,c,f,E){return pl(o,c,f(Jo(o,c)),E)}function td(o,c,f,E){for(var R=o.length,q=E?R:-1;(E?q--:++q<R)&&c(o[q],q,o););return f?zi(o,E?0:q,E?q+1:R):zi(o,E?q+1:0,E?R:q)}function FO(o,c){var f=o;return f instanceof ct&&(f=f.value()),Ny(c,function(E,R){return R.func.apply(R.thisArg,uo([E],R.args))},f)}function d1(o,c,f){var E=o.length;if(E<2)return E?fo(o[0]):[];for(var R=-1,q=me(E);++R<E;)for(var te=o[R],ae=-1;++ae<E;)ae!=R&&(q[R]=dl(q[R]||te,o[ae],c,f));return fo(Dn(q,1),c,f)}function $O(o,c,f){for(var E=-1,R=o.length,q=c.length,te={};++E<R;){var ae=E<q?c[E]:n;f(te,o[E],ae)}return te}function h1(o){return on(o)?o:[]}function m1(o){return typeof o=="function"?o:ai}function go(o,c){return et(o)?o:_1(o,c)?[o]:mM(wt(o))}var dj=ot;function vo(o,c,f){var E=o.length;return f=f===n?E:f,!c&&f>=E?o:zi(o,c,f)}var NO=Y$||function(o){return An.clearTimeout(o)};function jO(o,c){if(c)return o.slice();var f=o.length,E=sO?sO(f):new o.constructor(f);return o.copy(E),E}function p1(o){var c=new o.constructor(o.byteLength);return new ku(c).set(new ku(o)),c}function hj(o,c){var f=c?p1(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.byteLength)}function mj(o){var c=new o.constructor(o.source,Px.exec(o));return c.lastIndex=o.lastIndex,c}function pj(o){return cl?Ot(cl.call(o)):{}}function kO(o,c){var f=c?p1(o.buffer):o.buffer;return new o.constructor(f,o.byteOffset,o.length)}function zO(o,c){if(o!==c){var f=o!==n,E=o===null,R=o===o,q=Ci(o),te=c!==n,ae=c===null,ue=c===c,ye=Ci(c);if(!ae&&!ye&&!q&&o>c||q&&te&&ue&&!ae&&!ye||E&&te&&ue||!f&&ue||!R)return 1;if(!E&&!q&&!ye&&o<c||ye&&f&&R&&!E&&!q||ae&&f&&R||!te&&R||!ue)return-1}return 0}function fj(o,c,f){for(var E=-1,R=o.criteria,q=c.criteria,te=R.length,ae=f.length;++E<te;){var ue=zO(R[E],q[E]);if(ue){if(E>=ae)return ue;var ye=f[E];return ue*(ye=="desc"?-1:1)}}return o.index-c.index}function GO(o,c,f,E){for(var R=-1,q=o.length,te=f.length,ae=-1,ue=c.length,ye=gn(q-te,0),be=me(ue+ye),we=!E;++ae<ue;)be[ae]=c[ae];for(;++R<te;)(we||R<q)&&(be[f[R]]=o[R]);for(;ye--;)be[ae++]=o[R++];return be}function UO(o,c,f,E){for(var R=-1,q=o.length,te=-1,ae=f.length,ue=-1,ye=c.length,be=gn(q-ae,0),we=me(be+ye),Re=!E;++R<be;)we[R]=o[R];for(var ke=R;++ue<ye;)we[ke+ue]=c[ue];for(;++te<ae;)(Re||R<q)&&(we[ke+f[te]]=o[R++]);return we}function ii(o,c){var f=-1,E=o.length;for(c||(c=me(E));++f<E;)c[f]=o[f];return c}function Er(o,c,f,E){var R=!f;f||(f={});for(var q=-1,te=c.length;++q<te;){var ae=c[q],ue=E?E(f[ae],o[ae],ae,f,o):n;ue===n&&(ue=o[ae]),R?kr(f,ae,ue):ul(f,ae,ue)}return f}function gj(o,c){return Er(o,w1(o),c)}function vj(o,c){return Er(o,iM(o),c)}function nd(o,c){return function(f,E){var R=et(f)?_$:NN,q=c?c():{};return R(f,o,We(E,2),q)}}function Ha(o){return ot(function(c,f){var E=-1,R=f.length,q=R>1?f[R-1]:n,te=R>2?f[2]:n;for(q=o.length>3&&typeof q=="function"?(R--,q):n,te&&Wn(f[0],f[1],te)&&(q=R<3?n:q,R=1),c=Ot(c);++E<R;){var ae=f[E];ae&&o(c,ae,E,q)}return c})}function HO(o,c){return function(f,E){if(f==null)return f;if(!ri(f))return o(f,E);for(var R=f.length,q=c?R:-1,te=Ot(f);(c?q--:++q<R)&&E(te[q],q,te)!==!1;);return f}}function WO(o){return function(c,f,E){for(var R=-1,q=Ot(c),te=E(c),ae=te.length;ae--;){var ue=te[o?ae:++R];if(f(q[ue],ue,q)===!1)break}return c}}function yj(o,c,f){var E=c&w,R=fl(o);function q(){var te=this&&this!==An&&this instanceof q?R:o;return te.apply(E?f:this,arguments)}return q}function qO(o){return function(c){c=wt(c);var f=$a(c)?ir(c):n,E=f?f[0]:c.charAt(0),R=f?vo(f,1).join(""):c.slice(1);return E[o]()+R}}function Wa(o){return function(c){return Ny(HM(UM(c).replace(l$,"")),o,"")}}function fl(o){return function(){var c=arguments;switch(c.length){case 0:return new o;case 1:return new o(c[0]);case 2:return new o(c[0],c[1]);case 3:return new o(c[0],c[1],c[2]);case 4:return new o(c[0],c[1],c[2],c[3]);case 5:return new o(c[0],c[1],c[2],c[3],c[4]);case 6:return new o(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new o(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=Ua(o.prototype),E=o.apply(f,c);return Wt(E)?E:f}}function bj(o,c,f){var E=fl(o);function R(){for(var q=arguments.length,te=me(q),ae=q,ue=qa(R);ae--;)te[ae]=arguments[ae];var ye=q<3&&te[0]!==ue&&te[q-1]!==ue?[]:ho(te,ue);if(q-=ye.length,q<f)return YO(o,c,id,R.placeholder,n,te,ye,n,n,f-q);var be=this&&this!==An&&this instanceof R?E:o;return vi(be,this,te)}return R}function ZO(o){return function(c,f,E){var R=Ot(c);if(!ri(c)){var q=We(f,3);c=Pn(c),f=function(ae){return q(R[ae],ae,R)}}var te=o(c,f,E);return te>-1?R[q?c[te]:te]:n}}function QO(o){return Gr(function(c){var f=c.length,E=f,R=ji.prototype.thru;for(o&&c.reverse();E--;){var q=c[E];if(typeof q!="function")throw new Ni(s);if(R&&!te&&sd(q)=="wrapper")var te=new ji([],!0)}for(E=te?E:f;++E<f;){q=c[E];var ae=sd(q),ue=ae=="wrapper"?b1(q):n;ue&&P1(ue[0])&&ue[1]==(z|_|A|$)&&!ue[4].length&&ue[9]==1?te=te[sd(ue[0])].apply(te,ue[3]):te=q.length==1&&P1(q)?te[ae]():te.thru(q)}return function(){var ye=arguments,be=ye[0];if(te&&ye.length==1&&et(be))return te.plant(be).value();for(var we=0,Re=f?c[we].apply(this,ye):be;++we<f;)Re=c[we].call(this,Re);return Re}})}function id(o,c,f,E,R,q,te,ae,ue,ye){var be=c&z,we=c&w,Re=c&S,ke=c&(_|M),Qe=c&L,it=Re?n:fl(o);function Je(){for(var st=arguments.length,ht=me(st),wi=st;wi--;)ht[wi]=arguments[wi];if(ke)var qn=qa(Je),_i=A$(ht,qn);if(E&&(ht=GO(ht,E,R,ke)),q&&(ht=UO(ht,q,te,ke)),st-=_i,ke&&st<ye){var an=ho(ht,qn);return YO(o,c,id,Je.placeholder,f,ht,an,ae,ue,ye-st)}var ar=we?f:this,qr=Re?ar[o]:o;return st=ht.length,ae?ht=Nj(ht,ae):Qe&&st>1&&ht.reverse(),be&&ue<st&&(ht.length=ue),this&&this!==An&&this instanceof Je&&(qr=it||fl(qr)),qr.apply(ar,ht)}return Je}function JO(o,c){return function(f,E){return qN(f,o,c(E),{})}}function rd(o,c){return function(f,E){var R;if(f===n&&E===n)return c;if(f!==n&&(R=f),E!==n){if(R===n)return E;typeof f=="string"||typeof E=="string"?(f=bi(f),E=bi(E)):(f=RO(f),E=RO(E)),R=o(f,E)}return R}}function f1(o){return Gr(function(c){return c=Gt(c,yi(We())),ot(function(f){var E=this;return o(c,function(R){return vi(R,E,f)})})})}function od(o,c){c=c===n?" ":bi(c);var f=c.length;if(f<2)return f?l1(c,o):c;var E=l1(c,Hu(o/Na(c)));return $a(c)?vo(ir(E),0,o).join(""):E.slice(0,o)}function Cj(o,c,f,E){var R=c&w,q=fl(o);function te(){for(var ae=-1,ue=arguments.length,ye=-1,be=E.length,we=me(be+ue),Re=this&&this!==An&&this instanceof te?q:o;++ye<be;)we[ye]=E[ye];for(;ue--;)we[ye++]=arguments[++ae];return vi(Re,R?f:this,we)}return te}function XO(o){return function(c,f,E){return E&&typeof E!="number"&&Wn(c,f,E)&&(f=E=n),c=Wr(c),f===n?(f=c,c=0):f=Wr(f),E=E===n?c<f?1:-1:Wr(E),oj(c,f,E,o)}}function ad(o){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=Ui(c),f=Ui(f)),o(c,f)}}function YO(o,c,f,E,R,q,te,ae,ue,ye){var be=c&_,we=be?te:n,Re=be?n:te,ke=be?q:n,Qe=be?n:q;c|=be?A:D,c&=~(be?D:A),c&T||(c&=~(w|S));var it=[o,c,R,ke,we,Qe,Re,ae,ue,ye],Je=f.apply(n,it);return P1(o)&&uM(Je,it),Je.placeholder=E,dM(Je,o,c)}function g1(o){var c=fn[o];return function(f,E){if(f=Ui(f),E=E==null?0:Vn(nt(E),292),E&&dO(f)){var R=(wt(f)+"e").split("e"),q=c(R[0]+"e"+(+R[1]+E));return R=(wt(q)+"e").split("e"),+(R[0]+"e"+(+R[1]-E))}return c(f)}}var wj=za&&1/Ru(new za([,-0]))[1]==O?function(o){return new za(o)}:$1;function KO(o){return function(c){var f=Fn(c);return f==de?Wy(c):f==Ee?$$(c):I$(c,o(c))}}function zr(o,c,f,E,R,q,te,ae){var ue=c&S;if(!ue&&typeof o!="function")throw new Ni(s);var ye=E?E.length:0;if(ye||(c&=~(A|D),E=R=n),te=te===n?te:gn(nt(te),0),ae=ae===n?ae:nt(ae),ye-=R?R.length:0,c&D){var be=E,we=R;E=R=n}var Re=ue?n:b1(o),ke=[o,c,f,E,R,be,we,q,te,ae];if(Re&&Vj(ke,Re),o=ke[0],c=ke[1],f=ke[2],E=ke[3],R=ke[4],ae=ke[9]=ke[9]===n?ue?0:o.length:gn(ke[9]-ye,0),!ae&&c&(_|M)&&(c&=~(_|M)),!c||c==w)var Qe=yj(o,c,f);else c==_||c==M?Qe=bj(o,c,ae):(c==A||c==(w|A))&&!R.length?Qe=Cj(o,c,f,E):Qe=id.apply(n,ke);var it=Re?LO:uM;return dM(it(Qe,ke),o,c)}function eM(o,c,f,E){return o===n||or(o,ka[f])&&!Et.call(E,f)?c:o}function tM(o,c,f,E,R,q){return Wt(o)&&Wt(c)&&(q.set(c,o),Ku(o,c,n,tM,q),q.delete(c)),o}function _j(o){return yl(o)?n:o}function nM(o,c,f,E,R,q){var te=f&b,ae=o.length,ue=c.length;if(ae!=ue&&!(te&&ue>ae))return!1;var ye=q.get(o),be=q.get(c);if(ye&&be)return ye==c&&be==o;var we=-1,Re=!0,ke=f&P?new Zo:n;for(q.set(o,c),q.set(c,o);++we<ae;){var Qe=o[we],it=c[we];if(E)var Je=te?E(it,Qe,we,c,o,q):E(Qe,it,we,o,c,q);if(Je!==n){if(Je)continue;Re=!1;break}if(ke){if(!jy(c,function(st,ht){if(!rl(ke,ht)&&(Qe===st||R(Qe,st,f,E,q)))return ke.push(ht)})){Re=!1;break}}else if(!(Qe===it||R(Qe,it,f,E,q))){Re=!1;break}}return q.delete(o),q.delete(c),Re}function Pj(o,c,f,E,R,q,te){switch(f){case Te:if(o.byteLength!=c.byteLength||o.byteOffset!=c.byteOffset)return!1;o=o.buffer,c=c.buffer;case ve:return!(o.byteLength!=c.byteLength||!q(new ku(o),new ku(c)));case J:case oe:case ce:return or(+o,+c);case X:return o.name==c.name&&o.message==c.message;case _e:case De:return o==c+"";case de:var ae=Wy;case Ee:var ue=E&b;if(ae||(ae=Ru),o.size!=c.size&&!ue)return!1;var ye=te.get(o);if(ye)return ye==c;E|=P,te.set(o,c);var be=nM(ae(o),ae(c),E,R,q,te);return te.delete(o),be;case Se:if(cl)return cl.call(o)==cl.call(c)}return!1}function Ej(o,c,f,E,R,q){var te=f&b,ae=v1(o),ue=ae.length,ye=v1(c),be=ye.length;if(ue!=be&&!te)return!1;for(var we=ue;we--;){var Re=ae[we];if(!(te?Re in c:Et.call(c,Re)))return!1}var ke=q.get(o),Qe=q.get(c);if(ke&&Qe)return ke==c&&Qe==o;var it=!0;q.set(o,c),q.set(c,o);for(var Je=te;++we<ue;){Re=ae[we];var st=o[Re],ht=c[Re];if(E)var wi=te?E(ht,st,Re,c,o,q):E(st,ht,Re,o,c,q);if(!(wi===n?st===ht||R(st,ht,f,E,q):wi)){it=!1;break}Je||(Je=Re=="constructor")}if(it&&!Je){var qn=o.constructor,_i=c.constructor;qn!=_i&&"constructor"in o&&"constructor"in c&&!(typeof qn=="function"&&qn instanceof qn&&typeof _i=="function"&&_i instanceof _i)&&(it=!1)}return q.delete(o),q.delete(c),it}function Gr(o){return x1(lM(o,n,vM),o+"")}function v1(o){return _O(o,Pn,w1)}function y1(o){return _O(o,oi,iM)}var b1=qu?function(o){return qu.get(o)}:$1;function sd(o){for(var c=o.name+"",f=Ga[c],E=Et.call(Ga,c)?f.length:0;E--;){var R=f[E],q=R.func;if(q==null||q==o)return R.name}return c}function qa(o){var c=Et.call(k,"placeholder")?k:o;return c.placeholder}function We(){var o=k.iteratee||V1;return o=o===V1?xO:o,arguments.length?o(arguments[0],arguments[1]):o}function ld(o,c){var f=o.__data__;return Dj(c)?f[typeof c=="string"?"string":"hash"]:f.map}function C1(o){for(var c=Pn(o),f=c.length;f--;){var E=c[f],R=o[E];c[f]=[E,R,aM(R)]}return c}function Xo(o,c){var f=R$(o,c);return EO(f)?f:n}function xj(o){var c=Et.call(o,Wo),f=o[Wo];try{o[Wo]=n;var E=!0}catch(q){}var R=Nu.call(o);return E&&(c?o[Wo]=f:delete o[Wo]),R}var w1=Zy?function(o){return o==null?[]:(o=Ot(o),co(Zy(o),function(c){return cO.call(o,c)}))}:N1,iM=Zy?function(o){for(var c=[];o;)uo(c,w1(o)),o=zu(o);return c}:N1,Fn=Hn;(Qy&&Fn(new Qy(new ArrayBuffer(1)))!=Te||al&&Fn(new al)!=de||Jy&&Fn(Jy.resolve())!=Pe||za&&Fn(new za)!=Ee||sl&&Fn(new sl)!=je)&&(Fn=function(o){var c=Hn(o),f=c==ge?o.constructor:n,E=f?Yo(f):"";if(E)switch(E){case sN:return Te;case lN:return de;case cN:return Pe;case uN:return Ee;case dN:return je}return c});function Oj(o,c,f){for(var E=-1,R=f.length;++E<R;){var q=f[E],te=q.size;switch(q.type){case"drop":o+=te;break;case"dropRight":c-=te;break;case"take":c=Vn(c,o+te);break;case"takeRight":o=gn(o,c-te);break}}return{start:o,end:c}}function Mj(o){var c=o.match(Su);return c?c[1].split(Tu):[]}function rM(o,c,f){c=go(c,o);for(var E=-1,R=c.length,q=!1;++E<R;){var te=xr(c[E]);if(!(q=o!=null&&f(o,te)))break;o=o[te]}return q||++E!=R?q:(R=o==null?0:o.length,!!R&&fd(R)&&Ur(te,R)&&(et(o)||Ko(o)))}function Sj(o){var c=o.length,f=new o.constructor(c);return c&&typeof o[0]=="string"&&Et.call(o,"index")&&(f.index=o.index,f.input=o.input),f}function oM(o){return typeof o.constructor=="function"&&!gl(o)?Ua(zu(o)):{}}function Tj(o,c,f){var E=o.constructor;switch(c){case ve:return p1(o);case J:case oe:return new E(+o);case Te:return hj(o,f);case Ae:case It:case pn:case Ze:case Ce:case Ge:case Ne:case He:case ft:return kO(o,f);case de:return new E;case ce:case De:return new E(o);case _e:return mj(o);case Ee:return new E;case Se:return pj(o)}}function Ij(o,c){var f=c.length;if(!f)return o;var E=f-1;return c[E]=(f>1?"& ":"")+c[E],c=c.join(f>2?", ":" "),o.replace(Mu,`{
/* [wrapped with `+c+`] */
`)}function Aj(o){return et(o)||Ko(o)||!!(uO&&o&&o[uO])}function Ur(o,c){var f=typeof o;return c=c==null?I:c,!!c&&(f=="number"||f!="symbol"&&G7.test(o))&&o>-1&&o%1==0&&o<c}function Wn(o,c,f){if(!Wt(f))return!1;var E=typeof c;return(E=="number"?ri(f)&&Ur(c,f.length):E=="string"&&c in f)?or(f[c],o):!1}function _1(o,c){if(et(o))return!1;var f=typeof o;return f=="number"||f=="symbol"||f=="boolean"||o==null||Ci(o)?!0:_n.test(o)||!lt.test(o)||c!=null&&o in Ot(c)}function Dj(o){var c=typeof o;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?o!=="__proto__":o===null}function P1(o){var c=sd(o),f=k[c];if(typeof f!="function"||!(c in ct.prototype))return!1;if(o===f)return!0;var E=b1(f);return!!E&&o===E[0]}function Lj(o){return!!aO&&aO in o}var Bj=Fu?Hr:j1;function gl(o){var c=o&&o.constructor,f=typeof c=="function"&&c.prototype||ka;return o===f}function aM(o){return o===o&&!Wt(o)}function sM(o,c){return function(f){return f==null?!1:f[o]===c&&(c!==n||o in Ot(f))}}function Rj(o){var c=md(o,function(E){return f.size===h&&f.clear(),E}),f=c.cache;return c}function Vj(o,c){var f=o[1],E=c[1],R=f|E,q=R<(w|S|z),te=E==z&&f==_||E==z&&f==$&&o[7].length<=c[8]||E==(z|$)&&c[7].length<=c[8]&&f==_;if(!(q||te))return o;E&w&&(o[2]=c[2],R|=f&w?0:T);var ae=c[3];if(ae){var ue=o[3];o[3]=ue?GO(ue,ae,c[4]):ae,o[4]=ue?ho(o[3],m):c[4]}return ae=c[5],ae&&(ue=o[5],o[5]=ue?UO(ue,ae,c[6]):ae,o[6]=ue?ho(o[5],m):c[6]),ae=c[7],ae&&(o[7]=ae),E&z&&(o[8]=o[8]==null?c[8]:Vn(o[8],c[8])),o[9]==null&&(o[9]=c[9]),o[0]=c[0],o[1]=R,o}function Fj(o){var c=[];if(o!=null)for(var f in Ot(o))c.push(f);return c}function $j(o){return Nu.call(o)}function lM(o,c,f){return c=gn(c===n?o.length-1:c,0),function(){for(var E=arguments,R=-1,q=gn(E.length-c,0),te=me(q);++R<q;)te[R]=E[c+R];R=-1;for(var ae=me(c+1);++R<c;)ae[R]=E[R];return ae[c]=f(te),vi(o,this,ae)}}function cM(o,c){return c.length<2?o:Jo(o,zi(c,0,-1))}function Nj(o,c){for(var f=o.length,E=Vn(c.length,f),R=ii(o);E--;){var q=c[E];o[E]=Ur(q,f)?R[q]:n}return o}function E1(o,c){if(!(c==="constructor"&&typeof o[c]=="function")&&c!="__proto__")return o[c]}var uM=hM(LO),vl=eN||function(o,c){return An.setTimeout(o,c)},x1=hM(lj);function dM(o,c,f){var E=c+"";return x1(o,Ij(E,jj(Mj(E),f)))}function hM(o){var c=0,f=0;return function(){var E=rN(),R=y-(E-f);if(f=E,R>0){if(++c>=W)return arguments[0]}else c=0;return o.apply(n,arguments)}}function cd(o,c){var f=-1,E=o.length,R=E-1;for(c=c===n?E:c;++f<c;){var q=s1(f,R),te=o[q];o[q]=o[f],o[f]=te}return o.length=c,o}var mM=Rj(function(o){var c=[];return o.charCodeAt(0)===46&&c.push(""),o.replace(mt,function(f,E,R,q){c.push(R?q.replace(F7,"$1"):E||f)}),c});function xr(o){if(typeof o=="string"||Ci(o))return o;var c=o+"";return c=="0"&&1/o==-O?"-0":c}function Yo(o){if(o!=null){try{return $u.call(o)}catch(c){}try{return o+""}catch(c){}}return""}function jj(o,c){return $i(ie,function(f){var E="_."+f[0];c&f[1]&&!Lu(o,E)&&o.push(E)}),o.sort()}function pM(o){if(o instanceof ct)return o.clone();var c=new ji(o.__wrapped__,o.__chain__);return c.__actions__=ii(o.__actions__),c.__index__=o.__index__,c.__values__=o.__values__,c}function kj(o,c,f){(f?Wn(o,c,f):c===n)?c=1:c=gn(nt(c),0);var E=o==null?0:o.length;if(!E||c<1)return[];for(var R=0,q=0,te=me(Hu(E/c));R<E;)te[q++]=zi(o,R,R+=c);return te}function zj(o){for(var c=-1,f=o==null?0:o.length,E=0,R=[];++c<f;){var q=o[c];q&&(R[E++]=q)}return R}function Gj(){var o=arguments.length;if(!o)return[];for(var c=me(o-1),f=arguments[0],E=o;E--;)c[E-1]=arguments[E];return uo(et(f)?ii(f):[f],Dn(c,1))}var Uj=ot(function(o,c){return on(o)?dl(o,Dn(c,1,on,!0)):[]}),Hj=ot(function(o,c){var f=Gi(c);return on(f)&&(f=n),on(o)?dl(o,Dn(c,1,on,!0),We(f,2)):[]}),Wj=ot(function(o,c){var f=Gi(c);return on(f)&&(f=n),on(o)?dl(o,Dn(c,1,on,!0),n,f):[]});function qj(o,c,f){var E=o==null?0:o.length;return E?(c=f||c===n?1:nt(c),zi(o,c<0?0:c,E)):[]}function Zj(o,c,f){var E=o==null?0:o.length;return E?(c=f||c===n?1:nt(c),c=E-c,zi(o,0,c<0?0:c)):[]}function Qj(o,c){return o&&o.length?td(o,We(c,3),!0,!0):[]}function Jj(o,c){return o&&o.length?td(o,We(c,3),!0):[]}function Xj(o,c,f,E){var R=o==null?0:o.length;return R?(f&&typeof f!="number"&&Wn(o,c,f)&&(f=0,E=R),GN(o,c,f,E)):[]}function fM(o,c,f){var E=o==null?0:o.length;if(!E)return-1;var R=f==null?0:nt(f);return R<0&&(R=gn(E+R,0)),Bu(o,We(c,3),R)}function gM(o,c,f){var E=o==null?0:o.length;if(!E)return-1;var R=E-1;return f!==n&&(R=nt(f),R=f<0?gn(E+R,0):Vn(R,E-1)),Bu(o,We(c,3),R,!0)}function vM(o){var c=o==null?0:o.length;return c?Dn(o,1):[]}function Yj(o){var c=o==null?0:o.length;return c?Dn(o,O):[]}function Kj(o,c){var f=o==null?0:o.length;return f?(c=c===n?1:nt(c),Dn(o,c)):[]}function ek(o){for(var c=-1,f=o==null?0:o.length,E={};++c<f;){var R=o[c];E[R[0]]=R[1]}return E}function yM(o){return o&&o.length?o[0]:n}function tk(o,c,f){var E=o==null?0:o.length;if(!E)return-1;var R=f==null?0:nt(f);return R<0&&(R=gn(E+R,0)),Fa(o,c,R)}function nk(o){var c=o==null?0:o.length;return c?zi(o,0,-1):[]}var ik=ot(function(o){var c=Gt(o,h1);return c.length&&c[0]===o[0]?n1(c):[]}),rk=ot(function(o){var c=Gi(o),f=Gt(o,h1);return c===Gi(f)?c=n:f.pop(),f.length&&f[0]===o[0]?n1(f,We(c,2)):[]}),ok=ot(function(o){var c=Gi(o),f=Gt(o,h1);return c=typeof c=="function"?c:n,c&&f.pop(),f.length&&f[0]===o[0]?n1(f,n,c):[]});function ak(o,c){return o==null?"":nN.call(o,c)}function Gi(o){var c=o==null?0:o.length;return c?o[c-1]:n}function sk(o,c,f){var E=o==null?0:o.length;if(!E)return-1;var R=E;return f!==n&&(R=nt(f),R=R<0?gn(E+R,0):Vn(R,E-1)),c===c?j$(o,c,R):Bu(o,Yx,R,!0)}function lk(o,c){return o&&o.length?TO(o,nt(c)):n}var ck=ot(bM);function bM(o,c){return o&&o.length&&c&&c.length?a1(o,c):o}function uk(o,c,f){return o&&o.length&&c&&c.length?a1(o,c,We(f,2)):o}function dk(o,c,f){return o&&o.length&&c&&c.length?a1(o,c,n,f):o}var hk=Gr(function(o,c){var f=o==null?0:o.length,E=Yy(o,c);return DO(o,Gt(c,function(R){return Ur(R,f)?+R:R}).sort(zO)),E});function mk(o,c){var f=[];if(!(o&&o.length))return f;var E=-1,R=[],q=o.length;for(c=We(c,3);++E<q;){var te=o[E];c(te,E,o)&&(f.push(te),R.push(E))}return DO(o,R),f}function O1(o){return o==null?o:aN.call(o)}function pk(o,c,f){var E=o==null?0:o.length;return E?(f&&typeof f!="number"&&Wn(o,c,f)?(c=0,f=E):(c=c==null?0:nt(c),f=f===n?E:nt(f)),zi(o,c,f)):[]}function fk(o,c){return ed(o,c)}function gk(o,c,f){return c1(o,c,We(f,2))}function vk(o,c){var f=o==null?0:o.length;if(f){var E=ed(o,c);if(E<f&&or(o[E],c))return E}return-1}function yk(o,c){return ed(o,c,!0)}function bk(o,c,f){return c1(o,c,We(f,2),!0)}function Ck(o,c){var f=o==null?0:o.length;if(f){var E=ed(o,c,!0)-1;if(or(o[E],c))return E}return-1}function wk(o){return o&&o.length?BO(o):[]}function _k(o,c){return o&&o.length?BO(o,We(c,2)):[]}function Pk(o){var c=o==null?0:o.length;return c?zi(o,1,c):[]}function Ek(o,c,f){return o&&o.length?(c=f||c===n?1:nt(c),zi(o,0,c<0?0:c)):[]}function xk(o,c,f){var E=o==null?0:o.length;return E?(c=f||c===n?1:nt(c),c=E-c,zi(o,c<0?0:c,E)):[]}function Ok(o,c){return o&&o.length?td(o,We(c,3),!1,!0):[]}function Mk(o,c){return o&&o.length?td(o,We(c,3)):[]}var Sk=ot(function(o){return fo(Dn(o,1,on,!0))}),Tk=ot(function(o){var c=Gi(o);return on(c)&&(c=n),fo(Dn(o,1,on,!0),We(c,2))}),Ik=ot(function(o){var c=Gi(o);return c=typeof c=="function"?c:n,fo(Dn(o,1,on,!0),n,c)});function Ak(o){return o&&o.length?fo(o):[]}function Dk(o,c){return o&&o.length?fo(o,We(c,2)):[]}function Lk(o,c){return c=typeof c=="function"?c:n,o&&o.length?fo(o,n,c):[]}function M1(o){if(!(o&&o.length))return[];var c=0;return o=co(o,function(f){if(on(f))return c=gn(f.length,c),!0}),Uy(c,function(f){return Gt(o,ky(f))})}function CM(o,c){if(!(o&&o.length))return[];var f=M1(o);return c==null?f:Gt(f,function(E){return vi(c,n,E)})}var Bk=ot(function(o,c){return on(o)?dl(o,c):[]}),Rk=ot(function(o){return d1(co(o,on))}),Vk=ot(function(o){var c=Gi(o);return on(c)&&(c=n),d1(co(o,on),We(c,2))}),Fk=ot(function(o){var c=Gi(o);return c=typeof c=="function"?c:n,d1(co(o,on),n,c)}),$k=ot(M1);function Nk(o,c){return $O(o||[],c||[],ul)}function jk(o,c){return $O(o||[],c||[],pl)}var kk=ot(function(o){var c=o.length,f=c>1?o[c-1]:n;return f=typeof f=="function"?(o.pop(),f):n,CM(o,f)});function wM(o){var c=k(o);return c.__chain__=!0,c}function zk(o,c){return c(o),o}function ud(o,c){return c(o)}var Gk=Gr(function(o){var c=o.length,f=c?o[0]:0,E=this.__wrapped__,R=function(q){return Yy(q,o)};return c>1||this.__actions__.length||!(E instanceof ct)||!Ur(f)?this.thru(R):(E=E.slice(f,+f+(c?1:0)),E.__actions__.push({func:ud,args:[R],thisArg:n}),new ji(E,this.__chain__).thru(function(q){return c&&!q.length&&q.push(n),q}))});function Uk(){return wM(this)}function Hk(){return new ji(this.value(),this.__chain__)}function Wk(){this.__values__===n&&(this.__values__=RM(this.value()));var o=this.__index__>=this.__values__.length,c=o?n:this.__values__[this.__index__++];return{done:o,value:c}}function qk(){return this}function Zk(o){for(var c,f=this;f instanceof Qu;){var E=pM(f);E.__index__=0,E.__values__=n,c?R.__wrapped__=E:c=E;var R=E;f=f.__wrapped__}return R.__wrapped__=o,c}function Qk(){var o=this.__wrapped__;if(o instanceof ct){var c=o;return this.__actions__.length&&(c=new ct(this)),c=c.reverse(),c.__actions__.push({func:ud,args:[O1],thisArg:n}),new ji(c,this.__chain__)}return this.thru(O1)}function Jk(){return FO(this.__wrapped__,this.__actions__)}var Xk=nd(function(o,c,f){Et.call(o,f)?++o[f]:kr(o,f,1)});function Yk(o,c,f){var E=et(o)?Jx:zN;return f&&Wn(o,c,f)&&(c=n),E(o,We(c,3))}function Kk(o,c){var f=et(o)?co:CO;return f(o,We(c,3))}var ez=ZO(fM),tz=ZO(gM);function nz(o,c){return Dn(dd(o,c),1)}function iz(o,c){return Dn(dd(o,c),O)}function rz(o,c,f){return f=f===n?1:nt(f),Dn(dd(o,c),f)}function _M(o,c){var f=et(o)?$i:po;return f(o,We(c,3))}function PM(o,c){var f=et(o)?P$:bO;return f(o,We(c,3))}var oz=nd(function(o,c,f){Et.call(o,f)?o[f].push(c):kr(o,f,[c])});function az(o,c,f,E){o=ri(o)?o:Qa(o),f=f&&!E?nt(f):0;var R=o.length;return f<0&&(f=gn(R+f,0)),gd(o)?f<=R&&o.indexOf(c,f)>-1:!!R&&Fa(o,c,f)>-1}var sz=ot(function(o,c,f){var E=-1,R=typeof c=="function",q=ri(o)?me(o.length):[];return po(o,function(te){q[++E]=R?vi(c,te,f):hl(te,c,f)}),q}),lz=nd(function(o,c,f){kr(o,f,c)});function dd(o,c){var f=et(o)?Gt:OO;return f(o,We(c,3))}function cz(o,c,f,E){return o==null?[]:(et(c)||(c=c==null?[]:[c]),f=E?n:f,et(f)||(f=f==null?[]:[f]),IO(o,c,f))}var uz=nd(function(o,c,f){o[f?0:1].push(c)},function(){return[[],[]]});function dz(o,c,f){var E=et(o)?Ny:eO,R=arguments.length<3;return E(o,We(c,4),f,R,po)}function hz(o,c,f){var E=et(o)?E$:eO,R=arguments.length<3;return E(o,We(c,4),f,R,bO)}function mz(o,c){var f=et(o)?co:CO;return f(o,pd(We(c,3)))}function pz(o){var c=et(o)?fO:aj;return c(o)}function fz(o,c,f){(f?Wn(o,c,f):c===n)?c=1:c=nt(c);var E=et(o)?FN:sj;return E(o,c)}function gz(o){var c=et(o)?$N:cj;return c(o)}function vz(o){if(o==null)return 0;if(ri(o))return gd(o)?Na(o):o.length;var c=Fn(o);return c==de||c==Ee?o.size:r1(o).length}function yz(o,c,f){var E=et(o)?jy:uj;return f&&Wn(o,c,f)&&(c=n),E(o,We(c,3))}var bz=ot(function(o,c){if(o==null)return[];var f=c.length;return f>1&&Wn(o,c[0],c[1])?c=[]:f>2&&Wn(c[0],c[1],c[2])&&(c=[c[0]]),IO(o,Dn(c,1),[])}),hd=K$||function(){return An.Date.now()};function Cz(o,c){if(typeof c!="function")throw new Ni(s);return o=nt(o),function(){if(--o<1)return c.apply(this,arguments)}}function EM(o,c,f){return c=f?n:c,c=o&&c==null?o.length:c,zr(o,z,n,n,n,n,c)}function xM(o,c){var f;if(typeof c!="function")throw new Ni(s);return o=nt(o),function(){return--o>0&&(f=c.apply(this,arguments)),o<=1&&(c=n),f}}var S1=ot(function(o,c,f){var E=w;if(f.length){var R=ho(f,qa(S1));E|=A}return zr(o,E,c,f,R)}),OM=ot(function(o,c,f){var E=w|S;if(f.length){var R=ho(f,qa(OM));E|=A}return zr(c,E,o,f,R)});function MM(o,c,f){c=f?n:c;var E=zr(o,_,n,n,n,n,n,c);return E.placeholder=MM.placeholder,E}function SM(o,c,f){c=f?n:c;var E=zr(o,M,n,n,n,n,n,c);return E.placeholder=SM.placeholder,E}function TM(o,c,f){var E,R,q,te,ae,ue,ye=0,be=!1,we=!1,Re=!0;if(typeof o!="function")throw new Ni(s);c=Ui(c)||0,Wt(f)&&(be=!!f.leading,we="maxWait"in f,q=we?gn(Ui(f.maxWait)||0,c):q,Re="trailing"in f?!!f.trailing:Re);function ke(an){var ar=E,qr=R;return E=R=n,ye=an,te=o.apply(qr,ar),te}function Qe(an){return ye=an,ae=vl(st,c),be?ke(an):te}function it(an){var ar=an-ue,qr=an-ye,ZM=c-ar;return we?Vn(ZM,q-qr):ZM}function Je(an){var ar=an-ue,qr=an-ye;return ue===n||ar>=c||ar<0||we&&qr>=q}function st(){var an=hd();if(Je(an))return ht(an);ae=vl(st,it(an))}function ht(an){return ae=n,Re&&E?ke(an):(E=R=n,te)}function wi(){ae!==n&&NO(ae),ye=0,E=ue=R=ae=n}function qn(){return ae===n?te:ht(hd())}function _i(){var an=hd(),ar=Je(an);if(E=arguments,R=this,ue=an,ar){if(ae===n)return Qe(ue);if(we)return NO(ae),ae=vl(st,c),ke(ue)}return ae===n&&(ae=vl(st,c)),te}return _i.cancel=wi,_i.flush=qn,_i}var wz=ot(function(o,c){return yO(o,1,c)}),_z=ot(function(o,c,f){return yO(o,Ui(c)||0,f)});function Pz(o){return zr(o,L)}function md(o,c){if(typeof o!="function"||c!=null&&typeof c!="function")throw new Ni(s);var f=function(){var E=arguments,R=c?c.apply(this,E):E[0],q=f.cache;if(q.has(R))return q.get(R);var te=o.apply(this,E);return f.cache=q.set(R,te)||q,te};return f.cache=new(md.Cache||jr),f}md.Cache=jr;function pd(o){if(typeof o!="function")throw new Ni(s);return function(){var c=arguments;switch(c.length){case 0:return!o.call(this);case 1:return!o.call(this,c[0]);case 2:return!o.call(this,c[0],c[1]);case 3:return!o.call(this,c[0],c[1],c[2])}return!o.apply(this,c)}}function Ez(o){return xM(2,o)}var xz=dj(function(o,c){c=c.length==1&&et(c[0])?Gt(c[0],yi(We())):Gt(Dn(c,1),yi(We()));var f=c.length;return ot(function(E){for(var R=-1,q=Vn(E.length,f);++R<q;)E[R]=c[R].call(this,E[R]);return vi(o,this,E)})}),T1=ot(function(o,c){var f=ho(c,qa(T1));return zr(o,A,n,c,f)}),IM=ot(function(o,c){var f=ho(c,qa(IM));return zr(o,D,n,c,f)}),Oz=Gr(function(o,c){return zr(o,$,n,n,n,c)});function Mz(o,c){if(typeof o!="function")throw new Ni(s);return c=c===n?c:nt(c),ot(o,c)}function Sz(o,c){if(typeof o!="function")throw new Ni(s);return c=c==null?0:gn(nt(c),0),ot(function(f){var E=f[c],R=vo(f,0,c);return E&&uo(R,E),vi(o,this,R)})}function Tz(o,c,f){var E=!0,R=!0;if(typeof o!="function")throw new Ni(s);return Wt(f)&&(E="leading"in f?!!f.leading:E,R="trailing"in f?!!f.trailing:R),TM(o,c,{leading:E,maxWait:c,trailing:R})}function Iz(o){return EM(o,1)}function Az(o,c){return T1(m1(c),o)}function Dz(){if(!arguments.length)return[];var o=arguments[0];return et(o)?o:[o]}function Lz(o){return ki(o,v)}function Bz(o,c){return c=typeof c=="function"?c:n,ki(o,v,c)}function Rz(o){return ki(o,p|v)}function Vz(o,c){return c=typeof c=="function"?c:n,ki(o,p|v,c)}function Fz(o,c){return c==null||vO(o,c,Pn(c))}function or(o,c){return o===c||o!==o&&c!==c}var $z=ad(t1),Nz=ad(function(o,c){return o>=c}),Ko=PO(function(){return arguments}())?PO:function(o){return tn(o)&&Et.call(o,"callee")&&!cO.call(o,"callee")},et=me.isArray,jz=Ux?yi(Ux):ZN;function ri(o){return o!=null&&fd(o.length)&&!Hr(o)}function on(o){return tn(o)&&ri(o)}function kz(o){return o===!0||o===!1||tn(o)&&Hn(o)==J}var yo=tN||j1,zz=Hx?yi(Hx):QN;function Gz(o){return tn(o)&&o.nodeType===1&&!yl(o)}function Uz(o){if(o==null)return!0;if(ri(o)&&(et(o)||typeof o=="string"||typeof o.splice=="function"||yo(o)||Za(o)||Ko(o)))return!o.length;var c=Fn(o);if(c==de||c==Ee)return!o.size;if(gl(o))return!r1(o).length;for(var f in o)if(Et.call(o,f))return!1;return!0}function Hz(o,c){return ml(o,c)}function Wz(o,c,f){f=typeof f=="function"?f:n;var E=f?f(o,c):n;return E===n?ml(o,c,n,f):!!E}function I1(o){if(!tn(o))return!1;var c=Hn(o);return c==X||c==Y||typeof o.message=="string"&&typeof o.name=="string"&&!yl(o)}function qz(o){return typeof o=="number"&&dO(o)}function Hr(o){if(!Wt(o))return!1;var c=Hn(o);return c==se||c==re||c==G||c==Ie}function AM(o){return typeof o=="number"&&o==nt(o)}function fd(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=I}function Wt(o){var c=typeof o;return o!=null&&(c=="object"||c=="function")}function tn(o){return o!=null&&typeof o=="object"}var DM=Wx?yi(Wx):XN;function Zz(o,c){return o===c||i1(o,c,C1(c))}function Qz(o,c,f){return f=typeof f=="function"?f:n,i1(o,c,C1(c),f)}function Jz(o){return LM(o)&&o!=+o}function Xz(o){if(Bj(o))throw new Ke(a);return EO(o)}function Yz(o){return o===null}function Kz(o){return o==null}function LM(o){return typeof o=="number"||tn(o)&&Hn(o)==ce}function yl(o){if(!tn(o)||Hn(o)!=ge)return!1;var c=zu(o);if(c===null)return!0;var f=Et.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&$u.call(f)==Q$}var A1=qx?yi(qx):YN;function eG(o){return AM(o)&&o>=-I&&o<=I}var BM=Zx?yi(Zx):KN;function gd(o){return typeof o=="string"||!et(o)&&tn(o)&&Hn(o)==De}function Ci(o){return typeof o=="symbol"||tn(o)&&Hn(o)==Se}var Za=Qx?yi(Qx):ej;function tG(o){return o===n}function nG(o){return tn(o)&&Fn(o)==je}function iG(o){return tn(o)&&Hn(o)==K}var rG=ad(o1),oG=ad(function(o,c){return o<=c});function RM(o){if(!o)return[];if(ri(o))return gd(o)?ir(o):ii(o);if(ol&&o[ol])return F$(o[ol]());var c=Fn(o),f=c==de?Wy:c==Ee?Ru:Qa;return f(o)}function Wr(o){if(!o)return o===0?o:0;if(o=Ui(o),o===O||o===-O){var c=o<0?-1:1;return c*V}return o===o?o:0}function nt(o){var c=Wr(o),f=c%1;return c===c?f?c-f:c:0}function VM(o){return o?Qo(nt(o),0,N):0}function Ui(o){if(typeof o=="number")return o;if(Ci(o))return j;if(Wt(o)){var c=typeof o.valueOf=="function"?o.valueOf():o;o=Wt(c)?c+"":c}if(typeof o!="string")return o===0?o:+o;o=tO(o);var f=j7.test(o);return f||z7.test(o)?C$(o.slice(2),f?2:8):N7.test(o)?j:+o}function FM(o){return Er(o,oi(o))}function aG(o){return o?Qo(nt(o),-I,I):o===0?o:0}function wt(o){return o==null?"":bi(o)}var sG=Ha(function(o,c){if(gl(c)||ri(c)){Er(c,Pn(c),o);return}for(var f in c)Et.call(c,f)&&ul(o,f,c[f])}),$M=Ha(function(o,c){Er(c,oi(c),o)}),vd=Ha(function(o,c,f,E){Er(c,oi(c),o,E)}),lG=Ha(function(o,c,f,E){Er(c,Pn(c),o,E)}),cG=Gr(Yy);function uG(o,c){var f=Ua(o);return c==null?f:gO(f,c)}var dG=ot(function(o,c){o=Ot(o);var f=-1,E=c.length,R=E>2?c[2]:n;for(R&&Wn(c[0],c[1],R)&&(E=1);++f<E;)for(var q=c[f],te=oi(q),ae=-1,ue=te.length;++ae<ue;){var ye=te[ae],be=o[ye];(be===n||or(be,ka[ye])&&!Et.call(o,ye))&&(o[ye]=q[ye])}return o}),hG=ot(function(o){return o.push(n,tM),vi(NM,n,o)});function mG(o,c){return Xx(o,We(c,3),Pr)}function pG(o,c){return Xx(o,We(c,3),e1)}function fG(o,c){return o==null?o:Ky(o,We(c,3),oi)}function gG(o,c){return o==null?o:wO(o,We(c,3),oi)}function vG(o,c){return o&&Pr(o,We(c,3))}function yG(o,c){return o&&e1(o,We(c,3))}function bG(o){return o==null?[]:Yu(o,Pn(o))}function CG(o){return o==null?[]:Yu(o,oi(o))}function D1(o,c,f){var E=o==null?n:Jo(o,c);return E===n?f:E}function wG(o,c){return o!=null&&rM(o,c,UN)}function L1(o,c){return o!=null&&rM(o,c,HN)}var _G=JO(function(o,c,f){c!=null&&typeof c.toString!="function"&&(c=Nu.call(c)),o[c]=f},R1(ai)),PG=JO(function(o,c,f){c!=null&&typeof c.toString!="function"&&(c=Nu.call(c)),Et.call(o,c)?o[c].push(f):o[c]=[f]},We),EG=ot(hl);function Pn(o){return ri(o)?pO(o):r1(o)}function oi(o){return ri(o)?pO(o,!0):tj(o)}function xG(o,c){var f={};return c=We(c,3),Pr(o,function(E,R,q){kr(f,c(E,R,q),E)}),f}function OG(o,c){var f={};return c=We(c,3),Pr(o,function(E,R,q){kr(f,R,c(E,R,q))}),f}var MG=Ha(function(o,c,f){Ku(o,c,f)}),NM=Ha(function(o,c,f,E){Ku(o,c,f,E)}),SG=Gr(function(o,c){var f={};if(o==null)return f;var E=!1;c=Gt(c,function(q){return q=go(q,o),E||(E=q.length>1),q}),Er(o,y1(o),f),E&&(f=ki(f,p|g|v,_j));for(var R=c.length;R--;)u1(f,c[R]);return f});function TG(o,c){return jM(o,pd(We(c)))}var IG=Gr(function(o,c){return o==null?{}:ij(o,c)});function jM(o,c){if(o==null)return{};var f=Gt(y1(o),function(E){return[E]});return c=We(c),AO(o,f,function(E,R){return c(E,R[0])})}function AG(o,c,f){c=go(c,o);var E=-1,R=c.length;for(R||(R=1,o=n);++E<R;){var q=o==null?n:o[xr(c[E])];q===n&&(E=R,q=f),o=Hr(q)?q.call(o):q}return o}function DG(o,c,f){return o==null?o:pl(o,c,f)}function LG(o,c,f,E){return E=typeof E=="function"?E:n,o==null?o:pl(o,c,f,E)}var kM=KO(Pn),zM=KO(oi);function BG(o,c,f){var E=et(o),R=E||yo(o)||Za(o);if(c=We(c,4),f==null){var q=o&&o.constructor;R?f=E?new q:[]:Wt(o)?f=Hr(q)?Ua(zu(o)):{}:f={}}return(R?$i:Pr)(o,function(te,ae,ue){return c(f,te,ae,ue)}),f}function RG(o,c){return o==null?!0:u1(o,c)}function VG(o,c,f){return o==null?o:VO(o,c,m1(f))}function FG(o,c,f,E){return E=typeof E=="function"?E:n,o==null?o:VO(o,c,m1(f),E)}function Qa(o){return o==null?[]:Hy(o,Pn(o))}function $G(o){return o==null?[]:Hy(o,oi(o))}function NG(o,c,f){return f===n&&(f=c,c=n),f!==n&&(f=Ui(f),f=f===f?f:0),c!==n&&(c=Ui(c),c=c===c?c:0),Qo(Ui(o),c,f)}function jG(o,c,f){return c=Wr(c),f===n?(f=c,c=0):f=Wr(f),o=Ui(o),WN(o,c,f)}function kG(o,c,f){if(f&&typeof f!="boolean"&&Wn(o,c,f)&&(c=f=n),f===n&&(typeof c=="boolean"?(f=c,c=n):typeof o=="boolean"&&(f=o,o=n)),o===n&&c===n?(o=0,c=1):(o=Wr(o),c===n?(c=o,o=0):c=Wr(c)),o>c){var E=o;o=c,c=E}if(f||o%1||c%1){var R=hO();return Vn(o+R*(c-o+b$("1e-"+((R+"").length-1))),c)}return s1(o,c)}var zG=Wa(function(o,c,f){return c=c.toLowerCase(),o+(f?GM(c):c)});function GM(o){return B1(wt(o).toLowerCase())}function UM(o){return o=wt(o),o&&o.replace(U7,D$).replace(c$,"")}function GG(o,c,f){o=wt(o),c=bi(c);var E=o.length;f=f===n?E:Qo(nt(f),0,E);var R=f;return f-=c.length,f>=0&&o.slice(f,R)==c}function UG(o){return o=wt(o),o&&Iy.test(o)?o.replace(Go,L$):o}function HG(o){return o=wt(o),o&&wr.test(o)?o.replace(Ht,"\\$&"):o}var WG=Wa(function(o,c,f){return o+(f?"-":"")+c.toLowerCase()}),qG=Wa(function(o,c,f){return o+(f?" ":"")+c.toLowerCase()}),ZG=qO("toLowerCase");function QG(o,c,f){o=wt(o),c=nt(c);var E=c?Na(o):0;if(!c||E>=c)return o;var R=(c-E)/2;return od(Wu(R),f)+o+od(Hu(R),f)}function JG(o,c,f){o=wt(o),c=nt(c);var E=c?Na(o):0;return c&&E<c?o+od(c-E,f):o}function XG(o,c,f){o=wt(o),c=nt(c);var E=c?Na(o):0;return c&&E<c?od(c-E,f)+o:o}function YG(o,c,f){return f||c==null?c=0:c&&(c=+c),oN(wt(o).replace(_r,""),c||0)}function KG(o,c,f){return(f?Wn(o,c,f):c===n)?c=1:c=nt(c),l1(wt(o),c)}function eU(){var o=arguments,c=wt(o[0]);return o.length<3?c:c.replace(o[1],o[2])}var tU=Wa(function(o,c,f){return o+(f?"_":"")+c.toLowerCase()});function nU(o,c,f){return f&&typeof f!="number"&&Wn(o,c,f)&&(c=f=n),f=f===n?N:f>>>0,f?(o=wt(o),o&&(typeof c=="string"||c!=null&&!A1(c))&&(c=bi(c),!c&&$a(o))?vo(ir(o),0,f):o.split(c,f)):[]}var iU=Wa(function(o,c,f){return o+(f?" ":"")+B1(c)});function rU(o,c,f){return o=wt(o),f=f==null?0:Qo(nt(f),0,o.length),c=bi(c),o.slice(f,f+c.length)==c}function oU(o,c,f){var E=k.templateSettings;f&&Wn(o,c,f)&&(c=n),o=wt(o),c=vd({},c,E,eM);var R=vd({},c.imports,E.imports,eM),q=Pn(R),te=Hy(R,q),ae,ue,ye=0,be=c.interpolate||Iu,we="__p += '",Re=qy((c.escape||Iu).source+"|"+be.source+"|"+(be===Ft?$7:Iu).source+"|"+(c.evaluate||Iu).source+"|$","g"),ke="//# sourceURL="+(Et.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++p$+"]")+`
`;o.replace(Re,function(Je,st,ht,wi,qn,_i){return ht||(ht=wi),we+=o.slice(ye,_i).replace(H7,B$),st&&(ae=!0,we+=`' +
__e(`+st+`) +
'`),qn&&(ue=!0,we+=`';
`+qn+`;
__p += '`),ht&&(we+=`' +
((__t = (`+ht+`)) == null ? '' : __t) +
'`),ye=_i+Je.length,Je}),we+=`';
`;var Qe=Et.call(c,"variable")&&c.variable;if(!Qe)we=`with (obj) {
`+we+`
}
`;else if(V7.test(Qe))throw new Ke(l);we=(ue?we.replace(gt,""):we).replace(tt,"$1").replace(Ye,"$1;"),we="function("+(Qe||"obj")+`) {
`+(Qe?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ae?", __e = _.escape":"")+(ue?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+we+`return __p
}`;var it=WM(function(){return vt(q,ke+"return "+we).apply(n,te)});if(it.source=we,I1(it))throw it;return it}function aU(o){return wt(o).toLowerCase()}function sU(o){return wt(o).toUpperCase()}function lU(o,c,f){if(o=wt(o),o&&(f||c===n))return tO(o);if(!o||!(c=bi(c)))return o;var E=ir(o),R=ir(c),q=nO(E,R),te=iO(E,R)+1;return vo(E,q,te).join("")}function cU(o,c,f){if(o=wt(o),o&&(f||c===n))return o.slice(0,oO(o)+1);if(!o||!(c=bi(c)))return o;var E=ir(o),R=iO(E,ir(c))+1;return vo(E,0,R).join("")}function uU(o,c,f){if(o=wt(o),o&&(f||c===n))return o.replace(_r,"");if(!o||!(c=bi(c)))return o;var E=ir(o),R=nO(E,ir(c));return vo(E,R).join("")}function dU(o,c){var f=U,E=Z;if(Wt(c)){var R="separator"in c?c.separator:R;f="length"in c?nt(c.length):f,E="omission"in c?bi(c.omission):E}o=wt(o);var q=o.length;if($a(o)){var te=ir(o);q=te.length}if(f>=q)return o;var ae=f-Na(E);if(ae<1)return E;var ue=te?vo(te,0,ae).join(""):o.slice(0,ae);if(R===n)return ue+E;if(te&&(ae+=ue.length-ae),A1(R)){if(o.slice(ae).search(R)){var ye,be=ue;for(R.global||(R=qy(R.source,wt(Px.exec(R))+"g")),R.lastIndex=0;ye=R.exec(be);)var we=ye.index;ue=ue.slice(0,we===n?ae:we)}}else if(o.indexOf(bi(R),ae)!=ae){var Re=ue.lastIndexOf(R);Re>-1&&(ue=ue.slice(0,Re))}return ue+E}function hU(o){return o=wt(o),o&&Uo.test(o)?o.replace(Vi,k$):o}var mU=Wa(function(o,c,f){return o+(f?" ":"")+c.toUpperCase()}),B1=qO("toUpperCase");function HM(o,c,f){return o=wt(o),c=f?n:c,c===n?V$(o)?U$(o):M$(o):o.match(c)||[]}var WM=ot(function(o,c){try{return vi(o,n,c)}catch(f){return I1(f)?f:new Ke(f)}}),pU=Gr(function(o,c){return $i(c,function(f){f=xr(f),kr(o,f,S1(o[f],o))}),o});function fU(o){var c=o==null?0:o.length,f=We();return o=c?Gt(o,function(E){if(typeof E[1]!="function")throw new Ni(s);return[f(E[0]),E[1]]}):[],ot(function(E){for(var R=-1;++R<c;){var q=o[R];if(vi(q[0],this,E))return vi(q[1],this,E)}})}function gU(o){return kN(ki(o,p))}function R1(o){return function(){return o}}function vU(o,c){return o==null||o!==o?c:o}var yU=QO(),bU=QO(!0);function ai(o){return o}function V1(o){return xO(typeof o=="function"?o:ki(o,p))}function CU(o){return MO(ki(o,p))}function wU(o,c){return SO(o,ki(c,p))}var _U=ot(function(o,c){return function(f){return hl(f,o,c)}}),PU=ot(function(o,c){return function(f){return hl(o,f,c)}});function F1(o,c,f){var E=Pn(c),R=Yu(c,E);f==null&&!(Wt(c)&&(R.length||!E.length))&&(f=c,c=o,o=this,R=Yu(c,Pn(c)));var q=!(Wt(f)&&"chain"in f)||!!f.chain,te=Hr(o);return $i(R,function(ae){var ue=c[ae];o[ae]=ue,te&&(o.prototype[ae]=function(){var ye=this.__chain__;if(q||ye){var be=o(this.__wrapped__),we=be.__actions__=ii(this.__actions__);return we.push({func:ue,args:arguments,thisArg:o}),be.__chain__=ye,be}return ue.apply(o,uo([this.value()],arguments))})}),o}function EU(){return An._===this&&(An._=J$),this}function $1(){}function xU(o){return o=nt(o),ot(function(c){return TO(c,o)})}var OU=f1(Gt),MU=f1(Jx),SU=f1(jy);function qM(o){return _1(o)?ky(xr(o)):rj(o)}function TU(o){return function(c){return o==null?n:Jo(o,c)}}var IU=XO(),AU=XO(!0);function N1(){return[]}function j1(){return!1}function DU(){return{}}function LU(){return""}function BU(){return!0}function RU(o,c){if(o=nt(o),o<1||o>I)return[];var f=N,E=Vn(o,N);c=We(c),o-=N;for(var R=Uy(E,c);++f<o;)c(f);return R}function VU(o){return et(o)?Gt(o,xr):Ci(o)?[o]:ii(mM(wt(o)))}function FU(o){var c=++Z$;return wt(o)+c}var $U=rd(function(o,c){return o+c},0),NU=g1("ceil"),jU=rd(function(o,c){return o/c},1),kU=g1("floor");function zU(o){return o&&o.length?Xu(o,ai,t1):n}function GU(o,c){return o&&o.length?Xu(o,We(c,2),t1):n}function UU(o){return Kx(o,ai)}function HU(o,c){return Kx(o,We(c,2))}function WU(o){return o&&o.length?Xu(o,ai,o1):n}function qU(o,c){return o&&o.length?Xu(o,We(c,2),o1):n}var ZU=rd(function(o,c){return o*c},1),QU=g1("round"),JU=rd(function(o,c){return o-c},0);function XU(o){return o&&o.length?Gy(o,ai):0}function YU(o,c){return o&&o.length?Gy(o,We(c,2)):0}return k.after=Cz,k.ary=EM,k.assign=sG,k.assignIn=$M,k.assignInWith=vd,k.assignWith=lG,k.at=cG,k.before=xM,k.bind=S1,k.bindAll=pU,k.bindKey=OM,k.castArray=Dz,k.chain=wM,k.chunk=kj,k.compact=zj,k.concat=Gj,k.cond=fU,k.conforms=gU,k.constant=R1,k.countBy=Xk,k.create=uG,k.curry=MM,k.curryRight=SM,k.debounce=TM,k.defaults=dG,k.defaultsDeep=hG,k.defer=wz,k.delay=_z,k.difference=Uj,k.differenceBy=Hj,k.differenceWith=Wj,k.drop=qj,k.dropRight=Zj,k.dropRightWhile=Qj,k.dropWhile=Jj,k.fill=Xj,k.filter=Kk,k.flatMap=nz,k.flatMapDeep=iz,k.flatMapDepth=rz,k.flatten=vM,k.flattenDeep=Yj,k.flattenDepth=Kj,k.flip=Pz,k.flow=yU,k.flowRight=bU,k.fromPairs=ek,k.functions=bG,k.functionsIn=CG,k.groupBy=oz,k.initial=nk,k.intersection=ik,k.intersectionBy=rk,k.intersectionWith=ok,k.invert=_G,k.invertBy=PG,k.invokeMap=sz,k.iteratee=V1,k.keyBy=lz,k.keys=Pn,k.keysIn=oi,k.map=dd,k.mapKeys=xG,k.mapValues=OG,k.matches=CU,k.matchesProperty=wU,k.memoize=md,k.merge=MG,k.mergeWith=NM,k.method=_U,k.methodOf=PU,k.mixin=F1,k.negate=pd,k.nthArg=xU,k.omit=SG,k.omitBy=TG,k.once=Ez,k.orderBy=cz,k.over=OU,k.overArgs=xz,k.overEvery=MU,k.overSome=SU,k.partial=T1,k.partialRight=IM,k.partition=uz,k.pick=IG,k.pickBy=jM,k.property=qM,k.propertyOf=TU,k.pull=ck,k.pullAll=bM,k.pullAllBy=uk,k.pullAllWith=dk,k.pullAt=hk,k.range=IU,k.rangeRight=AU,k.rearg=Oz,k.reject=mz,k.remove=mk,k.rest=Mz,k.reverse=O1,k.sampleSize=fz,k.set=DG,k.setWith=LG,k.shuffle=gz,k.slice=pk,k.sortBy=bz,k.sortedUniq=wk,k.sortedUniqBy=_k,k.split=nU,k.spread=Sz,k.tail=Pk,k.take=Ek,k.takeRight=xk,k.takeRightWhile=Ok,k.takeWhile=Mk,k.tap=zk,k.throttle=Tz,k.thru=ud,k.toArray=RM,k.toPairs=kM,k.toPairsIn=zM,k.toPath=VU,k.toPlainObject=FM,k.transform=BG,k.unary=Iz,k.union=Sk,k.unionBy=Tk,k.unionWith=Ik,k.uniq=Ak,k.uniqBy=Dk,k.uniqWith=Lk,k.unset=RG,k.unzip=M1,k.unzipWith=CM,k.update=VG,k.updateWith=FG,k.values=Qa,k.valuesIn=$G,k.without=Bk,k.words=HM,k.wrap=Az,k.xor=Rk,k.xorBy=Vk,k.xorWith=Fk,k.zip=$k,k.zipObject=Nk,k.zipObjectDeep=jk,k.zipWith=kk,k.entries=kM,k.entriesIn=zM,k.extend=$M,k.extendWith=vd,F1(k,k),k.add=$U,k.attempt=WM,k.camelCase=zG,k.capitalize=GM,k.ceil=NU,k.clamp=NG,k.clone=Lz,k.cloneDeep=Rz,k.cloneDeepWith=Vz,k.cloneWith=Bz,k.conformsTo=Fz,k.deburr=UM,k.defaultTo=vU,k.divide=jU,k.endsWith=GG,k.eq=or,k.escape=UG,k.escapeRegExp=HG,k.every=Yk,k.find=ez,k.findIndex=fM,k.findKey=mG,k.findLast=tz,k.findLastIndex=gM,k.findLastKey=pG,k.floor=kU,k.forEach=_M,k.forEachRight=PM,k.forIn=fG,k.forInRight=gG,k.forOwn=vG,k.forOwnRight=yG,k.get=D1,k.gt=$z,k.gte=Nz,k.has=wG,k.hasIn=L1,k.head=yM,k.identity=ai,k.includes=az,k.indexOf=tk,k.inRange=jG,k.invoke=EG,k.isArguments=Ko,k.isArray=et,k.isArrayBuffer=jz,k.isArrayLike=ri,k.isArrayLikeObject=on,k.isBoolean=kz,k.isBuffer=yo,k.isDate=zz,k.isElement=Gz,k.isEmpty=Uz,k.isEqual=Hz,k.isEqualWith=Wz,k.isError=I1,k.isFinite=qz,k.isFunction=Hr,k.isInteger=AM,k.isLength=fd,k.isMap=DM,k.isMatch=Zz,k.isMatchWith=Qz,k.isNaN=Jz,k.isNative=Xz,k.isNil=Kz,k.isNull=Yz,k.isNumber=LM,k.isObject=Wt,k.isObjectLike=tn,k.isPlainObject=yl,k.isRegExp=A1,k.isSafeInteger=eG,k.isSet=BM,k.isString=gd,k.isSymbol=Ci,k.isTypedArray=Za,k.isUndefined=tG,k.isWeakMap=nG,k.isWeakSet=iG,k.join=ak,k.kebabCase=WG,k.last=Gi,k.lastIndexOf=sk,k.lowerCase=qG,k.lowerFirst=ZG,k.lt=rG,k.lte=oG,k.max=zU,k.maxBy=GU,k.mean=UU,k.meanBy=HU,k.min=WU,k.minBy=qU,k.stubArray=N1,k.stubFalse=j1,k.stubObject=DU,k.stubString=LU,k.stubTrue=BU,k.multiply=ZU,k.nth=lk,k.noConflict=EU,k.noop=$1,k.now=hd,k.pad=QG,k.padEnd=JG,k.padStart=XG,k.parseInt=YG,k.random=kG,k.reduce=dz,k.reduceRight=hz,k.repeat=KG,k.replace=eU,k.result=AG,k.round=QU,k.runInContext=le,k.sample=pz,k.size=vz,k.snakeCase=tU,k.some=yz,k.sortedIndex=fk,k.sortedIndexBy=gk,k.sortedIndexOf=vk,k.sortedLastIndex=yk,k.sortedLastIndexBy=bk,k.sortedLastIndexOf=Ck,k.startCase=iU,k.startsWith=rU,k.subtract=JU,k.sum=XU,k.sumBy=YU,k.template=oU,k.times=RU,k.toFinite=Wr,k.toInteger=nt,k.toLength=VM,k.toLower=aU,k.toNumber=Ui,k.toSafeInteger=aG,k.toString=wt,k.toUpper=sU,k.trim=lU,k.trimEnd=cU,k.trimStart=uU,k.truncate=dU,k.unescape=hU,k.uniqueId=FU,k.upperCase=mU,k.upperFirst=B1,k.each=_M,k.eachRight=PM,k.first=yM,F1(k,function(){var o={};return Pr(k,function(c,f){Et.call(k.prototype,f)||(o[f]=c)}),o}(),{chain:!1}),k.VERSION=i,$i(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){k[o].placeholder=k}),$i(["drop","take"],function(o,c){ct.prototype[o]=function(f){f=f===n?1:gn(nt(f),0);var E=this.__filtered__&&!c?new ct(this):this.clone();return E.__filtered__?E.__takeCount__=Vn(f,E.__takeCount__):E.__views__.push({size:Vn(f,N),type:o+(E.__dir__<0?"Right":"")}),E},ct.prototype[o+"Right"]=function(f){return this.reverse()[o](f).reverse()}}),$i(["filter","map","takeWhile"],function(o,c){var f=c+1,E=f==C||f==B;ct.prototype[o]=function(R){var q=this.clone();return q.__iteratees__.push({iteratee:We(R,3),type:f}),q.__filtered__=q.__filtered__||E,q}}),$i(["head","last"],function(o,c){var f="take"+(c?"Right":"");ct.prototype[o]=function(){return this[f](1).value()[0]}}),$i(["initial","tail"],function(o,c){var f="drop"+(c?"":"Right");ct.prototype[o]=function(){return this.__filtered__?new ct(this):this[f](1)}}),ct.prototype.compact=function(){return this.filter(ai)},ct.prototype.find=function(o){return this.filter(o).head()},ct.prototype.findLast=function(o){return this.reverse().find(o)},ct.prototype.invokeMap=ot(function(o,c){return typeof o=="function"?new ct(this):this.map(function(f){return hl(f,o,c)})}),ct.prototype.reject=function(o){return this.filter(pd(We(o)))},ct.prototype.slice=function(o,c){o=nt(o);var f=this;return f.__filtered__&&(o>0||c<0)?new ct(f):(o<0?f=f.takeRight(-o):o&&(f=f.drop(o)),c!==n&&(c=nt(c),f=c<0?f.dropRight(-c):f.take(c-o)),f)},ct.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},ct.prototype.toArray=function(){return this.take(N)},Pr(ct.prototype,function(o,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),E=/^(?:head|last)$/.test(c),R=k[E?"take"+(c=="last"?"Right":""):c],q=E||/^find/.test(c);R&&(k.prototype[c]=function(){var te=this.__wrapped__,ae=E?[1]:arguments,ue=te instanceof ct,ye=ae[0],be=ue||et(te),we=function(st){var ht=R.apply(k,uo([st],ae));return E&&Re?ht[0]:ht};be&&f&&typeof ye=="function"&&ye.length!=1&&(ue=be=!1);var Re=this.__chain__,ke=!!this.__actions__.length,Qe=q&&!Re,it=ue&&!ke;if(!q&&be){te=it?te:new ct(this);var Je=o.apply(te,ae);return Je.__actions__.push({func:ud,args:[we],thisArg:n}),new ji(Je,Re)}return Qe&&it?o.apply(this,ae):(Je=this.thru(we),Qe?E?Je.value()[0]:Je.value():Je)})}),$i(["pop","push","shift","sort","splice","unshift"],function(o){var c=Vu[o],f=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",E=/^(?:pop|shift)$/.test(o);k.prototype[o]=function(){var R=arguments;if(E&&!this.__chain__){var q=this.value();return c.apply(et(q)?q:[],R)}return this[f](function(te){return c.apply(et(te)?te:[],R)})}}),Pr(ct.prototype,function(o,c){var f=k[c];if(f){var E=f.name+"";Et.call(Ga,E)||(Ga[E]=[]),Ga[E].push({name:c,func:f})}}),Ga[id(n,S).name]=[{name:"wrapper",func:n}],ct.prototype.clone=hN,ct.prototype.reverse=mN,ct.prototype.value=pN,k.prototype.at=Gk,k.prototype.chain=Uk,k.prototype.commit=Hk,k.prototype.next=Wk,k.prototype.plant=Zk,k.prototype.reverse=Qk,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=Jk,k.prototype.first=k.prototype.head,ol&&(k.prototype[ol]=qk),k},ja=H$();Ho?((Ho.exports=ja)._=ja,Vy._=ja):An._=ja}).call(ui)}($l,$l.exports);var cD=$l.exports;function kt(e,t=!1){const{Cartesian2:n,CallbackProperty:i}=Cesium;if(e instanceof Cesium.Cartesian2||e instanceof i)return e;if(Lt(e)&&dt(e,"x")&&dt(e,"y")){const r=e;return new n(r.x,r.y)}if(St(e))return new n(e[0],e[1]);if(nn(e))return new i(e,t)}function yt(e,t,n=!1){const{CallbackProperty:i,Cartesian3:r,Ellipsoid:a,SampledPositionProperty:s,CompositePositionProperty:l,ConstantPositionProperty:d,TimeIntervalCollectionPositionProperty:h}=Cesium;if(e instanceof r||e instanceof i||e instanceof s||e instanceof l||e instanceof d||e instanceof h)return e;if(t=t||a.WGS84,Lt(e)){if(dt(e,"x")&&dt(e,"y")&&dt(e,"z")){const m=e;return new r(m.x,m.y,m.z)}else if(dt(e,"lng")&&dt(e,"lat")){const m=e;return r.fromDegrees(m.lng,m.lat,m.height||0,t)}}if(St(e))return r.fromDegrees(e[0],e[1],e[2]||0,t);if(nn(e))return new i(e,n)}function Mi(e,t,n=!1){const{CallbackProperty:i,Cartesian3:r,Ellipsoid:a}=Cesium;if(e instanceof i)return e;if(nn(e))return new i(e,n);if(t=t||a.WGS84,St(e)){if(St(e[0])||Lt(e[0])){const s=[];return e.forEach(l=>{s.push(yt(l,t))}),s}return r.fromDegreesArrayHeights(e,t)}}function NC(e,t){const{CallbackProperty:n}=Cesium;if(e instanceof n)return e;if(nn(e))return new n(e,t);if(St(e)){const i=[];return e.forEach(r=>{i.push(kt(r))}),i}}function nh(e,t=!1){const{CallbackProperty:n,Quaternion:i,VelocityOrientationProperty:r}=Cesium;if(e instanceof i||e instanceof n||e instanceof r)return e;if(Lt(e)&&dt(e,"x")&&dt(e,"y")){const a=e;return new i(a.x,a.y,a.z,a.w)}if(St(e))return new i(e[0],e[1],e[2],e[3]);if(nn(e))return new n(e,t)}function jC(e,t){e.forEach(n=>{n.positions=Mi(n.positions,t),n.holes&&jC(n.holes,t)})}function ih(e,t,n=!1){var i;const{PolygonHierarchy:r,CallbackProperty:a}=Cesium;if(e instanceof r||e instanceof a)return e;if(nn(e))return new a(e,n);if(St(e)&&e.length>=3){const s=Mi(e,t);return new r(s)}if(Lt(e)&&dt(e,"positions")){const s=cD.cloneDeep(e);return s.positions=Mi(s.positions,t),(i=s.holes)!=null&&i.length&&jC(s.holes,t),s}}function rh(e,t=!1){const{NearFarScalar:n,CallbackProperty:i}=Cesium;if(e instanceof n||e instanceof i)return e;if(Lt(e)&&dt(e,"near")&&dt(e,"far")){const r=e;return new n(r.near,r.nearValue||0,r.far,r.farValue||1)}if(St(e))return new n(e[0],e[1],e[2],e[3]);if(nn(e))return new i(e,t)}function uD(e,t=!1){const{DistanceDisplayCondition:n,CallbackProperty:i}=Cesium;if(e instanceof n||e instanceof i)return e;if(Lt(e)&&dt(e,"near")&&dt(e,"far")){const r=e;return new n(r.near,r.far)}if(St(e))return new n(e[0],e[1]);if(nn(e))return new i(e,t)}function Ue(e,t=!1){const{Color:n,CallbackProperty:i,defaultValue:r}=Cesium;if(e instanceof n||e instanceof i)return e;if(xi(e))return n.fromCssColorString(e);if(Lt(e)){if(dt(e,"red")){const a=e;return n.fromBytes(r(a.red,255),r(a.green,255),r(a.blue,255),r(a.alpha,255))}else if(dt(e,"x")){const a=e;return new n(r(a.x,1),r(a.y,1),r(a.z,1),r(a.w,1))}}if(St(e))return n.fromBytes(e[0],e[1],e[2],r(e[3],255));if(nn(e))return new i(e,t)}function dD(e){if(St(e)){const t=[];return e.forEach(n=>{t.push(Ue(n))}),t}else return e}function hD(e,t=!1){const{CallbackProperty:n,Color:i,CheckerboardMaterialProperty:r,ColorMaterialProperty:a,CompositeMaterialProperty:s,GridMaterialProperty:l,ImageMaterialProperty:d,MaterialProperty:h,PolylineArrowMaterialProperty:m,PolylineDashMaterialProperty:p,PolylineGlowMaterialProperty:g,PolylineOutlineMaterialProperty:v,StripeMaterialProperty:b,StripeOrientation:P,defaultValue:w,Cartesian2:S,Material:T}=Cesium;if(e instanceof n||e instanceof i||e instanceof r||e instanceof a||e instanceof s||e instanceof l||e instanceof d||e instanceof h||e instanceof m||e instanceof p||e instanceof g||e instanceof v||e instanceof b||e instanceof Zr||e instanceof ra||e instanceof oa)return e;if(xi(e)&&/(.*)\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$/.test(e)||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)return new d({image:e,repeat:kt({x:1,y:1}),color:i.WHITE,transparent:!0});if(St(e)||xi(e))return new a(Ue(e));if(Lt(e)&&dt(e,"fabric")){const _=e;switch(_.fabric.type){case"Image":return new d({image:_.fabric.uniforms.image,repeat:kt(w(_.fabric.uniforms.repeat,{x:1,y:1})),color:w(Ue(_.fabric.uniforms.color),i.WHITE),transparent:w(_.fabric.uniforms.transparent,!1)});case"Color":return new a(Ue(w(_.fabric.uniforms.color,i.WHITE)));case"PolylineArrow":return new m(Ue(w(_.fabric.uniforms.color,i.WHITE)));case"PolylineDash":return new p({color:Ue(w(_.fabric.uniforms.color,"white")),gapColor:Ue(w(_.fabric.uniforms.gapColor,i.TRANSPARENT)),dashLength:w(_.fabric.uniforms.dashLength,16),dashPattern:w(_.fabric.uniforms.dashPattern,255)});case"PolylineGlow":return new g({color:Ue(w(_.fabric.uniforms.color,i.WHITE)),glowPower:w(_.fabric.uniforms.glowPower,.25),taperPower:w(_.fabric.uniforms.taperPower,1)});case"PolylineOutline":return new v({color:Ue(w(_.fabric.uniforms.color,i.WHITE)),outlineColor:Ue(w(_.fabric.uniforms.outlineColor,i.BLACK)),outlineWidth:w(_.fabric.uniforms.outlineWidth,1)});case"Checkerboard":return new r({evenColor:Ue(w(_.fabric.uniforms.evenColor,i.WHITE)),oddColor:Ue(w(_.fabric.uniforms.oddColor,i.BLACK)),repeat:w(kt(_.fabric.uniforms.repeat),{x:2,y:2})});case"Grid":return new l({color:Ue(w(_.fabric.uniforms.color,i.WHITE)),cellAlpha:w(_.fabric.uniforms.cellAlpha,.1),lineCount:w(kt(_.fabric.uniforms.lineCount),{x:8,y:8}),lineThickness:w(kt(_.fabric.uniforms.lineThickness),{x:1,y:1}),lineOffset:w(kt(_.fabric.uniforms.lineOffset),{x:0,y:0})});case"Stripe":return new b({orientation:w(_.fabric.uniforms.orientation,P.HORIZONTAL),evenColor:Ue(w(_.fabric.uniforms.evenColor,"white")),oddColor:Ue(w(_.fabric.uniforms.oddColor,"black")),offset:w(_.fabric.uniforms.offset,0),repeat:w(_.fabric.uniforms.repeat,1)});case"VcCircleWave":return new Zr({duration:w(_.fabric.uniforms.duration,3e3),gradient:w(_.fabric.uniforms.gradient,.5),color:Ue(w(_.fabric.uniforms.color,i.RED)),count:w(_.fabric.uniforms.count,3)});case"VcLineFlow":return new ra({image:w(_.fabric.uniforms.image,T.DefaultImageId),color:Ue(w(_.fabric.uniforms.color,new i(1,1,1,1))),repeat:kt(w(_.fabric.uniforms.repeat,new S(1,1))),axisY:w(_.fabric.uniforms.axisY,!1),mixt:w(_.fabric.uniforms.mixt,!1),speed:w(_.fabric.uniforms.speed,10),time:w(_.fabric.uniforms.time,-1)});case"VcLineTrail":return new oa({image:w(_.fabric.uniforms.image,T.DefaultImageId),color:Ue(w(_.fabric.uniforms.color,new i(1,0,0,1))),repeat:kt(w(_.fabric.uniforms.repeat,new S(1,1))),axisY:w(_.fabric.uniforms.axisY,!1),duration:w(_.fabric.uniforms.duration,3e3),loop:w(_.fabric.uniforms.loop,!0)})}}return nn(e)?new n(e,t):e}function oh(e){var t;const n=this,i=(t=n==null?void 0:n.proxy)==null?void 0:t.$options.name;if(i&&(i.indexOf("Graphics")!==-1||i.indexOf("Datasource")!==-1||i==="VcOverlayDynamic"||i==="VcEntity"))return hD(e);const{Material:r,combine:a}=Cesium;if(e instanceof r)return e;if(Lt(e)&&dt(e,"fabric")){const s=l=>{for(const d in l)if(!St(l[d])&&Lt(l[d]))s(l[d]);else if(d.toLocaleLowerCase().indexOf("color")!==-1&&!us(l[d])){const h=Ue(l[d]);l[d]=a(h,h,!0)}};return s(e),new r(e)}if(St(e)||xi(e)){const s=r.fromType("Color");return s.uniforms.color=Ue(e),s}}function Nl(e){var t;const{Appearance:n,DebugAppearance:i,MaterialAppearance:r,PolylineColorAppearance:a,EllipsoidSurfaceAppearance:s,PerInstanceColorAppearance:l,PolylineMaterialAppearance:d}=Cesium;if(e instanceof n||e instanceof i||e instanceof r||e instanceof a||e instanceof s||e instanceof l||e instanceof d)return e;if(Lt(e)&&dt(e,"type")){const h={...e.options};return(t=e.options)!=null&&t.material&&(h.material=oh.call(this,e.options.material)),new Cesium[e.type]({...h})}}function xo(e,t=!1){const{Rectangle:n,RectangleGraphics:i,CallbackProperty:r}=Cesium;if(e instanceof i||e instanceof n||e instanceof r)return e;if(St(e))return n.fromDegrees(e[0],e[1],e[2],e[3]);if(Lt(e)){if(dt(e,"west")){const a=e;return n.fromDegrees(a.west,a.south,a.east,a.north)}else if(dt(e,"x")){const a=e;return new n(a.x,a.y,a.z,a.w)}}if(nn(e))return new r(e,t)}function kC(e,t=!1){const{BoundingRectangle:n,CallbackProperty:i}=Cesium;if(e instanceof n||e instanceof i)return e;if(Lt(e)&&dt(e,"x")){const r=e;return new n(r.x,r.y,r.width,r.height)}if(St(e))return new n(e[0],e[1],e[2],e[3]);if(nn(e))return new i(e,t)}function mD(e,t=!1){const{Cartesian3:n,Plane:i,PlaneGraphics:r,CallbackProperty:a}=Cesium;if(e instanceof r||e instanceof i||e instanceof a)return e;if(Lt(e)&&dt(e,"normal")){const s=e;return n.normalize(yt(s.normal),s.normal),new i(s.normal,s.distance)}if(St(e)){const s=yt(e[0]),l=n.normalize(s,new n);return new i(l,e[1])}if(nn(e))return new a(e,t)}function pD(e,t=!1){const{TranslationRotationScale:n,CallbackProperty:i}=Cesium;if(e instanceof i||e instanceof n)return e;if(Lt(e)&&dt(e,"translation")){const r=e;return new n(yt(r.translation),nh(r.rotation),yt(r.scale))}return St(e)?new n(yt(e[0]),nh(e[1]),yt(e[2])):nn(e)?new i(e,t):e}function fD(e){var t;const n=(t=this.proxy)==null?void 0:t.$options.name,i={};switch(n){case"VcDatasourceGeojson":return Object.assign(i,e),i&&i.markerColor&&(i.markerColor=Ue(i.markerColor)),i&&i.stroke&&(i.stroke=Ue(i.stroke)),i&&i.fill&&(i.fill=Ue(i.fill)),i}return e}function gD(e){const t=e.scene,n=new Promise((i,r)=>{const a=e.scene.postRender.addEventListener(()=>{a();try{const s=e.scene.canvas;i(s.toDataURL("image/png"))}catch(s){r(s)}})});return t.render(e.clock.currentTime),n}function zC(e,t){const{Math:n,Rectangle:i,defaultValue:r}=Cesium;let a,s={};if(dt(e,"position")){const l=e.position;a=yt(l,t),dt(l,"lng")&&dt(l,"lat")||St(l)?s={heading:n.toRadians(r(e.heading,360)),pitch:n.toRadians(r(e.pitch,-90)),roll:n.toRadians(r(e.roll,0))}:s={heading:r(e.heading,2*Math.PI),pitch:r(e.pitch,-Math.PI/2),roll:r(e.roll,0)}}else if(dt(e,"rectangle")){const l=e.rectangle;a=xo(l),i.validate(a),dt(l,"west")&&dt(l,"south")&&dt(l,"east")&&dt(l,"north")||St(l)?s={heading:n.toRadians(r(e.heading,360)),pitch:n.toRadians(r(e.pitch,-90)),roll:n.toRadians(r(e.roll,0))}:s={heading:r(e.heading,2*Math.PI),pitch:r(e.pitch,-Math.PI/2),roll:r(e.roll,0)}}return{destination:a,orientation:s}}function ah(e,t){const{destination:n,orientation:i}=zC(t,e.scene.globe.ellipsoid);e.camera.setView({destination:n,orientation:i})}function vD(e,t,n){const{destination:i,orientation:r}=zC(t,e.scene.globe.ellipsoid);e.camera.flyTo({...n,destination:(n==null?void 0:n.destination)||i,orientation:(n==null?void 0:n.orientation)||r})}function sh(e,t,n){const{EllipsoidGeodesic:i,Ellipsoid:r}=Cesium;n=n||r.WGS84;const a=n.cartesianToCartographic(e),s=n.cartesianToCartographic(t);return new i(a,s).surfaceDistance}function yD(e,t,n,i){const{Cartesian3:r}=Cesium;if(r.equals(e,t))return;const a=Cesium.Cartesian3.subtract(t,e,new Cesium.Cartesian3),s=Cesium.Cartesian3.normalize(a,new Cesium.Cartesian3),l=Cesium.Transforms.rotationMatrixFromPositionVelocity(e,s,n.globe.ellipsoid),d=Cesium.Matrix4.fromRotationTranslation(l,e),h=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Matrix4.getTranslation(d,new Cesium.Cartesian3),Cesium.Ellipsoid.WGS84,new Cesium.Matrix4),m=Cesium.Matrix4.multiply(Cesium.Matrix4.inverse(h,new Cesium.Matrix4),d,new Cesium.Matrix4),p=Cesium.Matrix4.getMatrix3(m,new Cesium.Matrix3),g=Cesium.Quaternion.fromRotationMatrix(p);return Cesium.HeadingPitchRoll.fromQuaternion(g)}function bD(e,t,n,i){const{HeadingPitchRoll:r,Transforms:a,Matrix4:s,Cartesian3:l,Cartesian4:d,Quaternion:h,Cartographic:m,Ellipsoid:p}=Cesium;i=i||p.WGS84;const g=new r(t,0,0),v=new l(1,1,1),b=a.headingPitchRollToFixedFrame(e,g),P=s.getColumn(b,1,new d),w=new l(P.x,P.y,P.z),S=h.fromAxisAngle(w,n*i.oneOverRadii.x),T=s.fromTranslationQuaternionRotationScale(l.ZERO,S,v),_=s.multiplyByPoint(T,e,new l),M=m.fromCartesian(e,i),A=m.fromCartesian(_,i);return A.height=M.height,m.toCartesian(A,i)}function GC(e){let t=0;const{CoplanarPolygonGeometry:n,VertexFormat:i,defined:r,Cartesian3:a}=Cesium,s=n.createGeometry(n.fromPositions({positions:e,vertexFormat:i.POSITION_ONLY}));if(!ci(s)&&r(s)){const l=s.indices,d=s.attributes.position.values;for(let h=0;h<l.length;h+=3){const m=l[h],p=l[h+1],g=l[h+2];t+=CD(a.unpack(d,3*m,{}),a.unpack(d,3*p,{}),a.unpack(d,3*g,{}))}}return t}const CD=(e,t,n)=>{const{Cartesian3:i}=Cesium,r=i.subtract(e,t,{}),a=i.subtract(n,t,{}),s=i.cross(r,a,r);return .5*i.magnitude(s)};function Zi(e){const{JulianDate:t}=Cesium;return e instanceof t?e:xi(e)?Cesium.JulianDate.fromDate(new Date(e)):e instanceof Date?Cesium.JulianDate.fromDate(e):Cesium.JulianDate.now()}function lh(e){const{HeadingPitchRange:t,Math:n}=Cesium;return e instanceof Cesium.HeadingPitchRange?e:Array.isArray(e)?new t(n.toRadians(e[0])||0,n.toRadians(e[1])||0,e[2]||0):Lt(e)?new t(e.heading||0,e.pitch||0,e.range||0):new t}function UC(e,t){const{Cartesian3:n,Matrix4:i,Transforms:r,Math:a}=Cesium,s=new n,l=r.eastNorthUpToFixedFrame(e);return i.inverse(l,l),i.multiplyByPoint(l,t,s),n.normalize(s,s),a.toDegrees(Math.atan2(s.x,s.y))}function HC(e,t){const{Cartesian3:n,Matrix4:i,Transforms:r,Math:a}=Cesium,s=new n,l=r.eastNorthUpToFixedFrame(e);return i.inverse(l,l),i.multiplyByPoint(l,t,s),n.normalize(s,s),a.toDegrees(Math.asin(s.z))}function WC(e,t,n,i=[]){const{Cartesian3:r,Ray:a,defined:s}=Cesium,l=r.normalize(r.subtract(t,e,new r),new r),d=new a(e,l),h=n.scene.pickFromRay(d,i);if(s(h)&&s(h.position))return h.position}function ch(e){const t=7096758e-11,n=91610.74,i=-40467.74;return Math.round(i+(40487.57-i)/(1+Math.pow(e/n,t)))}function qt(e,t,n=">="){return e=e||"1.6.7",rD(e,t,n)}function wD(e){const{ImageBasedLighting:t,defined:n}=Cesium;if(e instanceof Cesium.ImageBasedLighting)return e;const i=new t;return i.imageBasedLightingFactor&&(i.imageBasedLightingFactor=kt(e.imageBasedLightingFactor)),i.sphericalHarmonicCoefficients&&(i.sphericalHarmonicCoefficients=Mi(e.sphericalHarmonicCoefficients)),i.luminanceAtZenith&&(i.luminanceAtZenith=Number(e.luminanceAtZenith)),n(i.specularEnvironmentMaps)&&(i.specularEnvironmentMaps=e.specularEnvironmentMaps),i}const Oo={position:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:yt,deep:!0}}},qC={viewFrom:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:yt,deep:!0}}},uh={orientation:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:nh}}},dh={alignedAxis:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:yt}}},Tr={color:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Ue}}},_D={depthFailColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Ue}}},Mo={disableDepthTestDistance:[Number,Object,Function]},Zt={distanceDisplayCondition:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:uD}}},hs={eyeOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:yt}}},xn={height:[Number,Object,Function]},$n={heightReference:{type:[Number,Object,Function]}},ms={horizontalOrigin:{type:[Number,Object,Function],default:0}},jl={image:[String,Object,HTMLCanvasElement,Function]},ZC={imageSubRegion:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:kC}}},aa={pixelOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0}),validator:e=>St(e)?e.length===2:lr(e)?dt(e,"x")&&dt(e,"y"):!!nn(e),watcherOptions:{cesiumObjectBuilder:kt}}},ps={pixelOffsetScaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:rh}}},Ir={rotation:{type:[Number,Object,Function],default:0}},So={scale:{type:[Number,Object,Function],default:1}},To={scaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:rh}}},qe={show:{type:[Boolean,Object,Function],default:!0}},kl={sizeInMeters:{type:[Boolean,Object,Function],default:!1}},Io={translucencyByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:rh}}},fs={verticalOrigin:{type:[Number,Object,Function],default:0}},Qi={width:[Number,Object,Function]},zl={dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:yt}}},Ji={fill:{type:[Boolean,Object,Function],default:!0}},Qn={material:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:oh}}},Xi={outline:{type:[Boolean,Object,Function],default:!1}},Ln={outlineColor:{type:[Object,String,Array,Function],default:"black",watcherOptions:{cesiumObjectBuilder:Ue}}},Nn={outlineWidth:{type:[Number,Object,Function],default:1}},On={shadows:[Number,Object,Function]},Jn={positions:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:Mi,exclude:"_callback",deep:!0}}},jn={extrudedHeight:[Number,Object,Function]},gs={extrudedHeightReference:[Number,Object,Function]},Ao={cornerType:{type:[Number,Object,Function],default:0}},Bt={granularity:[Number,Object,Function]},Yi={classificationType:{type:[Number,Object,Function]}},sa={zIndex:[Number,Object,Function]},Gl={length:[Number,Object,Function]},Ul={topRadius:[Number,Object,Function]},Hl={bottomRadius:[Number,Object,Function]},la={numberOfVerticalLines:{type:[Number,Object,Function],default:16}},Wl={slices:{type:[Number,Object,Function],default:128}},ql={semiMajorAxis:[Number,Object,Function]},Zl={semiMinorAxis:[Number,Object,Function]},cr={stRotation:{type:[Number,Object,Function],default:0}},Ql={radii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:yt}}},Jl={innerRadii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:yt}}},Xl={minimumClock:{type:[Number,Object,Function],default:0}},Yl={maximumClock:{type:[Number,Object,Function],default:2*Math.PI}},Kl={minimumCone:{type:[Number,Object,Function],default:0}},ec={maximumCone:{type:[Number,Object,Function],default:Math.PI}},ca={stackPartitions:{type:[Number,Object,Function],default:64}},ua={slicePartitions:{type:[Number,Object,Function],default:64}},tc={subdivisions:{type:[Number,Object,Function],default:128}},hh={text:[String,Object,Function]},mh={font:{type:[String,Object,Function],default:"30px sans-serif"}},ph={labelStyle:{type:[Number,Object,Function],default:0}},fh={showBackground:{type:[Boolean,Object,Function],default:!1}},gh={backgroundColor:{type:[Object,String,Array,Function],default:()=>({x:.165,y:.165,z:.165,w:.8}),watcherOptions:{cesiumObjectBuilder:Ue}}},vh={backgroundPadding:{type:[Object,Array,Function],default:()=>({x:7,y:5}),watcherOptions:{cesiumObjectBuilder:kt}}},yh={fillColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Ue}}},bh={uri:[String,Object,Function]},Ch={minimumPixelSize:{type:[Number,Object,Function],default:0}},wh={maximumScale:[Number,Object,Function]},_h={incrementallyLoadTextures:{type:[Boolean,Object,Function],default:!0}},QC={clampAnimations:{type:[Boolean,Object,Function],default:!0}},Ph={clampAnimations:{type:[Boolean,Object,Function],default:!0}},Eh={silhouetteColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Ue}}},xh={silhouetteSize:{type:[Number,Object,Function],default:0}},Oh={colorBlendMode:{type:[Number,Object,Function],default:0}},Mh={colorBlendAmount:{type:[Number,Object,Function],default:.5}},nc={imageBasedLightingFactor:{type:[Object,Array,Function],default:()=>[1,1],watcherOptions:{cesiumObjectBuilder:kt}}},Sh={lightColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Ue}}},JC={nodeTransformations:{type:[Object,Function],watcherOptions:{cesiumObjectBuilder:pD}}},XC={articulations:[Object,Function]},vs={clippingPlanes:[Object,Function]},YC={plane:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:mD}}},Th={pixelSize:{type:[Number,Object,Function],default:1}},KC={hierarchy:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:ih,deep:!0,exclude:"_callback"}}},ic={perPositionHeight:{type:[Boolean,Object,Function],default:!1}},Ih={closeTop:{type:[Boolean,Object,Function],default:!0}},Ah={closeBottom:{type:[Boolean,Object,Function],default:!0}},Ar={arcType:{type:[Number,Object,Function],default:1}},ew={depthFailMaterial:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:oh}}},ys={clampToGround:{type:[Boolean,Object,Function],default:!1}},tw={shape:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:NC}}},nw={coordinates:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:xo}}},Dh={maximumScreenSpaceError:{type:[Number,Object,Function],default:16}},rc={minimumHeights:[Array,Object,Function]},oc={maximumHeights:[Array,Object,Function]},iw={cutoutRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:xo}}},rw={colorToAlpha:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Ue}}},Si={url:[String,Object]},Lh={token:String},bs={tileDiscardPolicy:Object},Bh={layers:String},ac={enablePickFeatures:{type:Boolean,default:!0}},vn={rectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:xo}}},Ki={tilingScheme:Object},at={ellipsoid:Object},un={credit:{type:[String,Object],default:""}},ur={tileWidth:{type:Number,default:256}},dr={tileHeight:{type:Number,default:256}},Xn={maximumLevel:Number},di={minimumLevel:{type:Number,default:0}},Rh={fileExtension:{type:String,default:"png"}},Vh={accessToken:String},Fh={format:{type:String,default:"png"}},sc={subdomains:[String,Array]},$h={getFeatureInfoFormats:Array},Cs={clock:Object},Nh={times:Object},Do={projectionTransforms:{type:[Boolean,Object],default:!1}},jh={customShader:{type:Object}},ow={maximumMemoryUsage:{type:Number,default:256}},aw={defaultColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Ue}}},kh={tileStyle:{type:Object}},Lo={allowPicking:{type:Boolean,default:!0}},Bo={asynchronous:{type:Boolean,default:!0}},lc={debugShowShadowVolume:{type:Boolean,default:!1}},ws={releaseGeometryInstances:{type:Boolean,default:!0}},_s={interleave:{type:Boolean,default:!1}},da={appearance:{type:Object,watcherOptions:{cesiumObjectBuilder:Nl,deep:!0}}},zh={depthFailAppearance:{type:Object,watcherOptions:{cesiumObjectBuilder:Nl,deep:!0}}},Ps={geometryInstances:[Array,Object]},cc={vertexCacheOptimize:{type:Boolean,default:!1}},Es={compressVertices:{type:Boolean,default:!0}},Ti={modelMatrix:Object},er={debugShowBoundingVolume:{tyep:Boolean,default:!1}},xs={scene:Object},uc={blendOption:{type:Number,default:2}},Qr={id:null},Gh={loop:{type:Boolean,default:!1}},Uh={debugWireframe:{type:Boolean,default:!1}},Mn={vertexFormat:Object},Os={center:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:yt}}},Ms={radius:Number},Hh={frustum:Object},Wh={origin:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:yt}}},Ro={polygonHierarchy:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:ih,deep:!0}}},sw={startColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Ue}}},lw={endColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Ue}}},cw={minimumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:kt}}},uw={maximumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:kt}}},dw={imageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:kt}}},qh={shapePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:NC,deep:!0}}},Zh={polylinePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:Mi,deep:!0}}},hw={lightColor:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:yt}}},Qh={luminanceAtZenith:{type:Number,default:.2}},Jh={sphericalHarmonicCoefficients:{type:[Array,Object],watcherOptions:{cesiumObjectBuilder:Mi}}},Xh={specularEnvironmentMaps:String},mw={imageBasedLighting:{type:Object,watcherOptions:{cesiumObjectBuilder:wD}}},Yh={backFaceCulling:{type:Boolean,default:!0}},Kh={colors:{type:Array,watcherOptions:{cesiumObjectBuilder:dD,deep:!0}}},em={data:{type:[String,Object],required:!0}},dc={sourceUri:{type:[String,Object]}},PD={options:{type:Object,watcherOptions:{cesiumObjectBuilder:fD,deep:!0}}},pw={glowColor:{type:[String,Array,Object],default:()=>[0,1,0,.05],watcherOptions:{cesiumObjectBuilder:Ue}}},fw={clearColor:{type:[String,Array,Object],watcherOptions:{cesiumObjectBuilder:Ue}}},gw={scissorRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:kC}}},_t={enableMouseEvent:{type:Boolean,default:!0}};var vw=Object.freeze({__proto__:null,customShader:jh,maximumMemoryUsage:ow,tileStyle:kh,defaultColor:aw,viewFrom:qC,projectionTransforms:Do,sourceUri:dc,colors:Kh,enableMouseEvent:_t,backFaceCulling:Yh,imageBasedLighting:mw,specularEnvironmentMaps:Xh,sphericalHarmonicCoefficients:Jh,luminanceAtZenith:Qh,maximumScreenSpaceError:Dh,runAnimations:QC,articulations:XC,scissorRectangle:gw,clearColor:fw,glowColor:pw,options:PD,data:em,imageSubRegion:ZC,coordinates:nw,nodeTransformations:JC,hierarchy:KC,plane:YC,colorToAlpha:rw,cutoutRectangle:iw,polylinePositions:Zh,shapePositions:qh,imageSize:dw,maximumImageSize:uw,minimumImageSize:cw,endColor:lw,startColor:sw,shape:tw,lightColor:Sh,lightColor2:hw,imageBasedLightingFactor:nc,polygonHierarchy:Ro,orientation:uh,origin:Wh,frustum:Hh,maximumCone:ec,minimumCone:Kl,maximumClock:Yl,minimumClock:Xl,innerRadii:Jl,radius:Ms,center:Os,debugWireframe:Uh,vertexFormat:Mn,position:Oo,loop:Gh,geometryInstances:Ps,depthFailAppearance:zh,appearance:da,interleave:_s,releaseGeometryInstances:ws,debugShowShadowVolume:lc,id:Qr,allowPicking:Lo,asynchronous:Bo,vertexCacheOptimize:cc,compressVertices:Es,modelMatrix:Ti,debugShowBoundingVolume:er,scene:xs,blendOption:uc,maximumHeights:oc,minimumHeights:rc,arcType:Ar,clampToGround:ys,closeBottom:Ah,closeTop:Ih,perPositionHeight:ic,pixelSize:Th,clippingPlanes:vs,colorBlendAmount:Mh,colorBlendMode:Oh,silhouetteSize:xh,silhouetteColor:Eh,clampAnimations:Ph,incrementallyLoadTextures:_h,maximumScale:wh,minimumPixelSize:Ch,uri:bh,fillColor:yh,backgroundPadding:vh,backgroundColor:gh,showBackground:fh,labelStyle:ph,font:mh,text:hh,subdivisions:tc,slicePartitions:ua,stackPartitions:ca,radii:Ql,stRotation:cr,semiMinorAxis:Zl,semiMajorAxis:ql,slices:Wl,numberOfVerticalLines:la,bottomRadius:Hl,topRadius:Ul,length:Gl,zIndex:sa,classificationType:Yi,granularity:Bt,cornerType:Ao,extrudedHeightReference:gs,extrudedHeight:jn,positions:Jn,image:jl,scale:So,pixelOffset:aa,eyeOffset:hs,horizontalOrigin:ms,verticalOrigin:fs,heightReference:$n,depthFailColor:_D,color:Tr,rotation:Ir,alignedAxis:dh,sizeInMeters:kl,width:Qi,height:xn,scaleByDistance:To,translucencyByDistance:Io,pixelOffsetScaleByDistance:ps,disableDepthTestDistance:Mo,dimensions:zl,fill:Ji,depthFailMaterial:ew,material:Qn,outline:Xi,outlineColor:Ln,outlineWidth:Nn,shadows:On,distanceDisplayCondition:Zt,show:qe,times:Nh,clock:Cs,getFeatureInfoFormats:$h,subdomains:sc,format:Fh,accessToken:Vh,fileExtension:Rh,minimumLevel:di,maximumLevel:Xn,tileHeight:dr,url:Si,token:Lh,tileDiscardPolicy:bs,layers:Bh,enablePickFeatures:ac,rectangle:vn,tilingScheme:Ki,ellipsoid:at,credit:un,tileWidth:ur}),yw={name:"zh-hans",nativeName:"\u4E2D\u6587(\u7B80\u4F53)",vc:{loadError:"\u52A0\u8F7D\u5931\u8D25\uFF0C\u5FC5\u987B\u4F5C\u4E3A VcViewer \u7684\u5B50\u7EC4\u4EF6\u52A0\u8F7D\u3002",navigation:{compass:{outerTip:`\u65CB\u8F6C\u89C6\u56FE\uFF1A\u987A/\u9006\u65F6\u9488\u65B9\u5411\u62D6\u62FD\u7F57\u76D8\u5916\u73AF\u3002
\u91CD\u7F6E\u89C6\u56FE\uFF1A\u53CC\u51FB\u7F57\u76D8\u5916\u73AF\u3002`,innerTip:`\u7FFB\u8F6C\u89C6\u56FE\uFF1A\u7531\u5185\u73AF\u5411\u5916\u73AF\u62D6\u62FD\u7F57\u76D8\u3002
 \u6216\u8005\u6309\u4F4F Ctrl \u952E\u7684\u540C\u65F6\u62D6\u62FD\u5730\u56FE\u3002`,title:"\u6309\u4F4F\u9F20\u6807\u62D6\u62FD\u65CB\u8F6C\u76F8\u673A\u3002"},zoomCotrol:{zoomInTip:"\u653E\u5927",zoomResetTip:"\u91CD\u7F6E\u89C6\u56FE",zoomOutTip:"\u7F29\u5C0F"},print:{printTip:"\u573A\u666F\u622A\u56FE/\u6253\u5370",printViewTitle:"\u6253\u5370\u9884\u89C8",credit:"\u5730\u56FE\u7248\u6743",screenshot:"\u573A\u666F\u622A\u56FE"},myLocation:{myLocationTip:"\u5B9A\u4F4D\u60A8\u7684\u4F4D\u7F6E",positioning:"\u5B9A\u4F4D\u4E2D...",fail:"\u5B9A\u4F4D\u5931\u8D25",centreMap:"\u6211\u7684\u4F4D\u7F6E",lat:"\u7EAC\u5EA6",lng:"\u7ECF\u5EA6",address:"\u5730\u5740"},statusBar:{lat:"\u7EAC\u5EA6",lng:"\u7ECF\u5EA6",zone:"\u5E26\u53F7",e:"X",n:"Y",elev:"\u9AD8\u7A0B",level:"\u5C42\u7EA7",heading:"\u65B9\u4F4D",pitch:"\u4FEF\u4EF0",roll:"\u4FA7\u7FFB",cameraHeight:"\u89C6\u9AD8",tip:"\u70B9\u51FB\u5207\u6362\u9F20\u6807\u663E\u793A\u5750\u6807\u4E3A UTM \u6295\u5F71\u5750\u6807"}},navigationSm:{compass:{outerTip:"\u65CB\u8F6C\u89C6\u56FE\uFF1A\u987A/\u9006\u65F6\u9488\u65B9\u5411\u62D6\u62FD\u7F57\u76D8\u5916\u73AF\uFF1B\u91CD\u7F6E\u89C6\u56FE\uFF1A\u53CC\u51FB\u7F57\u76D8\u5916\u73AF\u3002"},zoomCotrol:{zoomInTip:"\u653E\u5927",zoomBarTip:"\u6309\u4F4F\u6ED1\u5757\u5411\u4E0A\u653E\u5927\uFF0C\u5411\u4E0B\u7F29\u5C0F\u3002",zoomOutTip:"\u7F29\u5C0F"}},measurement:{expand:"\u5C55\u5F00",collapse:"\u6536\u62E2",editor:{move:"\u79FB\u52A8\u8282\u70B9",insert:"\u63D2\u5165\u8282\u70B9",remove:"\u79FB\u9664\u8282\u70B9",removeAll:"\u79FB\u9664\u6240\u6709\u8282\u70B9"},distance:{tip:"\u8DDD\u79BB\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u8DDD\u79BB\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u8DDD\u79BB\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},"component-distance":{tip:"\u4E09\u89D2\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E09\u89D2\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E09\u89D2\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},polyline:{tip:"\u6298\u7EBF\u8DDD\u79BB\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u91CF\u7B97\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},horizontal:{tip:"\u6C34\u5E73\u8DDD\u79BB\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u91CF\u7B97\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},vertical:{tip:"\u5782\u76F4\u8DDD\u79BB\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5782\u76F4\u8DDD\u79BB\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5782\u76F4\u8DDD\u79BB\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},height:{tip:"\u5730\u8868\u9AD8\u5EA6\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u9AD8\u5EA6\u91CF\u7B97\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u9AD8\u5EA6\u91CF\u7B97\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},area:{tip:"\u9762\u79EF\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u91CF\u7B97\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},point:{tip:"\u5750\u6807\u91CF\u7B97",drawingTipStart:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u5750\u6807\u91CF\u7B97\u70B9\u3002",drawingTipEnd:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u5750\u6807\u91CF\u7B97\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002",lng:"\u7ECF\u5EA6\uFF1A",lat:"\u7EAC\u5EA6\uFF1A",height:"\u9AD8\u5EA6\uFF1A",slope:"\u5761\u5EA6\uFF1A"},rectangle:{tip:"\u77E9\u5F62\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u77E9\u5F62\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u77E9\u5F62\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},regular:{tip:"\u6B63\u591A\u8FB9\u5F62\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},circle:{tip:"\u5706\u5F62\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5706\u5F62\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5706\u5F62\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},clear:{tip:"\u6E05\u9664\u91CF\u7B97\u7ED3\u679C"}},drawing:{expand:"\u5C55\u5F00",collapse:"\u6536\u62E2",editor:{move:"\u79FB\u52A8\u8282\u70B9",insert:"\u63D2\u5165\u8282\u70B9",remove:"\u79FB\u9664\u8282\u70B9",removeAll:"\u79FB\u9664\u6240\u6709\u8282\u70B9"},pin:{tip:"\u7ED8\u5236\u56FE\u6807\u70B9",drawingTipStart:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u56FE\u6807\u70B9\u3002",drawingTipEnd:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u56FE\u6807\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},point:{tip:"\u7ED8\u5236\u70B9",drawingTipStart:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u70B9\u3002",drawingTipEnd:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},polyline:{tip:"\u7ED8\u5236\u7EBF",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u7ED8\u5236\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},polygon:{tip:"\u7ED8\u5236\u9762",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u7ED8\u5236\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},rectangle:{tip:"\u7ED8\u5236\u77E9\u5F62",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u77E9\u5F62\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u77E9\u5F62\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},circle:{tip:"\u7ED8\u5236\u5706",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5706\u5F62\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5706\u5F62\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},regular:{tip:"\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},clear:{tip:"\u6E05\u9664\u7ED8\u5236\u7ED3\u679C"}},analysis:{expand:"\u5C55\u5F00",collapse:"\u6536\u62E2",editor:{move:"\u79FB\u52A8\u8282\u70B9",insert:"\u63D2\u5165\u8282\u70B9",remove:"\u79FB\u9664\u8282\u70B9",removeAll:"\u79FB\u9664\u6240\u6709\u8282\u70B9"},sightline:{tip:"\u901A\u89C6\u5206\u6790",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u89C2\u6D4B\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u76EE\u6807\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u7ED8\u5236\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},viewshed:{tip:"\u53EF\u89C6\u57DF\u5206\u6790",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u53EF\u89C6\u57DF\u5206\u6790\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u53EF\u89C6\u57DF\u5206\u6790\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},clear:{tip:"\u6E05\u9664\u5206\u6790\u7ED3\u679C"}},overview:{show:"\u663E\u793A\u9E70\u773C",hidden:"\u9690\u85CF\u9E70\u773C"},typhoon:{warn:"\u64AD\u653E\u53F0\u98CE\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A\u672A\u627E\u5230\u5BF9\u5E94\u7F16\u53F7\u7684\u53F0\u98CE\u6570\u636E\u3002"}}};const tm=e=>(t,n)=>nm(t,n,u.unref(e)),nm=(e,t,n)=>fb(n,e,e).replace(/\{(\w+)\}/g,(i,r)=>{var a;return`${(a=t==null?void 0:t[r])!=null?a:`{${r}}`}`}),im=e=>{const t=u.computed(()=>u.unref(e).name),n=u.isRef(e)?e:u.ref(e);return{lang:t,locale:n,t:tm(e)}},Qt=()=>{const e=Vl("locale");return im(u.computed(()=>e.value||yw))};function hc(e,t,n){const i=(s,l,d=!0)=>{const h=l||t.cesiumEvents||[];h&&h.forEach(m=>{if(s[m]){const p=ze(t,m),g=d?"addEventListener":"removeEventListener";p&&s[m][g](p)}})},r=s=>{var l;const{viewer:d,cesiumObject:h}=t;if(h===void 0||d===void 0)return;const{ScreenSpaceEventHandler:m,ScreenSpaceEventType:p}=Cesium;(!d._vcPickScreenSpaceEventHandler||!d._vcViewerScreenSpaceEventHandler)&&(d._vcPickScreenSpaceEventHandler=new m(d.canvas),d._vcViewerScreenSpaceEventHandler=new m(d.canvas),rm.forEach(g=>{const v=ze(t,g);v&&d._vcViewerScreenSpaceEventHandler.setInputAction(v,p[g]),d._vcPickScreenSpaceEventHandler.setInputAction(a.bind({eventName:g,viewer:d}),p[g])})),i(h,t.cesiumEvents||[],s),(l=t.cesiumMembersEvents)==null||l.forEach(g=>{const v=St(g.name)&&g.name.length>0&&h[g.name[0]]?h[g.name[0]][g.name[1]]:h[g.name];v&&i(v,g.events,s)}),e.enableMouseEvent&&bw.forEach(g=>{const v=ze(t,g);s?v&&(h[`vc${g}`]=v):v&&delete h[`vc${g}`]})};function a(s){if(!e.enableMouseEvent||!s)return;const l=this.viewer,{eventName:d}=this,h=s.position||s.endPosition;if(!h)return;const m=[];let p;d.indexOf("LEFT_DOUBLE_CLICK")!==-1?p="dblclick":d.indexOf("CLICK")!==-1?p="click":d.indexOf("DOWN")!==-1?p="mousedown":d.indexOf("UP")!==-1?p="mouseup":d.indexOf("MOUSE_MOVE")!==-1&&(p="mousemove");let g;p==="mousemove"?g="mouseout":p==="click"&&(g="clickout");const v=l.scene.pick(h);if(Cesium.defined(v)?(this.pickedFeature&&this.pickedFeature.id!==v.id&&m.push({callbackName:g,pickedFeature:this.pickedFeature}),p==="mousemove"&&(!this.pickedFeature||this.pickedFeature.id!==v.id)&&m.push({callbackName:"mouseover",pickedFeature:v}),m.push({callbackName:p,pickedFeature:v})):(this.pickedFeature&&m.push({callbackName:g,pickedFeature:this.pickedFeature}),this.pickedFeature=void 0),m.length===0)return;let b;const P=l.scene;if(P.mode===Cesium.SceneMode.SCENE3D){const T=P.camera.getPickRay(h);b=P.globe.pick(T,P)}else b=P.camera.pickEllipsoid(h,P.globe.ellipsoid);let w=-1;d.indexOf("LEFT")!==-1?w=0:d.indexOf("MIDDLE")!==-1?w=1:d.indexOf("RIGHT")!==-1&&(w=2);const S=[];m.forEach(T=>{const _=T.callbackName,M=T.pickedFeature;M.id&&(St(M.id)?M.id[0]instanceof Cesium.Entity?S.push({callbackName:_,cesiumObject:M.id[0].entityCollection.owner,pickedFeature:M}):S.push({callbackName:_,cesiumObject:M.primitive.owner,pickedFeature:M}):M.id instanceof Cesium.Entity&&(S.push({callbackName:_,cesiumObject:M.id,pickedFeature:M}),S.push({callbackName:_,cesiumObject:M.id.entityCollection.owner,pickedFeature:M})));const A=D=>{S.push({callbackName:_,cesiumObject:D,pickedFeature:M}),D._vcParent&&A(D._vcParent)};M.primitive&&(M.primitive._vcParent&&A(M.primitive._vcParent),S.push({callbackName:_,cesiumObject:M.primitive,pickedFeature:M})),M.collection&&(M.collection._vcParent&&A(M.collection._vcParent),S.push({callbackName:_,cesiumObject:M.collection,pickedFeature:M}))}),S.forEach(T=>{if(T.callbackName){const _=T.cesiumObject[`vc${T.callbackName}`]||T.cesiumObject[`on${Ll(T.callbackName)}`]||T.cesiumObject[pe(`on${Ll(T.callbackName)}`)];if(Cesium.defined(_)){const M={type:`on${T.callbackName}`,windowPosition:h,surfacePosition:b,pickedFeature:T.pickedFeature,button:w,cesiumObject:T.cesiumObject};_ instanceof Cesium.CallbackProperty?_._callback(M):_(M)}}}),this.pickedFeature=v}return{bindEvents:i,registerEvents:r}}const rm=["LEFT_CLICK","LEFT_DOUBLE_CLICK","LEFT_DOWN","LEFT_UP","MIDDLE_CLICK","MIDDLE_DOWN","MIDDLE_UP","MOUSE_MOVE","PINCH_END","PINCH_MOVE","PINCH_START","RIGHT_CLICK","RIGHT_DOWN","RIGHT_UP","WHEEL"],bw=["mousedown","mouseup","click","clickout","dblclick","mousemove","mouseover","mouseout"];function om(){let e;return u.onBeforeUnmount(()=>{clearTimeout(e)}),{registerTimeout(t,n){clearTimeout(e),e=setTimeout(t,n)},removeTimeout(){clearTimeout(e)}}}const ED=["Graphics","VcEntity","Datasource","VcOverlayDynamic"];function rt(e,{emit:t,attrs:n},i){const r=ds(i),{registerTimeout:a,removeTimeout:s}=om();i.alreadyListening=[],i.removeCallbacks=[];let l=[];i.mounted=!1;const d=AC();i.vcMitt=d;const h=u.inject(Or),{t:m}=Qt();if(h===void 0){console.error(`${i.cesiumClass} ${m("vc.loadError")}`);return}const p=cn(i),g=hc(e,i);i.children=[];const v={billboard:!0,box:!0,corridor:!0,cylinder:!0,ellipse:!0,ellipsoid:!0,label:!0,model:!0,tileset:!0,path:!0,plane:!0,point:!0,polygon:!0,polyline:!0,polylineVolume:!0,rectangle:!0,wall:!0},b=Vl(),P=async()=>{if(t("beforeLoad",i),p.nowaiting)return!0;await p.proxy.creatingPromise},w=async()=>{var C;if(i.mounted)return!1;r.debug(`${i.cesiumClass}---loading`),await P();const{Cesium:x,viewer:B}=h;return i.viewer=B,i.Cesium=x,!p.cesiumObject&&!p.nowaiting?await((C=p.proxy)==null?void 0:C.load()):(L(!0),z().then(async O=>(i.cesiumObject=O,A().then(()=>{i.mounted=!0,p.children.push(i),Object.assign(i.proxy,{cesiumObject:i.cesiumObject});const I={Cesium:x,viewer:B,cesiumObject:O,vm:i};return t("ready",I),d.emit("ready",I),r.debug(`${i.cesiumClass}---loaded`),I}))))},S=async()=>{await i.unloadingPromise},T=async()=>{await S();for(let C=0;C<i.children.length;C++)await i.children[C].proxy.unload();return i.children.length=0,i.isUnmounted=!1,i.mounted?D().then(async()=>(L(!1),i.cesiumObject=void 0,i.mounted=!1,i.removeCallbacks.forEach(C=>{C()}),t("destroyed",i),d.emit("destroyed",i),r.debug(`${i.cesiumClass}---unmounted`),i.renderByParent&&!i.unloadingPromise?p.proxy.unload():!0)):!1},_=async()=>{await i.reloadingPromise},M=async()=>(await _(),T().then(()=>w())),A=async()=>{var C;return g.registerEvents(!0),((C=i.mount)==null?void 0:C.call(i))||!0},D=async()=>{var C;return g.registerEvents(!1),((C=i.unmount)==null?void 0:C.call(i))||!0},z=async()=>{if(r.debug("do createCesiumObject"),nn(i.createCesiumObject))return i.createCesiumObject();{const C=U(e);return new Cesium[i.cesiumClass](C)}},$=(C,x)=>{let B=x==null?void 0:x.deep;const{SampledPositionProperty:O,Appearance:I,DebugAppearance:V,MaterialAppearance:j,PolylineColorAppearance:N,EllipsoidSurfaceAppearance:H,PerInstanceColorAppearance:ne,PolylineMaterialAppearance:ie}=Cesium;if(C==="position")B=!(i.proxy[C]instanceof O);else if(C==="appearance"||C==="depthFailAppearance"){const ee=i.proxy[C];B=!(ee instanceof I||ee instanceof V||ee instanceof j||ee instanceof N||ee instanceof H||ee instanceof ne||ee instanceof ie||Qd(ee).indexOf("Appearance")!==-1)}return B},L=C=>{if(C){if(!i.cesiumClass||!Cesium[i.cesiumClass])return;e&&Object.keys(e).forEach(x=>{var B,O,I,V,j;let N=x;if(x==="labelStyle"||x==="wmtsStyle"?N="style":x==="bmKey"&&(N="key"),(O=(B=i.proxy)==null?void 0:B.$options.watch)!=null&&O[x]||i.alreadyListening.indexOf(x)!==-1)return;const H=(V=(I=i.proxy)==null?void 0:I.$options.props[x])==null?void 0:V.watcherOptions,ne=(j=i.proxy)==null?void 0:j.$watch(x,async(ie,ee)=>{await i.proxy.creatingPromise;const{cesiumObject:Q}=i,G=Q&&Object.getOwnPropertyDescriptor(Q,N),J=Q&&Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Q),N);if(G&&(G.writable||G.set)||J&&(J.writable||J.set)){if(H&&H.cesiumObjectBuilder){const oe=H.cesiumObjectBuilder.call(i,ie,i.viewer.scene.globe.ellipsoid);Cesium.defined(Q[N])&&Cesium.defined(Q[N]._callback)||(Q[N]=oe)}else Q[N]=Z(N,ie);return!0}else(!Dl(ie,ee)||Array.isArray(ie))&&(n["reload-mode"]==="once"||n.reloadMode==="once"||b.value.reloadMode==="once"?(s(),a(()=>{i.proxy.reload()},0)):i.reloadingPromise=new Promise((oe,Y)=>{i.proxy.reload().then(()=>{oe(!0)}).catch(X=>{Y(X)})}))},{deep:$(x,H)});l.push(ne)})}else l.forEach(x=>x()),l=[]},U=(C,x)=>{const B={};return C&&Object.keys(C).forEach(O=>{let I=O;O==="labelStyle"||O==="wmtsStyle"?I="style":O==="bmKey"&&(I="key"),!(C[O]===void 0||C[O]===null)&&(Qd(C[O])&&v[I]&&(i.cesiumClass==="Entity"||i.cesiumClass.indexOf("DataSource")>0||i.cesiumClass==="VcOverlayDynamic")?B[I]=U(C[O],x):B[I]=Z(O,C[O],x))}),B},Z=(C,x,B)=>{var O,I;if(Qd(x)&&v[C]&&(i.cesiumClass==="Entity"||i.cesiumClass.indexOf("DataSource")>0||i.cesiumClass==="VcOverlayDynamic"))return U(x,B);{const V=(O=i.proxy)==null?void 0:O.$options.name;let j=!1;nn(x)&&V&&ED.forEach(H=>{V.indexOf(H)!==-1&&(j=!0)});const N=((I=i.proxy)==null?void 0:I.$options.props[C])||(B==null?void 0:B[C])||vw[C]&&vw[C][C];return N!=null&&N.watcherOptions&&!us(x)?N.watcherOptions.cesiumObjectBuilder.call(i,x,i.viewer.scene.globe.ellipsoid):j?new Cesium.CallbackProperty(x,!1):x}},W=()=>Eo({},h||{}),y=new Promise((C,x)=>{try{let B=!1;h.viewer&&(B=!0,w().then(O=>{C(O),B=!1}).catch(O=>{t("unready",O),x(O)})),p.vcMitt.on("ready",()=>{!B&&!i.isUnmounted&&w().then(O=>{C(O)}).catch(O=>{t("unready",O),x(O)})})}catch(B){t("unready",B),x(B)}});return r.debug(`${i.cesiumClass}---onCreated`),u.onUnmounted(()=>{r.debug(`${i.cesiumClass}---onUnmounted`),i.unloadingPromise=new Promise((C,x)=>{T().then(()=>{r.debug(`${i.cesiumClass}---unloaded`),C(!0),i.isUnmounted=!0,i.unloadingPromise=void 0,d.all.clear()})}),i.alreadyListening=[]}),Object.assign(i.proxy,{creatingPromise:y,load:w,unload:T,reload:M,getCreatingPromise:()=>y,getCesiumObject:()=>i.cesiumObject}),{$services:h,load:w,unload:T,reload:M,creatingPromise:y,transformProp:Z,transformProps:U,unwatchFns:l,setPropsWatcher:L,logger:r,getServices:W}}function ha(e,t,n){n.cesiumEvents=["changedEvent","errorEvent","loadingEvent"],n.cesiumClass==="KmlDataSource"&&(n.cesiumEvents.push("refreshEvent"),n.cesiumEvents.push("unsupportedNodeEvent")),n.cesiumMembersEvents=[{name:"clock",events:["definitionChanged"]},{name:"clustering",events:["clusterEvent"]},{name:"entities",events:["collectionChanged"]}];const i=rt(e,t,n);if(i===void 0)return;n.alreadyListening.push("entities");let r=[];r.push(u.watch(()=>ut(e.entities),(l,d)=>{if(!n.mounted)return;const h=n.cesiumObject;if(l.length===d.length){const m=[];for(let p=0;p<l.length;p++){const g=l[p],v=d[p];JSON.stringify(g)!==JSON.stringify(v)&&m.push({newOptions:g,oldOptions:v})}m.forEach(p=>{const g=h.entities.getById(p.oldOptions.id);if(p.oldOptions.id===p.newOptions.id)g&&Object.keys(p.newOptions).forEach(v=>{p.oldOptions[v]!==p.newOptions[v]&&(g[v]=i.transformProp(v,p.newOptions[v]))});else{h.entities.remove(g);const v=p.newOptions;a(h,[v])}})}else{const m=Nt(l,d,"id"),p=Nt(d,l,"id"),g=[];for(let v=0;v<p.length;v++){const b=h.entities.getById(p[v].id);g.push(b)}g.forEach(v=>{h.entities.remove(v)}),a(h,m)}},{deep:!0}));const a=(l,d)=>{for(let h=0;h<d.length;h++){const m=d[h],p=i.transformProps(m),g=l.entities.add(p);m.id!==g.id&&(m.id=g.id),qi(g,p)}};n.mount=async()=>{const l=i.$services.dataSources,d=n.cesiumObject;return d.show=e.show,a(d,e.entities),l.add(d).then(()=>!0)},n.unmount=async()=>{const l=i.$services.dataSources,d=n.cesiumObject;return l&&l.remove(d,e.destroy)};const s=()=>Eo(i.getServices(),{get datasource(){return n.cesiumObject},get entities(){var l;return(l=n.cesiumObject)==null?void 0:l.entities}});return u.onUnmounted(()=>{r.forEach(l=>l()),r=[]}),u.provide(Or,s()),{transformProps:i.transformProps,unwatchFns:i.unwatchFns,setPropsWatcher:i.setPropsWatcher}}function pt(e,t,n){n.cesiumEvents=[],n.renderByParent=!0;const i=rt(e,t,n);if(i!==void 0)return n.mount=async()=>{var r;const a=n.cesiumObject,s=cn(n).proxy;return(r=s.__updateGeometry)==null?void 0:r.call(s,a)},{transformProps:i.transformProps,unwatchFns:i.unwatchFns,setPropsWatcher:i.setPropsWatcher}}function dn(e,t,n){n.cesiumEvents=["definitionChanged"],rt(e,t,n)!==void 0&&(n.mount=async()=>{var i,r;const a=n.cesiumObject;if(a===void 0)return!1;const s=pe(((i=n.proxy)==null?void 0:i.$options.name)||"").split("-"),l=s.length===3?`update:${s[2]}`:"update:polylineVolume",d=cn(n).proxy;return d&&((r=d.__updateGraphics)==null?void 0:r.call(d,a,l))},n.unmount=async()=>{var i,r;const a=pe(((i=n.proxy)==null?void 0:i.$options.name)||"").split("-"),s=a.length===3?`update:${a[2]}`:"update:polylineVolume",l=cn(n).proxy;return l&&((r=l.__updateGraphics)==null?void 0:r.call(l,void 0,s))})}const mc=e=>u.markRaw(e);function am(e,t){const n=e.style;Object.keys(t).forEach(i=>{n[i]=t[i]})}function Cw(e){if(e==null)return;if(typeof e=="string")try{return document.querySelector(e)||void 0}catch(n){return}const t=u.isRef(e)===!0?e.value:e;if(t)return t.$el||t}const Jr={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0,passive:void 0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(Jr,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch(e){}function sm(){}function lm(e){return e.button===0}function hr(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function Ss(e){e.stopPropagation()}function Vo(e){e.cancelable!==!1&&e.preventDefault()}function mr(e){e.cancelable!==!1&&e.preventDefault(),e.stopPropagation()}function cm(e,t){if(e===void 0||t===!0&&e.__dragPrevented===!0)return;const n=t===!0?i=>{i.__dragPrevented=!0,i.addEventListener("dragstart",Vo,Jr.notPassiveCapture)}:i=>{delete i.__dragPrevented,i.removeEventListener("dragstart",Vo,Jr.notPassiveCapture)};e.querySelectorAll("a, img").forEach(n)}function hn(e,t,n){const i=`__vc_${t}_evt`;e[i]=e[i]!==void 0?e[i].concat(n):n,n.forEach(r=>{r[0].addEventListener(r[1],e[r[2]],Jr[r[3]])})}function hi(e,t){const n=`__vc_${t}_evt`;e[n]!==void 0&&(e[n].forEach(i=>{i[0].removeEventListener(i[1],e[i[2]],Jr[i[3]])}),e[n]=void 0)}function xD(e){return e!==Object(e)||e.isComposing===!0||e.qKeyEvent===!0}function Ts(e,t){return xD(e)===!0?!1:[].concat(t).includes(e.keyCode)}function um(e,t=250){let n=!1,i;return function(){return n===!1&&(n=!0,setTimeout(()=>{n=!1},t),i=e.apply(this,arguments)),i}}function ww(e,t,n,i){n.modifiers.stop===!0&&Ss(e);const r=n.modifiers.color;let a=n.modifiers.center;a=a===!0||i===!0;const s=document.createElement("span"),l=document.createElement("span"),d=hr(e),{left:h,top:m,width:p,height:g}=t.getBoundingClientRect(),v=Math.sqrt(p*p+g*g),b=v/2,P=`${(p-v)/2}px`,w=a?P:`${d.left-h-b}px`,S=`${(g-v)/2}px`,T=a?S:`${d.top-m-b}px`;l.className="vc-ripple__inner",am(l,{height:`${v}px`,width:`${v}px`,transform:`translate3d(${w},${T},0) scale3d(.2,.2,1)`,opacity:0}),s.className=`vc-ripple${r?" text-"+r:""}`,s.setAttribute("dir","ltr"),s.appendChild(l),t.appendChild(s);const _=()=>{s.remove(),clearTimeout(M)};n.abort.push(_);let M=setTimeout(()=>{l.classList.add("vc-ripple__inner--enter"),l.style.transform=`translate3d(${P},${S},0) scale3d(1,1,1)`,l.style.opacity="0.2",M=setTimeout(()=>{l.classList.remove("vc-ripple__inner--enter"),l.classList.add("vc-ripple__inner--leave"),l.style.opacity="0",M=setTimeout(()=>{s.remove(),n.abort.splice(n.abort.indexOf(_),1)},275)},250)},50)}function _w(e,{modifiers:t,value:n,arg:i,instance:r}){const a=Object.assign({},t,n);e.modifiers={early:a.early===!0,stop:a.stop===!0,center:a.center===!0,color:a.color||i,keyCodes:[].concat(a.keyCodes||13)}}var dm=mc({name:"ripple",beforeMount(e,t){const n={enabled:t.value!==!1,modifiers:{},abort:[],start(i){n.enabled===!0&&i.qSkipRipple!==!0&&(n.modifiers.early===!0?["mousedown","touchstart"].includes(i.type)===!0:i.type==="click")&&ww(i,e,n,i.qKeyEvent===!0)},keystart:um(i=>{n.enabled===!0&&i.qSkipRipple!==!0&&Ts(i,n.modifiers.keyCodes)===!0&&i.type===`key${n.modifiers.early===!0?"down":"up"}`&&ww(i,e,n,!0)},300)};_w(n,t),e.__vcripple=n,hn(n,"main",[[e,"mousedown","start","passive"],[e,"touchstart","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const n=e.__vcripple;n.enabled=t.value!==!1,n.enabled===!0&&Object(t.value)===t.value&&_w(n,t)}},beforeUnmount(e){const t=e.__vcripple;t.abort.forEach(n=>{n()}),hi(t,"main"),delete e._vcripple}});function zt(){const e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),n=/(?:SymbianOS)/.test(e)||t,i=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),a=/(?:Chrome|CriOS)/.test(e),s=/(?:iPad|PlayBook)/.test(e)||i&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),l=/(?:iPhone)/.test(e)&&!s,d=!l&&!i&&!n,h=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return{isTablet:s,isPhone:l,isAndroid:i,isPc:d,isFireFox:r,isChrome:a,isIOS:h,hasTouch:"ontouchstart"in window||window.navigator.maxTouchPoints>0}}function pr(){if(window.getSelection!==void 0){const e=window.getSelection();(e==null?void 0:e.empty)!==void 0?e.empty():(e==null?void 0:e.removeAllRanges)!==void 0&&(e.removeAllRanges(),zt().isPhone!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}var Is=mc({name:"touch-hold",beforeMount(e,t){const{modifiers:n}=t;if(n.mouse!==!0&&zt().hasTouch!==!0)return;const i={handler:t.value,noop:sm,mouseStart(a){typeof i.handler=="function"&&lm(a)===!0&&(hn(i,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),i.start(a,!0))},touchStart(a){var s;if(a.target!==void 0&&typeof i.handler=="function"){const l=a.target;hn(i,"temp",[[l,"touchmove","move","passiveCapture"],[l,"touchcancel","end","notPassiveCapture"],[l,"touchend","end","notPassiveCapture"]]),i.start(a),(s=t==null?void 0:t.touchStart)==null||s.call(t,a)}},start(a,s){i.origin=hr(a);const l=Date.now();zt().isPhone===!0&&(document.body.classList.add("non-selectable"),pr(),i.styleCleanup=d=>{i.styleCleanup=void 0;const h=()=>{document.body.classList.remove("non-selectable")};d===!0?(pr(),setTimeout(h,10)):h()}),i.triggered=!1,i.sensitivity=s===!0?i.mouseSensitivity:i.touchSensitivity,i.timer=setTimeout(()=>{pr(),i.triggered=!0,i.handler({evt:a,touch:s!==!0,mouse:s===!0,position:i.origin,duration:Date.now()-l})},i.duration)},move(a){const{top:s,left:l}=hr(a);(Math.abs(l-i.origin.left)>=i.sensitivity||Math.abs(s-i.origin.top)>=i.sensitivity)&&clearTimeout(i.timer)},end(a){var s;hi(i,"temp"),i.styleCleanup!==void 0&&i.styleCleanup(i.triggered),i.triggered===!0?a!==void 0&&mr(a):clearTimeout(i.timer),(s=t==null?void 0:t.touchEnd)==null||s.call(t,a)}},r=[600,5,7];typeof t.arg=="string"&&t.arg.length>0&&t.arg.split(":").forEach((a,s)=>{const l=parseInt(a,10);l&&(r[s]=l)}),[i.duration,i.touchSensitivity,i.mouseSensitivity]=r,e.__vctouchhold=i,n.mouse===!0&&hn(i,"main",[[e,"mousedown","mouseStart",`passive${n.mouseCapture===!0?"Capture":""}`]]),zt().hasTouch===!0&&hn(i,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchend","noop","notPassiveCapture"]])},updated(e,t){const n=e.__vctouchhold;n!==void 0&&t.oldValue!==t.value&&(typeof t.value!="function"&&n.end(),n.handler=t.value)},beforeUnmount(e){const t=e.__vctouchhold;t!==void 0&&(hi(t,"main"),hi(t,"temp"),clearTimeout(t.timer),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__vctouchhold)}});const Pw={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},OD=new RegExp(`^([\\d+]+|${Object.keys(Pw).join("|")})$`,"i");function MD(e,t){const{top:n,left:i}=hr(e);return Math.abs(i-t.left)>=7||Math.abs(n-t.top)>=7}var Ew=mc({name:"touch-repeat",beforeMount(e,{modifiers:t,value:n,arg:i,touchStart:r}){const a=Object.keys(t).reduce((h,m)=>{if(OD.test(m)===!0){const p=isNaN(parseInt(m,10))?Pw[m.toLowerCase()]:parseInt(m,10);p>=0&&h.push(p)}return h},[]);if(t.mouse!==!0&&zt().hasTouch!==!0&&a.length===0)return;const s=typeof i=="string"&&i.length>0?i.split(":").map(h=>parseInt(h,10)):[0,600,300],l=s.length-1,d={keyboard:a,handler:n,noop:sm,mouseStart(h){d.event===void 0&&typeof d.handler=="function"&&lm(h)===!0&&(hn(d,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),d.start(h,!0))},keyboardStart(h){if(typeof d.handler=="function"&&Ts(h,a)===!0){if((s[0]===0||d.event!==void 0)&&(mr(h),e.focus(),d.event!==void 0))return;hn(d,"temp",[[document,"keyup","end","notPassiveCapture"],[document,"click","end","notPassiveCapture"]]),d.start(h,!1,!0)}},touchStart(h){if(h.target!==void 0&&typeof d.handler=="function"){const m=h.target;hn(d,"temp",[[m,"touchmove","move","passiveCapture"],[m,"touchcancel","end","notPassiveCapture"],[m,"touchend","end","notPassiveCapture"]]),d.start(h),r==null||r(h)}},start(h,m,p){p!==!0&&(d.origin=hr(h));function g(b){d.styleCleanup=void 0,document.documentElement.style.cursor="";const P=()=>{document.body.classList.remove("non-selectable")};b===!0?(pr(),setTimeout(P,10)):P()}zt().isPhone===!0&&(document.body.classList.add("non-selectable"),pr(),d.styleCleanup=g),d.event={touch:m!==!0&&p!==!0,mouse:m===!0,keyboard:p===!0,startTime:Date.now(),repeatCount:0};const v=()=>{if(d.event===void 0)return;d.event.repeatCount===0&&(d.event.evt=h,p===!0?d.event.keyCode=h.keyCode:d.event.position=hr(h),zt().isPhone!==!0&&(document.documentElement.style.cursor="pointer",document.body.classList.add("non-selectable"),pr(),d.styleCleanup=g)),d.event.duration=Date.now()-d.event.startTime,d.event.repeatCount+=1,d.handler(d.event);const b=l<d.event.repeatCount?l:d.event.repeatCount;d.timer=setTimeout(v,s[b])};s[0]===0?v():d.timer=setTimeout(v,s[0])},move(h){d.event!==void 0&&MD(h,d.origin)===!0&&clearTimeout(d.timer)},end(h){d.event!==void 0&&(d.styleCleanup!==void 0&&d.styleCleanup(!0),h!==void 0&&d.event.repeatCount>0&&mr(h),hi(d,"temp"),clearTimeout(d.timer),d.event=void 0)}};e.__vctouchrepeat=d,t.mouse===!0&&hn(d,"main",[[e,"mousedown","mouseStart",`passive${t.mouseCapture===!0?"Capture":""}`]]),zt().hasTouch===!0&&hn(d,"main",[[e,"touchstart","touchStart",`passive${t.capture===!0?"Capture":""}`],[e,"touchend","noop","notPassiveCapture"]]),a.length>0&&hn(d,"main",[[e,"keydown","keyboardStart",`notPassive${t.keyCapture===!0?"Capture":""}`]])},updated(e,{oldValue:t,value:n}){const i=e.__vctouchrepeat;i!==void 0&&t!==n&&(typeof n!="function"&&i.end(),i.handler=n)},beforeUnmount(e){const t=e.__vctouchrepeat;t!==void 0&&(clearTimeout(t.timer),hi(t,"main"),hi(t,"temp"),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__vctouchrepeat)}});const SD=["left","right","up","down","horizontal","vertical"],TD={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0,all:!0};function xw(e){const t={};return SD.forEach(n=>{e[n]&&(t[n]=!0)}),Object.keys(t).length===0?TD:(t.horizontal===!0&&(t.left=t.right=!0),t.vertical===!0&&(t.up=t.down=!0),t.left===!0&&t.right===!0&&(t.horizontal=!0),t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const hm=zt().isIOS||navigator.vendor.toLowerCase().indexOf("apple")>-1?()=>document:e=>e;function Ow(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function mm(e,t,n){const i=hr(e);let r,a=i.left-t.event.x,s=i.top-t.event.y,l=Math.abs(a),d=Math.abs(s);const h=t.direction;h.horizontal===!0&&h.vertical!==!0?r=a<0?"left":"right":h.horizontal!==!0&&h.vertical===!0?r=s<0?"up":"down":h.up===!0&&s<0?(r="up",l>d&&(h.left===!0&&a<0?r="left":h.right===!0&&a>0&&(r="right"))):h.down===!0&&s>0?(r="down",l>d&&(h.left===!0&&a<0?r="left":h.right===!0&&a>0&&(r="right"))):h.left===!0&&a<0?(r="left",l<d&&(h.up===!0&&s<0?r="up":h.down===!0&&s>0&&(r="down"))):h.right===!0&&a>0&&(r="right",l<d&&(h.up===!0&&s<0?r="up":h.down===!0&&s>0&&(r="down")));let m=!1;if(r===void 0&&n===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};r=t.event.lastDir,m=!0,r==="left"||r==="right"?(i.left-=a,l=0,a=0):(i.top-=s,d=0,s=0)}return{synthetic:m,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:i,direction:r,isFirst:t.event.isFirst,isFinal:n===!0,duration:Date.now()-t.event.time,distance:{x:l,y:d},offset:{x:a,y:s},delta:{x:i.left-t.event.lastX,y:i.top-t.event.lastY}}}}let ID=0;var pm=mc({name:"touch-pan",beforeMount(e,{value:t,modifiers:n}){if(n.mouse!==!0&&zt().hasTouch!==!0)return;function i(a,s){n.mouse===!0&&s===!0?mr(a):(n.stop===!0&&Ss(a),n.prevent===!0&&Vo(a))}const r={uid:"qvtp_"+ID++,handler:t,modifiers:n,direction:xw(n),noop:sm,mouseStart(a){Ow(a,r)&&lm(a)&&(hn(r,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),r.start(a,!0))},touchStart(a){if(Ow(a,r)){const s=a.target;hn(r,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","passiveCapture"],[s,"touchend","end","passiveCapture"]]),r.start(a)}},start(a,s){if(zt().isFireFox===!0&&cm(e,!0),r.lastEvt=a,s===!0||n.stop===!0){if(r.direction.all!==!0&&(s!==!0||r.modifiers.mouseAllDir!==!0&&r.modifiers.mousealldir!==!0)){const h=a.type.indexOf("mouse")>-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&Vo(h),a.cancelBubble===!0&&Ss(h),Object.assign(h,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[r.uid]:a.qClonedBy.concat(r.uid)}),r.initialEvent={target:a.target,event:h}}Ss(a)}const{left:l,top:d}=hr(a);r.event={x:l,y:d,time:Date.now(),mouse:s===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:l,lastY:d}},move(a){if(r.event===void 0)return;const s=hr(a),l=s.left-r.event.x,d=s.top-r.event.y;if(l===0&&d===0)return;r.lastEvt=a;const h=r.event.mouse===!0,m=()=>{i(a,h);let v;n.preserveCursor!==!0&&n.preservecursor!==!0&&(v=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),h===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),pr(),r.styleCleanup=b=>{if(r.styleCleanup=void 0,v!==void 0&&(document.documentElement.style.cursor=v),document.body.classList.remove("non-selectable"),h===!0){const P=()=>{document.body.classList.remove("no-pointer-events--children")};b!==void 0?setTimeout(()=>{P(),b()},50):P()}else b!==void 0&&b()}};if(r.event.detected===!0){r.event.isFirst!==!0&&i(a,r.event.mouse);const{payload:v,synthetic:b}=mm(a,r,!1);v!==void 0&&(r.handler(v)===!1?r.end(a):(r.styleCleanup===void 0&&r.event.isFirst===!0&&m(),r.event.lastX=v.position.left,r.event.lastY=v.position.top,r.event.lastDir=b===!0?void 0:v.direction,r.event.isFirst=!1));return}if(r.direction.all===!0||h===!0&&(r.modifiers.mouseAllDir===!0||r.modifiers.mousealldir===!0)){m(),r.event.detected=!0,r.move(a);return}const p=Math.abs(l),g=Math.abs(d);p!==g&&(r.direction.horizontal===!0&&p>g||r.direction.vertical===!0&&p<g||r.direction.up===!0&&p<g&&d<0||r.direction.down===!0&&p<g&&d>0||r.direction.left===!0&&p>g&&l<0||r.direction.right===!0&&p>g&&l>0?(r.event.detected=!0,r.move(a)):r.end(a,!0))},end(a,s){if(r.event!==void 0){if(hi(r,"temp"),zt().isFireFox===!0&&cm(e,!1),s===!0)r.styleCleanup!==void 0&&r.styleCleanup(),r.event.detected!==!0&&r.initialEvent!==void 0&&r.initialEvent.target.dispatchEvent(r.initialEvent.event);else if(r.event.detected===!0){r.event.isFirst===!0&&r.handler(mm(a===void 0?r.lastEvt:a,r).payload);const{payload:l}=mm(a===void 0?r.lastEvt:a,r,!0),d=()=>{r.handler(l)};r.styleCleanup!==void 0?r.styleCleanup(d):d()}r.event=void 0,r.initialEvent=void 0,r.lastEvt=void 0}}};if(e.__qtouchpan=r,n.mouse===!0){const a=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";hn(r,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}zt().hasTouch===!0&&hn(r,"main",[[e,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const n=e.__qtouchpan;n!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&n.end(),n.handler=t.value),n.direction=xw(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),hi(t,"main"),hi(t,"temp"),zt().isFireFox===!0&&cm(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchpan)}});function As(){let e,t;const n=new Promise(function(i,r){e=i,t=r});return{resolve:e,reject:t,promise:n}}function fm(e,{handleMouseClick:t=void 0,handleMouseDown:n=void 0,handleMouseUp:i=void 0,handleMouseMove:r=void 0,handleDoubleClick:a=void 0,handleMouseWheel:s=void 0,handlePinch:l=void 0}){const d=u.ref(void 0),h=u.ref(!1),m=()=>{if(h.value)return;const{ScreenSpaceEventType:K,KeyboardEventModifier:ve,ScreenSpaceEventHandler:Te}=Cesium;if(!d.value){const{viewer:It}=e;d.value=new Te(It.canvas),Is.beforeMount(It.canvas,{arg:"2000",value:Se,touchStart:je,touchEnd:xe,modifiers:{}})}const Ae=d.value;Ae.setInputAction(v,K.LEFT_CLICK),Ae.setInputAction(b,K.LEFT_CLICK,ve.SHIFT),Ae.setInputAction(P,K.LEFT_CLICK,ve.CTRL),Ae.setInputAction(z,K.LEFT_DOWN),Ae.setInputAction($,K.LEFT_DOWN,ve.SHIFT),Ae.setInputAction(L,K.LEFT_DOWN,ve.CTRL),Ae.setInputAction(B,K.LEFT_UP),Ae.setInputAction(O,K.LEFT_UP,ve.SHIFT),Ae.setInputAction(I,K.LEFT_UP,ve.CTRL),Ae.setInputAction(M,K.RIGHT_CLICK),Ae.setInputAction(A,K.RIGHT_CLICK,ve.SHIFT),Ae.setInputAction(D,K.RIGHT_CLICK,ve.CTRL),Ae.setInputAction(y,K.RIGHT_DOWN),Ae.setInputAction(C,K.RIGHT_DOWN,ve.SHIFT),Ae.setInputAction(x,K.RIGHT_DOWN,ve.CTRL),Ae.setInputAction(H,K.RIGHT_UP),Ae.setInputAction(ne,K.RIGHT_UP,ve.SHIFT),Ae.setInputAction(ie,K.RIGHT_UP,ve.CTRL),Ae.setInputAction(w,K.MIDDLE_CLICK),Ae.setInputAction(S,K.MIDDLE_CLICK,ve.SHIFT),Ae.setInputAction(T,K.MIDDLE_CLICK,ve.CTRL),Ae.setInputAction(U,K.MIDDLE_DOWN),Ae.setInputAction(Z,K.MIDDLE_DOWN,ve.SHIFT),Ae.setInputAction(W,K.MIDDLE_DOWN,ve.CTRL),Ae.setInputAction(V,K.MIDDLE_UP),Ae.setInputAction(j,K.MIDDLE_UP,ve.SHIFT),Ae.setInputAction(N,K.MIDDLE_UP,ve.CTRL),Ae.setInputAction(ee,K.LEFT_DOUBLE_CLICK),Ae.setInputAction(Q,K.LEFT_DOUBLE_CLICK,ve.SHIFT),Ae.setInputAction(G,K.LEFT_DOUBLE_CLICK,ve.CTRL),Ae.setInputAction(J,K.MOUSE_MOVE),Ae.setInputAction(oe,K.MOUSE_MOVE,ve.SHIFT),Ae.setInputAction(Y,K.MOUSE_MOVE,ve.CTRL),Ae.setInputAction(X,K.WHEEL),Ae.setInputAction(se,K.WHEEL,ve.SHIFT),Ae.setInputAction(re,K.WHEEL,ve.CTRL),Ae.setInputAction(de,K.PINCH_START),Ae.setInputAction(ce,K.PINCH_START,ve.SHIFT),Ae.setInputAction(he,K.PINCH_START,ve.CTRL),Ae.setInputAction(ge,K.PINCH_END),Ae.setInputAction(Pe,K.PINCH_END,ve.SHIFT),Ae.setInputAction(Ie,K.PINCH_END,ve.CTRL),Ae.setInputAction(_e,K.PINCH_MOVE),Ae.setInputAction(Ee,K.PINCH_MOVE,ve.SHIFT),Ae.setInputAction(De,K.PINCH_MOVE,ve.CTRL),h.value=!0},p=()=>{if(!h.value)return;const{ScreenSpaceEventType:K,KeyboardEventModifier:ve}=Cesium,Te=d.value;if(!Te)return;Te.removeInputAction(K.LEFT_CLICK),Te.removeInputAction(K.LEFT_CLICK,ve.SHIFT),Te.removeInputAction(K.LEFT_CLICK,ve.CTRL),Te.removeInputAction(K.LEFT_DOWN),Te.removeInputAction(K.LEFT_DOWN,ve.SHIFT),Te.removeInputAction(K.LEFT_DOWN,ve.CTRL),Te.removeInputAction(K.LEFT_UP),Te.removeInputAction(K.LEFT_UP,ve.SHIFT),Te.removeInputAction(K.LEFT_UP,ve.CTRL),Te.removeInputAction(K.RIGHT_CLICK),Te.removeInputAction(K.RIGHT_CLICK,ve.SHIFT),Te.removeInputAction(K.RIGHT_CLICK,ve.CTRL),Te.removeInputAction(K.RIGHT_DOWN),Te.removeInputAction(K.RIGHT_DOWN,ve.SHIFT),Te.removeInputAction(K.RIGHT_DOWN,ve.CTRL),Te.removeInputAction(K.RIGHT_UP),Te.removeInputAction(K.RIGHT_UP,ve.SHIFT),Te.removeInputAction(K.RIGHT_UP,ve.CTRL),Te.removeInputAction(K.MIDDLE_CLICK),Te.removeInputAction(K.MIDDLE_CLICK,ve.SHIFT),Te.removeInputAction(K.MIDDLE_CLICK,ve.CTRL),Te.removeInputAction(K.MIDDLE_DOWN),Te.removeInputAction(K.MIDDLE_DOWN,ve.SHIFT),Te.removeInputAction(K.MIDDLE_DOWN,ve.CTRL),Te.removeInputAction(K.MIDDLE_UP),Te.removeInputAction(K.MIDDLE_UP,ve.SHIFT),Te.removeInputAction(K.MIDDLE_UP,ve.CTRL),Te.removeInputAction(K.LEFT_DOUBLE_CLICK),Te.removeInputAction(K.LEFT_DOUBLE_CLICK,ve.SHIFT),Te.removeInputAction(K.LEFT_DOUBLE_CLICK,ve.CTRL),Te.removeInputAction(K.MOUSE_MOVE),Te.removeInputAction(K.MOUSE_MOVE,ve.SHIFT),Te.removeInputAction(K.MOUSE_MOVE,ve.CTRL),Te.removeInputAction(K.WHEEL),Te.removeInputAction(K.WHEEL,ve.SHIFT),Te.removeInputAction(K.WHEEL,ve.CTRL),Te.removeInputAction(K.PINCH_START),Te.removeInputAction(K.PINCH_START,ve.SHIFT),Te.removeInputAction(K.PINCH_START,ve.CTRL),Te.removeInputAction(K.PINCH_END),Te.removeInputAction(K.PINCH_END,ve.SHIFT),Te.removeInputAction(K.PINCH_END,ve.CTRL),Te.removeInputAction(K.PINCH_MOVE),Te.removeInputAction(K.PINCH_MOVE,ve.SHIFT),Te.removeInputAction(K.PINCH_MOVE,ve.CTRL);const{viewer:Ae}=e;Is.beforeUnmount(Ae.canvas),h.value=!1},g=()=>{var K;(K=d.value)==null||K.destroy(),d.value=void 0},v=K=>{t==null||t(K,{button:0})},b=K=>{t==null||t(K,{button:0,shift:!0})},P=K=>{t==null||t(K,{button:0,ctrl:!0})},w=K=>{t==null||t(K,{button:1})},S=K=>{t==null||t(K,{button:1,shift:!0})},T=K=>{t==null||t(K,{button:1,ctrl:!0})};let _;const M=K=>{var ve;_?(ve=_==null?void 0:_.promise)==null||ve.then(Te=>{Te&&(t==null||t(K,{button:2}))}):t==null||t(K,{button:2})},A=K=>{t==null||t(K,{button:2,shift:!0})},D=K=>{t==null||t(K,{button:2,ctrl:!0})},z=K=>{n==null||n(K,{button:0})},$=K=>{n==null||n(K,{button:0,shift:!0})},L=K=>{n==null||n(K,{button:0,ctrl:!0})},U=K=>{n==null||n(K,{button:1})},Z=K=>{n==null||n(K,{button:1,shift:!0})},W=K=>{n==null||n(K,{button:1,ctrl:!0})},y=K=>{n==null||n(K,{button:2})},C=K=>{n==null||n(K,{button:2,shift:!0})},x=K=>{n==null||n(K,{button:2,ctrl:!0})},B=K=>{i==null||i(K,{button:0})},O=K=>{i==null||i(K,{button:0,shift:!0})},I=K=>{i==null||i(K,{button:0,ctrl:!0})},V=K=>{i==null||i(K,{button:1,ctrl:!0})},j=K=>{i==null||i(K,{button:1,shift:!0})},N=K=>{i==null||i(K,{button:1,ctrl:!0})},H=K=>{i==null||i(K,{button:2})},ne=K=>{i==null||i(K,{button:2,shift:!0})},ie=K=>{i==null||i(K,{button:2,ctrl:!0})},ee=K=>{a==null||a(K,{button:0})},Q=K=>{a==null||a(K,{button:0,shift:!0})},G=K=>{a==null||a(K,{button:0,ctrl:!0})},J=K=>{r==null||r(K)},oe=K=>{r==null||r(K,{shift:!0})},Y=K=>{r==null||r(K,{ctrl:!0})},X=K=>{s==null||s(K)},se=K=>{s==null||s(K,{shift:!0})},re=K=>{s==null||s(K,{ctrl:!0})},de=K=>{l==null||l(K,{start:!0})},ce=K=>{l==null||l(K,{start:!0,shift:!0})},he=K=>{l==null||l(K,{start:!0,ctrl:!0})},ge=K=>{l==null||l(K,{end:!0})},Pe=K=>{l==null||l(K,{end:!0,shift:!0})},Ie=K=>{l==null||l(K,{end:!0,ctrl:!0})},_e=K=>{l==null||l(K,{move:!0})},Ee=K=>{l==null||l(K,{move:!0,shift:!0})},De=K=>{l==null||l(K,{move:!0,ctrl:!0})},Se=K=>{if(K.touch){const ve={position:{x:K.position.left,y:K.position.top}};a==null||a(ve,{button:0})}_.resolve(!1)},xe=K=>{_.resolve(!0)},je=K=>{_=As()};return{activate:m,deactivate:p,destroy:g,isActive:h}}function Xr(e,t,n){const i=rt(e,t,n);if(i!==void 0)return n.createCesiumObject=async()=>{const r=i.transformProps(e),a=i.$services.primitives;return a&&a.add(r)},n.mount=async()=>{const r=i.$services.primitives,a=n.cesiumObject;return r&&r.contains(a)},n.unmount=async()=>{const r=i.$services.primitives,a=n.cesiumObject;return r&&!r.isDestroyed()&&r.remove(a)},{transformProps:i.transformProps,unwatchFns:i.unwatchFns,setPropsWatcher:i.setPropsWatcher,$services:i.$services}}function Yr(e,t,n){n.cesiumEvents=["primitiveAdded","primitiveRemoved"];const i=rt(e,t,n);return i===void 0?void 0:(n.mount=async()=>{const r=i.$services.primitives,a=n.cesiumObject,s=r&&r.add(a);return Cesium.defined(s)},n.unmount=async()=>{const r=i.$services.primitives,a=n.cesiumObject;return r&&r.remove(a)},u.provide(Or,(()=>Eo(i.getServices(),{get primitives(){return n.cesiumObject}}))()),{transformProps:i.transformProps,transformProp:i.transformProp,unwatchFns:i.unwatchFns,setPropsWatcher:i.setPropsWatcher})}function Yn(e,t,n){const i=rt(e,t,n);if(i===void 0)return;const{emit:r}=t,a=u.ref(0),s=u.ref([]);n.createCesiumObject=async()=>{var h,m;const p=i.transformProps(e);if(p.asynchronous||await((m=(h=Cesium[n.cesiumClass]).initializeTerrainHeights)==null?void 0:m.call(h)),e.geometryInstances&&(St(e.geometryInstances)?(s.value.push(...e.geometryInstances),a.value+=e.geometryInstances.length):(a.value+=1,s.value.push(e.geometryInstances))),(n.cesiumClass==="Cesium3DTileset"||n.cesiumClass==="I3SDataProvider")&&qt(Cesium.VERSION,"1.104"))try{return Cesium.defined(e.assetId)&&n.cesiumClass==="Cesium3DTileset"?await Cesium[n.cesiumClass].fromIonAssetId(e.assetId,p):await Cesium[n.cesiumClass].fromUrl(e.url,p)}catch(g){i.logger.error(`Failed to load tileset: ${g}`)}else return new Cesium[n.cesiumClass](p)},n.mount=async()=>{var h;const m=i.$services.primitives,p=n.cesiumObject;(h=p==null?void 0:p.readyPromise)==null||h.then(v=>{ze(n,"readyPromise")&&r("readyPromise",v,i.$services.viewer,n.proxy)}),p._vcParent=m;const g=m&&m.add(p);if(n.cesiumClass==="ParticleSystem"){const v=setInterval(()=>{Cesium.defined(g._billboardCollection)&&(g._billboardCollection._vcParent=g,clearInterval(v))},500)}return Cesium.defined(g)},n.unmount=async()=>{a.value=0,s.value=[];const h=i.$services.primitives,m=n.cesiumObject;return h&&h.remove(m)};const l=(h,m)=>{if(s.value.push(h),m===a.value-1)if(ze(n,"update:geometryInstances"))t.emit("update:geometryInstances",s.value);else{const p=n.cesiumObject;p.geometryInstances=m===0?h:s.value}return!0},d=h=>{const m=s.value.indexOf(h);return s.value.splice(m,1),!0};return u.provide(Or,(()=>Eo(i.getServices(),{get primitive(){return n.cesiumObject}}))()),Object.assign(n.proxy,{__updateGeometryInstances:l,__removeGeometryInstances:d,__childCount:a}),{transformProps:i.transformProps,transformProp:i.transformProp,unwatchFns:i.unwatchFns,setPropsWatcher:i.setPropsWatcher,$services:i.$services}}const pc=Math.PI*3e3/180,yn=Math.PI,fc=6378245,gc=.006693421622965943,gm=function(n,i){var n=+n,i=+i;const r=n-.0065,a=i-.006,s=Math.sqrt(r*r+a*a)-2e-5*Math.sin(a*pc),l=Math.atan2(a,r)-3e-6*Math.cos(r*pc),d=s*Math.cos(l),h=s*Math.sin(l);return[d,h]},vm=function(i,n){var n=+n,i=+i;const r=Math.sqrt(i*i+n*n)+2e-5*Math.sin(n*pc),a=Math.atan2(n,i)+3e-6*Math.cos(i*pc),s=r*Math.cos(a)+.0065,l=r*Math.sin(a)+.006;return[s,l]},Mw=function(i,n){var n=+n,i=+i;if(Iw(i,n))return[i,n];{let r=Sw(i-105,n-35),a=Tw(i-105,n-35);const s=n/180*yn;let l=Math.sin(s);l=1-gc*l*l;const d=Math.sqrt(l);r=r*180/(fc*(1-gc)/(l*d)*yn),a=a*180/(fc/d*Math.cos(s)*yn);const h=n+r;return[i+a,h]}},ym=function(i,n){var n=+n,i=+i;if(Iw(i,n))return[i,n];{let r=Sw(i-105,n-35),a=Tw(i-105,n-35);const s=n/180*yn;let l=Math.sin(s);l=1-gc*l*l;const d=Math.sqrt(l);r=r*180/(fc*(1-gc)/(l*d)*yn),a=a*180/(fc/d*Math.cos(s)*yn);const h=n+r,m=i+a;return[i*2-m,n*2-h]}};var Sw=function(i,n){var n=+n,i=+i;let r=-100+2*i+3*n+.2*n*n+.1*i*n+.2*Math.sqrt(Math.abs(i));return r+=(20*Math.sin(6*i*yn)+20*Math.sin(2*i*yn))*2/3,r+=(20*Math.sin(n*yn)+40*Math.sin(n/3*yn))*2/3,r+=(160*Math.sin(n/12*yn)+320*Math.sin(n*yn/30))*2/3,r},Tw=function(i,n){var n=+n,i=+i;let r=300+i+2*n+.1*i*i+.1*i*n+.1*Math.sqrt(Math.abs(i));return r+=(20*Math.sin(6*i*yn)+20*Math.sin(2*i*yn))*2/3,r+=(20*Math.sin(i*yn)+40*Math.sin(i/3*yn))*2/3,r+=(150*Math.sin(i/12*yn)+300*Math.sin(i/30*yn))*2/3,r},Iw=function(i,n){var n=+n,i=+i;return!(i>73.66&&i<135.05&&n>3.86&&n<53.55)},Aw=Object.freeze({__proto__:null,bd09togcj02:gm,gcj02tobd09:vm,wgs84togcj02:Mw,gcj02towgs84:ym});function Rt(e,t,n){n.cesiumEvents=["errorEvent"];const i=rt(e,t,n);if(i===void 0)return;const{emit:r}=t;return n.createCesiumObject=async()=>{const a=i.transformProps(e);return qt(Cesium.VERSION,"1.104")&&typeof Cesium[n.cesiumClass].fromUrl=="function"?await Cesium[n.cesiumClass].fromUrl(a.url,a):new Cesium[n.cesiumClass](a)},n.mount=async()=>{var a,s,l,d,h;const{viewer:m}=i.$services;if(n.cesiumClass.indexOf("ImageryProvider")!==-1){n.renderByParent=!0;const p=n.cesiumObject;if((a=p==null?void 0:p.readyPromise)==null||a.then(()=>{ze(n,"readyPromise")&&r("readyPromise",p,m,n.proxy)}),e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&!(((s=n.proxy)==null?void 0:s.$options.name)==="VcImageryProviderBaidu"||((l=n.proxy)==null?void 0:l.$options.name)==="VcImageryProviderTianditu"&&p._epsgCode==="4490")){const{WebMercatorTilingScheme:v,Cartographic:b,Math:P}=Cesium,w=new v,S=w.projection,T=S.project,_=S.unproject;let M,A;e.projectionTransforms.to.toUpperCase()==="WGS84"?(M="wgs84togcj02",A="gcj02towgs84"):e.projectionTransforms.to.toUpperCase()==="GCJ02"&&(M="gcj02towgs84",A="wgs84togcj02"),M&&A&&(S.project=function(D,z){return z=z||new Cesium.Cartesian3,z=Aw[M](P.toDegrees(D.longitude),P.toDegrees(D.latitude)),T.call(this,new b(P.toRadians(z==null?void 0:z[0]),P.toRadians(z==null?void 0:z[1])))},S.unproject=function(D,z){z=z||new b;const $=_.call(this,D);return z=Aw[A](P.toDegrees($.longitude),P.toDegrees($.latitude)),new b(P.toRadians(z==null?void 0:z[0]),P.toRadians(z==null?void 0:z[1]))},p._tilingScheme=w)}const g=cn(n).proxy;return g&&((d=g.__updateProvider)==null?void 0:d.call(g,p))}else{const p=n.cesiumObject;return(h=p==null?void 0:p.readyPromise)==null||h.then(()=>{ze(n,"readyPromise")&&r("readyPromise",p,m,n.proxy)}),m.terrainProvider=p,!0}},n.unmount=async()=>{var a,s;const{viewer:l}=i.$services;if(n.cesiumClass.indexOf("ImageryProvider")!==-1){const d=cn(n).proxy;return d&&((a=d.__updateProvider)==null?void 0:a.call(d,void 0))}else{const d=new Cesium.EllipsoidTerrainProvider;return(s=d==null?void 0:d.readyPromise)==null||s.then(()=>{ze(n,"readyPromise")&&r("readyPromise",d,l,n.proxy)}),l.terrainProvider=d,!0}},{transformProps:i.transformProps,unwatchFns:i.unwatchFns,setPropsWatcher:i.setPropsWatcher}}function vc(e){var t,n,i;const r=u.getCurrentInstance(),a=(r==null?void 0:r.parent)===null?r.vnode.appContext&&r.vnode.appContext.provides:(t=r==null?void 0:r.parent)==null?void 0:t.provides;(!a||!(Or in a))&&!e&&(e="cesiumContainer");const s=ds();if(r)if(e){const l=(i=(n=r.appContext.config.globalProperties)==null?void 0:n.$VueCesium)==null?void 0:i[e];return l||s.warn(`Failed to get $vc, reason: vc-viewer with containerId: ${e} was not found.`),l}else return u.inject(Or);else s.warn("VueCesium useVueCesium() can only be used inside setup().")}var AD={cesiumPath:String,animation:{type:Boolean,default:!1},baseLayerPicker:{type:Boolean,default:!1},fullscreenButton:{type:Boolean,default:!1},vrButton:{type:Boolean,default:!1},geocoder:{type:[Boolean,Array],default:!1},homeButton:{type:Boolean,default:!1},infoBox:{type:Boolean,default:!0},sceneModePicker:{type:Boolean,default:!1},selectionIndicator:{type:Boolean,default:!0},timeline:{type:Boolean,default:!1},navigationHelpButton:{type:Boolean,default:!1},navigationInstructionsInitiallyVisible:{type:Boolean,default:!1},scene3DOnly:{type:Boolean,default:!1},shouldAnimate:{type:Boolean,default:!1},clockViewModel:Object,selectedImageryProviderViewModel:Object,imageryProviderViewModels:Array,selectedTerrainProviderViewModel:Object,terrainProviderViewModels:Array,imageryProvider:Object,baseLayer:{type:[Object,Boolean],default:()=>{}},terrainProvider:Object,skyBox:{type:[Object,Boolean],default:()=>{}},skyAtmosphere:{type:[Object,Boolean],default:()=>{}},fullscreenElement:{type:[String,Element]},useDefaultRenderLoop:{type:Boolean,default:!0},targetFrameRate:Number,showRenderLoopErrors:{type:Boolean,default:!0},useBrowserRecommendedResolution:{type:Boolean,default:!0},automaticallyTrackDataSourceClocks:{type:Boolean,default:!0},contextOptions:Object,sceneMode:{type:Number,default:3},mapProjection:Object,globe:{type:[Object,Boolean],default:()=>{}},orderIndependentTranslucency:{type:Boolean,default:!0},creditContainer:[String,Element],creditViewport:[String,Element],dataSources:Object,terrainExaggeration:{type:Number,default:1},verticalExaggeration:{type:Number,default:1},shadows:{type:Boolean,default:!1},terrainShadows:{type:Number,default:3},mapMode2D:{type:Number,default:1},projectionPicker:{type:Boolean,default:!1},requestRenderMode:{type:Boolean,default:!1},maximumRenderTimeChange:{type:Number,default:0},debugShowFramesPerSecond:{type:Boolean,default:!1},showCredit:{type:Boolean,default:!0},accessToken:String,camera:{type:Object,default:()=>({position:{lng:105,lat:29.999999999999993,height:19059568497290563e-9},heading:360,pitch:-90,roll:0})},navigation:{type:Boolean,default:!1},TZCode:{type:String},UTCOffset:{type:Number},removeCesiumScript:{type:Boolean,default:!0},autoSortImageryLayers:{type:Boolean,default:!0},enableMouseEvent:{type:Boolean,default:!0},skeleton:{type:[Boolean,Object],default:()=>({dark:!1,animation:"wave",square:!0,bordered:!0,color:void 0})},touchHoldArg:{type:String,default:"1000"},viewerCreator:Function,mars3dConfig:Object,dcConfig:Object,containerId:String};function DD(){return{"font-awesome":["https://unpkg.com/font-awesome@latest/css/font-awesome.min.css"],haoutil:["https://unpkg.com/haoutil@latest/dist/haoutil-src.js"],turf:["https://unpkg.com/@turf/turf@latest/turf.min.js"],"mars3d-space":["https://unpkg.com/mars3d-space@latest/dist/mars3d-space.js"],"mars3d-echarts":["https://unpkg.com/echarts@latest/dist/echarts.min.js","https://unpkg.com/echarts-gl@latest/dist/echarts-gl.min.js","https://unpkg.com/mars3d-echarts@latest/dist/mars3d-echarts.js"],"mars3d-mapv":["https://unpkg.com/mapv@latest/build/mapv.min.js","https://unpkg.com/mars3d-mapv@latest/dist/mars3d-mapv.js"],"mars3d-heatmap":["https://unpkg.com/heatmapjs@latest/heatmap.min.js","https://unpkg.com/mars3d-heatmap@latest/dist/mars3d-heatmap.js"],"mars3d-wind":["https://unpkg.com/netcdfjs@latest/lib/index.js","https://unpkg.com/mars3d-wind@latest/dist/mars3d-wind.js"],"mars3d-tdt":["https://unpkg.com/mars3d-tdt@latest/dist/mars3d-tdt.js"],"mars3d-widget":["https://unpkg.com/mars3d-widget@latest/dist/mars3d-widget.js"],mars3d:["https://unpkg.com/mars3d-cesium@latest/Build/Cesium/Widgets/widgets.css","https://unpkg.com/mars3d-cesium@latest/Build/Cesium/Cesium.js","https://unpkg.com/mars3d@latest/dist/mars3d.css","https://unpkg.com/mars3d@latest/dist/mars3d.js"]}}class bm{constructor(){this.states=new Cesium.ManagedArray,this.count=0}hidePrimitiveCollection(t){const{PrimitiveCollection:n,Cesium3DTileset:i,Model:r}=Cesium,a=t.length;for(let s=0;s<a;s++){const l=t.get(s);l instanceof n?this.hidePrimitiveCollection(l):(this.states.push(l.show),l instanceof i||l instanceof r||(l.show=!1))}}restorePrimitiveCollection(t){const{PrimitiveCollection:n}=Cesium,i=t.length;for(let r=0;r<i;r++){const a=t.get(r);a instanceof n?this.restorePrimitiveCollection(a):a.show=this.states.get(this.count++)}}hide(t){this.states.length=0,this.hidePrimitiveCollection(t.primitives),this.hidePrimitiveCollection(t.groundPrimitives)}restore(t){this.count=0,this.restorePrimitiveCollection(t.primitives),this.restorePrimitiveCollection(t.groundPrimitives)}}var Ve={BeforeDraw:0,Drawing:1,AfterDraw:2};const sn=Object.freeze({METERS:"METERS",CENTIMETERS:"CENTIMETERS",KILOMETERS:"KILOMETERS",FEET:"FEET",US_SURVEY_FEET:"US_SURVEY_FEET",INCHES:"INCHES",YARDS:"YARDS",MILES:"MILES"}),Jt=Object.freeze({SQUARE_METERS:"SQUARE_METERS",SQUARE_CENTIMETERS:"SQUARE_CENTIMETERS",SQUARE_KILOMETERS:"SQUARE_KILOMETERS",SQUARE_FEET:"SQUARE_FEET",SQUARE_INCHES:"SQUARE_INCHES",SQUARE_YARDS:"SQUARE_YARDS",SQUARE_MILES:"SQUARE_MILES",ACRES:"ACRES",HECTARES:"HECTARES"}),bn=Object.freeze({CUBIC_METERS:"CUBIC_METERS",CUBIC_CENTIMETERS:"CUBIC_CENTIMETERS",CUBIC_KILOMETERS:"CUBIC_KILOMETERS",CUBIC_FEET:"CUBIC_FEET",CUBIC_INCHES:"CUBIC_INCHES",CUBIC_YARDS:"CUBIC_YARDS",CUBIC_MILES:"CUBIC_MILES"}),Xt=Object.freeze({DEGREES:"DEGREES",RADIANS:"RADIANS",DEGREES_MINUTES_SECONDS:"DEGREES_MINUTES_SECONDS",GRADE:"GRADE",RATIO:"RATIO"}),Dw=class si{constructor(t){t=Zn(t,{}),this.distanceUnits=Zn(t.distanceUnits,sn.METERS),this.areaUnits=Zn(t.areaUnits,Jt.SQUARE_METERS),this.volumeUnits=Zn(t.volumeUnits,bn.CUBIC_METERS),this.angleUnits=Zn(t.angleUnits,Xt.DEGREES),this.slopeUnits=Zn(t.slopeUnits,Xt.DEGREES)}static distanceToString(t,n,i,r){return t=si.convertDistance(t,sn.METERS,n),ma(t,i,r)+si.getDistanceUnitSpacing(n)+si.getDistanceUnitSymbol(n)}static areaToString(t,n,i,r){return t=si.convertArea(t,Jt.SQUARE_METERS,n),ma(t,i,r)+si.getAreaUnitSpacing(n)+si.getAreaUnitSymbol(n)}static angleToString(t,n,i,r){const{Math:a}=Cesium;if(n===Xt.DEGREES||n===Xt.RADIANS||n===Xt.GRADE)return t=Vw(t,n),ma(t,i,r)+si.getAngleUnitSpacing(n)+si.getAngleUnitSymbol(n);if(n===Xt.DEGREES_MINUTES_SECONDS){const s=a.toDegrees(t),l=s<0?"-":"",d=Math.floor(s),h=60*(s-d),m=Math.floor(h);return l+d+"\xB0 "+m+"' "+ma(60*(h-m),void 0,r)+'"'}Xt.RATIO}static volumeToString(t,n,i,r){return t=si.convertArea(t,bn.CUBIC_METERS,n),ma(t,i,r)+si.getVolumeUnitSpacing(n)+si.getVolumeUnitSymbol(n)}static getDistanceUnitSpacing(t){return" "}static getAreaUnitSpacing(t){return" "}static getAngleUnitSpacing(t){return t===Xt.RADIANS?" ":""}static getVolumeUnitSpacing(t){return" "}static getDistanceUnitSymbol(t){switch(t){case sn.METERS:return"m";case sn.CENTIMETERS:return"cm";case sn.KILOMETERS:return"km";case sn.FEET:case sn.US_SURVEY_FEET:return"ft";case sn.INCHES:return"in";case sn.YARDS:return"yd";case sn.MILES:return"mi";default:return"m"}}static getAreaUnitSymbol(t){switch(t){case Jt.SQUARE_METERS:return"m\xB2";case Jt.SQUARE_CENTIMETERS:return"cm\xB2";case Jt.SQUARE_KILOMETERS:return"km\xB2";case Jt.SQUARE_FEET:return"sq ft";case Jt.SQUARE_INCHES:return"sq in";case Jt.SQUARE_YARDS:return"sq yd";case Jt.SQUARE_MILES:return"sq mi";case Jt.ACRES:return"ac";case Jt.HECTARES:return"ha";default:return"m\xB2"}}static getVolumeUnitSymbol(t){switch(t){case bn.CUBIC_METERS:return"m\xB3";case bn.CUBIC_CENTIMETERS:return"cm\xB3";case bn.CUBIC_KILOMETERS:return"km\xB3";case bn.CUBIC_FEET:return"cu ft";case bn.CUBIC_INCHES:return"cu in";case bn.CUBIC_YARDS:return"cu yd";case bn.CUBIC_MILES:return"cu mi";default:return"m\xB3"}}static getAngleUnitSymbol(t){return t===Xt.DEGREES?"\xB0":t===Xt.RADIANS?"rad":t===Xt.GRADE?"%":void 0}static convertDistance(t,n,i){return n===i?t:t*Lw(n)*(1/Lw(i))}static convertArea(t,n,i){return n===i?t:t*Bw(n)*(1/Bw(i))}static convertVolume(t,n,i){return n===i?t:t*Rw(n)*(1/Rw(i))}static convertAngle(t,n,i){return n===i?t:Vw(LD(t,n),i)}static longitudeToString(t,n,i,r){return si.angleToString(Math.abs(t),n,i,r)+" "+(t<0?"W":"E")}static latitudeToString(t,n,i,r){return si.angleToString(Math.abs(t),n,i,r)+" "+(t<0?"S":"N")}};Dw.numberToString=function(e,t,n){return ma(e,t,n)};let Bn=Dw;function Lw(e){switch(e){case sn.METERS:return 1;case sn.CENTIMETERS:return .01;case sn.KILOMETERS:return 1e3;case sn.FEET:return .3048;case sn.US_SURVEY_FEET:return 1200/3937;case sn.INCHES:return .254;case sn.YARDS:return .9144;case sn.MILES:return 1609.344;default:return 1}}function Bw(e){switch(e){case Jt.SQUARE_METERS:return 1;case Jt.SQUARE_CENTIMETERS:return 1e-4;case Jt.SQUARE_KILOMETERS:return 1e6;case Jt.SQUARE_FEET:return .09290304;case Jt.SQUARE_INCHES:return 64516e-8;case Jt.SQUARE_YARDS:return .83612736;case Jt.SQUARE_MILES:return 2589988110336e-6;case Jt.ACRES:return 4046.85642232;case Jt.HECTARES:return 1e4;default:return 1}}function Rw(e){switch(e){case bn.CUBIC_METERS:return 1;case bn.CUBIC_CENTIMETERS:return 1e-6;case bn.CUBIC_KILOMETERS:return 1e9;case bn.CUBIC_FEET:return .09290304*.3048;case bn.CUBIC_INCHES:return 16387064e-12;case bn.CUBIC_YARDS:return .764554857984;case bn.CUBIC_MILES:return 416818182544058e-5;default:return 1}}function LD(e,t){const{defined:n,Math:i,RuntimeError:r}=Cesium;if(t===Xt.RADIANS)return e;if(t===Xt.DEGREES)return i.toRadians(e);if(t===Xt.GRADE)return e===Number.POSITIVE_INFINITY?i.PI_OVER_TWO:Math.atan(e/100);if(t===Xt.RATIO)return Math.atan(e);if(t===Xt.DEGREES_MINUTES_SECONDS){const a=/(-?)(\d+)\s*°\s*(\d+)\s*'\s*([\d.,]+)"\s*([WENS]?)/i.exec(e)||[];if(!n(a))throw new r("Could not convert angle to radians: "+e);let s=0<a[1].length?-1:1;const l=parseInt(a[2]),d=parseInt(a[3]),h=parseFloat(a[4]);let m=a[5];m.length===1&&((m=m.toUpperCase())!=="W"&&m!=="S"||(s*=-1));const p=s*(l+d/60+h/3600);return i.toRadians(p)}}function Vw(e,t){const{Math:n}=Cesium;if(t===Xt.RADIANS)return e;if(t===Xt.DEGREES)return n.toDegrees(e);if(t===Xt.GRADE)return n.clamp(e,0,n.PI_OVER_TWO)===n.PI_OVER_TWO?Number.POSITIVE_INFINITY:100*Math.tan(e);if(t===Xt.RATIO)return Math.sin(e)/Math.cos(e)}function ma(e,t,n){const i=BD(n,e,t),r=e.toLocaleString(t,i),a=-0,s=0;return r===a.toLocaleString(t,i)?s.toLocaleString(t,i):r}function BD(e,t,n){let i={minimumFractionDigits:0,maximumFractionDigits:0};return e=Cesium.defaultValue(e,2),typeof e=="number"?(i.minimumFractionDigits=e,i.maximumFractionDigits=e):i=typeof e=="function"?e(t,n):e,i}class yc{constructor(t){const{defined:n,defaultValue:i,createGuid:r,BoundingSphere:a,Ellipsoid:s,ClassificationType:l,ArcType:d}=Cesium;t=i(t,{}),this.show=i(t.show,!0),this._id=n(t.id)?t.id:r(),this._ellipsoid=i(t.ellipsoid,s.WGS84),this._appearance=i(t.appearance,new Cesium.MaterialAppearance),this._depthFailAppearance=t.depthFailAppearance,this._positions=i(t.positions,[]),this._polygonHierarchy=t.polygonHierarchy,this._clampToGround=i(t.clampToGround,!1),this._classificationType=i(t.classificationType,l.BOTH),this._arcType=i(t.arcType,d.RHUMB),this._allowPicking=i(t.allowPicking,!0),this._asynchronous=i(t.asynchronous,!1),this._boundingSphere=new a,this._primitive=void 0,this._update=!0}get positions(){return this._positions}set positions(t){this._positions=t,this._update=!0}get polygonHierarchy(){return this._polygonHierarchy}set polygonHierarchy(t){this._polygonHierarchy=t,this._update=!0}get appearance(){return this._appearance}set appearance(t){this._appearance=t,this._primitive!==void 0&&(this._primitive.appearance=t)}get depthFailAppearance(){return this._depthFailAppearance}set depthFailAppearance(t){this._depthFailAppearance=t,this._primitive!==void 0&&this._primitive instanceof Cesium.Primitive&&(this._primitive.depthFailAppearance=t)}get id(){return this._id}set id(t){this._id=t}get boundingVolume(){return this._boundingSphere}get ellipsoid(){return this._ellipsoid}get clampToGround(){return this._clampToGround}set clampToGround(t){this._clampToGround=t}get classificationType(){return this._classificationType}set classificationType(t){this._classificationType=t,this._update=!0}get allowPicking(){return this._allowPicking}set allowPicking(t){this._allowPicking=t}get asynchronous(){return this._asynchronous}set asynchronous(t){this._asynchronous=t}async update(t){if(this.show){const n=this._polygonHierarchy?this._polygonHierarchy.positions:this._positions;if(n.length<3)this._primitive&&this._primitive.destroy(),this._primitive=void 0;else{if(this._update){this._update=!1;let i;this._clampToGround?i=this._createGroundPolygon():i=this._createPolygon(),i.then(r=>{this._primitive&&this._primitive.destroy(),this._primitive=void 0,this._primitive=r,this._primitive._vcParent=this,this._boundingSphere=Cesium.BoundingSphere.fromPoints(n,this._boundingSphere)})}this._primitive&&this._primitive.update(t)}}}async _createPolygon(){const{Primitive:t,GeometryInstance:n,CoplanarPolygonGeometry:i,Cartesian3:r}=Cesium;return new t({geometryInstances:new n({geometry:this._polygonHierarchy?new i({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid}):i.fromPositions({positions:this._positions.map(function(a){return r.clone(a)}),ellipsoid:this._ellipsoid}),id:this._id}),appearance:this._appearance,depthFailAppearance:this._depthFailAppearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous})}async _createGroundPolygon(){const{GroundPrimitive:t,GeometryInstance:n,PolygonGeometry:i,Cartesian3:r}=Cesium;return await Cesium.GroundPrimitive.initializeTerrainHeights(),new t({geometryInstances:new n({geometry:this._polygonHierarchy?new i({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid,arcType:this._arcType}):i.fromPositions({positions:this._positions.map(function(a){return r.clone(a)}),ellipsoid:this._ellipsoid,arcType:this._arcType}),id:this._id}),appearance:this._appearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous,classificationType:this._classificationType})}isDestroyed(){return!1}destroy(){return this._primitive&&this._primitive.destroy(),this._primitive=void 0,Cesium.destroyObject(this)}}class bc{constructor(t){const{SampledPositionProperty:n,Entity:i,ExtrapolationType:r,VelocityOrientationProperty:a,CallbackProperty:s}=Cesium;this._lastTime=void 0,this._sampledPosition=new n,this._sampledPosition.forwardExtrapolationType=t.forwardExtrapolationType||r.HOLD,this._sampledPosition.backwardExtrapolationType=t.backwardExtrapolationType||r.HOLD,this._cache=[],this._maxCacheSize=t.maxCacheSize||10;const l=new i(t);if(l.position=this._sampledPosition,!Cesium.defined(t.orientation)){const d=new a(this._sampledPosition);let h;l.orientation=new s((m,p)=>{const g=d.getValue(m);if(g)h=g;else return h;return g},!1)}this._entity=l,this._velocityVectorProperty=new Cesium.VelocityVectorProperty(this._sampledPosition,!1)}get id(){return this._entity.id}set id(t){this._entity.id=t}set maxCacheSize(t){this._maxCacheSize=t}get maxCacheSize(){return this._maxCacheSize}get position(){return this._sampledPosition.getValue(Cesium.JulianDate.now())}_removePosition(){if(this._cache.length>this._maxCacheSize){const t=Cesium.JulianDate.addSeconds(this._cache[0],-.2,new Cesium.JulianDate),n=Cesium.JulianDate.addSeconds(this._cache[this._cache.length-this._maxCacheSize],-.2,new Cesium.JulianDate);this._sampledPosition.removeSamples(new Cesium.TimeInterval({start:t,stop:n})),this._cache.splice(0,this._cache.length-this._maxCacheSize)}}addPosition(t,n){this._removePosition();let i;if(typeof n=="number"){const r=Cesium.JulianDate.now();i=Cesium.JulianDate.addSeconds(r,n,new Cesium.JulianDate),Cesium.destroyObject(r)}else i=Zi(n);return this._sampledPosition.addSample(i,yt(t)),this._lastTime=i,this._cache.push(this._lastTime),i}}const RD={position:0,normal:1};class Cm{constructor(t){const{defaultValue:n,Matrix4:i,Math:r,Color:a,BoundingSphere:s}=Cesium;this.modelMatrix=n(t.modelMatrix,new i),this.fovH=n(t.fovH,r.toRadians(60)),this.fovV=n(t.fovV,r.toRadians(30)),this.segmentH=n(t.segmentH,16),this.segmentV=n(t.segmentV,8),this.subSegmentH=n(t.subSegmentH,3),this.subSegmentV=n(t.subSegmentV,3),this._faceColor=n(t.faceColor,new a(1,1,1,.1)),this._lineColor=n(t.lineColor,new a(1,1,1,.4)),this.show=n(t.show,!0),this._modelMatrix=i.clone(i.IDENTITY),this._fovH=0,this._fovV=0,this._segmentH=1,this._segmentV=1,this._subSegmentH=1,this._subSegmentV=1,this._boundingSphere=new s,this._initBoundingSphere=void 0,this._command=void 0}get faceColor(){return this._faceColor}set faceColor(t){this._faceColor=t}get lineColor(){return this._lineColor}set lineColor(t){this._lineColor=t}update(t){if(this.show&&t.passes.render){const{clone:n,Matrix4:i,defined:r,BoundingSphere:a}=Cesium;this.fovH===this._fovH&&this.fovV===this._fovV&&this.segmentH===this._segmentH&&this.segmentV===this._segmentV&&this.subSegmentH===this._subSegmentH&&this.subSegmentV===this._subSegmentV||(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=n(i.IDENTITY),this._destroyVideoMemory()),this.fovH!==this._fovH&&this.fovV!==this._fovV&&this.segmentH!==this._segmentH&&this.segmentV!==this._segmentV&&this.subSegmentH!==this._subSegmentH&&this.subSegmentV!==this._subSegmentV&&(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=n(i.IDENTITY),this._destroyVideoMemory()),r(this._command)||this._createCommand(t.context),i.equals(this.modelMatrix,this._modelMatrix)||(i.clone(this.modelMatrix,this._modelMatrix),this._command.modelMatrix=i.IDENTITY,this._command.modelMatrix=this._modelMatrix,this._command.boundingVolume=a.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere),this._lineCommand.modelMatrix=i.IDENTITY,this._lineCommand.modelMatrix=this._modelMatrix,this._lineCommand.boundingVolume=a.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere)),this._command&&t.commandList.push(this._command),this._lineCommand&&t.commandList.push(this._lineCommand)}}isDestroyed(){return!1}destroy(){this._destroyVideoMemory(),Cesium.destroyObject(this)}_createCommand(t){const{Appearance:n,RenderState:i,ShaderSource:r,ShaderProgram:a,BufferUsage:s,IndexDatatype:l,VertexArray:d,ComponentDatatype:h,BoundingSphere:m,DrawCommand:p,PrimitiveType:g,Pass:v,Matrix4:b}=Cesium,P=this,w=this._subSegmentH*this._segmentH,S=this._subSegmentV*this._segmentV,T=Fw(this._fovH,this._fovV,w,S),_=Fw(this._fovH,this._fovV,w,S),M=VD(w,S),A=FD(this._segmentH,this._segmentV,this._subSegmentH,this._subSegmentV),D=n.getDefaultRenderState(!0,!1,void 0),z=i.fromCache(D),$=t.webgl2,L=new r({sources:[`
        // \u4F7F\u7528double\u7C7B\u578B\u7684position\u8FDB\u884C\u8BA1\u7B97
        // attribute vec3 position3DHigh;
        // attribute vec3 position3DLow;
        ${$?"in":"attribute"} vec3 position;
        ${$?"in":"attribute"} vec3 normal;
        // attribute vec2 st;
        // attribute float batchId;
        ${$?"out":"varying"} vec3 v_positionEC;
        ${$?"out":"varying"} vec3 v_normalEC;
        // varying vec2 v_st;
        void main()
          {
            // \u4F7F\u7528double\u7C7B\u578B\u7684position\u8FDB\u884C\u8BA1\u7B97
            // vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);
            // v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
            // position in eye coordinates
            // v_normalEC = czm_normal * normal;
            // normal in eye coordinates
            // v_st = st;
            // gl_Position = czm_modelViewProjectionRelativeToEye * p;
            v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;
            // position in eye coordinates
            v_normalEC = czm_normal * normal;
            // normal in eye coordinates
            // v_st = st;
            gl_Position = czm_modelViewProjection * vec4(position, 1.0);
          }
        `]}),U=new r({sources:[`
        ${$?"in":"varying"} vec3 v_positionEC;
        ${$?"in":"varying"} vec3 v_normalEC;
        // varying vec2 v_st;
        // uniform sampler2D myImage;
        uniform vec4 vcColor;
        void main()
        {
          vec3 positionToEyeEC = -v_positionEC;
          vec3 normalEC = normalize(v_normalEC);
          #ifdef FACE_FORWARD
          normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
          #endif
          czm_materialInput materialInput;
          materialInput.normalEC = normalEC;
          materialInput.positionToEyeEC = positionToEyeEC;
          // materialInput.st = v_st;
          //czm_material material = czm_getMaterial(materialInput);
          czm_material material = czm_getDefaultMaterial(materialInput);
          // material.diffuse = texture2D(myImage, materialInput.st).rgb;
          material.diffuse = vcColor.rgb;
          material.alpha = vcColor.a;
          #ifdef FLAT
          ${$?"out_FragColor":"gl_FragColor"} = vec4(material.diffuse + material.emission, material.alpha);
          #else
          ${$?"out_FragColor":"gl_FragColor"} = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
          #endif
        }
        `]}),Z={vcColor:function(){return P._faceColor}},W={vcColor:function(){return P._lineColor}},y=a.fromCache({context:t,vertexShaderSource:L,fragmentShaderSource:U,attributeLocations:RD});this._shaderprogram=y;const C=Cesium.Buffer.createVertexBuffer({context:t,typedArray:T,usage:s.STATIC_DRAW}),x=Cesium.Buffer.createVertexBuffer({context:t,typedArray:_,usage:s.STATIC_DRAW}),B=Cesium.Buffer.createIndexBuffer({context:t,typedArray:M,usage:s.STATIC_DRAW,indexDatatype:l.UNSIGNED_SHORT}),O=Cesium.Buffer.createIndexBuffer({context:t,typedArray:A,usage:s.STATIC_DRAW,indexDatatype:l.UNSIGNED_SHORT}),I=new d({context:t,attributes:[{index:0,vertexBuffer:C,componentsPerAttribute:3,componentDatatype:h.FLOAT},{index:1,vertexBuffer:x,componentsPerAttribute:3,componentDatatype:h.FLOAT}],indexBuffer:B}),V=new d({context:t,attributes:[{index:0,vertexBuffer:C,componentsPerAttribute:3,componentDatatype:h.FLOAT},{index:1,vertexBuffer:x,componentsPerAttribute:3,componentDatatype:h.FLOAT}],indexBuffer:O});this._initBoundingSphere=m.fromVertices(T),this._command=new p({vertexArray:I,primitiveType:g.TRIANGLES,renderState:z,shaderProgram:y,uniformMap:Z,owner:this,pass:v.TRANSLUCENT,modelMatrix:new b,boundingVolume:new m,cull:!0}),this._lineCommand=new p({vertexArray:V,primitiveType:g.LINES,renderState:z,shaderProgram:y,uniformMap:W,owner:this,pass:v.TRANSLUCENT,modelMatrix:new b,boundingVolume:new m,cull:!0})}_destroyVideoMemory(){const{defined:t}=Cesium;this._shaderprogram=this._shaderprogram&&this._shaderprogram.destroy(),t(this._command)&&(this._command.vertexArray.destroy(),this._command=void 0),t(this._lineCommand)&&(this._lineCommand.vertexArray.destroy(),this._lineCommand=void 0)}}function Fw(e,t,n,i){const r=new Float32Array((n+1)*(i+1)*3+3);for(let a=0;a<n+1;a++)for(let s=0;s<i+1;s++){const l=e*(a/n-.5),d=t*(s/i-.5),h=[Math.cos(-l)*Math.cos(-d),Math.sin(-l)*Math.cos(-d),Math.sin(d)];r[3*(s*(n+1)+a)+0]=h[0],r[3*(s*(n+1)+a)+1]=h[1],r[3*(s*(n+1)+a)+2]=h[2]}return r[(n+1)*(i+1)*3+0]=0,r[(n+1)*(i+1)*3+1]=0,r[(n+1)*(i+1)*3+2]=0,r}function VD(e,t){const n=e*t*6,i=new Uint16Array(n);for(let r=0;r<e;r++)for(let a=0;a<t;a++){const s=a*(1+e)+r,l=a*(1+e)+r+1,d=(a+1)*(1+e)+r,h=(a+1)*(1+e)+r+1,m=6*(a*e+r);i[0+m]=s,i[1+m]=l,i[2+m]=h,i[3+m]=s,i[4+m]=h,i[5+m]=d}return i}function FD(e,t,n,i){const r=e*n,a=t*i,s=new Uint16Array((e+1)*(2*a)+(t+1)*(2*r)+8);for(let h=0;h<e+1;h++)for(let m=0;m<a;m++){const p=h*n;s[2*(h*a+m)+0]=m*(1+r)+p,s[2*(h*a+m)+1]=(m+1)*(1+r)+p}const l=(e+1)*(2*a);for(let h=0;h<t;h++)for(let m=0;m<r;m++){const p=h*i;s[l+2*(m+h*r)]=p*(1+r)+m,s[l+2*(m+h*r)+1]=p*(1+r)+m+1}const d=(e+1)*(2*a)+(t+1)*(2*r);return s[d]=0,s[d+1]=(1+r)*(1+a),s[d+2]=r,s[d+3]=(1+r)*(1+a),s[d+4]=(1+r)*a,s[d+5]=(1+r)*(1+a),s[d+6]=(1+r)*(1+a)-1,s[d+7]=(1+r)*(1+a),s}const $w=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],wm=1,Ds=8;class _m{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[n,i]=new Uint8Array(t,0,2);if(n!==219)throw new Error("Data does not appear to be in a KDBush format.");const r=i>>4;if(r!==wm)throw new Error(`Got v${r} data when expected v${wm}.`);const a=$w[i&15];if(!a)throw new Error("Unrecognized array type.");const[s]=new Uint16Array(t,2,1),[l]=new Uint32Array(t,4,1);return new _m(l,s,a,t)}constructor(t,n=64,i=Float64Array,r){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+n,2),65535),this.ArrayType=i,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const a=$w.indexOf(this.ArrayType),s=t*2*this.ArrayType.BYTES_PER_ELEMENT,l=t*this.IndexArrayType.BYTES_PER_ELEMENT,d=(8-l%8)%8;if(a<0)throw new Error(`Unexpected typed array class: ${i}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,Ds,t),this.coords=new this.ArrayType(this.data,Ds+l+d,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(Ds+s+l+d),this.ids=new this.IndexArrayType(this.data,Ds,t),this.coords=new this.ArrayType(this.data,Ds+l+d,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(wm<<4)+a]),new Uint16Array(this.data,2,1)[0]=n,new Uint32Array(this.data,4,1)[0]=t)}add(t,n){const i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=t,this.coords[this._pos++]=n,i}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Pm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,n,i,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:a,coords:s,nodeSize:l}=this,d=[0,a.length-1,0],h=[];for(;d.length;){const m=d.pop()||0,p=d.pop()||0,g=d.pop()||0;if(p-g<=l){for(let w=g;w<=p;w++){const S=s[2*w],T=s[2*w+1];S>=t&&S<=i&&T>=n&&T<=r&&h.push(a[w])}continue}const v=g+p>>1,b=s[2*v],P=s[2*v+1];b>=t&&b<=i&&P>=n&&P<=r&&h.push(a[v]),(m===0?t<=b:n<=P)&&(d.push(g),d.push(v-1),d.push(1-m)),(m===0?i>=b:r>=P)&&(d.push(v+1),d.push(p),d.push(1-m))}return h}within(t,n,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:a,nodeSize:s}=this,l=[0,r.length-1,0],d=[],h=i*i;for(;l.length;){const m=l.pop()||0,p=l.pop()||0,g=l.pop()||0;if(p-g<=s){for(let w=g;w<=p;w++)jw(a[2*w],a[2*w+1],t,n)<=h&&d.push(r[w]);continue}const v=g+p>>1,b=a[2*v],P=a[2*v+1];jw(b,P,t,n)<=h&&d.push(r[v]),(m===0?t-i<=b:n-i<=P)&&(l.push(g),l.push(v-1),l.push(1-m)),(m===0?t+i>=b:n+i>=P)&&(l.push(v+1),l.push(p),l.push(1-m))}return d}}function Pm(e,t,n,i,r,a){if(r-i<=n)return;const s=i+r>>1;Nw(e,t,s,i,r,a),Pm(e,t,n,i,s-1,1-a),Pm(e,t,n,s+1,r,1-a)}function Nw(e,t,n,i,r,a){for(;r>i;){if(r-i>600){const h=r-i+1,m=n-i+1,p=Math.log(h),g=.5*Math.exp(2*p/3),v=.5*Math.sqrt(p*g*(h-g)/h)*(m-h/2<0?-1:1),b=Math.max(i,Math.floor(n-m*g/h+v)),P=Math.min(r,Math.floor(n+(h-m)*g/h+v));Nw(e,t,n,b,P,a)}const s=t[2*n+a];let l=i,d=r;for(Ls(e,t,i,n),t[2*r+a]>s&&Ls(e,t,i,r);l<d;){for(Ls(e,t,l,d),l++,d--;t[2*l+a]<s;)l++;for(;t[2*d+a]>s;)d--}t[2*i+a]===s?Ls(e,t,i,d):(d++,Ls(e,t,d,r)),d<=n&&(i=d+1),n<=d&&(r=d-1)}}function Ls(e,t,n,i){Em(e,n,i),Em(t,2*n,2*i),Em(t,2*n+1,2*i+1)}function Em(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function jw(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}class xm{constructor(t){t=Zn(t,{}),this._enabled=Zn(t.enabled,!1),this._pixelRange=Zn(t.pixelRange,80),this._minimumClusterSize=Zn(t.minimumClusterSize,2),this._clusterBillboards=Zn(t.clusterBillboards,!0),this._clusterLabels=Zn(t.clusterLabels,!0),this._clusterPoints=Zn(t.clusterPoints,!0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity={},this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._clusterDirty=!1,this._cluster=void 0,this._removeEventListener=void 0,this._clusterEvent=new Cesium.Event,this.show=Zn(t.show,!0)}_initialize(t){this._scene=t;const n=jD(this);this._cluster=n,this._removeEventListener=t.camera.changed.addEventListener(n)}get enabled(){return this._enabled}set enabled(t){this._enabledDirty=t!==this._enabled,this._enabled=t}get pixelRange(){return this._pixelRange}set pixelRange(t){this._clusterDirty=this._clusterDirty||t!==this._pixelRange,this._pixelRange=t}get minimumClusterSize(){return this._minimumClusterSize}set minimumClusterSize(t){this._clusterDirty=this._clusterDirty||t!==this._minimumClusterSize,this._minimumClusterSize=t}get clusterEvent(){return this._clusterEvent}get clusterBillboards(){return this._clusterBillboards}set clusterBillboards(t){this._clusterDirty=this._clusterDirty||t!==this._clusterBillboards,this._clusterBillboards=t}get clusterLabels(){return this._clusterLabels}set clusterLabels(t){this._clusterDirty=this._clusterDirty||t!==this._clusterLabels,this._clusterLabels=t}get clusterPoints(){return this._clusterPoints}set clusterPoints(t){this._clusterDirty=this._clusterDirty||t!==this._clusterPoints,this._clusterPoints=t}getLabel(t){return Mm.call(this,t,"_labelCollection",Cesium.LabelCollection,"_unusedLabelIndices","labelIndex")}removeLabel(t){const{defined:n}=Cesium,i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(!n(this._labelCollection)||!n(i)||!n(i.labelIndex))return;const r=i.labelIndex;i.labelIndex=void 0,Sm(this,t.id);const a=this._labelCollection.get(r);a.show=!1,a.text="",a.id=void 0,this._unusedLabelIndices.push(r),this._clusterDirty=!0}getBillboard(t){return Mm.call(this,t,"_billboardCollection",Cesium.BillboardCollection,"_unusedBillboardIndices","billboardIndex")}removeBillboard(t){const{defined:n}=Cesium,i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(!n(this._billboardCollection)||!n(i)||!n(i.billboardIndex))return;const r=i.billboardIndex;i.billboardIndex=void 0,Sm(this,t.id);const a=this._billboardCollection.get(r);a.id=void 0,a.show=!1,a.image=void 0,this._unusedBillboardIndices.push(r),this._clusterDirty=!0}getPoint(t){return Mm.call(this,t,"_pointCollection",Cesium.PointPrimitiveCollection,"_unusedPointIndices","pointIndex")}removePoint(t){const{defined:n}=Cesium,i=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(!n(this._pointCollection)||!n(i)||!n(i.pointIndex))return;const r=i.pointIndex;i.pointIndex=void 0,Sm(this,t.id);const a=this._pointCollection.get(r);a.show=!1,a.id=void 0,this._unusedPointIndices.push(r),this._clusterDirty=!0}update(t){if(!this.show)return;const{defined:n}=Cesium;let i;n(this._labelCollection)&&this._labelCollection.length>0&&this._labelCollection.get(0)._glyphs.length===0&&(i=t.commandList,t.commandList=[],this._labelCollection.update(t),t.commandList=i),n(this._billboardCollection)&&this._billboardCollection.length>0&&!n(this._billboardCollection.get(0).width)&&(i=t.commandList,t.commandList=[],this._billboardCollection.update(t),t.commandList=i),this._enabledDirty&&(this._enabledDirty=!1,$D(this),this._clusterDirty=!0),this._clusterDirty&&(this._clusterDirty=!1,this._cluster()),n(this._clusterLabelCollection)&&this._clusterLabelCollection.update(t),n(this._clusterBillboardCollection)&&this._clusterBillboardCollection.update(t),n(this._clusterPointCollection)&&this._clusterPointCollection.update(t),n(this._labelCollection)&&this._labelCollection.update(t),n(this._billboardCollection)&&this._billboardCollection.update(t),n(this._pointCollection)&&this._pointCollection.update(t)}destroy(){const{defined:t}=Cesium;this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._pointCollection=this._pointCollection&&this._pointCollection.destroy(),this._clusterLabelCollection=this._clusterLabelCollection&&this._clusterLabelCollection.destroy(),this._clusterBillboardCollection=this._clusterBillboardCollection&&this._clusterBillboardCollection.destroy(),this._clusterPointCollection=this._clusterPointCollection&&this._clusterPointCollection.destroy(),t(this._removeEventListener)&&(this._removeEventListener(),this._removeEventListener=void 0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity=void 0,this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._pixelRangeDirty=!1,this._minimumClusterSizeDirty=!1}}function $D(e){if(e.enabled)return;const{defined:t}=Cesium;t(e._clusterLabelCollection)&&e._clusterLabelCollection.destroy(),t(e._clusterBillboardCollection)&&e._clusterBillboardCollection.destroy(),t(e._clusterPointCollection)&&e._clusterPointCollection.destroy(),e._clusterLabelCollection=void 0,e._clusterBillboardCollection=void 0,e._clusterPointCollection=void 0,Om(e._labelCollection),Om(e._billboardCollection),Om(e._pointCollection)}function Om(e){const{defined:t}=Cesium;if(!t(e))return;const n=e.length;for(let i=0;i<n;++i)e.get(i).clusterShow=!0}function Mm(e,t,n,i,r){const{defined:a}=Cesium;let s=this[t];a(this._collectionIndicesByEntity)||(this._collectionIndicesByEntity={});let l=this._collectionIndicesByEntity[e.id];if(a(l)||(l=this._collectionIndicesByEntity[e.id]={billboardIndex:void 0,labelIndex:void 0,pointIndex:void 0}),a(s)&&a(l[r]))return s.get(l[r]);a(s)||(s=this[t]=new n({scene:this._scene}));let d,h;const m=this[i];m.length>0?(d=m.pop(),h=s.get(d)):(h=s.add(),d=s.length-1),l[r]=d;const p=this;return Promise.resolve().then(function(){p._clusterDirty=!0}),h}function Sm(e,t){const{defined:n}=Cesium,i=e._collectionIndicesByEntity[t];!n(i.billboardIndex)&&!n(i.labelIndex)&&!n(i.pointIndex)&&delete e._collectionIndicesByEntity[t]}function kw(e,t){e.x-=t,e.y-=t,e.width+=t*2,e.height+=t*2}function zw(e,t,n,i,r){const{defined:a,Label:s,Billboard:l,PointPrimitive:d,BoundingRectangle:h}=Cesium,m=new h;if(a(e._labelCollection)&&i._clusterLabels?r=s.getScreenSpaceBoundingBox(e,t,r):a(e._billboardCollection)&&i._clusterBillboards?r=l.getScreenSpaceBoundingBox(e,t,r):a(e._pointPrimitiveCollection)&&i._clusterPoints&&(r=d.getScreenSpaceBoundingBox(e,t,r)),kw(r,n),i._clusterLabels&&!a(e._labelCollection)&&a(e.id)&&Uw(i,e.id.id)&&a(e.id._label)){const p=i._collectionIndicesByEntity[e.id.id].labelIndex,g=i._labelCollection.get(p),v=s.getScreenSpaceBoundingBox(g,t,m);kw(v,n),r=h.union(r,v,r)}return r}function ND(e,t){const{defined:n}=Cesium;if(e.clusterShow=!0,!n(e._labelCollection)&&n(e.id)&&Uw(t,e.id.id)&&n(e.id._label)){const i=t._collectionIndicesByEntity[e.id.id].labelIndex,r=t._labelCollection.get(i);r.clusterShow=!0}}function Gw(e,t,n,i){const r={billboard:i._clusterBillboardCollection.add(),label:i._clusterLabelCollection.add(),point:i._clusterPointCollection.add()};r.billboard.show=!1,r.point.show=!1,r.label.show=!0,r.label.text=t.toLocaleString(),r.label.id=n,r.billboard.position=r.label.position=r.point.position=e,r.billboard.owner=i,r.label.owner=i,r.point.owner=i,i._clusterEvent.raiseEvent(n,r)}function Uw(e,t){const{defined:n}=Cesium;return n(e)&&n(e._collectionIndicesByEntity[t])&&n(e._collectionIndicesByEntity[t].labelIndex)}function Tm(e,t,n,i,r){const{defined:a,SceneMode:s}=Cesium;if(!a(e))return;const l=e.length;for(let d=0;d<l;++d){const h=e.get(d);if(h.clusterShow=!1,!h.show||r._scene.mode===s.SCENE3D&&!i.isPointVisible(h.position))continue;const m=h.computeScreenSpacePosition(n);a(m)&&t.push({index:d,collection:e,clustered:!1,coord:m})}}function jD(e){const{defined:t,LabelCollection:n,BillboardCollection:i,PointPrimitiveCollection:r,Billboard:a,Matrix4:s,Cartesian3:l,Cartesian2:d,BoundingRectangle:h}=Cesium,m=new h,p=new h,g=new h;return function(v){if(t(v)&&v<.05||!e.enabled)return;const b=e._scene,P=e._labelCollection,w=e._billboardCollection,S=e._pointCollection;if(!t(P)&&!t(w)&&!t(S)||!e._clusterBillboards&&!e._clusterLabels&&!e._clusterPoints)return;let T=e._clusterLabelCollection,_=e._clusterBillboardCollection,M=e._clusterPointCollection;t(T)?T.removeAll():T=e._clusterLabelCollection=new n({scene:b}),t(_)?_.removeAll():_=e._clusterBillboardCollection=new i({scene:b}),t(M)?M.removeAll():M=e._clusterPointCollection=new r;const A=e._pixelRange,D=e._minimumClusterSize,z=e._previousClusters,$=[],L=e._previousHeight,U=b.camera.positionCartographic.height,Z=b.mapProjection.ellipsoid,W=b.camera.positionWC,y=new Cesium.EllipsoidalOccluder(Z,W),C=[];e._clusterLabels&&Tm(P,C,b,y,e),e._clusterBillboards&&Tm(w,C,b,y,e),e._clusterPoints&&Tm(S,C,b,y,e);let x,B,O,I,V,j,N,H,ne,ie,ee,Q;const G=new _m(C.length,64,Int32Array);for(let J=0;J<C.length;J++)G.add(C[J].coord.x,C[J].coord.y);if(G.finish(),U<L)for(O=z.length,x=0;x<O;++x){const J=z[x];if(!y.isPointVisible(J.position))continue;const oe=a._computeScreenSpacePosition(s.IDENTITY,J.position,l.ZERO,d.ZERO,b);if(!t(oe))continue;const Y=1-U/L;let X=J.width=J.width*Y,se=J.height=J.height*Y;X=Math.max(X,J.minimumWidth),se=Math.max(se,J.minimumHeight);const re=oe.x-X*.5,de=oe.y-se*.5,ce=oe.x+X,he=oe.y+se;for(V=G.range(re,de,ce,he),j=V.length,ie=0,ne=[],B=0;B<j;++B)N=V[B],H=C[N],H.clustered||(++ie,ee=H.collection,Q=H.index,ne.push(ee.get(Q).id));if(ie>=D)for(Gw(J.position,ie,ne,e),$.push(J),B=0;B<j;++B)C[V[B]].clustered=!0}for(O=C.length,x=0;x<O;++x){const J=C[x];if(J.clustered)continue;J.clustered=!0,ee=J.collection,Q=J.index;const oe=ee.get(Q);I=zw(oe,J.coord,A,e,m);const Y=h.clone(I,p);V=G.range(I.x,I.y,I.x+I.width,I.y+I.height),j=V.length;const X=l.clone(oe.position);for(ie=1,ne=[oe.id],B=0;B<j;++B)if(N=V[B],H=C[N],!H.clustered){const se=H.collection.get(H.index),re=zw(se,H.coord,A,e,g);l.add(se.position,X,X),h.union(Y,re,Y),++ie,ne.push(se.id)}if(ie>=D){const se=l.multiplyByScalar(X,1/ie,X);for(Gw(se,ie,ne,e),$.push({position:se,width:Y.width,height:Y.height,minimumWidth:I.width,minimumHeight:I.height}),B=0;B<j;++B)C[V[B]].clustered=!0}else ND(oe,e)}T.length===0&&(T.destroy(),e._clusterLabelCollection=void 0),_.length===0&&(_.destroy(),e._clusterBillboardCollection=void 0),M.length===0&&(M.destroy(),e._clusterPointCollection=void 0),e._previousClusters=$,e._previousHeight=U}}let Cc=!1;class Im{static extend(t){if(Cc)return;const{Rectangle:n}=Cesium;n.prototype.expand=function(i,r,a){return a=a&&a instanceof n?a:this.clone(),i=a.width*(1-i)/2,r=a.height*(1-r)/2,a.west+=i,a.south+=r,a.east-=i,a.north-=r,a.west=a.west<-Math.PI?-Math.PI:a.west,a.east=a.east>Math.PI?Math.PI:a.east,a.north=a.north>Math.PI/2?Math.PI/2:a.north,a.south=a.south<-Math.PI/2?-Math.PI/2:a.south,a},Cc=!0}static revoke(t){if(!Cc)return;const{Rectangle:n}=Cesium;n.prototype.expand=void 0,Cc=!1}}let wc=!1,Am;class Dm{static extend(t){if(wc)return;const n=Cesium.ShadowMapShader;Am=n.createShadowReceiveFragmentShader,n.createShadowReceiveFragmentShader=function(i,r,a,s,l){var d;if(i=Am.bind(this)(i,r,a,s,l),r._isSpotLight){i.sources[0]=`
          uniform vec4 shadowMap_viewshedVisibleColor;
          uniform vec4 shadowMap_viewshedInvisibleColor;
          ${i.sources[0]}
        `;const h=(d=t.scene.context)==null?void 0:d.webgl2;i.sources[i.sources.length-1]=i.sources[i.sources.length-1].replace(`${h?"out_FragColor":"gl_FragColor"}.rgb *= visibility;`,`
          float _depth = shadowPosition.z - shadowParameters.depthBias;
          float _visibility = czm_shadowDepthCompare(shadowMap_texture, shadowPosition.xy, _depth);
          ${h?"out_FragColor":"gl_FragColor"}.rgb *= (_visibility < 0.999 ? shadowMap_viewshedInvisibleColor.rgb :shadowMap_viewshedVisibleColor.rgb);
          `),i.sources[i.sources.length-1]=i.sources[i.sources.length-1].replace("vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);","vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);if (distance(positionEC.xyz, shadowMap_lightPositionEC.xyz) > shadowMap_lightPositionEC.w) { return; }")}return i},wc=!0}static revoke(t){if(!wc)return;const n=Cesium.ShadowMapShader;n.createShadowReceiveFragmentShader=Am,wc=!1}}class Lm{constructor(t,n){const{defined:i,DeveloperError:r,PerspectiveFrustum:a,Math:s,Camera:l,ShadowMap:d,ShadowMode:h,Event:m,Cartesian3:p,defaultValue:g,Color:v}=Cesium;if(!i(t))throw new r("scene is required.");this._scene=t,this._frustum=new a,this._frustum.fov=s.PI/3,this._frustum.aspectRatio=3,this._frustum.near=1,this._frustum.far=400,this._spotLightCamera=new l(this._scene),this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap=new d({context:this._scene.context,lightCamera:this._spotLightCamera,cascadesEnabled:!1}),n=n||{},this._scene.globe.shadows=h.ENABLED,this._viewshedShadowMap._terrainBias.depthBias=0,this._debugCameraPrimitive=new Cm({}),this._enabledChangedEvent=new m,this._position=new p,this._offsetHeight=g(n.offsetHeight,1.8),this._visibleColor=g(n.visibleColor,new v(0,1,0,1)),this._invisibleColor=g(n.invisibleColor,new v(1,0,0,1)),this._viewshedShadowMap._viewshedColors={visible:this._visibleColor,invisible:this._invisibleColor},this._showGridLine=n.showGridLine,this._debugCameraPrimitive.show=this._showGridLine,this._debugCameraPrimitive.lineColor=g(n.lineColor,new v(1,1,1,.4)),this._debugCameraPrimitive.faceColor=g(n.faceColor,new v(1,1,1,.1))}get frustum(){return this._frustum}get fovH(){return this._fovH}set fovH(t){if(isNaN(t)||t===void 0||t==null||t<0||t>=Math.PI)throw new Error("fovH must be in the range [0, PI).");this._fovH=Number(t),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get fovV(){return this._fovV}set fovV(t){if(isNaN(t)||t===void 0||t==null||t<0||t>=Math.PI)throw new Error("fovV must be in the range [0, PI).");this._fovV=Number(t),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get near(){return this.frustum.near}set near(t){this.frustum.near!==t&&(this.frustum.near=t)}get far(){return this.far.near}set far(t){this.frustum.far!==t&&(this.frustum.far=t)}get position(){return this._position}set position(t){t instanceof Cesium.Cartesian3&&this.setView({destination:t.clone(),orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get offsetHeight(){return this._offsetHeight}set offsetHeight(t){if(isNaN(t)||t==null||t==null)throw new Error("Unacceptable offset.");this._offsetHeight=Number(t),this.setView({destination:this._position.clone(),orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get heading(){return this._spotLightCamera.heading}set heading(t){this._spotLightCamera.heading!==t&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:t,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get pitch(){return this._spotLightCamera.pitch}set pitch(t){this._spotLightCamera.pitch!==t&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:t,roll:this._spotLightCamera.roll}})}get roll(){return this._spotLightCamera.roll}set roll(t){this._spotLightCamera.roll!==t&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:t}})}get shadowMap(){return this._viewshedShadowMap}get lightCamera(){return this._spotLightCamera}get enabled(){return this._viewshedShadowMap.enabled}set enabled(t){this._viewshedShadowMap.enabled!==t&&(t?(this._viewshedShadowMap.enabled=!0,this._viewshedShadowMap._pointLightRadius=this._spotLightCamera.frustum.far):this._viewshedShadowMap.enabled=!1,this._enabledChangedEvent.raiseEvent(t))}get enabledChangedEvent(){return this._enabledChangedEvent}get visibleColor(){return this._visibleColor}set visibleColor(t){this._visibleColor=t,this._viewshedShadowMap._viewshedColors.visible=t}get invisibleColor(){return this._invisibleColor}set invisibleColor(t){this._invisibleColor=t,this._viewshedShadowMap._viewshedColors.invisible=t}get showGridLine(){return this._showGridLine}set showGridLine(t){this._showGridLine=t,this._debugCameraPrimitive.show=t}get faceColor(){return this._debugCameraPrimitive.faceColor}set faceColor(t){this._debugCameraPrimitive.faceColor=t}get lineColor(){return this._debugCameraPrimitive.lineColor}set lineColor(t){this._debugCameraPrimitive.lineColor=t}update(t){if(this._viewshedShadowMap.enabled){const{ShadowMode:n,Matrix3:i,Matrix4:r,Math:a}=Cesium;if(this._scene.globe.shadows!==n.ENABLED&&(this._scene.globe.shadows=n.ENABLED),t.shadowMaps.unshift(this._viewshedShadowMap),this._frustum.equals(this._spotLightCamera.frustum)||(this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap._pointLightRadius=this._frustum.far,this.shadowMap._boundingSphere.radius=Math.random()),this._debugCameraPrimitive.show){const s=this._debugCameraPrimitive.modelMatrix;r.clone(this._spotLightCamera.inverseViewMatrix,s);const l=i.fromRotationZ(.5*a.PI),d=i.fromRotationY(.5*a.PI),h=new i;i.multiply(l,d,h),r.multiplyByMatrix3(s,h,s),r.multiplyByUniformScale(s,this._spotLightCamera.frustum.far,s);const m=this._spotLightCamera.frustum;this._debugCameraPrimitive.fovV=m.aspectRatio<=1?m.fov:2*Math.atan(Math.tan(.5*m.fov)/m.aspectRatio),this._debugCameraPrimitive.fovH=1<m.aspectRatio?m.fov:2*Math.atan(Math.tan(.5*m.fov)*m.aspectRatio),this._debugCameraPrimitive.segmentH=parseInt(String(this._debugCameraPrimitive.fovH/(Math.PI/30)))||1,this._debugCameraPrimitive.segmentV=parseInt(String(this._debugCameraPrimitive.fovV/(Math.PI/30)))||1,this._debugCameraPrimitive.update(t)}}}setView(t){t=t||{};const n=t.destination;if(n instanceof Cesium.Cartesian3){this._position=n.clone();const i=this._offsetHeight,r=Cesium.Cartographic.fromCartesian(n,this._scene.globe.ellipsoid);if(r){r.height=r.height+i;const a=Cesium.Cartesian3.fromRadians(r.longitude,r.latitude,r.height,this._scene.globe.ellipsoid);t.destination=a}}this._spotLightCamera.setView(t)}isDestroyed(){return!1}destroy(){this._debugCameraPrimitive&&this._debugCameraPrimitive.destroy(),this._viewshedShadowMap&&this._viewshedShadowMap.destroy(),Cesium.destroyObject(this)}}class kD{constructor(t,n,i){this._color=t,this._height=n,this._base=Cesium.defaultValue(i,0)}getHeight(){return this._height}getBase(){return this._base}getStartTime(){return this._start}getStopTime(){return this._stop}setRange(t,n){this._start=t,this._stop=n}render(t){let n="";const{JulianDate:i}=Cesium;if(this._start&&this._stop&&this._color){const r=i.secondsDifference(this._start,t.epochJulian);let a=Math.round(t.timeBarWidth*t.getAlpha(r));const s=i.secondsDifference(this._stop,t.epochJulian);let l=Math.round(t.timeBarWidth*t.getAlpha(s))-a;a<0&&(l+=a,a=0),a+l>t.timeBarWidth&&(l=t.timeBarWidth-a),l>0&&(n=`<span class="cesium-timeline-highlight" style="left: ${a.toString()}px; width: ${l.toString()}px; bottom: ${this._base.toString()}px; height: ${this._height}px; background-color: ${this._color};"></span>`)}return n}}class zD{constructor(t,n,i,r){const{Color:a}=Cesium;this.interval=t,this.height=n,this.color=i||new a(.5,.5,.5,1),this.backgroundColor=r||new a(0,0,0,0)}render(t,n){const{JulianDate:i,defined:r}=Cesium,a=this.interval.start,s=this.interval.stop,l=n.startJulian,d=i.addSeconds(n.startJulian,n.duration,new i);if(i.lessThan(a,l)&&i.greaterThan(s,d))t.fillStyle=this.color.toCssColorString(),t.fillRect(0,n.y,n.timeBarWidth,this.height);else if(i.lessThanOrEquals(a,d)&&i.greaterThanOrEquals(s,l)){let h,m,p;for(h=0;h<n.timeBarWidth;++h){const g=i.addSeconds(n.startJulian,h/n.timeBarWidth*n.duration,new i);!r(m)&&i.greaterThanOrEquals(g,a)?m=h:!r(p)&&i.greaterThanOrEquals(g,s)&&(p=h)}t.fillStyle=this.backgroundColor.toCssColorString(),t.fillRect(0,n.y,n.timeBarWidth,this.height),r(m)&&(r(p)||(p=n.timeBarWidth),t.fillStyle=this.color.toCssColorString(),t.fillRect(m,n.y,Math.max(p-m,1),this.height))}}}let Bm=1e12;const Ii={none:0,scrub:1,slide:2,zoom:3,touchOnly:4},kn={none:0,scrub:1,slideZoom:2,singleTap:3,ignore:4},Kr=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800,1296e3,2592e3,5184e3,7776e3,15552e3,31536e3,63072e3,126144e3,15768e4,31536e4,63072e4,126144e4,15768e5,31536e5,63072e5,126144e5,15768e6,31536e6],GD=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];class Hw{constructor(t,n){this.smallestTicInPixels=7;const{defined:i,DeveloperError:r}=Cesium;if(!i(t))throw new r("container is required.");if(!i(n))throw new r("clock is required.");t=Cw(t);const a=t.ownerDocument;this.container=t;const s=a.createElement("div");s.className="cesium-timeline-main",t.appendChild(s),this._topDiv=s,this._endJulian=void 0,this._epochJulian=void 0,this._lastXPos=void 0,this._scrubElement=void 0,this._startJulian=void 0,this._timeBarSecondsSpan=void 0,this._clock=n,this._scrubJulian=n.currentTime,this._mainTicSpan=-1,this._mouseMode=Ii.none,this._touchMode=kn.none,this._touchState={centerX:0,spanX:0},this._mouseX=0,this._timelineDrag=0,this._timelineDragLocation=void 0,this._lastHeight=void 0,this._lastWidth=void 0,this._topDiv.innerHTML='<div class="cesium-timeline-bar"></div><div class="cesium-timeline-trackContainer"><canvas class="cesium-timeline-tracks" width="10" height="1"></canvas></div><div class="cesium-timeline-needle"></div><span class="cesium-timeline-ruler"></span>',this._timeBarEle=this._topDiv.childNodes[0],this._trackContainer=this._topDiv.childNodes[1],this._trackListEle=this._topDiv.childNodes[1].childNodes[0],this._needleEle=this._topDiv.childNodes[2],this._rulerEle=this._topDiv.childNodes[3],this._context=this._trackListEle.getContext("2d"),this._trackList=[],this._highlightRanges=[],this.zoomTo(n.startTime,n.stopTime),this._onMouseDown=UD(this),this._onMouseUp=HD(this),this._onMouseMove=WD(this),this._onMouseWheel=qD(this),this._onTouchStart=ZD(this),this._onTouchMove=JD(this),this._onTouchEnd=QD(this);const l=this._timeBarEle;a.addEventListener("mouseup",this._onMouseUp,!1),a.addEventListener("mousemove",this._onMouseMove,!1),l.addEventListener("mousedown",this._onMouseDown,!1),l.addEventListener("DOMMouseScroll",this._onMouseWheel,!1),l.addEventListener("mousewheel",this._onMouseWheel,!1),l.addEventListener("touchstart",this._onTouchStart,!1),l.addEventListener("touchmove",this._onTouchMove,!1),l.addEventListener("touchend",this._onTouchEnd,!1),l.addEventListener("touchcancel",this._onTouchEnd,!1),this._topDiv.oncontextmenu=function(){return!1},n.onTick.addEventListener(this.updateFromClock,this),this.updateFromClock()}addEventListener(t,n,i){this._topDiv.addEventListener(t,n,i)}removeEventListener(t,n,i){this._topDiv.removeEventListener(t,n,i)}isDestroyed(){return!1}destroy(){this._clock.onTick.removeEventListener(this.updateFromClock,this);const t=this.container.ownerDocument;t.removeEventListener("mouseup",this._onMouseUp,!1),t.removeEventListener("mousemove",this._onMouseMove,!1);const n=this._timeBarEle;n.removeEventListener("mousedown",this._onMouseDown,!1),n.removeEventListener("DOMMouseScroll",this._onMouseWheel,!1),n.removeEventListener("mousewheel",this._onMouseWheel,!1),n.removeEventListener("touchstart",this._onTouchStart,!1),n.removeEventListener("touchmove",this._onTouchMove,!1),n.removeEventListener("touchend",this._onTouchEnd,!1),n.removeEventListener("touchcancel",this._onTouchEnd,!1),this.container.removeChild(this._topDiv),Cesium.destroyObject(this)}addHighlightRange(t,n,i){const r=new kD(t,n,i);return this._highlightRanges.push(r),this.resize(),r}addTrack(t,n,i,r){const a=new zD(t,n,i,r);return this._trackList.push(a),this._lastHeight=void 0,this.resize(),a}resize(){const t=this.container.clientWidth,n=this.container.clientHeight;if(t===this._lastWidth&&n===this._lastHeight)return;this._trackContainer.style.height=`${n}px`;let i=1;this._trackList.forEach(function(r){i+=r.height}),this._trackListEle.style.height=`${i.toString()}px`,this._trackListEle.width=this._trackListEle.clientWidth,this._trackListEle.height=i,this._makeTics(),this._lastXPos=void 0,this._lastWidth=t,this._lastHeight=n}zoomTo(t,n){const{defined:i,JulianDate:r,DeveloperError:a,ClockRange:s}=Cesium;if(!i(t))throw new a("startTime is required.");if(!i(n))throw new a("stopTime is required");if(r.lessThanOrEquals(n,t))throw new a("Start time must come before end time.");if(this._startJulian=t,this._endJulian=n,this._timeBarSecondsSpan=r.secondsDifference(n,t),this._clock&&this._clock.clockRange!==s.UNBOUNDED){const d=this._clock.startTime,h=this._clock.stopTime,m=r.secondsDifference(h,d),p=r.secondsDifference(d,this._startJulian),g=r.secondsDifference(h,this._endJulian);this._timeBarSecondsSpan>=m?(this._timeBarSecondsSpan=m,this._startJulian=this._clock.startTime,this._endJulian=this._clock.stopTime):p>0?(this._endJulian=r.addSeconds(this._endJulian,p,new r),this._startJulian=d,this._timeBarSecondsSpan=r.secondsDifference(this._endJulian,this._startJulian)):g<0&&(this._startJulian=r.addSeconds(this._startJulian,g,new r),this._endJulian=h,this._timeBarSecondsSpan=r.secondsDifference(this._endJulian,this._startJulian))}this._makeTics();const l=new Event("setzoom",{bubbles:!0,cancelable:!0,composed:!0});l.startJulian=this._startJulian,l.endJulian=this._endJulian,l.epochJulian=this._epochJulian,l.totalSpan=this._timeBarSecondsSpan,l.mainTicSpan=this._mainTicSpan,this._topDiv.dispatchEvent(l)}updateFromClock(){const{defined:t,JulianDate:n}=Cesium;this._scrubJulian=this._clock.currentTime;const i=this._scrubElement;if(t(this._scrubElement)){const r=n.secondsDifference(this._scrubJulian,this._startJulian),a=Math.round(r*this._topDiv.clientWidth/this._timeBarSecondsSpan);this._lastXPos!==a&&(this._lastXPos=a,i.style.left=`${a-8}px`,this._needleEle.style.left=`${a}px`)}t(this._timelineDragLocation)&&(this._setTimeBarTime(this._timelineDragLocation,this._timelineDragLocation*this._timeBarSecondsSpan/this._topDiv.clientWidth),this.zoomTo(n.addSeconds(this._startJulian,this._timelineDrag,new n),n.addSeconds(this._endJulian,this._timelineDrag,new n)))}_setTimeBarTime(t,n){const{JulianDate:i}=Cesium;if(t=Math.round(t),this._scrubJulian=i.addSeconds(this._startJulian,n,new i),this._scrubElement){const a=t-8;this._scrubElement.style.left=`${a.toString()}px`,this._needleEle.style.left=`${t.toString()}px`}const r=new Event("settime",{bubbles:!0,cancelable:!0,composed:!0});r.clientX=t,r.timeSeconds=n,r.timeJulian=this._scrubJulian,r.clock=this._clock,this._topDiv.dispatchEvent(r)}zoomFrom(t){const{JulianDate:n}=Cesium;let i=n.secondsDifference(this._scrubJulian,this._startJulian);t>1||i<0||i>this._timeBarSecondsSpan?i=this._timeBarSecondsSpan*.5:i+=i-this._timeBarSecondsSpan*.5;const r=this._timeBarSecondsSpan-i;this.zoomTo(n.addSeconds(this._startJulian,i-i*t,new n),n.addSeconds(this._endJulian,r*t-r,new n))}makeLabel(t){const{JulianDate:n}=Cesium,i=n.toGregorianDate(t),r=i.millisecond;let a=" UTC";if(r>0&&this._timeBarSecondsSpan<3600){for(a=Math.floor(r).toString();a.length<3;)a=`0${a}`;a=`.${a}`}return`${GD[i.month-1]} ${i.day} ${i.year} ${Rm(i.hour)}:${Rm(i.minute)}:${Rm(i.second)}${a}`}_makeTics(){const{JulianDate:t}=Cesium,n=this._timeBarEle,i=t.secondsDifference(this._scrubJulian,this._startJulian),r=Math.round(i*this._topDiv.clientWidth/this._timeBarSecondsSpan),a=r-8;let s;const l=this;this._needleEle.style.left=`${r.toString()}px`;let d="";const h=.01,m=31536e6,p=1e-10;let g=0,v=this._timeBarSecondsSpan;v<h?(v=h,this._timeBarSecondsSpan=h,this._endJulian=t.addSeconds(this._startJulian,h,new t)):v>m&&(v=m,this._timeBarSecondsSpan=m,this._endJulian=t.addSeconds(this._startJulian,m,new t));let b=this._timeBarEle.clientWidth;b<10&&(b=10);const P=this._startJulian,w=Math.min(v/b*1e-5,.4);let S;const T=t.toGregorianDate(P);v>31536e4?S=t.fromDate(new Date(Date.UTC(Math.floor(T.year/100)*100,0))):v>31536e3?S=t.fromDate(new Date(Date.UTC(Math.floor(T.year/10)*10,0))):v>86400?S=t.fromDate(new Date(Date.UTC(T.year,0))):S=t.fromDate(new Date(Date.UTC(T.year,T.month,T.day)));const _=t.secondsDifference(this._startJulian,t.addSeconds(S,w,new t));let M=_+v;this._epochJulian=S;function A(H){return Math.floor(_/H)*H}function D(H,ne){return Math.ceil(H/ne+.5)*ne}function z(H){return(H-_)/v}function $(H,ne){return H-ne*Math.round(H/ne)}this._rulerEle.innerHTML=this.makeLabel(t.addSeconds(this._endJulian,-h,new t));let L=this._rulerEle.offsetWidth+20;L<30&&(L=180);const U=g;g-=p;const Z={startTime:_,startJulian:P,epochJulian:S,duration:v,timeBarWidth:b,getAlpha:z};this._highlightRanges.forEach(function(H){d+=H.render(Z)});let W=0,y=0,C=0,x=L/b;x>1&&(x=1),x*=this._timeBarSecondsSpan;let B=-1,O=-1;const I=Kr.length;let V;for(V=0;V<I;++V){const H=Kr[V];if(++B,W=H,H>x&&H>g)break;O<0&&b*(H/this._timeBarSecondsSpan)>=this.smallestTicInPixels&&(O=B)}if(B>0){for(;B>0;)if(--B,Math.abs($(W,Kr[B]))<1e-5){Kr[B]>=g&&(y=Kr[B]);break}if(O>=0)for(;O<B;){if(Math.abs($(y,Kr[O]))<1e-5&&Kr[O]>=g){C=Kr[O];break}++O}}g=U,g>p&&C<1e-5&&Math.abs(g-W)>p&&(C=g,g<=W+p&&(y=0));let j=-999999,N;if(b*(C/this._timeBarSecondsSpan)>=3)for(s=A(C);s<=M;s=D(s,C))d+=`<span class="cesium-timeline-ticTiny" style="left: ${Math.round(b*z(s)).toString()}px;"></span>`;if(b*(y/this._timeBarSecondsSpan)>=3)for(s=A(y);s<=M;s=D(s,y))d+=`<span class="cesium-timeline-ticSub" style="left: ${Math.round(b*z(s)).toString()}px;"></span>`;if(b*(W/this._timeBarSecondsSpan)>=2){this._mainTicSpan=W,M+=W,s=A(W);const H=t.computeTaiMinusUtc(S);for(;s<=M;){let ne=t.addSeconds(P,s-_,new t);if(W>2.1){const G=t.computeTaiMinusUtc(ne);Math.abs(G-H)>.1&&(s+=G-H,ne=t.addSeconds(P,s-_,new t))}const ie=Math.round(b*z(s)),ee=this.makeLabel(ne);this._rulerEle.innerHTML=ee,N=this._rulerEle.offsetWidth,N<10&&(N=L);const Q=ie-(N/2-1);Q>j?(j=Q+N+5,d+=`<span class="cesium-timeline-ticMain" style="left: ${ie.toString()}px;"></span><span class="cesium-timeline-ticLabel" style="left: ${Q.toString()}px;">${ee}</span>`):d+=`<span class="cesium-timeline-ticSub" style="left: ${ie.toString()}px;"></span>`,s=D(s,W)}}else this._mainTicSpan=-1;d+=`<span class="cesium-timeline-icon16" style="left:${a}px;bottom:0;background-position: 0 0;"></span>`,n.innerHTML=d,this._scrubElement=n.lastChild,this._context.clearRect(0,0,this._trackListEle.width,this._trackListEle.height),Z.y=0,this._trackList.forEach(function(H){H.render(l._context,Z),Z.y+=H.height})}}function UD(e){return function(t){e._mouseMode!==Ii.touchOnly&&(t.button===0?(e._mouseMode=Ii.scrub,e._scrubElement&&(e._scrubElement.style.backgroundPosition="-16px 0"),e._onMouseMove(t)):(e._mouseX=t.clientX,t.button===2?e._mouseMode=Ii.zoom:e._mouseMode=Ii.slide)),t.preventDefault()}}function HD(e){return function(t){e._mouseMode=Ii.none,e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0"),e._timelineDrag=0,e._timelineDragLocation=void 0}}function WD(e){return function(t){let n;if(e._mouseMode===Ii.scrub){t.preventDefault();const i=t.clientX-e._topDiv.getBoundingClientRect().left;i<0?(e._timelineDragLocation=0,e._timelineDrag=-.01*e._timeBarSecondsSpan):i>e._topDiv.clientWidth?(e._timelineDragLocation=e._topDiv.clientWidth,e._timelineDrag=.01*e._timeBarSecondsSpan):(e._timelineDragLocation=void 0,e._setTimeBarTime(i,i*e._timeBarSecondsSpan/e._topDiv.clientWidth))}else if(e._mouseMode===Ii.slide){if(n=e._mouseX-t.clientX,e._mouseX=t.clientX,n!==0){const{JulianDate:i}=Cesium,r=n*e._timeBarSecondsSpan/e._topDiv.clientWidth;e.zoomTo(i.addSeconds(e._startJulian,r,new i),i.addSeconds(e._endJulian,r,new i))}}else e._mouseMode===Ii.zoom&&(n=e._mouseX-t.clientX,e._mouseX=t.clientX,n!==0&&e.zoomFrom(Math.pow(1.01,n)))}}function qD(e){return function(t){let n=t.wheelDeltaY||t.wheelDelta||-t.detail;Bm=Math.max(Math.min(Math.abs(n),Bm),1),n/=Bm,e.zoomFrom(Math.pow(1.05,-n))}}function ZD(e){return function(t){const n=t.touches.length;let i,r;const a=e._topDiv.getBoundingClientRect().left;t.preventDefault(),e._mouseMode=Ii.touchOnly,n===1?(i=Cesium.JulianDate.secondsDifference(e._scrubJulian,e._startJulian),r=Math.round(i*e._topDiv.clientWidth/e._timeBarSecondsSpan+a),Math.abs(t.touches[0].clientX-r)<50?(e._touchMode=kn.scrub,e._scrubElement&&(e._scrubElement.style.backgroundPosition=n===1?"-16px 0":"0 0")):(e._touchMode=kn.singleTap,e._touchState.centerX=t.touches[0].clientX-a)):n===2?(e._touchMode=kn.slideZoom,e._touchState.centerX=(t.touches[0].clientX+t.touches[1].clientX)*.5-a,e._touchState.spanX=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):e._touchMode=kn.ignore}}function QD(e){return function(t){const n=t.touches.length,i=e._topDiv.getBoundingClientRect().left;e._touchMode===kn.singleTap?(e._touchMode=kn.scrub,e._onTouchMove(t)):e._touchMode===kn.scrub&&e._onTouchMove(t),e._mouseMode=Ii.touchOnly,n!==1?e._touchMode=n>0?kn.ignore:kn.none:e._touchMode===kn.slideZoom&&(e._touchState.centerX=t.touches[0].clientX-i),e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0")}}function JD(e){return function(t){let n,i,r,a,s,l,d=1;const h=e._topDiv.getBoundingClientRect().left;if(e._touchMode===kn.singleTap&&(e._touchMode=kn.slideZoom),e._mouseMode=Ii.touchOnly,e._touchMode===kn.scrub)t.preventDefault(),t.changedTouches.length===1&&(i=t.changedTouches[0].clientX-h,i>=0&&i<=e._topDiv.clientWidth&&e._setTimeBarTime(i,i*e._timeBarSecondsSpan/e._topDiv.clientWidth));else if(e._touchMode===kn.slideZoom){r=t.touches.length,r===2?(a=(t.touches[0].clientX+t.touches[1].clientX)*.5-h,s=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):r===1&&(a=t.touches[0].clientX-h,s=0);const{defined:m,JulianDate:p}=Cesium;m(a)&&(s>0&&e._touchState.spanX>0?(d=e._touchState.spanX/s,l=p.addSeconds(e._startJulian,(e._touchState.centerX*e._timeBarSecondsSpan-a*e._timeBarSecondsSpan*d)/e._topDiv.clientWidth,new p)):(n=e._touchState.centerX-a,l=p.addSeconds(e._startJulian,n*e._timeBarSecondsSpan/e._topDiv.clientWidth,new p)),e.zoomTo(l,p.addSeconds(l,e._timeBarSecondsSpan*d,new p)),e._touchState.centerX=a,e._touchState.spanX=s)}}}function Rm(e){return e<10?`0${e.toString()}`:e.toString()}const Ww=[Im,Dm,Kd];function XD(){return{invokeExtensions:e=>{Ww.forEach(t=>{t.extend(e)})},revokeExtensions:e=>{Ww.forEach(t=>{t.revoke(e)})}}}const Vm=AD;function YD(e,t,n){let i,r;const a=new Promise((O,I)=>{i=O,r=I}),s=u.ref(),l=u.ref(!1),d=AC(),{emit:h}=t,m=Vl(),p=ds(n);n.mounted=!1,n.vcMitt=d,n.cesiumClass="Viewer",n.children=[];const g=hc(e,n),v=u.reactive({toolbarContainerRC:void 0,timelineContainerRC:void 0,animationContainerRC:void 0,bottomContainerRC:void 0});let b=[];p.debug("viewer creating");const{t:P}=Qt(),{invokeExtensions:w,revokeExtensions:S}=XD();u.watch(()=>e.selectionIndicator,O=>{const{viewer:I,viewerElement:V}=n,{defined:j,SelectionIndicator:N}=Cesium;let H;if(j(I.selectionIndicator)&&!I.selectionIndicator.isDestroyed()&&!O)H=I.selectionIndicator.container,V==null||V.removeChild(H),I.selectionIndicator.destroy(),I._selectionIndicator=void 0;else if(!j(I.selectionIndicator)||I.selectionIndicator.isDestroyed()){H=document.createElement("div"),H.className="cesium-viewer-selectionIndicatorContainer",V==null||V.appendChild(H);const ne=new N(H,I.scene);I._selectionIndicator=ne}I.viewerWidgetResized.raiseEvent({type:"selectionIndicator",status:O?"added":"removed",target:H})}),u.watch(()=>e.infoBox,O=>{var I,V;const{viewer:j,viewerElement:N}=n,{defined:H,InfoBox:ne}=Cesium,ie=["cameraClicked","closeClicked"];let ee;if(H(j.infoBox)&&!j.infoBox.isDestroyed()&&!O){const Q=j.infoBox.viewModel;Q&&g.bindEvents(Q,ie,!1),ee=j.infoBox.container,N==null||N.removeChild(ee),j.infoBox.destroy(),j._infoBox=void 0}else if(!H(j.infoBox)||j.infoBox.isDestroyed()){ee=document.createElement("div"),ee.className="cesium-viewer-infoBoxContainer",N==null||N.appendChild(ee);const Q=new ne(ee),G=Q.viewModel;j._onInfoBoxCameraClicked&&((I=j._eventHelper)==null||I.add(G.cameraClicked,j._onInfoBoxCameraClicked,j)),j._onInfoBoxClockClicked&&((V=j._eventHelper)==null||V.add(G.closeClicked,j._onInfoBoxClockClicked,j)),G&&g.bindEvents(G,ie,!0),j._infoBox=Q}j.forceResize(),j.viewerWidgetResized.raiseEvent({type:"infoBox",status:O?"added":"removed",target:ee})}),u.watch(()=>e.geocoder,O=>{var I;const{viewer:V}=n,j=V._toolbar,{defined:N,Geocoder:H}=Cesium;let ne;if(N(V.geocoder)&&!V.geocoder.isDestroyed()&&!O)ne=V.geocoder.container,j==null||j.removeChild(ne),V.geocoder.destroy(),V._geocoder=void 0;else if(!N(V.geocoder)||V.geocoder.isDestroyed()){ne=document.createElement("div"),ne.className="cesium-viewer-geocoderContainer",j==null||j.appendChild(ne);const ie=new H({container:ne,geocoderServices:N(e.geocoder)&&typeof e.geocoder!="boolean"?Array.isArray(e.geocoder)?e.geocoder:[e.geocoder]:void 0,scene:V.scene});V._clearObjects&&((I=V._eventHelper)==null||I.add(ie.viewModel.search.beforeExecute,V._clearObjects,V)),V._geocoder=ie,x(j)}V.viewerWidgetResized.raiseEvent({type:"geocoder",status:O?"added":"removed",target:ne})}),u.watch(()=>e.homeButton,O=>{var I,V;const{viewer:j}=n,N=j._toolbar,{defined:H,HomeButton:ne}=Cesium;if(H(j.homeButton)&&!j.homeButton.isDestroyed()&&!O)j.homeButton.destroy(),j._homeButton=void 0;else if(!H(j.homeButton)||j.homeButton.isDestroyed()){const ie=new ne(N,j.scene);H(j.geocoder)&&((I=j._eventHelper)==null||I.add(ie.viewModel.command.afterExecute,function(){const ee=j.geocoder.viewModel;ee.searchText="",ee.isSearchInProgress&&ee.search()})),j._clearTrackedObject&&((V=j._eventHelper)==null||V.add(ie.viewModel.command.beforeExecute,j._clearTrackedObject,j)),j._homeButton=ie,x(N)}j.viewerWidgetResized.raiseEvent({type:"homeButton",status:O?"added":"removed",target:N})}),u.watch(()=>e.sceneModePicker,O=>{const{viewer:I}=n,V=I._toolbar,{defined:j,DeveloperError:N,SceneModePicker:H}=Cesium;if(j(I.sceneModePicker)&&!I.sceneModePicker.isDestroyed()&&!O)I.sceneModePicker.destroy(),I._sceneModePicker=void 0;else if(!j(I.sceneModePicker)||I.sceneModePicker.isDestroyed()){if(e.sceneModePicker&&e.scene3DOnly)throw new N("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(!e.scene3DOnly&&e.sceneModePicker){const ne=new H(V,I.scene);I._sceneModePicker=ne,x(V)}}I.viewerWidgetResized.raiseEvent({type:"sceneModePicker",status:O?"added":"removed",target:V})}),u.watch(()=>e.projectionPicker,O=>{const{viewer:I}=n,V=I._toolbar,{defined:j,ProjectionPicker:N}=Cesium;if(j(I.projectionPicker)&&!I.projectionPicker.isDestroyed()&&!O)I.projectionPicker.destroy(),I._projectionPicker=void 0;else if(!j(I.projectionPicker)||I.projectionPicker.isDestroyed()){const H=new N(V,I.scene);I._projectionPicker=H,x(V)}I.viewerWidgetResized.raiseEvent({type:"projectionPicker",status:O?"added":"removed",target:V})}),u.watch(()=>e.baseLayerPicker,async O=>{const{viewer:I}=n,V=I._toolbar,{defined:j,buildModuleUrl:N,DeveloperError:H,defaultValue:ne,createDefaultImageryProviderViewModels:ie,createDefaultTerrainProviderViewModels:ee,BaseLayerPicker:Q}=Cesium;if(j(I.baseLayerPicker)&&!I.baseLayerPicker.isDestroyed()&&!O){I.baseLayerPicker.destroy(),I._baseLayerPicker=void 0,I.imageryLayers.remove(I.imageryLayers.get(I.imageryLayers.length-1));const G=N("Assets/Textures/NaturalEarthII"),J=I.imageryLayers.addImageryProvider(qt(Cesium.VERSION,"1.104")?await Cesium.TileMapServiceImageryProvider.fromUrl(G):new Cesium.TileMapServiceImageryProvider({url:G}));I.imageryLayers.lowerToBottom(J)}else if(!j(I.baseLayerPicker)||I.baseLayerPicker.isDestroyed()){const G=(!Cesium.defined(I.scene.globe)||e.globe!==!1)&&(!Cesium.defined(I.baseLayerPicker)||e.baseLayerPicker!==!1);if(G&&j(e.imageryProvider))throw new H(`options.imageryProvider is not available when using the BaseLayerPicker widget.
        Either specify options.selectedImageryProviderViewModel instead or set options.baseLayerPicker to false.`);if(!G&&j(e.selectedImageryProviderViewModel))throw new H(`options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget.
        Either specify options.imageryProvider instead or set options.baseLayerPicker to true.`);if(G&&j(e.terrainProvider))throw new H(`options.terrainProvider is not available when using the BaseLayerPicker widget.
        Either specify options.selectedTerrainProviderViewModel instead or set options.baseLayerPicker to false.`);if(!G&&j(e.selectedTerrainProviderViewModel))throw new H(`options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget.
        Either specify options.terrainProvider instead or set options.baseLayerPicker to true.`);if(G){const J=ne(e.imageryProviderViewModels,ie()),oe=ne(e.terrainProviderViewModels,ee()),Y=new Q(V,{globe:I.scene.globe,imageryProviderViewModels:J,selectedImageryProviderViewModel:J[0],terrainProviderViewModels:oe,selectedTerrainProviderViewModel:oe[0]}),X=V==null?void 0:V.getElementsByClassName("cesium-baseLayerPicker-dropDown"),se=X==null?void 0:X[0];I._baseLayerPickerDropDown=se,I._baseLayerPicker=Y,I.imageryLayers.raiseToTop(I.imageryLayers.get(0)),x(V)}}I.viewerWidgetResized.raiseEvent({type:"baseLayerPicker",status:O?"added":"removed",target:V})}),u.watch(()=>e.navigationHelpButton,O=>{const{viewer:I}=n,V=I._toolbar,{defined:j,defaultValue:N,NavigationHelpButton:H}=Cesium;if(j(I.navigationHelpButton)&&!I.navigationHelpButton.isDestroyed()&&!O)I.navigationHelpButton.destroy(),I._navigationHelpButton=void 0;else if(!j(I.navigationHelpButton)||I.navigationHelpButton.isDestroyed()){let ne=!0;try{if(j(window.localStorage)){const ee=window.localStorage.getItem("cesium-hasSeenNavHelp");j(ee)&&ee?ne=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch(ee){}const ie=new H({container:V,instructionsInitiallyVisible:N(e.navigationInstructionsInitiallyVisible,ne)});I._navigationHelpButton=ie,x(V)}I.viewerWidgetResized.raiseEvent({type:"navigationHelpButton",status:O?"added":"removed",target:V})}),u.watch(()=>e.animation,O=>{const{viewer:I,viewerElement:V}=n,{defined:j,Animation:N,AnimationViewModel:H}=Cesium;let ne;if(j(I.animation)&&!I.animation.isDestroyed()&&!O)ne=I.animation.container,V==null||V.removeChild(ne),I.animation.destroy(),I._animation=void 0;else if(!j(I.animation)||I.animation.isDestroyed()){ne=document.createElement("div"),ne.className="cesium-viewer-animationContainer",V==null||V.appendChild(ne);const ie=new N(ne,new H(I.clockViewModel));ie.viewModel.dateFormatter=Z,ie.viewModel.timeFormatter=W,I._animation=ie}I.forceResize(),I.viewerWidgetResized.raiseEvent({type:"animation",status:O?"added":"removed",target:ne})}),u.watch(()=>e.timeline,O=>{var I;const{viewer:V,viewerElement:j}=n,{defined:N,Timeline:H}=Cesium;let ne;if(N(V.timeline)&&!V.timeline.isDestroyed()&&!O)ne=V.timeline.container,j==null||j.removeChild(ne),V.timeline.destroy(),V._timeline=void 0;else if(!N(V.timeline)||V.timeline.isDestroyed()){ne=document.createElement("div"),ne.className="cesium-viewer-timelineContainer",j==null||j.appendChild(ne);const ie=new H(ne,V.clock);ie.makeLabel=ee=>Z(ee),(I=ie.addEventListener)==null||I.call(ie,"settime",y,!1),ie.zoomTo(V.clock.startTime,V.clock.stopTime),V._timeline=ie}V.forceResize(),V.viewerWidgetResized.raiseEvent({type:"timeline",status:O?"added":"removed",target:ne})}),u.watch(()=>e.fullscreenButton,O=>{const{viewer:I,viewerElement:V}=n,{defined:j,FullscreenButton:N}=Cesium;let H;if(j(I.fullscreenButton)&&!I.fullscreenButton.isDestroyed()&&!O)H=I.fullscreenButton.container,V==null||V.removeChild(H),I.fullscreenButton.destroy(),I._fullscreenButton=void 0;else if(!j(I.fullscreenButton)||I.fullscreenButton.isDestroyed()){H=document.createElement("div"),H.className="cesium-viewer-fullscreenContainer",V==null||V.appendChild(H);const ne=new N(H,V);I._fullscreenButton=ne}I.forceResize(),I.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:O?"added":"removed",target:H})}),u.watch(()=>e.fullscreenElement,O=>{const{viewer:I}=n,{defined:V}=Cesium;V(I.fullscreenButton)&&V(O)&&(I.fullscreenButton.viewModel.fullscreenElement=O)}),u.watch(()=>e.vrButton,O=>{const{viewer:I,viewerElement:V}=n,{defined:j,VRButton:N}=Cesium;let H;if(j(I.vrButton)&&!I.vrButton.isDestroyed()&&!O)H=I.vrButton.container,V==null||V.removeChild(H),I.vrButton.destroy(),I._vrButton=void 0;else if(!j(I.vrButton)||I.vrButton.isDestroyed()){H=document.createElement("div"),H.className="cesium-viewer-vrContainer",V==null||V.appendChild(H);const ne=new N(H,I.scene,V),ie=ne.viewModel.command;ne.viewModel._command=function(ee){ie(),C(I,ee.isVRMode)},I._vrButton=ne}I.forceResize(),I.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:O?"added":"removed",target:H})}),u.watch(()=>e.useDefaultRenderLoop,O=>{n.viewer.useDefaultRenderLoop=O}),u.watch(()=>e.sceneMode,O=>{const{SceneMode:I}=Cesium;(I.COLUMBUS_VIEW===O||I.MORPHING===O||I.SCENE2D===O||I.SCENE3D===O)&&(n.viewer.scene.mode=O)}),u.watch(()=>e.shouldAnimate,O=>{n.viewer.clock.shouldAnimate=O}),u.watch(()=>e.terrainExaggeration,O=>{n.viewer._terrainExaggeration=O}),u.watch(()=>e.shadows,O=>{n.viewer.scene.shadowMap.enabled=O}),u.watch(()=>e.terrainProvider,O=>{O&&(n.viewer.terrainProvider=O)}),u.watch(()=>e.camera,O=>{ah(n.viewer,O)},{deep:!0}),u.watch(()=>e.imageryProvider,(O,I)=>{const{viewer:V}=n,{defined:j}=Cesium;if(j(O)){for(let N=0;N<V.imageryLayers.length;N++)V.imageryLayers.get(N).imageryProvider===I&&V.imageryLayers.remove(V.imageryLayers[N]);O&&V.imageryLayers.addImageryProvider(O)}}),u.watch(()=>e.showCredit,O=>{const{viewer:I}=n;I.cesiumWidget.creditContainer.style.display=O?"inline":"none",I.viewerWidgetResized.raiseEvent({type:"credit",status:O?"added":"removed",target:I.cesiumWidget.creditContainer})}),u.watch(()=>e.debugShowFramesPerSecond,O=>{const{viewer:I}=n;I.scene.debugShowFramesPerSecond=O});const T=async function(){p.debug("beforeLoad - viewer"),ze(n,"beforeLoad")&&h("beforeLoad",n),m.value.__scriptPromise=m.value.__scriptPromise||D(),await m.value.__scriptPromise},_=async function(){var O,I,V;if(p.debug("loading-viewer"),n.mounted||(await T(),typeof Cesium=="undefined"))return!1;const{Ion:j,buildModuleUrl:N,ImageryLayer:H,TileMapServiceImageryProvider:ne,Viewer:ie,defined:ee,Math:Q,Event:G}=Cesium,J=e.accessToken?e.accessToken:m.value.accessToken;j.defaultAccessToken=J;const oe=N("Assets/Textures/NaturalEarthII"),Y={};e&&Object.keys(e).forEach(re=>{e[re]===void 0||e[re]===null||(Y[re]=e[re])}),Y.fullscreenElement=us(Y.fullscreenElement)?Me(s):Y.fullscreenElement,qt(Cesium.VERSION,"1.104")?Y.baseLayer=us(Y.baseLayer)&&Y.baseLayer!==!1?H.fromProviderAsync(ne.fromUrl(oe),{}):Y.baseLayer:Y.imageryProvider=us(Y.imageryProvider)?new ne({url:oe}):Y.imageryProvider;let X;e.viewerCreator?X=e.viewerCreator(n,Me(s),Y):globalThis.mars3d?(n.map=new mars3d.Map(Me(s).id,{scene:Y,control:Y}),X=(O=n.map)==null?void 0:O._viewer):globalThis.DC?(n.dcViewer=new DC.Viewer(Me(s).id,Y),X=(I=n.dcViewer)==null?void 0:I.delegate):globalThis.XE?(n.earth=new globalThis.XE.Earth(Me(s),Y),X=(V=n.earth)==null?void 0:V.czm.viewer):X=new ie(Me(s),Y),w(X),n.Cesium=Cesium,n.viewer=X,n.viewerElement=X._element,n.mounted=!0,qt(Cesium.VERSION,"1.83")&&(qt(Cesium.VERSION,"1.116")?X.scene.verticalExaggeration=Y.verticalExaggeration||Y.terrainExaggeration:X.scene.globe.terrainExaggeration=Y.verticalExaggeration||Y.terrainExaggeration),ee(Y.camera)&&ah(X,Y.camera),ze(n,"update:camera")&&X.camera.changed.addEventListener(()=>{const re=X.camera.positionCartographic;let de;dt(Y.camera.position,"lng")?de={position:{lng:Q.toDegrees(re.longitude),lat:Q.toDegrees(re.latitude),height:re.height},heading:Q.toDegrees(X.camera.heading||360),pitch:Q.toDegrees(X.camera.pitch||-90),roll:Q.toDegrees(X.camera.roll||0)}:de={position:{x:X.camera.position.x,y:X.camera.position.y,z:X.camera.position.z},heading:X.camera.heading||2*Math.PI,pitch:X.camera.pitch||-Math.PI/2,roll:X.camera.roll||0},h("update:camera",de)}),ee(X.animation)&&(X.animation.viewModel.dateFormatter=Z,X.animation.viewModel.timeFormatter=W),ee(X.timeline)&&(X.timeline.makeLabel=re=>Z(re),X.timeline.zoomTo(X.clock.startTime,X.clock.stopTime)),!e.showCredit&&(X.cesiumWidget.creditContainer.style.display="none"),e.debugShowFramesPerSecond&&(X.scene.debugShowFramesPerSecond=!0),X.viewerWidgetResized=X.viewerWidgetResized||new G,X.viewerWidgetResized.addEventListener(L),X.imageryLayers.layerAdded.addEventListener(U),g.registerEvents(!0);const se={Cesium,viewer:X,vm:n};return globalThis.XE?Object.assign(se,{earth:n.earth}):globalThis.mars3d?Object.assign(se,{map:n.map}):globalThis.DC&&Object.assign(se,{dcViewer:n.dcViewer}),ze(n,"ready")&&h("ready",se),d==null||d.emit("ready",se),u.nextTick(()=>{X.resize(),L({type:"viewer",status:"added",target:X.container}),l.value=!0}),p.debug("loaded-viewer"),Object.assign(n.proxy,{cesiumObject:X}),se},M=async function(){if(!n.mounted)return!1;p.debug("viewer---unloading");let O;m.value.__viewerUnloadingPromise=new Promise((ne,ie)=>{O=ne});for(let ne=0;ne<n.children.length;ne++)await n.children[ne].proxy.unload();n.children.length=0;const{viewer:I,earth:V,map:j,dcViewer:N}=n;globalThis.Cesium&&(I.imageryLayers.layerAdded.removeEventListener(U),g.registerEvents(!1));const{removeCesiumScript:H}=e;if(I._vcPickScreenSpaceEventHandler&&I._vcPickScreenSpaceEventHandler.destroy(),I._vcViewerScreenSpaceEventHandler&&I._vcViewerScreenSpaceEventHandler.destroy(),I._vcPickScreenSpaceEventHandler=void 0,I._vcViewerScreenSpaceEventHandler=void 0,H&&S(I),delete n.appContext.config.globalProperties.$VueCesium[I.container.id],globalThis.XE?V&&V.destroy():globalThis.mars3d?j&&j.destroy():globalThis.DC?N&&N.destroy():I&&I.destroy(),n.viewer=void 0,n.mounted=!1,H&&globalThis.Cesium){const ne=document.getElementsByTagName("script"),ie=[];for(const Q of ne)Q.src.indexOf("/Cesium.js")>-1&&ie.push(Q),Q.src.indexOf("/Workers/zlib.min.js")>-1&&ie.push(Q),globalThis.XE&&(Q.src.indexOf("/rxjs.umd.min.js")>-1&&ie.push(Q),Q.src.indexOf("/XbsjCesium.js")>-1&&ie.push(Q),Q.src.indexOf("/viewerCesiumNavigationMixin.js")>-1&&ie.push(Q),Q.src.indexOf("/XbsjEarth.js")>-1&&ie.push(Q)),b.includes(Q.src)&&!ie.includes(Q)&&ie.push(Q);const ee=document.getElementsByTagName("link");for(const Q of ee)Q.href.includes("Widgets/widgets.css")&&!ie.includes(Q)&&ie.push(Q),b.includes(Q.href)&&!ie.includes(Q)&&ie.push(Q);ie.forEach(Q=>{Q.parentNode&&Q.parentNode.removeChild(Q)}),globalThis.Cesium&&(globalThis.Cesium=void 0),globalThis.XbsjCesium&&(globalThis.XbsjCesium=void 0),globalThis.XbsjEarth&&(globalThis.XbsjEarth=void 0),globalThis.XE&&(globalThis.XE=void 0),globalThis.mars3d&&(globalThis.mars3d=void 0),globalThis.DC&&(globalThis.DC=void 0),globalThis.DcCore&&(globalThis.DcCore=void 0),m.value.__scriptPromise=void 0,b=[]}return n.isUnmounted=!1,ze(n,"destroyed")&&h("destroyed",n),d.emit("destroyed",n),p.debug("viewer---unloaded"),O(!0),m.value.__viewerUnloadingPromise=void 0,l.value=!1,!0},A=function(){return M().then(()=>_())},D=async function(){if(p.debug("getCesiumScript"),globalThis.Cesium)return Promise.resolve(globalThis.Cesium);{const O=e.cesiumPath?e.cesiumPath:m.value.cesiumPath,I=MC(O),V=m.value.mars3dConfig||e.mars3dConfig,j=m.value.dcConfig||e.dcConfig;if(V){const ne=V.libs||DD(),ie=(V.include||"mars3d").trim().split(","),ee={};for(let Q=0,G=ie.length;Q<G;Q++){const J=ie[Q];ee[J]||(ee[J]=!0,b.push(...ne[J]))}}else if(j){b.push(O),b.push(O.replace("dc.min.js","dc.min.css")),b.push(j.Cesium);const ne=MC(j.Cesium);b.push(`${ne}/Widgets/widgets.css`),j.turf&&b.push(j.turf),j.echarts&&b.push(j.echarts)}else O.includes("/dc.base.min.js")?(b.push(O),b.push(O.replace("/dc.base.min.js","/dc.core.min.js")),b.push(O.replace("/dc.base.min.js","/dc.core.min.js").replace("/dc.core.min.js","/dc.core.min.css"))):O.includes("/XbsjEarth.js")?b.push(O):(b.push(O),b.push(`${I}/Widgets/widgets.css`));const N=b;if(V||j){const ne=b.find(ie=>ie.includes("Cesium.js"));await z(ne),N.splice(N.indexOf(ne),1)}const H=[];return N.forEach(ne=>{new RegExp("\\.css").test(ne)?H.push($(ne)):H.push(z(ne))}),Promise.all(H).then(()=>{if(globalThis.Cesium)if(globalThis.DC){const ne={...j,Cesium:globalThis.Cesium};return j.echarts&&(ne.echarts=globalThis.echarts),j.turf&&(ne.turf=globalThis.turf),globalThis.DC.ready(ne).then(()=>(globalThis.Cesium=DC.getLib("Cesium"),ze(n,"cesiumReady")&&h("cesiumReady",globalThis.DC),globalThis.Cesium))}else return ze(n,"cesiumReady")&&h("cesiumReady",globalThis.Cesium),globalThis.Cesium;else{if(globalThis.XE)return globalThis.XE.ready().then(()=>(ze(n,"cesiumReady")&&h("cesiumReady",globalThis.Cesium),globalThis.Cesium));if(globalThis.DC)return qt(globalThis.DC.VERSION,"3.0.0")?globalThis.DC.ready({...j,Cesium:globalThis.Cesium}).then(()=>(globalThis.Cesium=DC.getLib("Cesium"),ze(n,"cesiumReady")&&h("cesiumReady",globalThis.DC),globalThis.Cesium)):(globalThis.DC.use(globalThis.DcCore.default||globalThis.DcCore),globalThis.DC.baseUrl=`${I}/resources/`,globalThis.DC.ready(()=>(globalThis.Cesium=DC.Namespace.Cesium,ze(n,"cesiumReady")&&h("cesiumReady",globalThis.DC),globalThis.Cesium)),globalThis.Cesium);r(new Error("VueCesium ERROR: Error loading CesiumJS!"))}})}},z=O=>{const I=document.createElement("script");return I.async=!1,I.src=O,document.body.appendChild(I),new Promise((V,j)=>{I.onload=()=>{V(!0)}})},$=O=>{const I=document.createElement("link");return I.rel="stylesheet",I.href=O,document.head.appendChild(I),new Promise((V,j)=>{I.onload=()=>{V(!0)}})},L=O=>{var I,V;const{viewer:j}=n,N=j._toolbar;N!==void 0&&getComputedStyle(N).visibility!=="hidden"&&getComputedStyle(N).display!=="none"?v.toolbarContainerRC=N.getBoundingClientRect():v.toolbarContainerRC=void 0;const H=j.bottomContainer;H!==void 0&&getComputedStyle(H).visibility!=="hidden"&&getComputedStyle(H).display!=="none"?v.bottomContainerRC=H.getBoundingClientRect():v.bottomContainerRC=void 0;const ne=(I=j.timeline)==null?void 0:I.container;ne!==void 0&&getComputedStyle(ne).visibility!=="hidden"&&getComputedStyle(ne).display!=="none"?v.timelineContainerRC=ne.getBoundingClientRect():v.timelineContainerRC=void 0;const ie=(V=j.animation)==null?void 0:V.container;ie!==void 0&&getComputedStyle(ie).visibility!=="hidden"&&getComputedStyle(ie).display!=="none"?v.animationContainerRC=ie.getBoundingClientRect():v.animationContainerRC=void 0,j.resize(),ze(n,"viewerWidgetResized")&&h("viewerWidgetResized",O)},U=O=>{const I=n.viewer,{autoSortImageryLayers:V}=e;I.baseLayerPicker&&I.imageryLayers.raiseToTop(O);const{defined:j}=Cesium;V&&(O.sortOrder=j(O.sortOrder)?O.sortOrder:9999,I.imageryLayers._layers.sort((N,H)=>N.sortOrder-H.sortOrder),I.imageryLayers._update())},Z=function(O,I,V){const{JulianDate:j}=Cesium;let N;if(e.UTCOffset){O=j.addMinutes(O,e.UTCOffset,new j);const ee=new Date().getTimezoneOffset()-e.UTCOffset;N=ee===0?"UTC":"UTC+"+-(ee/60)}else N=new Date().getTimezoneOffset()===0?"UTC":"UTC+"+-(new Date().getTimezoneOffset()/60);const H=j.toDate(O),ne=H.toLocaleString(P("name"),{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).replace(/,/g,""),ie=H.toLocaleString(P("name"),{year:"numeric",month:"short",day:"numeric"}).replace(/,/g,"");return!V&&(I||H.getHours()+H.getMinutes()===0)?ie:(e.TZCode&&(N=e.TZCode),V?`${ne} ${N}`:`${ie} ${ne} ${N}`)},W=function(O,I){return Z(O,I,!0)},y=function(O){const I=O.clock;I.currentTime=O.timeJulian,I.shouldAnimate=!1},C=function(O,I){const V=O._geocoder,j=O._homeButton,N=O._sceneModePicker,H=O._projectionPicker,ne=O._baseLayerPicker,ie=O._animation,ee=O._timeline,Q=O._fullscreenButton,G=O._infoBox,J=O._selectionIndicator,oe=I?"hidden":"visible",{defined:Y}=Cesium;if(Y(V)&&(V.container.style.visibility=oe),Y(j)&&(j.container.style.visibility=oe),Y(N)&&(N.container.style.visibility=oe),Y(H)&&(H.container.style.visibility=oe),Y(ne)&&(ne.container.style.visibility=oe),Y(ie)&&(ie.container.style.visibility=oe),Y(ee)&&(ee.container.style.visibility=oe),Y(Q)&&Q.viewModel.isFullscreenEnabled&&(Q.container.style.visibility=oe),Y(G)&&(G.container.style.visibility=oe),Y(J)&&(J.container.style.visibility=oe),O._container){const X=I||!Y(Q)?0:Q.container.clientWidth;O._vrButton.container.style.right=X+"px",O.forceResize()}},x=function(O,I){Array.prototype.slice.call(O.children).forEach(j=>{switch(j.className){case"cesium-viewer-geocoderContainer":j.customIndex=1;break;case"cesium-button cesium-toolbar-button cesium-home-button":j.customIndex=2;break;case"cesium-sceneModePicker-wrapper cesium-toolbar-button":j.customIndex=3;break;case"cesium-projectionPicker-wrapper cesium-toolbar-button":j.customIndex=4;break;case"cesium-button cesium-toolbar-button":case"cesium-baseLayerPicker-dropDown":j.customIndex=5;break;case"cesium-navigationHelpButton-wrapper":j.customIndex=6;break}});const V=[];Array.prototype.slice.call(O.children).forEach(j=>{V.push(j)}),V.sort(function(j,N){return j.customIndex-N.customIndex});for(let j=0;j<V.length;j++)O.appendChild(V[j])},B=function(){return Eo({},{get layout(){return v},get vm(){return n},get Cesium(){return n.Cesium},get viewer(){return n.viewer},get dataSources(){var O;return(O=n.viewer)==null?void 0:O.dataSources},get entities(){var O;return(O=n.viewer)==null?void 0:O.entities},get imageryLayers(){var O;return(O=n.viewer)==null?void 0:O.imageryLayers},get primitives(){var O;return(O=n.viewer)==null?void 0:O.scene.primitives},get groundPrimitives(){var O;return(O=n.viewer)==null?void 0:O.scene.groundPrimitives},get postProcessStages(){var O;return(O=n.viewer)==null?void 0:O.postProcessStages},get creatingPromise(){return a},get mars3dMap(){return n.map},get dcViewer(){return n.dcViewer},get earth(){return n.earth}})};return Object.defineProperties(n,{cesiumObject:{enumerable:!0,get:()=>n.viewer}}),u.onMounted(async()=>{var O;try{p.debug("viewer - onMounted"),await((O=m.value)==null?void 0:O.__viewerUnloadingPromise),_().then(I=>{i(I)}).catch(I=>{h("unready",I),r(I)})}catch(I){h("unready",I),r(I)}}),u.onUnmounted(()=>{p.debug("viewer - onUnmounted"),M().then(()=>{d.all.clear()})}),{isReady:l,load:_,unload:M,reload:A,getServices:B,viewerRef:s,creatingPromise:a}}const qw=[{name:"imageryLayers",events:["layerAdded","layerMoved","layerRemoved","layerShownOrHidden"]},{name:"dataSources",events:["dataSourceAdded","dataSourceMoved","dataSourceRemoved"]},{name:"entities",events:["collectionChanged"]},{name:"scene",events:["morphComplete","morphStart","postRender","postUpdate","preRender","preUpdate","renderError","terrainProviderChanged"]},{name:"camera",events:["changed","moveEnd","moveStart"]},{name:"clock",events:["onStop","onTick"]},{name:"terrainProvider",events:["errorEvent"]},{name:["infoBox","viewModel"],events:["cameraClicked","closeClicked"]},{name:["scene","globe"],events:["imageryLayersUpdatedEvent","terrainProviderChanged","tileLoadProgressEvent"]}],KD=rm.map(e=>Ub(e)),e4=["beforeLoad","cesiumReady","ready","destroyed","update:camera","viewerWidgetResized",...rm,...KD,...bw];qw.reduce((e,t)=>e.concat(t.events),e4);const Fm={xs:18,sm:24,md:32,lg:38,xl:46},Zw={size:String};function Qw(e,t=Fm){return u.computed(()=>e.size!==void 0?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null)}function xt(e,t){return e!==void 0?e():t}function Ai(e,t){return e!==void 0?t.concat(e()):t}function Jw(e,t,n,i,r,a){t.key=i+r;const s=u.h(e,t,n);return r===!0?u.withDirectives(s,a()):s}const $m={...Zw,tag:{type:String,default:"i"},name:String,color:String,hoverColor:String,left:Boolean,right:Boolean};var pa=u.defineComponent({name:"VcIcon",props:$m,setup(e,{slots:t}){const n=Qw(e),i=u.computed(()=>{const s=n.value;if(s)return e.color&&(s.color=e.color),e.hoverColor&&(s["--hover-color"]=e.hoverColor),s}),r=u.computed(()=>"vc-icon"+(e.left===!0?" on-left":"")+(e.right===!0?" on-right":"")+(e.color!==void 0?` text-${e.color}`:"")),a=u.computed(()=>{let s,l=e.name;if(!l)return{none:!0,cls:r.value};if(l.startsWith("M")===!0){const[h,m]=l.split("|");return{svg:!0,cls:r.value,nodes:h.split("&&").map(p=>{const[g,v,b]=p.split("@@");return u.h("path",{style:v,d:g,transform:b})}),viewBox:m!==void 0?m:"0 0 24 24"}}if(l.startsWith("img:")===!0)return{img:!0,cls:r.value,src:l.substring(4)};if(l.startsWith("svguse:")===!0){const[h,m]=l.split("|");return{svguse:!0,cls:r.value,src:h.substring(7),viewBox:m!==void 0?m:"0 0 24 24"}}let d=" ";return/^[l|f]a[s|r|l|b|d]{0,1} /.test(l)||l.startsWith("icon-")===!0?s=l:l.startsWith("bt-")===!0?s=`bt ${l}`:l.startsWith("eva-")===!0?s=`eva ${l}`:/^ion-(md|ios|logo)/.test(l)===!0?s=`ionicons ${l}`:l.startsWith("ion-")===!0?s=`ionicons ion-md${l.substr(3)}`:l.startsWith("mdi-")===!0?s=`mdi ${l}`:l.startsWith("iconfont ")===!0?s=`${l}`:l.startsWith("ti-")===!0?s=`themify-icon ${l}`:l.startsWith("vc-")===!0?s=`vc-icons ${l}`:(s="notranslate material-icons",l.startsWith("o_")===!0?(l=l.substring(2),s+="-outlined"):l.startsWith("r_")===!0?(l=l.substring(2),s+="-round"):l.startsWith("s_")===!0&&(l=l.substring(2),s+="-sharp"),d=l),{cls:s+" "+r.value,content:d}});return()=>{const s={class:a.value.cls,style:i.value,"aria-hidden":"true",role:"presentation",viewBox:"",src:""};return a.value.none===!0?u.h(e.tag,s,xt(t.default)):a.value.img===!0?(s.src=a.value.src,s.style&&(s.style.width=s.style.fontSize,s.style.height=s.style.fontSize),u.h("img",s)):a.value.svg===!0?(s.viewBox=a.value.viewBox,s["aria-hidden"]="true",s.style&&(s.style.width=s.style.fontSize,s.style.height=s.style.fontSize),u.h("svg",s,Ai(t.default,a.value.nodes))):a.value.svguse===!0?(s.viewBox=a.value.viewBox,s["aria-hidden"]="true",s.style&&(s.style.width=s.style.fontSize,s.style.height=s.style.fontSize),u.h("svg",s,Ai(t.default,[u.h("use",{"xlink:href":a.value.src})]))):u.h(e.tag,s,Ai(t.default,[a.value.content]))}}});const Di={size:{type:[Number,String],default:"1em"},color:String};function Li(e){return{cSize:u.computed(()=>e.size in Fm?`${Fm[e.size]}px`:e.size),classes:u.computed(()=>"vc-spinner"+(e.color?` text-${e.color}`:""))}}const t4=[u.h("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[u.h("circle",{cx:"5",cy:"50",r:"5"},[u.h("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})]),u.h("circle",{cx:"27",cy:"5",r:"5"},[u.h("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})]),u.h("circle",{cx:"49",cy:"50",r:"5"},[u.h("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})])])];var _c=u.defineComponent({name:"VcSpinnerBall",props:Di,setup(e){const{cSize:t,classes:n}=Li(e);return()=>u.h("svg",{class:n.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg"},t4)}});const n4=[u.h("rect",{y:"10",width:"15",height:"120",rx:"6"},[u.h("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),u.h("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},[u.h("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),u.h("rect",{x:"60",width:"15",height:"140",rx:"6"},[u.h("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),u.h("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},[u.h("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),u.h("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},[u.h("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})])];var Pc=u.defineComponent({name:"VcSpinnerBars",props:Di,setup(e){const{cSize:t,classes:n}=Li(e);return()=>u.h("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg"},n4)}});const i4=[u.h("circle",{cx:"15",cy:"15",r:"15"},[u.h("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),u.h("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[u.h("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),u.h("circle",{cx:"105",cy:"15",r:"15"},[u.h("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Ec=u.defineComponent({name:"VcSpinnerDots",props:Di,setup(e){const{cSize:t,classes:n}=Li(e);return()=>u.h("svg",{class:n.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},i4)}});const r4=[u.h("g",{transform:"translate(-20,-20)"},[u.h("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[u.h("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),u.h("g",{transform:"translate(20,20) rotate(15 50 50)"},[u.h("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[u.h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var xc=u.defineComponent({name:"VcSpinnerGears",props:Di,setup(e){const{cSize:t,classes:n}=Li(e);return()=>u.h("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},r4)}});const o4=[u.h("g",[u.h("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),u.h("clipPath",{id:"uil-hourglass-clip1"},[u.h("rect",{x:"15",y:"20",width:" 70",height:"25"},[u.h("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),u.h("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),u.h("clipPath",{id:"uil-hourglass-clip2"},[u.h("rect",{x:"15",y:"55",width:" 70",height:"25"},[u.h("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),u.h("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),u.h("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),u.h("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),u.h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var Oc=u.defineComponent({name:"VcSpinnerHourglass",props:Di,setup(e){const{cSize:t,classes:n}=Li(e);return()=>u.h("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},o4)}});const a4=[u.h("g",{"stroke-width":"4","stroke-linecap":"round"},[u.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"},[u.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})]),u.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"},[u.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"})]),u.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"},[u.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"})]),u.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"},[u.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"})]),u.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"},[u.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"})]),u.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"},[u.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"})]),u.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"},[u.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"})]),u.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"},[u.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"})]),u.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"},[u.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"})]),u.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"},[u.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"})]),u.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"},[u.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"})]),u.h("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"},[u.h("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})])])];var Mc=u.defineComponent({name:"VcSpinnerIos",props:Di,setup(e){const{cSize:t,classes:n}=Li(e);return()=>u.h("svg",{class:n.value,width:t.value,height:t.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64"},a4)}});const s4=[u.h("circle",{cx:"50",cy:"50",r:"44",fill:"none","stroke-width":"4","stroke-opacity":".5",stroke:"currentColor"}),u.h("circle",{cx:"8",cy:"54",r:"6",fill:"currentColor","stroke-width":"3",stroke:"currentColor"},[u.h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 48",to:"360 50 52",dur:"2s",repeatCount:"indefinite"})])];var Sc=u.defineComponent({name:"VcSpinnerOrbit",props:Di,setup(e){const{cSize:t,classes:n}=Li(e);return()=>u.h("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},s4)}});const l4=[u.h("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[u.h("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),u.h("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[u.h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])];var Tc=u.defineComponent({name:"VcSpinnerOval",props:Di,setup(e){const{cSize:t,classes:n}=Li(e);return()=>u.h("svg",{class:n.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},l4)}});const c4=[u.h("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[u.h("circle",{cx:"22",cy:"22",r:"1"},[u.h("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),u.h("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),u.h("circle",{cx:"22",cy:"22",r:"1"},[u.h("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),u.h("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])])];var Ic=u.defineComponent({name:"VcSpinnerPuff",props:Di,setup(e){const{cSize:t,classes:n}=Li(e);return()=>u.h("svg",{class:n.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},c4)}});const u4=[u.h("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[u.h("circle",{cx:"22",cy:"22",r:"6"},[u.h("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),u.h("circle",{cx:"22",cy:"22",r:"6"},[u.h("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),u.h("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),u.h("circle",{cx:"22",cy:"22",r:"8"},[u.h("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var Ac=u.defineComponent({name:"VcSpinnerRings",props:Di,setup(e){const{cSize:t,classes:n}=Li(e);return()=>u.h("svg",{class:n.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},u4)}});const d4=[u.h("defs",[u.h("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},[u.h("stop",{"stop-color":"currentColor","stop-opacity":"0",offset:"0%"}),u.h("stop",{"stop-color":"currentColor","stop-opacity":".631",offset:"63.146%"}),u.h("stop",{"stop-color":"currentColor",offset:"100%"})])]),u.h("g",{transform:"translate(1 1)",fill:"none","fill-rule":"evenodd"},[u.h("path",{d:"M36 18c0-9.94-8.06-18-18-18",stroke:"url(#a)","stroke-width":"2"},[u.h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})]),u.h("circle",{fill:"currentColor",cx:"36",cy:"18",r:"1"},[u.h("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})])])];var Dc=u.defineComponent({name:"VcSpinnerTail",props:Di,setup(e){const{cSize:t,classes:n}=Li(e);return()=>u.h("svg",{class:n.value,width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},d4)}}),Bs=u.defineComponent({name:"VcSpinner",props:{...Di,thickness:{type:Number,default:5}},setup(e){const{cSize:t,classes:n}=Li(e);return()=>u.h("svg",{class:n.value+" vc-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[u.h("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});const Xw={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},h4=Object.keys(Xw),m4={align:{type:String,validator:e=>h4.includes(e)}};function p4(e){return u.computed(()=>{const t=e.align===void 0?e.vertical===!0?"stretch":"left":e.align;return`${e.vertical===!0?"items":"justify"}-${Xw[t]}`})}const Yw={none:0,xs:4,sm:8,md:16,lg:24,xl:32},f4={xs:8,sm:10,md:14,lg:20,xl:24},g4={...Zw,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,round:Boolean,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...m4.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean};function v4(e){const t=Qw(e,f4),n=p4(e),i=u.computed(()=>{const p=e.fab===!1&&e.fabMini===!1?t.value:{};return e.padding!==void 0?Object.assign({},p,{padding:e.padding.split(/\s+/).map(g=>g in Yw?Yw[g]+"px":g).join(" "),minWidth:"0",minHeight:"0"}):p}),r=u.computed(()=>e.rounded===!0||e.fab===!0||e.fabMini===!0),a=u.computed(()=>e.disable!==!0&&e.loading!==!0),s=u.computed(()=>a.value===!0?e.tabindex||0:-1),l=u.computed(()=>e.flat===!0?"flat":e.outline===!0?"outline":e.push===!0?"push":e.unelevated===!0?"unelevated":"standard"),d=u.computed(()=>{const p={tabindex:s.value};return e.type!=="a"&&(p.type=e.type),p.role=e.type==="a"?"link":"button",e.loading===!0&&e.percentage!==void 0&&Object.assign(p,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),e.disable===!0&&(p.disabled="",p["aria-disabled"]="true"),p}),h=u.computed(()=>{let p;return e.color!==void 0?e.flat===!0||e.outline===!0?p=`text-${e.textColor||e.color}`:p=`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(p=`text-${e.textColor}`),`vc-btn--${l.value} vc-btn--${e.round===!0?"round":`rectangle${r.value===!0?" vc-btn--rounded":""}`}`+(p!==void 0?" "+p:"")+(a.value===!0?" vc-btn--actionable vc-focusable vc-hoverable":e.disable===!0?" disabled":"")+(e.fab===!0?" vc-btn--fab":e.fabMini===!0?" vc-btn--fab-mini":"")+(e.noCaps===!0?" vc-btn--no-uppercase":"")+(e.dense===!0?" vc-btn--dense":"")+(e.stretch===!0?" no-border-radius self-stretch":"")+(e.glossy===!0?" glossy":"")}),m=u.computed(()=>n.value+(e.stack===!0?" column":" row")+(e.noWrap===!0?" no-wrap text-no-wrap":"")+(e.loading===!0?" vc-btn__content--hidden":""));return{classes:h,style:i,innerClasses:m,attributes:d,isActionable:a}}const{passiveCapture:Bi}=Jr;let fa,ga,va;const Nm={...g4,percentage:{type:Number,default:0},darkPercentage:Boolean};var Lc=u.defineComponent({name:"VcBtn",props:Nm,emits:["click","keydown","touchstart","mousedown","keyup"],setup(e,{slots:t,emit:n}){var i;const r=(i=u.getCurrentInstance())==null?void 0:i.proxy,{classes:a,style:s,innerClasses:l,attributes:d,isActionable:h}=v4(e),m=u.ref(),p=u.ref();let g=null,v,b;const P=u.computed(()=>e.label!==void 0&&e.label!==null&&e.label!==""),w=u.computed(()=>e.ripple===!1?!1:{keyCodes:13,...e.ripple===!0?{}:e.ripple}),S=u.computed(()=>{const W=Math.max(0,Math.min(100,e.percentage));return W>0?{transition:"transform 0.6s",transform:`translateX(${W-100}%)`}:{}}),T=u.computed(()=>e.loading===!0?{onMousedown:Z,onTouchstart:Z,onClick:Z,onKeydown:Z,onKeyup:Z}:h.value===!0?{onClick:A,onKeydown:D,onMousedown:$,onTouchstart:z}:{}),_=u.computed(()=>[[dm,w.value,void 0,{center:e.round}]]),M=u.computed(()=>({ref:m,class:"vc-btn vc-btn-item non-selectable no-outline "+a.value,style:s.value,...d.value,...T.value}));function A(W){var y;if(W!==void 0){if(W.defaultPrevented===!0)return;const C=document.activeElement;if(e.type==="submit"&&C!==document.body&&((y=m.value)==null?void 0:y.contains(C))===!1&&(C==null?void 0:C.contains(m.value))===!1){m.value.focus();const x=()=>{document.removeEventListener("keydown",mr,!0),document.removeEventListener("keyup",x,Bi),m.value!==null&&m.value.removeEventListener("blur",x,Bi)};document.addEventListener("keydown",mr,!0),document.addEventListener("keyup",x,Bi),m.value.addEventListener("blur",x,Bi)}}n("click",W,()=>{})}function D(W){var y,C,x;Ts(W,[13,32])===!0&&(mr(W),ga!==m.value&&(ga!==null&&U(),(y=m.value)==null||y.focus(),ga=m.value,(C=m.value)==null||C.classList.add("vc-btn--active"),document.addEventListener("keyup",L,!0),(x=m.value)==null||x.addEventListener("blur",L,Bi))),n("keydown",W)}function z(W){fa!==m.value&&(fa!==null&&U(),fa=m.value,g=hm(W.target),g==null||g.addEventListener("touchcancel",L,Bi),g==null||g.addEventListener("touchend",L,Bi)),v=!0,clearTimeout(b),b=setTimeout(()=>{v=!1},200),n("touchstart",W)}function $(W){var y;va!==m.value&&(va!==null&&U(),va=m.value,(y=m.value)==null||y.classList.add("vc-btn--active"),document.addEventListener("mouseup",L,Bi)),W.qSkipRipple=v===!0,n("mousedown",W)}function L(W){var y;if(!(W!==void 0&&W.type==="blur"&&document.activeElement===m.value)){if(W!==void 0&&W.type==="keyup"){if(ga===m.value&&Ts(W,[13,32])===!0){const C=new MouseEvent("click",W);C.qKeyEvent=!0,W.defaultPrevented===!0&&Vo(C),W.cancelBubble===!0&&Ss(C),(y=m.value)==null||y.dispatchEvent(C),mr(W),W.qKeyEvent=!0}n("keyup",W)}U()}}function U(W){const y=p.value;W!==!0&&(fa===m.value||va===m.value)&&y!==null&&y!==document.activeElement&&(y.setAttribute("tabindex","-1"),y.focus()),fa===m.value&&(g!==null&&(g.removeEventListener("touchcancel",L,Bi),g.removeEventListener("touchend",L,Bi)),fa=g=null),va===m.value&&(document.removeEventListener("mouseup",L,Bi),va=null),ga===m.value&&(document.removeEventListener("keyup",L,!0),m.value!==null&&m.value.removeEventListener("blur",L,Bi),ga=null),m.value!==null&&m.value.classList.remove("vc-btn--active")}function Z(W){mr(W),W.qSkipRipple=!0}return u.onBeforeUnmount(()=>{U(!0)}),Object.assign(r,{click:A}),()=>{let W=[];e.icon!==void 0&&W.push(u.h(pa,{name:e.icon,left:e.stack===!1&&P.value===!0,role:"img","aria-hidden":"true"})),P.value===!0&&W.push(u.h("span",{class:"block"},[e.label])),W=Ai(t.default,W),e.iconRight!==void 0&&e.round===!1&&W.push(u.h(pa,{name:e.iconRight,right:e.stack===!1&&P.value===!0,role:"img","aria-hidden":"true"}));const y=[u.h("span",{class:"vc-focus-helper",ref:p})];return e.loading===!0&&e.percentage!==void 0&&y.push(u.h("span",{class:"vc-btn__progress absolute-full overflow-hidden"},[u.h("span",{class:"vc-btn__progress-indicator fit block"+(e.darkPercentage===!0?" vc-btn__progress--dark":""),style:S.value})])),y.push(u.h("span",{class:"vc-btn__content text-center col items-center vc-anchor--skip "+l.value},W)),e.loading!==null&&y.push(u.h(u.Transition,{name:"vc-transition--fade"},()=>e.loading===!0?[u.h("span",{key:"loading",class:"absolute-full flex flex-center"},t.loading!==void 0?t.loading():[u.h(Bs)])]:null)),Jw("button",M.value,y,"ripple",e.disable!==!0&&e.ripple!==!1,()=>_.value)}}});const y4={target:{type:[Boolean,String],default:!0},noParentEvent:Boolean,contextMenu:Boolean};function b4({showing:e,avoidEmit:t,configureAnchorEl:n}){const{props:i,proxy:r,emit:a}=u.getCurrentInstance(),s=u.ref(null);let l;function d(v){return s.value===null?!1:v===void 0||v.touches===void 0||v.touches.length<=1}const h={};n===void 0&&(Object.assign(h,{hide(v){r.hide(v)},toggle(v){r.toggle(v)},toggleKey(v){Ts(v,13)===!0&&r.toggle(v)},contextClick(v){r.hide(v),u.nextTick(()=>{r.show(v)}),Vo(v)},mobilePrevent:Vo,mobileTouch(v){var b;if(h.mobileCleanup(v),d(v)!==!0)return;r.hide(v),(b=s.value)==null||b.classList.add("non-selectable");const P=hm(v.target);hn(h,"anchor",[[P,"touchmove","mobileCleanup","passive"],[P,"touchend","mobileCleanup","passive"],[P,"touchcancel","mobileCleanup","passive"],[s.value,"contextmenu","mobilePrevent","notPassive"]]),l=setTimeout(()=>{r.show(v)},300)},mobileCleanup(v){s.value.classList.remove("non-selectable"),clearTimeout(l),e.value===!0&&v!==void 0&&pr()}}),n=function(v=i.contextMenu){if(i.noParentEvent===!0||s.value===null)return;let b;v===!0?zt().isPhone===!0?b=[[s.value,"touchstart","mobileTouch","passive"]]:b=[[s.value,"click","hide","passive"],[s.value,"contextmenu","contextClick","notPassive"]]:b=[[s.value,"click","toggle","passive"],[s.value,"keyup","toggleKey","passive"]],hn(h,"anchor",b)});function m(){hi(h,"anchor")}function p(v){for(s.value=v;s.value.classList.contains("vc-anchor--skip");)s.value=s.value.parentNode;n()}function g(){if(i.target===!1||i.target==="")s.value=null;else if(i.target===!0)p(r==null?void 0:r.$el.parentNode);else{let v=i.target;if(typeof i.target=="string")try{v=document.querySelector(i.target)}catch(b){v=void 0}v!=null?(s.value=v.$el||v,n()):(s.value=null,console.error(`Anchor: target "${i.target}" not found`))}}return u.watch(()=>i.contextMenu,v=>{s.value!==null&&(m(),n(v))}),u.watch(()=>i.target,()=>{s.value!==null&&m(),g()}),u.watch(()=>i.noParentEvent,v=>{s.value!==null&&(v===!0?m():n())}),u.onMounted(()=>{g(),t!==!0&&i.modelValue===!0&&s.value===null&&a("update:modelValue",!1)}),u.onBeforeUnmount(()=>{clearTimeout(l),m()}),{anchorEl:s,canShow:d,anchorEvents:h}}function C4(e,t){const n=u.ref(null);let i;function r(l,d){const h=`${d!==void 0?"add":"remove"}EventListener`,m=d!==void 0?d:i;l!==window&&l[h]("scroll",m,Jr.passive),window[h]("scroll",m,Jr.passive),i=d}function a(){n.value!==null&&(r(n.value),n.value=null)}const s=u.watch(()=>e.noParentEvent,()=>{n.value!==null&&(a(),t())});return u.onBeforeUnmount(s),{localScrollTarget:n,unconfigureScrollTarget:a,changeScrollEvent:r}}const Kw={modelValue:{type:Boolean,default:null}},e_=["update:modelValue","before-show","show","before-hide","hide"];function t_({showing:e,canShow:t=void 0,hideOnRouteChange:n=void 0,handleShow:i=void 0,handleHide:r=void 0,processOnMount:a=void 0}){const s=u.getCurrentInstance(),{props:l,emit:d,proxy:h}=s;let m;function p(T){(e==null?void 0:e.value)===!0?b(T):g(T)}function g(T){if(l.disable===!0||t!==void 0&&t(T)!==!0)return;const _=Yd(s,"onUpdate:modelValue")===!0;_===!0&&(d("update:modelValue",!0),m=T,u.nextTick(()=>{m===T&&(m=void 0)})),(l.modelValue===null||_===!1)&&v(T)}function v(T){(e==null?void 0:e.value)!==!0&&(e&&(e.value=!0),d("before-show",T),!(T&&T.cancel===!0)&&(i!==void 0?i(T):d("show",T)))}function b(T){if(l.disable===!0)return;const _=Yd(s,"onUpdate:modelValue")===!0;_===!0&&(d("update:modelValue",!1),m=T,u.nextTick(()=>{m===T&&(m=void 0)})),(l.modelValue===null||_===!1)&&P(T)}function P(T){(e==null?void 0:e.value)!==!1&&(e&&(e.value=!1),d("before-hide",T),r!==void 0?r(T):d("hide",T))}function w(T){l.disable===!0&&T===!0?Yd(s,"onUpdate:modelValue")===!0&&d("update:modelValue",!1):T===!0!==(e==null?void 0:e.value)&&(T===!0?v:P)(m)}u.watch(()=>l.modelValue,w),n!==void 0&&K6(s)===!0&&u.watch(()=>h.$route,()=>{n.value===!0&&(e==null?void 0:e.value)===!0&&b()}),a===!0&&u.onMounted(()=>{w(l.modelValue)});const S={show:g,hide:b,toggle:p};return Object.assign(h,S),S}let w4=document.body;function _4(e){const t=document.createElement("div");return e!==void 0&&(t.id=e),w4.appendChild(t),t}function P4(e){e.remove()}const jm=[];function E4(e){for(e=e.parent;e!=null;){if(e.type.name==="VcGlobalDialog")return!0;if(e.type.name==="VcDialog"||e.type.name==="VcMenu")return!1;e=e.parent}return!1}function n_(e,t,n,i){var r,a,s,l;let d=null;(a=(r=e.props)==null?void 0:r.teleport)!=null&&a.to&&(d=(l=(s=e.props)==null?void 0:s.teleport)==null?void 0:l.to);const h=i===!0&&E4(e),m=u.ref(!1);function p(){h===!1&&d===null&&(d=_4()),m.value=!0,jm.push(e.proxy)}function g(){var v,b;m.value=!1;const P=jm.indexOf(e.proxy);P>-1&&jm.splice(P,1),d!==null&&!((b=(v=e.props)==null?void 0:v.teleport)!=null&&b.to)&&(P4(d),d=null)}return u.onUnmounted(g),Object.assign(e.proxy,{__vcPortalInnerRef:t}),{showPortal:p,hidePortal:g,portalIsActive:m,renderPortal:()=>h===!0?n():m.value===!0?[u.h(u.Teleport,{to:d},n())]:void 0}}const x4={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function O4(e,t){const n=u.ref(t.value);return u.watch(t,i=>{u.nextTick(()=>{n.value=i})}),{transition:u.computed(()=>"vc-transition--"+(n.value===!0?e.transitionHide:e.transitionShow)),transitionStyle:u.computed(()=>`--vc-transition-duration: ${e.transitionDuration}ms`)}}function M4(){let e;return u.onBeforeUnmount(()=>{e=void 0}),{registerTick(t){e=t},removeTick(){e=void 0},prepareTick(){if(e!==void 0){const t=e;u.nextTick(()=>{e===t&&(e(),e=void 0)})}}}}const S4=[null,document,document.body,document.scrollingElement,document.documentElement];function T4(e,t){let n=Cw(t);if(n===void 0){if(e==null)return window;n=e.closest(".scroll,.scroll-y,.overflow-auto")}return S4.includes(n)?window:n}let Bc;function I4(){if(Bc!==void 0)return Bc;const e=document.createElement("p"),t=document.createElement("div");am(e,{width:"100%",height:"200px"}),am(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const n=e.offsetWidth;t.style.overflow="scroll";let i=e.offsetWidth;return n===i&&(i=t.clientWidth),t.remove(),Bc=n-i,Bc}let i_,r_;function o_(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function A4(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const km={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{km[`${e}#ltr`]=e,km[`${e}#rtl`]=e});function a_(e,t){const n=e.split(" ");return{vertical:n[0],horizontal:km[`${n[1]}#${t===!0?"rtl":"ltr"}`]}}function D4(e,t){let{top:n,left:i,right:r,bottom:a,width:s,height:l}=e.getBoundingClientRect();return t!==void 0&&(n-=t[1],i-=t[0],a+=t[1],r+=t[0],s+=t[0],l+=t[1]),{top:n,left:i,right:r,bottom:a,width:s,height:l,middle:i+(r-i)/2,center:n+(a-n)/2}}function L4(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function B4(e){if(zt().isIOS===!0&&window.visualViewport!==void 0){const l=document.body.style,{offsetLeft:d,offsetTop:h}=window.visualViewport;d!==i_&&(l.setProperty("--vc-pe-left",d+"px"),i_=d),h!==r_&&(l.setProperty("--vc-pe-top",h+"px"),r_=h)}let t={};const{scrollLeft:n,scrollTop:i}=e.el;if(e.absoluteOffset===void 0)t=D4(e.anchorEl,e.cover===!0?[0,0]:e.offset);else{const{top:l,left:d}=e.anchorEl.getBoundingClientRect(),h=l+e.absoluteOffset.top,m=d+e.absoluteOffset.left;t={top:h,left:m,width:1,height:1,right:m+1,center:h,middle:m,bottom:h+1}}let r={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(r.minWidth=t.width+"px",e.cover===!0&&(r.minHeight=t.height+"px")),Object.assign(e.el.style,r);const a=L4(e.el),s={top:t[e.anchorOrigin.vertical]-a[e.selfOrigin.vertical],left:t[e.anchorOrigin.horizontal]-a[e.selfOrigin.horizontal]};R4(s,t,a,e.anchorOrigin,e.selfOrigin),r={top:s.top+"px",left:s.left+"px"},s.maxHeight!==void 0&&(r.maxHeight=s.maxHeight+"px",t.height>s.maxHeight&&(r.minHeight=r.maxHeight)),s.maxWidth!==void 0&&(r.maxWidth=s.maxWidth+"px",t.width>s.maxWidth&&(r.minWidth=r.maxWidth)),Object.assign(e.el.style,r),e.el.scrollTop!==i&&(e.el.scrollTop=i),e.el.scrollLeft!==n&&(e.el.scrollLeft=n)}function R4(e,t,n,i,r){const a=n.bottom,s=n.right,l=I4(),d=window.innerHeight-l,h=document.body.clientWidth;if(e.top<0||e.top+a>d)if(r.vertical==="center")e.top=t[i.vertical]>d/2?Math.max(0,d-a):0,e.maxHeight=Math.min(a,d);else if(t[i.vertical]>d/2){const m=Math.min(d,i.vertical==="center"?t.center:i.vertical===r.vertical?t.bottom:t.top);e.maxHeight=Math.min(a,m),e.top=Math.max(0,m-a)}else e.top=Math.max(0,i.vertical==="center"?t.center:i.vertical===r.vertical?t.top:t.bottom),e.maxHeight=Math.min(a,d-e.top);if(e.left<0||e.left+s>h)if(e.maxWidth=Math.min(s,h),r.horizontal==="middle")e.left=t[i.horizontal]>h/2?Math.max(0,h-s):0;else if(t[i.horizontal]>h/2){const m=Math.min(h,i.horizontal==="middle"?t.middle:i.horizontal===r.horizontal?t.right:t.left);e.maxWidth=Math.min(s,m),e.left=Math.max(0,m-e.maxWidth)}else e.left=Math.max(0,i.horizontal==="middle"?t.middle:i.horizontal===r.horizontal?t.left:t.right),e.maxWidth=Math.min(s,h-e.left)}const zm={...y4,...Kw,...x4,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{type:String,default:"jump-down"},transitionHide:{type:String,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:o_},self:{type:String,default:"top middle",validator:o_},offset:{type:Array,default:()=>[14,14],validator:A4},scrollTarget:String,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:{type:Boolean}};var s_=u.defineComponent({name:"VcTooltip",inheritAttrs:!1,props:zm,emits:[...e_],setup(e,{slots:t,emit:n,attrs:i}){let r,a;const s=u.getCurrentInstance(),l=u.ref(null),d=u.ref(!1),h=u.computed(()=>a_(e.anchor,!0)),m=u.computed(()=>a_(e.self,!0)),p=u.computed(()=>e.persistent!==!0),{registerTick:g,removeTick:v,prepareTick:b}=M4(),{registerTimeout:P,removeTimeout:w}=om(),{transition:S,transitionStyle:T}=O4(e,d),{localScrollTarget:_,changeScrollEvent:M,unconfigureScrollTarget:A}=C4(e,N),{anchorEl:D,canShow:z,anchorEvents:$}=b4({showing:d,configureAnchorEl:j,avoidEmit:void 0}),{show:L,hide:U}=t_({showing:d,canShow:z,handleShow:C,handleHide:x,hideOnRouteChange:p,processOnMount:!0});Object.assign($,{delayShow:I,delayHide:V});const{showPortal:Z,hidePortal:W,renderPortal:y}=n_(s,l,ne);function C(ie){v(),w(),Z(),g(()=>{a=new MutationObserver(()=>O()),a.observe(l.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),O(),N()}),b(),r===void 0&&(r=u.watch(()=>e.self+"|"+e.anchor,O)),P(()=>{n("show",ie)},e.transitionDuration)}function x(ie){v(),w(),B(),P(()=>{W(),n("hide",ie)},e.transitionDuration)}function B(){a!==void 0&&(a.disconnect(),a=void 0),r!==void 0&&(r(),r=void 0),A(),hi($,"tooltipTemp")}function O(){const ie=l.value;D.value===void 0||!ie||B4({el:ie,offset:e.offset,anchorEl:D.value,anchorOrigin:h.value,selfOrigin:m.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function I(ie){if(zt().isPhone===!0){pr(),document.body.classList.add("non-selectable");const ee=hm(D.value),Q=["touchmove","touchcancel","touchend","click"].map(G=>[ee,G,"__delayHide","passiveCapture"]);hn($,"tooltipTemp",Q)}P(()=>{L(ie)},e.delay)}function V(ie){w(),zt().isPhone===!0&&(hi($,"tooltipTemp"),pr(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),P(()=>{U(ie)},e.hideDelay)}function j(){if(e.noParentEvent===!0||D.value===void 0)return;const ie=zt().isPhone===!0?[[D.value,"touchstart","delayShow","passive"]]:[[D.value,"mouseenter","delayShow","passive"],[D.value,"mouseleave","delayHide","passive"]];hn($,"anchor",ie)}function N(){if(D.value!==void 0||e.scrollTarget!==void 0){_.value=T4(D.value,e.scrollTarget);const ie=e.noParentEvent===!0?O:U;M(_.value,ie)}}function H(){return d.value===!0?u.h("div",{...i,ref:l,class:["vc-tooltip vc-tooltip--style vc-position-engine no-pointer-events",i.class],style:T.value,role:"complementary"},xt(t.default)):null}function ne(){return u.h(u.Transition,{name:S.value,appear:!0},H)}return u.onBeforeUnmount(B),Object.assign(s==null?void 0:s.proxy,{updatePosition:O}),y}});function Fo(e,t,n){return n<=t?t:Math.min(n,Math.max(t,e))}const Gm=XMLHttpRequest,l_=Gm.prototype.open,V4=["top","right","bottom","left"];let Rc=[],Rs=0;function F4({p:e,pos:t,active:n,horiz:i,reverse:r,dir:a}){let s=1,l=1;return i===!0?(r===!0&&(s=-1),t==="bottom"&&(l=-1),{transform:`translate3d(${s*(e-100)}%,${n?0:l*-200}%,0)`}):(r===!0&&(l=-1),t==="right"&&(s=-1),{transform:`translate3d(${n?0:a*s*-200}%,${l*(e-100)}%,0)`})}function $4(e,t){return typeof t!="number"&&(e<25?t=Math.random()*3+3:e<65?t=Math.random()*3:e<85?t=Math.random()*2:e<99?t=.6:t=0),Fo(e+t,0,100)}function N4(e){Rs++,Rc.push(e),!(Rs>1)&&(Gm.prototype.open=function(t,n){const i=[],r=()=>{Rc.forEach(s=>{(s.hijackFilter.value===null||s.hijackFilter.value(n)===!0)&&(s.start(),i.push(s.stop))})},a=()=>{i.forEach(s=>{s()})};this.addEventListener("loadstart",r,{once:!0}),this.addEventListener("loadend",a,{once:!0}),l_.apply(this,arguments)})}function j4(e){Rc=Rc.filter(t=>t.start!==e),Rs=Math.max(0,Rs-1),Rs===0&&(Gm.prototype.open=l_)}const Um={position:{type:String,default:"top",validator:e=>V4.includes(e)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,positioning:{type:String,default:"absolute",validator:e=>["absolute","fixed"].includes(e)},hijackFilter:Function};var c_=u.defineComponent({name:"VcAjaxBar",props:Um,emits:["start","stop"],setup(e,{emit:t}){const{proxy:n}=u.getCurrentInstance(),i=u.ref(0),r=u.ref(!1),a=u.ref(!0);let s=0,l,d;const h=u.computed(()=>`vc-loading-bar vc-loading-bar--${e.position}`+(e.color!==void 0?` bg-${e.color}`:"")+(a.value===!0?"":" no-transition")),m=u.computed(()=>e.position==="top"||e.position==="bottom"),p=u.computed(()=>m.value===!0?"height":"width"),g=u.computed(()=>{const _=r.value,M=F4({p:i.value,pos:e.position,active:_,horiz:m.value,reverse:e.reverse,dir:1});return M[p.value]=e.size,M.opacity=_?1:0,M.position=e.positioning==="absolute"?"absolute":"fixed",M.backgroundColor=e.color,M}),v=u.computed(()=>r.value===!0?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":i.value}:{"aria-hidden":"true"});function b(_=300){const M=d;return d=Math.max(0,_)||0,s++,s>1?(M===0&&_>0?S():M>0&&_<=0&&clearTimeout(l),s):(clearTimeout(l),t("start"),i.value=0,l=setTimeout(()=>{a.value=!0,_>0&&S()},r.value===!0?500:1),r.value!==!0&&(r.value=!0,a.value=!1),s)}function P(_){return s>0&&(i.value=$4(i.value,_)),s}function w(){if(s=Math.max(0,s-1),s>0)return s;clearTimeout(l),t("stop");const _=()=>{a.value=!0,i.value=100,l=setTimeout(()=>{r.value=!1},1e3)};i.value===0?l=setTimeout(_,1):_()}function S(){i.value<100&&(l=setTimeout(()=>{P(),S()},d))}let T;return u.onMounted(()=>{e.skipHijack!==!0&&(T=!0,N4({start:b,stop:w,hijackFilter:u.computed(()=>e.hijackFilter||null)}))}),u.onBeforeUnmount(()=>{clearTimeout(l),T===!0&&j4(b)}),Object.assign(n,{start:b,stop:w,increment:P}),()=>u.h("div",{class:h.value,style:g.value,...v.value})}});const u_={dark:{type:Boolean,default:null}};function d_(e){return u.computed(()=>e.dark)}const Hm=["text","rect","circle","VcBtn","VcBadge","VcChip","VcToolbar","VcCheckbox","VcRadio","VcToggle","VcSlider","VcRange","VcInput","VcAvatar"],Wm=["wave","pulse","pulse-x","pulse-y","fade","blink","none"],qm={...u_,tag:{type:String,default:"div"},type:{type:String,validator:e=>Hm.includes(e),default:"rect"},animation:{type:String,validator:e=>Wm.includes(e),default:"wave"},square:Boolean,bordered:Boolean,size:String,width:String,height:String};var h_=u.defineComponent({name:"VcSkeleton",props:qm,setup(e,{slots:t}){const n=d_(e),i=u.computed(()=>e.size!==void 0?{width:e.size,height:e.size}:{width:e.width,height:e.height}),r=u.computed(()=>`vc-skeleton vc-skeleton--${n.value===!0?"dark":"light"} vc-skeleton--type-${e.type}`+(e.animation!=="none"?` vc-skeleton--anim vc-skeleton--anim-${e.animation}`:"")+(e.square===!0?" vc-skeleton--square":"")+(e.bordered===!0?" vc-skeleton--bordered":""));return()=>u.h(e.tag,{class:r.value,style:i.value},xt(t.default))}});const k4=["top","right","bottom","left"],m_={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,size:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>k4.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function p_(e,t){return{formClass:u.computed(()=>`vc-fab--form-${e.square===!0?"square":"rounded"}`),stacked:u.computed(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:u.computed(()=>{if(e.externalLabel===!0){const n=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`vc-fab__label vc-tooltip--style vc-fab__label--external vc-fab__label--external-${e.labelPosition}`+(n===!0?" vc-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`vc-fab__label vc-fab__label--internal vc-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" vc-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const z4=["up","right","down","left"],G4=["left","center","right"],Zm={...m_,...Kw,icon:String,activeIcon:String,hideActionOnClick:{type:Boolean,default:!0},hideIcon:Boolean,hideLabel:{type:Boolean,default:!0},direction:{type:String,default:"right",validator:e=>z4.includes(e)},persistent:Boolean,stacked:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>G4.includes(e)}};var f_=u.defineComponent({name:"VcFab",props:Zm,emits:e_,setup(e,{slots:t}){const n=u.ref(null),i=u.ref(e.modelValue===!0),{formClass:r,labelProps:a}=p_(e,i),s=u.computed(()=>e.persistent!==!0),{hide:l,toggle:d}=t_({showing:i,hideOnRouteChange:s}),h=u.computed(()=>({opened:i.value})),m=u.computed(()=>`vc-fab z-fab row inline justify-center vc-fab--align-${e.verticalActionsAlign} ${r.value}`+(i.value===!0?" vc-fab--opened":" vc-fab--closed")),p=u.computed(()=>`vc-fab__actions flex no-wrap inline vc-fab__actions--${e.direction} vc-fab__actions--${i.value===!0?"opened":"closed"}`),g=u.computed(()=>`vc-fab__icon-holder  vc-fab__icon-holder--${i.value===!0?"opened":"closed"}`);function v(P,w){const S=t[P],T=`vc-fab__${P} absolute-full`;return S===void 0?u.h(pa,{class:T,name:e[w]}):u.h("div",{class:T},S(h.value))}function b(){const P=[];return e.hideIcon!==!0&&P.push(u.h("div",{class:g.value},[v("icon","icon"),v("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&P[a.value.action](u.h("div",a.value.data,t.label!==void 0?t.label(h.value):[e.label])),Ai(t.tooltip,P)}return u.provide(z1,{showing:i,onChildClick(P){e.hideActionOnClick&&l(P),n.value!==null&&n.value.$el.focus()}}),()=>u.h("div",{class:m.value},[u.h(Lc,{ref:n,class:r.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,flat:e.flat,size:e.size,"aria-expanded":i.value===!0?"true":"false","aria-haspopup":"true",onClick:d},b),u.h("div",{class:p.value},xt(t.default))])}});const g_={start:"self-end",center:"self-center",end:"self-start"},U4=Object.keys(g_),Qm={...m_,icon:{type:String,default:""},stacked:Boolean,anchor:{type:String,validator:e=>U4.includes(e)},to:[String,Object],replace:Boolean};var v_=u.defineComponent({name:"VcFabAction",props:Qm,emits:["click"],setup(e,{slots:t,emit:n}){const i=u.inject(z1),{formClass:r,labelProps:a}=p_(e,i==null?void 0:i.showing),s=u.computed(()=>{let p;return e.anchor&&(p=g_[e.anchor]),r.value+(p!==void 0?` ${p}`:"")}),l=u.computed(()=>{var p;return e.disable===!0||((p=i==null?void 0:i.showing)==null?void 0:p.value)!==!0});function d(p){var g;(g=i==null?void 0:i.onChildClick)==null||g.call(i,p),n("click",p)}function h(){const p=[];return e.icon!==""&&p.push(u.h(pa,{name:e.icon})),e.label!==""&&p[a.value.action](u.h("div",a.value.data,[e.label])),Ai(t.default,p)}const m=u.getCurrentInstance();return Object.assign(m==null?void 0:m.proxy,{click:d}),()=>u.h(Lc,{class:s.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:l.value,size:e.size,onClick:d},h)}});const H4={name:String};function W4(e){return u.computed(()=>({type:"hidden",name:e.name,value:e.modelValue}))}function q4(e={}){return(t,n,i)=>{t[n](u.h("input",{class:"hidden"+(i||""),...e.value}))}}const y_="vc-slider__marker-labels",Z4=e=>({value:e}),Q4=({marker:e})=>u.h("div",{key:e.value,style:e.style,class:e.classes},e.label),b_=[34,37,40,33,39,38],J4={...u_,...H4,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},X4=["pan","update:modelValue","change"];function Y4({updateValue:e,updatePosition:t,getDragging:n,formAttrs:i}){const{props:r,emit:a,slots:s,proxy:l}=u.getCurrentInstance(),d=d_(r),h=q4(i),m=u.ref(!1),p=u.ref(!1),g=u.ref(!1),v=u.ref(!1),b=u.computed(()=>r.vertical===!0?"--v":"--h"),P=u.computed(()=>"-"+(r.switchLabelSide===!0?"switched":"standard")),w=u.computed(()=>r.reverse===!0),S=u.computed(()=>isNaN(r.innerMin)===!0||r.innerMin<r.min?r.min:r.innerMin),T=u.computed(()=>isNaN(r.innerMax)===!0||r.innerMax>r.max?r.max:r.innerMax),_=u.computed(()=>r.disable!==!0&&r.readonly!==!0&&S.value<T.value),M=u.computed(()=>(String(r.step).trim().split(".")[1]||"").length),A=u.computed(()=>r.step===0?1:r.step),D=u.computed(()=>_.value===!0?r.tabindex||0:-1),z=u.computed(()=>r.max-r.min),$=u.computed(()=>T.value-S.value),L=u.computed(()=>X(S.value)),U=u.computed(()=>X(T.value)),Z=u.computed(()=>r.vertical===!0?w.value===!0?"bottom":"top":w.value===!0?"right":"left"),W=u.computed(()=>r.vertical===!0?"height":"width"),y=u.computed(()=>r.vertical===!0?"width":"height"),C=u.computed(()=>r.vertical===!0?"vertical":"horizontal"),x=u.computed(()=>{const Ce={role:"slider","aria-valuemin":S.value,"aria-valuemax":T.value,"aria-orientation":C.value,"data-step":r.step};return r.disable===!0?Ce["aria-disabled"]="true":r.readonly===!0&&(Ce["aria-readonly"]="true"),Ce}),B=u.computed(()=>`vc-slider vc-slider${b.value} vc-slider--${m.value===!0?"":"in"}active inline no-wrap `+(r.vertical===!0?"row":"column")+(r.disable===!0?" disabled":" vc-slider--enabled"+(_.value===!0?" vc-slider--editable":""))+(g.value==="both"?" vc-slider--focus":"")+(r.label||r.labelAlways===!0?" vc-slider--label":"")+(r.labelAlways===!0?" vc-slider--label-always":"")+(d.value===!0?" vc-slider--dark":"")+(r.dense===!0?" vc-slider--dense vc-slider--dense"+b.value:""));function O(Ce){const Ge="vc-slider__"+Ce;return`${Ge} ${Ge}${b.value} ${Ge}${b.value}${P.value}`}function I(Ce){const Ge="vc-slider__"+Ce;return`${Ge} ${Ge}${b.value}`}const V=u.computed(()=>{const Ce=r.selectionColor||r.color;return"vc-slider__selection absolute"+(Ce!==void 0?` text-${Ce}`:"")}),j=u.computed(()=>I("markers")+" absolute overflow-hidden"),N=u.computed(()=>I("track-container")),H=u.computed(()=>O("pin")),ne=u.computed(()=>O("label")),ie=u.computed(()=>O("text-container")),ee=u.computed(()=>O("marker-labels-container")+(r.markerLabelsClass!==void 0?` ${r.markerLabelsClass}`:"")),Q=u.computed(()=>"vc-slider__track relative-position no-outline"+(r.trackColor!==void 0?` bg-${r.trackColor}`:"")),G=u.computed(()=>{const Ce={[y.value]:r.trackSize};return r.trackImg!==void 0&&(Ce.backgroundImage=`url(${r.trackImg}) !important`),Ce}),J=u.computed(()=>"vc-slider__inner absolute"+(r.innerTrackColor!==void 0?` bg-${r.innerTrackColor}`:"")),oe=u.computed(()=>{const Ce={[Z.value]:`${100*L.value}%`,[W.value]:`${100*(U.value-L.value)}%`};return r.innerTrackImg!==void 0&&(Ce.backgroundImage=`url(${r.innerTrackImg}) !important`),Ce});function Y(Ce){const{min:Ge,max:Ne,step:He}=r;let ft=Ge+Ce*(Ne-Ge);if(He>0){const gt=(ft-Ge)%He;ft+=(Math.abs(gt)>=He/2?(gt<0?-1:1)*He:0)-gt}return M.value>0&&(ft=parseFloat(ft.toFixed(M.value))),Fo(ft,S.value,T.value)}function X(Ce){return z.value===0?0:(Ce-r.min)/z.value}function se(Ce,Ge){const Ne=hr(Ce),He=r.vertical===!0?Fo((Ne.top-Ge.top)/Ge.height,0,1):Fo((Ne.left-Ge.left)/Ge.width,0,1);return Fo(w.value===!0?1-He:He,L.value,U.value)}const re=u.computed(()=>Q6(r.markers)===!0?r.markers:A.value),de=u.computed(()=>{const Ce=[],Ge=re.value,Ne=r.max;let He=r.min;do Ce.push(He),He+=Ge;while(He<Ne);return Ce.push(Ne),Ce}),ce=u.computed(()=>{const Ce=` ${y_}${b.value}-`;return y_+`${Ce}${r.switchMarkerLabelsSide===!0?"switched":"standard"}${Ce}${w.value===!0?"rtl":"ltr"}`}),he=u.computed(()=>r.markerLabels===!1?null:Ie(r.markerLabels).map((Ce,Ge)=>({index:Ge,value:Ce.value,label:Ce.label||Ce.value,classes:ce.value+(Ce.classes!==void 0?" "+Ce.classes:""),style:{..._e(Ce.value),...Ce.style||{}}}))),ge=u.computed(()=>({markerList:he.value,markerMap:Ee.value,classes:ce.value,getStyle:_e})),Pe=u.computed(()=>{if($.value!==0){const Ce=100*re.value/$.value;return{...oe.value,backgroundSize:r.vertical===!0?`2px ${Ce}%`:`${Ce}% 2px`}}return null});function Ie(Ce){if(Ce===!1)return null;if(Ce===!0)return de.value.map(Z4);if(typeof Ce=="function")return de.value.map(Ne=>{const He=Ce(Ne);return lr(He)===!0?{...He,value:Ne}:{value:Ne,label:He}});const Ge=({value:Ne})=>Ne>=r.min&&Ne<=r.max;return Array.isArray(Ce)===!0?Ce.map(Ne=>lr(Ne)===!0?Ne:{value:Ne}).filter(Ge):Object.keys(Ce).map(Ne=>{const He=Ce[Ne],ft=Number(Ne);return lr(He)===!0?{...He,value:ft}:{value:ft,label:He}}).filter(Ge)}function _e(Ce){return{[Z.value]:`${100*(Ce-r.min)/z.value}%`}}const Ee=u.computed(()=>{if(r.markerLabels===!1)return null;const Ce={};return he.value.forEach(Ge=>{Ce[Ge.value]=Ge}),Ce});function De(){if(s["marker-label-group"]!==void 0)return s["marker-label-group"](ge.value);const Ce=s["marker-label"]||Q4;return he.value.map(Ge=>Ce({marker:Ge,...ge.value}))}const Se=u.computed(()=>[[pm,xe,void 0,{[C.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function xe(Ce){Ce.isFinal===!0?(v.value!==void 0&&(t(Ce.evt),Ce.touch===!0&&e(!0),v.value=void 0,a("pan","end")),m.value=!1,g.value=!1):Ce.isFirst===!0?(v.value=n(Ce.evt),t(Ce.evt),e(),m.value=!0,a("pan","start")):(t(Ce.evt),e())}function je(){g.value=!1}function K(Ce){t(Ce,n(Ce)),e(),p.value=!0,m.value=!0,document.addEventListener("mouseup",ve,!0)}function ve(){p.value=!1,m.value=!1,e(!0),je(),document.removeEventListener("mouseup",ve,!0)}function Te(Ce){t(Ce,n(Ce)),e(!0)}function Ae(Ce){b_.includes(Ce.keyCode)&&e(!0)}function It(Ce){if(r.vertical===!0)return null;const Ge=Ce;return{transform:`translateX(calc(${2*Ge-1} * ${r.thumbSize} / 2 + ${50-100*Ge}%))`}}function pn(Ce){const Ge=u.computed(()=>p.value===!1&&(g.value===Ce.focusValue||g.value==="both")?" vc-slider--focus":""),Ne=u.computed(()=>`vc-slider__thumb vc-slider__thumb${b.value} vc-slider__thumb${b.value}-${w.value===!0?"rtl":"ltr"} absolute non-selectable`+Ge.value+(Ce.thumbColor.value!==void 0?` text-${Ce.thumbColor.value}`:"")),He=u.computed(()=>({width:r.thumbSize,height:r.thumbSize,[Z.value]:`${100*Ce.ratio.value}%`,zIndex:g.value===Ce.focusValue?2:void 0})),ft=u.computed(()=>Ce.labelColor.value!==void 0?` text-${Ce.labelColor.value}`:""),gt=u.computed(()=>It(Ce.ratio.value)),tt=u.computed(()=>"vc-slider__text"+(Ce.labelTextColor.value!==void 0?` text-${Ce.labelTextColor.value}`:""));return()=>{const Ye=[u.h("svg",{class:"vc-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[u.h("path",{d:r.thumbPath})]),u.h("div",{class:"vc-slider__focus-ring fit"})];return(r.label===!0||r.labelAlways===!0)&&(Ye.push(u.h("div",{class:H.value+" absolute fit no-pointer-events"+ft.value},[u.h("div",{class:ne.value,style:{minWidth:r.thumbSize}},[u.h("div",{class:ie.value,style:gt.value},[u.h("span",{class:tt.value},Ce.label.value)])])])),r.name!==void 0&&r.disable!==!0&&h(Ye,"push")),u.h("div",{class:Ne.value,style:He.value,...Ce.getNodeData()},Ye)}}function Ze(Ce,Ge,Ne,He){const ft=[];r.innerTrackColor!=="transparent"&&ft.push(u.h("div",{key:"inner",class:J.value,style:oe.value})),r.selectionColor!=="transparent"&&ft.push(u.h("div",{key:"selection",class:V.value,style:Ce.value})),r.markers!==!1&&ft.push(u.h("div",{key:"marker",class:j.value,style:Pe.value})),He(ft);const gt=[Jw("div",{key:"trackC",class:N.value,tabindex:Ge.value,...Ne.value},[u.h("div",{class:Q.value,style:G.value},ft)],"slide",_.value,()=>Se.value)];if(r.markerLabels!==!1){const tt=r.switchMarkerLabelsSide===!0?"unshift":"push";gt[tt](u.h("div",{key:"markerL",class:ee.value},De()))}return gt}return u.onBeforeUnmount(()=>{document.removeEventListener("mouseup",ve,!0)}),{state:{active:m,focus:g,preventFocus:p,dragging:v,editable:_,classes:B,tabindex:D,attributes:x,step:A,decimals:M,trackLen:z,innerMin:S,innerMinRatio:L,innerMax:T,innerMaxRatio:U,positionProp:Z,sizeProp:W,isReversed:w},methods:{onActivate:K,onMobileClick:Te,onBlur:je,onKeyup:Ae,getContent:Ze,getThumbRenderFn:pn,convertRatioToModel:Y,convertModelToRatio:X,getDraggingRatio:se}}}const K4=()=>({}),Jm={...J4,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]};var C_=u.defineComponent({name:"VcSlider",props:Jm,emits:X4,setup(e,{emit:t}){const{state:n,methods:i}=Y4({updateValue:v,updatePosition:P,getDragging:b,formAttrs:W4(e)}),r=u.ref(null),a=u.ref(0),s=u.ref(0);function l(){s.value=e.modelValue===null?n.innerMin.value:Fo(e.modelValue,n.innerMin.value,n.innerMax.value)}u.watch(()=>`${e.modelValue}|${n.innerMin.value}|${n.innerMax.value}`,l),l();const d=u.computed(()=>i.convertModelToRatio(s.value)),h=u.computed(()=>n.active.value===!0?a.value:d.value),m=u.computed(()=>{const T={[n.positionProp.value]:`${100*n.innerMinRatio.value}%`,[n.sizeProp.value]:`${100*(h.value-n.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(T.backgroundImage=`url(${e.selectionImg}) !important`),T}),p=i.getThumbRenderFn({focusValue:!0,getNodeData:K4,ratio:h,label:u.computed(()=>e.labelValue!==void 0?e.labelValue:s.value),thumbColor:u.computed(()=>e.thumbColor||e.color),labelColor:u.computed(()=>e.labelColor),labelTextColor:u.computed(()=>e.labelTextColor)}),g=u.computed(()=>n.editable.value!==!0?{}:zt().isPhone===!0?{onClick:i.onMobileClick}:{onMousedown:i.onActivate,onFocus:w,onBlur:i.onBlur,onKeydown:S,onKeyup:i.onKeyup});function v(T){s.value!==e.modelValue&&t("update:modelValue",s.value),T===!0&&t("change",s.value)}function b(){return r.value.getBoundingClientRect()}function P(T,_=n.dragging.value){const M=i.getDraggingRatio(T,_);s.value=i.convertRatioToModel(M),a.value=e.snap!==!0||e.step===0?M:i.convertModelToRatio(s.value)}function w(){n.focus.value=!0}function S(T){if(!b_.includes(T.keyCode))return;mr(T);const _=([34,33].includes(T.keyCode)?10:1)*n.step.value,M=([34,37,40].includes(T.keyCode)?-1:1)*(n.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*_;s.value=Fo(parseFloat((s.value+M).toFixed(n.decimals.value)),n.innerMin.value,n.innerMax.value),v()}return()=>{const T=i.getContent(m,n.tabindex,g,_=>{_.push(p())});return u.h("div",{ref:r,class:n.classes.value+(e.modelValue===null?" vc-slider--no-value":""),...n.attributes.value,"aria-valuenow":e.modelValue},T)}}});[Lc,pa,_c,Pc,Ec,xc,Oc,Mc,Sc,Tc,Ic,Ac,Dc,Bs,s_,c_,h_,f_,v_,C_].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const zn=Lc,Dr=pa,Xm=_c,Vs=Pc,Ym=Ec,Km=xc,ep=Oc,Vc=Mc,Fc=Sc,$c=Tc,Nc=Ic,tp=Ac,jc=Dc,np=Bs,mn=s_,ip=c_,kc=h_,zc=f_,Fs=v_,rp=C_,Le={beforeLoad:e=>!0,ready:e=>!0,unready:e=>!0,destroyed:e=>!0},ya={mousedown:e=>!0,mouseup:e=>!0,click:e=>!0,clickout:e=>!0,dblclick:e=>!0,mousemove:e=>!0,mouseover:e=>!0,mouseout:e=>!0},ba={...Le,definitionChanged:e=>!0},Vt={...Le,errorEvent:e=>!0,readyPromise:(e,t,n)=>!0},Kn={...Le,...ya,readyPromise:(e,t,n)=>!0,"update:geometryInstances":e=>!0},mi={...Le,...ya},Ca={...Le,...ya,definitionChanged:e=>!0,clusterEvent:(e,t)=>!0,collectionChanged:(e,t,n,i)=>!0,changedEvent:e=>!0,errorEvent:(e,t)=>!0,loadingEvent:(e,t)=>!0,refreshEvent:(e,t)=>!0,unsupportedNodeEvent:(e,t,n,i,r,a,s)=>!0},Yt={...Le,activeEvt:(e,t)=>!0,drawEvt:(e,t)=>!0,editorEvt:(e,t)=>!0,mouseEvt:(e,t)=>!0},eL={...Le,cesiumReady:e=>!0,viewerWidgetResized:e=>!0,selectedEntityChanged:e=>!0,trackedEntityChanged:e=>!0,layerAdded:(e,t)=>!0,layerMoved:(e,t,n)=>!0,layerRemoved:(e,t)=>!0,layerShownOrHidden:(e,t,n)=>!0,dataSourceAdded:(e,t)=>!0,dataSourceMoved:(e,t,n)=>!0,dataSourceRemoved:(e,t)=>!0,collectionChanged:(e,t,n,i)=>!0,morphComplete:(e,t,n,i)=>!0,morphStart:(e,t,n,i)=>!0,postRender:(e,t)=>!0,preRender:(e,t)=>!0,postUpdate:(e,t)=>!0,preUpdate:(e,t)=>!0,renderError:(e,t)=>!0,terrainProviderChanged:e=>!0,changed:e=>!0,moveEnd:()=>!0,moveStart:()=>!0,onStop:e=>!0,onTick:e=>!0,errorEvent:e=>!0,cameraClicked:e=>!0,closeClicked:e=>!0,leftClick:e=>!0,leftDoubleClick:e=>!0,leftDown:e=>!0,leftUp:e=>!0,middleClick:e=>!0,middleDown:e=>!0,middleUp:e=>!0,mouseMove:e=>!0,pinchStart:e=>!0,pinchMove:e=>!0,pinchEnd:()=>!0,rightClick:e=>!0,rightDown:e=>!0,rightUp:e=>!0,wheel:e=>!0,imageryLayersUpdatedEvent:()=>!0,tileLoadProgressEvent:e=>!0,touchEnd:e=>!0,"update:camera":e=>!0};var Gc=u.defineComponent({name:"VcViewer",props:Vm,emits:eL,setup(e,t){const n=u.getCurrentInstance();n.cesiumEvents=["selectedEntityChanged","trackedEntityChanged"],n.cesiumMembersEvents=qw;const i=YD(e,t,n),r=u.computed(()=>e.containerId||t.attrs.id||"cesiumContainer");u.provide(Or,i.getServices()),n.appContext.config.globalProperties.$VueCesium=n.appContext.config.globalProperties.$VueCesium||{},n.appContext.config.globalProperties.$VueCesium[r.value]=i.getServices(),Object.assign(n.proxy,{creatingPromise:i.creatingPromise,load:i.load,unload:i.unload,reload:i.reload,cesiumObject:n.cesiumObject,getCesiumObject:()=>n.cesiumObject});const a=s=>{t.emit("touchEnd",s)};return()=>{var s;const l=[];return Lt(e.skeleton)&&!i.isReady.value?l.push(u.h(kc,{...e.skeleton,style:{background:e.skeleton.color,width:"100%",height:"100%"}})):l.push(u.createCommentVNode("v-if")),l.push(u.createCommentVNode("vc-viewer"),u.withDirectives(u.h("div",{ref:i.viewerRef,class:pe(((s=n.proxy)==null?void 0:s.$options.name)||""),id:r.value,style:t.attrs.style||{width:"100%",height:"100%"}},xt(t.slots.default)),[[Is,a,e.touchHoldArg]])),l}}});Gc.install=(e,t)=>{e.component(Gc.name,Gc)};const w_=Gc,op=w_,eo={position:{type:String,default:"top-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2}};function pi(e,t){const n=u.computed(()=>{const h=e.position;return{top:h.indexOf("top")>-1,right:h.indexOf("right")>-1,bottom:h.indexOf("bottom")>-1,left:h.indexOf("left")>-1,vertical:h==="top"||h==="bottom",horizontal:h==="left"||h==="right"}}),i=u.ref(0),r=u.ref(0),a=u.ref(0),s=u.ref(0),l=u.computed(()=>{let h=0,m=0;const p=n.value,g=1;p.top===!0&&i.value!==0?m=`${i.value}px`:p.bottom===!0&&s.value!==0&&(m=`${-s.value}px`),p.left===!0&&a.value!==0?h=`${g*a.value}px`:p.right===!0&&r.value!==0&&(h=`${-g*r.value}px`);const v={transform:`translate(${h}, ${m})`};return e.offset&&(v.margin=`${e.offset[1]}px ${e.offset[0]}px`),p.vertical===!0?(a.value!==0&&(v.right=`${a.value}px`),r.value!==0&&(v.left=`${r.value}px`)):p.horizontal===!0&&(i.value!==0&&(v.top=`${i.value}px`),s.value!==0&&(v.bottom=`${s.value}px`)),typeof e.teleportToViewer=="undefined"||e.teleportToViewer?v:{}}),d=u.computed(()=>typeof e.teleportToViewer=="undefined"||e.teleportToViewer?`absolute absolute-${e.position}`:"relative-position");return{attach:n,style:l,classes:d}}const ap={enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},...eo,outerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-outer",size:"96px",color:"#3f4854",background:"transparent",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},innerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-inner",size:"24px",color:"#3f4854",background:"#fff",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},markerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-rotation-marker",size:"96px",color:"#1976D2"})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},sp=Oi(ap);class __{static createTween(t,n){const{Cartesian2:i,Cartesian3:r,defaultValue:a,defined:s,DeveloperError:l,EasingFunction:d,Math:h,SceneMode:m}=Cesium;n=a(n,{});let p=n.destination;if(!s(t))throw new l("scene is required.");if(!s(p))throw new l("destination is required.");const g=t.mode;if(g===m.MORPHING)return cp();const v=a(n.convert,!0),b=t.mapProjection,P=b.ellipsoid,w=n.maximumHeight,S=n.flyOverLongitude,T=n.flyOverLongitudeWeight,_=n.pitchAdjustHeight;let M=n.easingFunction;v&&g!==m.SCENE3D&&(P.cartesianToCartographic(p,x_),p=b.project(x_,dL));const A=t.camera,D=n.endTransform;s(D)&&A._setTransform(D);let z=n.duration;s(z)||(z=Math.ceil(r.distance(A.position,p)/1e6)+2,z=Math.min(z,3));const $=a(n.heading,0),L=a(n.pitch,-h.PI_OVER_TWO),U=a(n.roll,0),Z=t.screenSpaceCameraController;Z.enableInputs=!1;const W=O_(Z,n.complete),y=O_(Z,n.cancel),C=A.frustum;let x=t.mode===m.SCENE2D;if(x=x&&i.equalsEpsilon(A.position,p,h.EPSILON6),x=x&&h.equalsEpsilon(Math.max(C.right-C.left,C.top-C.bottom),p.z,h.EPSILON6),x=x||t.mode!==m.SCENE2D&&r.equalsEpsilon(p,A.position,h.EPSILON10),x=x&&h.equalsEpsilon(h.negativePiToPi($),h.negativePiToPi(A.heading),h.EPSILON10)&&h.equalsEpsilon(h.negativePiToPi(L),h.negativePiToPi(A.pitch),h.EPSILON10)&&h.equalsEpsilon(h.negativePiToPi(U),h.negativePiToPi(A.roll),h.EPSILON10),x)return cp(W,y);const B=new Array(4);if(B[m.SCENE2D]=uL,B[m.SCENE3D]=cL,B[m.COLUMBUS_VIEW]=rL,z<=0)return cp(function(){B[g](t,1,p,$,L,U,w,S,T,_)({time:1}),typeof W=="function"&&W()},y);const O=B[g](t,z,p,$,L,U,w,S,T,_);if(!s(M)){const I=A.positionCartographic.height,V=g===m.SCENE3D?P.cartesianToCartographic(p).height:p.z;I>V&&I>11500?M=d.CUBIC_OUT:M=d.QUINTIC_IN_OUT}return{duration:z,easingFunction:M,startObject:{time:0},stopObject:{time:z},update:O,complete:W,cancel:y}}}function tL(e,t,n){const{PerspectiveFrustum:i,PerspectiveOffCenterFrustum:r}=Cesium;let a,s,l;if(e instanceof i){const d=Math.tan(.5*e.fovy);return a=e.near,s=e.near*d,l=e.aspectRatio*s,Math.max(t*a/l,n*a/s)}else if(e instanceof r)return a=e.near,s=e.top,l=e.right,Math.max(t*a/l,n*a/s);return Math.max(t,n)}const nL={},P_={};function iL(e,t,n,i){const{defined:r,Math:a}=Cesium;if(r(i)&&n(.5)>i){const s=n(0),l=n(1),d=n(.5),h=d-s,m=d-l;return function(p){const g=n(p);if(p<=.5){const b=(g-s)/h;return a.lerp(e,-a.PI_OVER_TWO,b)}const v=(g-l)/m;return a.lerp(-a.PI_OVER_TWO,t,1-v)}}return function(s){return a.lerp(e,t,s)}}function lp(e,t,n,i,r){const{Cartesian3:a,defined:s,Math:l}=Cesium;let d=r;const h=Math.max(n,i);if(!s(d)){const m=e.position,p=t,g=e.up,v=e.right,b=e.frustum,P=a.subtract(m,p,nL),w=a.magnitude(a.multiplyByScalar(g,a.dot(P,g),P_)),S=a.magnitude(a.multiplyByScalar(v,a.dot(P,v),P_));d=Math.min(tL(b,w,S)*.2,1e9)}if(h<d){const m=-Math.pow((d-n)*1e6,.125),p=Math.pow((d-i)*1e6,1/8);return function(g){const v=g*(p-m)+m;return-Math.pow(v,8)/1e6+d}}return function(m){return l.lerp(n,i,m)}}function $s(e,t){const{Math:n}=Cesium;return n.equalsEpsilon(e,n.TWO_PI,n.EPSILON11)&&(e=0),t>e+Math.PI?e+=n.TWO_PI:t<e-Math.PI&&(e-=n.TWO_PI),e}const E_={};function rL(e,t,n,i,r,a,s){const{Cartesian2:l,Cartesian3:d,Math:h}=Cesium,m=e.camera,p=d.clone(m.position,E_),g=m.pitch,v=$s(m.heading,i),b=$s(m.roll,a),P=lp(m,n,p.z,n.z,s);function w(S){const T=S.time/t;m.setView({orientation:{heading:h.lerp(v,i,T),pitch:h.lerp(g,r,T),roll:h.lerp(b,a,T)}}),l.lerp(p,n,T,m.position),m.position.z=P(T)}return w}function oL(e,t){const{Math:n}=Cesium;e.longitude<t.longitude?e.longitude+=n.TWO_PI:t.longitude+=n.TWO_PI}function aL(e,t){const{Math:n}=Cesium,i=e.longitude-t.longitude;i<-n.PI?e.longitude+=n.TWO_PI:i>n.PI&&(t.longitude+=n.TWO_PI)}const sL={},lL={};function cL(e,t,n,i,r,a,s,l,d,h){const{Cartesian3:m,Cartographic:p,defined:g,Math:v}=Cesium,b=e.camera,P=e.mapProjection.ellipsoid,w=p.clone(b.positionCartographic,sL),S=b.pitch,T=$s(b.heading,i),_=$s(b.roll,a),M=P.cartesianToCartographic(n,lL);w.longitude=v.zeroToTwoPi(w.longitude),M.longitude=v.zeroToTwoPi(M.longitude);let A=!1;if(g(l)){const L=v.zeroToTwoPi(l),U=Math.min(w.longitude,M.longitude),Z=Math.max(w.longitude,M.longitude),W=L>=U&&L<=Z;if(g(d)){const y=Math.abs(w.longitude-M.longitude),C=v.TWO_PI-y;(W?y:C)<(W?C:y)*d&&!W&&(A=!0)}else W||(A=!0)}A?oL(w,M):aL(w,M);const D=lp(b,n,w.height,M.height,s),z=iL(S,r,D,h);function $(){const L=w.longitude,U=M.longitude,Z=w.latitude,W=M.latitude;return function(y){const C=y.time/t,x=m.fromRadians(v.lerp(L,U,C),v.lerp(Z,W,C),D(C),e.globe.ellipsoid);b.setView({destination:x,orientation:{heading:v.lerp(T,i,C),pitch:z(C),roll:v.lerp(_,a,C)}})}}return $()}function uL(e,t,n,i,r,a,s){const{Cartesian2:l,Cartesian3:d,Math:h}=Cesium,m=e.camera,p=d.clone(m.position,E_),g=$s(m.heading,i),v=m.frustum.right-m.frustum.left,b=lp(m,n,v,n.z,s);function P(w){const S=w.time/t;m.setView({orientation:{heading:h.lerp(g,i,S)}}),l.lerp(p,n,S,m.position);const T=b(S),_=m.frustum,M=_.top/_.right,A=(T-(_.right-_.left))*.5;_.right+=A,_.left-=A,_.top=M*_.right,_.bottom=-_.top}return P}const x_={},dL={};function cp(e,t){return{startObject:{},stopObject:{},duration:0,complete:e,cancel:t}}function O_(e,t){function n(){typeof t=="function"&&t(),e.enableInputs=!0}return n}function hL(e,{emit:t},n){const i={},r={},a={},s={};let l,d,h,m,p;const g=u.ref(0),v=u.ref(0),b=u.ref(0);let P=0,w={},S=!1,T,_,M=0,A={},D=0;const z=u.ref(null),$=u.ref(null),L=x=>{var B,O;x.stopPropagation&&x.stopPropagation(),x.preventDefault&&x.preventDefault(),(B=Me(z))==null||B.hide(),(O=Me($))==null||O.hide();const{SceneMode:I,Cartesian2:V}=Cesium;if(n.viewer.scene.mode===I.MORPHING)return!0;const j=x.currentTarget,N=j.getBoundingClientRect(),H=N.width/2,ne=new V((N.right-N.left)/2,(N.bottom-N.top)/2);let ie;x instanceof MouseEvent?ie=new V(x.clientX-N.left,x.clientY-N.top):x instanceof TouchEvent&&(ie=new V(x.changedTouches[0].clientX-N.left,x.changedTouches[0].clientY-N.top));const ee=V.subtract(ie,ne,i),Q=V.magnitude(ee)/H;if(Q<50/145)y(j,ee);else if(Q<1)C(j,ee);else return!0},U=x=>{const{Cartesian2:B,Cartesian3:O,defined:I,Ellipsoid:V,Matrix4:j,Ray:N,SceneMode:H,Transforms:ne}=Cesium,{viewer:ie}=n,ee=ie.scene,Q=ee.camera,G=ee.screenSpaceCameraController;if(ee.mode===H.MORPHING||!G.enableInputs)return!0;if(ee.mode===H.COLUMBUS_VIEW&&!G.enableTranslate||(ee.mode===H.SCENE3D||ee.mode===H.COLUMBUS_VIEW)&&(!G.enableLook||ee.mode===H.SCENE3D&&!G.enableRotate))return;const J=new B;J.x=ee.canvas.clientWidth/2,J.y=ee.canvas.clientHeight/2;const oe=new N,Y=Q.getPickRay(J,oe),X=ee.globe.pick(Y,ee,s);if(!lr(X)||!I(X)){ie.camera.flyHome();return}const se=ze(n,"compassEvt");se&&t("compassEvt",{type:"reset",camera:ie.camera,status:"start",target:x.currentTarget});const re=ne.eastNorthUpToFixedFrame(X,ie.scene.globe.ellipsoid),de=O.subtract(X,Q.position,new O),ce=__.createTween(ee,{destination:j.multiplyByPoint(re,new O(0,0,O.magnitude(de)),new O),direction:j.multiplyByPointAsVector(re,new O(0,0,-1),new O),up:j.multiplyByPointAsVector(re,new O(0,1,0),new O),duration:e.duration,complete:()=>{se&&t("compassEvt",{type:"reset",camera:ie.camera,status:"end",target:x.currentTarget})},cancel:()=>{se&&t("compassEvt",{type:"reset",camera:ie.camera,status:"cancel",target:x.currentTarget})}});ee.tweens.add(ce)},Z=()=>{b.value=0,v.value=0},W=()=>{const{defined:x}=Cesium;x(n.viewer)?(l&&(l(),l=void 0),l=n.viewer.scene.postRender.addEventListener(function(){g.value!==n.viewer.scene.camera.heading&&(g.value=n.viewer.scene.camera.heading)})):l&&(l(),l=void 0)},y=(x,B)=>{const{Cartesian2:O,Cartesian3:I,defined:V,getTimestamp:j,Math:N,Matrix4:H,Ray:ne,SceneMode:ie,Transforms:ee}=Cesium;let Q=n.viewer.scene,G=Q.camera;const J=Q.screenSpaceCameraController;if(Q.mode===ie.MORPHING||!J.enableInputs)return;switch(Q.mode){case ie.COLUMBUS_VIEW:if(J.enableLook)break;if(!J.enableTranslate||!J.enableTilt)return;break;case ie.SCENE3D:if(J.enableLook)break;if(!J.enableTilt||!J.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!J.enableTranslate)return;break}const oe=ze(n,"compassEvt");oe&&t("compassEvt",{type:"orbit",camera:Q.camera,status:"start",target:x}),document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",m,!1),document.removeEventListener("touchmove",h,!1),document.removeEventListener("touchend",m,!1),V(p)&&n.viewer.clock.onTick.removeEventListener(p),h=void 0,m=void 0,p=void 0,P=j();const Y=new O;Y.x=Q.canvas.clientWidth/2,Y.y=Q.canvas.clientHeight/2;const X=new ne,se=G.getPickRay(Y,X),re=Q.globe.pick(se,Q,s);V(re)?(w=ee.eastNorthUpToFixedFrame(re||new Cesium.Cartesian3,Q.globe.ellipsoid,a),S=!1):(w=ee.eastNorthUpToFixedFrame(G.positionWC,Q.globe.ellipsoid,a),S=!0),p=function(ce){const he=j(),ge=he-P,Pe=(b.value-.5)*2.5/1e3,Ie=ge*Pe,_e=v.value+N.PI_OVER_TWO,Ee=Math.cos(_e)*Ie,De=Math.sin(_e)*Ie;Q=n.viewer.scene,G=Q.camera;const Se=H.clone(G.transform,r);G.lookAtTransform(w),S?(G.look(I.UNIT_Z,-Ee),G.look(G.right,-De)):(G.rotateLeft(Ee),G.rotateUp(De)),G.lookAtTransform(Se),P=he};function de(ce,he){const ge=Math.atan2(-ce.y,ce.x);v.value=N.zeroToTwoPi(ge-N.PI_OVER_TWO);const Pe=O.magnitude(ce),Ie=he/2,_e=Math.min(Pe/Ie,1),Ee=.5*_e*_e+.5;b.value=Ee}h=function(ce){const he=x.getBoundingClientRect(),ge=new O((he.right-he.left)/2,(he.bottom-he.top)/2);let Pe;ce instanceof MouseEvent?Pe=new O(ce.clientX-he.left,ce.clientY-he.top):ce instanceof TouchEvent&&(Pe=new O(ce.changedTouches[0].clientX-he.left,ce.changedTouches[0].clientY-he.top));const Ie=O.subtract(Pe,ge,i);de(Ie,he.width),oe&&t("compassEvt",{type:"orbit",camera:Q.camera,status:"changing",target:x})},m=function(ce){document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",m,!1),document.removeEventListener("touchmove",h,!1),document.removeEventListener("touchend",m,!1),V(p)&&n.viewer.clock.onTick.removeEventListener(p),h=void 0,m=void 0,p=void 0,Z(),oe&&t("compassEvt",{type:"orbit",camera:Q.camera,status:"end",target:x})},document.addEventListener("mousemove",h,!1),document.addEventListener("mouseup",m,!1),document.addEventListener("touchmove",h,!1),document.addEventListener("touchend",m,!1),d=n.viewer.clock.onTick.addEventListener(p),de(B,x.getBoundingClientRect().width)},C=(x,B)=>{if(!e.enableCompassOuterRing)return;const O=n.viewer.scene;let I=O.camera;const V=O.screenSpaceCameraController;if(O.mode===Cesium.SceneMode.MORPHING||O.mode===Cesium.SceneMode.SCENE2D||!V.enableInputs||!V.enableLook&&(O.mode===Cesium.SceneMode.COLUMBUS_VIEW||O.mode===Cesium.SceneMode.SCENE3D&&!V.enableRotate))return;document.removeEventListener("mousemove",_,!1),document.removeEventListener("touchmove",_,!1),document.removeEventListener("mouseup",T,!1),document.removeEventListener("touchend",T,!1);const{Cartesian2:j,Cartesian3:N,defined:H,Math:ne,Matrix4:ie,Ray:ee,Transforms:Q}=Cesium;_=void 0,T=void 0;const G=ze(n,"compassEvt");G&&t("compassEvt",{type:"rotate",camera:O.camera,status:"start",target:x}),M=Math.atan2(-B.y,B.x);const J=new j;J.x=O.canvas.clientWidth/2,J.y=O.canvas.clientHeight/2;const oe=new ee,Y=I.getPickRay(J,oe),X=O.globe.pick(Y,O,s);H(X)?A=Q.eastNorthUpToFixedFrame(X||new N,O.globe.ellipsoid,a):A=Q.eastNorthUpToFixedFrame(I.positionWC,O.globe.ellipsoid,a);let se=ie.clone(I.transform,r);I.lookAtTransform(A),D=Math.atan2(I.position.y,I.position.x),N.magnitude(new N(I.position.x,I.position.y,0)),I.lookAtTransform(se),_=function(re){const de=x.getBoundingClientRect(),ce=new j((de.right-de.left)/2,(de.bottom-de.top)/2);let he;re instanceof MouseEvent?he=new j(re.clientX-de.left,re.clientY-de.top):re instanceof TouchEvent&&(he=new j(re.changedTouches[0].clientX-de.left,re.changedTouches[0].clientY-de.top));const ge=j.subtract(he,ce,i),Pe=Math.atan2(-ge.y,ge.x)-M,Ie=ne.zeroToTwoPi(D-Pe);I=n.viewer.scene.camera,se=ie.clone(I.transform,r),I.lookAtTransform(A);const _e=Math.atan2(I.position.y,I.position.x);I.rotateRight(Ie-_e),I.lookAtTransform(se),G&&t("compassEvt",{type:"rotate",camera:O.camera,status:"changing",target:x})},T=function(re){document.removeEventListener("mousemove",_,!1),document.removeEventListener("touchmove",_,!1),document.removeEventListener("mouseup",T,!1),document.removeEventListener("touchend",T,!1),_=void 0,T=void 0,G&&t("compassEvt",{type:"rotate",camera:O.camera,status:"end",target:x})},document.addEventListener("mousemove",_,!1),document.addEventListener("touchmove",_,!1),document.addEventListener("mouseup",T,!1),document.addEventListener("touchend",T,!1)};return{heading:g,orbitCursorAngle:v,orbitCursorOpacity:b,handleDoubleClick:U,handleMouseDown:L,resetRotater:Z,onTooltipBeforeShow:x=>{(_!==void 0||h!==void 0)&&(x.cancel=!0)},viewerChange:W,load:async x=>(n.viewer=x,W(),!0),unload:async()=>(document.removeEventListener("mousemove",h,!1),document.removeEventListener("mouseup",m,!1),document.removeEventListener("touchmove",h,!1),document.removeEventListener("touchend",m,!1),d&&d(),l&&l(),!0),iconOuterTooltipRef:z,iconInnerTooltipRef:$}}const mL={...Le,compassEvt:e=>!0},up=ap;var dp=u.defineComponent({name:"VcCompass",props:up,emits:mL,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcCompass";const r=rt(e,t,i);if(r===void 0)return;const{t:a}=Qt(),s=cn(i),{$services:l}=r,d=hL(e,t,i),h=pi(e),m=u.ref(null),p=u.ref(null),g=((n=s.proxy)==null?void 0:n.$options.name)==="VcNavigation",v=u.ref(g),b=u.reactive({});u.watch(()=>e,D=>{u.nextTick(()=>{i.mounted&&A()})},{deep:!0});const P=u.computed(()=>Object.assign({},sp.innerOptions,e.innerOptions)),w=u.computed(()=>Object.assign({},sp.outerOptions,e.outerOptions)),S=u.computed(()=>Object.assign({},sp.markerOptions,e.markerOptions)),T=u.computed(()=>({transform:"translate(-50%,-50%) rotate(-"+d.heading.value+"rad)",WebkitTransform:"translate(-50%,-50%) rotate(-"+d.heading.value+"rad)",opacity:void 0,background:w.value.background,color:w.value.color})),_=u.computed(()=>({transform:"rotate(-"+d.orbitCursorAngle.value+"rad)",WebkitTransform:"rotate(-"+d.orbitCursorAngle.value+"rad)",opacity:d.orbitCursorOpacity.value,color:S.value.color})),M=u.computed(()=>({background:P.value.background,color:P.value.color}));i.createCesiumObject=async()=>m,i.mount=async()=>{var D;v.value=!0,u.nextTick(()=>{A()});const{viewer:z}=l;return(D=z.viewerWidgetResized)==null||D.raiseEvent({type:i.cesiumClass,status:"mounted",target:Me(m)}),d.load(l.viewer)},i.unmount=async()=>{var D;v.value=!1;const{viewer:z}=l;return(D=z.viewerWidgetResized)==null||D.raiseEvent({type:i.cesiumClass,status:"unmounted",target:Me(m)}),d.unload()};const A=()=>{var D;const z=h.style.value,$=(D=Me(p))==null?void 0:D.$el;if($!==void 0){const L=$.getBoundingClientRect();z.width=`${L.width}px`,z.height=`${L.height}px`}if(typeof e.teleportToViewer=="undefined"||e.teleportToViewer){b.left=z.left,b.top=z.top,b.transform=z.transform;const L=h.attach.value;$!==void 0&&((L.bottom||L.top)&&!L.left&&!L.right&&(z.left="50%",z.transform="translate(-50%, 0)"),(L.left||L.right)&&!L.top&&!L.bottom&&(z.top="50%",z.transform="translate(0, -50%)"))}Object.assign(b,z)};return()=>{if(v.value){let D=[];D=Ai(t.slots.default,D),D.push(u.h(zn,{ref:p,class:"vc-compass-outerRing absolute-center",style:T.value,size:w.value.size,dense:!0,round:!0,disabled:!e.enableCompassOuterRing},()=>[u.h(Dr,{size:w.value.size,name:w.value.icon}),w.value.tooltip?u.h(mn,{ref:d.iconOuterTooltipRef,...w.value.tooltip,onBeforeShow:d.onTooltipBeforeShow},()=>u.h("strong",{},w.value.tooltip.tip||a("vc.navigation.compass.outerTip"))):u.createCommentVNode("v-if")])),D.push(u.h(zn,{class:"vc-compass-innerRing absolute-center",style:M.value,size:P.value.size,dense:!0,round:!0},()=>[u.h(Dr,{size:P.value.size,name:P.value.icon}),P.value.tooltip?u.h(mn,{ref:d.iconInnerTooltipRef,...P.value.tooltip,onBeforeShow:d.onTooltipBeforeShow},()=>u.h("strong",{},P.value.tooltip.tip||a("vc.navigation.compass.innerTip"))):u.createCommentVNode("v-if")])),D.push(_.value.opacity?u.h(zn,{class:"vc-compass-rotation-marker absolute-center",dense:!0,round:!0},()=>[u.h(Dr,{size:S.value.size,name:S.value.icon,style:_.value})]):u.createCommentVNode("v-if"));const z=u.h("div",{ref:m,class:`vc-compass ${h.classes.value} ${e.customClass}`,style:b,onDblclick:d.handleDoubleClick,onMousedown:d.handleMouseDown,onMouseup:d.resetRotater,onTouchend:d.resetRotater,onTouchstart:d.handleMouseDown},D);return!g&&e.teleportToViewer?u.h(u.Teleport,{to:l.viewer._element},z):z}else return u.createCommentVNode("v-if")}}});const hp={enableResetButton:{type:Boolean,default:!0},zoomAmount:{type:Number,default:2},duration:{type:Number,default:.5},durationReset:{type:Number},defaultResetView:{type:Object,default:()=>({position:{lng:105,lat:30,height:190595685e-1}})},overrideViewerCamera:{type:Boolean,default:!1},...eo,background:{type:String,default:"#3f4854"},border:{type:String,default:"solid 1px rgba(255, 255, 255, 0.2)"},borderRadius:{type:String,default:"100px"},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},zoomInOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-in",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomOutOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-out",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomResetOptions:{type:Object,default:()=>({icon:"vc-icons-reset",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},mp=Oi(hp);function pL(e,{emit:t},n,i){const r=u.ref(null),a=u.ref(null),s=u.ref(null),l=g=>{h(1/e.zoomAmount,g)},d=g=>{h(e.zoomAmount,g)},h=(g,v)=>{var b,P;(b=Me(r))==null||b.hide(),(P=Me(a))==null||P.hide();const{Cartesian3:w,defined:S,IntersectionTests:T,Ray:_,SceneMode:M}=Cesium,{viewer:A}=i;if(S(A)){const D=A.scene,z=D.screenSpaceCameraController;if(!z.enableInputs||!z.enableZoom||D.mode===M.COLUMBUS_VIEW&&!z.enableTranslate)return;const $=D.camera;let L;switch(D.mode){case M.MORPHING:break;case M.SCENE2D:{$.zoomIn($.positionCartographic.height*(1-g));break}default:{let U;if(S(A.trackedEntity)?U=new Cesium.Cartesian3:U=p(A.scene),Cesium.defined(U))L={direction:$.direction,up:$.up};else{const V=new _($.worldToCameraCoordinatesPoint(D.globe.ellipsoid.cartographicToCartesian($.positionCartographic)),$.directionWC);U=T.grazingAltitudeLocation(V,D.globe.ellipsoid),L={heading:$.heading,pitch:$.pitch,roll:$.roll}}const Z=new w,W=w.subtract($.position,U,Z),y=w.multiplyByScalar(W,g,W),C=w.add(U,y,U),x=g<1?"zoomIn":"zoomOut",B=v.currentTarget,O=ch($.positionCartographic.height).toFixed(0),I=ze(n,"zoomEvt");I&&t("zoomEvt",{type:x,camera:A.camera,status:"start",target:B,level:O}),Cesium.defined(A.trackedEntity)||D.mode===M.COLUMBUS_VIEW?$.position=C:$.flyTo({destination:C,orientation:L,duration:e.duration,convert:!1,complete:()=>{I&&t("zoomEvt",{type:x,camera:A.camera,status:"end",target:B,level:O})},cancel:()=>{I&&t("zoomEvt",{type:x,camera:A.camera,status:"cancel",target:B,level:O})}})}}}},m=g=>{var v;(v=Me(s))==null||v.hide();const{viewer:b}=i;if(b.scene.screenSpaceCameraController.enableInputs)if(Cesium.defined(b.trackedEntity)){const P=b.trackedEntity;b.trackedEntity=void 0,b.trackedEntity=P}else{const P=ze(n,"zoomEvt"),w=g==null?void 0:g.currentTarget,S=ch(b.camera.positionCartographic.height).toFixed(0);P&&t("zoomEvt",{type:"zoomReset",camera:b.camera,status:"start",target:w,level:S});const T=()=>{P&&t("zoomEvt",{type:"zoomReset",camera:b.camera,status:"end",target:w,level:S})},_=()=>{P&&t("zoomEvt",{type:"zoomReset",camera:b.camera,status:"cancel",target:w,level:S})},M=e.defaultResetView,A={duration:e.durationReset,complete:T,cancel:_};vD(b,M,A)}},p=g=>{const{defined:v,IntersectionTests:b,Ray:P}=Cesium,w=new P(g.camera.positionWC,g.camera.directionWC),S=b.rayEllipsoid(w,g.globe.ellipsoid);return v(S)?P.getPoint(w,S.start):b.grazingAltitudeLocation(w,g.globe.ellipsoid)};return{zoomIn:l,zoomOut:d,zoomReset:m,zoomInTooltipRef:r,zoomOutTooltipRef:a,resetTooltipRef:s}}const fL={...Le,zoomEvt:e=>!0},pp=hp;var fp=u.defineComponent({name:"VcZoomControl",props:pp,emits:fL,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcZoomControl",i.cesiumEvents=[];const r=rt(e,t,i);if(r===void 0)return;const{t:a}=Qt(),{$services:s}=r,l=pL(e,t,i,s),d=pi(e),h=u.ref(null),m=u.ref(null),p=u.ref(null),g=u.ref(null),v=((n=cn(i).proxy)==null?void 0:n.$options.name)==="VcNavigation",b=u.ref(v),P=u.reactive({});u.watch(()=>e,A=>{u.nextTick(()=>{i.mounted&&_()})},{deep:!0});const w=u.computed(()=>Object.assign({},mp.zoomOutOptions,e.zoomOutOptions)),S=u.computed(()=>Object.assign({},mp.zoomInOptions,e.zoomInOptions)),T=u.computed(()=>Object.assign({},mp.zoomResetOptions,e.zoomResetOptions));i.createCesiumObject=async()=>{const{viewer:A}=s;if(e.overrideViewerCamera){const D=e.defaultResetView;ah(A,D)}return h},i.mount=async()=>{var A;b.value=!0,u.nextTick(()=>{_()});const{viewer:D}=s;return(A=D.viewerWidgetResized)==null||A.raiseEvent({type:i.cesiumClass,status:"mounted",target:Me(h)}),!0},i.unmount=async()=>{var A;b.value=!1;const{viewer:D}=s;return(A=D.viewerWidgetResized)==null||A.raiseEvent({type:i.cesiumClass,status:"unmounted",target:Me(h)}),!0};const _=()=>{var A,D,z;const $=d.style.value;if(P.left=$.left,P.top=$.top,P.transform=$.transform,$.flexDirection=e.direction==="vertical"?"column":"row",$.background=e.background,$.borderRadius=e.borderRadius,$.border=e.border,!v){const L=(A=Me(m))==null?void 0:A.$el,U=(D=Me(p))==null?void 0:D.$el,Z=(z=Me(g))==null?void 0:z.$el;let W=0,y=0;if(L!==void 0){const C=L.getBoundingClientRect();e.direction==="horizontal"?(W+=C.width,y=C.height>y?C.height:y):(y+=C.height,W=C.width>W?C.width:W)}if(U!==void 0){const C=U.getBoundingClientRect();e.direction==="horizontal"?(W+=C.width,y=C.height>y?C.height:y):(y+=C.height,W=C.width>W?C.width:W)}if(Z!==void 0){const C=Z.getBoundingClientRect();e.direction==="horizontal"?(W+=C.width,y=C.height>y?C.height:y):(y+=C.height,W=C.width>W?C.width:W)}if($.width=`${W+4}px`,$.height=`${y+4}px`,typeof e.teleportToViewer=="undefined"||e.teleportToViewer){const C=d.attach.value;(C.bottom||C.top)&&!C.left&&!C.right&&($.left="50%",$.transform="translate(-50%, 0)"),(C.left||C.right)&&!C.top&&!C.bottom&&($.top="50%",$.transform="translate(0, -50%)")}}Object.assign(P,$)},M=(A,D)=>{var z,$,L;let U,Z,W,y;D==="zoomIn"?(U=m,Z=l.zoomInTooltipRef,W=((z=A.tooltip)==null?void 0:z.tip)||a("vc.navigation.zoomCotrol.zoomInTip"),y=l.zoomIn):D==="zoomOut"?(U=g,Z=l.zoomOutTooltipRef,W=(($=A.tooltip)==null?void 0:$.tip)||a("vc.navigation.zoomCotrol.zoomOutTip"),y=l.zoomOut):D==="zoomReset"&&(U=p,Z=l.resetTooltipRef,W=((L=A.tooltip)==null?void 0:L.tip)||a("vc.navigation.zoomCotrol.zoomResetTip"),y=l.zoomReset);const C=[];return C.push(u.h(Dr,{name:A.icon,size:A.size})),C.push(u.h("div",null,A.label)),A.tooltip?C.push(u.h(mn,{ref:Z,...A.tooltip},()=>u.h("strong",null,W))):C.push(u.createCommentVNode("v-if")),u.h(zn,{class:`vc-${pe(D)}`,ref:U,size:A.size,flat:A.flat,stack:A.stack,round:A.round,dense:!0,style:{color:A.color,background:A.background},onClick:y},()=>Ai(t.slots.default,C))};return Object.assign(i.proxy,{zoomIn:A=>l.zoomIn(A),zoomOut:A=>l.zoomOut(A),zoomReset:A=>l.zoomReset(A)}),()=>{if(b.value){const A=[];A.push(u.h("li",null,M(S.value,"zoomIn"))),e.enableResetButton?A.push(u.h("li",null,M(T.value,"zoomReset"))):A.push(u.createCommentVNode("v-if")),A.push(u.h("li",null,M(w.value,"zoomOut")));const D=u.h("div",{ref:h,class:`vc-zoom-control ${d.classes.value} ${e.customClass}`,style:P},u.h("ul",{class:"vc-list"},A));return!v&&e.teleportToViewer?u.h(u.Teleport,{to:s.viewer._element},D):D}else return u.createCommentVNode("v-if")}}});const gL=u.defineComponent({name:"VcPrintView",props:{options:Object},setup(e){const t=u.ref(!1),n=u.ref(!1),i=u.getCurrentInstance();i.cesiumClass="VcPrintView";const{t:r}=Qt(),a=()=>{var d,h;if(t.value)return;const m=(d=e.options)==null?void 0:d.printWindow.document.getElementsByTagName("img");if(m.length===0)return;let p=!0;for(let g=0;p&&g<m.length;++g)p=m[g].complete;p&&(l(),t.value=p,t.value&&!n.value&&((h=e.options)!=null&&h.readyCallback&&e.options.readyCallback(e.options.printWindow),n.value=!0))};let s;const l=()=>{s&&s()};return u.onMounted(()=>{var d;const h=(d=e.options)==null?void 0:d.printWindow,m=window,p=h==null?void 0:h.setInterval(a,200),g=m.setInterval(a,200);s=()=>{h.clearInterval(p),m.clearInterval(g),s=void 0}}),u.onUnmounted(()=>{l()}),()=>{var d,h,m,p,g,v;const b=[];if(b.push(u.h("p",{},u.h("img",{src:(d=e.options)==null?void 0:d.image,alt:r("vc.navigation.screenshot"),class:"vc-map-image"}))),(h=e.options)!=null&&h.credits.length&&(m=e.options)!=null&&m.showCredit?b.push(u.h("h1",{},r("vc.navigation.credit"))):b.push(u.createCommentVNode("v-if")),(p=e.options)!=null&&p.credits.length&&(g=e.options)!=null&&g.showCredit){const P=[];(v=e.options)==null||v.credits.forEach(w=>{P.push(u.h("li",{innerHTML:w}))}),b.push(u.h("ul",{},P))}else b.push(u.createCommentVNode("v-if"));return u.h("div",{},b)}}}),vL=`
  .background {
    width: 100%;
    fill: rgba(255, 255, 255, 1.0);
  }

  .map-image {
    max-width: 95vw;
    max-height: 95vh;
  }

  .layer-legends {
    display: inline;
    float: left;
    padding-left: 20px;
    padding-right: 20px;
  }

  .layer-title {
    font-weight: bold;
  }

  h1, h2, h3 {
    clear: both;
  }
`,yL=e=>{const{printWindow:t=window.open(),closeCallback:n,title:i}=e;n&&t.addEventListener("unload",()=>{n(t)}),t.document.open(),t.document.close(),t.document.head.innerHTML=`
    <meta charset="UTF-8">
    <title>${e.title}</title>
    <style>${vL}</style>
    `,t.document.body.innerHTML='<div id="print"></div>',e.printWindow=e.printWindow||t,u.createApp(gL,{options:e}).mount(t.document.getElementById("print"))};var M_={showCredit:{type:Boolean,default:!0},printAutomatically:{type:Boolean,default:!1},showPrintView:{type:Boolean,default:!0},downloadAutomatically:{type:Boolean,default:!1},...eo,icon:{type:String,default:"vc-icons-capture"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},screenshotName:String,customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};function bL(e){const t=As();let n=0;const i=setTimeout(function(){t.reject(!1)},1e4);function r(){clearTimeout(i)}function a(){n<=0&&t.resolve()}return e.matchMedia&&e.matchMedia("print").addListener(function(s){r(),s.matches?++n:(--n,a())}),e.onbeforeprint=function(){r(),++n},e.onafterprint=function(){r(),--n,a()},e.document.execCommand("print",!0,null)||e.print(),t.promise}const CL={...Le,printEvt:e=>!0},gp=M_;var vp=u.defineComponent({name:"VcPrint",props:gp,emits:CL,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcPrint",i.cesiumEvents=[];const r=rt(e,t,i);if(r===void 0)return;const{t:a}=Qt(),{$services:s}=r,l=u.ref(null),d=u.ref(null),h=u.ref(null),m=pi(e),p=u.ref(!1),g=((n=cn(i).proxy)==null?void 0:n.$options.name)==="VcNavigation",v=u.ref(g),b=u.reactive({});u.watch(()=>e,D=>{u.nextTick(()=>{i.mounted&&P()})},{deep:!0}),i.createCesiumObject=async()=>l,i.mount=async()=>{var D;v.value=!0,u.nextTick(()=>{P()});const{viewer:z}=s;return(D=z.viewerWidgetResized)==null||D.raiseEvent({type:i.cesiumClass,status:"mounted",target:Me(l)}),!0},i.unmount=async()=>{var D;v.value=!1;const{viewer:z}=s;return(D=z.viewerWidgetResized)==null||D.raiseEvent({type:i.cesiumClass,status:"unmounted",target:Me(l)}),!0};const P=()=>{var D;const z=m.style.value;if(b.left=z.left,b.top=z.top,b.transform=z.transform,!g){const $=m.attach.value;((D=Me(h))==null?void 0:D.$el)!==void 0&&(typeof e.teleportToViewer=="undefined"||e.teleportToViewer)&&(($.bottom||$.top)&&!$.left&&!$.right&&(z.left="50%",z.transform="translate(-50%, 0)"),($.left||$.right)&&!$.top&&!$.bottom&&(z.top="50%",z.transform="translate(0, -50%)"))}Object.assign(b,z)},w=()=>{var D;(D=Me(d))==null||D.hide();const{viewer:z}=s;gD(z).then($=>{if(e.downloadAutomatically){const L=document.createElement("a");L.download=e.screenshotName||a("vc.navigation.print.screenshot"),L.style.display="none",L.href=$,document.body.appendChild(L),L.click(),document.body.removeChild(L)}(e.printAutomatically||e.showPrintView)&&(e.showPrintView?T($):e.printAutomatically&&S($)),ze(i,"printEvt")&&t.emit("printEvt",{type:"capture",image:$,status:"end"})})},S=D=>{_(!0,!0,D)},T=D=>{_(!1,!1,D)},_=(D,z,$)=>{p.value=!0;let L;D&&(L=document.createElement("iframe"),document.body.appendChild(L));const{viewer:U}=s;yL({image:$,showCredit:e.showCredit,credits:M(U),printWindow:L?L.contentWindow:void 0,title:a("vc.navigation.print.printViewTitle"),readyCallback:Z=>{z&&bL(Z).catch(W=>{r.logger.warn(W)}).then(()=>{L&&document.body.removeChild(L),D&&(p.value=!1)})},closeCallback:Z=>{D&&(p.value=!1)}}),D||(p.value=!1)},M=D=>D.scene.frameState.creditDisplay._currentFrameCredits.screenCredits.values.concat(D.scene.frameState.creditDisplay._currentFrameCredits.lightboxCredits.values).map(z=>z.html),A=D=>{p.value&&(D.cancel=!0)};return()=>{if(v.value){const D=[];D.push(u.h(Dr,{name:e.icon,size:e.size})),D.push(u.h("div",null,e.label)),Lt(e.tooltip)?D.push(u.h(mn,{ref:d,onBeforeShow:A,...e.tooltip},()=>u.h("strong",null,Lt(e.tooltip)&&e.tooltip.tip||a("vc.navigation.print.printTip")))):D.push(u.createCommentVNode("v-if"));const z=[u.h(zn,{ref:h,size:e.size,disabled:p.value,flat:e.flat,stack:e.stack,round:e.round,style:{color:e.color,background:e.background},dense:!0,onClick:w},()=>D)],$=u.h("div",{ref:l,class:`vc-print ${m.classes.value} ${e.customClass}`,style:b},z);return!g&&e.teleportToViewer?u.h(u.Teleport,{to:s.viewer._element},$):$}else return u.createCommentVNode("v-if")}}}),Uc={exports:{}};Uc.exports,function(e,t){(function(n,i){e.exports=i()})(ui,function(){function n(p){var g=[];return p.AMapUI&&g.push(i(p.AMapUI)),p.Loca&&g.push(r(p.Loca)),Promise.all(g)}function i(p){return new Promise(function(g,v){var b=[];if(p.plugins)for(var P=0;P<p.plugins.length;P+=1)s.AMapUI.plugins.indexOf(p.plugins[P])==-1&&b.push(p.plugins[P]);if(l.AMapUI===a.failed)v("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(l.AMapUI===a.notload){l.AMapUI=a.loading,s.AMapUI.version=p.version||s.AMapUI.version,P=s.AMapUI.version;var w=document.body||document.head,S=document.createElement("script");S.type="text/javascript",S.src="https://webapi.amap.com/ui/"+P+"/main.js",S.onerror=function(T){l.AMapUI=a.failed,v("\u8BF7\u6C42 AMapUI \u5931\u8D25")},S.onload=function(){if(l.AMapUI=a.loaded,b.length)window.AMapUI.loadUI(b,function(){for(var T=0,_=b.length;T<_;T++){var M=b[T].split("/").slice(-1)[0];window.AMapUI[M]=arguments[T]}for(g();d.AMapUI.length;)d.AMapUI.splice(0,1)[0]()});else for(g();d.AMapUI.length;)d.AMapUI.splice(0,1)[0]()},w.appendChild(S)}else l.AMapUI===a.loaded?p.version&&p.version!==s.AMapUI.version?v("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):b.length?window.AMapUI.loadUI(b,function(){for(var T=0,_=b.length;T<_;T++){var M=b[T].split("/").slice(-1)[0];window.AMapUI[M]=arguments[T]}g()}):g():p.version&&p.version!==s.AMapUI.version?v("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):d.AMapUI.push(function(T){T?v(T):b.length?window.AMapUI.loadUI(b,function(){for(var _=0,M=b.length;_<M;_++){var A=b[_].split("/").slice(-1)[0];window.AMapUI[A]=arguments[_]}g()}):g()})})}function r(p){return new Promise(function(g,v){if(l.Loca===a.failed)v("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(l.Loca===a.notload){l.Loca=a.loading,s.Loca.version=p.version||s.Loca.version;var b=s.Loca.version,P=s.AMap.version.startsWith("2"),w=b.startsWith("2");if(P&&!w||!P&&w)v("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{P=s.key,w=document.body||document.head;var S=document.createElement("script");S.type="text/javascript",S.src="https://webapi.amap.com/loca?v="+b+"&key="+P,S.onerror=function(T){l.Loca=a.failed,v("\u8BF7\u6C42 AMapUI \u5931\u8D25")},S.onload=function(){for(l.Loca=a.loaded,g();d.Loca.length;)d.Loca.splice(0,1)[0]()},w.appendChild(S)}}else l.Loca===a.loaded?p.version&&p.version!==s.Loca.version?v("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):g():p.version&&p.version!==s.Loca.version?v("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):d.Loca.push(function(T){T?v(T):v()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a;(function(p){p.notload="notload",p.loading="loading",p.loaded="loaded",p.failed="failed"})(a||(a={}));var s={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},d={AMap:[],AMapUI:[],Loca:[]},h=[],m=function(p){typeof p=="function"&&(l.AMap===a.loaded?p(window.AMap):h.push(p))};return{load:function(p){return new Promise(function(g,v){if(l.AMap==a.failed)v("");else if(l.AMap==a.notload){var b=p.key,P=p.version,w=p.plugins;b?(window.AMap&&location.host!=="lbs.amap.com"&&v("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),s.key=b,s.AMap.version=P||s.AMap.version,s.AMap.plugins=w||s.AMap.plugins,l.AMap=a.loading,P=document.body||document.head,window.___onAPILoaded=function(T){if(delete window.___onAPILoaded,T)l.AMap=a.failed,v(T);else for(l.AMap=a.loaded,n(p).then(function(){g(window.AMap)}).catch(v);h.length;)h.splice(0,1)[0]()},w=document.createElement("script"),w.type="text/javascript",w.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+s.AMap.version+"&key="+b+"&plugin="+s.AMap.plugins.join(","),w.onerror=function(T){l.AMap=a.failed,v(T)},P.appendChild(w)):v("\u8BF7\u586B\u5199key")}else if(l.AMap==a.loaded)if(p.key&&p.key!==s.key)v("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(p.version&&p.version!==s.AMap.version)v("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(b=[],p.plugins)for(P=0;P<p.plugins.length;P+=1)s.AMap.plugins.indexOf(p.plugins[P])==-1&&b.push(p.plugins[P]);b.length?window.AMap.plugin(b,function(){n(p).then(function(){g(window.AMap)}).catch(v)}):n(p).then(function(){g(window.AMap)}).catch(v)}else if(p.key&&p.key!==s.key)v("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(p.version&&p.version!==s.AMap.version)v("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var S=[];if(p.plugins)for(P=0;P<p.plugins.length;P+=1)s.AMap.plugins.indexOf(p.plugins[P])==-1&&S.push(p.plugins[P]);m(function(){S.length?window.AMap.plugin(S,function(){n(p).then(function(){g(window.AMap)}).catch(v)}):n(p).then(function(){g(window.AMap)}).catch(v)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,s={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},d={AMap:[],AMapUI:[],Loca:[]}}}})}(Uc,Uc.exports);var wL=Uc.exports,_L=th(wL),S_={geolocation:{type:Object,default:()=>({enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},amap:Object,id:{type:String,default:"My Location"},pointColor:{type:[Array,Object,String],default:"#08ABD5"},pixelSize:{type:Number,default:25/2},outlineWidth:{type:Number,default:3},outlineColor:{type:[Array,Object,String],default:"#ffffff"},level:{type:Number,default:6},duration:{type:Number,default:3},factor:{type:Number,default:.01},maximumHeight:Number,hpr:{type:Array,default:()=>[0,0,3e3]},customAPI:Function,customApi:Function,description:Function,...eo,icon:{type:String,default:"vc-icons-geolocation"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},loadingType:{type:String,default:"puff"},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const PL={...Le,locationEvt:e=>!0},yp=S_;var bp=u.defineComponent({name:"VcMyLocation",props:yp,emits:PL,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcMyLocation",i.cesiumEvents=[];const r=rt(e,t,i);if(r===void 0)return;const{$services:a}=r,{t:s}=Qt(),l=u.ref(null),d=u.ref(null),h=u.ref(null),m=u.ref(!1),p=pi(e),g=((n=cn(i).proxy)==null?void 0:n.$options.name)==="VcNavigation",v=u.ref(g),b=u.reactive({});let P,w;u.watch(()=>e,L=>{u.nextTick(()=>{i.mounted&&T()})},{deep:!0});const S=u.computed(()=>m.value?s("vc.navigation.myLocation.positioning"):Lt(e.tooltip)&&e.tooltip.tip||s("vc.navigation.myLocation.myLocationTip"));i.createCesiumObject=async()=>{const{viewer:L}=a,{CustomDataSource:U}=Cesium,Z=L.dataSources.getByName("__vc-myLocation__");Z.length?P=Z[0]:L.dataSources.add(new U("__vc-myLocation__")).then(C=>{P=C});let W;if(e.amap&&e.amap.key){const C=e.amap.options;W=new Promise((x,B)=>{var O,I;_L.load({key:(O=e.amap)==null?void 0:O.key,version:(I=e.amap)==null?void 0:I.version,plugins:["AMap.Geolocation"]}).then(V=>{w=new V.Geolocation(C),x(w)}).catch(V=>{r.logger.error(V),B(V)})})}const y=new Promise((C,x)=>{u.nextTick(()=>{C(Me(l))})});return Promise.all([y,W]).then(C=>C[0])},i.mount=async()=>{var L;v.value=!0,u.nextTick(()=>{T()});const{viewer:U}=a;return(L=U.viewerWidgetResized)==null||L.raiseEvent({type:i.cesiumClass,status:"mounted",target:Me(l)}),!0},i.unmount=async()=>{var L;v.value=!1;const{viewer:U}=a;if(w){const Z=document.getElementsByTagName("script"),W=[];for(const y of Z)y.src.indexOf("/webapi.amap.com/maps")>-1&&W.push(y);W.forEach(y=>{document.getElementsByTagName("body")[0].removeChild(y)})}return(L=U.viewerWidgetResized)==null||L.raiseEvent({type:i.cesiumClass,status:"unmounted",target:Me(l)}),U.dataSources.remove(P,!0)};const T=()=>{var L;const U=p.style.value;if(b.left=U.left,b.top=U.top,b.transform=U.transform,!g){const Z=p.attach.value;((L=Me(h))==null?void 0:L.$el)!==void 0&&(typeof e.teleportToViewer=="undefined"||e.teleportToViewer)&&((Z.bottom||Z.top)&&!Z.left&&!Z.right&&(U.left="50%",U.transform="translate(-50%, 0)"),(Z.left||Z.right)&&!Z.top&&!Z.bottom&&(U.top="50%",U.transform="translate(0, -50%)"))}Object.assign(b,U)},_=()=>{var L;(L=Me(d))==null||L.hide(),m.value=!0;const U=e.customApi||e.customAPI;if(nn(U)){const Z=U(D);M(Z)}else w&&e.amap&&e.amap.key?w.getCurrentPosition((Z,W)=>{var y;if(Z==="complete"){let C=[W.position.lng,W.position.lat];(y=e.amap)!=null&&y.transformToWGS84&&(C=ym(C[0],C[1])),M({lng:C[0],lat:C[1],address:W.formattedAddress},W)}else D(s("vc.navigation.myLocation.fail"),W.message)}):e.geolocation?navigator.geolocation.getCurrentPosition(Z=>{M({lng:Z.coords.longitude,lat:Z.coords.latitude},Z)},D,{enableHighAccuracy:e.geolocation.enableHighAccuracy,timeout:e.geolocation.timeout,maximumAge:e.geolocation.maximumAge}):D(s("vc.navigation.myLocation.fail"))},M=(L,U)=>{var Z;const W=L.lng,y=L.lat,C=L.address,{Rectangle:x,sampleTerrain:B,defined:O,SceneMode:I}=Cesium,{viewer:V}=a;P.entities.removeAll();const j=P.entities.add({id:e.id,position:yt([W,y],V.scene.globe.ellipsoid),point:{color:Ue(e.pointColor),pixelSize:e.pixelSize,outlineWidth:e.outlineWidth,outlineColor:Ue(e.outlineColor)},properties:{...U},description:((Z=e.description)==null?void 0:Z.call(this,L,U))||A({[s("vc.navigation.myLocation.lng")]:W,[s("vc.navigation.myLocation.lat")]:y,[s("vc.navigation.myLocation.address")]:C})}),N=ze(i,"locationEvt");N&&t.emit("locationEvt",{type:"location",position:L,detail:U,entity:j});const H={duration:e.duration};if(O(e.maximumHeight)&&(H.maximumHeight=e.maximumHeight),O(e.hpr)&&St(e.hpr)&&(H.offset=new Cesium.HeadingPitchRange(e.hpr[0],e.hpr[1],e.hpr[2])),V.scene.mode===I.SCENE2D||V.scene.mode===I.COLUMBUS_VIEW)return V.flyTo(j,H).then(()=>{m.value=!1,N&&t.emit("locationEvt",{type:"zoomIn",camera:V.camera,status:"end"})});const ne=e.factor,ie=x.fromDegrees(W-ne,y-ne,W+ne,y+ne),ee=V.scene.camera,Q=ee.getRectangleCameraCoordinates(ie),G=V.scene.globe.ellipsoid.cartesianToCartographic(Q),J=V.scene.globe.terrainProvider,oe=e.level,Y=[x.center(ie)];return B(J,oe,Y).then(function(X){const se={longitude:G.longitude,latitude:G.latitude,height:G.height+X[0].height},re=V.scene.globe.ellipsoid.cartographicToCartesian(se);N&&t.emit("locationEvt",{type:"zoomIn",camera:V.camera,status:"start"}),ee.flyTo({duration:e.duration,destination:re,complete:()=>{m.value=!1,N&&t.emit("locationEvt",{type:"zoomIn",camera:V.camera,status:"end"})},cancel:()=>{m.value=!1,N&&t.emit("locationEvt",{type:"zoomIn",camera:V.camera,status:"cancel"})}})})},A=(L,U)=>{let Z="";L instanceof Cesium.PropertyBag&&(L=L.getValue(Cesium.JulianDate.now()));for(let W in L)if(Object.prototype.hasOwnProperty.call(L,W)){if(W===U)continue;let y=L[W];typeof y=="object"&&(y=A(y)),W=W.replace(/_/g," "),Cesium.defined(y)&&(Z+="<tr><th>"+W+"</th><td>"+y+"</td></tr>")}return Z.length>0&&(Z='<table class="cesium-infoBox-defaultTable"><tbody>'+Z+"</tbody></table>"),Z},D=(...L)=>{m.value=!1,r.logger.error(...L)},z=()=>{switch(e.loadingType){case"bars":return Vs;case"ios":return Vc;case"orbit":return Fc;case"oval":return $c;case"puff":return Nc;case"tail":return jc;default:return Vs}},$=L=>{m.value&&(L.cancel=!0)};return()=>{if(v.value){const L=[];L.push(u.h(Dr,{name:e.icon,size:e.size})),L.push(u.h("div",null,e.label)),Lt(e.tooltip)?L.push(u.h(mn,{ref:d,onBeforeShow:$,...e.tooltip},()=>u.h("strong",null,S.value))):L.push(u.createCommentVNode("v-if"));const U=u.h("div",{ref:l,class:`vc-my-location ${p.classes.value} ${e.customClass}`,style:b},[u.h(zn,{ref:h,size:e.size,flat:e.flat,stack:e.stack,round:e.round,loading:m.value,dense:!0,style:{color:e.color,background:e.background},onClick:_},{default:()=>L,loading:()=>u.h(z())})]);return!g&&e.teleportToViewer?u.h(u.Teleport,{to:a.viewer._element},U):U}else return u.createCommentVNode("v-if")}}});function EL(e,t,n){const i={latitude:"",longitude:"",elevation:""},{defaultValue:r,defined:a}=Cesium,s=r(n,{}),l=r(s.decimal,5);return s.rangeType===0?(i.latitude=Math.abs(t).toFixed(l)+"\xB0"+(t<0?"S":"N"),i.longitude=Math.abs(e).toFixed(l)+"\xB0"+(e<0?"W":"E")):s.rangeType===1?(i.latitude=t.toFixed(l)+"\xB0",i.longitude=e.toFixed(l)+"\xB0"):s.rangeType===2&&(i.latitude=t.toFixed(l)+"\xB0",i.longitude=(e<0?360+e:e).toFixed(l)+"\xB0"),a(s.height)?i.elevation=Math.round(s.height)+(a(s.errorBar)?"\xB1"+Math.round(s.errorBar):"")+"m":i.elevation="",i}function xL(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var $o=1,No=2,wa=3,OL=4,Cp=5,T_=6378137,ML=6356752314e-3,I_=.0066943799901413165,Ns=484813681109536e-20,Oe=Math.PI/2,SL=.16666666666666666,TL=.04722222222222222,IL=.022156084656084655,Be=1e-10,Sn=.017453292519943295,fr=57.29577951308232,bt=Math.PI/4,js=Math.PI*2,rn=3.14159265359,ei={};ei.greenwich=0,ei.lisbon=-9.131906111111,ei.paris=2.337229166667,ei.bogota=-74.080916666667,ei.madrid=-3.687938888889,ei.rome=12.452333333333,ei.bern=7.439583333333,ei.jakarta=106.807719444444,ei.ferro=-17.666666666667,ei.brussels=4.367975,ei.stockholm=18.058277777778,ei.athens=23.7163375,ei.oslo=10.722916666667;var AL={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},A_=/[\s_\-\/\(\)]/g;function to(e,t){if(e[t])return e[t];for(var n=Object.keys(e),i=t.toLowerCase().replace(A_,""),r=-1,a,s;++r<n.length;)if(a=n[r],s=a.toLowerCase().replace(A_,""),s===i)return e[a]}function wp(e){var t={},n=e.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,d){var h=d.split("=");return h.push(!0),l[h[0].toLowerCase()]=h[1],l},{}),i,r,a,s={proj:"projName",datum:"datumCode",rf:function(l){t.rf=parseFloat(l)},lat_0:function(l){t.lat0=l*Sn},lat_1:function(l){t.lat1=l*Sn},lat_2:function(l){t.lat2=l*Sn},lat_ts:function(l){t.lat_ts=l*Sn},lon_0:function(l){t.long0=l*Sn},lon_1:function(l){t.long1=l*Sn},lon_2:function(l){t.long2=l*Sn},alpha:function(l){t.alpha=parseFloat(l)*Sn},gamma:function(l){t.rectified_grid_angle=parseFloat(l)},lonc:function(l){t.longc=l*Sn},x_0:function(l){t.x0=parseFloat(l)},y_0:function(l){t.y0=parseFloat(l)},k_0:function(l){t.k0=parseFloat(l)},k:function(l){t.k0=parseFloat(l)},a:function(l){t.a=parseFloat(l)},b:function(l){t.b=parseFloat(l)},r_a:function(){t.R_A=!0},zone:function(l){t.zone=parseInt(l,10)},south:function(){t.utmSouth=!0},towgs84:function(l){t.datum_params=l.split(",").map(function(d){return parseFloat(d)})},to_meter:function(l){t.to_meter=parseFloat(l)},units:function(l){t.units=l;var d=to(AL,l);d&&(t.to_meter=d.to_meter)},from_greenwich:function(l){t.from_greenwich=l*Sn},pm:function(l){var d=to(ei,l);t.from_greenwich=(d||parseFloat(l))*Sn},nadgrids:function(l){l==="@null"?t.datumCode="none":t.nadgrids=l},axis:function(l){var d="ewnsud";l.length===3&&d.indexOf(l.substr(0,1))!==-1&&d.indexOf(l.substr(1,1))!==-1&&d.indexOf(l.substr(2,1))!==-1&&(t.axis=l)},approx:function(){t.approx=!0}};for(i in n)r=n[i],i in s?(a=s[i],typeof a=="function"?a(r):t[a]=r):t[i]=r;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var ks=1,D_=2,L_=3,Hc=4,B_=5,_p=-1,DL=/\s/,LL=/[A-Za-z]/,BL=/[A-Za-z84_]/,Wc=/[,\]]/,R_=/[\d\.E\-\+]/;function Lr(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=ks}Lr.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Hc)for(;DL.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case ks:return this.neutral(e);case D_:return this.keyword(e);case Hc:return this.quoted(e);case B_:return this.afterquote(e);case L_:return this.number(e);case _p:return}},Lr.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Hc;return}if(Wc.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)},Lr.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=ks;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=ks,this.currentObject=this.stack.pop(),this.currentObject||(this.state=_p);return}},Lr.prototype.number=function(e){if(R_.test(e)){this.word+=e;return}if(Wc.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)},Lr.prototype.quoted=function(e){if(e==='"'){this.state=B_;return}this.word+=e},Lr.prototype.keyword=function(e){if(BL.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=ks;return}if(Wc.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)},Lr.prototype.neutral=function(e){if(LL.test(e)){this.word=e,this.state=D_;return}if(e==='"'){this.word="",this.state=Hc;return}if(R_.test(e)){this.word=e,this.state=L_;return}if(Wc.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)},Lr.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===_p)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function RL(e){var t=new Lr(e);return t.output()}function V_(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var i=t?{}:e,r=n.reduce(function(a,s){return _a(s,a),a},i);t&&(e[t]=r)}function _a(e,t){if(!Array.isArray(e)){t[e]=!0;return}var n=e.shift();if(n==="PARAMETER"&&(n=e.shift()),e.length===1){if(Array.isArray(e[0])){t[n]={},_a(e[0],t[n]);return}t[n]=e[0];return}if(!e.length){t[n]=!0;return}if(n==="TOWGS84"){t[n]=e;return}if(n==="AXIS"){n in t||(t[n]=[]),t[n].push(e);return}Array.isArray(n)||(t[n]={});var i;switch(n){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[n]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&_a(e[2],t[n]);return;case"SPHEROID":case"ELLIPSOID":t[n]={name:e[0],a:e[1],rf:e[2]},e.length===4&&_a(e[3],t[n]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],V_(t,n,e);return;default:for(i=-1;++i<e.length;)if(!Array.isArray(e[i]))return _a(e,t[n]);return V_(t,n,e)}}var VL=.017453292519943295;function FL(e,t){var n=t[0],i=t[1];!(n in e)&&i in e&&(e[n]=e[i],t.length===3&&(e[n]=t[2](e[n])))}function gr(e){return e*VL}function $L(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",n=0,i=e.AXIS.length;n<i;++n){var r=[e.AXIS[n][0].toLowerCase(),e.AXIS[n][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?t+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?t+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?t+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var a=e.GEOGCS;e.type==="GEOGCS"&&(a=e),a&&(a.DATUM?e.datumCode=a.DATUM.name.toLowerCase():e.datumCode=a.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(e.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=a.DATUM.SPHEROID.a,e.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(e.datum_params=a.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function s(h){var m=e.to_meter||1;return h*m}var l=function(h){return FL(e,h)},d=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",gr],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",gr],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",gr],["lat0","latitude_of_origin",gr],["lat0","standard_parallel_1",gr],["lat1","standard_parallel_1",gr],["lat2","standard_parallel_2",gr],["azimuth","Azimuth"],["alpha","azimuth",gr],["srsCode","name"]];d.forEach(l),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=gr(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=gr(e.lat0>0?90:-90))}function F_(e){var t=RL(e),n=t.shift(),i=t.shift();t.unshift(["name",i]),t.unshift(["type",n]);var r={};return _a(t,r),$L(r),r}function Gn(e){var t=this;if(arguments.length===2){var n=arguments[1];typeof n=="string"?n.charAt(0)==="+"?Gn[e]=wp(arguments[1]):Gn[e]=F_(arguments[1]):Gn[e]=n}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(i){Array.isArray(i)?Gn.apply(t,i):Gn(i)});if(typeof e=="string"){if(e in Gn)return Gn[e]}else"EPSG"in e?Gn["EPSG:"+e.EPSG]=e:"ESRI"in e?Gn["ESRI:"+e.ESRI]=e:"IAU2000"in e?Gn["IAU2000:"+e.IAU2000]=e:console.log(e);return}}xL(Gn);function NL(e){return typeof e=="string"}function jL(e){return e in Gn}var kL=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function zL(e){return kL.some(function(t){return e.indexOf(t)>-1})}var GL=["3857","900913","3785","102113"];function UL(e){var t=to(e,"authority");if(t){var n=to(t,"epsg");return n&&GL.indexOf(n)>-1}}function HL(e){var t=to(e,"extension");if(t)return to(t,"proj4")}function WL(e){return e[0]==="+"}function qL(e){if(NL(e)){if(jL(e))return Gn[e];if(zL(e)){var t=F_(e);if(UL(t))return Gn["EPSG:3857"];var n=HL(t);return n?wp(n):t}if(WL(e))return wp(e)}else return e}function $_(e,t){e=e||{};var n,i;if(!t)return e;for(i in t)n=t[i],n!==void 0&&(e[i]=n);return e}function vr(e,t,n){var i=e*t;return n/Math.sqrt(1-i*i)}function zs(e){return e<0?-1:1}function Fe(e){return Math.abs(e)<=rn?e:e-zs(e)*js}function tr(e,t,n){var i=e*n,r=.5*e;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(Oe-t))/i}function Gs(e,t){for(var n=.5*e,i,r,a=Oe-2*Math.atan(t),s=0;s<=15;s++)if(i=e*Math.sin(a),r=Oe-2*Math.atan(t*Math.pow((1-i)/(1+i),n))-a,a+=r,Math.abs(r)<=1e-10)return a;return-9999}function ZL(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=vr(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function QL(e){var t=e.x,n=e.y;if(n*fr>90&&n*fr<-90&&t*fr>180&&t*fr<-180)return null;var i,r;if(Math.abs(Math.abs(n)-Oe)<=Be)return null;if(this.sphere)i=this.x0+this.a*this.k0*Fe(t-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(bt+.5*n));else{var a=Math.sin(n),s=tr(this.e,n,a);i=this.x0+this.a*this.k0*Fe(t-this.long0),r=this.y0-this.a*this.k0*Math.log(s)}return e.x=i,e.y=r,e}function JL(e){var t=e.x-this.x0,n=e.y-this.y0,i,r;if(this.sphere)r=Oe-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var a=Math.exp(-n/(this.a*this.k0));if(r=Gs(this.e,a),r===-9999)return null}return i=Fe(this.long0+t/(this.a*this.k0)),e.x=i,e.y=r,e}var XL=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],YL={init:ZL,forward:QL,inverse:JL,names:XL};function KL(){}function N_(e){return e}var eB=["longlat","identity"],tB={init:KL,forward:N_,inverse:N_,names:eB},nB=[YL,tB],qc={},Zc=[];function j_(e,t){var n=Zc.length;return e.names?(Zc[n]=e,e.names.forEach(function(i){qc[i.toLowerCase()]=n}),this):(console.log(t),!0)}function iB(e){if(!e)return!1;var t=e.toLowerCase();if(typeof qc[t]!="undefined"&&Zc[qc[t]])return Zc[qc[t]]}function rB(){nB.forEach(j_)}var oB={start:rB,add:j_,get:iB},Xe={};Xe.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},Xe.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},Xe.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},Xe.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},Xe.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},Xe.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},Xe.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},Xe.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},Xe.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},Xe.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},Xe.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},Xe.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},Xe.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},Xe.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},Xe.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},Xe.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},Xe.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},Xe.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},Xe.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},Xe.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},Xe.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},Xe.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},Xe.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},Xe.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},Xe.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},Xe.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},Xe.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},Xe.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},Xe.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},Xe.hough={a:6378270,rf:297,ellipseName:"Hough"},Xe.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},Xe.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},Xe.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},Xe.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},Xe.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},Xe.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},Xe.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},Xe.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},Xe.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},Xe.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},Xe.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},Xe.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var aB=Xe.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Xe.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function sB(e,t,n,i){var r=e*e,a=t*t,s=(r-a)/r,l=0;i?(e*=1-s*(SL+s*(TL+s*IL)),r=e*e,s=0):l=Math.sqrt(s);var d=(r-a)/a;return{es:s,e:l,ep2:d}}function lB(e,t,n,i,r){if(!e){var a=to(Xe,i);a||(a=aB),e=a.a,t=a.b,n=a.rf}return n&&!t&&(t=(1-1/n)*e),(n===0||Math.abs(e-t)<Be)&&(r=!0,t=e),{a:e,b:t,rf:n,sphere:r}}var Cn={};Cn.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Cn.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Cn.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Cn.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Cn.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Cn.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Cn.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Cn.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},Cn.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},Cn.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Cn.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Cn.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Cn.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Cn.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Cn.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Cn.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Cn.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function cB(e,t,n,i,r,a,s){var l={};return e===void 0||e==="none"?l.datum_type=Cp:l.datum_type=OL,t&&(l.datum_params=t.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=$o),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=No,l.datum_params[3]*=Ns,l.datum_params[4]*=Ns,l.datum_params[5]*=Ns,l.datum_params[6]=l.datum_params[6]/1e6+1)),s&&(l.datum_type=wa,l.grids=s),l.a=n,l.b=i,l.es=r,l.ep2=a,l}var k_={};function uB(e,t){var n=new DataView(t),i=mB(n),r=pB(n,i);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var a=fB(n,r,i),s={header:r,subgrids:a};return k_[e]=s,s}function dB(e){if(e===void 0)return null;var t=e.split(",");return t.map(hB)}function hB(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:k_[e]||null,isNull:!1}}function Pa(e){return e/3600*Math.PI/180}function mB(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function pB(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:Pp(e,56,56+8).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function Pp(e,t,n){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,n)))}function fB(e,t,n){for(var i=176,r=[],a=0;a<t.nSubgrids;a++){var s=vB(e,i,n),l=yB(e,i,s,n),d=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),h=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);r.push({ll:[Pa(s.lowerLongitude),Pa(s.lowerLatitude)],del:[Pa(s.longitudeInterval),Pa(s.latitudeInterval)],lim:[d,h],count:s.gridNodeCount,cvs:gB(l)})}return r}function gB(e){return e.map(function(t){return[Pa(t.longitudeShift),Pa(t.latitudeShift)]})}function vB(e,t,n){return{name:Pp(e,t+8,t+16).trim(),parent:Pp(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,n),upperLatitude:e.getFloat64(t+88,n),lowerLongitude:e.getFloat64(t+104,n),upperLongitude:e.getFloat64(t+120,n),latitudeInterval:e.getFloat64(t+136,n),longitudeInterval:e.getFloat64(t+152,n),gridNodeCount:e.getInt32(t+168,n)}}function yB(e,t,n,i){for(var r=t+176,a=16,s=[],l=0;l<n.gridNodeCount;l++){var d={latitudeShift:e.getFloat32(r+l*a,i),longitudeShift:e.getFloat32(r+l*a+4,i),latitudeAccuracy:e.getFloat32(r+l*a+8,i),longitudeAccuracy:e.getFloat32(r+l*a+12,i)};s.push(d)}return s}function yr(e,t){if(!(this instanceof yr))return new yr(e);t=t||function(h){if(h)throw h};var n=qL(e);if(typeof n!="object"){t(e);return}var i=yr.projections.get(n.projName);if(!i){t(e);return}if(n.datumCode&&n.datumCode!=="none"){var r=to(Cn,n.datumCode);r&&(n.datum_params=n.datum_params||(r.towgs84?r.towgs84.split(","):null),n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var a=lB(n.a,n.b,n.rf,n.ellps,n.sphere),s=sB(a.a,a.b,a.rf,n.R_A),l=dB(n.nadgrids),d=n.datum||cB(n.datumCode,n.datum_params,a.a,a.b,s.es,s.ep2,l);$_(this,n),$_(this,i),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=d,this.init(),t(null,this)}yr.projections=oB,yr.projections.start();function bB(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===$o?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===No?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function z_(e,t,n){var i=e.x,r=e.y,a=e.z?e.z:0,s,l,d,h;if(r<-Oe&&r>-1.001*Oe)r=-Oe;else if(r>Oe&&r<1.001*Oe)r=Oe;else{if(r<-Oe)return{x:-1/0,y:-1/0,z:e.z};if(r>Oe)return{x:1/0,y:1/0,z:e.z}}return i>Math.PI&&(i-=2*Math.PI),l=Math.sin(r),h=Math.cos(r),d=l*l,s=n/Math.sqrt(1-t*d),{x:(s+a)*h*Math.cos(i),y:(s+a)*h*Math.sin(i),z:(s*(1-t)+a)*l}}function G_(e,t,n,i){var r=1e-12,a=r*r,s=30,l,d,h,m,p,g,v,b,P,w,S,T,_,M=e.x,A=e.y,D=e.z?e.z:0,z,$,L;if(l=Math.sqrt(M*M+A*A),d=Math.sqrt(M*M+A*A+D*D),l/n<r){if(z=0,d/n<r)return $=Oe,L=-i,{x:e.x,y:e.y,z:e.z}}else z=Math.atan2(A,M);h=D/d,m=l/d,p=1/Math.sqrt(1-t*(2-t)*m*m),b=m*(1-t)*p,P=h*p,_=0;do _++,v=n/Math.sqrt(1-t*P*P),L=l*b+D*P-v*(1-t*P*P),g=t*v/(v+L),p=1/Math.sqrt(1-g*(2-g)*m*m),w=m*(1-g)*p,S=h*p,T=S*b-w*P,b=w,P=S;while(T*T>a&&_<s);return $=Math.atan(S/Math.abs(w)),{x:z,y:$,z:L}}function CB(e,t,n){if(t===$o)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(t===No){var i=n[0],r=n[1],a=n[2],s=n[3],l=n[4],d=n[5],h=n[6];return{x:h*(e.x-d*e.y+l*e.z)+i,y:h*(d*e.x+e.y-s*e.z)+r,z:h*(-l*e.x+s*e.y+e.z)+a}}}function wB(e,t,n){if(t===$o)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(t===No){var i=n[0],r=n[1],a=n[2],s=n[3],l=n[4],d=n[5],h=n[6],m=(e.x-i)/h,p=(e.y-r)/h,g=(e.z-a)/h;return{x:m+d*p-l*g,y:-d*m+p+s*g,z:l*m-s*p+g}}}function Qc(e){return e===$o||e===No}function _B(e,t,n){if(bB(e,t)||e.datum_type===Cp||t.datum_type===Cp)return n;var i=e.a,r=e.es;if(e.datum_type===wa){var a=U_(e,!1,n);if(a!==0)return;i=T_,r=I_}var s=t.a,l=t.b,d=t.es;if(t.datum_type===wa&&(s=T_,l=ML,d=I_),r===d&&i===s&&!Qc(e.datum_type)&&!Qc(t.datum_type))return n;if(n=z_(n,r,i),Qc(e.datum_type)&&(n=CB(n,e.datum_type,e.datum_params)),Qc(t.datum_type)&&(n=wB(n,t.datum_type,t.datum_params)),n=G_(n,d,s,l),t.datum_type===wa){var h=U_(t,!0,n);if(h!==0)return}return n}function U_(e,t,n){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var i={x:-n.x,y:n.y},r={x:Number.NaN,y:Number.NaN},a=[],s=0;s<e.grids.length;s++){var l=e.grids[s];if(a.push(l.name),l.isNull){r=i;break}if(l.mandatory,l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}var d=l.grid.subgrids[0],h=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,m=d.ll[0]-h,p=d.ll[1]-h,g=d.ll[0]+(d.lim[0]-1)*d.del[0]+h,v=d.ll[1]+(d.lim[1]-1)*d.del[1]+h;if(!(p>i.y||m>i.x||v<i.y||g<i.x)&&(r=PB(i,t,d),!isNaN(r.x)))break}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*fr+" "+i.y*fr+" tried: '"+a+"'"),-1):(n.x=-r.x,n.y=r.y,0)}function PB(e,t,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return i;var r={x:e.x,y:e.y};r.x-=n.ll[0],r.y-=n.ll[1],r.x=Fe(r.x-Math.PI)+Math.PI;var a=H_(r,n);if(t){if(isNaN(a.x))return i;a.x=r.x-a.x,a.y=r.y-a.y;var s=9,l=1e-12,d,h;do{if(h=H_(a,n),isNaN(h.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}d={x:r.x-(h.x+a.x),y:r.y-(h.y+a.y)},a.x+=d.x,a.y+=d.y}while(s--&&Math.abs(d.x)>l&&Math.abs(d.y)>l);if(s<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=Fe(a.x+n.ll[0]),i.y=a.y+n.ll[1]}else isNaN(a.x)||(i.x=e.x+a.x,i.y=e.y+a.y);return i}function H_(e,t){var n={x:e.x/t.del[0],y:e.y/t.del[1]},i={x:Math.floor(n.x),y:Math.floor(n.y)},r={x:n.x-1*i.x,y:n.y-1*i.y},a={x:Number.NaN,y:Number.NaN},s;if(i.x<0||i.x>=t.lim[0]||i.y<0||i.y>=t.lim[1])return a;s=i.y*t.lim[0]+i.x;var l={x:t.cvs[s][0],y:t.cvs[s][1]};s++;var d={x:t.cvs[s][0],y:t.cvs[s][1]};s+=t.lim[0];var h={x:t.cvs[s][0],y:t.cvs[s][1]};s--;var m={x:t.cvs[s][0],y:t.cvs[s][1]},p=r.x*r.y,g=r.x*(1-r.y),v=(1-r.x)*(1-r.y),b=(1-r.x)*r.y;return a.x=v*l.x+g*d.x+b*m.x+p*h.x,a.y=v*l.y+g*d.y+b*m.y+p*h.y,a}function W_(e,t,n){var i=n.x,r=n.y,a=n.z||0,s,l,d,h={};for(d=0;d<3;d++)if(!(t&&d===2&&n.z===void 0))switch(d===0?(s=i,"ew".indexOf(e.axis[d])!==-1?l="x":l="y"):d===1?(s=r,"ns".indexOf(e.axis[d])!==-1?l="y":l="x"):(s=a,l="z"),e.axis[d]){case"e":h[l]=s;break;case"w":h[l]=-s;break;case"n":h[l]=s;break;case"s":h[l]=-s;break;case"u":n[l]!==void 0&&(h.z=s);break;case"d":n[l]!==void 0&&(h.z=-s);break;default:return null}return h}function q_(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function EB(e){Z_(e.x),Z_(e.y)}function Z_(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function xB(e,t){return(e.datum.datum_type===$o||e.datum.datum_type===No||e.datum.datum_type===wa)&&t.datumCode!=="WGS84"||(t.datum.datum_type===$o||t.datum.datum_type===No||t.datum.datum_type===wa)&&e.datumCode!=="WGS84"}function Jc(e,t,n,i){var r;Array.isArray(n)?n=q_(n):n={x:n.x,y:n.y,z:n.z,m:n.m};var a=n.z!==void 0;if(EB(n),e.datum&&t.datum&&xB(e,t)&&(r=new yr("WGS84"),n=Jc(e,r,n,i),e=r),i&&e.axis!=="enu"&&(n=W_(e,!1,n)),e.projName==="longlat")n={x:n.x*Sn,y:n.y*Sn,z:n.z||0};else if(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter,z:n.z||0}),n=e.inverse(n),!n)return;if(e.from_greenwich&&(n.x+=e.from_greenwich),n=_B(e.datum,t.datum,n),!!n)return t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y,z:n.z||0}),t.projName==="longlat"?n={x:n.x*fr,y:n.y*fr,z:n.z||0}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter,z:n.z||0})),i&&t.axis!=="enu"?W_(t,!0,n):(n&&!a&&delete n.z,n)}var Q_=yr("WGS84");function Ep(e,t,n,i){var r,a,s;return Array.isArray(n)?(r=Jc(e,t,n,i)||{x:NaN,y:NaN},n.length>2?typeof e.name!="undefined"&&e.name==="geocent"||typeof t.name!="undefined"&&t.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(a=Jc(e,t,n,i),s=Object.keys(n),s.length===2||s.forEach(function(l){if(typeof e.name!="undefined"&&e.name==="geocent"||typeof t.name!="undefined"&&t.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;a[l]=n[l]}),a)}function J_(e){return e instanceof yr?e:e.oProj?e.oProj:yr(e)}function fi(e,t,n){e=J_(e);var i=!1,r;return typeof t=="undefined"?(t=e,e=Q_,i=!0):(typeof t.x!="undefined"||Array.isArray(t))&&(n=t,t=e,e=Q_,i=!0),t=J_(t),n?Ep(e,t,n):(r={forward:function(a,s){return Ep(e,t,a,s)},inverse:function(a,s){return Ep(t,e,a,s)}},i&&(r.oProj=t),r)}var X_=6,Y_="AJSAJS",K_="AFAFAF",Ea=65,ti=73,Ri=79,Us=86,Hs=90,OB={forward:e2,inverse:MB,toPoint:t2};function e2(e,t){return t=t||5,IB(SB({lat:e[1],lon:e[0]}),t)}function MB(e){var t=Op(r2(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function t2(e){var t=Op(r2(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function xp(e){return e*(Math.PI/180)}function n2(e){return 180*(e/Math.PI)}function SB(e){var t=e.lat,n=e.lon,i=6378137,r=.00669438,a=.9996,s,l,d,h,m,p,g,v=xp(t),b=xp(n),P,w;w=Math.floor((n+180)/6)+1,n===180&&(w=60),t>=56&&t<64&&n>=3&&n<12&&(w=32),t>=72&&t<84&&(n>=0&&n<9?w=31:n>=9&&n<21?w=33:n>=21&&n<33?w=35:n>=33&&n<42&&(w=37)),s=(w-1)*6-180+3,P=xp(s),l=r/(1-r),d=i/Math.sqrt(1-r*Math.sin(v)*Math.sin(v)),h=Math.tan(v)*Math.tan(v),m=l*Math.cos(v)*Math.cos(v),p=Math.cos(v)*(b-P),g=i*((1-r/4-3*r*r/64-5*r*r*r/256)*v-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*v)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*v)-35*r*r*r/3072*Math.sin(6*v));var S=a*d*(p+(1-h+m)*p*p*p/6+(5-18*h+h*h+72*m-58*l)*p*p*p*p*p/120)+5e5,T=a*(g+d*Math.tan(v)*(p*p/2+(5-h+9*m+4*m*m)*p*p*p*p/24+(61-58*h+h*h+600*m-330*l)*p*p*p*p*p*p/720));return t<0&&(T+=1e7),{northing:Math.round(T),easting:Math.round(S),zoneNumber:w,zoneLetter:TB(t)}}function Op(e){var t=e.northing,n=e.easting,i=e.zoneLetter,r=e.zoneNumber;if(r<0||r>60)return null;var a=.9996,s=6378137,l=.00669438,d,h=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),m,p,g,v,b,P,w,S,T,_=n-5e5,M=t;i<"N"&&(M-=1e7),w=(r-1)*6-180+3,d=l/(1-l),P=M/a,S=P/(s*(1-l/4-3*l*l/64-5*l*l*l/256)),T=S+(3*h/2-27*h*h*h/32)*Math.sin(2*S)+(21*h*h/16-55*h*h*h*h/32)*Math.sin(4*S)+151*h*h*h/96*Math.sin(6*S),m=s/Math.sqrt(1-l*Math.sin(T)*Math.sin(T)),p=Math.tan(T)*Math.tan(T),g=d*Math.cos(T)*Math.cos(T),v=s*(1-l)/Math.pow(1-l*Math.sin(T)*Math.sin(T),1.5),b=_/(m*a);var A=T-m*Math.tan(T)/v*(b*b/2-(5+3*p+10*g-4*g*g-9*d)*b*b*b*b/24+(61+90*p+298*g+45*p*p-252*d-3*g*g)*b*b*b*b*b*b/720);A=n2(A);var D=(b-(1+2*p+g)*b*b*b/6+(5-2*g+28*p-3*g*g+8*d+24*p*p)*b*b*b*b*b/120)/Math.cos(T);D=w+n2(D);var z;if(e.accuracy){var $=Op({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});z={top:$.lat,right:$.lon,bottom:A,left:D}}else z={lat:A,lon:D};return z}function TB(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function IB(e,t){var n="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+AB(e.easting,e.northing,e.zoneNumber)+n.substr(n.length-5,t)+i.substr(i.length-5,t)}function AB(e,t,n){var i=i2(n),r=Math.floor(e/1e5),a=Math.floor(t/1e5)%20;return DB(r,a,i)}function i2(e){var t=e%X_;return t===0&&(t=X_),t}function DB(e,t,n){var i=n-1,r=Y_.charCodeAt(i),a=K_.charCodeAt(i),s=r+e-1,l=a+t,d=!1;s>Hs&&(s=s-Hs+Ea-1,d=!0),(s===ti||r<ti&&s>ti||(s>ti||r<ti)&&d)&&s++,(s===Ri||r<Ri&&s>Ri||(s>Ri||r<Ri)&&d)&&(s++,s===ti&&s++),s>Hs&&(s=s-Hs+Ea-1),l>Us?(l=l-Us+Ea-1,d=!0):d=!1,(l===ti||a<ti&&l>ti||(l>ti||a<ti)&&d)&&l++,(l===Ri||a<Ri&&l>Ri||(l>Ri||a<Ri)&&d)&&(l++,l===ti&&l++),l>Us&&(l=l-Us+Ea-1);var h=String.fromCharCode(s)+String.fromCharCode(l);return h}function r2(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,n=null,i="",r,a=0;!/[A-Z]/.test(r=e.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+e;i+=r,a++}var s=parseInt(i,10);if(a===0||a+3>t)throw"MGRSPoint bad conversion from: "+e;var l=e.charAt(a++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+e;n=e.substring(a,a+=2);for(var d=i2(s),h=LB(n.charAt(0),d),m=BB(n.charAt(1),d);m<RB(l);)m+=2e6;var p=t-a;if(p%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var g=p/2,v=0,b=0,P,w,S,T,_;return g>0&&(P=1e5/Math.pow(10,g),w=e.substring(a,a+g),v=parseFloat(w)*P,S=e.substring(a+g),b=parseFloat(S)*P),T=v+h,_=b+m,{easting:T,northing:_,zoneLetter:l,zoneNumber:s,accuracy:P}}function LB(e,t){for(var n=Y_.charCodeAt(t-1),i=1e5,r=!1;n!==e.charCodeAt(0);){if(n++,n===ti&&n++,n===Ri&&n++,n>Hs){if(r)throw"Bad character: "+e;n=Ea,r=!0}i+=1e5}return i}function BB(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var n=K_.charCodeAt(t-1),i=0,r=!1;n!==e.charCodeAt(0);){if(n++,n===ti&&n++,n===Ri&&n++,n>Us){if(r)throw"Bad character: "+e;n=Ea,r=!0}i+=1e5}return i}function RB(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function xa(e,t,n){if(!(this instanceof xa))return new xa(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t=="undefined"){var i=e.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}xa.fromMGRS=function(e){return new xa(t2(e))},xa.prototype.toMGRS=function(e){return e2([this.x,this.y],e)};var VB=1,FB=.25,o2=.046875,a2=.01953125,s2=.01068115234375,$B=.75,NB=.46875,jB=.013020833333333334,kB=.007120768229166667,zB=.3645833333333333,GB=.005696614583333333,UB=.3076171875;function l2(e){var t=[];t[0]=VB-e*(FB+e*(o2+e*(a2+e*s2))),t[1]=e*($B-e*(o2+e*(a2+e*s2)));var n=e*e;return t[2]=n*(NB-e*(jB+e*kB)),n*=e,t[3]=n*(zB-e*GB),t[4]=n*e*UB,t}function Xc(e,t,n,i){return n*=t,t*=t,i[0]*e-n*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}var HB=20;function c2(e,t,n){for(var i=1/(1-t),r=e,a=HB;a;--a){var s=Math.sin(r),l=1-t*s*s;if(l=(Xc(r,s,Math.cos(r),n)-e)*(l*Math.sqrt(l))*i,r-=l,Math.abs(l)<Be)return r}return r}function WB(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=l2(this.es),this.ml0=Xc(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function qB(e){var t=e.x,n=e.y,i=Fe(t-this.long0),r,a,s,l=Math.sin(n),d=Math.cos(n);if(this.es){var m=d*i,p=Math.pow(m,2),g=this.ep2*Math.pow(d,2),v=Math.pow(g,2),b=Math.abs(d)>Be?Math.tan(n):0,P=Math.pow(b,2),w=Math.pow(P,2);r=1-this.es*Math.pow(l,2),m=m/Math.sqrt(r);var S=Xc(n,l,d,this.en);a=this.a*(this.k0*m*(1+p/6*(1-P+g+p/20*(5-18*P+w+14*g-58*P*g+p/42*(61+179*w-w*P-479*P)))))+this.x0,s=this.a*(this.k0*(S-this.ml0+l*i*m/2*(1+p/12*(5-P+9*g+4*v+p/30*(61+w-58*P+270*g-330*P*g+p/56*(1385+543*w-w*P-3111*P))))))+this.y0}else{var h=d*Math.sin(i);if(Math.abs(Math.abs(h)-1)<Be)return 93;if(a=.5*this.a*this.k0*Math.log((1+h)/(1-h))+this.x0,s=d*Math.cos(i)/Math.sqrt(1-Math.pow(h,2)),h=Math.abs(s),h>=1){if(h-1>Be)return 93;s=0}else s=Math.acos(s);n<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return e.x=a,e.y=s,e}function ZB(e){var t,n,i,r,a=(e.x-this.x0)*(1/this.a),s=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+s/this.k0,n=c2(t,this.es,this.en),Math.abs(n)<Oe){var p=Math.sin(n),g=Math.cos(n),v=Math.abs(g)>Be?Math.tan(n):0,b=this.ep2*Math.pow(g,2),P=Math.pow(b,2),w=Math.pow(v,2),S=Math.pow(w,2);t=1-this.es*Math.pow(p,2);var T=a*Math.sqrt(t)/this.k0,_=Math.pow(T,2);t=t*v,i=n-t*_/(1-this.es)*.5*(1-_/12*(5+3*w-9*b*w+b-4*P-_/30*(61+90*w-252*b*w+45*S+46*b-_/56*(1385+3633*w+4095*S+1574*S*w)))),r=Fe(this.long0+T*(1-_/6*(1+2*w+b-_/20*(5+28*w+24*S+8*b*w+6*b-_/42*(61+662*w+1320*S+720*S*w))))/g)}else i=Oe*zs(s),r=0;else{var l=Math.exp(a/this.k0),d=.5*(l-1/l),h=this.lat0+s/this.k0,m=Math.cos(h);t=Math.sqrt((1-Math.pow(m,2))/(1+Math.pow(d,2))),i=Math.asin(t),s<0&&(i=-i),d===0&&m===0?r=0:r=Fe(Math.atan2(d,m)+this.long0)}return e.x=r,e.y=i,e}var QB=["Fast_Transverse_Mercator","Fast Transverse Mercator"],Yc={init:WB,forward:qB,inverse:ZB,names:QB};function u2(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function nr(e,t){e=Math.abs(e),t=Math.abs(t);var n=Math.max(e,t),i=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function JB(e){var t=1+e,n=t-1;return n===0?e:e*Math.log(t)/n}function XB(e){var t=Math.abs(e);return t=JB(t*(1+t/(nr(1,t)+1))),e<0?-t:t}function Mp(e,t){for(var n=2*Math.cos(2*t),i=e.length-1,r=e[i],a=0,s;--i>=0;)s=-a+n*r+e[i],a=r,r=s;return t+s*Math.sin(2*t)}function YB(e,t){for(var n=2*Math.cos(t),i=e.length-1,r=e[i],a=0,s;--i>=0;)s=-a+n*r+e[i],a=r,r=s;return Math.sin(t)*s}function KB(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function d2(e,t,n){for(var i=Math.sin(t),r=Math.cos(t),a=u2(n),s=KB(n),l=2*r*s,d=-2*i*a,h=e.length-1,m=e[h],p=0,g=0,v=0,b,P;--h>=0;)b=g,P=p,g=m,p=v,m=-b+l*g-d*p+e[h],v=-P+d*g+l*p;return l=i*s,d=r*a,[l*m-d*v,l*v+d*m]}function eR(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Yc.init.apply(this),this.forward=Yc.forward,this.inverse=Yc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),n=n*t,this.cgb[1]=n*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),n=n*t,this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=n*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),n=n*t,this.cgb[3]=n*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=n*(1237/630+t*(-12/5+t*(-24832/14175))),n=n*t,this.cgb[4]=n*(4174/315+t*(-144838/6237)),this.cbg[4]=n*(-734/315+t*(109598/31185)),n=n*t,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=n*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),n=n*t,this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),n=n*t,this.utg[3]=n*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600))),n=n*t,this.utg[4]=n*(-4583/161280+t*(108847/3991680)),this.gtu[4]=n*(34729/80640+t*(-3418889/1995840)),n=n*t,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=n*(212378941/319334400);var i=Mp(this.cbg,this.lat0);this.Zb=-this.Qn*(i+YB(this.gtu,2*i))}function tR(e){var t=Fe(e.x-this.long0),n=e.y;n=Mp(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),a=Math.sin(t),s=Math.cos(t);n=Math.atan2(i,s*r),t=Math.atan2(a*r,nr(i,r*s)),t=XB(Math.tan(t));var l=d2(this.gtu,2*n,2*t);n=n+l[0],t=t+l[1];var d,h;return Math.abs(t)<=2.623395162778?(d=this.a*(this.Qn*t)+this.x0,h=this.a*(this.Qn*n+this.Zb)+this.y0):(d=1/0,h=1/0),e.x=d,e.y=h,e}function nR(e){var t=(e.x-this.x0)*(1/this.a),n=(e.y-this.y0)*(1/this.a);n=(n-this.Zb)/this.Qn,t=t/this.Qn;var i,r;if(Math.abs(t)<=2.623395162778){var a=d2(this.utg,2*n,2*t);n=n+a[0],t=t+a[1],t=Math.atan(u2(t));var s=Math.sin(n),l=Math.cos(n),d=Math.sin(t),h=Math.cos(t);n=Math.atan2(s*h,nr(d,h*l)),t=Math.atan2(d,h*l),i=Fe(t+this.long0),r=Mp(this.cgb,n)}else i=1/0,r=1/0;return e.x=i,e.y=r,e}var iR=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"],Kc={init:eR,forward:tR,inverse:nR,names:iR};function rR(e,t){if(e===void 0){if(e=Math.floor((Fe(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var oR="etmerc";function aR(){var e=rR(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*Sn,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Kc.init.apply(this),this.forward=Kc.forward,this.inverse=Kc.inverse}var sR=["Universal Transverse Mercator System","utm"],lR={init:aR,names:sR,dependsOn:oR};function Sp(e,t){return Math.pow((1-e)/(1+e),t)}var cR=20;function uR(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+bt)/(Math.pow(Math.tan(.5*this.lat0+bt),this.C)*Sp(this.e*e,this.ratexp))}function dR(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+bt),this.C)*Sp(this.e*Math.sin(n),this.ratexp))-Oe,e.x=this.C*t,e}function hR(e){for(var t=1e-14,n=e.x/this.C,i=e.y,r=Math.pow(Math.tan(.5*i+bt)/this.K,1/this.C),a=cR;a>0&&(i=2*Math.atan(r*Sp(this.e*Math.sin(e.y),-.5*this.e))-Oe,!(Math.abs(i-e.y)<t));--a)e.y=i;return a?(e.x=n,e.y=i,e):null}var mR=["gauss"],Tp={init:uR,forward:dR,inverse:hR,names:mR};function pR(){Tp.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function fR(e){var t,n,i,r;return e.x=Fe(e.x-this.long0),Tp.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),r=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*i),e.x=r*n*Math.sin(e.x),e.y=r*(this.cosc0*t-this.sinc0*n*i),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function gR(e){var t,n,i,r,a;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,a=Math.sqrt(e.x*e.x+e.y*e.y)){var s=2*Math.atan2(a,this.R2);t=Math.sin(s),n=Math.cos(s),r=Math.asin(n*this.sinc0+e.y*t*this.cosc0/a),i=Math.atan2(e.x*t,a*this.cosc0*n-e.y*this.sinc0*t)}else r=this.phic0,i=0;return e.x=i,e.y=r,Tp.inverse.apply(this,[e]),e.x=Fe(e.x+this.long0),e}var vR=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],yR={init:pR,forward:fR,inverse:gR,names:vR};function bR(e,t,n){return t*=n,Math.tan(.5*(Oe+e))*Math.pow((1-t)/(1+t),.5*n)}function CR(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Be&&(this.k0=.5*(1+zs(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Be&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Be&&Math.abs(Math.cos(this.lat_ts))>Be&&(this.k0=.5*this.cons*vr(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tr(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=vr(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Oe,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function wR(e){var t=e.x,n=e.y,i=Math.sin(n),r=Math.cos(n),a,s,l,d,h,m,p=Fe(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Be&&Math.abs(n+this.lat0)<=Be?(e.x=NaN,e.y=NaN,e):this.sphere?(a=2*this.k0/(1+this.sinlat0*i+this.coslat0*r*Math.cos(p)),e.x=this.a*a*r*Math.sin(p)+this.x0,e.y=this.a*a*(this.coslat0*i-this.sinlat0*r*Math.cos(p))+this.y0,e):(s=2*Math.atan(this.ssfn_(n,i,this.e))-Oe,d=Math.cos(s),l=Math.sin(s),Math.abs(this.coslat0)<=Be?(h=tr(this.e,n*this.con,this.con*i),m=2*this.a*this.k0*h/this.cons,e.x=this.x0+m*Math.sin(t-this.long0),e.y=this.y0-this.con*m*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<Be?(a=2*this.a*this.k0/(1+d*Math.cos(p)),e.y=a*l):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*d*Math.cos(p))),e.y=a*(this.cosX0*l-this.sinX0*d*Math.cos(p))+this.y0),e.x=a*d*Math.sin(p)+this.x0,e))}function _R(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,r,a,s=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var l=2*Math.atan(s/(2*this.a*this.k0));return t=this.long0,n=this.lat0,s<=Be?(e.x=t,e.y=n,e):(n=Math.asin(Math.cos(l)*this.sinlat0+e.y*Math.sin(l)*this.coslat0/s),Math.abs(this.coslat0)<Be?this.lat0>0?t=Fe(this.long0+Math.atan2(e.x,-1*e.y)):t=Fe(this.long0+Math.atan2(e.x,e.y)):t=Fe(this.long0+Math.atan2(e.x*Math.sin(l),s*this.coslat0*Math.cos(l)-e.y*this.sinlat0*Math.sin(l))),e.x=t,e.y=n,e)}else if(Math.abs(this.coslat0)<=Be){if(s<=Be)return n=this.lat0,t=this.long0,e.x=t,e.y=n,e;e.x*=this.con,e.y*=this.con,i=s*this.cons/(2*this.a*this.k0),n=this.con*Gs(this.e,i),t=this.con*Fe(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else r=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,s<=Be?a=this.X0:(a=Math.asin(Math.cos(r)*this.sinX0+e.y*Math.sin(r)*this.cosX0/s),t=Fe(this.long0+Math.atan2(e.x*Math.sin(r),s*this.cosX0*Math.cos(r)-e.y*this.sinX0*Math.sin(r)))),n=-1*Gs(this.e,Math.tan(.5*(Oe+a)));return e.x=t,e.y=n,e}var PR=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ER={init:CR,forward:wR,inverse:_R,names:PR,ssfn_:bR};function xR(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,i=this.rf,r=1/i,a=2*r-Math.pow(r,2),s=this.e=Math.sqrt(a);this.R=this.k0*n*Math.sqrt(1-a)/(1-a*Math.pow(t,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),d=Math.log(Math.tan(Math.PI/4+e/2)),h=Math.log((1+s*t)/(1-s*t));this.K=l-this.alpha*d+this.alpha*s/2*h}function OR(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=-this.alpha*(t+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),a=this.alpha*(e.x-this.lambda0),s=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(a))),l=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(a));return e.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,e.x=this.R*s+this.x0,e}function MR(e){for(var t=e.x-this.x0,n=e.y-this.y0,i=t/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),s=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),l=this.lambda0+s/this.alpha,d=0,h=a,m=-1e3,p=0;Math.abs(h-m)>1e-7;){if(++p>20)return;d=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),m=h,h=2*Math.atan(Math.exp(d))-Math.PI/2}return e.x=l,e.y=h,e}var SR=["somerc"],TR={init:xR,forward:OR,inverse:MR,names:SR},Oa=1e-7;function IR(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(n)!==-1}function AR(){var e,t,n,i,r,a,s,l,d,h,m=0,p,g=0,v=0,b=0,P=0,w=0,S=0;this.no_off=IR(this),this.no_rot="no_rot"in this;var T=!1;"alpha"in this&&(T=!0);var _=!1;if("rectified_grid_angle"in this&&(_=!0),T&&(S=this.alpha),_&&(m=this.rectified_grid_angle*Sn),T||_)g=this.longc;else if(v=this.long1,P=this.lat1,b=this.long2,w=this.lat2,Math.abs(P-w)<=Oa||(e=Math.abs(P))<=Oa||Math.abs(e-Oe)<=Oa||Math.abs(Math.abs(this.lat0)-Oe)<=Oa||Math.abs(Math.abs(w)-Oe)<=Oa)throw new Error;var M=1-this.es;t=Math.sqrt(M),Math.abs(this.lat0)>Be?(l=Math.sin(this.lat0),n=Math.cos(this.lat0),e=1-this.es*l*l,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/M),this.A=this.B*this.k0*t/e,i=this.B*t/(n*Math.sqrt(e)),r=i*i-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(tr(this.e,this.lat0,l),this.B)):(this.B=1/t,this.A=this.k0,this.E=i=r=1),T||_?(T?(p=Math.asin(Math.sin(S)/i),_||(m=S)):(p=m,S=Math.asin(i*Math.sin(p))),this.lam0=g-Math.asin(.5*(r-1/r)*Math.tan(p))/this.B):(a=Math.pow(tr(this.e,P,Math.sin(P)),this.B),s=Math.pow(tr(this.e,w,Math.sin(w)),this.B),r=this.E/a,d=(s-a)/(s+a),h=this.E*this.E,h=(h-s*a)/(h+s*a),e=v-b,e<-Math.pi?b-=js:e>Math.pi&&(b+=js),this.lam0=Fe(.5*(v+b)-Math.atan(h*Math.tan(.5*this.B*(v-b))/d)/this.B),p=Math.atan(2*Math.sin(this.B*Fe(v-this.lam0))/(r-1/r)),m=S=Math.asin(i*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(m),this.cosrot=Math.cos(m),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(bt-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(bt+r))}function DR(e){var t={},n,i,r,a,s,l,d,h;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-Oe)>Be){if(s=this.E/Math.pow(tr(this.e,e.y,Math.sin(e.y)),this.B),l=1/s,n=.5*(s-l),i=.5*(s+l),a=Math.sin(this.B*e.x),r=(n*this.singam-a*this.cosgam)/i,Math.abs(Math.abs(r)-1)<Be)throw new Error;h=.5*this.ArB*Math.log((1-r)/(1+r)),l=Math.cos(this.B*e.x),Math.abs(l)<Oa?d=this.A*e.x:d=this.ArB*Math.atan2(n*this.cosgam+a*this.singam,l)}else h=e.y>0?this.v_pole_n:this.v_pole_s,d=this.ArB*e.y;return this.no_rot?(t.x=d,t.y=h):(d-=this.u_0,t.x=h*this.cosrot+d*this.sinrot,t.y=d*this.cosrot-h*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function LR(e){var t,n,i,r,a,s,l,d={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(n=e.y,t=e.x):(n=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*n),r=.5*(i-1/i),a=.5*(i+1/i),s=Math.sin(this.BrA*t),l=(s*this.cosgam+r*this.singam)/a,Math.abs(Math.abs(l)-1)<Be)d.x=0,d.y=l<0?-Oe:Oe;else{if(d.y=this.E/Math.sqrt((1+l)/(1-l)),d.y=Gs(this.e,Math.pow(d.y,1/this.B)),d.y===1/0)throw new Error;d.x=-this.rB*Math.atan2(r*this.cosgam-s*this.singam,Math.cos(this.BrA*t))}return d.x+=this.lam0,d}var BR=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],RR={init:AR,forward:DR,inverse:LR,names:BR};function VR(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Be)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),i=vr(this.e,t,n),r=tr(this.e,this.lat1,t),a=Math.sin(this.lat2),s=Math.cos(this.lat2),l=vr(this.e,a,s),d=tr(this.e,this.lat2,a),h=tr(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Be?this.ns=Math.log(i/l)/Math.log(r/d):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(h,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function FR(e){var t=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=Be&&(n=zs(n)*(Oe-2*Be));var i=Math.abs(Math.abs(n)-Oe),r,a;if(i>Be)r=tr(this.e,n,Math.sin(n)),a=this.a*this.f0*Math.pow(r,this.ns);else{if(i=n*this.ns,i<=0)return null;a=0}var s=this.ns*Fe(t-this.long0);return e.x=this.k0*(a*Math.sin(s))+this.x0,e.y=this.k0*(this.rh-a*Math.cos(s))+this.y0,e}function $R(e){var t,n,i,r,a,s=(e.x-this.x0)/this.k0,l=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(s*s+l*l),n=1):(t=-Math.sqrt(s*s+l*l),n=-1);var d=0;if(t!==0&&(d=Math.atan2(n*s,n*l)),t!==0||this.ns>0){if(n=1/this.ns,i=Math.pow(t/(this.a*this.f0),n),r=Gs(this.e,i),r===-9999)return null}else r=-Oe;return a=Fe(d/this.ns+this.long0),e.x=a,e.y=r,e}var NR=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],jR={init:VR,forward:FR,inverse:$R,names:NR};function kR(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function zR(e){var t,n,i,r,a,s,l,d=e.x,h=e.y,m=Fe(d-this.long0);return t=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/t)-this.s45),i=-m*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),a=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),s=this.n*a,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),e.y=l*Math.cos(s)/1,e.x=l*Math.sin(s)/1,this.czech||(e.y*=-1,e.x*=-1),e}function GR(e){var t,n,i,r,a,s,l,d,h=e.x;e.x=e.y,e.y=h,this.czech||(e.y*=-1,e.x*=-1),s=Math.sqrt(e.x*e.x+e.y*e.y),a=Math.atan2(e.y,e.x),r=a/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(t)),e.x=this.long0-n/this.alfa,l=t,d=0;var m=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-e.y)<1e-10&&(d=1),l=e.y,m+=1;while(d===0&&m<15);return m>=15?null:e}var UR=["Krovak","krovak"],HR={init:kR,forward:zR,inverse:GR,names:UR};function Un(e,t,n,i,r){return e*r-t*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}function Ws(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function qs(e){return .375*e*(1+.25*e*(1+.46875*e))}function Zs(e){return .05859375*e*e*(1+.75*e)}function Qs(e){return e*e*e*(35/3072)}function Ma(e,t,n){var i=t*n;return e/Math.sqrt(1-i*i)}function Sa(e){return Math.abs(e)<Oe?e:e-zs(e)*Math.PI}function eu(e,t,n,i,r){var a,s;a=e/t;for(var l=0;l<15;l++)if(s=(e-(t*a-n*Math.sin(2*a)+i*Math.sin(4*a)-r*Math.sin(6*a)))/(t-2*n*Math.cos(2*a)+4*i*Math.cos(4*a)-6*r*Math.cos(6*a)),a+=s,Math.abs(s)<=1e-10)return a;return NaN}function WR(){this.sphere||(this.e0=Ws(this.es),this.e1=qs(this.es),this.e2=Zs(this.es),this.e3=Qs(this.es),this.ml0=this.a*Un(this.e0,this.e1,this.e2,this.e3,this.lat0))}function qR(e){var t,n,i=e.x,r=e.y;if(i=Fe(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var a=Math.sin(r),s=Math.cos(r),l=Ma(this.a,this.e,a),d=Math.tan(r)*Math.tan(r),h=i*Math.cos(r),m=h*h,p=this.es*s*s/(1-this.es),g=this.a*Un(this.e0,this.e1,this.e2,this.e3,r);t=l*h*(1-m*d*(1/6-(8-d+8*p)*m/120)),n=g-this.ml0+l*a/s*m*(.5+(5-d+6*p)*m/24)}return e.x=t+this.x0,e.y=n+this.y0,e}function ZR(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,n=e.y/this.a,i,r;if(this.sphere){var a=n+this.lat0;i=Math.asin(Math.sin(a)*Math.cos(t)),r=Math.atan2(Math.tan(t),Math.cos(a))}else{var s=this.ml0/this.a+n,l=eu(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-Oe)<=Be)return e.x=this.long0,e.y=Oe,n<0&&(e.y*=-1),e;var d=Ma(this.a,this.e,Math.sin(l)),h=d*d*d/this.a/this.a*(1-this.es),m=Math.pow(Math.tan(l),2),p=t*this.a/d,g=p*p;i=l-d*Math.tan(l)/h*p*p*(.5-(1+3*m)*p*p/24),r=p*(1-g*(m/3+(1+3*m)*m*g/15))/Math.cos(l)}return e.x=Fe(r+this.long0),e.y=Sa(i),e}var QR=["Cassini","Cassini_Soldner","cass"],JR={init:WR,forward:qR,inverse:ZR,names:QR};function no(e,t){var n;return e>1e-7?(n=e*t,(1-e*e)*(t/(1-n*n)-.5/e*Math.log((1-n)/(1+n)))):2*t}var XR=1,YR=2,KR=3,e9=4;function t9(){var e=Math.abs(this.lat0);if(Math.abs(e-Oe)<Be?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Be?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=no(this.e,1),this.mmf=.5/(1-this.es),this.apa=u9(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=no(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function n9(e){var t,n,i,r,a,s,l,d,h,m,p=e.x,g=e.y;if(p=Fe(p-this.long0),this.sphere){if(a=Math.sin(g),m=Math.cos(g),i=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+m*i:1+this.sinph0*a+this.cosph0*m*i,n<=Be)return null;n=Math.sqrt(2/n),t=n*m*Math.sin(p),n*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*m*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(g+this.lat0)<Be)return null;n=bt-g*.5,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),t=n*Math.sin(p),n*=i}}else{switch(l=0,d=0,h=0,i=Math.cos(p),r=Math.sin(p),a=Math.sin(g),s=no(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=s/this.qp,d=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:h=1+this.sinb1*l+this.cosb1*d*i;break;case this.EQUIT:h=1+d*i;break;case this.N_POLE:h=Oe+g,s=this.qp-s;break;case this.S_POLE:h=g-Oe,s=this.qp+s;break}if(Math.abs(h)<Be)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:h=Math.sqrt(2/h),this.mode===this.OBLIQ?n=this.ymf*h*(this.cosb1*l-this.sinb1*d*i):n=(h=Math.sqrt(2/(1+d*i)))*l*this.ymf,t=this.xmf*h*d*r;break;case this.N_POLE:case this.S_POLE:s>=0?(t=(h=Math.sqrt(s))*r,n=i*(this.mode===this.S_POLE?h:-h)):t=n=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e}function i9(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,n=e.y/this.a,i,r,a,s,l,d,h;if(this.sphere){var m=0,p,g=0;if(p=Math.sqrt(t*t+n*n),r=p*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(g=Math.sin(r),m=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=Be?0:Math.asin(n*g/p),t*=g,n=m*p;break;case this.OBLIQ:r=Math.abs(p)<=Be?this.lat0:Math.asin(m*this.sinph0+n*g*this.cosph0/p),t*=g*this.cosph0,n=(m-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:n=-n,r=Oe-r;break;case this.S_POLE:r-=Oe;break}i=n===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,n)}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,n*=this.dd,d=Math.sqrt(t*t+n*n),d<Be)return e.x=this.long0,e.y=this.lat0,e;s=2*Math.asin(.5*d/this.rq),a=Math.cos(s),t*=s=Math.sin(s),this.mode===this.OBLIQ?(h=a*this.sinb1+n*s*this.cosb1/d,l=this.qp*h,n=d*this.cosb1*a-n*this.sinb1*s):(h=n*s/d,l=this.qp*h,n=d*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),l=t*t+n*n,!l)return e.x=this.long0,e.y=this.lat0,e;h=1-l/this.qp,this.mode===this.S_POLE&&(h=-h)}i=Math.atan2(t,n),r=d9(Math.asin(h),this.apa)}return e.x=Fe(this.long0+i),e.y=r,e}var r9=.3333333333333333,o9=.17222222222222222,a9=.10257936507936508,s9=.06388888888888888,l9=.0664021164021164,c9=.016415012942191543;function u9(e){var t,n=[];return n[0]=e*r9,t=e*e,n[0]+=t*o9,n[1]=t*s9,t*=e,n[0]+=t*a9,n[1]+=t*l9,n[2]=t*c9,n}function d9(e,t){var n=e+e;return e+t[0]*Math.sin(n)+t[1]*Math.sin(n+n)+t[2]*Math.sin(n+n+n)}var h9=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],m9={init:t9,forward:n9,inverse:i9,names:h9,S_POLE:XR,N_POLE:YR,EQUIT:KR,OBLIQ:e9};function io(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function p9(){Math.abs(this.lat1+this.lat2)<Be||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=vr(this.e3,this.sin_po,this.cos_po),this.qs1=no(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=vr(this.e3,this.sin_po,this.cos_po),this.qs2=no(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=no(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>Be?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function f9(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=no(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,a=this.ns0*Fe(t-this.long0),s=r*Math.sin(a)+this.x0,l=this.rh-r*Math.cos(a)+this.y0;return e.x=s,e.y=l,e}function g9(e){var t,n,i,r,a,s;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1),r=0,t!==0&&(r=Math.atan2(i*e.x,i*e.y)),i=t*this.ns0/this.a,this.sphere?s=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,s=this.phi1z(this.e3,n)),a=Fe(r/this.ns0+this.long0),e.x=a,e.y=s,e}function v9(e,t){var n,i,r,a,s,l=io(.5*t);if(e<Be)return l;for(var d=e*e,h=1;h<=25;h++)if(n=Math.sin(l),i=Math.cos(l),r=e*n,a=1-r*r,s=.5*a*a/i*(t/(1-d)-n/a+.5/e*Math.log((1-r)/(1+r))),l=l+s,Math.abs(s)<=1e-7)return l;return null}var y9=["Albers_Conic_Equal_Area","Albers","aea"],b9={init:p9,forward:f9,inverse:g9,names:y9,phi1z:v9};function C9(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function w9(e){var t,n,i,r,a,s,l,d,h=e.x,m=e.y;return i=Fe(h-this.long0),t=Math.sin(m),n=Math.cos(m),r=Math.cos(i),s=this.sin_p14*t+this.cos_p14*n*r,a=1,s>0||Math.abs(s)<=Be?(l=this.x0+this.a*a*n*Math.sin(i)/s,d=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*n*r)/s):(l=this.x0+this.infinity_dist*n*Math.sin(i),d=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*r)),e.x=l,e.y=d,e}function _9(e){var t,n,i,r,a,s;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(r=Math.atan2(t,this.rc),n=Math.sin(r),i=Math.cos(r),s=io(i*this.sin_p14+e.y*n*this.cos_p14/t),a=Math.atan2(e.x*n,t*this.cos_p14*i-e.y*this.sin_p14*n),a=Fe(this.long0+a)):(s=this.phic0,a=0),e.x=a,e.y=s,e}var P9=["gnom"],E9={init:C9,forward:w9,inverse:_9,names:P9};function x9(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6)return t<0?-1*Oe:Oe;for(var i=Math.asin(.5*t),r,a,s,l,d=0;d<30;d++)if(a=Math.sin(i),s=Math.cos(i),l=e*a,r=Math.pow(1-l*l,2)/(2*s)*(t/(1-e*e)-a/(1-l*l)+.5/e*Math.log((1-l)/(1+l))),i+=r,Math.abs(r)<=1e-10)return i;return NaN}function O9(){this.sphere||(this.k0=vr(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function M9(e){var t=e.x,n=e.y,i,r,a=Fe(t-this.long0);if(this.sphere)i=this.x0+this.a*a*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var s=no(this.e,Math.sin(n));i=this.x0+this.a*this.k0*a,r=this.y0+this.a*s*.5/this.k0}return e.x=i,e.y=r,e}function S9(e){e.x-=this.x0,e.y-=this.y0;var t,n;return this.sphere?(t=Fe(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=x9(this.e,2*e.y*this.k0/this.a),t=Fe(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=n,e}var T9=["cea"],I9={init:O9,forward:M9,inverse:S9,names:T9};function A9(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function D9(e){var t=e.x,n=e.y,i=Fe(t-this.long0),r=Sa(n-this.lat0);return e.x=this.x0+this.a*i*this.rc,e.y=this.y0+this.a*r,e}function L9(e){var t=e.x,n=e.y;return e.x=Fe(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Sa(this.lat0+(n-this.y0)/this.a),e}var B9=["Equirectangular","Equidistant_Cylindrical","eqc"],R9={init:A9,forward:D9,inverse:L9,names:B9},h2=20;function V9(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ws(this.es),this.e1=qs(this.es),this.e2=Zs(this.es),this.e3=Qs(this.es),this.ml0=this.a*Un(this.e0,this.e1,this.e2,this.e3,this.lat0)}function F9(e){var t=e.x,n=e.y,i,r,a,s=Fe(t-this.long0);if(a=s*Math.sin(n),this.sphere)Math.abs(n)<=Be?(i=this.a*s,r=-1*this.a*this.lat0):(i=this.a*Math.sin(a)/Math.tan(n),r=this.a*(Sa(n-this.lat0)+(1-Math.cos(a))/Math.tan(n)));else if(Math.abs(n)<=Be)i=this.a*s,r=-1*this.ml0;else{var l=Ma(this.a,this.e,Math.sin(n))/Math.tan(n);i=l*Math.sin(a),r=this.a*Un(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+l*(1-Math.cos(a))}return e.x=i+this.x0,e.y=r+this.y0,e}function $9(e){var t,n,i,r,a,s,l,d,h;if(i=e.x-this.x0,r=e.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=Be)t=Fe(i/this.a+this.long0),n=0;else{s=this.lat0+r/this.a,l=i*i/this.a/this.a+s*s,d=s;var m;for(a=h2;a;--a)if(m=Math.tan(d),h=-1*(s*(d*m+1)-d-.5*(d*d+l)*m)/((d-s)/m-1),d+=h,Math.abs(h)<=Be){n=d;break}t=Fe(this.long0+Math.asin(i*Math.tan(d)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=Be)n=0,t=Fe(this.long0+i/this.a);else{s=(this.ml0+r)/this.a,l=i*i/this.a/this.a+s*s,d=s;var p,g,v,b,P;for(a=h2;a;--a)if(P=this.e*Math.sin(d),p=Math.sqrt(1-P*P)*Math.tan(d),g=this.a*Un(this.e0,this.e1,this.e2,this.e3,d),v=this.e0-2*this.e1*Math.cos(2*d)+4*this.e2*Math.cos(4*d)-6*this.e3*Math.cos(6*d),b=g/this.a,h=(s*(p*b+1)-b-.5*p*(b*b+l))/(this.es*Math.sin(2*d)*(b*b+l-2*s*b)/(4*p)+(s-b)*(p*v-2/Math.sin(2*d))-v),d-=h,Math.abs(h)<=Be){n=d;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=Fe(this.long0+Math.asin(i*p/this.a)/Math.sin(n))}return e.x=t,e.y=n,e}var N9=["Polyconic","poly"],j9={init:V9,forward:F9,inverse:$9,names:N9};function k9(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function z9(e){var t,n=e.x,i=e.y,r=i-this.lat0,a=n-this.long0,s=r/Ns*1e-5,l=a,d=1,h=0;for(t=1;t<=10;t++)d=d*s,h=h+this.A[t]*d;var m=h,p=l,g=1,v=0,b,P,w=0,S=0;for(t=1;t<=6;t++)b=g*m-v*p,P=v*m+g*p,g=b,v=P,w=w+this.B_re[t]*g-this.B_im[t]*v,S=S+this.B_im[t]*g+this.B_re[t]*v;return e.x=S*this.a+this.x0,e.y=w*this.a+this.y0,e}function G9(e){var t,n=e.x,i=e.y,r=n-this.x0,a=i-this.y0,s=a/this.a,l=r/this.a,d=1,h=0,m,p,g=0,v=0;for(t=1;t<=6;t++)m=d*s-h*l,p=h*s+d*l,d=m,h=p,g=g+this.C_re[t]*d-this.C_im[t]*h,v=v+this.C_im[t]*d+this.C_re[t]*h;for(var b=0;b<this.iterations;b++){var P=g,w=v,S,T,_=s,M=l;for(t=2;t<=6;t++)S=P*g-w*v,T=w*g+P*v,P=S,w=T,_=_+(t-1)*(this.B_re[t]*P-this.B_im[t]*w),M=M+(t-1)*(this.B_im[t]*P+this.B_re[t]*w);P=1,w=0;var A=this.B_re[1],D=this.B_im[1];for(t=2;t<=6;t++)S=P*g-w*v,T=w*g+P*v,P=S,w=T,A=A+t*(this.B_re[t]*P-this.B_im[t]*w),D=D+t*(this.B_im[t]*P+this.B_re[t]*w);var z=A*A+D*D;g=(_*A+M*D)/z,v=(M*A-_*D)/z}var $=g,L=v,U=1,Z=0;for(t=1;t<=9;t++)U=U*$,Z=Z+this.D[t]*U;var W=this.lat0+Z*Ns*1e5,y=this.long0+L;return e.x=y,e.y=W,e}var U9=["New_Zealand_Map_Grid","nzmg"],H9={init:k9,forward:z9,inverse:G9,names:U9};function W9(){}function q9(e){var t=e.x,n=e.y,i=Fe(t-this.long0),r=this.x0+this.a*i,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return e.x=r,e.y=a,e}function Z9(e){e.x-=this.x0,e.y-=this.y0;var t=Fe(this.long0+e.x/this.a),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e}var Q9=["Miller_Cylindrical","mill"],J9={init:W9,forward:q9,inverse:Z9,names:Q9},X9=20;function Y9(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=l2(this.es)}function K9(e){var t,n,i=e.x,r=e.y;if(i=Fe(i-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var a=this.n*Math.sin(r),s=X9;s;--s){var l=(this.m*r+Math.sin(r)-a)/(this.m+Math.cos(r));if(r-=l,Math.abs(l)<Be)break}t=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var d=Math.sin(r),h=Math.cos(r);n=this.a*Xc(r,d,h,this.en),t=this.a*i*h/Math.sqrt(1-this.es*d*d)}return e.x=t,e.y=n,e}function eV(e){var t,n,i,r;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(t))),this.m?t=io((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=io(Math.sin(t)/this.n)),i=Fe(i+this.long0),t=Sa(t)):(t=c2(e.y/this.a,this.es,this.en),r=Math.abs(t),r<Oe?(r=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(t)),i=Fe(n)):r-Be<Oe&&(i=this.long0)),e.x=i,e.y=t,e}var tV=["Sinusoidal","sinu"],nV={init:Y9,forward:K9,inverse:eV,names:tV};function iV(){}function rV(e){for(var t=e.x,n=e.y,i=Fe(t-this.long0),r=n,a=Math.PI*Math.sin(n);;){var s=-(r+Math.sin(r)-a)/(1+Math.cos(r));if(r+=s,Math.abs(s)<Be)break}r/=2,Math.PI/2-Math.abs(n)<Be&&(i=0);var l=.900316316158*this.a*i*Math.cos(r)+this.x0,d=1.4142135623731*this.a*Math.sin(r)+this.y0;return e.x=l,e.y=d,e}function oV(e){var t,n;e.x-=this.x0,e.y-=this.y0,n=e.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),t=Math.asin(n);var i=Fe(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*t+Math.sin(2*t))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return e.x=i,e.y=r,e}var aV=["Mollweide","moll"],sV={init:iV,forward:rV,inverse:oV,names:aV};function lV(){Math.abs(this.lat1+this.lat2)<Be||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Ws(this.es),this.e1=qs(this.es),this.e2=Zs(this.es),this.e3=Qs(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=vr(this.e,this.sinphi,this.cosphi),this.ml1=Un(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Be?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=vr(this.e,this.sinphi,this.cosphi),this.ml2=Un(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Un(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function cV(e){var t=e.x,n=e.y,i;if(this.sphere)i=this.a*(this.g-n);else{var r=Un(this.e0,this.e1,this.e2,this.e3,n);i=this.a*(this.g-r)}var a=this.ns*Fe(t-this.long0),s=this.x0+i*Math.sin(a),l=this.y0+this.rh-i*Math.cos(a);return e.x=s,e.y=l,e}function uV(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,n,i,r;this.ns>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var a=0;if(n!==0&&(a=Math.atan2(t*e.x,t*e.y)),this.sphere)return r=Fe(this.long0+a/this.ns),i=Sa(this.g-n/this.a),e.x=r,e.y=i,e;var s=this.g-n/this.a;return i=eu(s,this.e0,this.e1,this.e2,this.e3),r=Fe(this.long0+a/this.ns),e.x=r,e.y=i,e}var dV=["Equidistant_Conic","eqdc"],hV={init:lV,forward:cV,inverse:uV,names:dV};function mV(){this.R=this.a}function pV(e){var t=e.x,n=e.y,i=Fe(t-this.long0),r,a;Math.abs(n)<=Be&&(r=this.x0+this.R*i,a=this.y0);var s=io(2*Math.abs(n/Math.PI));(Math.abs(i)<=Be||Math.abs(Math.abs(n)-Oe)<=Be)&&(r=this.x0,n>=0?a=this.y0+Math.PI*this.R*Math.tan(.5*s):a=this.y0+Math.PI*this.R*-Math.tan(.5*s));var l=.5*Math.abs(Math.PI/i-i/Math.PI),d=l*l,h=Math.sin(s),m=Math.cos(s),p=m/(h+m-1),g=p*p,v=p*(2/h-1),b=v*v,P=Math.PI*this.R*(l*(p-b)+Math.sqrt(d*(p-b)*(p-b)-(b+d)*(g-b)))/(b+d);i<0&&(P=-P),r=this.x0+P;var w=d+p;return P=Math.PI*this.R*(v*w-l*Math.sqrt((b+d)*(d+1)-w*w))/(b+d),n>=0?a=this.y0+P:a=this.y0-P,e.x=r,e.y=a,e}function fV(e){var t,n,i,r,a,s,l,d,h,m,p,g,v;return e.x-=this.x0,e.y-=this.y0,p=Math.PI*this.R,i=e.x/p,r=e.y/p,a=i*i+r*r,s=-Math.abs(r)*(1+a),l=s-2*r*r+i*i,d=-2*s+1+2*r*r+a*a,v=r*r/d+(2*l*l*l/d/d/d-9*s*l/d/d)/27,h=(s-l*l/3/d)/d,m=2*Math.sqrt(-h/3),p=3*v/h/m,Math.abs(p)>1&&(p>=0?p=1:p=-1),g=Math.acos(p)/3,e.y>=0?n=(-m*Math.cos(g+Math.PI/3)-l/3/d)*Math.PI:n=-(-m*Math.cos(g+Math.PI/3)-l/3/d)*Math.PI,Math.abs(i)<Be?t=this.long0:t=Fe(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(i*i-r*r)+a*a))/2/i),e.x=t,e.y=n,e}var gV=["Van_der_Grinten_I","VanDerGrinten","vandg"],vV={init:mV,forward:pV,inverse:fV,names:gV};function yV(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function bV(e){var t=e.x,n=e.y,i=Math.sin(e.y),r=Math.cos(e.y),a=Fe(t-this.long0),s,l,d,h,m,p,g,v,b,P,w,S,T,_,M,A,D,z,$,L,U,Z,W;return this.sphere?Math.abs(this.sin_p12-1)<=Be?(e.x=this.x0+this.a*(Oe-n)*Math.sin(a),e.y=this.y0-this.a*(Oe-n)*Math.cos(a),e):Math.abs(this.sin_p12+1)<=Be?(e.x=this.x0+this.a*(Oe+n)*Math.sin(a),e.y=this.y0+this.a*(Oe+n)*Math.cos(a),e):(z=this.sin_p12*i+this.cos_p12*r*Math.cos(a),A=Math.acos(z),D=A?A/Math.sin(A):1,e.x=this.x0+this.a*D*r*Math.sin(a),e.y=this.y0+this.a*D*(this.cos_p12*i-this.sin_p12*r*Math.cos(a)),e):(s=Ws(this.es),l=qs(this.es),d=Zs(this.es),h=Qs(this.es),Math.abs(this.sin_p12-1)<=Be?(m=this.a*Un(s,l,d,h,Oe),p=this.a*Un(s,l,d,h,n),e.x=this.x0+(m-p)*Math.sin(a),e.y=this.y0-(m-p)*Math.cos(a),e):Math.abs(this.sin_p12+1)<=Be?(m=this.a*Un(s,l,d,h,Oe),p=this.a*Un(s,l,d,h,n),e.x=this.x0+(m+p)*Math.sin(a),e.y=this.y0+(m+p)*Math.cos(a),e):(g=i/r,v=Ma(this.a,this.e,this.sin_p12),b=Ma(this.a,this.e,i),P=Math.atan((1-this.es)*g+this.es*v*this.sin_p12/(b*r)),w=Math.atan2(Math.sin(a),this.cos_p12*Math.tan(P)-this.sin_p12*Math.cos(a)),w===0?$=Math.asin(this.cos_p12*Math.sin(P)-this.sin_p12*Math.cos(P)):Math.abs(Math.abs(w)-Math.PI)<=Be?$=-Math.asin(this.cos_p12*Math.sin(P)-this.sin_p12*Math.cos(P)):$=Math.asin(Math.sin(a)*Math.cos(P)/Math.sin(w)),S=this.e*this.sin_p12/Math.sqrt(1-this.es),T=this.e*this.cos_p12*Math.cos(w)/Math.sqrt(1-this.es),_=S*T,M=T*T,L=$*$,U=L*$,Z=U*$,W=Z*$,A=v*$*(1-L*M*(1-M)/6+U/8*_*(1-2*M)+Z/120*(M*(4-7*M)-3*S*S*(1-7*M))-W/48*_),e.x=this.x0+A*Math.sin(w),e.y=this.y0+A*Math.cos(w),e))}function CV(e){e.x-=this.x0,e.y-=this.y0;var t,n,i,r,a,s,l,d,h,m,p,g,v,b,P,w,S,T,_,M,A,D,z,$;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*Oe*this.a?void 0:(n=t/this.a,i=Math.sin(n),r=Math.cos(n),a=this.long0,Math.abs(t)<=Be?s=this.lat0:(s=io(r*this.sin_p12+e.y*i*this.cos_p12/t),l=Math.abs(this.lat0)-Oe,Math.abs(l)<=Be?this.lat0>=0?a=Fe(this.long0+Math.atan2(e.x,-e.y)):a=Fe(this.long0-Math.atan2(-e.x,e.y)):a=Fe(this.long0+Math.atan2(e.x*i,t*this.cos_p12*r-e.y*this.sin_p12*i))),e.x=a,e.y=s,e)):(d=Ws(this.es),h=qs(this.es),m=Zs(this.es),p=Qs(this.es),Math.abs(this.sin_p12-1)<=Be?(g=this.a*Un(d,h,m,p,Oe),t=Math.sqrt(e.x*e.x+e.y*e.y),v=g-t,s=eu(v/this.a,d,h,m,p),a=Fe(this.long0+Math.atan2(e.x,-1*e.y)),e.x=a,e.y=s,e):Math.abs(this.sin_p12+1)<=Be?(g=this.a*Un(d,h,m,p,Oe),t=Math.sqrt(e.x*e.x+e.y*e.y),v=t-g,s=eu(v/this.a,d,h,m,p),a=Fe(this.long0+Math.atan2(e.x,e.y)),e.x=a,e.y=s,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),w=Math.atan2(e.x,e.y),b=Ma(this.a,this.e,this.sin_p12),S=Math.cos(w),T=this.e*this.cos_p12*S,_=-T*T/(1-this.es),M=3*this.es*(1-_)*this.sin_p12*this.cos_p12*S/(1-this.es),A=t/b,D=A-_*(1+_)*Math.pow(A,3)/6-M*(1+3*_)*Math.pow(A,4)/24,z=1-_*D*D/2-A*D*D*D/6,P=Math.asin(this.sin_p12*Math.cos(D)+this.cos_p12*Math.sin(D)*S),a=Fe(this.long0+Math.asin(Math.sin(w)*Math.sin(D)/Math.cos(P))),$=Math.sin(P),s=Math.atan2(($-this.es*z*this.sin_p12)*Math.tan(P),$*(1-this.es)),e.x=a,e.y=s,e))}var wV=["Azimuthal_Equidistant","aeqd"],_V={init:yV,forward:bV,inverse:CV,names:wV};function PV(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function EV(e){var t,n,i,r,a,s,l,d,h=e.x,m=e.y;return i=Fe(h-this.long0),t=Math.sin(m),n=Math.cos(m),r=Math.cos(i),s=this.sin_p14*t+this.cos_p14*n*r,a=1,(s>0||Math.abs(s)<=Be)&&(l=this.a*a*n*Math.sin(i),d=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*n*r)),e.x=l,e.y=d,e}function xV(e){var t,n,i,r,a,s,l;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=io(t/this.a),i=Math.sin(n),r=Math.cos(n),s=this.long0,Math.abs(t)<=Be?(l=this.lat0,e.x=s,e.y=l,e):(l=io(r*this.sin_p14+e.y*i*this.cos_p14/t),a=Math.abs(this.lat0)-Oe,Math.abs(a)<=Be?(this.lat0>=0?s=Fe(this.long0+Math.atan2(e.x,-e.y)):s=Fe(this.long0-Math.atan2(-e.x,e.y)),e.x=s,e.y=l,e):(s=Fe(this.long0+Math.atan2(e.x*i,t*this.cos_p14*r-e.y*this.sin_p14*i)),e.x=s,e.y=l,e))}var OV=["ortho"],MV={init:PV,forward:EV,inverse:xV,names:OV},Ut={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Ct={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function SV(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Oe-bt/2?this.face=Ut.TOP:this.lat0<=-(Oe-bt/2)?this.face=Ut.BOTTOM:Math.abs(this.long0)<=bt?this.face=Ut.FRONT:Math.abs(this.long0)<=Oe+bt?this.face=this.long0>0?Ut.RIGHT:Ut.LEFT:this.face=Ut.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function TV(e){var t={x:0,y:0},n,i,r,a,s,l,d={value:0};if(e.x-=this.long0,this.es!==0?n=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):n=e.y,i=e.x,this.face===Ut.TOP)a=Oe-n,i>=bt&&i<=Oe+bt?(d.value=Ct.AREA_0,r=i-Oe):i>Oe+bt||i<=-(Oe+bt)?(d.value=Ct.AREA_1,r=i>0?i-rn:i+rn):i>-(Oe+bt)&&i<=-bt?(d.value=Ct.AREA_2,r=i+Oe):(d.value=Ct.AREA_3,r=i);else if(this.face===Ut.BOTTOM)a=Oe+n,i>=bt&&i<=Oe+bt?(d.value=Ct.AREA_0,r=-i+Oe):i<bt&&i>=-bt?(d.value=Ct.AREA_1,r=-i):i<-bt&&i>=-(Oe+bt)?(d.value=Ct.AREA_2,r=-i-Oe):(d.value=Ct.AREA_3,r=i>0?-i+rn:-i-rn);else{var h,m,p,g,v,b,P;this.face===Ut.RIGHT?i=Ta(i,+Oe):this.face===Ut.BACK?i=Ta(i,+rn):this.face===Ut.LEFT&&(i=Ta(i,-Oe)),g=Math.sin(n),v=Math.cos(n),b=Math.sin(i),P=Math.cos(i),h=v*P,m=v*b,p=g,this.face===Ut.FRONT?(a=Math.acos(h),r=tu(a,p,m,d)):this.face===Ut.RIGHT?(a=Math.acos(m),r=tu(a,p,-h,d)):this.face===Ut.BACK?(a=Math.acos(-h),r=tu(a,p,-m,d)):this.face===Ut.LEFT?(a=Math.acos(-m),r=tu(a,p,h,d)):(a=r=0,d.value=Ct.AREA_0)}return l=Math.atan(12/rn*(r+Math.acos(Math.sin(r)*Math.cos(bt))-Oe)),s=Math.sqrt((1-Math.cos(a))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(r))))),d.value===Ct.AREA_1?l+=Oe:d.value===Ct.AREA_2?l+=rn:d.value===Ct.AREA_3&&(l+=1.5*rn),t.x=s*Math.cos(l),t.y=s*Math.sin(l),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function IV(e){var t={lam:0,phi:0},n,i,r,a,s,l,d,h,m,p={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),n=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?p.value=Ct.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(p.value=Ct.AREA_1,n-=Oe):e.x<0&&-e.x>=Math.abs(e.y)?(p.value=Ct.AREA_2,n=n<0?n+rn:n-rn):(p.value=Ct.AREA_3,n+=Oe),m=rn/12*Math.tan(n),s=Math.sin(m)/(Math.cos(m)-1/Math.sqrt(2)),l=Math.atan(s),r=Math.cos(n),a=Math.tan(i),d=1-r*r*a*a*(1-Math.cos(Math.atan(1/Math.cos(l)))),d<-1?d=-1:d>1&&(d=1),this.face===Ut.TOP)h=Math.acos(d),t.phi=Oe-h,p.value===Ct.AREA_0?t.lam=l+Oe:p.value===Ct.AREA_1?t.lam=l<0?l+rn:l-rn:p.value===Ct.AREA_2?t.lam=l-Oe:t.lam=l;else if(this.face===Ut.BOTTOM)h=Math.acos(d),t.phi=h-Oe,p.value===Ct.AREA_0?t.lam=-l+Oe:p.value===Ct.AREA_1?t.lam=-l:p.value===Ct.AREA_2?t.lam=-l-Oe:t.lam=l<0?-l-rn:-l+rn;else{var g,v,b;g=d,m=g*g,m>=1?b=0:b=Math.sqrt(1-m)*Math.sin(l),m+=b*b,m>=1?v=0:v=Math.sqrt(1-m),p.value===Ct.AREA_1?(m=v,v=-b,b=m):p.value===Ct.AREA_2?(v=-v,b=-b):p.value===Ct.AREA_3&&(m=v,v=b,b=-m),this.face===Ut.RIGHT?(m=g,g=-v,v=m):this.face===Ut.BACK?(g=-g,v=-v):this.face===Ut.LEFT&&(m=g,g=v,v=-m),t.phi=Math.acos(-b)-Oe,t.lam=Math.atan2(v,g),this.face===Ut.RIGHT?t.lam=Ta(t.lam,-Oe):this.face===Ut.BACK?t.lam=Ta(t.lam,-rn):this.face===Ut.LEFT&&(t.lam=Ta(t.lam,+Oe))}if(this.es!==0){var P,w,S;P=t.phi<0?1:0,w=Math.tan(t.phi),S=this.b/Math.sqrt(w*w+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-S*S)/(this.one_minus_f*S)),P&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function tu(e,t,n,i){var r;return e<Be?(i.value=Ct.AREA_0,r=0):(r=Math.atan2(t,n),Math.abs(r)<=bt?i.value=Ct.AREA_0:r>bt&&r<=Oe+bt?(i.value=Ct.AREA_1,r-=Oe):r>Oe+bt||r<=-(Oe+bt)?(i.value=Ct.AREA_2,r=r>=0?r-rn:r+rn):(i.value=Ct.AREA_3,r+=Oe)),r}function Ta(e,t){var n=e+t;return n<-rn?n+=js:n>+rn&&(n-=js),n}var AV=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],DV={init:SV,forward:TV,inverse:IV,names:AV},Ip=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Js=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],m2=.8487,p2=1.3523,f2=fr/5,LV=1/f2,Ia=18,nu=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},BV=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function RV(e,t,n,i){for(var r=t;i;--i){var a=e(r);if(r-=a,Math.abs(a)<n)break}return r}function VV(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function FV(e){var t=Fe(e.x-this.long0),n=Math.abs(e.y),i=Math.floor(n*f2);i<0?i=0:i>=Ia&&(i=Ia-1),n=fr*(n-LV*i);var r={x:nu(Ip[i],n)*t,y:nu(Js[i],n)};return e.y<0&&(r.y=-r.y),r.x=r.x*this.a*m2+this.x0,r.y=r.y*this.a*p2+this.y0,r}function $V(e){var t={x:(e.x-this.x0)/(this.a*m2),y:Math.abs(e.y-this.y0)/(this.a*p2)};if(t.y>=1)t.x/=Ip[Ia][0],t.y=e.y<0?-Oe:Oe;else{var n=Math.floor(t.y*Ia);for(n<0?n=0:n>=Ia&&(n=Ia-1);;)if(Js[n][0]>t.y)--n;else if(Js[n+1][0]<=t.y)++n;else break;var i=Js[n],r=5*(t.y-i[0])/(Js[n+1][0]-i[0]);r=RV(function(a){return(nu(i,a)-t.y)/BV(i,a)},r,Be,100),t.x/=nu(Ip[n],r),t.y=(5*n+r)*Sn,e.y<0&&(t.y=-t.y)}return t.x=Fe(t.x+this.long0),t}var NV=["Robinson","robin"],jV={init:VV,forward:FV,inverse:$V,names:NV};function kV(){this.name="geocent"}function zV(e){var t=z_(e,this.es,this.a);return t}function GV(e){var t=G_(e,this.es,this.a,this.b);return t}var UV=["Geocentric","geocentric","geocent","Geocent"],HV={init:kV,forward:zV,inverse:GV,names:UV},Rn={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Xs={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function WV(){if(Object.keys(Xs).forEach(function(n){if(typeof this[n]=="undefined")this[n]=Xs[n].def;else{if(Xs[n].num&&isNaN(this[n]))throw new Error("Invalid parameter value, must be numeric "+n+" = "+this[n]);Xs[n].num&&(this[n]=parseFloat(this[n]))}Xs[n].degrees&&(this[n]=this[n]*Sn)}.bind(this)),Math.abs(Math.abs(this.lat0)-Oe)<Be?this.mode=this.lat0<0?Rn.S_POLE:Rn.N_POLE:Math.abs(this.lat0)<Be?this.mode=Rn.EQUIT:(this.mode=Rn.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function qV(e){e.x-=this.long0;var t=Math.sin(e.y),n=Math.cos(e.y),i=Math.cos(e.x),r,a;switch(this.mode){case Rn.OBLIQ:a=this.sinph0*t+this.cosph0*n*i;break;case Rn.EQUIT:a=n*i;break;case Rn.S_POLE:a=-t;break;case Rn.N_POLE:a=t;break}switch(a=this.pn1/(this.p-a),r=a*n*Math.sin(e.x),this.mode){case Rn.OBLIQ:a*=this.cosph0*t-this.sinph0*n*i;break;case Rn.EQUIT:a*=t;break;case Rn.N_POLE:a*=-(n*i);break;case Rn.S_POLE:a*=n*i;break}var s,l;return s=a*this.cg+r*this.sg,l=1/(s*this.sw*this.h1+this.cw),r=(r*this.cg-a*this.sg)*this.cw*l,a=s*l,e.x=r*this.a,e.y=a*this.a,e}function ZV(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},n,i,r;r=1/(this.pn1-e.y*this.sw),n=this.pn1*e.x*r,i=this.pn1*e.y*this.cw*r,e.x=n*this.cg+i*this.sg,e.y=i*this.cg-n*this.sg;var a=nr(e.x,e.y);if(Math.abs(a)<Be)t.x=0,t.y=e.y;else{var s,l;switch(l=1-a*a*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/a+a/this.pn1),s=Math.sqrt(1-l*l),this.mode){case Rn.OBLIQ:t.y=Math.asin(s*this.sinph0+e.y*l*this.cosph0/a),e.y=(s-this.sinph0*Math.sin(t.y))*a,e.x*=l*this.cosph0;break;case Rn.EQUIT:t.y=Math.asin(e.y*l/a),e.y=s*a,e.x*=l;break;case Rn.N_POLE:t.y=Math.asin(s),e.y=-e.y;break;case Rn.S_POLE:t.y=-Math.asin(s);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var QV=["Tilted_Perspective","tpers"],JV={init:WV,forward:qV,inverse:ZV,names:QV};function XV(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function YV(e){var t=e.x,n=e.y,i,r,a,s;if(t=t-this.long0,this.shape==="ellipse"){n=Math.atan(this.radius_p2*Math.tan(n));var l=this.radius_p/nr(this.radius_p*Math.cos(n),Math.sin(n));if(r=l*Math.cos(t)*Math.cos(n),a=l*Math.sin(t)*Math.cos(n),s=l*Math.sin(n),(this.radius_g-r)*r-a*a-s*s*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;i=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(a/nr(s,i)),e.y=this.radius_g_1*Math.atan(s/i)):(e.x=this.radius_g_1*Math.atan(a/i),e.y=this.radius_g_1*Math.atan(s/nr(a,i)))}else this.shape==="sphere"&&(i=Math.cos(n),r=Math.cos(t)*i,a=Math.sin(t)*i,s=Math.sin(n),i=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(a/nr(s,i)),e.y=this.radius_g_1*Math.atan(s/i)):(e.x=this.radius_g_1*Math.atan(a/i),e.y=this.radius_g_1*Math.atan(s/nr(a,i))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function KV(e){var t=-1,n=0,i=0,r,a,s,l;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),n=Math.tan(e.x/this.radius_g_1)*nr(1,i)):(n=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*nr(1,n));var d=i/this.radius_p;if(r=n*n+d*d+t*t,a=2*this.radius_g*t,s=a*a-4*r*this.C,s<0)return e.x=Number.NaN,e.y=Number.NaN,e;l=(-a-Math.sqrt(s))/(2*r),t=this.radius_g+l*t,n*=l,i*=l,e.x=Math.atan2(n,t),e.y=Math.atan(i*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(i=Math.tan(e.y/this.radius_g_1),n=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+i*i)):(n=Math.tan(e.x/this.radius_g_1),i=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+n*n)),r=n*n+i*i+t*t,a=2*this.radius_g*t,s=a*a-4*r*this.C,s<0)return e.x=Number.NaN,e.y=Number.NaN,e;l=(-a-Math.sqrt(s))/(2*r),t=this.radius_g+l*t,n*=l,i*=l,e.x=Math.atan2(n,t),e.y=Math.atan(i*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var eF=["Geostationary Satellite View","Geostationary_Satellite","geos"],tF={init:XV,forward:YV,inverse:KV,names:eF};function nF(e){e.Proj.projections.add(Yc),e.Proj.projections.add(Kc),e.Proj.projections.add(lR),e.Proj.projections.add(yR),e.Proj.projections.add(ER),e.Proj.projections.add(TR),e.Proj.projections.add(RR),e.Proj.projections.add(jR),e.Proj.projections.add(HR),e.Proj.projections.add(JR),e.Proj.projections.add(m9),e.Proj.projections.add(b9),e.Proj.projections.add(E9),e.Proj.projections.add(I9),e.Proj.projections.add(R9),e.Proj.projections.add(j9),e.Proj.projections.add(H9),e.Proj.projections.add(J9),e.Proj.projections.add(nV),e.Proj.projections.add(sV),e.Proj.projections.add(hV),e.Proj.projections.add(vV),e.Proj.projections.add(_V),e.Proj.projections.add(MV),e.Proj.projections.add(DV),e.Proj.projections.add(jV),e.Proj.projections.add(HV),e.Proj.projections.add(JV),e.Proj.projections.add(tF)}fi.defaultDatum="WGS84",fi.Proj=yr,fi.WGS84=new fi.Proj("WGS84"),fi.Point=xa,fi.toPoint=q_,fi.defs=Gn,fi.nadgrid=uB,fi.transform=Jc,fi.mgrs=OB,fi.version="__VERSION__",nF(fi);function iF(e,t,n,i,r){const a=1+Math.floor((e+180)/6),s=n+" +zone="+a+(t<0?" +south":""),l=fi(i,s,[e,t]);return{utmZone:a+(t<0?"S":"N"),north:l[1].toFixed(2)+r,east:l[0].toFixed(2)+r}}class rF{constructor(t){this.gridFileUrl=t,this.data=void 0,this.minimumHeight=-106.99,this.maximumHeight=85.39}isSupported(){return typeof Int16Array!="undefined"&&typeof Uint8Array!="undefined"}getHeight(t,n){return g2(this).then(function(i){return v2(i,t,n)})}getHeights(t){return g2(this).then(function(n){for(let i=0;i<t.length;++i){const r=t[i];r.height=v2(n,r.longitude,r.latitude)}return t})}}async function g2(e){const{defined:t}=Cesium;t(e.data)||(e.data=oF(e.gridFileUrl));let n=e.data;if(e.data instanceof Promise&&(n=await e.data),!(e.data instanceof Int16Array)){const i=new Uint8Array(n);for(let r=0;r<i.length;r+=2){const a=i[r];i[r]=i[r+1],i[r+1]=a}e.data=new Int16Array(n)}return e.data}function v2(e,t,n){const{Math:i}=Cesium;let r=720*(i.PI_OVER_TWO-n)/Math.PI;r<0?r=0:r>720&&(r=720),t=i.zeroToTwoPi(t);let a=1440*t/i.TWO_PI;a<0?a=0:a>1440&&(a=1440);const s=a|0,l=r|0,d=a-s,h=r-l,m=1-d,p=1-h,g=iu(e,l,s),v=iu(e,l,s+1),b=iu(e,l+1,s),P=iu(e,l+1,s+1);return(g*m*p+v*d*p+b*m*h+P*d*h)/100}function iu(e,t,n){return t>720?t=720:t<0&&(t=0),n>1439?n-=1440:n<0&&(n+=1440),e[t*1440+n]}function oF(e){const{Resource:t}=Cesium;return t.createIfNeeded(e).fetchArrayBuffer()}class aF{constructor(t){const{Cartographic:n,knockout:i}=Cesium,r=t.gridFileUrl;r&&(this.geoidModel=new rF(r)),this.proj4Projection=t.proj4Projection,this.projectionUnits=t.projectionUnits,this.proj4longlat=t.proj4longlat,this.lastHeightSamplePosition=new n,this.accurateSamplingDebounceTime=250,this.tileRequestInFlight=void 0,this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east="",this.useProjection=!1,this.debounceSampleAccurateHeight=b6(this.sampleAccurateHeight,this.accurateSamplingDebounceTime),this.decimal=t.decimal||5,this.rangeType=t.rangeType||0,i.track(this,["elevation","utmZone","latitude","longitude","north","east","useProjection"])}toggleUseProjection(){this.useProjection=!this.useProjection}updateCoordinatesFromCesium(t,n){const{Cartographic:i,defined:r,EllipsoidTerrainProvider:a,Intersections2D:s,SceneMode:l}=Cesium,d=t.scene,h=d.camera.getPickRay(n),m=d.globe,p=m.pickTriangle(h,d);if(r(p)){const g=m.ellipsoid,v=g.cartesianToCartographic(p.v0),b=g.cartesianToCartographic(p.v1),P=g.cartesianToCartographic(p.v2),w=g.cartesianToCartographic(d.mode===l.SCENE3D?p.intersection:d.globe.pick(h,d));let S;if(m.terrainProvider instanceof a)w.height=void 0;else{const _=s.computeBarycentricCoordinates(w.longitude,w.latitude,v.longitude,v.latitude,b.longitude,b.latitude,P.longitude,P.latitude);if(_.x>=-1e-15&&_.y>=-1e-15&&_.z>=-1e-15){const U=_.x*v.height+_.y*b.height+_.z*P.height;w.height=U}const M=m.terrainProvider.getLevelMaximumGeometricError(p.tile.level),A=w.height,D=Math.max(p.tile.data.tileBoundingRegion.minimumHeight,A-M),z=Math.min(p.tile.data.tileBoundingRegion.maximumHeight,A+M),$=D-(this.geoidModel?this.geoidModel.minimumHeight:0),L=z+(this.geoidModel?this.geoidModel.maximumHeight:0);S=Math.max(Math.abs(A-$),Math.abs(L-A))}i.clone(w,this.lastHeightSamplePosition);const T=m.terrainProvider;this.cartographicToFields(w,S),T instanceof a||this.debounceSampleAccurateHeight(T,w)}else this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east=""}cartographicToFields(t,n){const{Math:i}=Cesium,r=i.toDegrees(t.latitude),a=i.toDegrees(t.longitude);if(this.useProjection){const l=iF(a,r,this.proj4Projection,this.proj4longlat,this.projectionUnits);this.utmZone=l.utmZone,this.north=l.north,this.east=l.east}const s=EL(a,r,{height:t.height,errorBar:n,decimal:this.decimal,rangeType:this.rangeType});this.latitude=s.latitude,this.longitude=s.longitude,this.elevation=s.elevation}sampleAccurateHeight(t,n){const{Cartographic:i,sampleTerrainMostDetailed:r}=Cesium;if(this.tileRequestInFlight){this.debounceSampleAccurateHeight.cancel(),this.debounceSampleAccurateHeight(t,n);return}const a=i.clone(n),s=this.geoidModel?this.geoidModel.getHeight(n.longitude,n.latitude):void 0,l=r(t,[a]);this.tileRequestInFlight=Promise.all([s,l]).then(d=>{const h=d[0]||0;this.tileRequestInFlight=void 0,i.equals(n,this.lastHeightSamplePosition)&&(n.height=a.height-h,this.cartographicToFields(n))}).catch(()=>{this.tileRequestInFlight=void 0})}}const sF=[],lF={start:0,stop:0},cF={},uF={},dF={};function hF(){const{Globe:e,GlobeSurfaceTile:t,BoundingSphere:n,defaultValue:i,Cartesian3:r,defined:a,DeveloperError:s,IntersectionTests:l,SceneMode:d}=Cesium;e.prototype.pickTriangle=e.prototype.pickTriangle||function(h,m,p,g){if(!a(h))throw new s("ray is required");if(!a(m))throw new s("scene is required");p=i(p,!0);const v=m.mode,b=m.mapProjection,P=sF;P.length=0;const w=this._surface._tilesToRender;let S=w.length,T,_;for(_=0;_<S;++_){T=w[_];const A=T.data;if(!a(A))continue;const D=A.pickBoundingSphere;v!==d.SCENE3D?(n.fromRectangleWithHeights2D(T.rectangle,b,A.minimumHeight,A.maximumHeight,D),r.fromElements(D.center.z,D.center.x,D.center.y,D.center)):n.clone(A.boundingSphere3D,D);const z=l.raySphere(h,D,lF);a(z)&&P.push(T)}P.sort(mF(h.origin));let M;for(S=P.length,_=0;_<S;++_)if(M=P[_].data.pickTriangle(h,m.mode,m.mapProjection,p,g),a(M)){M.tile=P[_];break}return M},t.prototype.pickTriangle=t.prototype.pickTriangle||function(h,m,p,g){const v=this.renderedMesh;if(!a(v))return;const b=v.vertices,P=v.indices,w=v.encoding,S=P.length;for(let T=0;T<S;T+=3){const _=P[T],M=P[T+1],A=P[T+2],D=Ap(w,m,p,b,_,cF),z=Ap(w,m,p,b,M,uF),$=Ap(w,m,p,b,A,dF),L=l.rayTriangle(h,D,z,$,g,new r);if(a(L))return{intersection:L,v0:D,v1:z,v2:$}}}}function mF(e){const{BoundingSphere:t}=Cesium;return function(n,i){const r=t.distanceSquaredTo(n.data.pickBoundingSphere,e),a=t.distanceSquaredTo(i.data.pickBoundingSphere,e);return r-a}}function Ap(e,t,n,i,r,a){e.decodePosition(i,r,a);const{Cartesian3:s,defined:l,SceneMode:d}=Cesium;if(l(t)&&t!==d.SCENE3D){const h=n.ellipsoid.cartesianToCartographic(a);n.project(h,a),s.fromElements(a.z,a.x,a.y,a)}return a}var y2={gridFileUrl:{type:String,default:"https://zouyaoji.top/vue-cesium/SampleData/WW15MGH.DAC"},proj4Projection:{type:String,default:"+proj=utm +ellps=GRS80 +units=m +no_defs"},projectionUnits:{type:String,default:"m"},proj4longlat:{type:String,default:"+proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees +no_defs"},position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},color:{type:String,default:"#fff"},decimal:{type:Number,default:6},rangeType:{type:Number,default:0},background:{type:String,default:"#3f4854"},showCameraInfo:{type:Boolean,default:!0},showMouseInfo:{type:Boolean,default:!0},showPerformanceInfo:{type:Boolean,default:!0},useProjection:{type:Boolean,default:!0},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const pF={...Le,statusBarEvt:e=>!0},Dp=y2;var Lp=u.defineComponent({name:"VcStatusBar",props:Dp,emits:pF,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcStatusBar",i.cesiumEvents=[];const r=rt(e,t,i);if(r===void 0)return;const a=cn(i),{$services:s}=r,l=u.ref(null),d=u.ref(null),{t:h}=Qt();let m=-1,p=-1;const g=u.reactive({heading:"NaN",pitch:"NaN",roll:"NaN",height:"NaN",level:"NaN"}),v=u.reactive({fps:"NaN",ms:"NaN"}),b=u.ref(),P=pi(e),w=((n=a.proxy)==null?void 0:n.$options.name)==="VcNavigation",S=u.ref(w),T=u.reactive({});let _=!1;u.watch(()=>e,L=>{u.nextTick(()=>{i.mounted&&M()})},{deep:!0}),i.createCesiumObject=async()=>{const{viewer:L}=s,U=L._element;return e.showMouseInfo&&(b.value=new aF({gridFileUrl:e.gridFileUrl,proj4Projection:e.proj4Projection,projectionUnits:e.projectionUnits,proj4longlat:e.proj4longlat,decimal:e.decimal,rangeType:e.rangeType}),U.addEventListener("wheel",z,!1),U.addEventListener("mousemove",z,!1),U.addEventListener("touchmove",z,!1),hF()),e.showCameraInfo&&(L.camera.changed.addEventListener(D),D()),e.showPerformanceInfo&&(_=L.scene.debugShowFramesPerSecond,L.scene.debugShowFramesPerSecond=!0,L.scene.postRender.addEventListener(A)),l},i.mount=async()=>{var L,U;S.value=!0,u.nextTick(()=>{M()});const{viewer:Z}=s;return(U=Z.viewerWidgetResized)==null||U.raiseEvent({type:i.cesiumClass,status:"mounted",target:(L=Me(l))==null?void 0:L.$el}),!0},i.unmount=async()=>{var L,U;S.value=!1;const{viewer:Z}=s,W=Z._element;return e.showMouseInfo&&(b.value=void 0,W.removeEventListener("wheel",z),W.removeEventListener("mousemove",z),W.removeEventListener("touchmove",z)),e.showCameraInfo&&Z.camera.changed.removeEventListener(D),e.showPerformanceInfo&&(_?Z.scene._performanceDisplay._container.style.display="block":Z.scene.debugShowFramesPerSecond=!1,Z.scene.postRender.removeEventListener(A)),(U=Z.viewerWidgetResized)==null||U.raiseEvent({type:i.cesiumClass,status:"unmounted",target:(L=Me(l))==null?void 0:L.$el}),!0};const M=()=>{const L=P.style.value;if(T.left=L.left,T.top=L.top,T.transform=L.transform,L.background=e.background,L.color=e.color,typeof e.teleportToViewer=="undefined"||e.teleportToViewer){const U=P.attach.value;(U.bottom||U.top)&&!U.left&&!U.right&&(L.left="50%",L.transform="translate(-50%, 0)"),(U.left||U.right)&&!U.top&&!U.bottom&&(L.top="50%",L.transform="translate(0, -50%)")}Object.assign(T,L)},A=um(L=>{var U,Z;v.fps=(U=L._performanceDisplay)==null?void 0:U._fpsText.nodeValue,v.ms=(Z=L._performanceDisplay)==null?void 0:Z._msText.nodeValue,L._performanceDisplay._container.style.display="none"},250),D=()=>{const{viewer:L}=s,U=L.scene,Z=U.screenSpaceCameraController;if(U.mode===Cesium.SceneMode.MORPHING||!Z.enableInputs)return;const{Math:W}=Cesium;g.heading=W.toDegrees(L.camera.heading).toFixed(1),g.pitch=W.toDegrees(L.camera.pitch).toFixed(1),g.roll=W.toDegrees(L.camera.roll).toFixed(1),g.height=L.camera.positionCartographic.height.toFixed(2),g.level=ch(Number(g.height)).toFixed(0),ze(i,"statusBarEvt")&&t.emit("statusBarEvt",{type:"statusBar",mouseCoordsInfo:b.value,cameraInfo:g,performanceInfo:v})},z=L=>{var U;const{Cartesian2:Z,SceneMode:W}=Cesium,{viewer:y}=s;if(y.scene.mode===W.MORPHING)return;const C=L.type==="mousemove"||L.type==="wheel"?L.clientX:L.changedTouches[0].clientX,x=L.type==="mousemove"||L.type==="wheel"?L.clientY:L.changedTouches[0].clientY;if(C===m&&x===p)return;m=C,p=x;const B=y._element;if(y){if(e.showMouseInfo){const O=B.getBoundingClientRect(),I=new Z(C-O.left,x-O.top);(U=b.value)==null||U.updateCoordinatesFromCesium(y,I)}ze(i,"statusBarEvt")&&t.emit("statusBarEvt",{type:"statusBar",mouseCoordsInfo:b.value,cameraInfo:g,performanceInfo:v})}},$=()=>{var L,U;e.useProjection&&((L=Me(d))==null||L.hide(),e.showMouseInfo&&((U=b.value)==null||U.toggleUseProjection()))};return Object.assign(i.proxy,{getMouseCoordsInfo:()=>b.value,getCameraInfo:()=>g,getPerformanceInfo:()=>v}),()=>{var L,U,Z,W,y,C,x,B;if(S.value){const O=[];e.showMouseInfo?((L=b.value)!=null&&L.useProjection?O.push(u.h("div",{class:"vc-section-short ellipsis"},[u.h("span",{...t.attrs},h("vc.navigation.statusBar.zone")),u.h("span",null,(W=b.value)==null?void 0:W.utmZone)]),u.h("div",{class:"vc-section ellipsis"},[u.h("span",{...t.attrs},h("vc.navigation.statusBar.e")),u.h("span",null,(y=b.value)==null?void 0:y.east)]),u.h("div",{class:"vc-section ellipsis"},[u.h("span",{...t.attrs},h("vc.navigation.statusBar.n")),u.h("span",null,(C=b.value)==null?void 0:C.north)])):O.push(u.h("div",{class:"vc-section ellipsis"},[u.h("span",{...t.attrs},h("vc.navigation.statusBar.lng")),u.h("span",{},(U=b.value)==null?void 0:U.longitude)]),u.h("div",{class:"vc-section ellipsis"},[u.h("span",{},h("vc.navigation.statusBar.lat")),u.h("span",{},(Z=b.value)==null?void 0:Z.latitude)])),(x=b.value)!=null&&x.elevation?O.push(u.h("div",{class:"vc-section ellipsis"},[u.h("span",{...t.attrs},h("vc.navigation.statusBar.elev")),u.h("span",{},(B=b.value)==null?void 0:B.elevation)])):O.push(u.createCommentVNode("v-if"))):O.push(u.createCommentVNode("v-if")),e.showCameraInfo?O.push(u.h("div",{class:"vc-section-short-mini ellipsis"},[u.h("span",{...t.attrs},h("vc.navigation.statusBar.level")),u.h("span",null,g.level)]),u.h("div",{class:"vc-section-short ellipsis"},[u.h("span",{...t.attrs},h("vc.navigation.statusBar.heading")),u.h("span",null,`${g.heading}\xB0`)]),u.h("div",{class:"vc-section-short ellipsis"},[u.h("span",{...t.attrs},h("vc.navigation.statusBar.pitch")),u.h("span",null,`${g.pitch}\xB0`)]),u.h("div",{class:"vc-section-short ellipsis"},[u.h("span",{...t.attrs},h("vc.navigation.statusBar.roll")),u.h("span",null,`${g.roll}\xB0`)]),u.h("div",{class:"vc-section ellipsis"},[u.h("span",{...t.attrs},h("vc.navigation.statusBar.cameraHeight")),u.h("span",null,`${g.height}m`)])):O.push(u.createCommentVNode("v-if")),e.showPerformanceInfo?O.push(u.h("div",{class:"vc-section-short-mini ellipsis"},[u.h("span",null,v.ms)]),u.h("div",{class:"vc-section-short-mini ellipsis"},[u.h("span",null,v.fps)])):O.push(u.createCommentVNode("v-if")),Lt(e.tooltip)&&e.showMouseInfo&&e.useProjection?O.push(u.h(mn,{ref:d,...e.tooltip},()=>u.h("strong",null,Lt(e.tooltip)&&e.tooltip.tip||h("vc.navigation.statusBar.tip")))):O.push(u.createCommentVNode("v-if"));const I=u.h(zn,{ref:l,class:`vc-status-bar ${P.classes.value} ${e.customClass}`,style:T,noCaps:!0,onClick:$},()=>O);return!w&&e.teleportToViewer?u.h(u.Teleport,{to:s.viewer._element},I):I}else return u.createCommentVNode("v-if")}}}),b2={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},color:{type:String,default:"#fff"},background:{type:String,default:"#3f4854"},width:{type:Number,default:100},barBackground:{type:String,default:"#fff"},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const fF={...Le,distanceLegendEvt:e=>!0},Bp=b2;var Rp=u.defineComponent({name:"VcDistanceLegend",props:Bp,emits:fF,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcDistanceLegend",i.cesiumEvents=[];const r=rt(e,t,i);if(r===void 0)return;const a=cn(i),{$services:s}=r,l=u.ref(null),d=u.ref(""),h=pi(e),m=((n=a.proxy)==null?void 0:n.$options.name)==="VcNavigation",p=u.ref(m),g=u.reactive({});let v=0;const b=u.ref(0);let P=0;u.watch(()=>e,_=>{u.nextTick(()=>{i.mounted&&S()})},{deep:!0});const w=u.computed(()=>({width:`${b.value}px`,left:`${5+(e.width+15-b.value)/2}px`,height:"2px",background:e.barBackground}));i.createCesiumObject=async()=>(d.value="",l),i.mount=async()=>{var _,M;p.value=!0,u.nextTick(()=>{S()});const{viewer:A}=s;return A.scene.postRender.addEventListener(T),(M=A.viewerWidgetResized)==null||M.raiseEvent({type:i.cesiumClass,status:"mounted",target:(_=Me(l))==null?void 0:_.$el}),!0},i.unmount=async()=>{var _,M;p.value=!1;const{viewer:A}=s;return A.scene.postRender.removeEventListener(T),(M=A.viewerWidgetResized)==null||M.raiseEvent({type:i.cesiumClass,status:"unmounted",target:(_=Me(l))==null?void 0:_.$el}),!0};const S=()=>{const _=h.style.value;if(g.left=_.left,g.top=_.top,g.transform=_.transform,_.background=e.background,_.color=e.color,typeof e.teleportToViewer=="undefined"||e.teleportToViewer){const M=h.attach.value;(M.bottom||M.top)&&!M.left&&!M.right&&(_.left="50%",_.transform="translate(-50%, 0)"),(M.left||M.right)&&!M.top&&!M.bottom&&(_.top="50%",_.transform="translate(0, -50%)")}_.width=`${e.width}px`,Object.assign(g,_)},T=um(_=>{const{Cartesian2:M,defined:A,getTimestamp:D,EllipsoidGeodesic:z}=Cesium,$=D();if($<v+250)return;v=$;const L=new z,U=_.canvas.clientWidth,Z=_.canvas.clientHeight,W=_.camera.getPickRay(new M(U/2|0,Z-1)),y=_.camera.getPickRay(new M(1+U/2|0,Z-1)),C=_.globe,x=C.pick(W,_),B=C.pick(y,_);if(!A(x)||!A(B)){b.value=0,d.value="";return}const O=C.ellipsoid.cartesianToCartographic(x),I=C.ellipsoid.cartesianToCartographic(B);L.setEndPoints(O,I);const V=L.surfaceDistance,j=e.width-10;let N;for(let H=Vp.length-1;!A(N)&&H>=0;--H)Vp[H]/V<j&&(N=Vp[H],P!==N&&(P=N,ze(i,"distanceLegendEvt")&&t.emit("distanceLegendEvt",{type:"distanceLegend",distance:P,status:"changed"})));if(A(N)){let H;P>=1e3?H=(N/1e3).toString()+" km":H=N.toString()+" m",b.value=N/V|0,d.value=H}else b.value=0,d.value=""},500);return()=>{if(p.value&&d.value!==void 0){const _=u.h(zn,{ref:l,class:`vc-distance-legend ${h.classes.value} ${e.customClass}`,style:g,stack:!0,noCaps:!0},()=>[u.h("label",null,d.value),u.h("div",{style:w.value,class:"vc-bar"})]);return!m&&e.teleportToViewer?u.h(u.Teleport,{to:s.viewer._element},_):_}else return u.createCommentVNode("v-if")}}});const Vp=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7],C2={...eo,compassOpts:{type:[Object,Boolean],default:()=>Oi(ap,["position","offset"])},zoomOpts:{type:[Object,Boolean],default:()=>Oi(hp,["position","offset"])},printOpts:{type:[Object,Boolean],default:()=>Oi(M_,["position","offset"])},locationOpts:{type:[Object,Boolean],default:()=>Oi(S_,["position","offset"])},otherOpts:{type:[Object,Boolean],default:()=>({position:"bottom-right",offset:[2,3],statusBarOpts:Oi(y2,["position","offset"]),distancelegendOpts:Oi(b2,["position","offset"])})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},Ys=Oi(C2),gF={...Le,zoomEvt:e=>!0,compassEvt:e=>!0,locationEvt:e=>!0,printEvt:e=>!0,statusBarEvt:e=>!0,distanceLegendEvt:e=>!0},Fp=C2;var w2=u.defineComponent({name:"VcNavigation",inheritAttrs:!1,props:Fp,emits:gF,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcNavigation";const i=rt(e,t,n);if(i===void 0)return;const r=u.ref(!1),{$services:a}=i,s=pi(e),l=pi(e.otherOpts||{position:"bottom-right"}),d=u.ref(null),h=u.ref(null),m=u.ref(null),p=u.ref(null),g=u.ref(null),v=u.ref(null),b=u.ref(null),P=u.ref(null),w=u.reactive({}),S=u.reactive({}),{emit:T}=t;u.watch(()=>e,()=>{u.nextTick(()=>{var B,O,I,V,j,N;x(),(B=Me(m))==null||B.reload(),(O=Me(p))==null||O.reload(),(I=Me(v))==null||I.reload(),(V=Me(g))==null||V.reload(),(j=Me(b))==null||j.reload(),(N=Me(P))==null||N.reload()})},{deep:!0});const _=u.computed(()=>Object.assign({},Ys.compassOpts,e.compassOpts)),M=u.computed(()=>Object.assign({},Ys.zoomOpts,e.zoomOpts)),A=u.computed(()=>Object.assign({},Ys.printOpts,e.printOpts)),D=u.computed(()=>Object.assign({},Ys.locationOpts,e.locationOpts)),z=u.computed(()=>Object.assign({},Ys.otherOpts,e.otherOpts)),$=B=>{ze(n,"compassEvt")&&T("compassEvt",B)},L=B=>{ze(n,"zoomEvt")&&T("zoomEvt",B)},U=B=>{ze(n,"printEvt")&&T("printEvt",B)},Z=B=>{ze(n,"locationEvt")&&T("locationEvt",B)},W=B=>{ze(n,"statusBarEvt")&&T("statusBarEvt",B)},y=B=>{ze(n,"distanceLegendEvt")&&T("distanceLegendEvt",B)};n.createCesiumObject=async()=>{var B;const{viewer:O}=a;return(B=O.viewerWidgetResized)==null||B.addEventListener(C),[d,h]},n.mount=async()=>{var B;r.value=!0,u.nextTick(()=>{x()});const{viewer:O}=a;return(B=O.viewerWidgetResized)==null||B.raiseEvent({type:n.cesiumClass,status:"mounted",target:Me(d)}),!0},n.unmount=async()=>{var B,O;r.value=!1;const{viewer:I}=a;return(B=I.viewerWidgetResized)==null||B.removeEventListener(C),(O=I.viewerWidgetResized)==null||O.raiseEvent({type:n.cesiumClass,status:"unmounted",target:Me(d)}),!0};const C=()=>{u.nextTick(()=>{x()})},x=()=>{var B,O,I,V,j;const N=(B=Me(m))==null?void 0:B.$el;let H=0,ne=0;if(N!==void 0&&N.nodeName!=="#comment"){const re=getComputedStyle(N.parentNode).margin;ne=parseInt(re),H+=N.getBoundingClientRect().height+ne*2}const ie=(O=Me(p))==null?void 0:O.$el;ie!==void 0&&ie.nodeName!=="#comment"&&(H+=ie.getBoundingClientRect().height+ne*2);const ee=(I=Me(g))==null?void 0:I.$el;ee!==void 0&&ee.nodeName!=="#comment"&&(H+=ee.getBoundingClientRect().height+ne*2);const Q=(V=Me(v))==null?void 0:V.$el;Q!==void 0&&Q.nodeName!=="#comment"&&(H+=Q.getBoundingClientRect().height+ne*2);const G=s.style.value,J=s.attach.value;w.left=G.left,w.top=G.top,w.transform=G.transform,(typeof e.teleportToViewer=="undefined"||e.teleportToViewer)&&((J.bottom||J.top)&&!J.left&&!J.right&&(G.left="50%",G.transform="translate(-50%, 0)"),(J.left||J.right)&&!J.top&&!J.bottom&&(G.top="50%",G.transform="translate(0, -50%)")),Object.assign(w,G,{height:`${H}px`});const oe=l.style.value,Y=l.attach.value;S.left=oe.left,S.top=oe.top,S.transform=oe.transform,(typeof e.teleportToViewer=="undefined"||e.teleportToViewer)&&((Y.bottom||Y.top)&&!Y.left&&!Y.right&&(oe.left="50%",oe.transform="translate(-50%, 0)"),(Y.left||Y.right)&&!Y.top&&!Y.bottom&&(oe.top="50%",oe.transform="translate(0, -50%)"));let X=0;const se=(j=Me(b))==null?void 0:j.$el;se!==void 0&&se.nodeName!=="#comment"&&(X+=se.getBoundingClientRect().height),Object.assign(S,oe,{height:`${X}px`})};return()=>{if(r.value){const B=[];_.value&&e.compassOpts!==!1?B.push(u.h("div",{class:"vc-navigation-control"},[u.h(dp,{ref:m,..._.value,onCompassEvt:$})])):B.push(u.createCommentVNode("v-if")),M.value&&e.zoomOpts!==!1?B.push(u.h("div",{class:"vc-navigation-control"},[u.h(fp,{ref:p,...M.value,onZoomEvt:L})])):B.push(u.createCommentVNode("v-if")),A.value&&e.printOpts!==!1?B.push(u.h("div",{class:"vc-navigation-control"},[u.h(vp,{ref:g,...A.value,onPrintEvt:U})])):B.push(u.createCommentVNode("v-if")),D.value&&e.locationOpts!==!1?B.push(u.h("div",{class:"vc-navigation-control"},[u.h(bp,{ref:v,...D.value,onLocationEvt:Z})])):B.push(u.createCommentVNode("v-if"));let O=[u.h("div",{class:"vc-navigation-controls"},B)];O=Ai(t.slots.default,O);const I=[],V=u.h("div",{ref:d,class:`vc-navigation ${s.classes.value} ${e.customClass}`,style:w},O);if(e.teleportToViewer?I.push(u.h(u.Teleport,{to:a.viewer._element},V)):I.push(V),e.otherOpts!==!1){const j=u.h("div",{ref:h,class:"vc-location-other-controls "+l.classes.value,style:S},[u.h(Lp,{ref:b,...z.value.statusBarOpts,onStatusBarEvt:W}),u.h(Rp,{ref:P,...z.value.distancelegendOpts,onDistanceLegendEvt:y})]);e.teleportToViewer?I.push(u.h(u.Teleport,{to:a.viewer._element},j)):I.push(j)}return I}else return u.createCommentVNode("v-if")}}});function vF(e,{emit:t},n){const i={},r={},a={},s={};let l,d,h,m;const p=u.ref(0);let g,v,b=0,P={},w=0,S,T,_,M={},A=0;const D=u.ref(56),z=u.ref(3);let $;const L=u.ref(null),U=V=>{var j;V.stopPropagation&&V.stopPropagation(),V.preventDefault&&V.preventDefault(),(j=Me(L))==null||j.hide();const{Cartesian2:N,SceneMode:H,Math:ne}=Cesium;if(n.viewer.scene.mode===H.MORPHING)return!0;const ie=V.currentTarget,ee=V.currentTarget.getBoundingClientRect(),Q=new N((ee.right-ee.left)/2,(ee.bottom-ee.top)/2);let G;V instanceof MouseEvent?(G=new N(V.clientX-ee.left,V.clientY-ee.top),$=new N(V.clientX,V.clientY)):V instanceof TouchEvent&&(G=new N(V.changedTouches[0].clientX-ee.left,V.changedTouches[0].clientY-ee.top),$=new N(V.changedTouches[0].clientX,V.changedTouches[0].clientY));const J=N.subtract(G,Q,i),oe=N.magnitude(J);if(oe>30&&oe<45)x(ie,J);else if(!(oe>50&&oe<70))C(ie,J);else{const Y=ne.PI_OVER_TWO-Math.atan2(-J.y,J.x);Y>=0&&Y<=ne.PI_OVER_TWO&&B(ie,J)}},Z=V=>{const{Cartesian2:j,Math:N}=Cesium,H=V.currentTarget.getBoundingClientRect(),ne=new j((H.right-H.left)/2,(H.bottom-H.top)/2),ie=V.type==="mouseup"?new j(V.clientX-H.left,V.clientY-H.top):new j(V.changedTouches[0].clientX-H.left,V.changedTouches[0].clientY-H.top),ee=j.subtract(ie,ne,i),Q=j.magnitude(ee);if(Q>30&&Q<45){const G=N.toDegrees(Math.atan2(-ee.y,ee.x)),J=V.type==="mouseup"?new j(V.clientX,V.clientY):new j(V.changedTouches[0].clientX,V.changedTouches[0].clientY),oe=J.x-$.x,Y=J.y-$.y;if(Math.sqrt(oe*oe+Y*Y)>5)return;const X=N.toDegrees(p.value),se=Math.abs(G-X),re=n.viewer.scene;(G>0&&X>0&&X<90&&se>80&&se<100||se>260&&se<280)&&re.camera.flyTo({destination:re.camera.position,orientation:{heading:0,pitch:re.camera.pitch}})}},W=V=>{const{Cartesian2:j,Cartesian3:N,defined:H,Matrix4:ne,Ray:ie,SceneMode:ee,Transforms:Q}=Cesium,{viewer:G}=n,J=G.scene,oe=J.camera,Y=J.screenSpaceCameraController;if(J.mode===ee.MORPHING||!Y.enableInputs)return!0;if(J.mode===ee.COLUMBUS_VIEW&&!Y.enableTranslate||(J.mode===ee.SCENE3D||J.mode===ee.COLUMBUS_VIEW)&&(!Y.enableLook||J.mode===ee.SCENE3D&&!Y.enableRotate))return;const X=new j;X.x=J.canvas.clientWidth/2,X.y=J.canvas.clientHeight/2;const se=new ie,re=oe.getPickRay(X,se),de=J.globe.pick(re,J,s);if(!H(de)){G.camera.flyHome();return}const ce=ze(n,"compassEvt");ce&&t("compassEvt",{type:"reset",camera:G.camera,status:"start",target:V.currentTarget});const he=Q.eastNorthUpToFixedFrame(de||new N,G.scene.globe.ellipsoid),ge=N.subtract(de||new N,oe.position,new N),Pe=__.createTween(J,{destination:ne.multiplyByPoint(he,new N(0,0,N.magnitude(ge)),new N),direction:ne.multiplyByPointAsVector(he,new N(0,0,-1),new N),up:ne.multiplyByPointAsVector(he,new N(0,1,0),new N),duration:e.duration,complete:()=>{ce&&t("compassEvt",{type:"reset",camera:G.camera,status:"end",target:V.currentTarget})},cancel:()=>{ce&&t("compassEvt",{type:"reset",camera:G.camera,status:"cancel",target:V.currentTarget})}});J.tweens.add(Pe)},y=()=>{const{defined:V}=Cesium;V(n.viewer)?(l&&(l(),l=void 0),l=n.viewer.scene.postRender.addEventListener(function(){p.value!==n.viewer.scene.camera.heading&&(p.value=n.viewer.scene.camera.heading)})):l&&(l(),l=void 0)},C=(V,j)=>{const{defined:N,getTimestamp:H,SceneMode:ne,Math:ie,ScreenSpaceEventType:ee}=Cesium,Q=n.viewer.scene,G=Q.screenSpaceCameraController;switch(Q.mode){case ne.COLUMBUS_VIEW:if(G.enableLook)break;if(!G.enableTranslate||!G.enableTilt)return;break;case ne.SCENE3D:if(G.enableLook)break;if(!G.enableTilt||!G.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!G.enableTranslate)return;break}S.removeInputAction(ee.LEFT_UP),N(m)&&n.viewer.clock.onTick.removeEventListener(m),h=void 0,m=void 0,H();let J=ie.PI_OVER_TWO-Math.atan2(-j.y,j.x);const oe=Math.PI/4;let Y=0;const X={LEFT:1,RIGHT:2,UP:3,DOWN:4};Y=J>=-oe&&oe>=J?X.DOWN:J>=oe&&3*oe>=J?X.RIGHT:J>=3*oe&&5*oe>=J?X.UP:X.LEFT;const se=ze(n,"compassEvt");let re="rotateEast";switch(Y){case X.LEFT:re="rotateWest";break;case X.RIGHT:re="rotateEast";break;case X.UP:re="rotateNorth";break;case X.DOWN:re="rotateSouth"}se&&t("compassEvt",{type:re,camera:Q.camera,status:"start",target:V}),m=function(de){const ce=n.viewer.scene,he=ce.camera;switch(H(),J=20*Math.abs(he.positionCartographic.height/6378317)*5e-4,Y){case X.LEFT:he.rotateLeft(J);break;case X.RIGHT:he.rotateRight(J);break;case X.UP:he.rotate(he.right,-J);break;case X.DOWN:he.rotate(he.right,J)}se&&t("compassEvt",{type:re,camera:ce.camera,status:"changing",target:V})},h=function(de){S.removeInputAction(ee.LEFT_UP),N(m)&&n.viewer.clock.onTick.removeEventListener(m),h=void 0,m=void 0,se&&t("compassEvt",{type:re,camera:Q.camera,status:"end",target:V})},S.setInputAction(h,ee.LEFT_UP),d=n.viewer.clock.onTick.addEventListener(m)},x=(V,j)=>{if(!e.enableCompassOuterRing)return;const N=n.viewer.scene;let H=N.camera;const ne=N.screenSpaceCameraController;if(N.mode===Cesium.SceneMode.MORPHING||N.mode===Cesium.SceneMode.SCENE2D||!ne.enableInputs||!ne.enableLook&&(N.mode===Cesium.SceneMode.COLUMBUS_VIEW||N.mode===Cesium.SceneMode.SCENE3D&&!ne.enableRotate))return;document.removeEventListener("mousemove",v,!1),document.removeEventListener("touchmove",v,!1),document.removeEventListener("mouseup",g,!1),document.removeEventListener("touchend",g,!1);const{Cartesian2:ie,Cartesian3:ee,defined:Q,Math:G,Matrix4:J,Ray:oe,Transforms:Y}=Cesium;v=void 0,g=void 0;const X=ze(n,"compassEvt");X&&t("compassEvt",{type:"rotate",camera:N.camera,status:"start",target:V}),b=Math.atan2(-j.y,j.x);const se=new ie;se.x=N.canvas.clientWidth/2,se.y=N.canvas.clientHeight/2;const re=new oe,de=H.getPickRay(se,re),ce=N.globe.pick(de,N,s);Q(ce)?P=Y.eastNorthUpToFixedFrame(ce||new ee,N.globe.ellipsoid,a):P=Y.eastNorthUpToFixedFrame(H.positionWC,N.globe.ellipsoid,a);let he=J.clone(H.transform,r);H.lookAtTransform(P),w=Math.atan2(H.position.y,H.position.x),ee.magnitude(new ee(H.position.x,H.position.y,0)),H.lookAtTransform(he),v=function(ge){const Pe=V.getBoundingClientRect(),Ie=new ie((Pe.right-Pe.left)/2,(Pe.bottom-Pe.top)/2);let _e;ge instanceof MouseEvent?_e=new ie(ge.clientX-Pe.left,ge.clientY-Pe.top):ge instanceof TouchEvent&&(_e=new ie(ge.changedTouches[0].clientX-Pe.left,ge.changedTouches[0].clientY-Pe.top));const Ee=ie.subtract(_e,Ie,i),De=Math.atan2(-Ee.y,Ee.x)-b,Se=G.zeroToTwoPi(w-De);H=n.viewer.scene.camera,he=J.clone(H.transform,r),H.lookAtTransform(P);const xe=Math.atan2(H.position.y,H.position.x);H.rotateRight(Se-xe),H.lookAtTransform(he),X&&t("compassEvt",{type:"rotate",camera:N.camera,status:"changing",target:V})},g=function(ge){document.removeEventListener("mousemove",v,!1),document.removeEventListener("touchmove",v,!1),document.removeEventListener("mouseup",g,!1),document.removeEventListener("touchend",g,!1),v=void 0,g=void 0,X&&t("compassEvt",{type:"rotate",camera:N.camera,status:"end",target:V})},document.addEventListener("mousemove",v,!1),document.addEventListener("touchmove",v,!1),document.addEventListener("mouseup",g,!1),document.addEventListener("touchend",g,!1)},B=(V,j)=>{const{Cartesian2:N,defined:H,Math:ne,Matrix4:ie,ScreenSpaceEventType:ee,Transforms:Q}=Cesium;S.removeInputAction(ee.MOUSE_MOVE),S.removeInputAction(ee.LEFT_UP),T=void 0,_=void 0,A=ne.PI_OVER_TWO-Math.atan2(-j.y,j.x),A=A<0?0:A,A=A>ne.PI_OVER_TWO?ne.PI_OVER_TWO:A;const G=n.viewer.scene,J=G.camera,oe=new N;oe.x=G.canvas.clientWidth/2,oe.y=G.canvas.clientHeight/2;let Y=J.pickEllipsoid(oe,G.globe.ellipsoid);if(!H(Y))for(;oe.y<G.canvas.clientHeight;)oe.y+=5,Y=J.pickEllipsoid(oe,G.globe.ellipsoid);const X=ze(n,"compassEvt");X&&t("compassEvt",{type:"tilt",camera:G.camera,status:"start",target:V}),lr(Y)&&H(Y)&&(M=Q.eastNorthUpToFixedFrame(Y,G.globe.ellipsoid)),T=se=>{const re=V.getBoundingClientRect(),de=new Cesium.Cartesian2((re.right-re.left)/2,(re.bottom-re.top)/2),ce=N.clone(se.endPosition),he=N.subtract(ce,de,i);let ge=ne.PI_OVER_TWO-Math.atan2(-he.y,he.x);ge=ge<0?0:ge,ge=ge>ne.PI_OVER_TWO?ne.PI_OVER_TWO:ge;const Pe=n.viewer.scene.camera,Ie=ie.clone(Pe.transform,r);Pe.lookAtTransform(M);const _e=ge-A;Pe.rotateUp(_e),A=ge,Pe.lookAtTransform(Ie);let Ee=Math.ceil(ge/(Math.PI/40));Ee=Ee>19?19:Ee;const De=$p()[Ee];D.value=De.x,z.value=De.y,X&&t("compassEvt",{type:"tilt",camera:G.camera,status:"changing",target:V})},_=function(se){S.removeInputAction(ee.MOUSE_MOVE),S.removeInputAction(ee.LEFT_UP),T=void 0,_=void 0,X&&t("compassEvt",{type:"tilt",camera:G.camera,status:"end",target:V})},S.setInputAction(T,ee.MOUSE_MOVE),S.setInputAction(_,ee.LEFT_UP)},O=V=>{v!==void 0&&(V.cancel=!0)},I=()=>{const{Math:V}=Cesium,j=V.PI_OVER_TWO+n.viewer.scene.camera.pitch,N=Math.PI/2/20;let H=Math.floor(j/N);H=H>19?19:H,H=H<0?0:H,D.value=$p()[H].x,z.value=$p()[H].y};return{heading:p,handleDoubleClick:W,handleMouseDown:U,handleMouseUp:Z,onTooltipBeforeShow:O,viewerChange:y,load:async(V,j)=>(n.viewer=V,p.value=V.scene.camera.heading,y(),S=new Cesium.ScreenSpaceEventHandler(j),I(),!0),unload:async()=>(document.removeEventListener("mousemove",v,!1),document.removeEventListener("touchmove",v,!1),document.removeEventListener("mouseup",g,!1),document.removeEventListener("touchend",g,!1),d&&d(),l&&l(),S==null||S.destroy(),!0),tiltbarLeft:D,tiltbarTop:z,tooltipRef:L}}function $p(){return[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}]}const Np={enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},autoHidden:{type:Boolean,default:!0},...eo},yF={...Le,compassEvt:e=>!0};var jp=u.defineComponent({name:"VcCompassSm",props:Np,emits:yF,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcCompassSm";const r=rt(e,t,i);if(r===void 0)return;Qt();const a=cn(i),{$services:s}=r,l=vF(e,t,i),d=pi(e),h=u.ref(null),m=u.ref(null),p=((n=a.proxy)==null?void 0:n.$options.name)==="VcNavigationSm",g=u.ref(p),v=u.reactive({});u.watch(()=>e,T=>{u.nextTick(()=>{i.mounted&&S()})},{deep:!0});const b=u.computed(()=>({left:l.tiltbarLeft.value+"px",top:l.tiltbarTop.value+"px",visibility:e.autoHidden?"hidden":"visible"})),P=u.computed(()=>({visibility:e.autoHidden?"hidden":"visible"})),w=u.computed(()=>({transform:"rotate(-"+l.heading.value+"rad)",WebkitTransform:"rotate(-"+l.heading.value+"rad)"}));i.createCesiumObject=async()=>{g.value=!0;const{viewer:T}=s;return new Promise((_,M)=>{u.nextTick(()=>{p||T._element.appendChild(Me(h)),_(Me(h))})})},i.mount=async()=>{var T;S();const{viewer:_}=s;return(T=_.viewerWidgetResized)==null||T.raiseEvent({type:i.cesiumClass,status:"mounted",target:Me(h)}),l.load(s.viewer,Me(h))},i.unmount=async()=>{var T;const{viewer:_}=s,M=_._element;return p||M.contains(Me(h))&&M.removeChild(Me(h)),(T=_.viewerWidgetResized)==null||T.raiseEvent({type:i.cesiumClass,status:"unmounted",target:Me(h)}),l.unload()};const S=()=>{const T=d.style.value;v.left=T.left,v.top=T.top,v.transform=T.transform;const _=d.attach.value,M=Me(m);if(M!==void 0){const A=M==null?void 0:M.getBoundingClientRect();T.width=`${A==null?void 0:A.width}px`,T.height=`${A==null?void 0:A.height}px`,(_.bottom||_.top)&&!_.left&&!_.right&&(T.left="50%",T.transform="translate(-50%, 0)"),(_.left||_.right)&&!_.top&&!_.bottom&&(T.top="50%",T.transform="translate(0, -50%)")}Object.assign(v,T)};return()=>{if(g.value){let T=[];return T=Ai(t.slots.default,T),T.push(u.h("div",{class:"vc-compass-tilt-sm",style:P.value})),T.push(u.h("div",{class:"vc-compass-tiltbar-sm",style:b.value})),T.push(u.h("div",{class:"vc-compass-arrows-sm",style:P.value})),T.push(u.h("div",{ref:m,class:"vc-compass-outer-ring-sm",style:w.value})),T.push(u.h("div",{class:"vc-arrows-e-sm",style:P.value})),T.push(u.h("div",{class:"vc-arrows-n-sm",style:P.value})),T.push(u.h("div",{class:"vc-arrows-s-sm",style:P.value})),T.push(u.h("div",{class:"vc-arrows-w-sm",style:P.value})),u.h("div",{ref:h,class:"vc-compass-sm "+d.classes.value,style:v,onMousedown:l.handleMouseDown,onMouseup:l.handleMouseUp,onTouchend:l.handleMouseUp,onTouchstart:l.handleMouseDown},T)}else return u.createCommentVNode("v-if")}}});function bF(e,{emit:t},n,i){const r=u.ref(65),a=u.ref(null),s=u.ref(null),l=u.ref(null);let d,h,m,p,g,v,b,P,w,S,T,_;const M=L=>{var U,Z,W;const{defined:y,getTimestamp:C,SceneMode:x,ScreenSpaceEventType:B}=Cesium,{viewer:O}=i;(U=Me(a))==null||U.hide(),(Z=Me(s))==null||Z.hide(),(W=Me(l))==null||W.hide(),d.removeInputAction(B.LEFT_UP),y(h)&&O.clock.onTick.removeEventListener(h),m=void 0,h=void 0,C();const I=O.scene.camera;h=()=>{O.scene.mode===x.COLUMBUS_VIEW||O.scene.mode===x.SCENE2D?I.zoomIn():z(1)},m=()=>{d.removeInputAction(B.LEFT_UP),y(h)&&O.clock.onTick.removeEventListener(h),m=void 0,h=void 0},d.setInputAction(m,B.LEFT_UP),p=O.clock.onTick.addEventListener(h)},A=L=>{var U,Z,W;(U=Me(a))==null||U.hide(),(Z=Me(s))==null||Z.hide(),(W=Me(l))==null||W.hide();const{defined:y,getTimestamp:C,SceneMode:x,ScreenSpaceEventType:B}=Cesium,{viewer:O}=i;d.removeInputAction(B.LEFT_UP),y(g)&&O.clock.onTick.removeEventListener(g),v=void 0,g=void 0,C();const I=O.scene.camera;g=()=>{O.scene.mode===x.COLUMBUS_VIEW||O.scene.mode===x.SCENE2D?I.zoomOut():z(-1)},v=()=>{d.removeInputAction(B.LEFT_UP),y(g)&&O.clock.onTick.removeEventListener(g),v=void 0,g=void 0},d.setInputAction(v,B.LEFT_UP),b=O.clock.onTick.addEventListener(g)},D=L=>{var U,Z,W;(U=Me(a))==null||U.hide(),(Z=Me(s))==null||Z.hide(),(W=Me(l))==null||W.hide();const{Cartesian2:y,defined:C,SceneMode:x}=Cesium,{viewer:B}=i;document.removeEventListener("mousemove",P,!1),document.removeEventListener("touchmove",P,!1),document.removeEventListener("mouseup",w,!1),document.removeEventListener("touchend",w,!1),C(S)&&B.clock.onTick.removeEventListener(S),w=void 0,S=void 0;const O=B.scene.camera;S=()=>{const I=r.value-65;I>0?B.scene.mode===x.COLUMBUS_VIEW||B.scene.mode===x.SCENE2D?O.zoomOut():z(-1):I<0&&(B.scene.mode===x.COLUMBUS_VIEW||B.scene.mode===x.SCENE2D?O.zoomIn():z(1))},P=I=>{const V=r.value,j=I.target.parentElement.getBoundingClientRect(),N=_.getBoundingClientRect(),H=new Cesium.Cartesian2;H.x=I.type==="touchmove"?I.changedTouches[0].clientX-N.left:I.clientX-N.left,H.y=I.type==="touchmove"?I.changedTouches[0].clientY-N.top:I.clientY-N.top;let ne=new y(j.width-H.x,j.height-H.y).y-16;ne=ne<0?0:ne,ne=ne>120?120:ne,r.value=120-ne,r.value-V>0?B.scene.mode===x.COLUMBUS_VIEW||B.scene.mode===x.SCENE2D?O.zoomOut():z(-1):B.scene.mode===x.COLUMBUS_VIEW||B.scene.mode===x.SCENE2D?O.zoomIn():z(1)},w=()=>{document.removeEventListener("mousemove",P,!1),document.removeEventListener("touchmove",P,!1),document.removeEventListener("mouseup",w,!1),document.removeEventListener("touchend",w,!1),C(S)&&B.clock.onTick.removeEventListener(S),w=void 0,P=void 0,S=void 0,r.value=65},document.addEventListener("mousemove",P,!1),document.addEventListener("touchmove",P,!1),document.addEventListener("mouseup",w,!1),document.addEventListener("touchend",w,!1),T=B.clock.onTick.addEventListener(S)},z=L=>{const{Cartesian2:U,Cartesian3:Z,defined:W,Ellipsoid:y,Math:C}=Cesium,{viewer:x}=i,B=x.scene,O=B.camera,I=B.canvas,V=new U;V.x=I.clientWidth/2,V.y=I.clientHeight/2;const j=$(V);if(W(j)){const N=Z.distance(O.position,j);let H=.0618*L*.2;H=N>300?H:2*H;const ne=N*H,ie=new Z;Z.subtract(j,O.position,ie);const ee=Z.clone(O.right),Q=Z.dot(ie,ee),G=new Z;Z.multiplyByScalar(ee,Q,G),Z.subtract(ie,G,ie),Z.normalize(ie,ie),O.move(ie,ne);const J=new Z;Z.normalize(j,J);const oe=O.pickEllipsoid(V,x.scene.globe.ellipsoid);if(lr(oe)&&W(oe)&&!isNaN(oe.x)&&!isNaN(oe.y)&&!isNaN(oe.z)&&!(O.positionCartographic.height<0)){Z.normalize(oe,oe);const Y=Z.angleBetween(J,oe);if(!C.equalsEpsilon(Y,0,C.EPSILON10)){const X=Z.cross(J,oe,new Z);O.rotate(X,Y),ze(n,"zoomEvt")&&t("zoomEvt",{type:L===1?"zoomIn":"zoomOut",camera:x.camera,status:"end"})}}}},$=L=>{const{defined:U,Cartesian3:Z}=Cesium,{viewer:W}=i,y=W.scene,C=y.globe,x=y.camera;if(U(C)){let B;y.pickPositionSupported&&(B=y.pickPositionWorldCoordinates(L));const O=x.getPickRay(L),I=C.pick(O,y),V=U(B)?Z.distance(B,x.positionWC):Number.POSITIVE_INFINITY;return(lr(I)&&U(I)?Z.distance(I,x.positionWC):Number.POSITIVE_INFINITY)>V?B:I}};return{handleZoomInMouseDown:M,handleZoomOutMouseDown:A,handleZoomBarScrollMouseDown:D,load:L=>(_=L,d=new Cesium.ScreenSpaceEventHandler(L),!0),unload:()=>(document.removeEventListener("mousemove",P,!1),document.removeEventListener("touchmove",P,!1),document.removeEventListener("mouseup",w,!1),document.removeEventListener("touchend",w,!1),p==null||p(),b==null||b(),T==null||T(),d==null||d.destroy(),!0),zoombarTop:r,zoomInTooltipRef:a,zoomOutTooltipRef:s,zoomBarTooltipRef:l,onTooltipBeforeShow:L=>{(P!==void 0||h!==void 0||g!==void 0)&&(L.cancel=!0)}}}const kp={...eo,autoHidden:{type:Boolean,default:!1},tooltip:{type:Object,default:()=>({delay:1e3,anchor:"bottom middle",offset:[0,20],zoomInTip:void 0,zoomOutTip:void 0,zoomBarTip:void 0})}},CF={...Le,zoomEvt:e=>!0};var zp=u.defineComponent({name:"VcZoomControlSm",props:kp,emits:CF,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcZoomControlSm",i.cesiumEvents=[];const r=u.ref(),a=u.ref(),s=u.ref(),l=u.ref(),d=((n=cn(i).proxy)==null?void 0:n.$options.name)==="VcNavigationSm",h=u.ref(d),m=u.reactive({}),p=rt(e,t,i);if(p===void 0)return;const{t:g}=Qt(),{$services:v}=p,b=pi(e),P=bF(e,t,i,v);u.watch(()=>e,T=>{u.nextTick(()=>{i.mounted&&S()})},{deep:!0});const w=u.computed(()=>({top:P.zoombarTop.value+"px"}));i.createCesiumObject=async()=>new Promise((T,_)=>{h.value=!0,u.nextTick(()=>{const M=Me(r),{viewer:A}=v;if(d)T(M);else{const D=A._element;lr(M)&&(D==null||D.appendChild(M)),T(M)}})}),i.mount=async()=>{var T;S();const{viewer:_}=v;return(T=_.viewerWidgetResized)==null||T.raiseEvent({type:i.cesiumClass,status:"mounted",target:Me(r)}),P.load(Me(r))},i.unmount=async()=>{var T;const{viewer:_}=v;if(!d){const M=_._element,A=Me(r);lr(A)&&M!=null&&M.contains(A)&&M.removeChild(A)}return(T=_.viewerWidgetResized)==null||T.raiseEvent({type:i.cesiumClass,status:"unmounted",target:Me(r)}),P.unload()};const S=()=>{const T=b.style.value;if(m.left=T.left,m.top=T.top,m.transform=T.transform,m.visibility=e.autoHidden?"hidden":"visible",!d){const _=b.attach.value;(_.bottom||_.top)&&!_.left&&!_.right&&(T.left="50%",T.transform="translate(-50%, 0)"),(_.left||_.right)&&!_.top&&!_.bottom&&(T.top="50%",T.transform="translate(0, -50%)")}Object.assign(m,T)};return()=>{if(h.value){let T=[];return T=Ai(t.slots.default,T),T.push(u.h("div",{ref:a,class:"vc-zoomin-sm",onMousedown:P.handleZoomInMouseDown,onTouchstart:P.handleZoomInMouseDown},e.tooltip?u.h(mn,{ref:P.zoomInTooltipRef,...e.tooltip,onBeforeShow:P.onTooltipBeforeShow},()=>u.h("strong",{},e.tooltip.zoomInTip||g("vc.navigationSm.zoomCotrol.zoomInTip"))):u.createCommentVNode("v-if"))),T.push(u.h("div",{ref:l,class:"vc-zoomout-sm",onMousedown:P.handleZoomOutMouseDown,onTouchstart:P.handleZoomOutMouseDown},e.tooltip?u.h(mn,{ref:P.zoomInTooltipRef,...e.tooltip,onBeforeShow:P.onTooltipBeforeShow},()=>u.h("strong",{},e.tooltip.zoomOutTip||g("vc.navigationSm.zoomCotrol.zoomOutTip"))):u.createCommentVNode("v-if"))),T.push(u.h("div",{ref:s,class:"vc-zoombar-sm",style:w.value,onMousedown:P.handleZoomBarScrollMouseDown,onTouchstart:P.handleZoomBarScrollMouseDown},e.tooltip?u.h(mn,{ref:P.zoomInTooltipRef,...e.tooltip,onBeforeShow:P.onTooltipBeforeShow},()=>u.h("strong",{},e.tooltip.zoomBarTip||g("vc.navigationSm.zoomCotrol.zoomBarTip"))):u.createCommentVNode("v-if"))),u.h("div",{ref:r,class:"vc-zoom-control-sm "+b.classes.value,style:m},T)}else return u.createCommentVNode("v-if")}}});const _2={enableCompassOuterRing:!0,duration:1.5,autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}},P2={autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}},Gp={...eo,compassOpts:{type:[Boolean,Object],default:()=>_2},zoomOpts:{type:[Boolean,Object],default:()=>P2}},wF={...Le,zoomEvt:e=>!0,compassEvt:e=>!0};var E2=u.defineComponent({name:"VcNavigationSm",inheritAttrs:!1,props:Gp,emits:wF,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcNavigationSm";const i=rt(e,t,n);if(i===void 0)return;const r=u.ref(!1),{$services:a}=i,s=pi(e),l=u.ref(null),d=u.ref(null),h=u.ref(null),m=u.reactive({}),{emit:p}=t;u.watch(()=>e,()=>{u.nextTick(()=>{var T,_;S(),(T=Me(d))==null||T.reload(),(_=Me(h))==null||_.reload()})},{deep:!0});const g=u.computed(()=>Object.assign({},_2,e.compassOpts)),v=u.computed(()=>Object.assign({},P2,e.zoomOpts)),b=T=>{ze(n,"compassEvt")&&p("compassEvt",T)},P=T=>{ze(n,"zoomEvt")&&p("zoomEvt",T)};n.createCesiumObject=async()=>{var T;r.value=!0;const{viewer:_}=a;return(T=_.viewerWidgetResized)==null||T.addEventListener(w),new Promise((M,A)=>{u.nextTick(()=>{_._element.appendChild(Me(l)),M(Me(l))})})},n.mount=async()=>{var T;S();const{viewer:_}=a;return(T=_.viewerWidgetResized)==null||T.raiseEvent({type:n.cesiumClass,status:"mounted",target:Me(l)}),!0},n.unmount=async()=>{var T,_;const{viewer:M}=a,A=M._element;return A.contains(Me(l))&&A.removeChild(Me(l)),(T=M.viewerWidgetResized)==null||T.removeEventListener(w),(_=M.viewerWidgetResized)==null||_.raiseEvent({type:n.cesiumClass,status:"unmounted",target:Me(l)}),!0};const w=()=>{u.nextTick(()=>{S()})},S=()=>{const T=s.style.value,_=s.attach.value;m.left=T.left,m.top=T.top,m.transform=T.transform,(_.bottom||_.top)&&!_.left&&!_.right&&(T.left="50%",T.transform="translate(-50%, 0)"),(_.left||_.right)&&!_.top&&!_.bottom&&(T.top="50%",T.transform="translate(0, -50%)"),Object.assign(m,T)};return()=>{if(r.value){let T=[];return T=Ai(t.slots.default,T),g.value&&e.compassOpts!==!1&&T.push(u.h(jp,{ref:d,onCompassEvt:b,...g.value})),v.value&&e.zoomOpts!==!1&&T.push(u.h(zp,{ref:h,onZoomEvt:P,...v.value})),u.h("div",{ref:l,class:"vc-navigation-sm "+s.classes.value,style:m},T)}else return u.createCommentVNode("v-if")}}});const Up={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},width:{type:String,default:"150px"},height:{type:String,default:"150px"},border:{type:String,default:"solid 4px rgb(255, 255, 255)"},borderRadius:{type:String},toggleOpts:{type:Object},viewerOpts:{type:Object},centerRectColor:{type:[Object,Array,String],default:"#ff000080"},widthFactor:{type:Number,default:2},heightFactor:{type:Number,default:2},modelValue:{type:Boolean,default:!0}};var x2=u.defineComponent({name:"VcOverviewMap",props:Up,emits:{...Le,"update:modelValue":e=>!0},setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcOverviewMap",n.cesiumEvents=[];const i=rt(e,t,n);if(i===void 0)return;const{t:r}=Qt(),{$services:a}=i,s=u.ref(null),l=u.ref(null),d=u.reactive({}),h=u.ref(null),m=u.ref(null),p=pi(e),g=u.ref(e.modelValue);let v=[],b,P;const w=u.computed(()=>Object.assign({},{color:"#fff",background:"#3f4854",icon:"vc-icons-overview-toggle",size:"15px",tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},e.toggleOpts)),S=u.computed(()=>Object.assign({},{removeCesiumScript:!1,showCredit:!1,sceneMode:2,containerId:"vc-overview-map"},e.viewerOpts));n.createCesiumObject=async()=>{const{viewer:$}=a;return $._element.appendChild(Me(s)),[Me(s),Me(m)]},n.mount=async()=>{M();const{viewer:$}=a;return $.clock.onTick.addEventListener(T),!0},n.unmount=async()=>{const{viewer:$}=a,L=$._element;return $.clock.onTick.removeEventListener(T),L.contains(Me(s))&&L.removeChild(Me(s)),!0};const T=()=>{if(b){const{viewer:$}=a,L=$.camera.computeViewRectangle(),{defined:U}=Cesium;if(!U(L))return;const Z=L.expand(e.widthFactor,e.heightFactor);b.camera.flyTo({destination:Z.clone(),orientation:{heading:$.camera.heading,pitch:$.camera.pitch,roll:$.camera.roll},duration:0});const{Cartesian3:W,SceneTransforms:y}=Cesium,C=W.fromRadians(L.west,L.north),x=W.fromRadians(L.east,L.north),B=W.fromRadians(L.west,L.south),O=W.fromRadians(L.east,L.south),I=b.scene;qt(Cesium.VERSION,"1.121")?y.worldToWindowCoordinates(I,C):y.wgs84ToWindowCoordinates(I,C);const V=qt(Cesium.VERSION,"1.121")?y.worldToWindowCoordinates(I,C):y.wgs84ToWindowCoordinates(I,C),j=qt(Cesium.VERSION,"1.121")?y.worldToWindowCoordinates(I,x):y.wgs84ToWindowCoordinates(I,x),N=qt(Cesium.VERSION,"1.121")?y.worldToWindowCoordinates(I,B):y.wgs84ToWindowCoordinates(I,B),H=qt(Cesium.VERSION,"1.121")?y.worldToWindowCoordinates(I,O):y.wgs84ToWindowCoordinates(I,O);if(!U(V)||!U(j)||!U(N)||!U(H))return;const ne=j.x-V.x,ie=N.y-V.y,ee=(V.x+j.x)/2-ne/2,Q=(V.y+N.y)/2-ie/2;if(ne<=0||ie<=0)return;const G=new Cesium.BoundingRectangle(ee,Q,ne,ie);P.rectangle=G,P.material.uniforms.color=Ue(e.centerRectColor),P.show=!0}},_=$=>{const{viewer:L}=$;b=L;const U=L.scene.screenSpaceCameraController;U.enableRotate=!1,U.enableTranslate=!1,U.enableZoom=!1,U.enableTilt=!1,U.enableLook=!1,b.scene.highDynamicRange=!1,b.scene.globe.enableLighting=!1,b.scene.globe.showWaterEffect=!1,b.scene.globe.depthTestAgainstTerrain=!1,b.scene.skyAtmosphere.show=!1,b.scene.fog.enabled=!1,b.scene.skyBox.show=!1,b.scene.sun.show=!1,b.scene.moon.show=!1,b.scene.highDynamicRange=!1,b.scene.globe.showGroundAtmosphere=!1,P=new Cesium.ViewportQuad(new Cesium.BoundingRectangle(150,100,100,50)),P.show=!1,b.scene.primitives.add(P)},M=()=>{var $;const L=p.style.value;if(d.left=L.left,d.top=L.top,d.transform=L.transform,d["pointer-events"]="none",L.borderRadius=e.borderRadius,L.border=e.border,g.value)L.width=e.width,L.height=e.height;else{const U=/(\d+)/g.exec(e.border),Z=U!=null&&U.length?parseFloat(U[0]):0,W=getComputedStyle(($=Me(l))==null?void 0:$.$el);L.width=`${parseFloat(W.width)+parseFloat(W.padding)+Z}px`,L.height=`${parseFloat(W.height)+parseFloat(W.padding)+Z}px`}Object.assign(d,L)},A=()=>{g.value?D():z(),g.value=!g.value,t.emit("update:modelValue",g.value)},D=()=>{var $;const L=/(\d+)/g.exec(e.border),U=L!=null&&L.length?parseFloat(L[0]):0,Z=getComputedStyle(($=Me(l))==null?void 0:$.$el);d.width=`${parseFloat(Z.width)+parseFloat(Z.padding)+U}px`,d.height=`${parseFloat(Z.height)+parseFloat(Z.padding)+U}px`},z=()=>{d.width=e.width,d.height=e.height};return u.onUnmounted(()=>{v.forEach($=>$()),v=[]}),()=>{const $=[];return $.push(u.h(zn,{ref:l,class:"toggle toggle-"+e.position+(g.value?"":" minimized "),flat:!0,dense:!0,icon:w.value.icon,size:w.value.size,style:{color:w.value.color,background:w.value.background,"pointer-events":"auto"},onClick:A},()=>w.value.tooltip?u.h(mn,{ref:h,...w.value.tooltip},()=>u.h("strong",{},w.value.tooltip.tip||r(`vc.overview.${g.value?"hidden":"show"}`))):u.createCommentVNode("v-if"))),$.push(u.h(w_,{ref:m,...S.value,onReady:_},()=>xt(t.slots.default))),u.h("div",{ref:s,class:"vc-overview-map "+p.classes.value,style:d},$)}}});class br{constructor(t){this.id=t.id||Cesium.createGuid()}static getBoundingSphere(t,n){var i,r,a,s;const{Primitive:l,ClassificationPrimitive:d,GroundPolylinePrimitive:h,GroundPrimitive:m,Polyline:p}=Cesium;let g;return t instanceof d||t instanceof h?g=(r=(i=t._primitive)==null?void 0:i._boundingSphereWC)==null?void 0:r[0]:t instanceof l?g=(a=t._boundingSphereWC)==null?void 0:a[0]:t instanceof m?g=(s=t._boundingVolumes)==null?void 0:s[0]:t instanceof p?g=t._boundingVolumeWC:t instanceof Cesium.Entity&&(g=new Cesium.BoundingSphere,n.dataSourceDisplay.getBoundingSphere(t,!0,g)),g}static fromPickedFeature(t,n,i,r){var a,s,l,d,h;const m=new br({id:t.id});if(t.position)m.position=t.position;else if(t instanceof Cesium.Model)m.position=Cesium.Matrix4.getTranslation(t.modelMatrix,new Cesium.Cartesian3);else if(t instanceof Cesium.Cesium3DTileset){let p=n.content.tile.boundingSphere.center,g=(a=n==null?void 0:n.getProperty)==null?void 0:a.call(n,"position");Cesium.defined(g)&&(typeof g=="string"&&(g=JSON.parse(g)),p=yt(g)),m.position=p}else m.position=(s=br.getBoundingSphere(t,i))==null?void 0:s.center;return m.cesiumObject=t,m.pickedFeature=n,m.windowPosition=r,m.description=(t==null?void 0:t.description)||((l=t==null?void 0:t.description)==null?void 0:l.getValue()),m.properties=(t==null?void 0:t.properties)||((d=t==null?void 0:t.properties)==null?void 0:d.getValue())||((h=t==null?void 0:t.feature)==null?void 0:h.properties),m}static fromImageryLayerFeature(t,n){const i=new br({id:t.name});return i.name=t.name,i.description=t.description,i.properties=t.properties,i.data=t.data,i.imageryLayer=t.imageryLayer,i.position=n.scene.globe.ellipsoid.cartographicToCartesian(t.position),i.coords=t.coords,i}}class _F{constructor(){const{knockout:t}=Cesium;this.allFeaturesAvailablePromise=void 0,this.isLoading=!0,this.pickPosition=void 0,this.features=[],this.error=void 0,this.providerCoords=void 0,t.track(this,["isLoading","features","error"])}}function PF(e,t,n,i){const{defined:r,Rectangle:a,Math:s}=Cesium,l=e.globe._surface._tilesToRender;let d;for(let m=0;!r(d)&&m<l.length;++m){const p=l[m];a.contains(p.rectangle,t)&&(d=p)}if(!r(d))return;const h=d.data.imagery;for(let m=h.length-1;m>=0;--m){const p=h[m],g=p.readyImagery;if(!r(g))continue;const v=g.imageryLayer.imageryProvider;if(n&&!r(v.pickFeatures)||!a.contains(g.rectangle,t))continue;const b=new a,P=1/1024;b.west=s.lerp(d.rectangle.west,d.rectangle.east,p.textureCoordinateRectangle.x-P),b.east=s.lerp(d.rectangle.west,d.rectangle.east,p.textureCoordinateRectangle.z+P),b.south=s.lerp(d.rectangle.south,d.rectangle.north,p.textureCoordinateRectangle.y-P),b.north=s.lerp(d.rectangle.south,d.rectangle.north,p.textureCoordinateRectangle.w+P),a.contains(b,t)&&i(g)}}function EF(e,t,n=[],i=[]){const{defined:r}=Cesium,a=t.globe.pick(e,t);if(!r(a))return;const s=t.globe.ellipsoid.cartesianToCartographic(a),l=[],d=[];if(PF(t,s,!0,function(h){if(i.indexOf(h.imageryLayer.vcId)!==-1||n.length&&n.indexOf(h.imageryLayer.vcId)===-1)return;const m=h.imageryLayer.imageryProvider.pickFeatures(h.x,h.y,h.level,s.longitude,s.latitude);r(m)&&(l.push(m),d.push(h.imageryLayer))}),l.length!==0)return Promise.all(l).then(function(h){const m=[];for(let p=0;p<h.length;++p){const g=h[p],v=d[p];if(r(g)&&g.length>0)for(let b=0;b<g.length;++b){const P=g[b];P.imageryLayer=v,r(P.position)||(P.position=s),m.push(P)}}return m})}function xF(e,t,n){const i="-1000px",r=u.ref(i),a=u.ref(i),s="",l=1,d=u.ref(),h=u.ref();let m,p;const g=u.ref(null),v=u.ref(null);let b=[],P=!1;const w=u.reactive({top:a.value,left:r.value,transform:s,opacity:l});b.push(u.watch(v,Z=>{var W,y,C;const x=Z,{defined:B}=Cesium;if(B(x)&&B(x==null?void 0:x.position)){const{viewer:O}=n;d.value=(x==null?void 0:x.position)instanceof Cesium.Cartesian3?x==null?void 0:x.position:(W=x==null?void 0:x.position)==null?void 0:W.getValue(O.clock.currentTime),$(),(y=e.proxy)==null||y.$emit("pickEvt",x)}else L(),(C=e.proxy)==null||C.$emit("pickEvt",x);z()})),b.push(u.watch(g,Z=>{const{defined:W,Entity:y}=Cesium,C=Z;if(!W(C))v.value=void 0;else{const x=new y({id:"__Vc__Pick__Location__"});x.position=C.pickPosition,v.value=x}u.nextTick(()=>{W(C.allFeaturesAvailablePromise)&&C.allFeaturesAvailablePromise.then(()=>{var x,B,O;const I=C.features.filter(V=>W(V));v.value=I.filter(S)[0],!W(v.value)&&I.length>0&&(v.value=I[0],P&&v.value instanceof br&&(O=(B=(x=v.value)==null?void 0:x.pickedFeature)==null?void 0:B.primitive)!=null&&O.position&&(v.value.position=v.value.pickedFeature.primitive.position))})})}));const S=Z=>{const{defined:W}=Cesium;return W(Z.properties)||W(Z.description)},T=Z=>{const{defined:W}=Cesium,{viewer:y}=n,C=y.scene,x=C.camera.getPickRay(Z);let B=C.globe.pick(x,C);if(!W(B)&&(B=C.pickPosition(Z),!W(B)))return;const O=C.globe.ellipsoid.cartesianToCartographic(B||new Cesium.Cartesian3),I=M(Z),V=A(),j=t.allowFeatureInfoRequests?EF(x,C,t.includeImageryIds,t.excludeImageryIds):Promise.resolve(),N=_(V,B,I,[j],void 0,O.height,!1,y);g.value=N},_=(Z,W,y,C,x,B,O,I)=>{const{defined:V,defaultValue:j}=Cesium;O=j(O,!1);const N=new _F;return N.providerCoords=Z,N.pickPosition=W,N.allFeaturesAvailablePromise=Promise.all(C).then(function(H){N.isLoading=!1,N.features=H.reduce(function(ne,ie,ee){if(!V(ie))return ne;const Q=ie.map(function(G){return V(x)&&(G.imageryLayer=x[ee]),V(G.position)||(G.position=I.scene.globe.ellipsoid.cartesianToCartographic(W)),(!V(G.position.height)||G.position.height===0)&&(G.position.height=B),br.fromImageryLayerFeature(G,I)}.bind(this));return ne.concat(Q)}.bind(this),j(y,[]))}).catch(function(){N.isLoading=!1,N.error="An unknown error occurred while picking features."}),N},M=Z=>{var W,y;const C=[],{defined:x}=Cesium,{viewer:B}=n,O=B.scene.drillPick(Z,t.limit);for(let I=0;I<O.length;++I){const V=O[I];let j=V.id;!x(j)&&x(V.primitive)&&(j=V.primitive);const N=(y=(W=V==null?void 0:V.primitive)==null?void 0:W._catalogItem)!=null?y:j==null?void 0:j._catalogItem;if(typeof(N==null?void 0:N.getFeaturesFromPickResult)=="function"){const H=N.getFeaturesFromPickResult.bind(N)(Z,V);H&&(Array.isArray(H)?C.push(...H):C.push(H))}else{const H=V;if(H.id)if(St(H.id)&&H.id[0]instanceof Cesium.Entity){P=!0,H.id.forEach(ne=>{const ie=br.fromPickedFeature(ne,H,B,Z);C.push(ie)});continue}else if(H.id instanceof Cesium.Entity){const ne=br.fromPickedFeature(H.id,H,B,Z);C.push(ne),P=!1;continue}else P=!1;if(H.primitive){const ne=br.fromPickedFeature(H.primitive,H,B,Z);C.push(ne)}else if(H.collection){const ne=br.fromPickedFeature(H.collection,H,B,Z);C.push(ne)}}}return C},A=()=>{const Z={},{viewer:W}=n,y=W.scene,C=function(x,B,O,I,V,j,N){if(B){const H=B.call(x,O,I,V,j,N);return x.url&&(Z[x.url]={x:O,y:I,level:V}),x.pickFeatures=B,H}return Promise.reject(!1)};for(let x=0;x<y.imageryLayers.length;x++){const B=y.imageryLayers.get(x).imageryProvider;B.pickFeatures=C.bind(void 0,B,B.pickFeatures)}return Z},D=(Z,W)=>{const{viewer:y}=n;return qt(Cesium.VERSION,"1.121")?Cesium.SceneTransforms.worldToWindowCoordinates(y.scene,Z,W):Cesium.SceneTransforms.wgs84ToWindowCoordinates(y.scene,Z,W)},z=()=>{const{defined:Z,Cartesian2:W}=Cesium;if(t.show&&Z(d.value)){const y=D(d.value,new W);if(Z(y)){const{viewer:C}=n,x=C.container,B=x.clientWidth,O=x.clientHeight,I=t.width,V=I*.5;y.x=Math.min(Math.max(y.x,-I),B+I)-V,y.y=Math.min(Math.max(y.y,-I),O+I)-V,w.left=Math.floor(y.x+.25)+"px",w.top=Math.floor(y.y+.25)+"px"}}},$=()=>{const{viewer:Z}=n,{defined:W,EasingFunction:y}=Cesium;if(W(m)){if(p)return;m.cancelTween(),m=void 0}p=!0,m=Z.scene.tweens.add({startObject:{scale:2,opacity:0,rotate:-180},stopObject:{scale:1,opacity:1,rotate:0},duration:.8,easingFunction:y.EXPONENTIAL_OUT,update:function(C){w.opacity=C.opacity,w.transform="scale("+C.scale+") rotate("+C.rotate+"deg)"},complete:function(){m=void 0},cancel:function(){m=void 0}})},L=()=>{const{viewer:Z}=n,{defined:W,EasingFunction:y}=Cesium;if(W(m)){if(!p)return;m.cancelTween(),m=void 0}p=!1,m=Z.scene.tweens.add({startObject:{scale:1,opacity:1},stopObject:{scale:1.5,opacity:0},duration:.8,easingFunction:y.EXPONENTIAL_OUT,update:function(C){w.opacity=C.opacity,w.transform="scale("+C.scale+") rotate(0deg)"},complete:function(){m=void 0},cancel:function(){m=void 0}})},U=()=>{z()};return u.onUnmounted(()=>{b.forEach(Z=>Z()),b=[]}),Object.assign(e.proxy,{selectedFeature:v,position:d,computeScreenSpacePosition:D,update:z,animateAppear:$,animateDepart:L,getPickedFeatures:()=>g}),{pickFromScreenPosition:T,rootRef:h,rootStyle:w,onPostRender:U}}const Hp={show:{type:Boolean,default:!0},width:{type:Number,default:50},height:{type:Number,default:50},allowFeatureInfoRequests:{type:Boolean,default:!0},includeImageryIds:{type:Array,default:()=>[]},excludeImageryIds:{type:Array,default:()=>[]},limit:{type:Number,default:25}},OF={...Le,pickEvt:e=>!0};var O2=u.defineComponent({name:"VcSelectionIndicator",props:Hp,emits:OF,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcSelectionIndicator",n.cesiumEvents=[];const i=rt(e,t,n);if(i===void 0)return;const{$services:r}=i;let a;const s=xF(n,e,r);return n.createCesiumObject=async()=>{const{viewer:l}=r;return l._element.appendChild(Me(s.rootRef)),Me(s.rootRef)},n.mount=async()=>{const{viewer:l}=r,{ScreenSpaceEventHandler:d,ScreenSpaceEventType:h}=Cesium;return a=new d(l.canvas),a.setInputAction(m=>{s.pickFromScreenPosition(m.position)},h.LEFT_CLICK),l.scene.postRender.addEventListener(s.onPostRender),!0},n.unmount=async()=>{const{viewer:l}=r,d=l._element;return d.contains(Me(s.rootRef))&&d.removeChild(Me(s.rootRef)),l.scene.postRender.removeEventListener(s.onPostRender),a.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),a.destroy(),a=void 0,!0},()=>u.h("div",{ref:s.rootRef,class:"vc-selection-indicator",style:s.rootStyle},u.h("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxNzZweCIgaGVpZ2h0PSIxNzZweCIgdmlld0JveD0iMCAwIDE3NiAxNzYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6c2tldGNoPSJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnMiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4xLjEgKDg3NjEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5Mb2NhdGlvblRhcmdldCArIFBhdGg8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPg0KICAgICAgICA8ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4NCiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+DQogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+DQogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC41MjY0NDY0NDUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHR5cGU9Im1hdHJpeCIgcmVzdWx0PSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4NCiAgICAgICAgICAgIDxmZU1lcmdlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyI+PC9mZU1lcmdlTm9kZT4NCiAgICAgICAgICAgIDwvZmVNZXJnZT4NCiAgICAgICAgPC9maWx0ZXI+DQogICAgICAgIDxmaWx0ZXIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPg0KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4NCiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4NCiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjUyNjQ0NjQ0NSAwIiBpbj0ic2hhZG93Qmx1ck91dGVyMSIgdHlwZT0ibWF0cml4IiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4Pg0KICAgICAgICAgICAgPGZlTWVyZ2U+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVNZXJnZU5vZGU+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgPC9mZU1lcmdlPg0KICAgICAgICA8L2ZpbHRlcj4NCiAgICA8L2RlZnM+DQogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBcnRib2FyZC0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjkxLjAwMDAwMCwgLTQ5OC4wMDAwMDApIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZT0iI0ZGRkZGRiI+DQogICAgICAgICAgICA8ZyBpZD0iTG9jYXRpb25UYXJnZXQtKy1QYXRoIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OTkuMDAwMDAwLCA1MDYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTgwLDE0NCBDMTE1LjM0NjIyNCwxNDQgMTQ0LDExNS4zNDYyMjQgMTQ0LDgwIEMxNDQsNDQuNjUzNzc2IDExNS4zNDYyMjQsMTYgODAsMTYgQzQ0LjY1Mzc3NiwxNiAxNiw0NC42NTM3NzYgMTYsODAgQzE2LDExNS4zNDYyMjQgNDQuNjUzNzc2LDE0NCA4MCwxNDQgWiBNMTYwLDgwIEwxNDQsODAgTTE2LDgwIEwwLDgwIE03OS42LC0wLjQgTDc5LjYsMTUuNiBNNzguOCwxNDQgTDc4LjgsMTYwIiBpZD0iTG9jYXRpb25UYXJnZXQiIHN0cm9rZS13aWR0aD0iNyIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xKSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IlBhdGgiIHN0cm9rZS13aWR0aD0iMiIgb3BhY2l0eT0iMC4yNTIyMTU0ODUiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIGN4PSI4MCIgY3k9IjgwIiByPSI2Ij48L2NpcmNsZT4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg==",width:e.width,height:e.height}))}});[dp,fp,vp,bp,Lp,Rp,w2,jp,zp,E2,x2,O2].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const Wp=dp,qp=fp,Zp=vp,Qp=bp,Jp=Lp,Xp=Rp,Yp=w2,Kp=jp,ef=zp,tf=E2,nf=x2,rf=O2,Kt={externalLabel:!1,label:"",labelPosition:"right",hideLabel:!1,tabindex:void 0,disable:!1,outline:!1,push:!1,flat:!1,unelevated:!1,color:"primary",textColor:void 0,glossy:!1,labelClass:void 0,labelStyle:void 0,square:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},jo={show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,0,0,127]}}}}}},ro={show:!0,color:"rgb(255,229,0)",pixelSize:8,outlineColor:"black",outlineWidth:1,disableDepthTestDistance:Number.POSITIVE_INFINITY},MF={show:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,verticalOrigin:1,image:""},Aa={width:2,arcType:0,ellipsoid:void 0},SF={show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:[255,165,0,125]}}},faceForward:!0,renderState:{cull:{enabled:!1},depthTest:{enabled:!1}}}}},en={show:!0,font:"16px Arial Microsoft YaHei sans-serif",scale:1,fillColor:"white",showBackground:!0,backgroundColor:{x:.165,y:.165,z:.165,w:.8},backgroundPadding:[7,5],horizontalOrigin:0,verticalOrigin:1,pixelOffset:[0,-9],disableDepthTestDistance:Number.POSITIVE_INFINITY},ln={icon:"vc-icons-move",size:"24px",color:"#1296db",background:"#fff",round:!0,flat:!1,label:void 0,stack:!1,dense:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20]}},ru={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:ro,editorOpts:{delay:1e3,hideDelay:1e3,pixelOffset:[16,-8],move:Object.assign({},ln),remove:Object.assign({},ln,{icon:"vc-icons-remove"})},heightReference:1,disableDepthTest:!1,showLabel:!1,labelOpts:Object.assign({},en,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]})},of={show:!0,showComponentLines:!1,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:ro,polylineOpts:Aa,primitiveOpts:jo,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ln),removeAll:Object.assign({},ln,{icon:"vc-icons-delete"})},disableDepthTest:!1},M2={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:ro,polylineOpts:Aa,primitiveOpts:jo,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ln),insert:Object.assign({},ln,{icon:"vc-icons-insert"}),remove:Object.assign({},ln,{icon:"vc-icons-remove"}),removeAll:Object.assign({},ln,{icon:"vc-icons-delete"})},loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:en,labelsOpts:Object.assign({},en,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},ou={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:ro,polylineOpts:Aa,primitiveOpts:Object.assign({},jo,{depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}}}),polygonOpts:SF,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ln),insert:Object.assign({},ln,{icon:"vc-icons-insert"}),remove:Object.assign({},ln,{icon:"vc-icons-remove"}),removeAll:Object.assign({},ln,{icon:"vc-icons-delete"})},loop:!0,disableDepthTest:!1,showDistanceLabel:!1,showLabel:!1,showAngleLabel:!1,labelOpts:en,labelsOpts:Object.assign({},en,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},af=Object.assign({},ou,{pointOpts:Object.assign({},ro,{show:!1}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ln),removeAll:Object.assign({},ln,{icon:"vc-icons-delete"})},edge:4,loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:en,labelsOpts:Object.assign({},en,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})}),TF=Object.assign({},af,{edge:360}),IF=Object.assign({},af,{edge:6,loop:!0}),AF=Object.assign({},Kt,{icon:"vc-icons-clear",color:"red"}),S2=Object.assign({},Kt,{icon:"vc-icons-drawing-regular"}),T2=Object.assign({},Kt,{icon:"vc-icons-drawing-circle"}),Tn={..._t,show:Boolean,editable:Boolean,drawtip:Object,pointOpts:Object,editorOpts:Object,mode:Number,preRenderDatas:Array,disableDepthTest:Boolean,distanceFormatter:Function,angleFormatter:Function,areaFormatter:Function},sf={...qe,position:{type:String,default:"bottom-left",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},mode:{type:Number,default:1},activeColor:{type:String,default:"positive"},editable:{type:Boolean},clampToGround:{type:Boolean},clearActionOpts:{type:Object,default:()=>AF}},DF=Object.assign({},Kt,{icon:"vc-icons-measure-distance"}),I2=Object.assign({},of,{labelOpts:Object.assign({},en,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new Bn,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),LF=Object.assign({},Kt,{icon:"vc-icons-measure-component-distance"}),BF=Object.assign({},I2,{showComponentLines:!0,xLabelOpts:en,xAngleLabelOpts:Object.assign({},en,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[9,0]}),yLabelOpts:Object.assign({},en,{horizontalOrigin:-1,pixelOffset:[-9,0]}),yAngleLabelOpts:Object.assign({},en,{verticalOrigin:-1,pixelOffset:[0,9]})}),RF=Object.assign({},Kt,{icon:"vc-icons-measure-polyline-distance"}),A2=Object.assign({},M2,{measureUnits:new Bn,labelOpts:en,labelsOpts:Object.assign({},en,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),decimals:{distance:2,angle:2},showLabel:!0,showAngleLabel:!0,showDistanceLabel:!0,locale:void 0,loop:!1,autoUpdateLabelPosition:!0}),VF=Object.assign({},Kt,{icon:"vc-icons-measure-horizontal-distance"}),FF=Object.assign({},A2,{dashLineOpts:{width:2},dashLinePrimitiveOpts:Object.assign({},jo,{appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}}}),labelOpts:Object.assign({},en,{horizontalOrigin:1,verticalOrigin:1,pixelOffset:[10,-10]}),labelsOpts:Object.assign({},en,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDashedLine:!0}),$F=Object.assign({},Kt,{icon:"vc-icons-measure-vertical-distance"}),NF=Object.assign({},of,{labelOpts:Object.assign({},en,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new Bn,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),jF=Object.assign({},Kt,{icon:"vc-icons-measure-height-from-terrain"}),kF=Object.assign({},ru,{polylineOpts:Aa,labelOpts:Object.assign({},en,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ln),removeAll:Object.assign({},ln,{icon:"vc-icons-delete"})},measureUnits:new Bn,decimals:{distance:2},locale:void 0,primitiveOpts:jo}),zF=Object.assign({},Kt,{icon:"vc-icons-measure-area"}),D2=Object.assign({},ou,{labelOpts:en,labelsOpts:Object.assign({},en,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDistanceLabel:!0,showAngleLabel:!0,showLabel:!0,measureUnits:new Bn,decimals:{area:2,distance:2,angle:2},loop:!0,locale:void 0,autoUpdateLabelPosition:!0}),GF=Object.assign({},Kt,{icon:"vc-icons-measure-point-coordinates"}),UF=Object.assign({},ru,{heightReference:1,measureUnits:new Bn,drawtip:{show:!0,pixelOffset:[32,48]},labelOpts:Object.assign({},en,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]}),decimals:{lng:6,lat:6,height:2,slope:3},locale:void 0,showLabel:!0}),HF=Object.assign({},Kt,{icon:"vc-icons-drawing-rectangle"}),lf=Object.assign({},D2,{pointOpts:Object.assign({},ro,{show:!1}),drawtip:{show:!0,pixelOffset:[32,32]},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ln),removeAll:Object.assign({},ln,{icon:"vc-icons-delete"})},edge:4,loop:!1,showAngleLabel:!1}),WF=Object.assign({},lf,{edge:6,loop:!0}),qF=Object.assign({},lf,{edge:360,loop:!0,showDistanceLabel:!1,showAngleLabel:!1}),ZF=Object.assign({},{}),QF=Object.assign({},Kt,{direction:"right",icon:"vc-icons-measurement-button",activeIcon:"vc-icons-measurement-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),L2=["distance","component-distance","polyline","horizontal","vertical","height","area","point","rectangle","regular","circle"],JF=e=>{let t=!0;return e.forEach(n=>{L2.includes(n)||(console.error(`VueCesium: unknown measurement type: ${n}`),t=!1)}),t},au={...sf,measurements:{type:Array,default:()=>L2,validator:JF},mainFabOpts:{type:Object,default:()=>QF},fabActionOpts:{type:Object,default:()=>ZF},distanceActionOpts:{type:Object,default:()=>DF},distanceMeasurementOpts:{type:Object,default:()=>I2},componentDistanceActionOpts:{type:Object,default:()=>LF},componentDistanceMeasurementOpts:{type:Object,default:()=>BF},polylineActionOpts:{type:Object,default:()=>RF},polylineMeasurementOpts:{type:Object,default:()=>A2},horizontalActionOpts:{type:Object,default:()=>VF},horizontalMeasurementOpts:{type:Object,default:()=>FF},verticalActionOpts:{type:Object,default:()=>$F},verticalMeasurementOpts:{type:Object,default:()=>NF},heightActionOpts:{type:Object,default:()=>jF},heightMeasurementOpts:{type:Object,default:()=>kF},areaActionOpts:{type:Object,default:()=>zF},areaMeasurementOpts:{type:Object,default:()=>D2},pointActionOpts:{type:Object,default:()=>GF},pointMeasurementOpts:{type:Object,default:()=>UF},rectangleActionOpts:{type:Object,default:()=>HF},rectangleMeasurementOpts:{type:Object,default:()=>lf},regularActionOpts:{type:Object,default:()=>S2},regularMeasurementOpts:{type:Object,default:()=>WF},circleActionOpts:{type:Object,default:()=>T2},circleMeasurementOpts:{type:Object,default:()=>qF}},Tt=Oi(au),cf={...Oo,...aa,...qe,autoHidden:{type:Boolean,default:!0},customClass:String,teleport:Object},XF={...Le,mouseenter:e=>!0,mouseleave:e=>!0,click:e=>!0};var uf=u.defineComponent({name:"VcOverlayHtml",props:cf,emits:XF,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcOverlayHtml",n.cesiumEvents=[];const i=rt(e,t,n);if(i===void 0)return;const{$services:r}=i,a=u.ref(!1),s=u.ref(null),l=u.reactive({}),d=u.ref(null),h=u.ref(null),m=u.ref(null);let p=[];p.push(u.watch(()=>e.position,A=>{h.value=yt(A,r.viewer.scene.globe.ellipsoid)})),p.push(u.watch(()=>e.pixelOffset,A=>{d.value=kt(A)})),p.push(u.watch(()=>e.show,A=>{l.display=A?"block":"none"})),n.createCesiumObject=async()=>Me(s),n.mount=async()=>{const{viewer:A}=r;return a.value=!0,e.teleport&&e.teleport.to&&!e.teleport.disabled&&T(),d.value=kt(e.pixelOffset),h.value=yt(e.position,A.scene.globe.ellipsoid),A.scene.preRender.addEventListener(g),!0},n.unmount=async()=>{const{viewer:A}=r;return A.scene.preRender.removeEventListener(g),a.value=!1,e.teleport&&e.teleport.to&&!e.teleport.disabled&&_(),!0};const g=()=>{const{viewer:A}=r;if(h.value){const D=A.scene.cartesianToCanvasCoordinates(h.value,{});if(Cesium.defined(D)&&!Cesium.Cartesian2.equals(m.value,D))if(l.left=D.x+d.value.x+"px",l.top=D.y+d.value.y+"px",e.autoHidden&&A.scene.mode!==Cesium.SceneMode.SCENE2D&&A.scene.mode!==Cesium.SceneMode.MORPHING){const z=A.camera.position,$=A.scene.globe.ellipsoid.cartesianToCartographic(z);if(Cesium.defined($)){let L=$.height;L+=1*A.scene.globe.ellipsoid.maximumRadius,Cesium.Cartesian3.distance(z,h.value)>L||!e.show?l.display="none":l.display="block"}}else l.display="block";else Cesium.defined(D)||(l.display="none");m.value=D}};u.onUnmounted(()=>{p.forEach(A=>A()),p=[]});const v=()=>a.value?u.h("div",{ref:s,class:`vc-html-container${e.customClass?" "+e.customClass:""}`,style:l,onMouseenter:P,onMouseleave:w,onClick:b},xt(t.slots.default)):u.createCommentVNode("v-if"),b=A=>{t.emit("click",A)},P=A=>{t.emit("mouseenter",A)},w=A=>{t.emit("mouseleave",A)},S=()=>v(),{showPortal:T,hidePortal:_,renderPortal:M}=n_(n,s,S);return e.teleport&&e.teleport.to&&!e.teleport.disabled?M:()=>v()}}),df={exports:{}};df.exports,function(e){(function(t,n,i){e.exports?e.exports=i():n[t]=i()})("h337",ui,function(){var t={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},n=function(){var h=function(g){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=g.xField||g.defaultXField,this._yField=g.yField||g.defaultYField,this._valueField=g.valueField||g.defaultValueField,g.radius&&(this._cfgRadius=g.radius)},m=t.defaultRadius;return h.prototype={_organiseData:function(p,g){var v=p[this._xField],b=p[this._yField],P=this._radi,w=this._data,S=this._max,T=this._min,_=p[this._valueField]||1,M=p.radius||this._cfgRadius||m;w[v]||(w[v]=[],P[v]=[]),w[v][b]?w[v][b]+=_:(w[v][b]=_,P[v][b]=M);var A=w[v][b];return A>S?(g?this.setDataMax(A):this._max=A,!1):A<T?(g?this.setDataMin(A):this._min=A,!1):{x:v,y:b,value:_,radius:M,min:T,max:S}},_unOrganizeData:function(){var p=[],g=this._data,v=this._radi;for(var b in g)for(var P in g[b])p.push({x:b,y:P,radius:v[b][P],value:g[b][P]});return{min:this._min,max:this._max,data:p}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var p=arguments[0],g=p.length;g--;)this.addData.call(this,p[g]);else{var v=this._organiseData(arguments[0],!0);v&&(this._data.length===0&&(this._min=this._max=v.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[v]}))}return this},setData:function(p){var g=p.data,v=g.length;this._data=[],this._radi=[];for(var b=0;b<v;b++)this._organiseData(g[b],!1);return this._max=p.max,this._min=p.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(p){return this._max=p,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(p){return this._min=p,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(p){this._coordinator=p},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},h}(),i=function(){var h=function(v){var b=v.gradient||v.defaultGradient,P=document.createElement("canvas"),w=P.getContext("2d");P.width=256,P.height=1;var S=w.createLinearGradient(0,0,256,1);for(var T in b)S.addColorStop(T,b[T]);return w.fillStyle=S,w.fillRect(0,0,256,1),w.getImageData(0,0,256,1).data},m=function(v,b){var P=document.createElement("canvas"),w=P.getContext("2d"),S=v,T=v;if(P.width=P.height=v*2,b==1)w.beginPath(),w.arc(S,T,v,0,2*Math.PI,!1),w.fillStyle="rgba(0,0,0,1)",w.fill();else{var _=w.createRadialGradient(S,T,v*b,S,T,v);_.addColorStop(0,"rgba(0,0,0,1)"),_.addColorStop(1,"rgba(0,0,0,0)"),w.fillStyle=_,w.fillRect(0,0,2*v,2*v)}return P},p=function(T){for(var b=[],P=T.min,w=T.max,S=T.radi,T=T.data,_=Object.keys(T),M=_.length;M--;)for(var A=_[M],D=Object.keys(T[A]),z=D.length;z--;){var $=D[z],L=T[A][$],U=S[A][$];b.push({x:A,y:$,value:L,radius:U})}return{min:P,max:w,data:b}};function g(v){var b=v.container,P=this.shadowCanvas=document.createElement("canvas"),w=this.canvas=v.canvas||document.createElement("canvas");this._renderBoundaries=[1e4,1e4,0,0];var S=getComputedStyle(v.container)||{};w.className="heatmap-canvas",this._width=w.width=P.width=v.width||+S.width.replace(/px/,""),this._height=w.height=P.height=v.height||+S.height.replace(/px/,""),this.shadowCtx=P.getContext("2d"),this.ctx=w.getContext("2d"),w.style.cssText=P.style.cssText="position:absolute;left:0;top:0;",b.style.position="relative",b.appendChild(w),this._palette=h(v),this._templates={},this._setStyles(v)}return g.prototype={renderPartial:function(v){v.data.length>0&&(this._drawAlpha(v),this._colorize())},renderAll:function(v){this._clear(),v.data.length>0&&(this._drawAlpha(p(v)),this._colorize())},_updateGradient:function(v){this._palette=h(v)},updateConfig:function(v){v.gradient&&this._updateGradient(v),this._setStyles(v)},setDimensions:function(v,b){this._width=v,this._height=b,this.canvas.width=this.shadowCanvas.width=v,this.canvas.height=this.shadowCanvas.height=b},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(v){this._blur=v.blur==0?0:v.blur||v.defaultBlur,v.backgroundColor&&(this.canvas.style.backgroundColor=v.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=v.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=v.height||this._height,this._opacity=(v.opacity||0)*255,this._maxOpacity=(v.maxOpacity||v.defaultMaxOpacity)*255,this._minOpacity=(v.minOpacity||v.defaultMinOpacity)*255,this._useGradientOpacity=!!v.useGradientOpacity},_drawAlpha:function(w){for(var b=this._min=w.min,P=this._max=w.max,w=w.data||[],S=w.length,T=1-this._blur;S--;){var _=w[S],M=_.x,A=_.y,D=_.radius,z=Math.min(_.value,P),$=M-D,L=A-D,U=this.shadowCtx,Z;this._templates[D]?Z=this._templates[D]:this._templates[D]=Z=m(D,T);var W=(z-b)/(P-b);U.globalAlpha=W<.01?.01:W,U.drawImage(Z,$,L),$<this._renderBoundaries[0]&&(this._renderBoundaries[0]=$),L<this._renderBoundaries[1]&&(this._renderBoundaries[1]=L),$+2*D>this._renderBoundaries[2]&&(this._renderBoundaries[2]=$+2*D),L+2*D>this._renderBoundaries[3]&&(this._renderBoundaries[3]=L+2*D)}},_colorize:function(){var v=this._renderBoundaries[0],b=this._renderBoundaries[1],P=this._renderBoundaries[2]-v,w=this._renderBoundaries[3]-b,S=this._width,T=this._height,_=this._opacity,M=this._maxOpacity,A=this._minOpacity,D=this._useGradientOpacity;v<0&&(v=0),b<0&&(b=0),v+P>S&&(P=S-v),b+w>T&&(w=T-b);for(var z=this.shadowCtx.getImageData(v,b,P,w),$=z.data,L=$.length,U=this._palette,Z=3;Z<L;Z+=4){var W=$[Z],y=W*4;if(y){var C;_>0?C=_:W<M?W<A?C=A:C=W:C=M,$[Z-3]=U[y],$[Z-2]=U[y+1],$[Z-1]=U[y+2],$[Z]=D?U[y+3]:C}}this.ctx.putImageData(z,v,b),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(v){var b,P=this.shadowCtx,w=P.getImageData(v.x,v.y,1,1),S=w.data[3],T=this._max,_=this._min;return b=Math.abs(T-_)*(S/255)>>0,b},getDataURL:function(){return this.canvas.toDataURL()}},g}(),r=function(){var h=!1;return t.defaultRenderer==="canvas2d"&&(h=i),h}(),a={merge:function(){for(var d={},h=arguments.length,m=0;m<h;m++){var p=arguments[m];for(var g in p)d[g]=p[g]}return d}},s=function(){var h=function(){function v(){this.cStore={}}return v.prototype={on:function(b,P,w){var S=this.cStore;S[b]||(S[b]=[]),S[b].push(function(T){return P.call(w,T)})},emit:function(b,P){var w=this.cStore;if(w[b])for(var S=w[b].length,T=0;T<S;T++){var _=w[b][T];_(P)}}},v}(),m=function(g){var v=g._renderer,b=g._coordinator,P=g._store;b.on("renderpartial",v.renderPartial,v),b.on("renderall",v.renderAll,v),b.on("extremachange",function(w){g._config.onExtremaChange&&g._config.onExtremaChange({min:w.min,max:w.max,gradient:g._config.gradient||g._config.defaultGradient})}),P.setCoordinator(b)};function p(){var g=this._config=a.merge(t,arguments[0]||{});if(this._coordinator=new h,g.plugin){var v=g.plugin;if(t.plugins[v]){var b=t.plugins[v];this._renderer=new b.renderer(g),this._store=new b.store(g)}else throw new Error("Plugin '"+v+"' not found. Maybe it was not registered.")}else this._renderer=new r(g),this._store=new n(g);m(this)}return p.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(g){return this._config=a.merge(this._config,g),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(g){return this._store.getValueAt?this._store.getValueAt(g):this._renderer.getValueAt?this._renderer.getValueAt(g):null}},p}(),l={create:function(d){return new s(d)},register:function(d,h){t.plugins[d]=h}};return l})}(df);var YF=df.exports,KF=th(YF);const hf={id:String,name:String,availability:Object,...qe,description:[String,Object],...Oo,orientation:Object,...qC,parent:Object,billboard:Object,box:Object,corridor:Object,cylinder:Object,ellipse:Object,ellipsoid:Object,label:Object,model:Object,tileset:Object,path:Object,plane:Object,point:Object,polygon:Object,polyline:Object,properties:Object,polylineVolume:Object,rectangle:Object,wall:Object,..._t},e8={...Le,...ya,definitionChanged:e=>!0,"update:billboard":e=>!0,"update:box":e=>!0,"update:corridor":e=>!0,"update:cylinder":e=>!0,"update:ellipse":e=>!0,"update:ellipsoid":e=>!0,"update:label":e=>!0,"update:model":e=>!0,"update:path":e=>!0,"update:plane":e=>!0,"update:point":e=>!0,"update:polygon":e=>!0,"update:polyline":e=>!0,"update:polylineVolume":e=>!0,"update:rectangle":e=>!0,"update:tileset":e=>!0,"update:wall":e=>!0};var su=u.defineComponent({name:"VcEntity",props:hf,emits:e8,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="Entity",n.cesiumEvents=["definitionChanged"];const i=rt(e,t,n);if(i===void 0)return;const{$services:r}=i,{emit:a}=t;n.mount=async()=>{var l;const d=(l=r==null?void 0:r.entities)==null?void 0:l.add(n.cesiumObject);return r==null?void 0:r.entities.contains(d)},n.unmount=async()=>{var l;return(l=r==null?void 0:r.entities)==null?void 0:l.remove(n.cesiumObject)};const s=(l,d)=>(ze(n,d)?a(d,l):n.cesiumObject&&(n.cesiumObject[d.substring(7)]=l),l&&(l._vcParent=n.cesiumObject),!0);return Object.assign(n.proxy,{__updateGraphics:s}),()=>{var l,d;return t.slots.default?u.h("i",{class:pe(((l=n.proxy)==null?void 0:l.$options.name)||""),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(((d=n.proxy)==null?void 0:d.$options.name)||""))}}});su.install=e=>{e.component(su.name,su)};const B2=su;var R2=B2;const V2=B2;var t8={imageryProvider:Object,...vn,alpha:{type:[Number,Function],default:1},nightAlpha:{type:[Number,Function],default:1},dayAlpha:{type:[Number,Function],default:1},brightness:{type:[Number,Function],default:1},contrast:{type:[Number,Function],default:1},hue:{type:[Number,Function],default:0},saturation:{type:[Number,Function],default:1},gamma:{type:[Number,Function],default:1},splitDirection:{type:[Number,Function],default:0},minificationFilter:Number,magnificationFilter:Number,...qe,maximumAnisotropy:Number,minimumTerrainLevel:Number,maximumTerrainLevel:Number,...iw,...rw,colorToAlphaThreshold:{type:Number,default:.004},sortOrder:Number,vcId:String};const n8={...Le,"update:imageryProvider":e=>!0,readyEvent:e=>!0,errorEvent:e=>!0},mf=t8;var lu=u.defineComponent({name:"VcLayerImagery",props:mf,emits:n8,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="ImageryLayer",n.cesiumEvents=["readyEvent","errorEvent"];const i=rt(e,t,n);if(i===void 0)return;const{$services:r}=i,{emit:a}=t;n.createCesiumObject=async()=>{const l=i.transformProps(e);if(qt(Cesium.VERSION,"1.104")){const d=e.imageryProvider||Cesium.BingMapsImageryProvider.fromUrl(void 0,{key:""}),h=Cesium.ImageryLayer.fromProviderAsync(d,l);return h.errorEvent.addEventListener(m=>{}),h}else{const d=e.imageryProvider||{};return new Cesium.ImageryLayer(d,l)}},n.mount=async()=>{const{viewer:l}=r,d=n.cesiumObject;return d.sortOrder=e.sortOrder,d.vcId=e.vcId||Cesium.createGuid(),l.imageryLayers.add(d),!l.isDestroyed()&&l.imageryLayers.contains(d)},n.unmount=async()=>{const{viewer:l}=r,d=n.cesiumObject;return!l.isDestroyed()&&l.imageryLayers.remove(d)};const s=l=>{var d;if(ci(l))return(d=n.unmount)==null?void 0:d.call(n);{const h=n.cesiumObject;h._imageryProvider=l,ze(n,"update:imageryProvider")&&a("update:imageryProvider",l)}return!0};return Object.assign(n.proxy,{__updateProvider:s}),()=>{var l,d;return t.slots.default?u.h("i",{class:pe(((l=n.proxy)==null?void 0:l.$options.name)||""),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(((d=n.proxy)==null?void 0:d.$options.name)||"v-if"))}}});lu.install=e=>{e.component(lu.name,lu)};const F2=lu;var $2=F2;const N2=F2,pf={...Ps,...da,...qe,...cc,..._s,...Es,...ws,...Lo,...Bo,...Yi,...er,...lc,..._t};var j2=u.defineComponent({name:"VcPrimitiveClassification",props:pf,emits:Kn,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="ClassificationPrimitive",Yn(e,t,i);const r=((n=i.proxy)==null?void 0:n.$options.name)||"";return()=>t.slots.default?u.h("i",{class:pe(r),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(r))}});const ff={...Ps,...da,...qe,...cc,..._s,...Es,...ws,...Lo,...Bo,...Yi,...er,...lc,..._t};var k2=u.defineComponent({name:"VcPrimitiveGround",props:ff,emits:Kn,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="GroundPrimitive",Yn(e,t,i);const r=((n=i.proxy)==null?void 0:n.$options.name)||"";return()=>t.slots.default?u.h("i",{class:pe(r),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(r))}});const gf={...Ps,...da,...qe,..._s,...Es,...ws,...Lo,...Bo,...Yi,...er,...lc,..._t};var z2=u.defineComponent({name:"VcPrimitiveGroundPolyline",props:gf,emits:Kn,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="GroundPolylinePrimitive",Yn(e,t,i);const r=((n=i.proxy)==null?void 0:n.$options.name)||"";return()=>t.slots.default?u.h("i",{class:pe(r),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(r))}});const vf={...Si,basePath:String,...qe,...Ti,...So,...Ch,...wh,...Qr,...Lo,..._h,...Bo,...Ph,...On,...er,...Uh,...$n,...xs,...Zt,...Tr,...Oh,...Mh,...Eh,...xh,...vs,dequantizeInShader:{type:Boolean,default:!0},...nc,...Sh,...Qh,...Jh,...Xh,...un,...Yh,showOutline:{type:Boolean,default:!0},..._t};var G2=u.defineComponent({name:"VcPrimitiveModel",props:vf,emits:{...Kn,readyEvent:e=>!0,texturesReadyEvent:e=>!0,errorEvent:e=>!0},setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="Model",n.cesiumEvents=["readyEvent","texturesReadyEvent","errorEvent"];const i=Yn(e,t,n);return n.createCesiumObject=async()=>{const r=i==null?void 0:i.transformProps(e);return qt(Cesium.VERSION,"1.104")?await Cesium.Model.fromGltfAsync(r):Cesium.Model.fromGltf(r)},()=>{var r;return u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const yf={...Ps,...da,...zh,...qe,...Ti,...cc,..._s,...Es,...ws,...Lo,cull:{type:Boolean,default:!0},...Bo,...er,...On,..._t};var U2=u.defineComponent({name:"VcPrimitive",props:yf,emits:Kn,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="Primitive",Yn(e,t,i);const r=((n=i.proxy)==null?void 0:n.$options.name)||"";return()=>{var a;return t.slots.default?u.h("i",{class:pe(r),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(((a=i.proxy)==null?void 0:a.$options.name)||""))}}});const i8={...Kn,allTilesLoaded:()=>!0,initialTilesLoaded:()=>!0,loadProgress:(e,t)=>!0,tileFailed:(e,t)=>!0,tileLoad:e=>!0,tileUnload:e=>!0,tileVisible:e=>!0},bf={url:[String,Object],...qe,...Ti,modelUpAxis:{type:Number},modelForwardAxis:{type:Number},...On,...Dh,maximumMemoryUsage:{type:Number},cacheBytes:{type:Number,default:536870912},maximumCacheOverflowBytes:{type:Number,default:536870912},cullWithChildrenBounds:{type:Boolean,default:!0},cullRequestsWhileMoving:{type:Boolean,default:!0},cullRequestsWhileMovingMultiplier:{type:Number,default:60},preloadWhenHidden:{type:Boolean,default:!1},preloadFlightDestinations:{type:Boolean,default:!0},preferLeaves:{type:Boolean,default:!1},dynamicScreenSpaceError:{type:Boolean,default:!1},dynamicScreenSpaceErrorDensity:{type:Number,default:.00278},dynamicScreenSpaceErrorFactor:{type:Number,default:4},dynamicScreenSpaceErrorHeightFalloff:{type:Number,default:.25},progressiveResolutionHeightFraction:{type:Number,default:.3},foveatedScreenSpaceError:{type:Boolean,default:!0},foveatedConeSize:{type:Number,default:.1},foveatedMinimumScreenSpaceErrorRelaxation:{type:Number,default:0},foveatedInterpolationCallback:Function,foveatedTimeDelay:{type:Number,default:.2},skipLevelOfDetail:{type:Boolean,default:!1},baseScreenSpaceError:{type:Number,default:1024},skipScreenSpaceErrorFactor:{type:Number,default:16},skipLevels:{type:Number,default:1},immediatelyLoadDesiredLevelOfDetail:{type:Boolean,default:!1},loadSiblings:{type:Boolean,default:!1},...vs,...Yi,...at,pointCloudShading:Object,...nc,...hw,...Qh,...Jh,...Xh,...mw,...Yh,enableShowOutline:{type:Boolean,default:!0},showOutline:{type:Boolean,default:!0},...Ln,vectorClassificationOnly:{type:Boolean,default:!1},vectorKeepDecodedPositions:{type:Boolean,default:!1},featureIdIndex:{type:Number,default:0},instanceFeatureIdIndex:{type:Number,default:0},featureIdLabel:{type:[String,Number]},instanceFeatureIdLabel:{type:[String,Number]},splitDirection:{type:Number,default:0},projectTo2D:{type:Boolean,default:!1},showCreditsOnScreen:{type:Boolean,default:!1},debugHeatmapTilePropertyName:String,debugFreezeFrame:{type:Boolean,default:!1},debugColorizeTiles:{type:Boolean,default:!1},...Uh,...er,debugShowContentBoundingVolume:{type:Boolean,default:!1},debugShowViewerRequestVolume:{type:Boolean,default:!1},debugShowGeometricError:{type:Boolean,default:!1},debugShowRenderingStatistics:{type:Boolean,default:!1},debugShowMemoryUsage:{type:Boolean,default:!1},debugShowUrl:{type:Boolean,default:!1},..._t,enableModelExperimental:{type:Boolean,default:!1},...jh,properties:{type:Array},fragmentShader:String,replaceFS:Boolean,assetId:Number};var H2=u.defineComponent({name:"VcPrimitiveTileset",props:bf,emits:i8,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="Cesium3DTileset",n.cesiumEvents=["allTilesLoaded","initialTilesLoaded","loadProgress","tileFailed","tileLoad","tileUnload","tileVisible"];const i=Yn(e,t,n);n.proxy.creatingPromise.then(a=>{const s=a.cesiumObject;n.removeCallbacks.push(s.tileVisible.addEventListener(r))});const r=a=>{const s=a.content,l=s._model;for(let d=0;d<s.featuresLength;d++){const h=s.getFeature(d);e.properties&&e.properties.length&&e.properties.forEach(m=>{h.hasProperty(m.key)&&h.getProperty(m.key)===m.keyValue&&h.setProperty(m.propertyName,m.propertyValue)})}e.fragmentShader&&l&&l._sourcePrograms&&l._rendererResources&&(Object.keys(l._sourcePrograms).forEach(d=>{var h;const m=l._sourcePrograms[d],p=l._rendererResources.sourceShaders;if(e.replaceFS)p[m.fragmentShader]=e.fragmentShader;else{const g=p[m.fragmentShader],v=(h=i.$services.viewer.scene.context)==null?void 0:h.webgl2;p[m.fragmentShader]=g.replace(`${v?"out_FragColor":"gl_FragColor"} = vec4(color, 1.0);
}`,`${v?"out_FragColor":"gl_FragColor"}  = vec4(color, 1.0);
             ${e.fragmentShader}
}
            `)}}),l._shouldRegenerateShaders=!0)};return()=>{var a;return u.createCommentVNode(pe(((a=n.proxy)==null?void 0:a.$options.name)||""))}}});const Cf={...aw,...kh,enableShowOutline:{type:Boolean,default:!0},showOutline:{type:Boolean,default:!0},..._t};var W2=u.defineComponent({name:"VcPrimitiveOsmBuildings",props:Cf,emits:{...Kn},setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcPrimitiveOsmBuildings";const i=Yn(e,t,n);return n.createCesiumObject=async()=>{const r=i==null?void 0:i.transformProps(e);return r.style=r.tileStyle,delete r.tileStyle,qt(Cesium.VERSION,"1.104")?await Cesium.createOsmBuildingsAsync(r):Cesium.createOsmBuildings(r)},()=>{var r;return u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const r8={...Kn,complete:e=>!0},wf={...qe,updateCallback:Function,emitter:Object,...Ti,emitterModelMatrix:Object,emissionRate:{type:Number,default:5},bursts:Array,loop:{type:Boolean,default:!0},scale:{type:Number,default:1},startScale:Number,endScale:Number,...Tr,...sw,...lw,...jl,...dw,...cw,...uw,...kl,speed:{type:Number,default:1},minimumSpeed:Number,maximumSpeed:Number,lifetime:{type:Number,default:Number.MAX_VALUE},particleLife:{type:Number,default:5},minimumParticleLife:Number,maximumParticleLife:Number,mass:{type:Number,default:1},minimumMass:Number,maximumMass:Number,..._t};var q2=u.defineComponent({name:"VcPrimitiveParticle",props:wf,emits:r8,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="ParticleSystem",n.cesiumEvents=["complete"],Yn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}}),o8=`
  uniform sampler2D colorTexture;
  uniform vec4 u_color1;
  uniform vec4 u_color2;
  uniform float u_isShed;
  uniform sampler2D shadowMap_depthTexture;
  uniform mat4 shadowMap_matrix;
  uniform vec4 shadowMap_lightPositionEC;
  uniform vec3 shadowMap_lightDirectionEC;
  uniform float u_radius;
  uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;
  uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;
  uniform float czzj;
  uniform float dis;
  uniform float spzj;
  uniform float mixNum;
  uniform vec3 shadowMap_lightUp;
  uniform vec3 shadowMap_lightDir;
  uniform vec3 shadowMap_lightRight;
  in vec2 v_textureCoordinates;
  vec4 toEye(in vec2 uv, in float depth){
    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));
    vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
    posInCamera =posInCamera / posInCamera.w;
    return posInCamera;
  }
  float getDepth(in vec4 depth){
    float z_window = czm_unpackDepth(depth);
    z_window = czm_reverseLogDepth(z_window);
    float n_range = czm_depthRange.near;
    float f_range = czm_depthRange.far;
    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
  }
  float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv){
    return texture(shadowMap, uv).r;
  }
  float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth){
    return step(depth, _czm_sampleShadowMap(shadowMap, uv));
  }
  float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters){
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec2 uv = shadowParameters.texCoords;
    depth -= depthBias;
    vec2 texelStepSize = shadowParameters.texelStepSize;
    float radius = 1.0;
    float dx0 = -texelStepSize.x * radius;
    float dy0 = -texelStepSize.y * radius;
    float dx1 = texelStepSize.x * radius;
    float dy1 = texelStepSize.y * radius;
    float visibility =
    (
    _czm_shadowDepthCompare(shadowMap, uv, depth)
    +_czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)
    ) * (1.0 / 9.0)
    ;
    return visibility;
  }
  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){
    vec3 v01 = point -planeOrigin;
    float d = dot(planeNormal, v01) ;
    return (point - planeNormal * d);
  }
  float ptm(vec3 pt){
    return sqrt(pt.x*pt.x + pt.y*pt.y + pt.z*pt.z);
  }
  void main()
  {
    const float PI = 3.141592653589793;
    vec4 color = texture(colorTexture, v_textureCoordinates);
    out_FragColor = color;
    if ( u_isShed < 0.5 )
        return;
    vec4 currD = texture(czm_globeDepthTexture, v_textureCoordinates);
    if( currD.r >= 1.0 )
        return;

    float depth = getDepth(currD);
    vec4 positionEC = toEye(v_textureCoordinates, depth);
    vec3 normalEC = vec3(1.0);
    czm_shadowParameters shadowParameters;
    shadowParameters.texelStepSize = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;
    shadowParameters.depthBias = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;
    shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;
    shadowParameters.darkness = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;
    shadowParameters.depthBias *= max(depth * 0.01, 1.0);
    vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);
    float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);
    vec4 shadowPosition = shadowMap_matrix * positionEC;
    shadowPosition /= shadowPosition.w;
    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0))))
      return;

    vec4 lw = czm_inverseView* vec4(shadowMap_lightPositionEC.xyz, 1.0);
    vec4 vw = czm_inverseView* vec4(positionEC.xyz, 1.0);
    if(distance(lw.xyz,vw.xyz)> u_radius)
        return;

    shadowParameters.texCoords = shadowPosition.xy;
    shadowParameters.depth = shadowPosition.z;
    shadowParameters.nDotL = nDotL;
    float visibility = _czm_shadowVisibility(shadowMap_depthTexture, shadowParameters);
    if(visibility > 0.3 ){
      out_FragColor = mix(color,vec4(u_color1.rgb, 1.0),mixNum);
    }
    else{
      if(abs(shadowPosition.z-0.0)<0.01){
        return;
      }
      out_FragColor = mix(color,vec4(u_color2.rgb, 1.0),mixNum);
    }
  }
`;const _f={...xs,fovH:{type:Number,default:90},fovV:{type:Number,default:60},offsetHeight:{type:Number,default:1.8},visibleColor:{type:[Object,Array,String],default:"#00ff00"},invisibleColor:{type:[Object,Array,String],default:"#ff0000"},showGridLine:{type:Boolean,default:!0},lineColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.4)"},faceColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.1)"},show:{type:Boolean,default:!0},startPosition:{type:Object},endPosition:{type:Object},fragmentShader:{type:String},uniforms:Object};var a8=u.defineComponent({name:"VcViewshed",props:_f,emits:Le,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcViewshed";const i=rt(e,t,n);if(i===void 0)return;const r=[];let a;r.push(u.watch([()=>e.startPosition,()=>e.endPosition],([l,d])=>{n.mounted&&s(yt(u.toRaw(l)),yt(u.toRaw(d)))},{deep:!0})),r.push(u.watch(()=>e.fovH,l=>{if(!n.mounted)return;const d=n.cesiumObject;d.fovH=l})),r.push(u.watch(()=>e.fovV,l=>{if(!n.mounted)return;const d=n.cesiumObject;d.fovV=l})),r.push(u.watch(()=>e.fovV,l=>{if(!n.mounted)return;const d=n.cesiumObject;d.fovV=l})),r.push(u.watch(()=>e.offsetHeight,l=>{if(!n.mounted)return;const d=n.cesiumObject;d.offsetHeight=l})),r.push(u.watch(()=>e.visibleColor,l=>{if(!n.mounted)return;const d=n.cesiumObject;d.visibleColor=Ue(l)})),r.push(u.watch(()=>e.invisibleColor,l=>{if(!n.mounted)return;const d=n.cesiumObject;d.invisibleColor=Ue(l)})),r.push(u.watch(()=>e.showGridLine,l=>{if(!n.mounted)return;const d=n.cesiumObject;d.showGridLine=l})),r.push(u.watch(()=>e.show,l=>{if(!n.mounted)return;const d=n.cesiumObject;d.enabled=l})),u.onUnmounted(()=>{r.forEach(l=>l()),r.length=0}),n.createCesiumObject=async()=>{const l=i.$services.viewer,d=new Lm(l.scene,{fovH:120,fovV:60,offsetHeight:1.8,visibleColor:Ue(e.visibleColor),invisibleColor:Ue(e.invisibleColor),showGridLine:e.showGridLine});return d._viewshedShadowMap.cascadesEnabled=!1,d._viewshedShadowMap.softShadows=!1,d._viewshedShadowMap.normalOffset=!1,d._viewshedShadowMap.fromLightSource=!1,d._viewshedShadowMap.enabled=!1,d.fovH=Cesium.Math.toRadians(e.fovH),d.fovV=Cesium.Math.toRadians(e.fovV),d.offsetHeight=e.offsetHeight,d.showGridLine=e.showGridLine,d.enabled=e.show,d.lineColor=Ue(e.lineColor),d.faceColor=Ue(e.faceColor),d},n.mount=async()=>{var l;const d=i.$services.viewer,h=n.cesiumObject,{Cartesian4:m,PostProcessStage:p,Cartesian2:g}=Cesium,v=(l=i.$services.viewer.scene.context)==null?void 0:l.webgl2;let b=o8;v||(b=b.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),b=b.replace(/texture\(/g,"texture2D("),b=b.replace(/out_FragColor/g,"gl_FragColor")),s(yt(u.toRaw(e.startPosition)),yt(u.toRaw(e.endPosition))),a=new p({fragmentShader:e.fragmentShader||b,uniforms:e.uniforms||{u_color1:function(){return h.visibleColor},u_color2:function(){return h.invisibleColor},u_isShed:function(){return h.shadowMap.enabled},u_radius:function(){return h.lightCamera.frustum.far},shadowMap_depthTexture:function(){return h.shadowMap.enabled?h.shadowMap._shadowMapTexture:d.scene.context.defaultTexture},shadowMap_matrix:function(){return h.shadowMap._shadowMapMatrix},shadowMap_cascadeSplits:function(){return h.shadowMap._cascadeSplits},shadowMap_cascadeMatrices:function(){return h.shadowMap._cascadeMatrices},shadowMap_lightDirectionEC:function(){return h.shadowMap._lightDirectionEC},shadowMap_lightPositionEC:function(){return h.shadowMap._lightPositionEC},shadowMap_cascadeDistances:function(){return h.shadowMap._cascadeDistances},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){const w=h.shadowMap._pointBias;return m.fromElements(w.normalOffsetScale,h.shadowMap._distance,h.shadowMap.maximumDistance,0,new m)},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){const w=h.shadowMap._pointBias,S=new g;return S.x=1/h.shadowMap._textureSize.x,S.y=1/h.shadowMap._textureSize.y,m.fromElements(S.x,S.y,w.depthBias,w.normalShadingSmooth,new m)},czzj:function(){return h.lightCamera.frustum.fov},spzj:function(){return h.lightCamera.frustum.fov},mixNum:function(){return .5},shadowMap_lightUp:function(){return h.lightCamera.up},shadowMap_lightDir:function(){return h.lightCamera.direction},shadowMap_lightRight:function(){return h.lightCamera.right}}}),d.scene.postProcessStages.add(a);const P=i.$services.primitives;return P&&P.add(h)},n.unmount=async()=>{const l=i.$services.viewer;a&&l.scene.postProcessStages.remove(a);const d=i.$services.primitives,h=n.cesiumObject;return d&&d.remove(h)};const s=(l,d)=>{const h=n.cesiumObject,{Cartesian3:m}=Cesium;let p=m.subtract(d,l,new m);const g=m.magnitudeSquared(p),v=m.distance(d,l);if(g<.01||h.frustum.near>v)h.enabled=!1;else{h.enabled=!0,p=m.normalize(p,p);const b=m.normalize(d,new m);h.setView({destination:l,orientation:{direction:p,up:b}}),h.frustum.far=Math.max(v,1.1)}};return()=>{var l;return u.createCommentVNode(pe(((l=n.proxy)==null?void 0:l.$options.name)||""))}}});const Pf={...Cs,intervals:Object,...qe,...Ti,...On,...ow,shading:Object,...kh,...vs,..._t};var Z2=u.defineComponent({name:"VcPrimitiveTimeDynamicPointCloud",props:Pf,emits:{...Kn,frameChanged:e=>!0,frameFailed:e=>!0},setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcPrimitiveTimeDynamicPointCloud",n.cesiumEvents=["frameChanged","frameFailed"];const i=Yn(e,t,n);return n.createCesiumObject=async()=>{const r=i==null?void 0:i.transformProps(e);return r.style=r.tileStyle,delete r.tileStyle,new Cesium.TimeDynamicPointCloud(r)},()=>{var r;return u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const Ef={...Si,name:String,...qe,geoidTiledTerrainProvider:{type:Object},traceFetches:{type:Boolean,default:!1},cesium3dTilesetOptions:{type:Object},..._t};var Q2=u.defineComponent({name:"VcPrimitiveI3sDataProvider",props:Ef,emits:Kn,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="I3SDataProvider",Yn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const xf={provider:{type:Object},...Ti,...jh,...Cs,..._t};var J2=u.defineComponent({name:"VcPrimitiveVoxel",props:xf,emits:Kn,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="VoxelPrimitive",Yn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const Of={...qe,enabled:{type:Boolean,default:!0},pixelRange:{type:Number,default:80},minimumClusterSize:{type:Number,default:2},clusterBillboards:{type:Boolean,default:!0},clusterLabels:{type:Boolean,default:!0},clusterPoints:{type:Boolean,default:!0},billboards:{type:Array,default:()=>[]},labels:{type:Array,default:()=>[]},points:{type:Array,default:()=>[]},..._t};var X2=u.defineComponent({name:"VcPrimitiveCluster",props:Of,emits:{...Kn,clusterEvent:(e,t)=>!0},setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcPrimitiveCluster",i.cesiumEvents=["clusterEvent"];const r=Yn(e,t,i),a=[];a.push(u.watch(()=>e.show,m=>{const p=i.cesiumObject;p.show=m})),a.push(u.watch(()=>e.enabled,m=>{const p=i.cesiumObject;p.enabled=m})),a.push(u.watch(()=>e.minimumClusterSize,m=>{const p=i.cesiumObject;p.minimumClusterSize=m})),a.push(u.watch(()=>e.clusterBillboards,m=>{const p=i.cesiumObject;p.clusterBillboards=m,i.proxy.reload()})),a.push(u.watch(()=>e.clusterLabels,m=>{const p=i.cesiumObject;p.clusterLabels=m,i.proxy.reload()})),a.push(u.watch(()=>e.clusterBillboards,m=>{const p=i.cesiumObject;p.clusterPoints=m,i.proxy.reload()})),a.push(u.watch(()=>ut(e.billboards),(m,p)=>{if(!i.mounted)return;const g=i.cesiumObject._billboardCollection;if(m.length===p.length){const v=[];for(let b=0;b<m.length;b++){const P=m[b],w=p[b];JSON.stringify(P)!==JSON.stringify(w)&&v.push({newOptions:P,oldOptions:w})}v.forEach(b=>{const P=g._billboards.find(w=>(w==null?void 0:w.id)===b.oldOptions.id);P&&Object.keys(b.newOptions).forEach(w=>{b.oldOptions[w]!==b.newOptions[w]&&(P[w]=r==null?void 0:r.transformProp(w,b.newOptions[w]))})})}else{const v=Nt(m,p,"id"),b=Nt(p,m,"id"),P=[];for(let w=0;w<b.length;w++){const S=g._billboards.find(T=>T.id===b[w].id);S&&P.push(S)}P.forEach(w=>{g.remove(w)}),l(g,v),setTimeout(()=>{r.$services.viewer.scene.camera.changed.raiseEvent()})}},{deep:!0})),a.push(u.watch(()=>ut(e.labels),(m,p)=>{if(!i.mounted)return;const g=i.cesiumObject._labelCollection;if(m.length===p.length){const v=[];for(let b=0;b<m.length;b++){const P=m[b],w=p[b];JSON.stringify(P)!==JSON.stringify(w)&&v.push({newOptions:P,oldOptions:w})}v.forEach(b=>{const P=g._labels.find(w=>w.id===b.oldOptions.id);P&&Object.keys(b.newOptions).forEach(w=>{b.oldOptions[w]!==b.newOptions[w]&&(P[w]=r.transformProp(w,b.newOptions[w]))})})}else{const v=Nt(m,p,"id"),b=Nt(p,m,"id"),P=[];for(let w=0;w<b.length;w++){const S=g._labels.find(T=>T.id===b[w].id);S&&P.push(S)}P.forEach(w=>{g.remove(w)}),d(g,v),setTimeout(()=>{r.$services.viewer.scene.camera.changed.raiseEvent()})}},{deep:!0})),a.push(u.watch(()=>ut(e.points),(m,p)=>{if(!i.mounted)return;const g=i.cesiumObject._pointCollection;if(m.length===p.length){const v=[];for(let b=0;b<m.length;b++){const P=m[b],w=p[b];JSON.stringify(P)!==JSON.stringify(w)&&v.push({newOptions:P,oldOptions:w})}v.forEach(b=>{const P=g._pointPrimitives.find(w=>w&&w.id===b.oldOptions.id);P&&Object.keys(b.newOptions).forEach(w=>{b.oldOptions[w]!==b.newOptions[w]&&(P[w]=r.transformProp(w,b.newOptions[w]))})})}else{const v=Nt(m,p,"id"),b=Nt(p,m,"id"),P=[];for(let w=0;w<b.length;w++){const S=g._pointPrimitives.find(T=>T.id===b[w].id);S&&P.push(S)}P.forEach(w=>{g.remove(w)}),s(g,v),setTimeout(()=>{r.$services.viewer.scene.camera.changed.raiseEvent()})}},{deep:!0})),i.createCesiumObject=async()=>{const m=new xm({show:e.show,enabled:e.enabled,pixelRange:e.pixelRange,minimumClusterSize:e.minimumClusterSize,clusterBillboards:e.clusterBillboards,clusterLabels:e.clusterLabels,clusterPoints:e.clusterPoints}),p=new Cesium.BillboardCollection;l(p,e.billboards);const g=new Cesium.LabelCollection;d(g,e.labels);const v=new Cesium.PointPrimitiveCollection;return s(v,e.points),m._billboardCollection=p,m._labelCollection=g,m._pointCollection=v,m._initialize(r.$services.viewer.scene),setTimeout(()=>{r.$services.viewer.scene.camera.changed.raiseEvent()}),m};const s=(m,p)=>{for(let g=0;g<p.length;g++){const v=p[g];v.id=Cesium.defined(v.id)?v.id:Cesium.createGuid();const b=r.transformProps(v),P=m.add(b);qi(P,b)}},l=(m,p)=>{for(let g=0;g<p.length;g++){const v=p[g];v.id=Cesium.defined(v.id)?v.id:Cesium.createGuid();const b=r.transformProps(v),P=m.add(b);qi(P,b)}},d=(m,p)=>{for(let g=0;g<p.length;g++){const v=p[g];v.id=Cesium.defined(v.id)?v.id:Cesium.createGuid();const b=r.transformProps(v),P=m.add(b);qi(P,b)}};u.onUnmounted(()=>{a.forEach(m=>m()),a.length=0});const h=((n=i.proxy)==null?void 0:n.$options.name)||"";return()=>t.slots.default?u.h("i",{class:pe(h),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(h))}});[j2,k2,z2,G2,U2,H2,W2,Q2,J2,Z2,q2,X2].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const cu=j2,uu=k2,Ks=z2,Mf=G2,Br=U2,Sf=H2,Tf=W2,If=q2,Af=a8,Df=Z2,Lf=Q2,Bf=J2,Rf=X2,Vf={...qe,...vn,min:{type:Number,default:0},max:{type:Number,default:100},data:Array,options:Object,type:{type:String,default:"primitive"},segments:{type:Array,default:()=>[]},projection:{type:String,default:"3857"}};var Y2=u.defineComponent({name:"VcOverlayHeatmap",props:Vf,emits:Le,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcOverlayHeatmap",i.cesiumEvents=[];const r=rt(e,t,i);if(r===void 0)return;const a=u.ref(null),s=u.ref(null),l={minCanvasSize:700,maxCanvasSize:2e3,radiusFactor:60,spacingFactor:1.5,maxOpacity:.8,minOpacity:.1,blur:.85,gradient:{".3":"blue",".65":"yellow",".8":"orange",".95":"red"},xField:"x",yField:"y",valueField:"value",container:void 0},d=u.ref(),h=u.ref(),m=u.ref(),p=u.ref(),g=u.ref(),v=u.ref(!1),b=u.ref();(n=cn(i).proxy.creatingPromise)==null||n.then(()=>{v.value=!0});const P=u.computed(()=>Object.assign({},l,e.options));let w=[];w.push(u.watch(()=>m,M=>{h.value.fabric.uniforms.image=M.value,g.value.options.material.fabric.uniforms.image=M.value},{deep:!0})),w.push(u.watch(()=>e.data,(M,A)=>{if(!i.mounted)return;const D=i.cesiumObject;Array.isArray(M)&&Array.isArray(A)?(_(M,D),m.value=D.getDataURL()):r.reload()},{deep:!0})),w.push(u.watch(()=>[e.max,e.min],M=>{const A=i.cesiumObject;A.setDataMax(M[0]||0),A.setDataMin(M[1]||0),m.value=A.getDataURL()})),w.push(u.watch(()=>[e.type,e.projection,e.rectangle],M=>{r.reload()})),w.push(u.watch(()=>e.options,M=>{const A=i.cesiumObject;A.configure(M),m.value=A.getDataURL()},{deep:!0})),i.createCesiumObject=async()=>{const{WebMercatorProjection:M,GeographicProjection:A}=Cesium;s.value=e.projection==="3857"?new M:new A;const D=S();b.value=T(e.rectangle);const z=document.createElement("div");if(Cesium.defined(D)&&z.setAttribute("id",D),z.setAttribute("style","width: "+b.value.width+"px; height: "+b.value.height+"px; margin: 0px; display: none;"),document.body.appendChild(z),P.value.container=z,e.segments.length){P.value.gradient={};const L=e.max-e.min;for(let U=0;U<e.segments.length;U++)P.value.gradient[`${(e.segments[U][0]-e.min)/L}`]=Ue(e.segments[U][1]).toCssColorString()}const $=KF.create(P.value);return z.children[0].setAttribute("id",D+"-hm"),Array.isArray(e.data)&&(_(e.data,$),h.value={fabric:{type:"Image",uniforms:{image:m.value,transparent:!0}}},g.value={type:"MaterialAppearance",options:{material:{fabric:{type:"Image",uniforms:{image:m.value}}}}}),$},i.unmount=async()=>(document.body.removeChild(i.cesiumObject._config.container),!0);const S=M=>{let A="";const D="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let z=0;z<(M||8);z++)A+=D.charAt(Math.floor(Math.random()*D.length));return A},T=M=>{const A=xo(M),D=s.value.project(new Cesium.Cartographic(A.west,A.south)),z=s.value.project(new Cesium.Cartographic(A.east,A.north)),$={north:z.y,east:z.x,south:D.y,west:D.x};let L=$.east>0&&$.west<0?$.east+Math.abs($.west):Math.abs($.east-$.west),U=$.north>0&&$.south<0?$.north+Math.abs($.south):Math.abs($.north-$.south),Z=1;L>U&&L>P.value.maxCanvasSize?(Z=L/P.value.maxCanvasSize,U/Z<P.value.minCanvasSize&&(Z=U/P.value.minCanvasSize)):U>L&&U>P.value.maxCanvasSize?(Z=U/P.value.maxCanvasSize,U/Z<P.value.minCanvasSize&&(Z=L/P.value.minCanvasSize)):L<U&&L<P.value.minCanvasSize?(Z=L/P.value.minCanvasSize,U/Z>P.value.maxCanvasSize&&(Z=U/P.value.maxCanvasSize)):U<L&&U<P.value.minCanvasSize&&(Z=U/P.value.minCanvasSize,L/Z>P.value.maxCanvasSize&&(Z=L/P.value.maxCanvasSize)),L=L/Z,U=U/Z,Cesium.defined(P.value.radius)||(P.value.radius=L>U?L/P.value.radiusFactor:U/P.value.radiusFactor);const W=(P.value.radius||1)*P.value.spacingFactor,y=$.west,C=$.south;L=Math.round(L+W*2),U=Math.round(U+W*2),$.west-=W*Z,$.east+=W*Z,$.south-=W*Z,$.north+=W*Z;const x=s.value.unproject(new Cesium.Cartesian3($.west,$.south)),B=s.value.unproject(new Cesium.Cartesian3($.east,$.north)),O={north:Cesium.Math.toDegrees(B.latitude),east:Cesium.Math.toDegrees(B.longitude),south:Cesium.Math.toDegrees(x.latitude),west:Cesium.Math.toDegrees(x.longitude)};return d.value=O,{height:U,width:L,factor:Z,xoffset:y,yoffset:C,spacing:W}},_=(M,A)=>{if(M){const{height:D,xoffset:z,yoffset:$,factor:L,spacing:U}=b.value,Z=P.value.xField||"x",W=P.value.yField||"y",y=P.value.valueField||"value",C=[];for(let x=0;x<M.length;x++){const B=M[x];Cesium.defined(B.id)||(B.id=x);const O=s.value.project(Cesium.Cartographic.fromDegrees(B[Z],B[W])),I={[Z]:Math.round((O.x-z)/L+U),[W]:Math.round((O.y-$)/L+U),[y]:void 0};I[W]=D-I[W],(B[y]||B[y]===0)&&(I[y]=B[y]),!(I[y]>e.max||I[y]<e.min)&&C.push(I)}A.setData({min:e.min,max:e.max,data:C}),m.value=A.getDataURL()}};return u.onUnmounted(()=>{w.forEach(M=>M()),w=[]}),Object.assign(i.proxy,{rootRef:a,childRef:p}),()=>{if(v.value){const M=[];return e.type==="entity"&&m.value?M.push(u.h(R2,{ref:p,show:e.show,rectangle:{coordinates:d.value,material:h.value}})):e.type==="primitive"?M.push(u.h(uu,{ref:p,show:e.show,appearance:g.value,releaseGeometryInstances:!1,geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.RectangleGeometry({rectangle:xo(d.value)})})})):e.type==="imagery-layer"&&m.value&&M.push(u.h($2,{ref:p,show:e.show,imageryProvider:new Cesium.SingleTileImageryProvider({url:m.value,rectangle:xo(d.value)})})),u.h("i",{ref:a,class:"vc-overlay-heatmap",style:"display: none !important"},M)}else return u.createCommentVNode("v-if")}}});const Ff={options:{type:Object,required:!0},autoHidden:{type:Boolean,default:!0},customClass:String,coordinateSystem:{type:String,default:"cesium"}};({...Le});var K2=u.defineComponent({name:"VcOverlayEcharts",props:Ff,emits:["beforeLoad","ready","destroyed","mouseenter","mouseleave","click"],setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcOverlayEcharts",n.cesiumEvents=[];const i=rt(e,t,n);if(i===void 0)return;const{$services:r}=i,a=u.ref(!1),s=u.ref(),l=u.reactive({left:"0px",top:"0px",pointerEvents:"none",position:"absolute"});let d;const h=u.ref(!0);let m=[];m.push(u.watch(()=>e.options,T=>{i.reload()})),n.createCesiumObject=async()=>s.value,n.mount=async()=>{const{viewer:T}=r;return a.value=!0,u.nextTick(()=>{bl.registerCoordinateSystem(e.coordinateSystem,v(T)),s.value&&(d=bl.init(s.value),g(),T.scene.postRender.addEventListener(p))}),!0},n.unmount=async()=>{const{viewer:T}=r;return T.scene.postRender.removeEventListener(p),a.value=!1,!0};const p=()=>{if(h.value){const{viewer:T}=r;d.resize({width:T.canvas.width,height:T.canvas.height})}},g=()=>{h.value&&e.options&&d.setOption(e.options)},v=T=>{const _=function(M){this.viewer=M,this._mapOffset=[0,0]};return _.create=function(M){return M.eachSeries(function(A){A.get("coordinateSystem")===e.coordinateSystem&&(A.coordinateSystem=new _(T))}),[]},_.getDimensionsInfo=function(){return["x","y"]},_.dimensions=["x","y"],_.prototype.dimensions=["x","y"],_.prototype.setMapOffset=function(M){this._mapOffset=M},_.prototype.dataToPoint=function(M){const A=[],D=Cesium.Cartesian3.fromDegrees(M[0],M[1]);if(!D)return A;if(e.autoHidden){const $=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(D,new Cesium.Cartesian3),L=this.viewer.camera.direction;if(Cesium.Cartesian3.dot($,L)>=0)return A}const z=this.viewer.scene.cartesianToCanvasCoordinates(D);return z?[z.x-this._mapOffset[0],z.y-this._mapOffset[1]]:A},_.prototype.pointToData=function(M){const A=this._mapOffset,D=T.scene.globe.ellipsoid,z=new Cesium.Cartesian3(M[1]+A[1],M[2]+A[2],0),$=D.cartesianToCartographic(z);return $?[$.longitude,$.latitude]:[0,0]},_.prototype.getviewerRect=function(){const M=this.viewer.canvas;return new bl.graphic.BoundingRect(0,0,M.width,M.height)},_.prototype.getRoamTransform=function(){return bl.matrix.create()},_},b=()=>a.value?u.h("div",{ref:s,class:`vc-echart-container${e.customClass?" "+e.customClass:""}`,style:l,onMouseenter:w,onMouseleave:S,onClick:P},xt(t.slots.default)):u.createCommentVNode("v-if"),P=T=>{t.emit("click",T)},w=T=>{t.emit("mouseenter",T)},S=T=>{t.emit("mouseleave",T)};return u.onUnmounted(()=>{m.forEach(T=>T()),m=[]}),()=>b()}});function eP(){const e=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new e({position:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}),st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,1,0,1,1,0,1])})}),indices:new Uint32Array([3,2,0,0,2,1])})}function gi(e,t){if(Cesium.defined(t)){const n={};n.arrayBufferView=t,e.source=n}return new Cesium.Texture(e)}function $f(e,t,n){return new Cesium.Framebuffer({context:e,colorTextures:[t],depthTexture:n})}function Nf(e){const t={viewport:e.viewport,depthTest:e.depthTest,depthMask:e.depthMask,blending:e.blending};return Cesium.Appearance.getDefaultRenderState(!0,!1,t)}function s8(e){const t={},n=Cesium.Math.mod(e.west,Cesium.Math.TWO_PI),i=Cesium.Math.mod(e.east,Cesium.Math.TWO_PI),r=e.width;let a,s;r>Cesium.Math.THREE_PI_OVER_TWO?(a=0,s=Cesium.Math.TWO_PI):i-n<r?(a=n,s=n+r):(a=n,s=i),t.lon={min:Cesium.Math.toDegrees(a),max:Cesium.Math.toDegrees(s)};const l=e.south,d=e.north,h=e.height,m=h>Cesium.Math.PI/12?h/2:0;let p=Cesium.Math.clampToLatitudeRange(l-m),g=Cesium.Math.clampToLatitudeRange(d+m);return p<-Cesium.Math.PI_OVER_THREE&&(p=-Cesium.Math.PI_OVER_TWO),g>Cesium.Math.PI_OVER_THREE&&(g=Cesium.Math.PI_OVER_TWO),t.lat={min:Cesium.Math.toDegrees(p),max:Cesium.Math.toDegrees(g)},t}var l8=`

precision highp float;

// the size of UV textures: width = lon, height = lat*lev
uniform sampler2D U; // eastward wind
uniform sampler2D V; // northward wind
uniform sampler2D currentParticlesPosition; // (lon, lat, lev)

uniform vec3 dimension; // (lon, lat, lev)
uniform vec3 minimum; // minimum of each dimension
uniform vec3 maximum; // maximum of each dimension
uniform vec3 interval; // interval of each dimension

// used to calculate the wind norm
uniform vec2 uSpeedRange; // (min, max);
uniform vec2 vSpeedRange;
uniform float pixelSize;
uniform float speedFactor;

in vec2 v_textureCoordinates;

vec2 mapPositionToNormalizedIndex2D(vec3 lonLatLev) {
  // ensure the range of longitude and latitude
  lonLatLev.x = mod(lonLatLev.x, 360.0);
  lonLatLev.y = clamp(lonLatLev.y, -90.0, 90.0);

  vec3 index3D = vec3(0.0);
  index3D.x = (lonLatLev.x - minimum.x) / interval.x;
  index3D.y = (lonLatLev.y - minimum.y) / interval.y;
  index3D.z = (lonLatLev.z - minimum.z) / interval.z;

  // the st texture coordinate corresponding to (col, row) index
  // example
  // data array is [0, 1, 2, 3, 4, 5], width = 3, height = 2
  // the content of texture will be
  // t 1.0
  //    |  3 4 5
  //    |
  //    |  0 1 2
  //   0.0------1.0 s

  vec2 index2D = vec2(index3D.x, index3D.z * dimension.y + index3D.y);
  vec2 normalizedIndex2D = vec2(index2D.x / dimension.x, index2D.y / (dimension.y * dimension.z));
  return normalizedIndex2D;
}

float getWindComponent(sampler2D componentTexture, vec3 lonLatLev) {
  vec2 normalizedIndex2D = mapPositionToNormalizedIndex2D(lonLatLev);
  float result = texture(componentTexture, normalizedIndex2D).r;
  return result;
}

float interpolateTexture(sampler2D componentTexture, vec3 lonLatLev) {
  float lon = lonLatLev.x;
  float lat = lonLatLev.y;
  float lev = lonLatLev.z;

  float lon0 = floor(lon / interval.x) * interval.x;
  float lon1 = lon0 + 1.0 * interval.x;
  float lat0 = floor(lat / interval.y) * interval.y;
  float lat1 = lat0 + 1.0 * interval.y;

  float lon0_lat0 = getWindComponent(componentTexture, vec3(lon0, lat0, lev));
  float lon1_lat0 = getWindComponent(componentTexture, vec3(lon1, lat0, lev));
  float lon0_lat1 = getWindComponent(componentTexture, vec3(lon0, lat1, lev));
  float lon1_lat1 = getWindComponent(componentTexture, vec3(lon1, lat1, lev));

  float lon_lat0 = mix(lon0_lat0, lon1_lat0, lon - lon0);
  float lon_lat1 = mix(lon0_lat1, lon1_lat1, lon - lon0);
  float lon_lat = mix(lon_lat0, lon_lat1, lat - lat0);
  return lon_lat;
}

vec3 linearInterpolation(vec3 lonLatLev) {
  // https://en.wikipedia.org/wiki/Bilinear_interpolation
  float u = interpolateTexture(U, lonLatLev);
  float v = interpolateTexture(V, lonLatLev);
  float w = 0.0;
  return vec3(u, v, w);
}

vec2 lengthOfLonLat(vec3 lonLatLev) {
  // unit conversion: meters -> longitude latitude degrees
  // see https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree for detail

  // Calculate the length of a degree of latitude and longitude in meters
  float latitude = radians(lonLatLev.y);

  float term1 = 111132.92;
  float term2 = 559.82 * cos(2.0 * latitude);
  float term3 = 1.175 * cos(4.0 * latitude);
  float term4 = 0.0023 * cos(6.0 * latitude);
  float latLength = term1 - term2 + term3 - term4;

  float term5 = 111412.84 * cos(latitude);
  float term6 = 93.5 * cos(3.0 * latitude);
  float term7 = 0.118 * cos(5.0 * latitude);
  float longLength = term5 - term6 + term7;

  return vec2(longLength, latLength);
}

vec3 convertSpeedUnitToLonLat(vec3 lonLatLev, vec3 speed) {
  vec2 lonLatLength = lengthOfLonLat(lonLatLev);
  float u = speed.x / lonLatLength.x;
  float v = speed.y / lonLatLength.y;
  float w = 0.0;
  vec3 windVectorInLonLatLev = vec3(u, v, w);

  return windVectorInLonLatLev;
}

vec3 calculateSpeedByRungeKutta2(vec3 lonLatLev) {
  // see https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages for detail
  const float h = 0.5;
  float speedScaleFactor = speedFactor * pixelSize;

  vec3 y_n = lonLatLev;
  vec3 f_n = linearInterpolation(lonLatLev);
  vec3 midpoint = y_n + 0.5 * h * convertSpeedUnitToLonLat(y_n, f_n) * speedScaleFactor;
  vec3 speed = h * linearInterpolation(midpoint) * speedScaleFactor;

  return speed;
}

float calculateWindNorm(vec3 speed) {
  vec3 percent = vec3(0.0);
  percent.x = (speed.x - uSpeedRange.x) / (uSpeedRange.y - uSpeedRange.x);
  percent.y = (speed.y - vSpeedRange.x) / (vSpeedRange.y - vSpeedRange.x);
  float norm = length(percent);

  return norm;
}

void main() {
  // texture coordinate must be normalized
  vec3 lonLatLev = texture(currentParticlesPosition, v_textureCoordinates).rgb;
  float speedScaleFactor = speedFactor * pixelSize;
  vec3 speed = calculateSpeedByRungeKutta2(lonLatLev);
  vec3 speedInLonLat = convertSpeedUnitToLonLat(lonLatLev, speed);

  vec4 particleSpeed = vec4(speedInLonLat, calculateWindNorm(speed / speedScaleFactor));
  out_FragColor = particleSpeed;
}
`;const c8=`
uniform sampler2D currentParticlesPosition; // (lon, lat, lev)
uniform sampler2D particlesSpeed; // (u, v, w, norm) Unit converted to degrees of longitude and latitude

in vec2 v_textureCoordinates;

void main() {
  // texture coordinate must be normalized
  vec3 lonLatLev = texture(currentParticlesPosition, v_textureCoordinates).rgb;
  vec3 speed = texture(particlesSpeed, v_textureCoordinates).rgb;
  vec3 nextParticle = lonLatLev + speed;

  out_FragColor = vec4(nextParticle, 0.0);
}
`,u8=`

uniform sampler2D nextParticlesPosition;
uniform sampler2D particlesSpeed; // (u, v, w, norm)

// range (min, max)
uniform vec2 lonRange;
uniform vec2 latRange;

uniform float randomCoefficient; // use to improve the pseudo-random generator
uniform float dropRate; // drop rate is a chance a particle will restart at random position to avoid degeneration
uniform float dropRateBump;

in vec2 v_textureCoordinates;

// pseudo-random generator
const vec3 randomConstants = vec3(12.9898, 78.233, 4375.85453);
const vec2 normalRange = vec2(0.0, 1.0);
float rand(vec2 seed, vec2 range) {
  vec2 randomSeed = randomCoefficient * seed;
  float temp = dot(randomConstants.xy, randomSeed);
  temp = fract(sin(temp) * (randomConstants.z + temp));
  return temp * (range.y - range.x) + range.x;
}

vec3 generateRandomParticle(vec2 seed, float lev) {
  // ensure the longitude is in [0, 360]
  float randomLon = mod(rand(seed, lonRange), 360.0);
  float randomLat = rand(-seed, latRange);

  return vec3(randomLon, randomLat, lev);
}

bool particleOutbound(vec3 particle) {
  return particle.y < -90.0 || particle.y > 90.0;
}

void main() {
  vec3 nextParticle = texture(nextParticlesPosition, v_textureCoordinates).rgb;
  vec4 nextSpeed = texture(particlesSpeed, v_textureCoordinates);
  float speedNorm = nextSpeed.a;
  float particleDropRate = dropRate + dropRateBump * speedNorm;

  vec2 seed1 = nextParticle.xy + v_textureCoordinates;
  vec2 seed2 = nextSpeed.xy + v_textureCoordinates;
  vec3 randomParticle = generateRandomParticle(seed1, nextParticle.z);
  float randomNumber = rand(seed2, normalRange);

  if (randomNumber < particleDropRate || particleOutbound(nextParticle)) {
    out_FragColor = vec4(randomParticle, 1.0); // 1.0 means this is a random particle
  } else {
    out_FragColor = vec4(nextParticle, 0.0);
  }
}
`;class Da{constructor(t){this.commandType=t.commandType,this.geometry=t.geometry,this.attributeLocations=t.attributeLocations,this.primitiveType=t.primitiveType,this.uniformMap=t.uniformMap,this.vertexShaderSource=t.vertexShaderSource,this.fragmentShaderSource=t.fragmentShaderSource,this.rawRenderState=t.rawRenderState,this.framebuffer=t.framebuffer,this.outputTexture=t.outputTexture,this.autoClear=Cesium.defaultValue(t.autoClear,!1),this.preExecute=t.preExecute,this.show=!0,this.commandToExecute=void 0,this.clearCommand=void 0,this.autoClear&&(this.clearCommand=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:this.framebuffer,pass:Cesium.Pass.OPAQUE}))}createCommand(t){switch(this.commandType){case"Draw":{const n=Cesium.VertexArray.fromGeometry({context:t,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW}),i=Cesium.ShaderProgram.fromCache({context:t,attributeLocations:this.attributeLocations,vertexShaderSource:this.vertexShaderSource,fragmentShaderSource:this.fragmentShaderSource}),r=Cesium.RenderState.fromCache(this.rawRenderState);return new Cesium.DrawCommand({owner:this,vertexArray:n,primitiveType:this.primitiveType,uniformMap:this.uniformMap,modelMatrix:Cesium.Matrix4.IDENTITY,shaderProgram:i,framebuffer:this.framebuffer,renderState:r,pass:Cesium.Pass.OPAQUE})}case"Compute":return new Cesium.ComputeCommand({owner:this,fragmentShaderSource:this.fragmentShaderSource,uniformMap:this.uniformMap,outputTexture:this.outputTexture,persists:!0})}}setGeometry(t,n){this.geometry=n;const i=Cesium.VertexArray.fromGeometry({context:t,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.commandToExecute.vertexArray=i}update(t){this.show&&(Cesium.defined(this.commandToExecute)||(this.commandToExecute=this.createCommand(t.context)),Cesium.defined(this.preExecute)&&this.preExecute(),Cesium.defined(this.clearCommand)&&t.commandList.push(this.clearCommand),t.commandList.push(this.commandToExecute))}isDestroyed(){return!1}destroy(){return Cesium.defined(this.commandToExecute)&&(this.commandToExecute.shaderProgram=this.commandToExecute.shaderProgram&&this.commandToExecute.shaderProgram.destroy()),Cesium.destroyObject(this)}}class tP{constructor(t,n,i,r){this.data=n,this.createWindTextures(t,n),this.createParticlesTextures(t,i,r),this.createComputingPrimitives(n,i,r,t)}createWindTextures(t,n){const i={context:t,width:n.dimensions.lon,height:n.dimensions.lat*n.dimensions.lev,pixelFormat:t!=null&&t.webgl2?Cesium.PixelFormat.RED:Cesium.PixelFormat.LUMINANCE,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})};this.windTextures={U:gi(i,n.U.array),V:gi(i,n.V.array)}}createParticlesTextures(t,n,i){const r={context:t,width:n.particlesTextureSize,height:n.particlesTextureSize,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})},a=this.randomizeParticles(n.maxParticles,i),s=new Float32Array(4*n.maxParticles).fill(0);this.particlesTextures={previousParticlesPosition:gi(r,a),currentParticlesPosition:gi(r,a),nextParticlesPosition:gi(r,a),postProcessingPosition:gi(r,a),particlesSpeed:gi(r,s)}}randomizeParticles(t,n){const i=new Float32Array(4*t);for(let r=0;r<t;r++)i[4*r]=Cesium.Math.randomBetween(n.lonRange.x,n.lonRange.y),i[4*r+1]=Cesium.Math.randomBetween(n.latRange.x,n.latRange.y),i[4*r+2]=Cesium.Math.randomBetween(this.data.lev.min,this.data.lev.max),i[4*r+3]=0;return i}destroyParticlesTextures(){Object.keys(this.particlesTextures).forEach(t=>{this.particlesTextures[t].destroy()})}createComputingPrimitives(t,n,i,r){const a=r==null?void 0:r.webgl2;let s=l8;a||(s=s.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),s=s.replace(/texture\(/g,"texture2D("),s=s.replace(/out_FragColor/g,"gl_FragColor"));let l=c8;a||(l=l.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),l=l.replace(/texture\(/g,"texture2D("),l=l.replace(/out_FragColor/g,"gl_FragColor"));let d=u8;a||(d=d.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),d=d.replace(/texture\(/g,"texture2D("),d=d.replace(/out_FragColor/g,"gl_FragColor"));const h=new Cesium.Cartesian3(t.dimensions.lon,t.dimensions.lat,t.dimensions.lev),m=new Cesium.Cartesian3(t.lon.min,t.lat.min,t.lev.min),p=new Cesium.Cartesian3(t.lon.max,t.lat.max,t.lev.max),g=new Cesium.Cartesian3((p.x-m.x)/(h.x-1),(p.y-m.y)/(h.y-1),h.z>1?(p.z-m.z)/(h.z-1):1),v=new Cesium.Cartesian2(t.U.min,t.U.max),b=new Cesium.Cartesian2(t.V.min,t.V.max),P=this;this.primitives={calculateSpeed:new Da({commandType:"Compute",uniformMap:{U:function(){return P.windTextures.U},V:function(){return P.windTextures.V},currentParticlesPosition:function(){return P.particlesTextures.currentParticlesPosition},dimension:function(){return h},minimum:function(){return m},maximum:function(){return p},interval:function(){return g},uSpeedRange:function(){return v},vSpeedRange:function(){return b},pixelSize:function(){return i.pixelSize},speedFactor:function(){return n.speedFactor}},fragmentShaderSource:new Cesium.ShaderSource({sources:[s]}),outputTexture:this.particlesTextures.particlesSpeed,preExecute:function(){const w=P.particlesTextures.previousParticlesPosition;P.particlesTextures.previousParticlesPosition=P.particlesTextures.currentParticlesPosition,P.particlesTextures.currentParticlesPosition=P.particlesTextures.postProcessingPosition,P.particlesTextures.postProcessingPosition=w,P.primitives.calculateSpeed.commandToExecute.outputTexture=P.particlesTextures.particlesSpeed}}),updatePosition:new Da({commandType:"Compute",uniformMap:{currentParticlesPosition:function(){return P.particlesTextures.currentParticlesPosition},particlesSpeed:function(){return P.particlesTextures.particlesSpeed}},fragmentShaderSource:new Cesium.ShaderSource({sources:[l]}),outputTexture:this.particlesTextures.nextParticlesPosition,preExecute:function(){P.primitives.updatePosition.commandToExecute.outputTexture=P.particlesTextures.nextParticlesPosition}}),postProcessingPosition:new Da({commandType:"Compute",uniformMap:{nextParticlesPosition:function(){return P.particlesTextures.nextParticlesPosition},particlesSpeed:function(){return P.particlesTextures.particlesSpeed},lonRange:function(){return i.lonRange},latRange:function(){return i.latRange},randomCoefficient:function(){return Math.random()},dropRate:function(){return n.dropRate},dropRateBump:function(){return n.dropRateBump}},fragmentShaderSource:new Cesium.ShaderSource({sources:[d]}),outputTexture:this.particlesTextures.postProcessingPosition,preExecute:function(){P.primitives.postProcessingPosition.commandToExecute.outputTexture=P.particlesTextures.postProcessingPosition}})}}}const d8=`
in vec2 st;
// it is not normal itself, but used to control lines drawing
in vec3 normal; // (point to use, offset sign, not used component)

uniform sampler2D previousParticlesPosition;
uniform sampler2D currentParticlesPosition;
uniform sampler2D postProcessingPosition;

uniform float particleHeight;

uniform float aspect;
uniform float pixelSize;
uniform float lineWidth;

struct adjacentPoints {
  vec4 previous;
  vec4 current;
  vec4 next;
};

vec3 convertCoordinate(vec3 lonLatLev) {
  // WGS84 (lon, lat, lev) -> ECEF (x, y, z)
  // read https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates for detail

  // WGS 84 geometric constants
  float a = 6378137.0; // Semi-major axis
  float b = 6356752.3142; // Semi-minor axis
  float e2 = 6.69437999014e-3; // First eccentricity squared

  float latitude = radians(lonLatLev.y);
  float longitude = radians(lonLatLev.x);

  float cosLat = cos(latitude);
  float sinLat = sin(latitude);
  float cosLon = cos(longitude);
  float sinLon = sin(longitude);

  float N_Phi = a / sqrt(1.0 - e2 * sinLat * sinLat);
  float h = particleHeight; // it should be high enough otherwise the particle may not pass the terrain depth test

  vec3 cartesian = vec3(0.0);
  cartesian.x = (N_Phi + h) * cosLat * cosLon;
  cartesian.y = (N_Phi + h) * cosLat * sinLon;
  cartesian.z = ((b * b) / (a * a) * N_Phi + h) * sinLat;
  return cartesian;
}

vec4 calculateProjectedCoordinate(vec3 lonLatLev) {
  // the range of longitude in Cesium is [-180, 180] but the range of longitude in the NetCDF file is [0, 360]
  // [0, 180] is corresponding to [0, 180] and [180, 360] is corresponding to [-180, 0]
  lonLatLev.x = mod(lonLatLev.x + 180.0, 360.0) - 180.0;
  vec3 particlePosition = convertCoordinate(lonLatLev);
  vec4 projectedCoordinate = czm_modelViewProjection * vec4(particlePosition, 1.0);
  return projectedCoordinate;
}

vec4 calculateOffsetOnNormalDirection(vec4 pointA, vec4 pointB, float offsetSign) {
  vec2 aspectVec2 = vec2(aspect, 1.0);
  vec2 pointA_XY = (pointA.xy / pointA.w) * aspectVec2;
  vec2 pointB_XY = (pointB.xy / pointB.w) * aspectVec2;

  float offsetLength = lineWidth / 2.0;
  vec2 direction = normalize(pointB_XY - pointA_XY);
  vec2 normalVector = vec2(-direction.y, direction.x);
  normalVector.x = normalVector.x / aspect;
  normalVector = offsetLength * normalVector;

  vec4 offset = vec4(offsetSign * normalVector, 0.0, 0.0);
  return offset;
}

vec4 calculateOffsetOnMiterDirection(adjacentPoints projectedCoordinates, float offsetSign) {
  vec2 aspectVec2 = vec2(aspect, 1.0);

  vec4 PointA = projectedCoordinates.previous;
  vec4 PointB = projectedCoordinates.current;
  vec4 PointC = projectedCoordinates.next;

  vec2 pointA_XY = (PointA.xy / PointA.w) * aspectVec2;
  vec2 pointB_XY = (PointB.xy / PointB.w) * aspectVec2;
  vec2 pointC_XY = (PointC.xy / PointC.w) * aspectVec2;

  vec2 AB = normalize(pointB_XY - pointA_XY);
  vec2 BC = normalize(pointC_XY - pointB_XY);

  vec2 normalA = vec2(-AB.y, AB.x);
  vec2 tangent = normalize(AB + BC);
  vec2 miter = vec2(-tangent.y, tangent.x);

  float offsetLength = lineWidth / 2.0;
  float projection = dot(miter, normalA);
  vec4 offset = vec4(0.0);
  // avoid to use values that are too small
  if (projection > 0.1) {
      float miterLength = offsetLength / projection;
      offset = vec4(offsetSign * miter * miterLength, 0.0, 0.0);
      offset.x = offset.x / aspect;
  } else {
      offset = calculateOffsetOnNormalDirection(PointB, PointC, offsetSign);
  }

  return offset;
}

void main() {
  vec2 particleIndex = st;

  vec3 previousPosition = texture(previousParticlesPosition, particleIndex).rgb;
  vec3 currentPosition = texture(currentParticlesPosition, particleIndex).rgb;
  vec3 nextPosition = texture(postProcessingPosition, particleIndex).rgb;

  float isAnyRandomPointUsed = texture(postProcessingPosition, particleIndex).a +
    texture(currentParticlesPosition, particleIndex).a +
    texture(previousParticlesPosition, particleIndex).a;

  adjacentPoints projectedCoordinates;
  if (isAnyRandomPointUsed > 0.0) {
    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);
    projectedCoordinates.current = projectedCoordinates.previous;
    projectedCoordinates.next = projectedCoordinates.previous;
  } else {
    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);
    projectedCoordinates.current = calculateProjectedCoordinate(currentPosition);
    projectedCoordinates.next = calculateProjectedCoordinate(nextPosition);
  }

  int pointToUse = int(normal.x);
  float offsetSign = normal.y;
  vec4 offset = vec4(0.0);
  // render lines with triangles and miter joint
  // read https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html for detail
  if (pointToUse == -1) {
    offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.previous, projectedCoordinates.current, offsetSign);
    gl_Position = projectedCoordinates.previous + offset;
  } else {
    if (pointToUse == 0) {
      offset = pixelSize * calculateOffsetOnMiterDirection(projectedCoordinates, offsetSign);
      gl_Position = projectedCoordinates.current + offset;
    } else {
      if (pointToUse == 1) {
        offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.current, projectedCoordinates.next, offsetSign);
        gl_Position = projectedCoordinates.next + offset;
      } else {

      }
    }
  }
}
`,h8=`
void main() {
  const vec4 white = vec4(1.0);
  out_FragColor = white;
}
`,m8=`
in vec3 position;
in vec2 st;

out vec2 textureCoordinate;

void main() {
  textureCoordinate = st;
  gl_Position = vec4(position, 1.0);
}
`,p8=`

uniform sampler2D segmentsColorTexture;
uniform sampler2D segmentsDepthTexture;

uniform sampler2D currentTrailsColor;
uniform sampler2D trailsDepthTexture;

uniform float fadeOpacity;

in vec2 textureCoordinate;

void main() {
  vec4 pointsColor = texture(segmentsColorTexture, textureCoordinate);
  vec4 trailsColor = texture(currentTrailsColor, textureCoordinate);

  trailsColor = floor(fadeOpacity * 255.0 * trailsColor) / 255.0; // make sure the trailsColor will be strictly decreased

  float pointsDepth = texture(segmentsDepthTexture, textureCoordinate).r;
  float trailsDepth = texture(trailsDepthTexture, textureCoordinate).r;
  float globeDepth = czm_unpackDepth(texture(czm_globeDepthTexture, textureCoordinate));

  out_FragColor = vec4(0.0);
  if (pointsDepth < globeDepth) {
    out_FragColor = out_FragColor + pointsColor;
  }
  if (trailsDepth < globeDepth) {
    out_FragColor = out_FragColor + trailsColor;
  }
  gl_FragDepth = min(pointsDepth, trailsDepth);
}
`,f8=`
uniform sampler2D trailsColorTexture;
uniform sampler2D trailsDepthTexture;

in vec2 textureCoordinate;

void main() {
  vec4 trailsColor = texture(trailsColorTexture, textureCoordinate);
  float trailsDepth = texture(trailsDepthTexture, textureCoordinate).r;
  float globeDepth = czm_unpackDepth(texture(czm_globeDepthTexture, textureCoordinate));

  if (trailsDepth < globeDepth) {
    out_FragColor = trailsColor;
  } else {
    out_FragColor = vec4(0.0);
  }
}
`;class nP{constructor(t,n,i,r,a){this.createRenderingTextures(t,n),this.createRenderingFramebuffers(t),this.createRenderingPrimitives(t,i,r,a)}createRenderingTextures(t,n){const i={context:t,width:t.drawingBufferWidth,height:t.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_BYTE},r={context:t,width:t.drawingBufferWidth,height:t.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.DEPTH_COMPONENT,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_INT};this.textures={segmentsColor:gi(i),segmentsDepth:gi(r),currentTrailsColor:gi(i),currentTrailsDepth:gi(r),nextTrailsColor:gi(i),nextTrailsDepth:gi(r)}}createRenderingFramebuffers(t){this.framebuffers={segments:$f(t,this.textures.segmentsColor,this.textures.segmentsDepth),currentTrails:$f(t,this.textures.currentTrailsColor,this.textures.currentTrailsDepth),nextTrails:$f(t,this.textures.nextTrailsColor,this.textures.nextTrailsDepth)}}createSegmentsGeometry(t){const n=[];for(let p=0;p<t.particlesTextureSize;p++)for(let g=0;g<t.particlesTextureSize;g++)for(let v=0;v<6;v++)n.push(p/t.particlesTextureSize),n.push(g/t.particlesTextureSize);const i=new Float32Array(n),r=[],a=[-1,0,1],s=[-1,1];for(let p=0;p<t.maxParticles;p++)for(let g=0;g<a.length;g++)for(let v=0;v<s.length;v++)r.push(a[g]),r.push(s[v]),r.push(0);const l=new Float32Array(r),d=12*t.maxParticles,h=new Uint32Array(d);for(let p=0,g=0,v=0;p<t.maxParticles;p++)h[g++]=v+0,h[g++]=v+1,h[g++]=v+2,h[g++]=v+2,h[g++]=v+1,h[g++]=v+3,h[g++]=v+2,h[g++]=v+4,h[g++]=v+3,h[g++]=v+4,h[g++]=v+3,h[g++]=v+5,v+=6;const m=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new m({st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:i}),normal:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:l})}),indices:h})}createRenderingPrimitives(t,n,i,r){const a=this,s=t==null?void 0:t.webgl2;let l=d8;s||(l=l.replace("in vec2 st;","attribute vec2 st;"),l=l.replace("in vec3 normal;","attribute vec3 normal;"),l=l.replace(/texture\(/g,"texture2D("));let d=h8;s||(d=d.replace(/out_FragColor/g,"gl_FragColor"));let h=m8;s||(h=h.replace("out vec2 textureCoordinate;","varying vec2 textureCoordinate;"),h=h.replace("in vec3 position;","attribute vec3 position;"),h=h.replace("in vec2 st;","attribute vec2 st;"));let m=p8;s||(m=m.replace("in vec2 textureCoordinate;","varying vec2 textureCoordinate;"),m=m.replace(/out_FragColor/g,"gl_FragColor"),m=m.replace(/gl_FragDepth/g,"gl_FragDepthEXT"),m=m.replace(/texture\(/g,"texture2D("));let p=f8;s||(p=p.replace("in vec2 textureCoordinate;","varying vec2 textureCoordinate;"),p=p.replace(/out_FragColor/g,"gl_FragColor"),p=p.replace(/texture\(/g,"texture2D(")),this.primitives={segments:new Da({commandType:"Draw",attributeLocations:{st:0,normal:1},geometry:this.createSegmentsGeometry(n),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{previousParticlesPosition:function(){return r.particlesTextures.previousParticlesPosition},currentParticlesPosition:function(){return r.particlesTextures.currentParticlesPosition},postProcessingPosition:function(){return r.particlesTextures.postProcessingPosition},aspect:function(){return t.drawingBufferWidth/t.drawingBufferHeight},pixelSize:function(){return i.pixelSize},lineWidth:function(){return n.lineWidth},particleHeight:function(){return n.particleHeight}},vertexShaderSource:new Cesium.ShaderSource({sources:[l]}),fragmentShaderSource:new Cesium.ShaderSource({sources:[d]}),rawRenderState:Nf({viewport:void 0,depthTest:{enabled:!0},depthMask:!0}),framebuffer:this.framebuffers.segments,autoClear:!0}),trails:new Da({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:eP(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{segmentsColorTexture:function(){return a.textures.segmentsColor},segmentsDepthTexture:function(){return a.textures.segmentsDepth},currentTrailsColor:function(){return a.framebuffers.currentTrails.getColorTexture(0)},trailsDepthTexture:function(){return a.framebuffers.currentTrails.depthTexture},fadeOpacity:function(){return n.fadeOpacity}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[h]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[m]}),rawRenderState:Nf({viewport:void 0,depthTest:{enabled:!0,func:Cesium.DepthFunction.ALWAYS},depthMask:!0}),framebuffer:this.framebuffers.nextTrails,autoClear:!0,preExecute:function(){const g=a.framebuffers.currentTrails;a.framebuffers.currentTrails=a.framebuffers.nextTrails,a.framebuffers.nextTrails=g,a.primitives.trails.commandToExecute.framebuffer=a.framebuffers.nextTrails,a.primitives.trails.clearCommand.framebuffer=a.framebuffers.nextTrails}}),screen:new Da({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:eP(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{trailsColorTexture:function(){return a.framebuffers.nextTrails.getColorTexture(0)},trailsDepthTexture:function(){return a.framebuffers.nextTrails.depthTexture}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[h]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[p]}),rawRenderState:Nf({viewport:void 0,depthTest:{enabled:!1},depthMask:!0,blending:{enabled:!0}}),framebuffer:void 0})}}}class g8{constructor(t,n,i,r){this.context=t,this.data=n,this.particleSystemOptions=i,this.viewerParameters=r,this.particlesComputing=new tP(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new nP(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}canvasResize(t){this.particlesComputing.destroyParticlesTextures(),Object.keys(this.particlesComputing.windTextures).forEach(n=>{this.particlesComputing.windTextures[n].destroy()}),Object.keys(this.particlesRendering.framebuffers).forEach(n=>{this.particlesRendering.framebuffers[n].destroy()}),this.context=t,this.particlesComputing=new tP(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new nP(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}clearFramebuffers(){const t=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:void 0,pass:Cesium.Pass.OPAQUE});Object.keys(this.particlesRendering.framebuffers).forEach(n=>{t.framebuffer=this.particlesRendering.framebuffers[n],t.execute(this.context)})}refreshParticles(t){if(this.clearFramebuffers(),this.particlesComputing.destroyParticlesTextures(),this.particlesComputing.createParticlesTextures(this.context,this.particleSystemOptions,this.viewerParameters),t){const n=this.particlesRendering.createSegmentsGeometry(this.particleSystemOptions);this.particlesRendering.primitives.segments.geometry=n;const i=Cesium.VertexArray.fromGeometry({context:this.context,geometry:n,attributeLocations:this.particlesRendering.primitives.segments.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.particlesRendering.primitives.segments.commandToExecute.vertexArray=i}}applyParticleSystemOptions(t){let n=!1;this.particleSystemOptions.maxParticles!==t.maxParticles&&(n=!0),Object.keys(t).forEach(i=>{this.particleSystemOptions[i]=t[i]}),this.refreshParticles(n)}applyViewerParameters(t){Object.keys(t).forEach(n=>{this.viewerParameters[n]=t[n]}),this.refreshParticles(!1)}}function iP(e,t){const n=e-t*Math.floor(e/t);return n===t?0:n}function du(e){return typeof e=="string"&&e.indexOf("/")>=0&&(e=e.split("/")),Z6(e)&&e.length===2?e[0]/e[1]:+e}function v8(e,t){const n=Math.floor(e.size),i=Math.floor(t.size),r=n*i,a=du(e.delta),s=du(t.delta),l=du(e.start),d=du(t.start),h=Math.floor(n*a)>=360;function m(){return{width:n,height:i}}function p(){return h}function g(P,w){for(let S=w||0;S<r;S++){const T=S%n,_=Math.floor(S/n),M=l+T*a,A=d+_*s;if(P(M,A,S))return S+1}return NaN}function v(P,w){if(P===P&&w===w){const S=iP(P-l,360)/a,T=(w-d)/s,_=Math.round(S),M=Math.round(T);if(0<=M&&M<i&&0<=_&&(_<n||_===n&&h)){const A=M*n+_;return _===n?A-n:A}}return NaN}function b(P,w){if(P===P&&w===w){const S=iP(P-l,360)/a,T=(w-d)/s,_=Math.floor(S),M=Math.floor(T),A=_+1,D=M+1,z=S-_,$=T-M;if(0<=M&&D<i&&0<=_&&(A<n||A===n&&h)){const L=M*n+_;let U=L+1;const Z=L+n;let W=Z+1;return A===n&&(U-=n,W-=n),[L,U,Z,W,z,$]}}return[NaN,NaN,NaN,NaN,NaN,NaN]}return{dimensions:m,isCylindrical:p,forEach:g,closest:v,closest4:b}}const jf={show:{type:Boolean,default:!0},data:{type:Object,required:!0},options:{type:Object,default:()=>({maxParticles:64*64,particleHeight:100,fadeOpacity:.996,dropRate:.003,dropRateBump:.01,speedFactor:1,lineWidth:4})},viewerParameters:Object};var rP=u.defineComponent({name:"VcOverlayWindmap",props:jf,emits:Le,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcOverlayHtml",n.cesiumEvents=[];const i=rt(e,t,n);if(i===void 0)return;const{$services:r}=i;let a,s,l,d;const h=u.computed(()=>{const M=Math.ceil(Math.sqrt(e.options.maxParticles)),A=M*M;return{particlesTextureSize:M,maxParticles:A,particleHeight:e.options.particleHeight,fadeOpacity:e.options.fadeOpacity,dropRate:e.options.dropRate,dropRateBump:e.options.dropRateBump,speedFactor:e.options.speedFactor,lineWidth:e.options.lineWidth}});let m=[];m.push(u.watch(()=>e.show,M=>{l.show=M})),m.push(u.watch(()=>e.data,M=>{n.proxy.reload()})),m.push(u.watch(()=>h.value,M=>{const A=n.cesiumObject;A&&A.applyParticleSystemOptions(M)},{deep:!0})),m.push(u.watch(()=>e.viewerParameters,M=>{T(),n.cesiumObject.applyViewerParameters(a)},{deep:!0})),n.createCesiumObject=async()=>{const{viewer:M}=r;l=new Cesium.PrimitiveCollection,s=new Cesium.BoundingSphere(Cesium.Cartesian3.ZERO,.99*6378137),a={lonRange:new Cesium.Cartesian2,latRange:new Cesium.Cartesian2,pixelSize:0};const A={start:e.data.lon.array[0],delta:e.data.lon.delta,size:e.data.lon.array.length},D={start:e.data.lat.array[0],delta:e.data.lat.delta,size:e.data.lat.array.length};return d=v8(A,D),T(),new g8(M.scene.context,e.data,h.value,a)},n.mount=async()=>{const{viewer:M}=r;M.scene.primitives.add(l);const A=M.scene,D=A.camera;return p(),D.moveStart.addEventListener(v),D.moveEnd.addEventListener(b),window.addEventListener("resize",w),A.preRender.addEventListener(S),!0},n.unmount=async()=>{g();const{viewer:M}=r,A=M.scene,D=A.camera;return g(),M.scene.primitives.remove(l),D.moveStart.removeEventListener(v),D.moveEnd.removeEventListener(b),window.removeEventListener("resize",w),A.preRender.removeEventListener(S),!0};const p=()=>{const M=n.cesiumObject;l.add(M.particlesComputing.primitives.calculateSpeed),l.add(M.particlesComputing.primitives.updatePosition),l.add(M.particlesComputing.primitives.postProcessingPosition),l.add(M.particlesRendering.primitives.segments),l.add(M.particlesRendering.primitives.trails),l.add(M.particlesRendering.primitives.screen)},g=()=>{const M=n.cesiumObject;l.remove(M.particlesComputing.primitives.calculateSpeed),l.remove(M.particlesComputing.primitives.updatePosition),l.remove(M.particlesComputing.primitives.postProcessingPosition),l.remove(M.particlesRendering.primitives.segments),l.remove(M.particlesRendering.primitives.trails),l.remove(M.particlesRendering.primitives.screen)},v=()=>{l.show=!1},b=()=>{T(),n.cesiumObject.applyViewerParameters(a),l.show=!0};let P=!1;const w=()=>{P=!0,l.show=!1,l.removeAll()},S=()=>{if(P){const{viewer:M}=r,A=M.scene;n.cesiumObject.canvasResize(A.context),P=!1,p(),l.show=!0}},T=()=>{const{viewer:M}=r,A=M.scene,D=A.camera;if(Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.latRange)&&Cesium.defined(e.viewerParameters.lonRange))a.lonRange=kt(e.viewerParameters.lonRange),a.latRange=kt(e.viewerParameters.latRange);else{const $=D.computeViewRectangle(A.globe.ellipsoid),L=s8($);a.lonRange.x=L.lon.min,a.lonRange.y=L.lon.max,a.latRange.x=L.lat.min,a.latRange.y=L.lat.max}const z=Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.pixelSize)?e.viewerParameters.pixelSize:D.getPixelSize(s,A.drawingBufferWidth,A.drawingBufferHeight);z>0&&(a.pixelSize=z)},_=(M,A)=>{const D=d.closest(M,A);if(Cesium.defined(D))return[e.data.U.array[D],e.data.V.array[D]]};return u.onUnmounted(()=>{m.forEach(M=>M()),m=[]}),Object.assign(n.proxy,{getNearestUV:_}),()=>{var M;return u.createCommentVNode(pe(((M=n.proxy)==null?void 0:M.$options.name)||"v-if"))}}});const kf={...qe,name:{type:String,default:"__vc__overlay__dynamic__"},startTime:{type:[Object,String,Date]},stopTime:{type:[Object,String,Date]},currentTime:{type:[Object,String,Date]},clockRange:{type:Number,default:0},clockStep:{type:Number,default:1},shouldAnimate:{type:Boolean,default:!0},canAnimate:{type:Boolean,default:!0},multiplier:{type:Number,default:1},dynamicOverlays:{type:Array,default:()=>[]},defaultInterval:{type:Number,default:3},stopArrivedFlag:{type:String,default:"time"},positionPrecision:{type:Number,default:1e-7},timePrecision:{type:Number,default:.01}},y8={...Le,"update:currentTime":e=>!0,"update:shouldAnimate":e=>!0,"update:canAnimate":e=>!0,"update:clockRange":e=>!0,"update:clockStep":e=>!0,"update:multiplier":e=>!0,"update:startTime":e=>!0,"update:stopTime":e=>!0,onStop:e=>!0,stopArrived:e=>!0};var oP=u.defineComponent({name:"VcOverlayDynamic",props:kf,emits:y8,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcOverlayDynamic",n.cesiumEvents=[];const i=rt(e,t,n);if(i===void 0)return;const{$services:r}=i,a=u.ref([]),s=u.ref({}),{emit:l}=t,d=u.ref(null),h=u.ref(null);let m,p=[];p.push(u.watch(()=>e.show,_=>{const M=n.cesiumObject;M&&(M.show=_)})),p.push(u.watch(()=>e.name,_=>{const M=n.cesiumObject;M&&(M.name=_)})),p.push(u.watch(()=>e.startTime,_=>{const{viewer:M}=r;Cesium.defined(M)&&_&&(M.clock.startTime=Zi(_))})),p.push(u.watch(()=>e.stopTime,_=>{const{viewer:M}=r;Cesium.defined(M)&&_&&(M.clock.stopTime=Zi(_))})),p.push(u.watch(()=>e.currentTime,_=>{const{viewer:M}=r;Cesium.defined(M)&&_&&(M.clock.currentTime=Zi(_))})),p.push(u.watch(()=>e.multiplier,_=>{const{viewer:M}=r;Cesium.defined(M)&&(M.clock.multiplier=_)})),p.push(u.watch(()=>e.clockStep,_=>{const{viewer:M}=r;Cesium.defined(M)&&(M.clock.clockStep=_)})),p.push(u.watch(()=>e.clockRange,_=>{const{viewer:M}=r;Cesium.defined(M)&&(M.clock.clockRange=_)})),p.push(u.watch(()=>e.canAnimate,_=>{const{viewer:M}=r;Cesium.defined(M)&&(M.clock.canAnimate=_)})),p.push(u.watch(()=>e.shouldAnimate,_=>{const{viewer:M}=r;Cesium.defined(M)&&(M.clock.shouldAnimate=_)})),p.push(u.watch(()=>ut(e.dynamicOverlays),(_,M)=>{if(!n.mounted)return;const A=n.cesiumObject;if(_.length===M.length){const D=[];for(let z=0;z<_.length;z++){const $=_[z],L=M[z],U=(Z,W)=>{if(Z!=="nodeTransformations"&&Z!=="_definitionChanged")return W};JSON.stringify($,U)!==JSON.stringify(L,U)&&D.push({newOptions:$,oldOptions:L})}D.forEach(z=>{const $=A.entities.getById(z.oldOptions.id);if(Cesium.defined($)){if(z.oldOptions.id===z.newOptions.id)$&&Object.keys(z.newOptions).forEach(U=>{z.oldOptions[U]!==z.newOptions[U]&&($[U]=i.transformProp(U,z.newOptions[U]))});else if($){A.entities.remove($),OC(a.value,Z=>Z.id===$.id);const U=z.newOptions;v(A,[U])}const L=xC(a.value,U=>U.id===$.id);if(Cesium.defined(L)){const U=z.oldOptions.sampledPositions,Z=z.newOptions.sampledPositions,W=Nt(Z,U,"id");Nt(U,Z,"id").forEach(y=>{y.time&&L._sampledPosition.removeSample(y.time)}),W.forEach(y=>{y.time?L.addPosition(y.position,y.time):y.interval&&L.addPosition(y.position,y.interval||e.defaultInterval)})}}})}else{const D=Nt(_,M,"id"),z=Nt(M,_,"id"),$=[];for(let L=0;L<z.length;L++){const U=A.entities.getById(z[L].id);$.push(U)}$.forEach(L=>{A.entities.remove(L),OC(a.value,U=>U.id===L.id)}),v(A,D)}},{deep:!0})),n.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name);const g=_=>{let M=ze(n,"update:currentTime");!Zi(e.currentTime).equalsEpsilon(_.currentTime,.001)&&M&&l("update:currentTime",_.currentTime),M=ze(n,"update:shouldAnimate"),e.shouldAnimate!==_.shouldAnimate&&M&&l("update:shouldAnimate",_.shouldAnimate),M=ze(n,"update:canAnimate"),e.canAnimate!==_.canAnimate&&M&&l("update:canAnimate",_.canAnimate),M=ze(n,"update:clockRange"),e.clockRange!==_.clockRange&&M&&l("update:clockRange",_.clockRange),M=ze(n,"update:clockStep"),e.clockStep!==_.clockStep&&M&&l("update:clockStep",_.clockStep),M=ze(n,"update:multiplier"),e.multiplier!==_.multiplier&&M&&l("update:multiplier",_.multiplier),M=ze(n,"update:startTime"),!Zi(e.startTime).equalsEpsilon(_.startTime,.001)&&M&&l("update:startTime",_.startTime),M=ze(n,"update:stopTime"),!Zi(e.stopTime).equalsEpsilon(_.stopTime,.001)&&M&&l("update:stopTime",_.stopTime),b(_);const{JulianDate:A,Cartesian3:D}=Cesium;if(M=ze(n,"stopArrived"),M&&e.shouldAnimate)for(let z=0;z<a.value.length;z++){const $=a.value[z],L=$._sampledPosition.getValue(_.currentTime),U=e.dynamicOverlays[z];for(let Z=0;Z<U.sampledPositions.length;Z++){const W=U.sampledPositions[Z],y=yt(W.position),C=Zi(W.time),x=D.equalsEpsilon(L,y,e.positionPrecision),B=A.equalsEpsilon(_.currentTime,C,e.timePrecision);let O=!1;switch(e.stopArrivedFlag){case"time":O=B;break;case"position":O=x;break;case"both":O=B&&x;break;case"or":O=B||x;break}if(O){l("stopArrived",{overlay:$,position:W,offset:m,clock:_,indexOverlay:z,indexPosition:Z});break}}}},v=(_,M)=>{for(let A=0;A<M.length;A++){const D=M[A],z=i.transformProps(D),$=new bc(z);a.value.push($);const L=_.entities.add($._entity);z.sampledPositions.forEach(U=>{U.time?$.addPosition(U.position,U.time):U.interval&&(U.time=$.addPosition(U.position,U.interval||e.defaultInterval))}),D.id!==L.id&&(D.id=L.id),qi(L,z,["id"])}};n.mount=async()=>{const{viewer:_}=r,M=n.cesiumObject;return M.show=e.show,v(M,e.dynamicOverlays),_.dataSources.add(M).then(()=>{s.value.startTime=_.clock.startTime,s.value.stopTime=_.clock.stopTime,s.value.currentTime=_.clock.currentTime,s.value.multiplier=_.clock.multiplier,s.value.clockStep=_.clock.clockStep,s.value.clockRange=_.clock.clockRange,s.value.canAnimate=_.clock.canAnimate,s.value.shouldAnimate=_.clock.shouldAnimate,e.startTime&&(_.clock.startTime=Zi(e.startTime)),e.stopTime&&(_.clock.stopTime=Zi(e.stopTime)),e.currentTime&&(_.clock.currentTime=Zi(e.currentTime)),_.clock.multiplier=e.multiplier,_.clock.clockStep=e.clockStep,_.clock.clockRange=e.clockRange,_.clock.canAnimate=!1,_.clock.shouldAnimate=e.shouldAnimate,_.clock.onTick.addEventListener(g);const A=ze(n,"onStop");return A&&_.clock.onStop.addEventListener(A),!0})},n.unmount=async()=>{const{viewer:_}=r,M=n.cesiumObject;_.dataSources.remove(M,!0),_.clock.startTime=s.value.startTime,_.clock.stopTime=s.value.stopTime,_.clock.multiplier=s.value.multiplier,_.clock.clockStep=s.value.clockStep,_.clock.clockRange=s.value.clockRange,_.clock.canAnimate=s.value.canAnimate,_.clock.shouldAnimate=s.value.shouldAnimate,a.value.length=0,_.clock.onTick.removeEventListener(g);const A=ze(n,"onStop");return A&&_.clock.onStop.removeEventListener(A),d.value&&(_.trackedEntity=void 0),!0};const b=_=>{var M,A,D,z,$,L,U,Z;if(h.value&&d.value){const{viewer:W}=r;if(Cesium.JulianDate.greaterThan(_.currentTime,_.stopTime)){d.value=null;return}const y=d.value._sampledPosition.getValue(_.currentTime);let C=new Cesium.HeadingPitchRange;switch(h.value.mode){case"TP":C.heading=0,C.pitch=((A=(M=h.value)==null?void 0:M.offset)==null?void 0:A.pitch)||Cesium.Math.toRadians(-90),C.range=((z=(D=h.value)==null?void 0:D.offset)==null?void 0:z.range)||1e3;break;case"FP":{const x=Cesium.JulianDate.addSeconds(_.currentTime,.016666666666666666,new Cesium.JulianDate),B=d.value._sampledPosition.getValue(x)||y;y.equals(B)&&m?C=m:(C.heading=Cesium.Math.toRadians(UC(y,B)),C.pitch=(((L=($=h.value)==null?void 0:$.offset)==null?void 0:L.pitch)||Cesium.Math.toRadians(-45))+HC(y,B),C.range=((Z=(U=h.value)==null?void 0:U.offset)==null?void 0:Z.range)||500);break}case"CUSTOM":C=lh(h.value.offset)}m=C,W.camera.lookAt(y,C)}},P=(_,M)=>{var A;const{viewer:D}=r;if(M=M||{mode:h.value===null?"FP":"FREE"},M.mode==="FREE"){D.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),d.value&&(D.trackedEntity=void 0,d.value=null,h.value=null);return}d.value=w(_),D.trackedEntity=u.toRaw(d.value._entity),M.mode==="TRACKED"?((A=M==null?void 0:M.viewFrom)!=null&&A.length&&(D.trackedEntity.viewFrom=new Cesium.Cartesian3(M.viewFrom[0],M.viewFrom[1],M.viewFrom[2])),h.value=null):h.value=M},w=_=>_ instanceof bc?_:typeof _=="string"?xC(a.value,M=>M.id===_):typeof _=="number"?a.value[_]:a.value[0],S=(_,M)=>{const{viewer:A}=r;d.value&&(A.trackedEntity=void 0,d.value=null);let D;if(Cesium.defined(_))if(Array.isArray(_))if(_.length){const z=[];_.forEach($=>{const L=u.toRaw(w($)._entity);z.push(L)}),D=z}else D=n.cesiumObject;else D=u.toRaw(w(_)._entity);else D=n.cesiumObject;return M=M||{duration:3},Cesium.defined(M.offset)&&(M.offset=lh(M.offset)),A.flyTo(D,M)},T=(_,M)=>{const{viewer:A}=r;d.value&&(A.trackedEntity=void 0,d.value=null);let D;if(Cesium.defined(_))if(Array.isArray(_))if(_.length){const z=[];_.forEach($=>{const L=u.toRaw(w($)._entity);z.push(L)}),D=z}else D=n.cesiumObject;else D=u.toRaw(w(_)._entity);else D=n.cesiumObject;return A.zoomTo(D,Cesium.defined(M)?lh(M):void 0)};return u.onUnmounted(()=>{p.forEach(_=>_()),p=[]}),Object.assign(n.proxy,{getOverlays:()=>a.value,getOverlay:w,trackOverlay:P,zoomToOverlay:T,flyToOverlay:S}),()=>{var _;return u.createCommentVNode(pe(((_=n.proxy)==null?void 0:_.$options.name)||""))}}});const zf={...xs,...uc,...qe,..._t,...Ti,...er,billboards:{type:Array,default:()=>[]}};var aP=u.defineComponent({name:"VcCollectionBillboard",props:zf,emits:mi,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="BillboardCollection";const i=Yr(e,t,n);let r=[];r.push(u.watch(()=>ut(e.billboards),(s,l)=>{if(!n.mounted)return;const d=n.cesiumObject;if(s.length===l.length){const h=[];for(let m=0;m<s.length;m++){const p=s[m],g=l[m];JSON.stringify(p)!==JSON.stringify(g)&&h.push({newOptions:p,oldOptions:g})}h.forEach(m=>{const p=d._billboards.find(g=>(g==null?void 0:g.id)===m.oldOptions.id);p&&Object.keys(m.newOptions).forEach(g=>{m.oldOptions[g]!==m.newOptions[g]&&(p[g]=i==null?void 0:i.transformProp(g,m.newOptions[g]))})})}else{const h=Nt(s,l,"id"),m=Nt(l,s,"id"),p=[];for(let g=0;g<m.length;g++){const v=d._billboards.find(b=>b.id===m[g].id);v&&p.push(v)}p.forEach(g=>{d.remove(g)}),a(d,h)}},{deep:!0})),n.alreadyListening.push("billboards");const a=(s,l)=>{for(let d=0;d<l.length;d++){const h=l[d];h.id=Cesium.defined(h.id)?h.id:Cesium.createGuid();const m=i==null?void 0:i.transformProps(h),p=s.add(m);qi(p,m)}};return n.createCesiumObject=async()=>{const s=i==null?void 0:i.transformProps(e),l=new Cesium.BillboardCollection(s);return a(l,e.billboards),l},u.onUnmounted(()=>{r.forEach(s=>s()),r=[]}),()=>{var s,l;return t.slots.default?u.h("i",{class:pe(((s=n.proxy)==null?void 0:s.$options.name)||""),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(((l=n.proxy)==null?void 0:l.$options.name)||""))}}});const Gf={...dh,...Tr,...Mo,...Zt,...hs,...xn,...$n,...ms,...Qr,...jl,...aa,...ps,...Oo,...Ir,...So,...To,...qe,...kl,...Io,...fs,...Qi,..._t};var sP=u.defineComponent({name:"VcBillboard",props:Gf,emits:mi,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="Billboard",Xr(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const Uf={brightness:{type:Number,default:1},...Tr,maximumSize:{type:Object,watcherOptions:{cesiumObjectBuilder:yt}},...Oo,scale:{type:Object,watcherOptions:{cesiumObjectBuilder:kt}},...qe,slice:{type:Number,default:-1}};var hu=u.defineComponent({name:"VcCumulusCloud",props:Uf,emits:mi,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="CumulusCloud",Xr(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const Hf={...qe,noiseDetail:{type:Number,default:16},noiseOffset:{type:Object},debugBillboards:{type:Boolean,default:!1},debugEllipsoids:{type:Boolean,default:!1},clouds:{type:Array,default:()=>[]}};var lP=u.defineComponent({name:"VcCollectionCloud",props:Hf,emits:Le,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="CloudCollection";const r=Yr(e,t,i);if(r===void 0)return;i.alreadyListening.push("clouds");let a=[];a.push(u.watch(()=>ut(e.clouds),(d,h)=>{if(!i.mounted)return;const m=i.cesiumObject;if(d.length===h.length){const p=[];for(let g=0;g<d.length;g++){const v=d[g],b=h[g];JSON.stringify(v)!==JSON.stringify(b)&&p.push({newOptions:v,oldOptions:b})}p.forEach(g=>{const v=m._clouds.find(b=>b.id===g.oldOptions.id);v&&Object.keys(g.newOptions).forEach(b=>{g.oldOptions[b]!==g.newOptions[b]&&(v[b]=r.transformProp(b,g.newOptions[b]))})})}else{const p=Nt(d,h,"id"),g=Nt(h,d,"id"),v=[];for(let b=0;b<g.length;b++){const P=m._clouds.find(w=>w.id===g[b].id);P&&v.push(P)}v.forEach(b=>{m.remove(b)}),s(m,p)}},{deep:!0}));const s=(d,h)=>{for(let m=0;m<h.length;m++){const p=h[m];p.id=Cesium.defined(p.id)?p.id:Cesium.createGuid();const g=r.transformProps(p,hu.props),v=d.add(g);qi(v,g)}};i.createCesiumObject=async()=>{const d=r.transformProps(e,hu.props),h=new Cesium.CloudCollection(d);return s(h,e.clouds),h},u.onUnmounted(()=>{a.forEach(d=>d()),a=[]});const l=((n=i.proxy)==null?void 0:n.$options.name)||"";return()=>t.slots.default?u.h("i",{class:pe(l),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(l))}});const Wf={...Ti,...er,...xs,...uc,...qe,..._t,labels:{type:Array,default:()=>[]}};var cP=u.defineComponent({name:"VcCollectionLabel",props:Wf,emits:mi,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="LabelCollection";const r=Yr(e,t,i);if(r===void 0)return;i.alreadyListening.push("labels");let a=[];a.push(u.watch(()=>ut(e.labels),(d,h)=>{if(!i.mounted)return;const m=i.cesiumObject;if(d.length===h.length){const p=[];for(let g=0;g<d.length;g++){const v=d[g],b=h[g];JSON.stringify(v)!==JSON.stringify(b)&&p.push({newOptions:v,oldOptions:b})}p.forEach(g=>{const v=m._labels.find(b=>b.id===g.oldOptions.id);v&&Object.keys(g.newOptions).forEach(b=>{g.oldOptions[b]!==g.newOptions[b]&&(v[b]=r.transformProp(b,g.newOptions[b]))})})}else{const p=Nt(d,h,"id"),g=Nt(h,d,"id"),v=[];for(let b=0;b<g.length;b++){const P=m._labels.find(w=>w.id===g[b].id);P&&v.push(P)}v.forEach(b=>{m.remove(b)}),s(m,p)}},{deep:!0}));const s=(d,h)=>{for(let m=0;m<h.length;m++){const p=h[m];p.id=Cesium.defined(p.id)?p.id:Cesium.createGuid();const g=r.transformProps(p),v=d.add(g);qi(v,g)}};i.createCesiumObject=async()=>{const d=r.transformProps(e),h=new Cesium.LabelCollection(d);return s(h,e.labels),h},u.onUnmounted(()=>{a.forEach(d=>d()),a=[]});const l=((n=i.proxy)==null?void 0:n.$options.name)||"";return()=>t.slots.default?u.h("i",{class:pe(l),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(l))}});const qf={...gh,...vh,...Mo,...Zt,...hs,...yh,...mh,...$n,...ms,...Qr,...Ln,...Nn,...aa,...ps,...Oo,...So,...To,...qe,...fh,...ph,...hh,totalScale:{type:Number,default:1},...Io,...fs,..._t};var uP=u.defineComponent({name:"VcLabel",props:qf,emits:mi,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="Label",Xr(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const Zf={...Ti,...er,...uc,...qe,..._t,points:{type:Array,default:()=>[]}};var dP=u.defineComponent({name:"VcCollectionPoint",props:Zf,emits:mi,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="PointPrimitiveCollection";const i=Yr(e,t,n);if(i===void 0)return;n.alreadyListening.push("points");let r=[];r.push(u.watch(()=>ut(e.points),(s,l)=>{if(!n.mounted)return;const d=n.cesiumObject;if(s.length===l.length){const h=[];for(let m=0;m<s.length;m++){const p=s[m],g=l[m];JSON.stringify(p)!==JSON.stringify(g)&&h.push({newOptions:p,oldOptions:g})}h.forEach(m=>{const p=d._pointPrimitives.find(g=>g&&g.id===m.oldOptions.id);p&&Object.keys(m.newOptions).forEach(g=>{m.oldOptions[g]!==m.newOptions[g]&&(p[g]=i.transformProp(g,m.newOptions[g]))})})}else{const h=Nt(s,l,"id"),m=Nt(l,s,"id"),p=[];for(let g=0;g<m.length;g++){const v=d._pointPrimitives.find(b=>b.id===m[g].id);v&&p.push(v)}p.forEach(g=>{d.remove(g)}),a(d,h)}},{deep:!0}));const a=(s,l)=>{for(let d=0;d<l.length;d++){const h=l[d];h.id=Cesium.defined(h.id)?h.id:Cesium.createGuid();const m=i.transformProps(h),p=s.add(m);qi(p,m)}};return n.createCesiumObject=async()=>{const s=i.transformProps(e),l=new Cesium.PointPrimitiveCollection(s);return a(l,e.points),l},u.onUnmounted(()=>{r.forEach(s=>s()),r=[]}),()=>{var s,l;return t.slots.default?u.h("i",{class:pe(((s=n.proxy)==null?void 0:s.$options.name)||""),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(((l=n.proxy)==null?void 0:l.$options.name)||""))}}});const Qf={...Tr,...Mo,...Zt,...Qr,...Ln,...Nn,...Th,...Oo,...To,...qe,...Io,..._t};var hP=u.defineComponent({name:"VcPoint",props:Qf,emits:mi,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PointPrimitive",Xr(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const b8={...Ti,...er,...qe,..._t,polylines:{type:Array,default:()=>[]}};var mP=u.defineComponent({name:"VcCollectionPolyline",props:b8,emits:mi,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="PolylineCollection";const r=Yr(e,t,i);if(r===void 0)return;i.alreadyListening.push("polylines");let a=[];a.push(u.watch(()=>ut(e.polylines),(d,h)=>{if(!i.mounted)return;const m=i.cesiumObject;if(d.length===h.length){const p=[];for(let g=0;g<d.length;g++){const v=d[g],b=h[g];JSON.stringify(v)!==JSON.stringify(b)&&p.push({newOptions:v,oldOptions:b})}p.forEach(g=>{const v=m._polylines.find(b=>b.id===g.oldOptions.id);v&&Object.keys(g.newOptions).forEach(b=>{g.oldOptions[b]!==g.newOptions[b]&&(v[b]=r.transformProp(b,g.newOptions[b]))})})}else{const p=Nt(d,h,"id"),g=Nt(h,d,"id"),v=[];for(let b=0;b<g.length;b++){const P=m._polylines.find(w=>w.id===g[b].id);P&&v.push(P)}v.forEach(b=>{m.remove(b)}),s(m,p)}},{deep:!0}));const s=(d,h)=>{for(let m=0;m<h.length;m++){const p=h[m];p.id=Cesium.defined(p.id)?p.id:Cesium.createGuid();const g=r.transformProps(p),v=d.add(g);qi(v,g)}};i.createCesiumObject=async()=>{const d=r.transformProps(e),h=new Cesium.PolylineCollection(d);return s(h,e.polylines),h},u.onUnmounted(()=>{a.forEach(d=>d()),a=[]});const l=((n=i.proxy)==null?void 0:n.$options.name)||"";return()=>t.slots.default?u.h("i",{class:pe(l),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(l))}});const Jf={...Zt,...Qr,...Gh,...Qn,...Jn,...qe,...Qi,..._t};var pP=u.defineComponent({name:"VcPolyline",props:Jf,emits:mi,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="Polyline",Xr(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const Xf={...qe,destroyPrimitives:{type:Boolean,default:!0},..._t,polygons:{type:Array,default:()=>[]}};var fP=u.defineComponent({name:"VcCollectionPrimitive",props:Xf,emits:mi,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="PrimitiveCollection";const r=Yr(e,t,i);if(r===void 0)return;i.alreadyListening.push("polygons");let a=[];a.push(u.watch(()=>ut(e.polygons),(d,h)=>{if(!i.mounted)return;const m=i.cesiumObject;if(d.length===h.length){const p=[];for(let g=0;g<d.length;g++){const v=d[g],b=h[g];JSON.stringify(v)!==JSON.stringify(b)&&p.push({newOptions:v,oldOptions:b})}p.forEach(g=>{const v=m._primitives.find(b=>b._id===g.oldOptions.id);v&&Object.keys(g.newOptions).forEach(b=>{g.oldOptions[b]!==g.newOptions[b]&&(v[b]=r.transformProp(b,g.newOptions[b]))})})}else{const p=Nt(d,h,"id"),g=Nt(h,d,"id"),v=[];for(let b=0;b<g.length;b++){const P=m._primitives.find(w=>w.id===g[b].id);P&&v.push(P)}v.forEach(b=>{m.remove(b)}),s(m,p)}},{deep:!0}));const s=(d,h)=>{for(let m=0;m<h.length;m++){const p=h[m];p.id=Cesium.defined(p.id)?p.id:Cesium.createGuid();const g=r.transformProps(p),v=new yc(g);v._vcParent=d,qi(v,g),d.add(v)}};i.createCesiumObject=async()=>{const d=r.transformProps(e),h=new Cesium.PrimitiveCollection(d);return s(h,e.polygons),h},u.onUnmounted(()=>{a.forEach(d=>d()),a=[]});const l=((n=i.proxy)==null?void 0:n.$options.name)||"";return()=>t.slots.default?u.h("i",{class:pe(l),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(l))}});const Yf={...Jn,...Ro,...da,...zh,...qe,...Qr,...Ar,...Yi,...ys,...at,...Lo,...Bo,..._t};var gP=u.defineComponent({name:"VcPolygon",props:Yf,emits:mi,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="PolygonPrimitive";const i=Xr(e,t,n);if(i===void 0)return;let r=[];return r.push(u.watch(()=>e.clampToGround,a=>{const s=n.cesiumObject;s&&(s.clampToGround=a)})),r.push(u.watch(()=>e.positions,a=>{const s=n.cesiumObject;s&&(s.positions=Mi(a))})),r.push(u.watch(()=>e.polygonHierarchy,a=>{const s=n.cesiumObject;s&&(s.polygonHierarchy=ih(a))})),r.push(u.watch(()=>e.appearance,a=>{const s=n.cesiumObject;s&&(s.appearance=Nl.call(n,a))})),r.push(u.watch(()=>e.depthFailAppearance,a=>{const s=n.cesiumObject;s&&(s.depthFailAppearance=Nl.call(n,a))})),r.push(u.watch(()=>e.show,a=>{const s=n.cesiumObject;s&&(s.show=a)})),r.push(u.watch(()=>e.classificationType,a=>{const s=n.cesiumObject;s&&(s.classificationType=a)})),n.createCesiumObject=async()=>{const a=i.transformProps(e);return new yc(a)},n.mount=async()=>{const a=i.$services.primitives,s=n.cesiumObject;return s._vcParent=a,a&&a.add(s)},n.unmount=async()=>{const a=i.$services.primitives,s=n.cesiumObject;return a&&!a.isDestroyed()&&a.remove(s)},u.onUnmounted(()=>{r.forEach(a=>a()),r=[]}),()=>{var a;return u.createCommentVNode(pe(((a=n.proxy)==null?void 0:a.$options.name)||""))}}});[aP,lP,cP,dP,mP,fP,hu,sP,uP,hP,pP,gP].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const mu=aP,Kf=lP,ko=cP,zo=dP,e0=mP,oo=fP,t0=sP,n0=hu,i0=uP,r0=hP,o0=pP,ao=gP,a0={geometry:Object,...Ti,...Qr,attributes:Object},C8={...Le,"update:geometry":e=>!0};var pu=u.defineComponent({name:"VcGeometryInstance",props:a0,emits:C8,setup(e,t){const n=u.getCurrentInstance();n.renderByParent=!0,n.cesiumClass="GeometryInstance",n.cesiumEvents=[];const i=rt(e,t,n);if(i===void 0)return;const{emit:r}=t,a=u.ref(0);n.createCesiumObject=async()=>{const l=i.transformProps(e);return l.geometry||(l.geometry=new Cesium.Geometry({attributes:new Cesium.GeometryAttributes})),new Cesium.GeometryInstance(l)},n.mount=async()=>{var l;const d=cn(n).proxy;d.__childCount!==void 0&&(a.value=d.__childCount.value||0,d.__childCount.value+=1);const h=n.cesiumObject;return(l=d.__updateGeometryInstances)==null||l.call(d,h,a.value),!0},n.unmount=async()=>{var l;const d=n.cesiumObject,h=cn(n).proxy;return(l=h.__removeGeometryInstances)==null||l.call(h,d),!0};const s=l=>{if(ze(n,"update:geometry"))r("update:geometry",l);else{const d=n.cesiumObject;d.geometry=l}return!0};return u.provide(Or,(()=>Eo(i.getServices(),{get geometryInstance(){return n.cesiumObject}}))()),Object.assign(n.proxy,{__updateGeometry:s}),()=>{var l,d;return t.slots.default?u.h("i",{class:pe(((l=n.proxy)==null?void 0:l.$options.name)||""),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(((d=n.proxy)==null?void 0:d.$options.name)||"v-if"))}}});pu.install=e=>{e.component(pu.name,pu)};const vP=pu;var w8=vP;const Rr=vP,s0={...zl,...Mn};var yP=u.defineComponent({name:"VcGeometryBox",props:s0,emits:Le,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="BoxGeometry";const i=pt(e,t,n);return n.createCesiumObject=async()=>{const r=i==null?void 0:i.transformProps(e);return Cesium.BoxGeometry.fromDimensions(r)},()=>{var r;return u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const l0={...zl};var bP=u.defineComponent({name:"VcGeometryBoxOutline",props:l0,emits:Le,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="BoxOutlineGeometry";const i=pt(e,t,n);return n.createCesiumObject=async()=>{const r=i==null?void 0:i.transformProps(e);return Cesium.BoxOutlineGeometry.fromDimensions(r)},()=>{var r;return u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||"v-if"))}}});const c0={...Os,...Ms,...at,...xn,...Bt,...Mn,...jn,...cr};var CP=u.defineComponent({name:"VcGeometryCircle",props:c0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="CircleGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const u0={...Os,...Ms,...at,...xn,...Bt,...jn,...la};var wP=u.defineComponent({name:"VcGeometryCircleOutline",props:u0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="CircleOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const d0={...Ro,...at,...Mn,...cr};var _P=u.defineComponent({name:"VcGeometryPolygonCoplanar",props:d0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="CoplanarPolygonGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const h0={...Ro};var PP=u.defineComponent({name:"VcGeometryPolygonCoplanarOutline",props:h0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="CoplanarPolygonOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const m0={...Jn,...Qi,...at,...Bt,...xn,...jn,...Mn,...Ao};var EP=u.defineComponent({name:"VcGeometryCorridor",props:m0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="CorridorGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const p0={...Jn,...Qi,...at,...Bt,...xn,...jn,...Ao};var xP=u.defineComponent({name:"VcGeometryCorridorOutline",props:p0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="CorridorOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const f0={...Gl,...Ul,...Hl,...Wl,...Mn};var OP=u.defineComponent({name:"VcGeometryCylinder",props:f0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="CylinderGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const g0={...Gl,...Ul,...Hl,...Wl,...la};var MP=u.defineComponent({name:"VcGeometryCylinderOutline",props:g0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="CylinderOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const v0={...Os,...ql,...Zl,...at,...xn,...jn,...Ir,...cr,...Bt,...Mn};var SP=u.defineComponent({name:"VcGeometryEllipse",props:v0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="EllipseGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const y0={...Os,...ql,...Zl,...at,...xn,...jn,...Ir,...cr,...Bt,...la};var TP=u.defineComponent({name:"VcGeometryEllipseOutline",props:y0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="EllipseOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const b0={...Ql,...Jl,...Xl,...Yl,...Kl,...ec,...ca,...ua,...Mn};var IP=u.defineComponent({name:"VcGeometryEllipsoid",props:b0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="EllipsoidGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const _8={...Ql,...Jl,...Xl,...Yl,...Kl,...ec,...ca,...ua,...tc};var AP=u.defineComponent({name:"VcGeometryEllipsoidOutline",props:_8,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="EllipsoidOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const C0={...Hh,...Wh,...uh,...Mn};var DP=u.defineComponent({name:"VcGeometryFrustum",props:C0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="FrustumGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const w0={...Hh,...Wh,...uh};var LP=u.defineComponent({name:"VcGeometryFrustumOutline",props:w0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="FrustumOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const _0={...Jn,...Qi,...Bt,...Gh,...Ar};var BP=u.defineComponent({name:"VcGeometryGroundPolyline",props:_0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="GroundPolylineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const P0={...Mn};var RP=u.defineComponent({name:"VcGeometryPlane",props:P0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PlaneGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}}),VP=u.defineComponent({name:"VcGeometryPlaneOutline",emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PlaneOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const E0={...Ro,...xn,...jn,...Mn,...cr,...at,...Bt,...ic,...Ih,...Ah,...Ar};var FP=u.defineComponent({name:"VcGeometryPolygon",props:E0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PolygonGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const x0={...Ro,...xn,...jn,...Mn,...at,...Bt,...ic,...Ar};var $P=u.defineComponent({name:"VcGeometryPolygonOutline",props:x0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PolygonOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const O0={...Jn,...Qi,...Kh,colorsPerVertex:{type:Boolean,default:!1},...Ar,...Bt,...Mn,...at};var NP=u.defineComponent({name:"VcGeometryPolyline",props:O0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PolylineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const M0={...Zh,...qh,...at,...Bt,...Mn,...Ao};var jP=u.defineComponent({name:"VcGeometryPolylineVolume",props:M0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PolylineVolumeGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const S0={...Zh,...qh,...at,...Bt,...Ao};var kP=u.defineComponent({name:"VcGeometryPolylineVolumeOutline",props:S0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PolylineVolumeOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const T0={...vn,...Mn,...at,...Bt,...xn,...Ir,...cr,...jn};var zP=u.defineComponent({name:"VcGeometryRectangle",props:T0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="RectangleGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const I0={...vn,...at,...Bt,...xn,...Ir,...jn};var GP=u.defineComponent({name:"VcGeometryRectangleOutline",props:I0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="RectangleOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const A0={...Jn,...Kh,colorsPerVertex:{type:Boolean,default:!1},...Ar,...Bt,...at};var UP=u.defineComponent({name:"VcGeometrySimplePolyline",props:A0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="SimplePolylineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const D0={...Ms,...ca,...ua,...Mn};var HP=u.defineComponent({name:"VcGeometrySphere",props:D0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="SphereGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const L0={...Ms,...ca,...ua,...tc};var WP=u.defineComponent({name:"VcGeometrySphereOutline",props:L0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="SphereOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const B0={...Jn,...Bt,...oc,...rc,...at,...Mn};var qP=u.defineComponent({name:"VcGeometryWall",props:B0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="WallGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const R0={...Jn,...Bt,...oc,...rc,...at};var ZP=u.defineComponent({name:"VcGeometryWallOutline",props:R0,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="WallOutlineGeometry",pt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});[yP,bP,CP,wP,_P,PP,EP,xP,OP,MP,SP,TP,IP,AP,DP,LP,BP,RP,VP,FP,$P,NP,jP,kP,zP,GP,UP,HP,WP,qP,ZP].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const V0=yP,F0=bP,$0=CP,N0=wP,j0=_P,k0=PP,z0=EP,G0=xP,U0=OP,H0=MP,W0=SP,q0=TP,Z0=IP,Q0=AP,J0=DP,X0=LP,el=BP,Y0=RP,K0=VP,fu=FP,eg=$P,Vr=NP,tg=jP,ng=kP,ig=zP,rg=GP,og=UP,ag=HP,sg=WP,lg=qP,cg=ZP;var ni=63710088e-1,P8={centimeters:ni*100,centimetres:ni*100,degrees:ni/111325,feet:ni*3.28084,inches:ni*39.37,kilometers:ni/1e3,kilometres:ni/1e3,meters:ni,metres:ni,miles:ni/1609.344,millimeters:ni*1e3,millimetres:ni*1e3,nauticalmiles:ni/1852,radians:1,yards:ni*1.0936};function QP(e,t,n){n===void 0&&(n={});var i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=t||{},i.geometry=e,i}function E8(e,t,n){if(n===void 0&&(n={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!XP(e[0])||!XP(e[1]))throw new Error("coordinates must contain numbers");var i={type:"Point",coordinates:e};return QP(i,t,n)}function x8(e,t,n){n===void 0&&(n={});for(var i=0,r=e;i<r.length;i++){var a=r[i];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return QP(l,t,n)}function O8(e,t){t===void 0&&(t="kilometers");var n=P8[t];if(!n)throw new Error(t+" units is invalid");return e/n}function JP(e){var t=e%(2*Math.PI);return t*180/Math.PI}function ug(e){var t=e%360;return t*Math.PI/180}function XP(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function M8(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function S8(e,t,n,i){i===void 0&&(i={});var r=M8(e),a=ug(r[0]),s=ug(r[1]),l=ug(n),d=O8(t,i.units),h=Math.asin(Math.sin(s)*Math.cos(d)+Math.cos(s)*Math.sin(d)*Math.cos(l)),m=a+Math.atan2(Math.sin(l)*Math.sin(d)*Math.cos(s),Math.cos(d)-Math.sin(s)*Math.sin(h)),p=JP(m),g=JP(h);return E8([p,g],i.properties)}function T8(e,t,n){n===void 0&&(n={});for(var i=n.steps||64,r=n.properties?n.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},a=[],s=0;s<i;s++)a.push(S8(e,t,s*-360/i,n).geometry.coordinates);return a.push(a[0]),x8([a],r)}const YP={color:"#409eff",pixelSize:8,outlineColor:"rgba(0,0,0,0.6)",outlineWidth:1,disableDepthTestDistance:Number.POSITIVE_INFINITY},KP={enableMouseEvent:!1,asynchronous:!1,allowPicking:!0},eE={width:2,show:!0},tE={pixelOffset:[20,0],showBackground:!0,backgroundColor:"rgba(0,0,0,1)",enableMouseEvent:!1},dg={typhoonRoutes:{type:Array},clampToGround:{type:Boolean,default:!1},radius7Color:{type:String,default:"rgba(68, 255, 230, 0.3)"},radius10Color:{type:String,default:"rgba(32, 237, 39, 0.3)"},radius12Color:{type:String,default:"rgba(255, 247, 16, 0.3)"},pointProps:{type:[Object,Function],default:()=>YP},linePrimitiveProps:{type:[Object,Function],default:()=>KP},lineGeometryProps:{type:[Object,Function],default:()=>eE},labelProps:{type:[Object,Function],default:()=>tE},circleOverlayPosition:{type:[String,Function],default:"-175px"},setsArray:{type:Array,default:()=>["\u4E2D\u592E\u53F0","\u65E5\u672C","\u7F8E\u56FD","\u97E9\u56FD","\u4E2D\u56FD\u9999\u6E2F"]}},I8={...Le,mouseover:e=>!0,mouseout:e=>!0,click:e=>!0,clickout:e=>!0,forecastRouteAdded:e=>!0};var nE=u.defineComponent({name:"VcOverlayTyphoon",props:dg,emits:I8,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcOverlayTyphoon",n.cesiumEvents=[];const i=rt(e,t,n);if(i===void 0)return;const{$services:r}=i,a=ds(n),{t:s}=Qt(),l=u.ref(null),d=u.reactive([]);n.createCesiumObject=async()=>l;const h=(_,M)=>{M.playIndex=_;const A=M.typhoonRoute.points[_];A.type="live",A.index=_,A.tfbh=M.name;const D=[A.lng,A.lat];M.positions.push(D);const z=typeof e.pointProps=="function"?jt(ut(YP),e.pointProps(A)):e.pointProps;M.points.push({id:A.id||Cesium.createGuid(),position:D,onMouseover(L){t.emit("mouseover",L)},onMouseout(L){t.emit("mouseout",L)},onClick(L){p(A,M,_,!0),M.playIndex=A.index,t.emit("click",L)},onClickout(L){t.emit("clickout",L)},...z,...A});const $=M.points[_];$&&M.colors.push($.color),_===M.typhoonRoute.points.length-1&&p(A,M,_)},m=_=>{const M=d.findIndex(A=>A.name===_);if(M>=0){let A=0;const D=d[M];D.points.length=0,D.positions.length=0;const z=D.typhoonRoute;h(A,D),cancelAnimationFrame(D.playInterval);const $=()=>{A++,A>=z.points.length?cancelAnimationFrame(D.playInterval):h(A,D),D.playInterval=requestAnimationFrame($)};D.playInterval=requestAnimationFrame($)}else a.warn(s("vc.typhoon.warn")||"\u64AD\u653E\u53F0\u98CE\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A\u672A\u627E\u5230\u5BF9\u5E94\u7F16\u53F7\u7684\u53F0\u98CE\u6570\u636E\u3002")},p=(_,M,A,D=!1)=>{M.children.length=0;let z=D?_.forecast||[]:[];if(!D)for(let $=0;$<e.setsArray.length;$++){const L=(U,Z)=>{const W=(U==null?void 0:U.forecast)||[];if(z.push(...W),D)return;z=N6(z,(x,B)=>x.sets===B.sets);const y=e.setsArray[$],C=z.findIndex(x=>x.sets===y);if(C>-1)z[C].unshifted||(z[C].points.unshift({lat:U.lat,lng:U.lng}),z[C].unshifted=!0);else if(Z>0){const x=M.typhoonRoute.points[Z-1];L(x,Z-1)}};L(_,A)}if(!(!z||z.length<=0)){for(let $=0;$<z.length;$++){const L=z[$],U=[],Z=[],W={name:M.name+"_"+L.sets,typhoonRoute:L,show:!0,positions:Z,points:U,type:"forc"};M.children.push(W),L.points.forEach((y,C)=>{const x=[y.lng,y.lat];W.positions.push(x),C===0&&D&&W.positions.unshift([_.lng,_.lat]),y.sets=L.sets,y.type="forc",y.index=C;const B=typeof e.pointProps=="function"?e.pointProps(y):e.pointProps;C!==0&&W.points.push({id:y.id||Cesium.createGuid(),position:x,onMouseover(O){t.emit("mouseover",O)},onMouseout(O){t.emit("mouseout",O)},onClick(O){t.emit("click",O)},...B,...y})})}t.emit("forecastRouteAdded",{livePoint:_,datasource:M,addedByClick:D})}},g=_=>{const M=[],A=[],D={name:_.tfbh,typhoonRoute:_,show:!0,positions:A,points:M,children:[],colors:[],type:"live"};return d.push(D),m(_.tfbh),D},v=(_,M)=>{const A=[];typeof _=="string"?A.push(_):A.push(..._);let D=null;A.forEach(z=>{var $;const L=[],U=d.find(y=>y.name===z);U&&U.typhoonRoute.points&&U.typhoonRoute.points.forEach(y=>{L.push([y.lng,y.lat])}),($=U==null?void 0:U.children)!=null&&$.length&&U.children.forEach(y=>{y.typhoonRoute.points.forEach(C=>{L.push([C.lng,C.lat])})});const Z=Mi(L),W=Cesium.BoundingSphere.fromPoints(Z);D===null?D=W:D=Cesium.BoundingSphere.union(D,W)}),r.viewer.camera.flyToBoundingSphere(new Cesium.BoundingSphere(D.center,D.radius),{...M})},b=_=>{const M=d.indexOf(_);M>=0&&(clearInterval(_.playInterval),d.splice(M,1))},P=()=>{d.forEach(_=>{clearInterval(_.playInterval)}),d.length=0},w=(_,M)=>{let A=[];if(typeof M=="number")A=T8(_,M*1e3,{units:"meters"}).geometry.coordinates;else if(M.ne){const D={0:"ne",1:"nw",2:"sw",3:"se"};for(let z=0;z<4;z++){let $=parseFloat(M[D[z]])*1e3;$||($=0);for(let L=z*15;L<=(z+1)*15;L++){const U=6*L,Z=_[0]+$*Math.cos(U*Math.PI/180)/111e3,W=_[1]+$*Math.sin(U*Math.PI/180)/111e3;A.push([Z,W])}}}return A},S=(_,M)=>{const A=[];return _.forEach(D=>{if(D.positions.length>1){const z=typeof e.linePrimitiveProps=="function"?jt(ut(KP),e.linePrimitiveProps(D)):e.linePrimitiveProps,$=typeof e.lineGeometryProps=="function"?jt(ut(eE),e.lineGeometryProps(D)):e.lineGeometryProps;A.push(u.h(Br,{show:D.show,appearance:{type:D.type==="live"?"PolylineColorAppearance":"PolylineMaterialAppearance",options:{material:D.type==="live"?void 0:{fabric:{type:"PolylineDash",uniforms:{color:"#000000"}}},translucent:!0}},onMouseover:L=>{t.emit("mouseover",L)},onMouseout:L=>{t.emit("mouseout",L)},onClick:L=>{t.emit("click",L)},onClickout:L=>{t.emit("clickout",L)},...z},()=>u.h(Rr,{id:D.name||Cesium.createGuid()},()=>u.h(Vr,{positions:Mi(D.positions),colors:D.colors,...$}))))}if(D.points.length&&A.push(u.h(zo,{show:D.show,points:D.points,onReady:z=>{const{cesiumObject:$}=z,L=$.update;$.update=function(U){const Z=U.commandList.length;L.call(this,U);const W=U.commandList.length;for(let y=Z;y<W;++y)U.commandList[y].pass=Cesium.Pass.TRANSLUCENT,U.commandList[y].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1})}}})),D.type==="live"){const z=typeof e.labelProps=="function"?jt(ut(tE),e.labelProps(D)):e.labelProps;A.push(u.h(ko,{show:D.show,enableMouseEvent:!1,labels:[{text:D.typhoonRoute.name,position:D.positions[0],...z}]}));const $=D.points[D.playIndex];M.length=M.push(u.h(uf,{show:D.show,position:$.position,autoHidden:!0},()=>u.h("div",{class:"vc-typhoon-circle",style:{backgroundPosition:typeof e.circleOverlayPosition=="function"?e.circleOverlayPosition($):e.circleOverlayPosition}}))),($==null?void 0:$.radius7)>0&&A.push(u.h(ao,{show:D.show,positions:w($.position,$.radius7_quad),clampToGround:e.clampToGround,asynchronous:!1,allowPicking:!1,enableMouseEvent:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:e.radius7Color}}}}},onReady:T})),($==null?void 0:$.radius10)>0&&A.push(u.h(ao,{show:D.show,positions:w($.position,$.radius10_quad),clampToGround:e.clampToGround,asynchronous:!1,allowPicking:!1,enableMouseEvent:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:e.radius10Color}}}}},onReady:T})),($==null?void 0:$.radius12)>0&&A.push(u.h(ao,{show:D.show,positions:w($.position,$.radius12_quad),clampToGround:e.clampToGround,asynchronous:!1,allowPicking:!1,enableMouseEvent:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:e.radius12Color}}}}},onReady:T}))}D.children&&A.push(...S(D.children,M))}),A},T=_=>{const M=_.cesiumObject,A=M.update;M.update=function(D){const z=D.commandList.length;A.call(this,D);const $=D.commandList.length;for(let L=z;L<$;++L)D.commandList[L].pass===Cesium.Pass.TRANSLUCENT&&(D.commandList[L].pass=Cesium.Pass.OPAQUE,D.commandList[L].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND}))}};return Object.assign(n.proxy,{addTyphoonRoute:g,playTyphoonRoute:m,flyToTyphoonRoute:v,showForecast:p,removeTyphoonData:b,removeAllTyphoonData:P,getTyphoonDatasources:()=>d}),e.typhoonRoutes.forEach(_=>{g(_)}),()=>{const _=[],M=S(d,_);return[u.h(oo,{ref:l,show:!0},()=>M),..._]}}});[uf,Y2,K2,rP,oP,nE].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const Fr=uf,hg=Y2,mg=K2,pg=rP,fg=oP,gg=nE;function vg(e,t,n,i,r){n.cesiumClass=i,n.cesiumEvents=[];const{t:a}=Qt(),{emit:s}=t,l=pe(i).split("-");i==="VcMeasurementDistance"&&e.showComponentLines&&(l[2]="component-distance"),(i==="VcDrawingRegular"||i==="VcMeasurementRegular")&&(e.edge===4&&(l[2]="rectangle"),e.edge===360&&(l[2]="circle"));let d=l[2];l[3]&&(d=`${l[2]}-${l[3]}`);const h=u.ref(""),m=u.computed(()=>({drawingTipStart:e.drawtip.drawingTipStart||a(`${l[0]}.${l[1]}.${l[2]}.drawingTipStart`),drawingTipEnd:e.drawtip.drawingTipEnd||a(`${l[0]}.${l[1]}.${l[2]}.drawingTipEnd`),drawingTipEditing:e.drawtip.drawingTipEditing||a(`${l[0]}.${l[1]}.${l[2]}.drawingTipEditing`)})),p=u.ref(Ve.BeforeDraw),g=u.ref(!1),v=u.ref([0,0,0]),b=u.ref(!1),P=u.ref([0,0,0]),w=u.ref(null),S=u.ref(null),T=u.ref(null),_=u.ref(""),{registerTimeout:M,removeTimeout:A}=om();return n.createCesiumObject=async()=>T,{drawingType:d,drawTip:h,drawTipOpts:m,drawStatus:p,canShowDrawTip:g,drawTipPosition:v,showEditor:b,editorPosition:P,mouseoverPoint:w,editingPoint:S,primitiveCollectionRef:T,editorType:_,onMouseoverPoints:D=>{var z,$;const{drawingHandlerActive:L,viewer:U}=r;e.editable&&p.value!==Ve.Drawing&&L&&(D.pickedFeature.primitive.pixelSize=((z=e.pointOpts)==null?void 0:z.pixelSize)*1.5,A(),M(()=>{w.value=D.pickedFeature.primitive,P.value=D.pickedFeature.primitive.position,b.value=!0,g.value=!1,v.value=[0,0,0]},($=e.editorOpts)==null?void 0:$.delay)),s("mouseEvt",{type:D.type,name:d,target:D},U)},onMouseoutPoints:D=>{var z,$;const{viewer:L,selectedDrawingActionInstance:U}=r;e.editable&&(D.pickedFeature.primitive.pixelSize=((z=e.pointOpts)==null?void 0:z.pixelSize)*1,A(),M(()=>{P.value=[0,0,0],w.value=void 0,b.value=!1},($=e.editorOpts)==null?void 0:$.hideDelay),U&&(g.value=!0)),s("mouseEvt",{type:D.type,name:d,target:D},L)},onMouseenterEditor:D=>{A()},onMouseleaveEditor:D=>{var z;A(),M(()=>{var $;P.value=[0,0,0],w.value.pixelSize=(($=e.pointOpts)==null?void 0:$.pixelSize)*1,w.value=void 0,b.value=!1},(z=e.editorOpts)==null?void 0:z.hideDelay)},onPrimitiveCollectionReady:D=>{D.cesiumObject._vcId=i},onVcCollectionPointReady:function(D){const{cesiumObject:z}=D,$=z.update;z.update=function(L){const U=L.commandList.length;$.call(this,L);const Z=L.commandList.length;for(let W=U;W<Z;++W)L.commandList[W].pass=Cesium.Pass.TRANSLUCENT,L.commandList[W].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1})}},onVcPrimitiveReady:D=>{if(e.disableDepthTest)return;const z=D.cesiumObject,$=z.update;z.update=function(L){const U=L.commandList.length;$.call(this,L);const Z=L.commandList.length;for(let W=U;W<Z;++W)L.commandList[W].pass===Cesium.Pass.TRANSLUCENT&&(L.commandList[W].pass=Cesium.Pass.OPAQUE,L.commandList[W].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND}))}},onVcCollectionLabelReady:D=>{if(e.disableDepthTest)return;const z=D.cesiumObject,$=z.update;z.update=function(L){const U=L.commandList.length;$.call(this,L);const Z=L.commandList.length;for(let W=U;W<Z;++W)L.commandList[W].pass=Cesium.Pass.OVERLAY,L.commandList[W].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND})}}}}function $r(e,t,n){const i=u.getCurrentInstance(),r=rt(e,t,i);if(r===void 0)return;const{t:a}=Qt(),s=r.$services,{emit:l}=t,{drawingType:d,drawTip:h,drawTipOpts:m,drawStatus:p,canShowDrawTip:g,drawTipPosition:v,showEditor:b,editorPosition:P,mouseoverPoint:w,editingPoint:S,primitiveCollectionRef:T,editorType:_,onMouseoverPoints:M,onMouseoutPoints:A,onMouseenterEditor:D,onMouseleaveEditor:z,onPrimitiveCollectionReady:$,onVcCollectionPointReady:L,onVcCollectionLabelReady:U,onVcPrimitiveReady:Z}=vg(e,t,i,n,s),W=u.ref([]);e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach(Q=>{const G={positions:Mi(Q),show:!0,drawStatus:Ve.AfterDraw,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};n==="VcMeasurementVertical"&&Object.assign(G,{draggingPlane:new Cesium.Plane(Cesium.Cartesian3.UNIT_X,0),surfaceNormal:new Cesium.Cartesian3}),W.value.push(G)});let y;const C=u.computed(()=>{const Q=[],{Cartesian3:G,Cartographic:J,Rectangle:oe,createGuid:Y,defined:X,Math:se,Ray:re}=Cesium,{viewer:de}=s,ce=e.angleFormatter||Bn.angleToString,he=e.distanceFormatter||Bn.distanceToString,ge=e.areaFormatter||Bn.areaToString;return W.value.forEach(Pe=>{var Ie,_e,Ee,De,Se,xe,je,K,ve,Te,Ae,It,pn,Ze,Ce,Ge,Ne,He,ft;const gt=Pe.positions[0],tt=Pe.positions[1];if(G.equals(gt,tt))return;const Ye=u.reactive([]),Vi=((Ie=e.polylineOpts)==null?void 0:Ie.arcType)===0?G.distance(gt,tt):sh(gt,tt,s.viewer.scene.globe.ellipsoid),Go=G.midpoint(gt,tt,{}),Uo=UC(gt,tt),Iy=HC(gt,tt);Pe.points=Pe.positions.map(Ft=>({position:Ft}));const Pt={...Pe,distance:Vi,heading:Uo,pitch:Iy},Ou=Object.assign({},e.labelOpts,Pt.labelOpts);if(n==="VcDrawingRectangle"||n==="VcMeasurementRectangle"){const Ft=J.fromCartesian(gt,de.scene.globe.ellipsoid),lt=J.fromCartesian(tt,de.scene.globe.ellipsoid),_n=Ft.height;!e.clampToGround&&(lt.height=_n);const mt=oe.fromCartesianArray(Pe.positions,de.scene.globe.ellipsoid),Ht=[mt.west,mt.north,_n,mt.east,mt.north,_n,mt.east,mt.south,_n,mt.west,mt.south,_n,mt.west,mt.north,_n],wr=G.fromRadiansArrayHeights(Ht,de.scene.globe.ellipsoid);Object.assign(Pt,{polygonPositions:wr,height:_n})}else if(n==="VcDrawingRegular"||n==="VcMeasurementRegular"){const Ft=Pe.positions[0],lt=Pe.positions[1],_n=yD(Ft,lt,de.scene);if(!ci(_n)&&X(_n)){const mt=[],Ht=J.fromCartesian(Ft,de.scene.globe.ellipsoid),wr=J.fromCartesian(lt,de.scene.globe.ellipsoid);!e.clampToGround&&(wr.height=Ht.height),mt.push(J.toCartesian(wr,de.scene.globe.ellipsoid));for(let _r=0;_r<(e.edge||4)-1;_r++){const il=bD(Ft,_n.heading+=Math.PI*2/(e.edge||4),Vi,de.scene.globe.ellipsoid);mt.push(il)}Object.assign(Pt,{polygonPositions:mt,height:Ht.height})}}else if(n==="VcAnalysisViewshed")Object.assign(Pt.viewshedOpts,{startPosition:gt,endPosition:tt});else if(n==="VcAnalysisSightline")if(e.sightlineType==="segment"){const Ft=[];Ft.push(gt);const lt=[];T.value.cesiumObject._primitives.forEach(Ht=>{Ht instanceof Cesium.PointPrimitiveCollection&&lt.push(...Ht._pointPrimitives),Ht instanceof Cesium.Primitive&&lt.push(Ht)});const _n=WC(gt,tt,s.viewer,lt);X(_n)&&Ft.push(_n),Ft.push(tt);let mt=0;for(let Ht=0;Ht<Ft.length-1;Ht++){const wr=G.distance(Ft[Ht],Ft[Ht+1]);mt=mt+wr}Object.assign(Pt,{positions:Ft,distance:mt})}else e.sightlineType;else Ye.push({position:Go,id:Y(),text:he(Vi,(_e=e.measureUnits)==null?void 0:_e.distanceUnits,e.locale,(Ee=e.decimals)==null?void 0:Ee.distance),...Ou});if(Pt.polygonPositions&&Pt.polygonPositions.length){const Ft=Object.assign({},e.labelsOpts,Pt.labelsOpts),lt=Pt.polygonPositions.slice();e.loop&&lt.length>2&&lt.push(lt[0]);for(let mt=0;mt<lt.length-1;mt++){let Ht=0;if(((De=e.polylineOpts)==null?void 0:De.arcType)===0?Ht=sh(lt[mt],lt[mt+1],s.viewer.scene.globe.ellipsoid):Ht=G.distance(lt[mt],lt[mt+1]),Ht>0&&lt.length>2&&e.showDistanceLabel&&Ye.push({text:he(Ht,(Se=e.measureUnits)==null?void 0:Se.distanceUnits,e.locale,(xe=e.decimals)==null?void 0:xe.distance),position:G.midpoint(lt[mt],lt[mt+1],{}),id:Y(),...Ft}),lt.length>2&&e.showAngleLabel&&(mt>0||e.loop)){const wr=lt[mt===0?lt.length-2:mt-1],_r=lt[mt],il=lt[mt+1],Mu=G.subtract(wr,_r,{}),Su=G.subtract(il,_r,{});let Tu=0;G.ZERO.equals(Mu)||G.ZERO.equals(Su)||(Tu=G.angleBetween(Mu,Su)),Ye.push({text:ce(Tu,(je=e.measureUnits)==null?void 0:je.angleUnits,e.locale,(K=e.decimals)==null?void 0:K.angle),position:_r,id:Y(),...Ft})}}const _n=GC(lt);e.showLabel&&Ye.push({text:ge(_n,(ve=e.measureUnits)==null?void 0:ve.areaUnits,e.locale,(Te=e.decimals)==null?void 0:Te.area),position:Pe.positions[0],id:Y(),...Ou})}e.showComponentLines&&(Object.assign(Pt,{xyPolylinePositions:[new G,new G,new G],xyBoxPositions:[new G,new G,new G],xDistance:0,yDistance:0,xAngle:0,yAngle:0}),B(Pt),Ye.push({position:Pt.xLabelPosition,id:Y(),text:he(Pt.xDistance||0,(Ae=e.measureUnits)==null?void 0:Ae.distanceUnits,e.locale,(It=e.decimals)==null?void 0:It.distance),...e.xLabelOpts}),Ye.push({position:Pt.yLabelPosition,id:Y(),text:he(Pt.yDistance||0,(pn=e.measureUnits)==null?void 0:pn.distanceUnits,e.locale,(Ze=e.decimals)==null?void 0:Ze.distance),...e.yLabelOpts}),Ye.push({position:Pt.xAnglePosition,id:Y(),text:ce(Pt.xAngle||0,(Ce=e.measureUnits)==null?void 0:Ce.angleUnits,e.locale,(Ge=e.decimals)==null?void 0:Ge.angle),...e.xAngleLabelOpts}),Ye.push({position:Pt.yAnglePosition,id:Y(),text:ce(Pt.yAngle||0,(Ne=e.measureUnits)==null?void 0:Ne.angleUnits,e.locale,(He=e.decimals)==null?void 0:He.angle),...e.yAngleLabelOpts})),Object.assign(Pt,{labels:Ye}),Pt.positionsDegreesArray=Pt.positions.map(Ft=>{const lt=Cesium.Cartographic.fromCartesian(Ft,de.scene.globe.ellipsoid);return[se.toDegrees(lt.longitude),se.toDegrees(lt.latitude),lt.height]}),(ft=Pt==null?void 0:Pt.polygonPositions)!=null&&ft.length&&(Pt.polygonPositionsDegreesArray=Pt.polygonPositions.map(Ft=>{const lt=Cesium.Cartographic.fromCartesian(Ft,de.scene.globe.ellipsoid);return[se.toDegrees(lt.longitude),se.toDegrees(lt.latitude),lt.height]})),Q.push(Pt)}),Q});i.createCesiumObject=async()=>T,i.mount=async()=>{const{viewer:Q}=s;return e.autoUpdateLabelPosition&&(n==="VcMeasurementDistance"&&Q.scene.preRender.addEventListener(I),(n==="VcMeasurementRegular"||n==="VcMeasurementRectangle"||n==="VcDrawingRegular"||n==="VcDrawingRectangle")&&Q.scene.preRender.addEventListener(O)),!0},i.unmount=async()=>{const{viewer:Q}=s;return e.autoUpdateLabelPosition&&(n==="VcMeasurementDistance"&&Q.scene.preRender.removeEventListener(I),(n==="VcMeasurementRegular"||n==="VcMeasurementRectangle"||n==="VcDrawingRegular"||n==="VcDrawingRectangle")&&Q.scene.preRender.removeEventListener(O)),!0};const x=(Q,G)=>{const{defined:J,SceneMode:oe,Cartesian3:Y,IntersectionTests:X,Plane:se,SceneTransforms:re,Ray:de}=Cesium,{viewer:ce}=s,he=ce.scene,ge=he.camera,Pe=ge.direction,Ie=he.frameState.mapProjection.ellipsoid,_e=Q.positions,Ee=_e[0];let De=Ee,Se=_e[1],xe=Q.draggingPlane,je=Q.surfaceNormal,K=je;if(he.mode===oe.COLUMBUS_VIEW){K=Y.UNIT_X;const Ae=Ie.cartesianToCartographic(Ee,{});De=he.mapProjection.project(Ae,{}),Y.fromElements(De.z,De.x,De.y,De)}let ve=Y.cross(K,Pe,{});ve=Y.cross(K,ve,ve),ve=Y.normalize(ve,ve),xe=se.fromPointNormal(De,ve,xe);const Te=ge.getPickRay(G,new de);if(Se=X.rayPlane(Te,xe,{}),J(Se)){if(he.mode===oe.COLUMBUS_VIEW){Se=Y.fromElements(Se.y,Se.z,Se.x,Se);const It=he.mapProjection.unproject(Se,{});Se=Ie.cartographicToCartesian(It,Se)}(qt(Cesium.VERSION,"1.121")?re.worldToWindowCoordinates:re.wgs84ToWindowCoordinates)(he,_e[0],{}).y<G.y&&(je=Y.negate(je,{}));let Ae=Y.subtract(Se,Ee,{});return Ae=Y.projectVector(Ae,je,Ae),Se=Y.add(Ee,Ae,Se),Se}},B=Q=>{const{Cartesian3:G,Math:J,defined:oe}=Cesium,{viewer:Y}=s,X=Y.scene.frameState.mapProjection.ellipsoid,se=Q.positions[0],re=Q.positions[1],de=X.cartesianToCartographic(se,{});if(!oe(de))return;const ce=X.cartesianToCartographic(re,{}),he=de.height,ge=ce.height;let Pe,Ie,_e,Ee;he<ge?(Pe=se,Ie=re,Ee=ge,_e=he):(Pe=re,Ie=se,Ee=he,_e=ge);const De=Q.xyPolylinePositions;if(De===void 0)return;De[0]=Pe,De[2]=Ie;let Se=X.geodeticSurfaceNormal(Pe,{});Se=G.multiplyByScalar(Se,Ee-_e,Se);const xe=G.add(Pe,Se,De[1]);if(!(G.equalsEpsilon(xe,Ie,J.EPSILON10)&&G.equalsEpsilon(xe,Pe,J.EPSILON10))){let je=G.subtract(Ie,xe,{}),K=G.subtract(Pe,xe,{});const ve=Math.min(G.magnitude(je),G.magnitude(K)),Te=15<ve?.15*ve:.25*ve;je=G.normalize(je,je),K=G.normalize(K,K),je=G.multiplyByScalar(je,Te,je),K=G.multiplyByScalar(K,Te,K);const Ae=Q.xyBoxPositions;if(Ae===void 0)return;G.add(xe,je,Ae[0]),G.add(Ae[0],K,Ae[1]),G.add(xe,K,Ae[2]),Q.xLabelPosition=G.midpoint(xe,Ie,{}),Q.yLabelPosition=G.midpoint(Pe,xe,{}),Q.xAnglePosition=Ie,Q.yAnglePosition=Pe;const It=G.subtract(xe,Ie,{}),pn=G.subtract(xe,Pe,{});let Ze=G.subtract(Ie,Pe,{});Q.yAngle=G.angleBetween(pn,Ze),Ze=G.negate(Ze,Ze),Q.xAngle=G.angleBetween(It,Ze),Q.xDistance=G.magnitude(It),Q.yDistance=G.magnitude(pn)}},O=()=>{C.value.forEach((Q,G)=>{var J;const oe=Q.polygonPositions;if(!(oe.length<2)){const{defined:Y,SceneTransforms:X,Cartesian2:se,HorizontalOrigin:re}=Cesium,{viewer:de}=s,ce=de.scene;let he=Q.positions[0];const ge=qt(Cesium.VERSION,"1.121")?X.worldToWindowCoordinates:X.wgs84ToWindowCoordinates,Pe=ge(ce,he,{});let Ie=Y(Pe)?se.clone(Pe,{}):se.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),_e=Ie.y;const Ee=((J=T.value)==null?void 0:J.cesiumObject)._primitives.filter(Se=>Se instanceof Cesium.LabelCollection)[G]._labels,De=Ee[Ee.length-1];if(!De)return;for(let Se=1;Se<oe.length;Se++){const xe=ge(ce,oe[Se],{});if(Y(xe)){const je=(Ie.y-xe.y)/(xe.x-Ie.x),K=Ee[Se-1];K&&K!==De&&Y(K==null?void 0:K.horizontalOrigin)&&(K.horizontalOrigin=0<je?re.LEFT:re.RIGHT),xe.y<_e&&(_e=xe.y,he=oe[Se]),Ie=se.clone(xe,Ie)}Q.drawStatus===Ve.AfterDraw&&(De.position=he)}}})},I=()=>{C.value.forEach((Q,G)=>{var J,oe,Y;const{defined:X,SceneTransforms:se,HorizontalOrigin:re}=Cesium,{viewer:de}=s,ce=de.scene,he=(J=T.value)==null?void 0:J.cesiumObject,ge=Q.positions,Pe=ge[0],Ie=ge[1],_e=qt(Cesium.VERSION,"1.121")?se.worldToWindowCoordinates:se.wgs84ToWindowCoordinates,Ee=_e(ce,Pe,{}),De=_e(ce,Ie,{});if(X(Ee)&&X(De)){const Se=he._primitives.filter(xe=>xe instanceof Cesium.LabelCollection);if(Se.length){const xe=Se[G].get(0);let je,K,ve,Te;e.showComponentLines&&(je=Se[G].get(2),K=Se[G].get(3),ve=kt((oe=e.yLabelOpts)==null?void 0:oe.pixelOffset),Te=kt((Y=e.xAngleLabelOpts)==null?void 0:Y.pixelOffset)),(Ee.y-De.y)/(De.x-Ee.x)>0?(!ci(je)&&!ci(ve)&&(ve.x=-9,je.pixelOffset=ve,je.horizontalOrigin=re.RIGHT),!ci(K)&&!ci(Te)&&(Te.x=12,K.pixelOffset=Te,K.horizontalOrigin=re.LEFT),xe.horizontalOrigin=re.LEFT):(!ci(je)&&!ci(ve)&&(ve.x=9,je.pixelOffset=ve,je.horizontalOrigin=re.LEFT),!ci(K)&&!ci(Te)&&(Te.x=-12,K.pixelOffset=Te,K.horizontalOrigin=re.RIGHT),xe.horizontalOrigin=re.RIGHT)}}})},V=(Q,G)=>{const{defined:J,defaultValue:oe,Cartesian3:Y}=Cesium,{viewer:X}=s,se=X.scene,re=Q.positions;re[0]=G;const de=se.frameState.mapProjection.ellipsoid,ce=de.cartesianToCartographic(G,{}),he=se.globe;ce.height=J(he)?oe(he.getHeight(ce),0):0,re[1]=de.cartographicToCartesian(ce,{}),Q.distance=Y.distance(re[0],re[1]),Q.labelPosition=Y.midpoint(re[0],re[1],{})},j=()=>{const{Cartesian3:Q,Plane:G}=Cesium,J={positions:[new Q,new Q],show:!1,drawStatus:Ve.BeforeDraw,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};n==="VcMeasurementVertical"&&Object.assign(J,{draggingPlane:new G(Q.UNIT_X,0),surfaceNormal:new Q}),W.value.push(J),p.value=Ve.BeforeDraw,g.value=!0,h.value=m.value.drawingTipStart},N=(Q=!0)=>{Q&&p.value===Ve.Drawing&&W.value.pop();const G=S.value?S.value._vcPolylineIndx:W.value.length-1,J=W.value[G];J&&(J.drawStatus=Ve.AfterDraw),p.value=Ve.AfterDraw,g.value=!1,v.value=[0,0,0]},H=(Q,G)=>{var J;const{viewer:oe,drawingFabInstance:Y,selectedDrawingActionInstance:X,getWorldPosition:se}=s,re=Y==null?void 0:Y.proxy;if(G.button===2&&G.ctrl){const Se=re.getDrawingActionInstance(d);re.toggleAction(Se),u.nextTick(()=>{l("drawEvt",{name:d,finished:!0,windowPoistion:Q,type:"cancel"},oe)});return}p.value===Ve.AfterDraw&&j();const de=S.value?S.value._vcPolylineIndx:W.value.length-1,ce=W.value[de],he=ce.positions,ge=S.value?S.value._index:ce.positions.length-1;if(G.button===2&&S.value){re.editingActionName=void 0,ce.positions[S.value._index]=y,p.value=Ve.AfterDraw,ce.drawStatus=Ve.AfterDraw,S.value=void 0,h.value=m.value.drawingTipStart,g.value=Cesium.defined(X),n==="VcMeasurementHeight"&&V(ce,y),u.nextTick(()=>{l("drawEvt",Object.assign({name:d,index:de,pointIndex:ge,renderDatas:W,finished:!0,windowPoistion:Q,type:"cancel"},C.value[de]),oe)});return}if(G.button!==0)return;const{defined:Pe}=Cesium;let Ie="new",_e,Ee=!1;const De=oe.scene;if(p.value===Ve.BeforeDraw){const Se=se(De,Q,{});if(!Pe(Se))return;if(he[0]=Se,he[1]=Se,ce.show=!0,p.value=Ve.Drawing,ce.drawStatus=Ve.Drawing,h.value=m.value.drawingTipEnd,_e=Se,Ee=!1,n==="VcMeasurementVertical"){const xe=De.frameState.mapProjection.ellipsoid;ce.surfaceNormal=xe.geodeticSurfaceNormal(Se,ce.surfaceNormal)}n==="VcMeasurementHeight"&&(V(ce,Se),Ee=!0,ce.drawStatus=Ve.AfterDraw,p.value=Ve.AfterDraw,h.value=m.value.drawingTipStart,e.mode===1&&re.toggleAction(X)),n==="VcAnalysisViewshed"&&(ce.viewshedOpts={...e.viewshedOpts})}else{if(ce.drawStatus=Ve.AfterDraw,p.value=Ve.AfterDraw,S.value){if(zt().hasTouch===!0){const Se=se(De,Q,{});Pe(Se)&&(ce.positions.splice(S.value._index,1,Se),S.value.pixelSize=((J=e.pointOpts)==null?void 0:J.pixelSize)*1)}S.value=void 0,re.editingActionName=void 0,g.value=!1,v.value=[0,0,0],Ie=_.value,X&&(h.value=m.value.drawingTipStart,g.value=!0)}else{if(n!=="VcMeasurementVertical"&&zt().hasTouch===!0){const Se=se(De,Q,{});if(Pe(Se)){const xe=ce.positions;xe[1]=Se}}e.mode===1&&re.toggleAction(X)}Ee=!0,_e=ce.positions[1]}u.nextTick(()=>{l("drawEvt",Object.assign({index:de,pointIndex:ge,renderDatas:W,name:d,finished:Ee,position:_e,windowPoistion:Q,type:Ie},C.value[de]),oe)})},ne=Q=>{const{viewer:G,getWorldPosition:J}=s,oe=G.scene,Y=J(oe,Q,{}),{defined:X,Cartographic:se}=Cesium;if(!X(Y)||(v.value=Y,p.value!==Ve.Drawing)||n==="VcMeasurementVertical"&&oe.mode===Cesium.SceneMode.SCENE2D)return;const re=S.value?S.value._vcPolylineIndx:W.value.length-1,de=W.value[re],ce=S.value?S.value._index:de.positions.length-1;if(n==="VcMeasurementVertical"){const he=x(de,Q);if(!ci(he)){const ge=de.positions.slice();ge[S.value?S.value._index:1]=he,de.positions=ge}}else if(n==="VcMeasurementHeight")V(de,Y);else if(n==="VcDrawingRectangle"||n==="VcDrawingRegular"||n==="VcMeasurementRegular"||n==="VcMeasurementRectangle"){const he=de.positions,ge=he[0],Pe=se.fromCartesian(ge,G.scene.globe.ellipsoid),Ie=se.fromCartesian(Y,G.scene.globe.ellipsoid);!e.clampToGround&&(Ie.height=Pe.height),he[S.value?S.value._index:1]=se.toCartesian(Ie,G.scene.globe.ellipsoid)}else if(n==="VcAnalysisSightline"){const he=de.positions;if(S.value){const ge=S.value._index>0?1:0;he[ge]=Y}else he[1]=Y}else{const he=de.positions.slice();he[S.value?S.value._index:1]=Y,de.positions=he}u.nextTick(()=>{l("drawEvt",Object.assign({index:re,pointIndex:ce,renderDatas:W,name:d,finished:!1,position:de.positions[1],windowPoistion:Q,type:S.value?_:"new"},C.value[re]),G)})},ie=Q=>{var G,J,oe;if(P.value=[0,0,0],b.value=!1,!e.editable)return;_.value=Q;const{viewer:Y,drawingFabInstance:X}=s;if(Q==="move"){h.value=m.value.drawingTipEditing,p.value=Ve.Drawing,S.value=w.value,y=W.value[S.value._vcPolylineIndx].positions[S.value._index],g.value=!0;const se=X==null?void 0:X.proxy;se.editingActionName=d}else if(Q==="remove"){const se=w.value._vcPolylineIndx;W.value[se].positions.splice(w.value._index,1)}else if(Q==="removeAll"){const se=w.value._vcPolylineIndx;W.value.splice(se,1)}else{const se=w.value._vcPolylineIndx,re=W.value[se];(oe=(J=(G=e.editorOpts)==null?void 0:G[Q])==null?void 0:J.callback)==null||oe.call(J,se,re)}l("editorEvt",{type:Q,renderDatas:W,name:d,index:w.value._vcPolylineIndx,pointIndex:w.value._index,point:w.value},Y)},ee={computedRenderDatas:C,renderDatas:W,startNew:j,stop:N,clear:()=>{W.value=[],N()},handleMouseClick:H,handleMouseMove:ne};return Object.assign(i.proxy,ee),()=>{var Q,G,J;const{createGuid:oe}=Cesium,Y=[];if(C.value.forEach((X,se)=>{var re;const de=n==="VcDrawingRectangle"||n==="VcDrawingRegular"||n==="VcMeasurementRegular"||n==="VcMeasurementRectangle",ce=de?(re=X.polygonPositions)==null?void 0:re.slice():X.positions;de&&(ce==null||ce.push(ce[0]));const he=Object.assign({},e.polylineOpts,X.polylineOpts);e.clampToGround&&delete he.arcType;const ge=Object.assign({},e.primitiveOpts,X.primitiveOpts);if(ce!=null&&ce.length&&(ce==null?void 0:ce.length)>1&&(Y.push(u.h(e.clampToGround?Ks:Br,{...ge,show:X.show&&ge.show||e.editable||X.drawStatus===Ve.Drawing,onReady:Ie=>{var _e;(_e=ge==null?void 0:ge.onReady)==null||_e.call(ge,Ie),Ie.cesiumObject._vcPolylineIndex=se}},()=>u.h(Rr,{id:oe()},()=>u.h(e.clampToGround?el:Vr,{positions:ce,...he})))),n==="VcAnalysisViewshed"&&Y.push(u.h(Af,{...X.viewshedOpts}))),X.polygonPositions&&X.polygonPositions.length>2){const Ie=Object.assign({},e==null?void 0:e.polygonOpts,X==null?void 0:X.polygonOpts);Ie.clampToGround=e.clampToGround,Y.push(u.h(ao,{positions:ce,show:X.show&&(Ie==null?void 0:Ie.show),...Ie,onReady:_e=>{var Ee;Z(_e),(Ee=Ie==null?void 0:Ie.onReady)==null||Ee.call(Ie,_e),_e.cesiumObject._vcPolylineIndex=se}}))}X.xyPolylinePositions&&X.xyPolylinePositions.length>1&&Y.push(u.h(Br,{show:X.show&&ge||e.editable||X.drawStatus===Ve.Drawing,...ge,onReady:Ie=>{var _e;(_e=ge==null?void 0:ge.onReady)==null||_e.call(ge,Ie),Ie.cesiumObject._vcPolylineIndex=se}},()=>u.h(Rr,{id:oe()},()=>u.h(Vr,{positions:X.xyPolylinePositions,...he})))),X.xyBoxPositions&&X.xyBoxPositions.length>1&&Y.push(u.h(Br,{show:X.show&&ge||e.editable||X.drawStatus===Ve.Drawing,...ge},()=>u.h(Rr,{id:oe()},()=>u.h(Vr,{positions:X.xyBoxPositions,...he}))));const Pe=Object.assign({},e.pointOpts,X.pointOpts);Y.push(u.h(zo,{enableMouseEvent:e.enableMouseEvent,show:X.show,points:X.points.map((Ie,_e)=>{const Ee=Ie.position,De=Object.assign({},Pe,Ie);return{position:Ee,id:oe(),_vcPolylineIndx:se,...De,show:((De==null?void 0:De.show)||e.editable||X.drawStatus===Ve.Drawing)&&(n==="VcAnalysisSightline"&&X.positions.length===3?_e!==1:!0)}}),onMouseover:M,onMouseout:A,onReady:L})),Y.push(u.h(ko,{enableMouseEvent:e.enableMouseEvent,show:X.show,labels:X.labels,onReady:U}))}),(Q=e.drawtip)!=null&&Q.show&&g.value){const{viewer:X}=s;Y.push(u.h(Fr,{position:v.value,pixelOffset:(G=e.drawtip)==null?void 0:G.pixelOffset,teleport:{to:X.container}},()=>u.h("div",{class:"vc-drawtip vc-tooltip--style"},h.value)))}if(b.value){const X=[];if(w.value){const re=e.editorOpts;for(const de in re)if(!Array.isArray(re[de])&&typeof re[de]!="number"){const ce={...re[de]};delete ce.color,X.push(u.h(zn,{style:{color:re[de].color,background:re[de].background},...ce,onclick:ie.bind(void 0,de)},()=>u.h(mn,{...re[de].tooltip},()=>{var he;return u.h("strong",null,((he=re[de].tooltip)==null?void 0:he.tip)||a(`vc.measurement.editor.${de}`))})))}}const{viewer:se}=s;Y.push(u.h(Fr,{position:P.value,pixelOffset:(J=e.editorOpts)==null?void 0:J.pixelOffset,teleport:{to:se.container},onMouseenter:D,onMouseleave:z},()=>u.h("div",{class:"vc-editor"},X)))}return u.h(oo,{ref:T,show:e.show,onReady:$},()=>Y)}}var yg=u.defineComponent({name:"VcMeasurementDistance",props:{...Tn,showComponentLines:{type:Boolean,default:!1},measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,xLabelOpts:Object,xAngleLabelOpts:Object,yLabelOpts:Object,yAngleLabelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:Yt,setup(e,t){return $r(e,t,"VcMeasurementDistance")}});function La(e,t,n){const i=u.getCurrentInstance(),r=rt(e,t,i);if(r===void 0)return;const{t:a}=Qt(),s=r.$services,{emit:l}=t,{drawingType:d,drawTip:h,drawTipOpts:m,drawStatus:p,canShowDrawTip:g,drawTipPosition:v,showEditor:b,editorPosition:P,mouseoverPoint:w,editingPoint:S,primitiveCollectionRef:T,editorType:_,onMouseoverPoints:M,onMouseoutPoints:A,onMouseenterEditor:D,onMouseleaveEditor:z,onPrimitiveCollectionReady:$,onVcCollectionPointReady:L,onVcCollectionLabelReady:U,onVcPrimitiveReady:Z}=vg(e,t,i,n,s);let W,y;const C=10,x=u.ref([]);e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach(G=>{const J={show:!0,positions:Mi(G),tempPositions:[],drawStatus:Ve.AfterDraw,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};x.value.push(J)});const B=u.computed(()=>{const{Cartesian3:G,createGuid:J,defined:oe,Math:Y}=Cesium,X=[],{viewer:se}=s,re=e.angleFormatter||Bn.angleToString,de=e.distanceFormatter||Bn.distanceToString,ce=e.areaFormatter||Bn.areaToString;return x.value.forEach((he,ge)=>{var Pe,Ie,_e,Ee,De,Se,xe,je,K;const ve=u.reactive([]),Te=[],Ae=[];let It=0;const pn=[];he.points=he.positions.map(Ce=>({position:Ce}));const Ze=he.positions.slice();if(n==="VcAnalysisSightline"){const Ce=Ze.shift();Ce&&Ze.forEach(Ge=>{const Ne=[];Ne.push(Ce);const He=[];T.value.cesiumObject._primitives.forEach(Ye=>{Ye instanceof Cesium.PointPrimitiveCollection&&He.push(...Ye._pointPrimitives),Ye instanceof Cesium.Primitive&&He.push(Ye)});const ft=WC(Ce,Ge,s.viewer,He);oe(ft)&&Ne.push(ft),Ne.push(Ge);let gt=0;const tt=[];for(let Ye=0;Ye<Ne.length-1;Ye++){const Vi=G.distance(Ne[Ye],Ne[Ye+1]);tt.push(Vi),gt=gt+Vi}X.push({...he,positions:Ne,distance:gt,distances:tt})})}else{e.loop&&Ze.length>2&&Ze.push(Ze[0]);for(let Ne=0;Ne<Ze.length-1;Ne++){let He=0;((Pe=e.polylineOpts)==null?void 0:Pe.arcType)===0?He=sh(Ze[Ne],Ze[Ne+1],s.viewer.scene.globe.ellipsoid):He=G.distance(Ze[Ne],Ze[Ne+1]),Te.push(He),It=It+He;const ft=Object.assign({},e.labelsOpts,he.labelsOpts);if(He>0&&Ze.length>2&&e.showDistanceLabel&&ve.push({text:de(He,(Ie=e.measureUnits)==null?void 0:Ie.distanceUnits,e.locale,(_e=e.decimals)==null?void 0:_e.distance),position:G.midpoint(Ze[Ne],Ze[Ne+1],{}),id:J(),...ft}),Ze.length>2&&e.showAngleLabel&&(Ne>0||e.loop)){const gt=Ze[Ne===0?Ze.length-2:Ne-1],tt=Ze[Ne],Ye=Ze[Ne+1],Vi=G.subtract(gt,tt,{}),Go=G.subtract(Ye,tt,{});let Uo=0;G.ZERO.equals(Vi)||G.ZERO.equals(Go)||(Uo=G.angleBetween(Vi,Go)),Ae.push(Uo),ve.push({text:re(Uo,(Ee=e.measureUnits)==null?void 0:Ee.angleUnits,e.locale,(De=e.decimals)==null?void 0:De.angle),position:tt,id:J(),...ft})}e.showDashedLine&&(pn.push({positions:[Ze[Ne],O(Ze[Ne])]}),Ne===Ze.length-2&&pn.push({positions:[Ze[Ne+1],O(Ze[Ne+1])]}))}const Ce=GC(Ze),Ge=Object.assign({},e.labelOpts,he.labelOpts);e.showLabel&&Ze.length&&(n.includes("Area")?ve.push({text:ce(Ce,(Se=e.measureUnits)==null?void 0:Se.areaUnits,e.locale,(xe=e.decimals)==null?void 0:xe.area),position:Ze[Ze.length-1],id:J(),...Ge}):ve.push({text:de(It,(je=e.measureUnits)==null?void 0:je.distanceUnits,e.locale,(K=e.decimals)==null?void 0:K.distance),position:Ze[Ze.length-1],id:J(),...Ge})),he.positionsDegreesArray=he.positions.map(Ne=>{const He=Cesium.Cartographic.fromCartesian(Ne,se.scene.globe.ellipsoid);return[Y.toDegrees(He.longitude),Y.toDegrees(He.latitude),He.height]}),X.push({...he,labels:ve,distance:It,distances:Te,area:Ce,angles:Ae,dashedLines:pn})}}),X});i.mount=async()=>{const{viewer:G}=s;return e.autoUpdateLabelPosition&&G.scene.preRender.addEventListener(I),!0},i.unmount=async()=>{const{viewer:G}=s;return e.autoUpdateLabelPosition&&G.scene.preRender.removeEventListener(I),!0};const O=G=>{const{defined:J,defaultValue:oe}=Cesium,{viewer:Y}=s,X=Y.scene,se=X.globe,re=X.frameState.mapProjection.ellipsoid,de=re.cartesianToCartographic(G);return de.height=J(se)?oe(se.getHeight(de),0):0,re.cartographicToCartesian(de)},I=()=>{B.value.forEach((G,J)=>{var oe,Y;const X=G.positions;if(!(X.length<2)){const{defined:se,SceneTransforms:re,Cartesian2:de,HorizontalOrigin:ce}=Cesium,{viewer:he}=s,ge=he.scene;let Pe=X[0];const Ie=qt(Cesium.VERSION,"1.121")?re.worldToWindowCoordinates(ge,Pe,{}):re.wgs84ToWindowCoordinates(ge,Pe,{});let _e=se(Ie)?de.clone(Ie,{}):de.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),Ee=_e.y;const De=((oe=T.value)==null?void 0:oe.cesiumObject)._primitives.filter(xe=>xe instanceof Cesium.LabelCollection)[J]._labels,Se=De[De.length-1];for(let xe=1;xe<X.length;xe++){const je=qt(Cesium.VERSION,"1.121")?re.worldToWindowCoordinates(ge,X[xe],{}):re.wgs84ToWindowCoordinates(ge,X[xe],{});if(se(je)){const K=(_e.y-je.y)/(je.x-_e.x);De[xe-1]!==Se&&se((Y=De[xe-1])==null?void 0:Y.horizontalOrigin)&&(De[xe-1].horizontalOrigin=0<K?ce.LEFT:ce.RIGHT),je.y<Ee&&(Ee=je.y,Pe=X[xe]),_e=de.clone(je,_e)}G.drawStatus===Ve.AfterDraw&&(Se.position=Pe)}}})},V=()=>{const G={show:!1,positions:[],tempPositions:[],drawStatus:Ve.BeforeDraw,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};if(n==="VcMeasurementHorizontal"){const{Cartesian3:J,Plane:oe}=Cesium;Object.assign(G,{dashedLines:[],heightPlane:new oe(J.UNIT_X,0),heightPlaneCV:new oe(J.UNIT_X,0),height:0,firstMove:!1,tempNextPos:new J})}p.value=Ve.BeforeDraw,x.value.push(G),g.value=!0,h.value=m.value.drawingTipStart},j=(G=!0)=>{G&&p.value===Ve.Drawing&&x.value.pop();const J=S.value?S.value._vcPolylineIndex:x.value.length-1,oe=x.value[J];oe&&(oe.positions=oe.tempPositions,oe.drawStatus=Ve.AfterDraw),p.value=Ve.AfterDraw,g.value=!1,v.value=[0,0,0]},N=(G,J)=>{var oe;const{viewer:Y,drawingFabInstance:X,getWorldPosition:se,selectedDrawingActionInstance:re}=s,de=X==null?void 0:X.proxy;if(J.button===2&&J.ctrl){const ve=de.getDrawingActionInstance(d);de.toggleAction(ve),u.nextTick(()=>{l("drawEvt",{name:d,finished:!0,windowPoistion:G,type:"cancel"},Y)});return}p.value===Ve.AfterDraw&&V();const{defined:ce,Cartesian2:he,Plane:ge,Cartesian3:Pe}=Cesium,Ie=S.value?S.value._vcPolylineIndex:x.value.length-1,_e=x.value[Ie],Ee=_e.tempPositions,De=S.value?S.value._index:_e.positions.length-1;if(J.button===2&&S.value){_.value==="insert"?_e.positions.splice(S.value._index,1):_e.positions[S.value._index]=y,p.value=Ve.AfterDraw,_e.drawStatus=Ve.AfterDraw,S.value=void 0,h.value=m.value.drawingTipStart,de.editingActionName=void 0,g.value=ce(re),u.nextTick(()=>{l("drawEvt",Object.assign({index:Ie,pointIndex:De,name:d,renderDatas:x,finished:!0,windowPoistion:G,type:"cancel"},B.value[Ie]),Y)});return}if(W=W||new Cesium.Cartesian2(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),he.magnitude(he.subtract(W,G,{}))<C||(J.button===2&&p.value===Ve.Drawing&&Ee.length>1&&(Ee.pop(),H(G)),J.button!==0))return;const Se=Y.scene,xe=se(Se,G,{});if(!ce(xe))return;let je=!1,K="new";if(n==="VcMeasurementHorizontal"){if(S.value)p.value=Ve.AfterDraw,S.value=void 0,je=!0,K=_.value,h.value=m.value.drawingTipStart;else if(Ee.length===0){const ve=Se.frameState.mapProjection.ellipsoid;Ee.push(xe),_e.positions=Ee,_e.heightPlane=ge.fromPointNormal(xe,ve.geodeticSurfaceNormal(xe,{}),_e.heightPlane);const Te=ve.cartesianToCartographic(xe,{}),Ae=Se.mapProjection.project(Te,{}),It=Pe.fromElements(Ae.z,Ae.x,Ae.y,Ae);_e.heightPlaneCV=ge.fromPointNormal(It,Pe.UNIT_X,_e.heightPlaneCV),_e.height=Te.height,_e.firstMove=!0,_e.drawStatus=Ve.Drawing,_e.show=!0,p.value=Ve.Drawing}else Ee.push(_e.tempNextPos),_e.positions=Ee,_e.firstMove=!0;h.value=m.value.drawingTipEnd}else{if(S.value){if(zt().hasTouch===!0){const ve=se(Se,G,{});ce(ve)&&(_e.positions.splice(S.value._index,1,ve),S.value.pixelSize=((oe=e.pointOpts)==null?void 0:oe.pixelSize)*1)}p.value=Ve.AfterDraw,S.value=void 0,je=!0,K=_.value,h.value=m.value.drawingTipStart}else Ee.push(xe),_e.positions=Ee,_e.show=!0,_e.drawStatus=Ve.Drawing,p.value=Ve.Drawing,g.value=!0,h.value=m.value.drawingTipEnd;K!=="new"&&(de.editingActionName=void 0,g.value=ce(re))}he.clone(G,W),u.nextTick(()=>{l("drawEvt",Object.assign({index:Ie,pointIndex:De,name:d,renderDatas:x,finished:je,position:n==="VcMeasurementHorizontal"?_e.positions[_e.positions.length-1]:xe,windowPoistion:G,type:K},B.value[Ie]),Y)})},H=(G,J)=>{const{viewer:oe,getWorldPosition:Y}=s,X=oe.scene,se=Y(X,G,{}),{defined:re}=Cesium;if(!re(se)||(v.value=se,p.value!==Ve.Drawing))return;const de=S.value?S.value._vcPolylineIndex:x.value.length-1,ce=x.value[de],he=S.value?S.value._index:ce.positions.length-1;let ge="new";if(n==="VcMeasurementHorizontal"){const{SceneMode:Pe,IntersectionTests:Ie,Cartesian3:_e}=Cesium,Ee=X.frameState.mapProjection.ellipsoid,De=ce.positions,Se=X.camera.getPickRay(G);let xe,je;if(X.mode===Pe.SCENE3D&&ce.heightPlane)xe=Ie.rayPlane(Se,ce.heightPlane);else if(X.mode===Pe.COLUMBUS_VIEW&&ce.heightPlaneCV)xe=Ie.rayPlane(Se,ce.heightPlaneCV),xe=_e.fromElements(xe.y,xe.z,xe.x,xe),je=X.mapProjection.unproject(xe),xe=Ee.cartographicToCartesian(je);else if(xe=X.camera.pickEllipsoid(G,Ee),re(xe)){const K=Ee.cartesianToCartographic(xe);K.height=ce.height||0,xe=Ee.cartographicToCartesian(K,xe)}if(!re(xe))return;if(!ce.firstMove&&J!=null&&J.shift){const K=De[De.length-2],ve=ce.tempNextPos,Te=_e.subtract(ve,K,{});let Ae=_e.subtract(xe,K,{});Ae=_e.projectVector(Ae,Te,Ae),xe=_e.add(K,Ae,xe)}if(S.value)ce.positions.splice(S.value._index,1,xe),ge=_.value;else{const K=ce.tempPositions.slice();K.push(xe),ce.positions=K,ce.firstMove=!1,ce.tempNextPos=Object.assign(xe),h.value=m.value.drawingTipEnd}}else if(S.value)ce.positions.splice(S.value._index,1,se),ge=_.value;else{const Pe=ce.tempPositions.slice();Pe.push(se),ce.positions=Pe}u.nextTick(()=>{l("drawEvt",Object.assign({index:de,pointIndex:he,name:d,renderDatas:x,finished:!1,position:n==="VcMeasurementHorizontal"?ce.positions[ce.positions.length-1]:se,windowPoistion:G,type:ge},B.value[de]),oe)})},ne=G=>{const{drawingFabInstance:J,selectedDrawingActionInstance:oe,viewer:Y}=s;if(p.value===Ve.Drawing){const X=S.value?S.value._vcPolylineIndex:x.value.length-1,se=x.value[X],re=S.value?S.value._index:se.positions.length-1;j(!1),h.value=m.value.drawingTipStart,u.nextTick(()=>{l("drawEvt",Object.assign({index:X,pointIndex:re,name:d,renderDatas:x,finished:!0,position:se.positions[se.positions.length-1],windowPoistion:G,type:"new"},B.value[X]),Y),e.mode===1&&(J==null?void 0:J.proxy).toggleAction(oe)})}},ie=()=>{let G=S.value._vcPolylineIndex,J=S.value._index;if(n==="VcAnalysisSightline")for(let oe=0;oe<x.value.length;oe++){const Y=x.value[oe];for(let X=0;X<Y.positions.length;X++){const se=Y.positions[X];S.value.position.equals(se)&&(G=oe,J=X)}}return[G,J]},ee=G=>{var J,oe,Y;if(P.value=[0,0,0],b.value=!1,!e.editable)return;const{viewer:X,drawingFabInstance:se}=s,re=se==null?void 0:se.proxy;if(_.value=G,G==="move"){h.value=m.value.drawingTipEditing,p.value=Ve.Drawing,S.value=w.value,g.value=!0;const de=ie();S.value._vcPolylineIndex=de[0],S.value._index=de[1],y=x.value[de[0]].positions[de[1]],re.editingActionName=d}else if(G==="insert"){const de=w.value._vcPolylineIndex;x.value[de].positions.splice(w.value._index,0,w.value.position),S.value=w.value,g.value=!0,p.value=Ve.Drawing,h.value=m.value.drawingTipEditing,re.editingActionName=d}else if(G==="remove"){const de=w.value._vcPolylineIndex,ce=x.value[de];ce.positions.length>2&&ce.positions.splice(w.value._index,1)}else if(G==="removeAll"){const de=w.value._vcPolylineIndex;x.value.splice(de,1)}else{const de=w.value._vcPolylineIndex,ce=x.value[de];(Y=(oe=(J=e.editorOpts)==null?void 0:J[G])==null?void 0:oe.callback)==null||Y.call(oe,de,ce)}l("editorEvt",{type:G,renderDatas:x,name:d,polylineIndex:w.value._vcPolylineIndex,pointIndex:w.value._index,point:w.value},X)},Q={computedRenderDatas:B,renderDatas:x,startNew:V,stop:j,clear:()=>{x.value=[],j()},handleMouseClick:N,handleMouseMove:H,handleDoubleClick:ne};return Object.assign(i.proxy,Q),()=>{var G,J;const{createGuid:oe,Cartesian3:Y}=Cesium,X=[],se=[];if(B.value.forEach((re,de)=>{var ce,he;const ge=re.positions.slice();if(ge.length>1){re.loop&&ge.push(ge[0]);const Ee=Object.assign({},e.polylineOpts,re.polylineOpts);e.clampToGround&&delete Ee.arcType;const De=Object.assign({},e.primitiveOpts,re.primitiveOpts);X.push(u.h(e.clampToGround?Ks:Br,{show:re.show&&De.show||e.editable||re.drawStatus===Ve.Drawing,...De,onReady:Se=>{var xe;(xe=De==null?void 0:De.onReady)==null||xe.call(De,Se),Se.cesiumObject._vcPolylineIndex=de}},()=>u.h(Rr,{id:oe()},()=>u.h(e.clampToGround?el:Vr,{positions:ge,...Ee}))))}const Pe=Object.assign({},e.dashLineOpts,re.dashLineOpts),Ie=Object.assign({},e.dashLinePrimitiveOpts,re.dashLinePrimitiveOpts);(ce=re.dashedLines)==null||ce.forEach(Ee=>{X.push(u.h(Br,{show:re.show&&e.dashLinePrimitiveOpts.show||e.editable||re.drawStatus===Ve.Drawing,...Ie},()=>u.h(Rr,{id:oe()},()=>u.h(Vr,{positions:Ee.positions,...Pe}))))});const _e=Object.assign({},e.pointOpts,re.pointOpts);if(X.push(u.h(zo,{enableMouseEvent:e.enableMouseEvent,show:re.show,points:re.points.map((Ee,De)=>{var Se;const xe=Ee.position;let je=!1;for(let Te=0;Te<se.length;Te++)Y.equals(xe,se[Te])&&(je=!0);const K=(((Se=e.pointOpts)==null?void 0:Se.show)||e.editable||re.drawStatus===Ve.Drawing)&&(n==="VcAnalysisSightline"&&re.positions.length===3?De!==1:!0)&&!je;n==="VcAnalysisSightline"&&se.push(xe);const ve=Object.assign({},_e,Ee);return{position:xe,id:oe(),_vcPolylineIndex:de,show:K,...ve}}),onMouseover:M,onMouseout:A,onReady:L})),X.push(u.h(ko,{enableMouseEvent:e.enableMouseEvent,show:re.show,labels:re.labels,onReady:U})),ge.length>2&&(n.includes("Polygon")||n.includes("Area"))){const Ee=Object.assign({},e.polygonOpts,re.polygonOpts);X.push(u.h(ao,{positions:ge,clampToGround:e.clampToGround,show:re.show&&((he=e.polygonOpts)==null?void 0:he.show),...Ee,onReady:De=>{var Se;Z(De),(Se=Ee==null?void 0:Ee.onReady)==null||Se.call(Ee,De),De.cesiumObject._vcPolylineIndex=de}}))}}),(G=e.drawtip)!=null&&G.show&&g.value){const{viewer:re}=s;X.push(u.h(Fr,{position:v.value,pixelOffset:e.drawtip.pixelOffset,teleport:{to:re.container}},()=>u.h("div",{class:"vc-drawtip vc-tooltip--style"},h.value)))}if(b.value){const re=[];if(w.value){const ce=e.editorOpts;for(const he in ce)if(!Array.isArray(ce[he])&&typeof ce[he]!="number"){const ge={...ce[he]};delete ge.color,re.push(u.h(zn,{style:{color:ce[he].color,background:ce[he].background},...ge,onclick:ee.bind("polyline",he)},()=>u.h(mn,{...ce[he].tooltip},()=>{var Pe;return u.h("strong",null,((Pe=ce[he].tooltip)==null?void 0:Pe.tip)||a(`vc.drawing.editor.${he}`))})))}}const{viewer:de}=s;X.push(u.h(Fr,{position:P.value,pixelOffset:(J=e.editorOpts)==null?void 0:J.pixelOffset,teleport:{to:de.container},onMouseenter:D,onMouseleave:z},()=>u.h("div",{class:"vc-editor"},re)))}return u.h(oo,{ref:T,show:e.show,onReady:$},()=>X)}}var bg=u.defineComponent({name:"VcMeasurementPolyline",props:{...Tn,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,measureUnits:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:Yt,setup(e,t){return La(e,t,"VcMeasurementPolyline")}}),Cg=u.defineComponent({name:"VcMeasurementHorizontal",props:{...Tn,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,dashLineOpts:Object,dashLinePrimitiveOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDashedLine:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:Yt,setup(e,t){return La(e,t,"VcMeasurementHorizontal")}}),wg=u.defineComponent({name:"VcMeasurementVertical",props:{...Tn,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:Yt,setup(e,t){return $r(e,t,"VcMeasurementVertical")}}),_g=u.defineComponent({name:"VcMeasurementHeight",props:{...Tn,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:Yt,setup(e,t){return $r(e,t,"VcMeasurementHeight")}});function Pg(e,t,n){const i=u.getCurrentInstance(),r=rt(e,t,i);if(r===void 0)return;const{t:a}=Qt(),s=r.$services,{emit:l}=t,{drawingType:d,drawTip:h,drawTipOpts:m,drawStatus:p,canShowDrawTip:g,drawTipPosition:v,showEditor:b,editorPosition:P,mouseoverPoint:w,editingPoint:S,primitiveCollectionRef:T,editorType:_,onMouseoverPoints:M,onMouseoutPoints:A,onMouseenterEditor:D,onMouseleaveEditor:z,onPrimitiveCollectionReady:$,onVcCollectionPointReady:L,onVcCollectionLabelReady:U}=vg(e,t,i,n,s),Z=u.ref([]);let W,y=[];n==="VcDrawingPin"&&e.billboardOpts.image===""&&(e.billboardOpts.image=Cesium.buildModuleUrl("Assets/Textures/pin.svg")),y.push(u.watch(()=>e.editable,ee=>{const{drawingFabInstance:Q,selectedDrawingActionInstance:G}=s;ee&&(G==null?void 0:G.name)===d&&(Q==null?void 0:Q.proxy).toggleAction(G)}));const C=(ee,Q,G)=>{const J=Cesium.Cartographic.fromCartesian(ee,G.globe.ellipsoid),oe=[Cesium.Math.toDegrees(J.longitude),Cesium.Math.toDegrees(J.latitude),J.height];Q.positionDegrees=oe},x=()=>{const{Cartesian3:ee}=Cesium,Q={drawStatus:Ve.Drawing,show:!1,position:new ee,lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}};Z.value.push(Q),p.value=Ve.Drawing,g.value=!0,h.value=m.value.drawingTipStart},B=(ee=!0)=>{ee&&p.value===Ve.Drawing&&Z.value.pop();const Q=S.value?S.value._vcPolylineIndx:Z.value.length-1,G=Z.value[Q];G&&(G.drawStatus=Ve.AfterDraw),p.value=Ve.AfterDraw,g.value=!1,v.value=[0,0,0]},O=(ee,Q)=>{const{viewer:G,drawingFabInstance:J,getWorldPosition:oe,selectedDrawingActionInstance:Y}=s,X=J==null?void 0:J.proxy;if(Q.button===2&&Q.ctrl){const he=X==null?void 0:X.getDrawingActionInstance(d);X==null||X.toggleAction(he),u.nextTick(()=>{l("drawEvt",{name:d,finished:!0,windowPoistion:ee,type:"cancel"},G)});return}const se=S.value?S.value._vcPolylineIndx:Z.value.length-1,re=Z.value[se];if(Q.button===2&&S.value){X.editingActionName=void 0,Z.value[se]=W,p.value=Ve.AfterDraw,Z.value[se].drawStatus=Ve.AfterDraw,S.value=void 0,h.value=m.value.drawingTipStart,g.value=Cesium.defined(Y),u.nextTick(()=>{l("drawEvt",{name:d,index:se,renderDatas:Z,finished:!0,windowPoistion:ee,type:"cancel"},G)});return}if(Q.button!==0)return;const{defined:de}=Cesium;let ce="new";if(p.value===Ve.BeforeDraw){const he=G.scene,ge=oe(he,ee,{});if(!de(ge))return;re.position=ge,re.show=!0,re.drawStatus=Ve.AfterDraw,p.value=Ve.AfterDraw,h.value=m.value.drawingTipStart,u.nextTick(()=>{l("drawEvt",{index:se,renderDatas:Z,name:d,finished:!0,position:ge,windowPoistion:ee,type:ce},G)})}else{p.value=Ve.AfterDraw,re.drawStatus=Ve.AfterDraw;const he=G.scene;if(zt().hasTouch===!0){const ge=oe(he,ee,{});C(ge,re,he),de(ge)&&(re.position=ge,re.show=!0)}S.value?(S.value=void 0,X.editingActionName=void 0,g.value=!1,ce=_.value):e.mode===1&&u.nextTick(()=>{X.toggleAction(Y)}),Y&&(h.value=m.value.drawingTipStart,g.value=!0),u.nextTick(()=>{l("drawEvt",{index:se,renderDatas:Z,name:d,finished:!0,position:Z.value[se].position,positionDegrees:Z.value[se].positionDegrees,windowPoistion:ee,type:ce},G)})}},I=ee=>{const{viewer:Q,getWorldPosition:G}=s,J=Q.scene,{defined:oe,SceneMode:Y}=Cesium;if(J.mode!==Y.MORPHING){const X=G(J,ee,{});if(!oe(X)||(v.value=X,p.value===Ve.AfterDraw&&x(),p.value!==Ve.Drawing))return;const se=S.value?S.value._vcPolylineIndx:Z.value.length-1,re=Z.value[se];re.position=X,C(X,re,J),V(re,ee);const de=S.value?_.value:"new";u.nextTick(()=>{l("drawEvt",{index:se,renderDatas:Z,name:d,finished:!1,position:X,positionDegrees:re.positionDegrees,windowPoistion:ee,type:de},Q)})}},V=(ee,Q)=>{const{viewer:G}=s,J=G.scene,{defined:oe,defaultValue:Y,Math:X,SceneMode:se}=Cesium,re=J.frameState.mapProjection.ellipsoid.cartesianToCartographic(ee.position,{}),de=J.globe;let ce=oe(de)?Y(de.getHeight(re),0):0;ce=e.heightReference===0?re.height:re.height-ce,X.equalsEpsilon(ce,0,X.EPSILON3)&&(ce=0);let he=0;J.mode!==se.SCENE2D&&(Q||(Q=J.cartesianToCanvasCoordinates(ee.position,{})),he=j(J,Q)),ee.show=!0,ee.lng=re.longitude,ee.lat=re.latitude,ee.height=ce,ee.slope=he},j=(ee,Q)=>{const{getWorldPosition:G}=s,{defined:J,Cartesian2:oe,Cartesian3:Y,Math:X}=Cesium,se=G(ee,Q,{});if(J(se)){const re=ee.camera.position,de=Y.distance(se,re),ce=[new Y,new Y,new Y,new Y,new Y],he=new Y,ge=new Y;if(!(1e4<de)){const Pe=ce[0],Ie=ce[1],_e=ce[2],Ee=ce[3];let De=ee.frameState.mapProjection.ellipsoid.geodeticSurfaceNormal(se,he);De=Y.negate(De,De);const Se=oe.clone(Q,ce[0]);Se.x-=2,Se.y-=2;const xe=oe.clone(Q,ce[1]);xe.x-=2,xe.y+=2;const je=oe.clone(Q,ce[2]);je.x+=2,je.y+=2;const K=oe.clone(Q,ce[3]);K.x+=2,K.y-=2;const ve=G(ee,Se,Pe),Te=G(ee,xe,Ie),Ae=G(ee,je,_e),It=G(ee,K,Ee);let pn,Ze,Ce,Ge,Ne,He,ft,gt;J(ve)&&(pn=Y.subtract(ve,se,Pe),Ze=Y.magnitude(pn)/de<=.05?Y.normalize(pn,Pe):void 0),J(Te)&&(Ce=Y.subtract(Te,se,Ie),Ge=Y.magnitude(Ce)/de<=.05?Y.normalize(Ce,Ie):void 0),J(Ae)&&(Ne=Y.subtract(Ae,se,_e),He=Y.magnitude(Ne)/de<=.05?Y.normalize(Ne,_e):void 0),J(It)&&(ft=Y.subtract(It,se,Ee),gt=Y.magnitude(ft)/de<=.05?Y.normalize(ft,Ee):void 0);let tt=Y.clone(Y.ZERO,ge),Ye=ce[4];if(J(Ze)&&J(Ge)&&(Ye=Y.normalize(Y.cross(Ze,Ge,Ye),Ye),tt=Y.add(tt,Ye,tt)),J(Ge)&&J(He)&&(Ye=Y.normalize(Y.cross(Ge,He,Ye),Ye),tt=Y.add(tt,Ye,tt)),J(He)&&J(gt)&&(Ye=Y.normalize(Y.cross(He,gt,Ye),Ye),tt=Y.add(tt,Ye,tt)),J(gt)&&J(Ze)&&(Ye=Y.normalize(Y.cross(gt,Ze,Ye),Ye),tt=Y.add(tt,Ye,tt)),!tt.equals(Y.ZERO))return tt=Y.normalize(tt,tt),X.asinClamped(Math.abs(Math.sin(Y.angleBetween(tt,De))))}}return 0},N=ee=>{var Q,G,J;if(P.value=[0,0,0],b.value=!1,!e.editable)return;_.value=ee;const{viewer:oe,drawingFabInstance:Y}=s,X=Y==null?void 0:Y.proxy;if(ee==="move")h.value=m.value.drawingTipEditing,p.value=Ve.Drawing,S.value=w.value,g.value=!0,W=Object.assign({},Z.value[S.value._vcPolylineIndx]),X.editingActionName=d;else if(ee==="remove"){const se=w.value._vcPolylineIndx;Z.value.splice(se,1)}else{const se=w.value._vcPolylineIndx,re=Z.value[se];(J=(G=(Q=e.editorOpts)==null?void 0:Q[ee])==null?void 0:G.callback)==null||J.call(G,se,re)}l("editorEvt",{type:ee,name:d,renderDatas:Z,index:w.value._vcPolylineIndx,pointIndex:w.value._index,point:w.value},oe)},H=()=>{Z.value=[],B()},ne=ee=>{var Q,G,J,oe,Y,X,se,re;const{viewer:de}=s,ce=de.scene.frameState.mapProjection.ellipsoid.cartesianToCartographic(ee.position,{});if(!Cesium.defined(ce))return"";const he=e.angleFormatter||Bn.angleToString,ge=e.distanceFormatter||Bn.distanceToString;return`${a("vc.measurement.point.lng")}${he(ce.longitude,(Q=e.measureUnits)==null?void 0:Q.angleUnits,e.locale,(G=e.decimals)==null?void 0:G.lng)}
${a("vc.measurement.point.lat")}${he(ce.latitude,(J=e.measureUnits)==null?void 0:J.angleUnits,e.locale,(oe=e.decimals)==null?void 0:oe.lat)}
${a("vc.measurement.point.height")}${ge(ee.height,(Y=e.measureUnits)==null?void 0:Y.distanceUnits,e.locale,(X=e.decimals)==null?void 0:X.height)}
${a("vc.measurement.point.slope")}${he(ee.slope,(se=e.measureUnits)==null?void 0:se.slopeUnits,e.locale,(re=e.decimals)==null?void 0:re.slope)}`};if(e.preRenderDatas&&e.preRenderDatas.length){const{viewer:ee}=s;e.preRenderDatas.forEach(Q=>{const G={drawStatus:Ve.AfterDraw,show:!0,position:yt(Q),lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}},J=Cesium.Cartographic.fromCartesian(G.position,ee.scene.globe.ellipsoid);G.positionDegrees=[Cesium.Math.toDegrees(J.longitude),Cesium.Math.toDegrees(J.latitude),J.height],V(G),Z.value.push(G)})}u.onUnmounted(()=>{y.forEach(ee=>ee()),y=[]});const ie={renderDatas:Z,startNew:x,stop:B,clear:H,handleMouseClick:O,handleMouseMove:I};return Object.assign(i.proxy,ie),()=>{var ee,Q,G;const{createGuid:J}=Cesium,oe=[],Y=[],X=[],se=[];if(Z.value.forEach((re,de)=>{var ce;const he=Object.assign({},e.pointOpts,re.pointOpts);Y.push({position:re.position,id:J(),_vcPolylineIndx:de,...he,show:re.show&&((ce=e.pointOpts)==null?void 0:ce.show)||e.editable||re.drawStatus===Ve.Drawing});const ge=Object.assign({},e.labelOpts,re.labelOpts);if(e.showLabel)if(n==="VcDrawingPin"){const Pe=Object.assign({},e.billboardOpts,re.billboardOpts);se.push({position:re.position,id:J(),_vcPolylineIndx:de,...Pe}),ge.text&&X.push({position:re.position,id:J(),...ge})}else X.push({position:re.position,id:J(),text:ne(re),...ge})}),oe.push(u.h(zo,{enableMouseEvent:e.enableMouseEvent,points:Y,onMouseover:M,onMouseout:A,onReady:L})),oe.push(u.h(ko,{enableMouseEvent:e.enableMouseEvent,labels:X,onReady:U})),n==="VcDrawingPin"&&oe.push(u.h(mu,{enableMouseEvent:e.enableMouseEvent,billboards:se})),(ee=e.drawtip)!=null&&ee.show&&g.value){const{viewer:re}=s;oe.push(u.h(Fr,{position:v.value,pixelOffset:(Q=e.drawtip)==null?void 0:Q.pixelOffset,teleport:{to:re.container}},()=>u.h("div",{class:"vc-drawtip vc-tooltip--style"},h.value)))}if(b.value){const re=[];if(w.value){const ce=e.editorOpts;for(const he in ce)if(!Array.isArray(ce[he])&&typeof ce[he]!="number"){const ge={...ce[he]};delete ge.color,re.push(u.h(zn,{style:{color:ce[he].color,background:ce[he].background},...ge,onclick:N.bind(void 0,he)},()=>u.h(mn,{...ce[he].tooltip},()=>{var Pe;return u.h("strong",null,((Pe=ce[he].tooltip)==null?void 0:Pe.tip)||a(`vc.drawing.editor.${he}`))})))}}const{viewer:de}=s;oe.push(u.h(Fr,{position:P.value,pixelOffset:(G=e.editorOpts)==null?void 0:G.pixelOffset,teleport:{to:de.container},onMouseenter:D,onMouseleave:z},()=>u.h("div",{class:"vc-editor"},re)))}return u.h(oo,{ref:T,show:e.show,onReady:$},()=>oe)}}var Eg=u.defineComponent({name:"VcMeasurementPoint",props:{...Tn,measureUnits:Object,labelOpts:Object,locale:String,decimals:Object,heightReference:Number,showLabel:Boolean},emits:Yt,setup(e,t){return Pg(e,t,"VcMeasurementPoint")}}),xg=u.defineComponent({name:"VcMeasurementArea",props:{...Tn,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showDistanceLabel:Boolean,showAngleLabel:Boolean,showLabel:Boolean,loop:Boolean,clampToGround:Boolean,autoUpdateLabelPosition:Boolean},emits:Yt,setup(e,t){return La(e,t,"VcMeasurementArea")}}),Og=u.defineComponent({name:"VcMeasurementRectangle",props:{...Tn,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:Yt,setup(e,t){return $r(e,t,"VcMeasurementRectangle")}}),Mg=u.defineComponent({name:"VcMeasurementRegular",props:{...Tn,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,measureUnits:Object,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:Yt,setup(e,t){return $r(e,t,"VcMeasurementRegular")}});function Sg(e,t,n,i,r,a,s){n.cesiumEvents=[];const l=rt(e,t,n);if(l===void 0)return;const{t:d}=Qt(),{$services:h}=l,{emit:m}=t,p=u.ref(!1),g=u.reactive({}),v=pi(e),b=u.ref(null),P=u.ref(null),w=u.ref(!1),S=u.ref(null);let T,_;const M=(N,H)=>{var ne,ie;const ee=_==null?void 0:_.cmpRef.value;(ne=ee==null?void 0:ee.handleMouseClick)==null||ne.call(ee,N.position,H);let Q;const G=n.proxy;if(G.editingActionName&&(Q=x(G.editingActionName)),Q&&Q!==_){const J=Q.cmpRef.value;(ie=J==null?void 0:J.handleMouseClick)==null||ie.call(J,N.position,H)}},A=(N,H)=>{var ne,ie;const ee=_==null?void 0:_.cmpRef.value;(ne=ee==null?void 0:ee.handleMouseMove)==null||ne.call(ee,N.endPosition,H);let Q;const G=n.proxy;if(G.editingActionName&&(Q=x(G.editingActionName)),Q&&Q!==_){const J=Q.cmpRef.value;(ie=J==null?void 0:J.handleMouseMove)==null||ie.call(J,N.endPosition,H)}},D=(N,H)=>{var ne,ie;const ee=_==null?void 0:_.cmpRef.value;(ne=ee==null?void 0:ee.handleDoubleClick)==null||ne.call(ee,N.position,H);let Q;const G=n.proxy;if(G.editingActionName&&(Q=x(G.editingActionName)),Q&&Q!==_){const J=Q.cmpRef.value;(ie=J==null?void 0:J.handleDoubleClick)==null||ie.call(J,N.position,H)}},{activate:z,deactivate:$,destroy:L,isActive:U}=fm(h,{handleMouseClick:M,handleMouseMove:A,handleDoubleClick:D});n.createCesiumObject=async()=>(p.value=!0,T=new bm,i.value),n.mount=async()=>(W(),w.value=!0,z(),!0),n.unmount=async()=>(_&&(C(_),_=void 0),$(),L(),w.value=!1,!0);const Z=(N,H,ne)=>{const{Cesium3DTileFeature:ie,Cesium3DTileset:ee,Cartesian3:Q,defined:G,Model:J,Ray:oe}=Cesium;if(Cesium.SuperMapVersion)return N.pickPosition(H);let Y;const X={},se=new oe;if(N.pickPositionSupported){T.hide(N);const re=N.pick(H,1,1);if(T.restore(N),G(re)&&(re instanceof ie||re.primitive instanceof ee||re.primitive instanceof J||Cesium.S3MTilesLayer&&re.primitive instanceof Cesium.S3MTilesLayer)&&(Y=N.pickPosition(H,X),G(Y)))return Q.clone(Y,ne)}if(G(N.globe)){const re=N.camera.getPickRay(H,se);return Y=N.globe.pick(re,N,X),G(Y)?Q.clone(Y,ne):void 0}},W=()=>{var N;const H=v.style.value;g.left=H.left,g.top=H.top,g.transform=H.transform;const ne=v.attach.value,ie=(N=Me(P))==null?void 0:N.$el;if(ie!==void 0){const ee=ie.getBoundingClientRect();H.width=`${ee.width}px`,H.height=`${ee.height}px`,(ne.bottom||ne.top)&&!ne.left&&!ne.right&&(H.left="50%",H.transform="translate(-50%, 0)"),(ne.left||ne.right)&&!ne.top&&!ne.bottom&&(H.top="50%",H.transform="translate(0, -50%)")}Object.assign(g,H)},y=u.ref(null),C=N=>{var H;const{viewer:ne}=h;if(xi(N)&&(N=x(N)),!N){l.logger.error("Invalid drawingActionOption or drawingActionOption name");return}const ie=B(N.name);if(ie!==-1){if(_!==void 0){_.actionOpts.color=y.value||"";const ee=_.cmpRef.value;(H=ee.stop)==null||H.call(ee),_.isActive=!1,m("activeEvt",{type:_.name,option:_,isActive:!1},ne)}(_==null?void 0:_.name)===(N==null?void 0:N.name)?(_=void 0,i.value[ie].actionOpts.color=y.value||"red"):u.nextTick(()=>{i.value[ie].cmpRef.value.startNew(),y.value=i.value[ie].actionOpts.color,i.value[ie].actionOpts.color=e.activeColor,i.value[ie].isActive=!0,_=i.value[ie],m("activeEvt",{type:_.name,option:_,isActive:!0},ne)})}},x=N=>i.value.find(H=>H.name===N),B=N=>i.value.findIndex(H=>H.name===N),O=N=>{N?z():(_&&C(_),$()),r.modelValue=N,m("fabUpdated",N)},I=()=>{i.value.forEach(H=>{var ne;(ne=H.cmpRef.value)==null||ne.clear()}),_&&C(_);const{viewer:N}=h;m("clearEvt",{type:"clear",option:a},N)},V=()=>Eo(l.getServices(),{get drawingFabInstance(){return n},get selectedDrawingActionInstance(){return _},get getWorldPosition(){return Z},get drawingHandlerActive(){return U}}),j=({cesiumObject:N})=>{N._vcId=s};return u.provide(Or,V()),Object.assign(n.proxy,{clearAll:I,deactivate:$,activate:z,toggleAction:C,getFabRef:()=>P.value,getDrawingActionInstance:x,getDrawingActionInstances:()=>i.value,getSelectedDrawingActionInstance:()=>_}),{renderContent:()=>{if(p.value){const N=[],H=[];i.value.forEach(ie=>{N.push(u.h(Fs,{ref:ie.actionRef,style:ie.actionStyle,class:ie.actionClass,...ie.actionOpts,onClick:()=>{C(ie)}},()=>u.h(mn,{...ie.actionOpts.tooltip},()=>u.h("strong",null,ie.tip)))),ie.cmp&&H.push(u.h(ie.cmp,{ref:ie.cmpRef,editable:e.editable,clampToGround:e.clampToGround,mode:e.mode,onDrawEvt:(ee,Q)=>{m("drawEvt",ee,Q)},onEditorEvt:(ee,Q)=>{m("editorEvt",ee,Q)},onMouseEvt:(ee,Q)=>{m("mouseEvt",ee,Q)},...ie.cmpOpts}))}),i.value.length&&N.push(u.h(Fs,{style:{background:a.color,color:a.textColor},class:"vc-draw-button vc-draw-clear",...a,onClick:I},()=>u.h(mn,{...a.tooltip},()=>u.h("strong",null,a.tooltip.tip||d(`vc.${s}.clear.tip`)))));const ne=[];return w.value&&ne.push(u.h("div",{ref:b,class:"vc-drawings-container "+v.classes.value,style:g},t.slots.body!==void 0?t.slots.body(i.value):u.h(zc,{ref:P,class:"vc-draw-button",style:{background:r.color,color:r.textColor},...r,"onUpdate:modelValue":O},{default:()=>N,tooltip:()=>u.h(mn,{...r.tooltip},()=>u.h("strong",null,r.tooltip.tip||(r.modelValue?d("vc.drawing.collapse"):d("vc.drawing.expand"))))}))),ne.push(u.h(oo,{ref:S,show:e.show,onReady:j},()=>H)),ne}else return u.createCommentVNode("v-if")}}}const A8={...Yt,fabUpdated:e=>!0,clearEvt:(e,t)=>!0};var gu=u.defineComponent({name:"VcMeasurements",props:au,emits:A8,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcMeasurements";const{t:r}=Qt(),a=u.reactive(Object.assign({},Tt.clearActionOpts,e.clearActionOpts)),s=u.reactive(Object.assign({},Tt.mainFabOpts,e.mainFabOpts)),l=u.reactive(Object.assign({},Tt.fabActionOpts,e.fabActionOpts)),d=u.reactive(Object.assign({},Tt.distanceActionOpts,O("distanceActionOpts"))),h=u.reactive(jt(ut(Tt.distanceMeasurementOpts),e.distanceMeasurementOpts)),m=u.reactive(Object.assign({},Tt.componentDistanceActionOpts,O("componentDistanceActionOpts"))),p=u.reactive(jt(ut(Tt.componentDistanceMeasurementOpts),e.componentDistanceMeasurementOpts)),g=u.reactive(Object.assign({},Tt.polylineActionOpts,O("polylineActionOpts"))),v=u.reactive(jt(ut(Tt.polylineMeasurementOpts),e.polylineMeasurementOpts)),b=u.reactive(Object.assign({},Tt.horizontalActionOpts,O("horizontalActionOpts"))),P=u.reactive(jt(ut(Tt.horizontalMeasurementOpts),e.horizontalMeasurementOpts)),w=u.reactive(Object.assign({},Tt.verticalActionOpts,O("verticalActionOpts"))),S=u.reactive(jt(ut(Tt.verticalMeasurementOpts),e.verticalMeasurementOpts)),T=u.reactive(Object.assign({},Tt.heightActionOpts,O("heightActionOpts"))),_=u.reactive(jt(ut(Tt.heightMeasurementOpts),e.heightMeasurementOpts)),M=u.reactive(Object.assign({},Tt.areaActionOpts,O("areaActionOpts"))),A=u.reactive(jt(ut(Tt.areaMeasurementOpts),e.areaMeasurementOpts)),D=u.reactive(Object.assign({},Tt.pointActionOpts,O("pointActionOpts"))),z=u.reactive(jt(ut(Tt.pointMeasurementOpts),e.pointMeasurementOpts)),$=u.reactive(Object.assign({},Tt.rectangleActionOpts,O("rectangleActionOpts"))),L=u.reactive(jt(ut(Tt.rectangleMeasurementOpts),e.rectangleMeasurementOpts)),U=u.reactive(Object.assign({},Tt.regularActionOpts,O("regularActionOpts"))),Z=u.reactive(jt(ut(Tt.regularMeasurementOpts),e.regularMeasurementOpts)),W=u.reactive(Object.assign({},Tt.circleActionOpts,O("circleActionOpts"))),y=u.reactive(jt(ut(Tt.circleMeasurementOpts),e.circleMeasurementOpts)),C={};C.distanceActionOpts=d,C.distanceMeasurementOpts=h,C.componentDistanceActionOpts=m,C.componentDistanceMeasurementOpts=p,C.polylineActionOpts=g,C.polylineMeasurementOpts=v,C.horizontalActionOpts=b,C.horizontalMeasurementOpts=P,C.verticalActionOpts=w,C.verticalMeasurementOpts=S,C.heightActionOpts=T,C.heightMeasurementOpts=_,C.areaActionOpts=M,C.areaMeasurementOpts=A,C.pointActionOpts=D,C.pointMeasurementOpts=z,C.rectangleActionOpts=$,C.rectangleMeasurementOpts=L,C.regularActionOpts=U,C.regularMeasurementOpts=Z,C.circleActionOpts=W,C.circleMeasurementOpts=y,C.clearActionOpts=a;const x=u.computed(()=>e.measurements.map(I=>({name:I,type:"measurement",actionStyle:{background:C[`${En(I)}ActionOpts`].color,color:C[`${En(I)}ActionOpts`].textColor},actionClass:`vc-measure-${I} vc-measure-button`,actionRef:u.ref(null),actionOpts:C[`${En(I)}ActionOpts`],cmp:B(I),cmpRef:u.ref(null),cmpOpts:C[`${En(I)}MeasurementOpts`],tip:C[`${En(I)}ActionOpts`].tooltip.tip||r(`vc.measurement.${I}.tip`),isActive:!1})));function B(I){switch(I){case"distance":case"component-distance":return yg;case"polyline":return bg;case"horizontal":return Cg;case"vertical":return wg;case"height":return _g;case"point":return Eg;case"area":return xg;case"rectangle":return Og;case"regular":case"circle":return Mg;default:return}}function O(I){return Dl(Tt[I],e[I])?l:Object.assign({},l,e[I])}return(n=Sg(e,t,i,x,s,a,"measurement"))==null?void 0:n.renderContent}});gu.install=e=>{e.component(gu.name,gu)};const iE=gu;var D8=iE;const rE=iE,L8=Object.assign({},Kt,{icon:"vc-icons-drawing-point"}),B8=Object.assign({},Kt,{icon:"vc-icons-drawing-polyline"}),R8=Object.assign({},Kt,{icon:"vc-icons-drawing-polygon"}),V8=Object.assign({},Kt,{icon:"vc-icons-drawing-rectangle"}),F8=Object.assign({},Kt,{icon:"vc-icons-drawing-pin"}),$8=Object.assign({},ru,{pointOpts:Object.assign({},ro,{show:!1}),billboardOpts:MF,labelOpts:Object.assign({},en,{pixelOffset:[0,-30],verticalOrigin:1}),showLabel:!0}),N8=Object.assign({},{}),j8=Object.assign({},Kt,{direction:"right",icon:"vc-icons-drawing-button",activeIcon:"vc-icons-drawing-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),oE=["pin","point","polyline","polygon","rectangle","regular","circle"],k8=e=>{let t=!0;return e.forEach(n=>{oE.includes(n)||(console.error(`VueCesium: unknown drawing type: ${n}`),t=!1)}),t},vu={...sf,drawings:{type:Array,default:()=>oE,validator:k8},mainFabOpts:{type:Object,default:()=>j8},fabActionOpts:{type:Object,default:()=>N8},pinActionOpts:{type:Object,default:()=>F8},pinDrawingOpts:{type:Object,default:()=>$8},pointActionOpts:{type:Object,default:()=>L8},pointDrawingOpts:{type:Object,default:()=>ru},polylineActionOpts:{type:Object,default:()=>B8},polylineDrawingOpts:{type:Object,default:()=>M2},polygonActionOpts:{type:Object,default:()=>R8},polygonDrawingOpts:{type:Object,default:()=>ou},rectangleActionOpts:{type:Object,default:()=>V8},rectangleDrawingOpts:{type:Object,default:()=>af},circleActionOpts:{type:Object,default:()=>T2},circleDrawingOpts:{type:Object,default:()=>TF},regularActionOpts:{type:Object,default:()=>S2},regularDrawingOpts:{type:Object,default:()=>IF}},wn=Oi(vu);var Tg=u.defineComponent({name:"VcDrawingPin",props:{...Tn,billboardOpts:Object,labelOpts:Object,heightReference:Number,showLabel:Boolean},emits:Yt,setup(e,t){return Pg(e,t,"VcDrawingPin")}}),Ig=u.defineComponent({name:"VcDrawingPoint",props:{...Tn,heightReference:Number,labelOpts:Object,showLabel:Boolean},emits:Yt,setup(e,t){return Pg(e,t,"VcDrawingPoint")}}),Ag=u.defineComponent({name:"VcDrawingPolyline",props:{...Tn,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean},emits:Yt,setup(e,t){return La(e,t,"VcDrawingPolyline")}}),Dg=u.defineComponent({name:"VcDrawingPolygon",props:{...Tn,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean},emits:Yt,setup(e,t){return La(e,t,"VcDrawingPolygon")}}),yu=u.defineComponent({name:"VcDrawingRegular",props:{...Tn,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,clampToGround:Boolean,edge:Number,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:Yt,setup(e,t){return $r(e,t,"VcDrawingRegular")}}),Lg=u.defineComponent({name:"VcDrawingRectangle",props:{...Tn,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:Yt,setup(e,t){return $r(e,t,"VcDrawingRectangle")}});const z8={...Yt,fabUpdated:e=>!0,clearEvt:(e,t)=>!0};var bu=u.defineComponent({name:"VcDrawings",props:vu,emits:z8,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcDrawings";const{t:r}=Qt(),a={},s=u.reactive(Object.assign({},wn.clearActionOpts,e.clearActionOpts)),l=u.reactive(Object.assign({},wn.mainFabOpts,e.mainFabOpts)),d=u.reactive(Object.assign({},wn.fabActionOpts,e.fabActionOpts)),h=u.reactive(Object.assign({},wn.pointActionOpts,L("pointActionOpts"))),m=u.reactive(jt(ut(wn.pointDrawingOpts),e.pointDrawingOpts)),p=u.reactive(Object.assign({},wn.polylineActionOpts,L("polylineActionOpts"))),g=u.reactive(jt(ut(wn.polylineDrawingOpts),e.polylineDrawingOpts)),v=u.reactive(Object.assign({},wn.polygonActionOpts,L("polygonActionOpts"))),b=u.reactive(jt(ut(wn.polygonDrawingOpts),e.polygonDrawingOpts)),P=u.reactive(Object.assign({},wn.rectangleActionOpts,L("rectangleActionOpts"))),w=u.reactive(jt(ut(wn.rectangleDrawingOpts),e.rectangleDrawingOpts)),S=u.reactive(Object.assign({},wn.circleActionOpts,L("circleActionOpts"))),T=u.reactive(jt(ut(wn.circleDrawingOpts),e.circleDrawingOpts)),_=u.reactive(Object.assign({},wn.regularActionOpts,L("regularActionOpts"))),M=u.reactive(jt(ut(wn.regularDrawingOpts),e.regularDrawingOpts)),A=u.reactive(Object.assign({},wn.pinActionOpts,L("pinActionOpts"))),D=u.reactive(jt(ut(wn.pinDrawingOpts),e.pinDrawingOpts));a.pointActionOpts=h,a.pointDrawingOpts=m,a.polylineActionOpts=p,a.polylineDrawingOpts=g,a.polygonActionOpts=v,a.polygonDrawingOpts=b,a.rectangleActionOpts=P,a.rectangleDrawingOpts=w,a.circleActionOpts=S,a.circleDrawingOpts=T,a.regularActionOpts=_,a.regularDrawingOpts=M,a.pinActionOpts=A,a.pinDrawingOpts=D,a.clearActionOpts=s;const z=u.computed(()=>e.drawings.map(U=>({name:U,type:"drawing",actionStyle:{background:a[`${En(U)}ActionOpts`].color,color:a[`${En(U)}ActionOpts`].textColor},actionClass:`vc-draw-${U} vc-draw-button`,actionRef:u.ref(null),actionOpts:a[`${En(U)}ActionOpts`],cmp:$(U),cmpRef:u.ref(null),cmpOpts:a[`${En(U)}DrawingOpts`],tip:a[`${En(U)}ActionOpts`].tooltip.tip||r(`vc.drawing.${En(U)}.tip`),isActive:!1})));function $(U){switch(U){case"pin":return Tg;case"point":return Ig;case"polyline":return Ag;case"polygon":return Dg;case"rectangle":return w.regular?yu:Lg;case"circle":case"regular":return yu;default:return}}function L(U){return Dl(wn[U],e[U])?d:Object.assign({},d,e[U])}return(n=Sg(e,t,i,z,l,s,"drawing"))==null?void 0:n.renderContent}});bu.install=e=>{e.component(bu.name,bu)};const aE=bu;var G8=aE;const sE=aE;class U8{constructor(t){const{Resource:n,defaultValue:i,Credit:r,Event:a}=Cesium;this._url=t.url;const s=n.createIfNeeded(this._url);s.appendForwardSlash(),this._ready=!1,this._resource=s,this._tileDiscardPolicy=t.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=t.minimumLevel||0,this._maximumLevel=t.maximumLevel||20,this._tilingScheme=t.tilingScheme||new Cesium.WebMercatorTilingScheme,this._rectangle=t.rectangle||this._tilingScheme.rectangle;let l=t.credit;typeof l=="string"&&(l=new r(l)),this._credit=l,this.enablePickFeatures=i(t.enablePickFeatures,!1),this._hasAlphaChannel=i(t.hasAlphaChannel,!0),this._errorEvent=new a,this._readyPromise=As(),this._ready=!0,this._readyPromise.resolve(!0),this._subdomains=t.subdomains||["01","02","03","04"],this._domain=t.domain||"webst",this._style=t.mapStyle||"6",this._lang=t.lang||"zh_cn",this._scl=t.scl||"1",this._ltype=t.ltype||"0"}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(t,n,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,n,i,r){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,H8.call(this,t,n,i,r))}pickFeatures(t,n,i,r,a){}}function H8(e,t,n,i){let r=this._url;const a=this._subdomains;return r=r.replace("{domain}",this._domain).replace("{s}",a[(e+t+n)%a.length]).replace("{lang}",this._lang).replace("{style}",this._style).replace("{scl}",this._scl).replace("{ltype}",this._ltype).replace("{x}",e).replace("{y}",t).replace("{z}",n),this._resource.getDerivedResource({url:r,request:i})}const Bg={url:{type:String,default:"https://{domain}{s}.is.autonavi.com/appmaptile?lang={lang}&size=1&style={style}&scl={scl}&ltype={ltype}&x={x}&y={y}&z={z}"},subdomains:{type:Array,default:()=>["01","02","03","04"]},domain:{type:String,default:"webst"},lang:{type:String,default:"zh_cn"},mapStyle:{type:String,default:"6"},scl:{type:String,default:"1"},ltype:{type:String,default:"0"},...un,...di,...Xn,...vn,...Ki,...Do};var lE=u.defineComponent({name:"VcImageryProviderAmap",props:Bg,emits:Vt,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="AMapImageryProvider";const i=Rt(e,t,n);if(i!==void 0)return n.createCesiumObject=async()=>{Cesium.AMapImageryProvider=Cesium.AMapImageryProvider||U8,i.unwatchFns.length===0&&i.setPropsWatcher(!0);const r=i.transformProps(e);return new Cesium.AMapImageryProvider(r)},()=>{var r;return u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const Rg={url:{type:[String,Object],default:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},...Lh,...bs,usePreCachedTilesIfAvailable:{type:Boolean,default:!0},...Bh,...ac,...vn,...Ki,...at,...un,...ur,...dr,...Xn};var cE=u.defineComponent({name:"VcImageryProviderArcgis",props:Rg,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="ArcGisMapServerImageryProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});class Cr{constructor(t,n){isNaN(t)&&(t=isNaN(t)?0:t),xi(t)&&(t=parseFloat(t)),isNaN(n)&&(n=isNaN(n)?0:n),xi(n)&&(n=parseFloat(n)),this.lng=t,this.lat=n}equals(t){return t&&this.lat===t.lat&&this.lng===t.lng}}Cr.isInRange=function(e){return e&&e.lng<=180&&e.lng>=-180&&e.lat<=74&&e.lat>=-74};class uE{constructor(t,n){this.x=t||0,this.y=n||0}equals(t){return t&&t.x===this.x&&t.y===this.y}}const W8=6378137,dE=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],Cu=[75,60,45,30,15,0],q8=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],hE=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];class Z8{getDistanceByMC(t,n){if(!t||!n||(t=this.inverse(t),!t))return 0;const i=so(t.lng),r=so(t.lat);if(n=this.inverse(n),!n)return 0;const a=so(n.lng),s=so(n.lat);return pE(i,a,r,s)}getDistanceByLL(t,n){if(!t||!n)return 0;t.lng=Vg(t.lng,-180,180),t.lat=Fg(t.lat,-74,74),n.lng=Vg(n.lng,-180,180),n.lat=Fg(n.lat,-74,74);const i=so(t.lng),r=so(t.lat),a=so(n.lng),s=so(n.lat);return pE(i,a,r,s)}inverse(t){let n;const i=new Cr(Math.abs(t.lng),Math.abs(t.lat));for(let a=0;a<dE.length;a++)if(i.lat>=dE[a]){n=q8[a];break}const r=mE(t,n);return new Cr(r==null?void 0:r.lng,r==null?void 0:r.lat)}forward(t){let n;t.lng=Vg(t.lng,-180,180),t.lat=Fg(t.lat,-74,74);const i=new Cr(t.lng,t.lat);for(let a=0;a<Cu.length;a++)if(i.lat>=Cu[a]){n=hE[a];break}if(!n){for(let a=Cu.length-1;a>=0;a--)if(i.lat<=-Cu[a]){n=hE[a];break}}const r=mE(t,n);return new Cr(r==null?void 0:r.lng,r==null?void 0:r.lat)}lngLatToMercator(t,n){return this.forward(t)}lngLatToPoint(t){const n=this.forward(t);return new uE(n.lng,n.lat)}mercatorToLngLat(t,n){return this.inverse(t)}pointToLngLat(t){const n=new Cr(t.x,t.y);return this.inverse(n)}pointToPixel(t,n,i,r,a){if(!t)return;t=this.lngLatToMercator(t,a),i=this.lngLatToMercator(i);const s=this.getZoomUnits(n),l=Math.round((t.lng-i.lng)/s+r.width/2),d=Math.round((i.lat-t.lat)/s+r.height/2);return new uE(l,d)}pixelToPoint(t,n,i,r,a){if(!t)return;const s=this.getZoomUnits(n),l=i.lng+s*(t.x-r.width/2),d=i.lat-s*(t.y-r.height/2),h=new Cr(l,d);return this.mercatorToLngLat(h,a)}getZoomUnits(t){return Math.pow(2,18-t)}}function mE(e,t){if(!e||!t)return;let n=t[0]+t[1]*Math.abs(e.lng);const i=Math.abs(e.lat)/t[9];let r=t[2]+t[3]*i+t[4]*i*i+t[5]*i*i*i+t[6]*i*i*i*i+t[7]*i*i*i*i*i+t[8]*i*i*i*i*i*i;return n*=e.lng<0?-1:1,r*=e.lat<0?-1:1,new Cr(n,r)}function Vg(e,t,n){for(;e>n;)e-=n-t;for(;e<t;)e+=n-t;return e}function Fg(e,t,n){return t!=null&&(e=Math.max(e,t)),n!=null&&(e=Math.min(e,n)),e}function pE(e,t,n,i){return W8*Math.acos(Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos(t-e))}function so(e){return Math.PI*e/180}class Q8{constructor(t){const{defaultValue:n,Ellipsoid:i,WebMercatorProjection:r,Cartesian2:a,Cartographic:s,Math:l,Rectangle:d}=Cesium;t=t||{},this._ellipsoid=n(t.ellipsoid,i.WGS84),this._projection=new r(this._ellipsoid);const h=new Z8;this._projection.project=function(g,v){return v=v||{},t.projectionTransforms&&t.projectionTransforms.from!==t.projectionTransforms.to&&(t.projectionTransforms.to.toUpperCase()==="WGS84"?(v=Mw(l.toDegrees(g.longitude),l.toDegrees(g.latitude)),v=vm(v[0],v[1])):v=vm(l.toDegrees(g.longitude),l.toDegrees(g.latitude))),v[0]=Math.min(v[0],180),v[0]=Math.max(v[0],-180),v[1]=Math.min(v[1],74),v[1]=Math.max(v[1],-74),v=h.lngLatToPoint(new Cr(v[0],v[1])),new a(v.x,v.y)},this._projection.unproject=function(g,v){return v=v||{},v=h.mercatorToLngLat(new Cr(g.x,g.y)),v[0]=(v[0]+180)%360-180,t.projectionTransforms&&t.projectionTransforms.from!==t.projectionTransforms.to&&(t.projectionTransforms.to.toUpperCase()==="WGS84"?(v=gm(v.lng,v.lat),v=ym(v[0],v[1])):v=gm(v.lng,v.lat)),new s(Cesium.Math.toRadians(v[0]),Cesium.Math.toRadians(v[1]))},this._rectangleSouthwestInMeters=new a(-2003772637e-2,-1247410417e-2),this._rectangleNortheastInMeters=new a(2003772637e-2,1247410417e-2);const m=this._projection.unproject(this._rectangleSouthwestInMeters),p=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new d(m.longitude,m.latitude,p.longitude,p.latitude),this.resolutions=[];for(let g=0;g<19;g++)this.resolutions[g]=256*Math.pow(2,18-g)}getNumberOfXTilesAtLevel(t){return 1<<t}getNumberOfYTilesAtLevel(t){return 1<<t}rectangleToNativeRectangle(t,n){const{defined:i,Rectangle:r}=Cesium,a=this._projection,s=a.project(r.southwest(t)),l=a.project(r.northeast(t));return i(n)?(n.west=s.x,n.south=s.y,n.east=l.x,n.north=l.y,n):new r(s.x,s.y,l.x,l.y)}tileXYToNativeRectangle(t,n,i,r){const{defined:a,Rectangle:s}=Cesium,l=this.resolutions[i],d=t*l,h=(t+1)*l,m=((n=-n)+1)*l,p=n*l;return a(r)?(r.west=d,r.south=p,r.east=h,r.north=m,r):new s(d,p,h,m)}tileXYToRectangle(t,n,i,r){const{Cartesian2:a}=Cesium,s=this.tileXYToNativeRectangle(t,n,i,r),l=this._projection,d=l.unproject(new a(s.west,s.south)),h=l.unproject(new a(s.east,s.north));return s.west=d.longitude,s.south=d.latitude,s.east=h.longitude,s.north=h.latitude,s}positionToTileXY(t,n,i){const{Rectangle:r,defined:a,Cartesian2:s}=Cesium,l=this._rectangle;if(!r.contains(l,t))return;const d=this._projection.project(t);if(!a(d))return;const h=this.resolutions[n],m=Math.floor(d.x/h),p=-Math.floor(d.y/h);return a(i)?(i.x=m,i.y=p,i):new s(m,p)}get ellipsoid(){return this._ellipsoid}get rectangle(){return this._rectangle}get projection(){return this._projection}}class J8{constructor(t){const{Resource:n,defaultValue:i,Credit:r,Event:a}=Cesium;this._subdomains=i(t.subdomains,["0","1","2","3"]),t.url?this._url=t.url:t.mapStyle==="img"?this._url="//maponline{s}.bdimg.com/starpic/u=x={x};y={y};z={z};v=009;type=sate&qt=satepc&app=webearth2&udt={udt}&fm=46&v=009":t.mapStyle==="vec"?this._url="//maponline{s}.bdimg.com/tile/?qt={qt}&x={x}&y={y}&z={z}&styles={styles}&scaler={scale}&udt={udt}&from=jsapi3_0&showtext={showtext}":t.mapStyle==="traffic"?this._url="https://its.map.baidu.com/traffic/TrafficTileService?time={time}&label={labelStyle}&v=016&level={z}&x={x}&y={y}&scaler={scale}":this._url="//api.map.baidu.com/customimage/tile?&x={x}&y={y}&z={z}&udt={udt}&scale={scale}&ak={ak}&customid={mapStyle}";const s=n.createIfNeeded(this._url);s.appendForwardSlash(),this._ready=!1,this._resource=s,this._tileDiscardPolicy=t.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=t.minimumLevel||0,this._maximumLevel=t.maximumLevel||18,this._tilingScheme=new Q8(t),this._rectangle=i(t.rectangle,this._tilingScheme.rectangle);let l=t.credit;typeof l=="string"&&(l=new r(l)),this._credit=l,this.enablePickFeatures=i(t.enablePickFeatures,!1),this._hasAlphaChannel=i(t.hasAlphaChannel,!0),this._errorEvent=new a,this._ready=!0,this._labelStyle=t.labelStyle||"web2D",this._showtext=t.showtext||"1",this._qt=t.qt,this._styles=t.styles,this._scale=t.scale,this._ak=t.ak,this._mapStyle=t.mapStyle}get url(){return this._resource.url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(t,n,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,n,i,r){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,X8.call(this,t,n,i,r))}pickFeatures(t,n,i,r,a){}}function X8(e,t,n,i){let r=this._url;const a=this._subdomains;return r=r.replace("{s}",a[(e+t+n)%a.length]).replace("{qt}",this._qt).replace("{x}",e).replace("{y}",-t).replace("{z}",n).replace("{styles}",this._styles).replace("{scale}",this._scale).replace("{mapStyle}",this._mapStyle).replace("{labelStyle}",this._labelStyle).replace("{ak}",this._ak).replace("{time}",String(new Date().getTime())).replace("{udt}",String(new Date().getTime())).replace("{showtext}",this._showtext),this._resource.getDerivedResource({url:r,request:i})}const $g={...Si,...vn,...at,...bs,...un,...di,...Xn,projectionTransforms:{type:[Boolean,Object],default:()=>({from:"BD09",to:"WGS84"})},scale:{type:String,default:"2"},ak:{type:String,default:"5ieMMexWmzB9jivTq6oCRX9j"},subdomains:{type:Array,default:()=>["0","1","2","3"]},mapStyle:{type:String,default:"vec"},qt:{type:String,default:"vtile"},styles:{type:String,default:"pl"},showtext:{type:String,default:"1"}};var fE=u.defineComponent({name:"VcImageryProviderBaidu",props:$g,emits:Vt,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="BaiduMapImageryProvider";const i=Rt(e,t,n);if(i!==void 0)return n.createCesiumObject=async()=>{Cesium.BaiduMapImageryProvider=Cesium.BaiduMapImageryProvider||J8,i.unwatchFns.length===0&&i.setPropsWatcher(!0);const r=i.transformProps(e);return new Cesium.BaiduMapImageryProvider(r)},()=>{var r;return u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const Ng={url:{type:[String,Object],default:"https://dev.virtualearth.net"},bmKey:String,tileProtocol:String,mapStyle:{type:String,default:"Aerial"},culture:{type:String,default:""},...at,...bs};var gE=u.defineComponent({name:"VcImageryProviderBing",props:Ng,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="BingMapsImageryProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const jg={...Si,...at,...bs,...un,metadata:Object};var vE=u.defineComponent({name:"VcImageryProviderGoogle",props:jg,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="GoogleEarthEnterpriseImageryProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const kg={...Ki,...at,cells:{type:Number,default:8},color:{type:[String,Object,Array],default:()=>[1,1,1,.4],watcherOptions:{cesiumObjectBuilder:Ue}},...pw,glowWidth:{type:Number,default:6},backgroundColor:{type:[String,Array,Object],default:()=>[0,.5,0,.2],watcherOptions:{cesiumObjectBuilder:Ue}},...ur,...dr,canvasSize:{type:Number,default:256}};var yE=u.defineComponent({name:"VcImageryProviderGrid",props:kg,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="GridImageryProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const bE={};var CE=u.defineComponent({name:"VcImageryProviderIon",props:{assetId:Number,...Vh,server:[String,Object]},emits:Vt,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="IonImageryProvider";const i=Rt(e,t,n);if(i!==void 0)return n.createCesiumObject=async()=>{const r=i.transformProps(e);return qt(Cesium.VERSION,"1.104")&&typeof Cesium[n.cesiumClass].fromAssetId=="function"?await Cesium.IonImageryProvider.fromAssetId(r.assetId,r):new Cesium.IonImageryProvider(r)},()=>{var r;return u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const zg={url:{type:[String,Object],default:"https://api.mapbox.com/styles/v1/"},username:{type:String,default:"mapbox"},styleId:String,...Vh,tilesize:{type:Number,default:512},scaleFactor:Boolean,...at,...di,...Xn,...vn,...un};var wE=u.defineComponent({name:"VcImageryProviderMapbox",props:zg,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="MapboxStyleImageryProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const Gg={url:{type:String,default:"https://a.tile.openstreetmap.org"},...Rh,...vn,...di,...Xn,...at,credit:{type:[String,Object],default:"MapQuest, Open Street Map and contributors, CC-BY-SA"}};var _E=u.defineComponent({name:"VcImageryProviderOsm",props:Gg,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="OpenStreetMapImageryProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const Ug={...Si,...vn,...un,...at,...ur,...dr};var PE=u.defineComponent({name:"VcImageryProviderSingletile",props:Ug,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="SingleTileImageryProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const tl={NONE:0,STORING:1,STORED:2,FAILED:3};class Y8{constructor(t){if(!Cesium.defined(t.name))throw new Cesium.DeveloperError("options.name is required.");const n=window.indexedDB.open(this.dbname);this.layer=t.layer||null,this.storageType=t.storageType||"arrayBuffer",this.creatingTable=!1,this.cachestatus={},this.dbname=t.name;const i=this;return new Promise((r,a)=>{n.onsuccess=s=>{i.db=s.target.result,i.version=i.db.version,i.cachestatus=i.cachestatus||{},r(i)},n.onupgradeneeded=s=>{i.db=s.target.result,i.version=i.db.version,r(i)},n.onerror=s=>{i.db=null,a("create database fail, error code : "+s.target.errorcode)}})}checkObjectStoreExist(t){return Cesium.defined(this.db)?this.db.objectStoreNames.contains(t):!1}createObjectStore(t){return new Promise((n,i)=>{if(this.creatingTable)i(!1);else{if(this.db.objectStoreNames.contains(t)){i(!1);return}this.creatingTable=!0;const r=parseInt(this.db.version);this.db.close();const a=this,s=window.indexedDB.open(this.dbname,r+1);s.onupgradeneeded=l=>{const d=l.target.result;a.db=d;const h=d.createObjectStore(t,{keyPath:"id"});if(Cesium.defined(h)){h.createIndex("value","value",{unique:!1}),a.creatingTable=!1,a.cachestatus=a.cachestatus||{},a.cachestatus[t]={},a.db.close();const m=window.indexedDB.open(a.dbname);m.onsuccess=p=>{a.db=p.target.result,n(!0)}}else a.creatingTable=!1,n(!1)},s.onsuccess=l=>{l.target.result.close(),n(!0)},s.onerror=l=>{a.creatingTable=!1,i(!1)}}})}putElementInDB(t,n,i){return new Promise((r,a)=>{if(!Cesium.defined(this.db)){a(!1);return}const{cachestatus:s,db:l}=this;if(Cesium.defined(s[t])&&Cesium.defined(s[t][n]&&(s[t][n]===tl.STORING||s[t][n]===tl.STORED))){r(!1);return}if(l.objectStoreNames.contains(t)){s[t]=s[t]||{};try{const d=l.transaction([t],"readwrite").objectStore(t).add({id:n,value:i});s[t][n]=tl.STORING,d.onsuccess=h=>{s[t][n]=tl.STORED,r(!0)},d.onerror=h=>{s[t][n]=tl.FAILED,r(!1)}}catch(d){a(null);return}}else this.createObjectStore(t).then(()=>{const d=l.transaction([t],"readwrite").objectStore(t).add({id:n,value:i});d.onsuccess=function(h){r(!0)},d.onerror=function(h){a(!1)}},()=>{a(!1)})})}getElementFromDB(t,n){return new Promise((i,r)=>{const{db:a}=this;if(!Cesium.defined(a)||!a.objectStoreNames.contains(t))return null;try{const s=a.transaction([t]).objectStore(t).get(n);s.onsuccess=l=>Cesium.defined(l.target.result)?i(l.target.result.value):r(null),s.onerror=l=>{r(null)}}catch(s){r(null)}})}updateElementInDB(t,n,i){return new Promise((r,a)=>{const{db:s}=this;if(!Cesium.defined(s)){r(!1);return}if(!s.objectStoreNames.contains(t)){r(!1);return}try{const l=s.transaction([t],"readwrite").objectStore(t).put({id:n,value:i});l.onsuccess=()=>{r(!0)},l.onerror=()=>{r(!1)}}catch(l){r(!1)}})}removeElementFromDB(t,n){return new Promise((i,r)=>{const{db:a}=this;if(!Cesium.defined(a)){i(!1);return}if(!a.objectStoreNames.contains(t)){i(!1);return}try{const s=a.transaction([t],"readwrite").objectStore(t).delete(n);s.onsuccess=()=>{i(!0)},s.onerror=()=>{i(!1)}}catch(s){i(!1)}})}clear(t){return new Promise((n,i)=>{const{db:r}=this;if(!Cesium.defined(r)){n(!1);return}if(!r.objectStoreNames.contains(t)){n(!1);return}try{const a=r.transaction([t],"readwrite").objectStore(t).clear();a.onsuccess=()=>{n(!0)},a.onerror=()=>{n(!1)}}catch(a){n(!1)}})}}class K8{constructor(t){const{appendForwardSlash:n,Credit:i,defaultValue:r,defined:a,DeveloperError:s,Event:l,Resource:d,Math:h}=Cesium;t=r(t,{});const{url:m}=t;if(!a(m))throw new s("options.url is required.");const p=m.substring(0,m.indexOf("datas"));this.tablename=m.substring(0,m.indexOf("datas/")+6,m.length);const g=this;new Y8({name:p+this.tablename}).then(P=>{g._indexedDBScheduler=P}),this._indexedDBSetting={isOpen:!1,clear:()=>{g._indexedDBScheduler.clear(g.tablename)}},this.isSci=!1,this.isTileMap=!1;const v=n(m);if(v.indexOf("rest/maps")>-1)this.isTileMap=!0,this.layersID=t.layersID;else{if(!(v.indexOf("rest/realspace")>-1))throw new s("The url type is not supported!");this.isSci=!0,this.layersID=void 0}this._url=v,this._resource=d.createIfNeeded(v),this._transparent=r(t.transparent,!0),this._name=t.name||"",this._urlTemplate=void 0,this._errorEvent=new l,this._fileExtension="png",this._tileWidth=256,this._tileHeight=256,this._minimumLevel=r(t.minimumLevel,0),this._maximumLevel=t.maximumLevel,this._rectangle=void 0,this._tilingScheme=void 0,this._tileDiscardPolicy=t.tileDiscardPolicy,this._fRatio=r(t.ratio,h.DEGREES_PER_RADIAN/6378137),this._scales=[],this._coordUnit="DEGREE";let b=r(t.credit,new i("MapQuest, SuperMap iServer Imagery"));typeof b=="string"&&(b=new i(b)),this._credit=b,this._ready=!1,this._readyPromise=As(),this._options=t}get url(){return this._url}get name(){return this._name}set name(t){this._name=t}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this._ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this._ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get credit(){return this._credit}get hasAlphaChannel(){return!0}get readyPromise(){return this._readyPromise.promise}get ratio(){return this._fRatio}set ratio(t){this._fRatio=t}get tileDiscardPolicy(){return this._tileDiscardPolicy}getTileCredits(t,n,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,n,i,r){const{defined:a,DeveloperError:s,ImageryProvider:l}=Cesium;if(!this.ready)throw new s("requestImage must not be called before the imagery provider is ready.");const d=t7.call(this,t,n,i),h=this._resource.getDerivedResource({url:d,request:r}),m=this;if(this._indexedDBSetting.isOpen){if(a(this._indexedDBScheduler)){const p=this._indexedDBScheduler.getElementFromDB(this.tablename,d);try{return p.then(g=>{if(a(g)){const v=new Image;return v.src=g,v}return l.loadImage(m,h)})}catch(g){return l.loadImage(m,h)}}}else return l.loadImage(this,h)}pickFeatures(t,n,i,r,a){}async init(){await n7.call(this)}}let EE={};const Hg=["1.690163571602655E-9","3.3803271432053056E-9","6.760654286410611E-9","1.3521308572821242E-8","2.7042617145642484E-8","5.408523429128511E-8","1.0817046858256998E-7","2.1634093716513974E-7","4.3268187433028044E-7","8.653637486605571E-7","1.7307274973211203E-6","3.4614549946422405E-6","6.9229099892844565E-6","1.3845819978568952E-5","2.7691639957137904E-5","5.53832799142758E-5","1.107665598285516E-4","2.215331196571032E-4","4.430662393142064E-4","8.861324786284128E-4","1.772264957256826E-3","3.544529914513652E-3"],e7=[1690163571602655e-24,33803271432053056e-25,6760654286410611e-24,13521308572821242e-24,27042617145642484e-24,5408523429128511e-23,10817046858256998e-23,21634093716513974e-23,43268187433028044e-23,8653637486605571e-22,17307274973211203e-22,34614549946422405e-22,69229099892844565e-22,13845819978568952e-21,27691639957137904e-21,553832799142758e-19,.0001107665598285516,.0002215331196571032,.0004430662393142064,.0008861324786284128,.001772264957256826,.003544529914513652];function t7(e,t,n){let i;if(this.isTileMap){if(this._coordUnit==="DEGREE"){const r=Hg[n+1]||Hg[n];i=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",r)}else if(this._coordUnit==="METER"){const r=Hg[n];i=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",r)}}else i=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{level}",n).replace("{fileExtension}",this._fileExtension);return i}async function n7(){const{Resource:e}=Cesium;if(this.isTileMap)try{const t=await e.fetchJsonp({url:this._options.url+".jsonp",queryParameters:{f:"json"}});s7.call(this,t)}catch(t){OE.call(this)}else try{const t=await e.fetchText({url:this.url+"config"});r7.call(this,t)}catch(t){OE.call(this)}}function i7(e){for(let t=e7.length;t--;)if(e[t]<=e)return t}function r7(e){const t=o7.call(this,e),{defaultValue:n,defined:i,GeographicTilingScheme:r,Math:a,Rectangle:s}=Cesium;this._fileExtension=n(t.fileExtentName,"png"),this._tileWidth=n(t.imageSizeWidth,256),this._tileHeight=n(t.imageSizeHeight,256);const l=t.levels,d=l.length;if(this._minimumLevel=n(l[0],0),this._maximumLevel=n(l[d-1],d-1),i(this._tilingScheme)||(this._tilingScheme=new r({ellipsoid:this._options.ellipsoid})),!i(this._rectangle)&&t.left&&t.right&&t.top&&t.bottom){const g=a.toRadians(t.left),v=a.toRadians(t.right),b=a.toRadians(t.bottom),P=a.toRadians(t.top);this._rectangle=new s(g,b,v,P)}const h=this._tilingScheme;this._rectangle.west<h.rectangle.west&&(this._rectangle.west=h.rectangle.west),this._rectangle.east>h.rectangle.east&&(this._rectangle.east=h.rectangle.east),this._rectangle.south<h.rectangle.south&&(this._rectangle.south=h.rectangle.south),this._rectangle.north>h.rectangle.north&&(this._rectangle.north=h.rectangle.north);const m=h.positionToTileXY(s.southwest(this._rectangle),this._minimumLevel),p=h.positionToTileXY(s.northeast(this._rectangle),this._minimumLevel);(window.Math.abs(p.x-m.x)+1)*(window.Math.abs(p.y-m.y)+1)>4&&(this._minimumLevel=0),this._tilingScheme=h,this._urlTemplate=this._url+"data/index/{y}/{x}.{fileExtension}?level={level}",this._ready=!0,this._readyPromise.resolve(!0)}function o7(e){e=new DOMParser().parseFromString(e,"application/xml");const t="http://www.supermap.com/SuperMapCache/sci3d",n=e.childNodes[0],i=wu(n,"Levels",t),r=a7(i,"Level",t)||[],a=[];for(let P=0;P<r.length;P++)a.push(parseInt(r[P].textContent,10));const s=wu(n,"Bounds",t),l=Ba(s,"Left",t),d=Ba(s,"Right",t),h=Ba(s,"Top",t),m=Ba(s,"Bottom",t),p=xE(n,"FileExtentName",t),g=Ba(n,"CellWidth",t),v=Ba(n,"CellHeight",t),b=xE(n,"CacheName",t);return this._name=b||"",{left:l,right:d,top:h,bottom:m,fileExtentName:p,levels:a,imageSizeWidth:g,imageSizeHeight:v}}function xE(e,t,n){const i=wu(e,t,n);return Cesium.defined(i)?i.textContent.trim():void 0}function Ba(e,t,n){const i=wu(e,t,n);if(Cesium.defined(i)){const r=parseFloat(i.textContent);return isNaN(r)?void 0:r}}function wu(e,t,n){if(Cesium.defined(e)){const i=e.childNodes,r=i.length;for(let a=0;a<r;a++){const s=i[a];if(s.localName===t&&n.indexOf(s.namespaceURI)!==-1)return s}}}function a7(e,t,n){if(Cesium.defined(e)){const i=[],r=e.getElementsByTagNameNS("*",t),a=r.length;for(let s=0;s<a;s++){const l=r[s];l.localName===t&&n.indexOf(l.namespaceURI)!==-1&&i.push(l)}return i}}function s7(e){const{Cartesian3:t,defaultValue:n,defined:i,GeographicTilingScheme:r,Math:a,Rectangle:s,WebMercatorTilingScheme:l}=Cesium,d=e.prjCoordSys.coordUnit;this._coordUnit=d;const h=e.bounds,m=e.visibleScales;if(i(m)&&m.length>1&&i(this._maximumLevel)){const p=m[m.length-1];this._maximumLevel=i7(p)}if(d==="DEGREE")this._tilingScheme=new r,h.left=a.clamp(h.left,-180,180),h.bottom=a.clamp(h.bottom,-90,90),h.right=a.clamp(h.right,-180,180),h.top=a.clamp(h.top,-90,90),this._rectangle=s.fromDegrees(h.left,h.bottom,h.right,h.top),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-180,"y":90}';else{const p=new t(h.left,h.bottom,0);p.x=Math.max(-20037508342789244e-9,p.x),p.y=Math.max(-20037508342789244e-9,p.y);const g=new t(h.right,h.top,0);g.x=Math.min(20037508342789244e-9,g.x),g.y=Math.min(20037508342789244e-9,g.y),this._tilingScheme=new l;const v=this._tilingScheme.projection.unproject(p),b=this._tilingScheme.projection.unproject(g);this._rectangle=new s(v.longitude,v.latitude,b.longitude,b.latitude),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-20037508.342789248 ,"y":20037508.342789095}'}this._urlTemplate=this._urlTemplate.replace("{transparent}",this._transparent),this.layersID&&(this._urlTemplate=this._urlTemplate+"&layersID="+this.layersID),this._rectangle||(this._rectangle=n(this._options.rectangle,this._tilingScheme.rectangle)),this._ready=!0,this._readyPromise.resolve(!0)}function OE(){const{TileProviderError:e,RuntimeError:t}=Cesium,n="An error occurred while accessing "+this._url+".";EE=e.reportError(EE,this,this._errorEvent,n,0,0,0,new Error(n)),this._readyPromise.reject(new t(n))}const Wg={url:String,...di,...Xn,name:String,transparent:{type:Boolean,default:!0},credit:{type:[String,Object],default:"MapQuest, SuperMap iServer Imagery"},...Do};var ME=u.defineComponent({name:"VcImageryProviderSupermap",props:Wg,emits:Vt,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="SuperMapImageryProvider";const i=Rt(e,t,n);if(i!==void 0)return n.createCesiumObject=async()=>{Cesium.SuperMapImageryProvider=Cesium.SuperMapImageryProvider||K8,i.unwatchFns.length===0&&i.setPropsWatcher(!0);const r=i.transformProps(e),a=new Cesium.SuperMapImageryProvider(r);return Cesium.SuperMapVersion||await a.init(),a},()=>{var r;return u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const SE={img:"//p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",terrain:"//p{s}.map.gtimg.com/demTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",vector:"//rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&type=vector&styleid={style}&scene=0"};class l7{constructor(t){const{Resource:n,defaultValue:i,Credit:r,Event:a}=Cesium;this._subdomains=t.subdomains||["1","2","3"],this._url=t.url||[t.protocol||"",SE[t.mapStyle]||SE.vector].join("");const s=n.createIfNeeded(this._url);s.appendForwardSlash(),this._ready=!1,this._resource=s,this._tileDiscardPolicy=t.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=t.minimumLevel||0,this._maximumLevel=t.maximumLevel||20,this._tilingScheme=new Cesium.WebMercatorTilingScheme,this._rectangle=i(t.rectangle,this._tilingScheme.rectangle);let l=t.credit;typeof l=="string"&&(l=new r(l)),this._credit=l,this.enablePickFeatures=i(t.enablePickFeatures,!1),this._hasAlphaChannel=i(t.hasAlphaChannel,!0),this._errorEvent=new a,this._readyPromise=As(),this._ready=!0,this._readyPromise.resolve(!0),this._style=t.styleId}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(t,n,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,n,i,r){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,c7.call(this,t,n,i,r))}pickFeatures(t,n,i,r,a){}}function c7(e,t,n,i){let r=this._url;const a=this._subdomains,s=this.tilingScheme.getNumberOfYTilesAtLevel(n)-t-1;return r=r.replace("{s}",a[(e+t+n)%a.length]).replace("{style}",this._style).replace("{x}",e).replace("{y}",-t).replace("{z}",n).replace("{sx}",e>>4).replace("{sy}",(1<<n)-t>>4).replace("{reverseY}",s),this._resource.getDerivedResource({url:r,request:i})}const qg={...Si,subdomains:{type:Array,default:()=>["1","2","3"]},mapStyle:{type:String,default:"vector"},styleId:{type:String,default:"1"},protocol:String,...un,...di,...Xn,...vn,...Ki,...Do};var TE=u.defineComponent({name:"VcImageryProviderTencent",props:qg,emits:Vt,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="TencentImageryProvider";const i=Rt(e,t,n);if(i!==void 0)return n.createCesiumObject=async()=>{Cesium.TencentImageryProvider=Cesium.TencentImageryProvider||l7,i.unwatchFns.length===0&&i.setPropsWatcher(!0);const r=i.transformProps(e);return new Cesium.TencentImageryProvider(r)},()=>{var r;return u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const In={IMG_W:"img_w",IMG_C:"img_c",CIA_W:"cia_w",CIA_C:"cia_c",VEC_W:"vec_w",VEC_C:"vec_c",TER_W:"ter_w",TER_C:"ter_c",CVA_W:"cva_w",CVA_C:"cva_c",CTA_W:"cta_w",CTA_C:"cta_c",EIA_W:"eia_w",EIA_C:"eia_c",EVA_W:"eva_w",EVA_C:"eva_c",IBO_C:"ibo_c",IBO_W:"ibo_w"};var Zg={exports:{}},nl={exports:{}};/*! https://mths.be/punycode v1.4.0 by @mathias */nl.exports;var IE;function u7(){return IE||(IE=1,function(e,t){(function(n){var i=t&&!t.nodeType&&t,r=e&&!e.nodeType&&e,a=typeof ui=="object"&&ui;(a.global===a||a.window===a||a.self===a)&&(n=a);var s,l=2147483647,d=36,h=1,m=26,p=38,g=700,v=72,b=128,P="-",w=/^xn--/,S=/[^\x20-\x7E]/,T=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=d-h,A=Math.floor,D=String.fromCharCode,z;function $(j){throw new RangeError(_[j])}function L(j,N){for(var H=j.length,ne=[];H--;)ne[H]=N(j[H]);return ne}function U(j,N){var H=j.split("@"),ne="";H.length>1&&(ne=H[0]+"@",j=H[1]),j=j.replace(T,".");var ie=j.split("."),ee=L(ie,N).join(".");return ne+ee}function Z(j){for(var N=[],H=0,ne=j.length,ie,ee;H<ne;)ie=j.charCodeAt(H++),ie>=55296&&ie<=56319&&H<ne?(ee=j.charCodeAt(H++),(ee&64512)==56320?N.push(((ie&1023)<<10)+(ee&1023)+65536):(N.push(ie),H--)):N.push(ie);return N}function W(j){return L(j,function(N){var H="";return N>65535&&(N-=65536,H+=D(N>>>10&1023|55296),N=56320|N&1023),H+=D(N),H}).join("")}function y(j){return j-48<10?j-22:j-65<26?j-65:j-97<26?j-97:d}function C(j,N){return j+22+75*(j<26)-((N!=0)<<5)}function x(j,N,H){var ne=0;for(j=H?A(j/g):j>>1,j+=A(j/N);j>M*m>>1;ne+=d)j=A(j/M);return A(ne+(M+1)*j/(j+p))}function B(j){var N=[],H=j.length,ne,ie=0,ee=b,Q=v,G,J,oe,Y,X,se,re,de,ce;for(G=j.lastIndexOf(P),G<0&&(G=0),J=0;J<G;++J)j.charCodeAt(J)>=128&&$("not-basic"),N.push(j.charCodeAt(J));for(oe=G>0?G+1:0;oe<H;){for(Y=ie,X=1,se=d;oe>=H&&$("invalid-input"),re=y(j.charCodeAt(oe++)),(re>=d||re>A((l-ie)/X))&&$("overflow"),ie+=re*X,de=se<=Q?h:se>=Q+m?m:se-Q,!(re<de);se+=d)ce=d-de,X>A(l/ce)&&$("overflow"),X*=ce;ne=N.length+1,Q=x(ie-Y,ne,Y==0),A(ie/ne)>l-ee&&$("overflow"),ee+=A(ie/ne),ie%=ne,N.splice(ie++,0,ee)}return W(N)}function O(j){var N,H,ne,ie,ee,Q,G,J,oe,Y,X,se=[],re,de,ce,he;for(j=Z(j),re=j.length,N=b,H=0,ee=v,Q=0;Q<re;++Q)X=j[Q],X<128&&se.push(D(X));for(ne=ie=se.length,ie&&se.push(P);ne<re;){for(G=l,Q=0;Q<re;++Q)X=j[Q],X>=N&&X<G&&(G=X);for(de=ne+1,G-N>A((l-H)/de)&&$("overflow"),H+=(G-N)*de,N=G,Q=0;Q<re;++Q)if(X=j[Q],X<N&&++H>l&&$("overflow"),X==N){for(J=H,oe=d;Y=oe<=ee?h:oe>=ee+m?m:oe-ee,!(J<Y);oe+=d)he=J-Y,ce=d-Y,se.push(D(C(Y+he%ce,0))),J=A(he/ce);se.push(D(C(J,0))),ee=x(H,de,ne==ie),H=0,++ne}++H,++N}return se.join("")}function I(j){return U(j,function(N){return w.test(N)?B(N.slice(4).toLowerCase()):N})}function V(j){return U(j,function(N){return S.test(N)?"xn--"+O(N):N})}if(s={version:"1.3.2",ucs2:{decode:Z,encode:W},decode:B,encode:O,toASCII:V,toUnicode:I},i&&r)if(e.exports==i)r.exports=s;else for(z in s)s.hasOwnProperty(z)&&(i[z]=s[z]);else n.punycode=s})(ui)}(nl,nl.exports)),nl.exports}var _u={exports:{}};/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */_u.exports;var AE;function d7(){return AE||(AE=1,function(e){(function(t,n){e.exports?e.exports=n():t.IPv6=n(t)})(ui,function(t){var n=t&&t.IPv6;function i(a){var s=a.toLowerCase(),l=s.split(":"),d=l.length,h=8;l[0]===""&&l[1]===""&&l[2]===""?(l.shift(),l.shift()):l[0]===""&&l[1]===""?l.shift():l[d-1]===""&&l[d-2]===""&&l.pop(),d=l.length,l[d-1].indexOf(".")!==-1&&(h=7);var m;for(m=0;m<d&&l[m]!=="";m++);if(m<h)for(l.splice(m,1,"0000");l.length<h;)l.splice(m,0,"0000");for(var p,g=0;g<h;g++){p=l[g].split("");for(var v=0;v<3&&(p[0]==="0"&&p.length>1);v++)p.splice(0,1);l[g]=p.join("")}var b=-1,P=0,w=0,S=-1,T=!1;for(g=0;g<h;g++)T?l[g]==="0"?w+=1:(T=!1,w>P&&(b=S,P=w)):l[g]==="0"&&(T=!0,S=g,w=1);w>P&&(b=S,P=w),P>1&&l.splice(b,P,""),d=l.length;var _="";for(l[0]===""&&(_=":"),g=0;g<d&&(_+=l[g],g!==d-1);g++)_+=":";return l[d-1]===""&&(_+=":"),_}function r(){return t.IPv6===this&&(t.IPv6=n),this}return{best:i,noConflict:r}})}(_u)),_u.exports}var Pu={exports:{}};/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */Pu.exports;var DE;function h7(){return DE||(DE=1,function(e){(function(t,n){e.exports?e.exports=n():t.SecondLevelDomains=n(t)})(ui,function(t){var n=t&&t.SecondLevelDomains,i={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(r){var a=r.lastIndexOf(".");if(a<=0||a>=r.length-1)return!1;var s=r.lastIndexOf(".",a-1);if(s<=0||s>=a-1)return!1;var l=i.list[r.slice(a+1)];return l?l.indexOf(" "+r.slice(s+1,a)+" ")>=0:!1},is:function(r){var a=r.lastIndexOf(".");if(a<=0||a>=r.length-1)return!1;var s=r.lastIndexOf(".",a-1);if(s>=0)return!1;var l=i.list[r.slice(a+1)];return l?l.indexOf(" "+r.slice(0,a)+" ")>=0:!1},get:function(r){var a=r.lastIndexOf(".");if(a<=0||a>=r.length-1)return null;var s=r.lastIndexOf(".",a-1);if(s<=0||s>=a-1)return null;var l=i.list[r.slice(a+1)];return!l||l.indexOf(" "+r.slice(s+1,a)+" ")<0?null:r.slice(s+1)},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=n),this}};return i})}(Pu)),Pu.exports}/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */Zg.exports,function(e){(function(t,n){e.exports?e.exports=n(u7(),d7(),h7()):t.URI=n(t.punycode,t.IPv6,t.SecondLevelDomains,t)})(ui,function(t,n,i,r){var a=r&&r.URI;function s(y,C){var x=arguments.length>=1,B=arguments.length>=2;if(!(this instanceof s))return x?B?new s(y,C):new s(y):new s;if(y===void 0){if(x)throw new TypeError("undefined is not a valid argument for URI");typeof location!="undefined"?y=location.href+"":y=""}if(y===null&&x)throw new TypeError("null is not a valid argument for URI");return this.href(y),C!==void 0?this.absoluteTo(C):this}function l(y){return/^[0-9]+$/.test(y)}s.version="1.19.11";var d=s.prototype,h=Object.prototype.hasOwnProperty;function m(y){return y.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function p(y){return y===void 0?"Undefined":String(Object.prototype.toString.call(y)).slice(8,-1)}function g(y){return p(y)==="Array"}function v(y,C){var x={},B,O;if(p(C)==="RegExp")x=null;else if(g(C))for(B=0,O=C.length;B<O;B++)x[C[B]]=!0;else x[C]=!0;for(B=0,O=y.length;B<O;B++){var I=x&&x[y[B]]!==void 0||!x&&C.test(y[B]);I&&(y.splice(B,1),O--,B--)}return y}function b(y,C){var x,B;if(g(C)){for(x=0,B=C.length;x<B;x++)if(!b(y,C[x]))return!1;return!0}var O=p(C);for(x=0,B=y.length;x<B;x++)if(O==="RegExp"){if(typeof y[x]=="string"&&y[x].match(C))return!0}else if(y[x]===C)return!0;return!1}function P(y,C){if(!g(y)||!g(C)||y.length!==C.length)return!1;y.sort(),C.sort();for(var x=0,B=y.length;x<B;x++)if(y[x]!==C[x])return!1;return!0}function w(y){var C=/^\/+|\/+$/g;return y.replace(C,"")}s._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:s.preventInvalidHostname,duplicateQueryParameters:s.duplicateQueryParameters,escapeQuerySpace:s.escapeQuerySpace}},s.preventInvalidHostname=!1,s.duplicateQueryParameters=!1,s.escapeQuerySpace=!0,s.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,s.idn_expression=/[^a-z0-9\._-]/i,s.punycode_expression=/(xn--)/i,s.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,s.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/ig,s.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},s.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,s.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},s.hostProtocols=["http","https"],s.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,s.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},s.getDomAttribute=function(y){if(!(!y||!y.nodeName)){var C=y.nodeName.toLowerCase();if(!(C==="input"&&y.type!=="image"))return s.domAttributes[C]}};function S(y){return escape(y)}function T(y){return encodeURIComponent(y).replace(/[!'()*]/g,S).replace(/\*/g,"%2A")}s.encode=T,s.decode=decodeURIComponent,s.iso8859=function(){s.encode=escape,s.decode=unescape},s.unicode=function(){s.encode=T,s.decode=decodeURIComponent},s.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},s.encodeQuery=function(y,C){var x=s.encode(y+"");return C===void 0&&(C=s.escapeQuerySpace),C?x.replace(/%20/g,"+"):x},s.decodeQuery=function(y,C){y+="",C===void 0&&(C=s.escapeQuerySpace);try{return s.decode(C?y.replace(/\+/g,"%20"):y)}catch(x){return y}};var _={encode:"encode",decode:"decode"},M,A=function(y,C){return function(x){try{return s[C](x+"").replace(s.characters[y][C].expression,function(B){return s.characters[y][C].map[B]})}catch(B){return x}}};for(M in _)s[M+"PathSegment"]=A("pathname",_[M]),s[M+"UrnPathSegment"]=A("urnpath",_[M]);var D=function(y,C,x){return function(B){var O;x?O=function(N){return s[C](s[x](N))}:O=s[C];for(var I=(B+"").split(y),V=0,j=I.length;V<j;V++)I[V]=O(I[V]);return I.join(y)}};s.decodePath=D("/","decodePathSegment"),s.decodeUrnPath=D(":","decodeUrnPathSegment"),s.recodePath=D("/","encodePathSegment","decode"),s.recodeUrnPath=D(":","encodeUrnPathSegment","decode"),s.encodeReserved=A("reserved","encode"),s.parse=function(y,C){var x;return C||(C={preventInvalidHostname:s.preventInvalidHostname}),y=y.replace(s.leading_whitespace_expression,""),y=y.replace(s.ascii_tab_whitespace,""),x=y.indexOf("#"),x>-1&&(C.fragment=y.substring(x+1)||null,y=y.substring(0,x)),x=y.indexOf("?"),x>-1&&(C.query=y.substring(x+1)||null,y=y.substring(0,x)),y=y.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),y=y.replace(/^[/\\]{2,}/i,"//"),y.substring(0,2)==="//"?(C.protocol=null,y=y.substring(2),y=s.parseAuthority(y,C)):(x=y.indexOf(":"),x>-1&&(C.protocol=y.substring(0,x)||null,C.protocol&&!C.protocol.match(s.protocol_expression)?C.protocol=void 0:y.substring(x+1,x+3).replace(/\\/g,"/")==="//"?(y=y.substring(x+3),y=s.parseAuthority(y,C)):(y=y.substring(x+1),C.urn=!0))),C.path=y,C},s.parseHost=function(y,C){y||(y=""),y=y.replace(/\\/g,"/");var x=y.indexOf("/"),B,O;if(x===-1&&(x=y.length),y.charAt(0)==="[")B=y.indexOf("]"),C.hostname=y.substring(1,B)||null,C.port=y.substring(B+2,x)||null,C.port==="/"&&(C.port=null);else{var I=y.indexOf(":"),V=y.indexOf("/"),j=y.indexOf(":",I+1);j!==-1&&(V===-1||j<V)?(C.hostname=y.substring(0,x)||null,C.port=null):(O=y.substring(0,x).split(":"),C.hostname=O[0]||null,C.port=O[1]||null)}return C.hostname&&y.substring(x).charAt(0)!=="/"&&(x++,y="/"+y),C.preventInvalidHostname&&s.ensureValidHostname(C.hostname,C.protocol),C.port&&s.ensureValidPort(C.port),y.substring(x)||"/"},s.parseAuthority=function(y,C){return y=s.parseUserinfo(y,C),s.parseHost(y,C)},s.parseUserinfo=function(y,C){var x=y,B=y.indexOf("\\");B!==-1&&(y=y.replace(/\\/g,"/"));var O=y.indexOf("/"),I=y.lastIndexOf("@",O>-1?O:y.length-1),V;return I>-1&&(O===-1||I<O)?(V=y.substring(0,I).split(":"),C.username=V[0]?s.decode(V[0]):null,V.shift(),C.password=V[0]?s.decode(V.join(":")):null,y=x.substring(I+1)):(C.username=null,C.password=null),y},s.parseQuery=function(y,C){if(!y)return{};if(y=y.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!y)return{};for(var x={},B=y.split("&"),O=B.length,I,V,j,N=0;N<O;N++)I=B[N].split("="),V=s.decodeQuery(I.shift(),C),j=I.length?s.decodeQuery(I.join("="),C):null,V!=="__proto__"&&(h.call(x,V)?((typeof x[V]=="string"||x[V]===null)&&(x[V]=[x[V]]),x[V].push(j)):x[V]=j);return x},s.build=function(y){var C="",x=!1;return y.protocol&&(C+=y.protocol+":"),!y.urn&&(C||y.hostname)&&(C+="//",x=!0),C+=s.buildAuthority(y)||"",typeof y.path=="string"&&(y.path.charAt(0)!=="/"&&x&&(C+="/"),C+=y.path),typeof y.query=="string"&&y.query&&(C+="?"+y.query),typeof y.fragment=="string"&&y.fragment&&(C+="#"+y.fragment),C},s.buildHost=function(y){var C="";if(y.hostname)s.ip6_expression.test(y.hostname)?C+="["+y.hostname+"]":C+=y.hostname;else return"";return y.port&&(C+=":"+y.port),C},s.buildAuthority=function(y){return s.buildUserinfo(y)+s.buildHost(y)},s.buildUserinfo=function(y){var C="";return y.username&&(C+=s.encode(y.username)),y.password&&(C+=":"+s.encode(y.password)),C&&(C+="@"),C},s.buildQuery=function(y,C,x){var B="",O,I,V,j;for(I in y)if(I!=="__proto__"&&h.call(y,I))if(g(y[I]))for(O={},V=0,j=y[I].length;V<j;V++)y[I][V]!==void 0&&O[y[I][V]+""]===void 0&&(B+="&"+s.buildQueryParameter(I,y[I][V],x),C!==!0&&(O[y[I][V]+""]=!0));else y[I]!==void 0&&(B+="&"+s.buildQueryParameter(I,y[I],x));return B.substring(1)},s.buildQueryParameter=function(y,C,x){return s.encodeQuery(y,x)+(C!==null?"="+s.encodeQuery(C,x):"")},s.addQuery=function(y,C,x){if(typeof C=="object")for(var B in C)h.call(C,B)&&s.addQuery(y,B,C[B]);else if(typeof C=="string"){if(y[C]===void 0){y[C]=x;return}else typeof y[C]=="string"&&(y[C]=[y[C]]);g(x)||(x=[x]),y[C]=(y[C]||[]).concat(x)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},s.setQuery=function(y,C,x){if(typeof C=="object")for(var B in C)h.call(C,B)&&s.setQuery(y,B,C[B]);else if(typeof C=="string")y[C]=x===void 0?null:x;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},s.removeQuery=function(y,C,x){var B,O,I;if(g(C))for(B=0,O=C.length;B<O;B++)y[C[B]]=void 0;else if(p(C)==="RegExp")for(I in y)C.test(I)&&(y[I]=void 0);else if(typeof C=="object")for(I in C)h.call(C,I)&&s.removeQuery(y,I,C[I]);else if(typeof C=="string")x!==void 0?p(x)==="RegExp"?!g(y[C])&&x.test(y[C])?y[C]=void 0:y[C]=v(y[C],x):y[C]===String(x)&&(!g(x)||x.length===1)?y[C]=void 0:g(y[C])&&(y[C]=v(y[C],x)):y[C]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},s.hasQuery=function(y,C,x,B){switch(p(C)){case"String":break;case"RegExp":for(var O in y)if(h.call(y,O)&&C.test(O)&&(x===void 0||s.hasQuery(y,O,x)))return!0;return!1;case"Object":for(var I in C)if(h.call(C,I)&&!s.hasQuery(y,I,C[I]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(p(x)){case"Undefined":return C in y;case"Boolean":var V=!!(g(y[C])?y[C].length:y[C]);return x===V;case"Function":return!!x(y[C],C,y);case"Array":if(!g(y[C]))return!1;var j=B?b:P;return j(y[C],x);case"RegExp":return g(y[C])?B?b(y[C],x):!1:!!(y[C]&&y[C].match(x));case"Number":x=String(x);case"String":return g(y[C])?B?b(y[C],x):!1:y[C]===x;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},s.joinPaths=function(){for(var y=[],C=[],x=0,B=0;B<arguments.length;B++){var O=new s(arguments[B]);y.push(O);for(var I=O.segment(),V=0;V<I.length;V++)typeof I[V]=="string"&&C.push(I[V]),I[V]&&x++}if(!C.length||!x)return new s("");var j=new s("").segment(C);return(y[0].path()===""||y[0].path().slice(0,1)==="/")&&j.path("/"+j.path()),j.normalize()},s.commonPath=function(y,C){var x=Math.min(y.length,C.length),B;for(B=0;B<x;B++)if(y.charAt(B)!==C.charAt(B)){B--;break}return B<1?y.charAt(0)===C.charAt(0)&&y.charAt(0)==="/"?"/":"":((y.charAt(B)!=="/"||C.charAt(B)!=="/")&&(B=y.substring(0,B).lastIndexOf("/")),y.substring(0,B+1))},s.withinString=function(y,C,x){x||(x={});var B=x.start||s.findUri.start,O=x.end||s.findUri.end,I=x.trim||s.findUri.trim,V=x.parens||s.findUri.parens,j=/[a-z0-9-]=["']?$/i;for(B.lastIndex=0;;){var N=B.exec(y);if(!N)break;var H=N.index;if(x.ignoreHtml){var ne=y.slice(Math.max(H-3,0),H);if(ne&&j.test(ne))continue}for(var ie=H+y.slice(H).search(O),ee=y.slice(H,ie),Q=-1;;){var G=V.exec(ee);if(!G)break;var J=G.index+G[0].length;Q=Math.max(Q,J)}if(Q>-1?ee=ee.slice(0,Q)+ee.slice(Q).replace(I,""):ee=ee.replace(I,""),!(ee.length<=N[0].length)&&!(x.ignore&&x.ignore.test(ee))){ie=H+ee.length;var oe=C(ee,H,ie,y);if(oe===void 0){B.lastIndex=ie;continue}oe=String(oe),y=y.slice(0,H)+oe+y.slice(ie),B.lastIndex=H+oe.length}}return B.lastIndex=0,y},s.ensureValidHostname=function(y,C){var x=!!y,B=!!C,O=!1;if(B&&(O=b(s.hostProtocols,C)),O&&!x)throw new TypeError("Hostname cannot be empty, if protocol is "+C);if(y&&y.match(s.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+y+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(y).match(s.invalid_hostname_characters))throw new TypeError('Hostname "'+y+'" contains characters other than [A-Z0-9.-:_]')}},s.ensureValidPort=function(y){if(y){var C=Number(y);if(!(l(C)&&C>0&&C<65536))throw new TypeError('Port "'+y+'" is not a valid port')}},s.noConflict=function(y){if(y){var C={URI:this.noConflict()};return r.URITemplate&&typeof r.URITemplate.noConflict=="function"&&(C.URITemplate=r.URITemplate.noConflict()),r.IPv6&&typeof r.IPv6.noConflict=="function"&&(C.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&typeof r.SecondLevelDomains.noConflict=="function"&&(C.SecondLevelDomains=r.SecondLevelDomains.noConflict()),C}else r.URI===this&&(r.URI=a);return this},d.build=function(y){return y===!0?this._deferred_build=!0:(y===void 0||this._deferred_build)&&(this._string=s.build(this._parts),this._deferred_build=!1),this},d.clone=function(){return new s(this)},d.valueOf=d.toString=function(){return this.build(!1)._string};function z(y){return function(C,x){return C===void 0?this._parts[y]||"":(this._parts[y]=C||null,this.build(!x),this)}}function $(y,C){return function(x,B){return x===void 0?this._parts[y]||"":(x!==null&&(x=x+"",x.charAt(0)===C&&(x=x.substring(1))),this._parts[y]=x,this.build(!B),this)}}d.protocol=z("protocol"),d.username=z("username"),d.password=z("password"),d.hostname=z("hostname"),d.port=z("port"),d.query=$("query","?"),d.fragment=$("fragment","#"),d.search=function(y,C){var x=this.query(y,C);return typeof x=="string"&&x.length?"?"+x:x},d.hash=function(y,C){var x=this.fragment(y,C);return typeof x=="string"&&x.length?"#"+x:x},d.pathname=function(y,C){if(y===void 0||y===!0){var x=this._parts.path||(this._parts.hostname?"/":"");return y?(this._parts.urn?s.decodeUrnPath:s.decodePath)(x):x}else return this._parts.urn?this._parts.path=y?s.recodeUrnPath(y):"":this._parts.path=y?s.recodePath(y):"/",this.build(!C),this},d.path=d.pathname,d.href=function(y,C){var x;if(y===void 0)return this.toString();this._string="",this._parts=s._parts();var B=y instanceof s,O=typeof y=="object"&&(y.hostname||y.path||y.pathname);if(y.nodeName){var I=s.getDomAttribute(y);y=y[I]||"",O=!1}if(!B&&O&&y.pathname!==void 0&&(y=y.toString()),typeof y=="string"||y instanceof String)this._parts=s.parse(String(y),this._parts);else if(B||O){var V=B?y._parts:y;for(x in V)x!=="query"&&h.call(this._parts,x)&&(this._parts[x]=V[x]);V.query&&this.query(V.query,!1)}else throw new TypeError("invalid input");return this.build(!C),this},d.is=function(y){var C=!1,x=!1,B=!1,O=!1,I=!1,V=!1,j=!1,N=!this._parts.urn;switch(this._parts.hostname&&(N=!1,x=s.ip4_expression.test(this._parts.hostname),B=s.ip6_expression.test(this._parts.hostname),C=x||B,O=!C,I=O&&i&&i.has(this._parts.hostname),V=O&&s.idn_expression.test(this._parts.hostname),j=O&&s.punycode_expression.test(this._parts.hostname)),y.toLowerCase()){case"relative":return N;case"absolute":return!N;case"domain":case"name":return O;case"sld":return I;case"ip":return C;case"ip4":case"ipv4":case"inet4":return x;case"ip6":case"ipv6":case"inet6":return B;case"idn":return V;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return j}return null};var L=d.protocol,U=d.port,Z=d.hostname;d.protocol=function(y,C){if(y&&(y=y.replace(/:(\/\/)?$/,""),!y.match(s.protocol_expression)))throw new TypeError('Protocol "'+y+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return L.call(this,y,C)},d.scheme=d.protocol,d.port=function(y,C){return this._parts.urn?y===void 0?"":this:(y!==void 0&&(y===0&&(y=null),y&&(y+="",y.charAt(0)===":"&&(y=y.substring(1)),s.ensureValidPort(y))),U.call(this,y,C))},d.hostname=function(y,C){if(this._parts.urn)return y===void 0?"":this;if(y!==void 0){var x={preventInvalidHostname:this._parts.preventInvalidHostname},B=s.parseHost(y,x);if(B!=="/")throw new TypeError('Hostname "'+y+'" contains characters other than [A-Z0-9.-]');y=x.hostname,this._parts.preventInvalidHostname&&s.ensureValidHostname(y,this._parts.protocol)}return Z.call(this,y,C)},d.origin=function(y,C){if(this._parts.urn)return y===void 0?"":this;if(y===void 0){var x=this.protocol(),B=this.authority();return B?(x?x+"://":"")+this.authority():""}else{var O=s(y);return this.protocol(O.protocol()).authority(O.authority()).build(!C),this}},d.host=function(y,C){if(this._parts.urn)return y===void 0?"":this;if(y===void 0)return this._parts.hostname?s.buildHost(this._parts):"";var x=s.parseHost(y,this._parts);if(x!=="/")throw new TypeError('Hostname "'+y+'" contains characters other than [A-Z0-9.-]');return this.build(!C),this},d.authority=function(y,C){if(this._parts.urn)return y===void 0?"":this;if(y===void 0)return this._parts.hostname?s.buildAuthority(this._parts):"";var x=s.parseAuthority(y,this._parts);if(x!=="/")throw new TypeError('Hostname "'+y+'" contains characters other than [A-Z0-9.-]');return this.build(!C),this},d.userinfo=function(y,C){if(this._parts.urn)return y===void 0?"":this;if(y===void 0){var x=s.buildUserinfo(this._parts);return x&&x.substring(0,x.length-1)}else return y[y.length-1]!=="@"&&(y+="@"),s.parseUserinfo(y,this._parts),this.build(!C),this},d.resource=function(y,C){var x;return y===void 0?this.path()+this.search()+this.hash():(x=s.parse(y),this._parts.path=x.path,this._parts.query=x.query,this._parts.fragment=x.fragment,this.build(!C),this)},d.subdomain=function(y,C){if(this._parts.urn)return y===void 0?"":this;if(y===void 0){if(!this._parts.hostname||this.is("IP"))return"";var x=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,x)||""}else{var B=this._parts.hostname.length-this.domain().length,O=this._parts.hostname.substring(0,B),I=new RegExp("^"+m(O));if(y&&y.charAt(y.length-1)!=="."&&(y+="."),y.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return y&&s.ensureValidHostname(y,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(I,y),this.build(!C),this}},d.domain=function(y,C){if(this._parts.urn)return y===void 0?"":this;if(typeof y=="boolean"&&(C=y,y=void 0),y===void 0){if(!this._parts.hostname||this.is("IP"))return"";var x=this._parts.hostname.match(/\./g);if(x&&x.length<2)return this._parts.hostname;var B=this._parts.hostname.length-this.tld(C).length-1;return B=this._parts.hostname.lastIndexOf(".",B-1)+1,this._parts.hostname.substring(B)||""}else{if(!y)throw new TypeError("cannot set domain empty");if(y.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(s.ensureValidHostname(y,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=y;else{var O=new RegExp(m(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(O,y)}return this.build(!C),this}},d.tld=function(y,C){if(this._parts.urn)return y===void 0?"":this;if(typeof y=="boolean"&&(C=y,y=void 0),y===void 0){if(!this._parts.hostname||this.is("IP"))return"";var x=this._parts.hostname.lastIndexOf("."),B=this._parts.hostname.substring(x+1);return C!==!0&&i&&i.list[B.toLowerCase()]&&i.get(this._parts.hostname)||B}else{var O;if(y)if(y.match(/[^a-zA-Z0-9-]/))if(i&&i.is(y))O=new RegExp(m(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(O,y);else throw new TypeError('TLD "'+y+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");O=new RegExp(m(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(O,y)}else throw new TypeError("cannot set TLD empty");return this.build(!C),this}},d.directory=function(y,C){if(this._parts.urn)return y===void 0?"":this;if(y===void 0||y===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var x=this._parts.path.length-this.filename().length-1,B=this._parts.path.substring(0,x)||(this._parts.hostname?"/":"");return y?s.decodePath(B):B}else{var O=this._parts.path.length-this.filename().length,I=this._parts.path.substring(0,O),V=new RegExp("^"+m(I));return this.is("relative")||(y||(y="/"),y.charAt(0)!=="/"&&(y="/"+y)),y&&y.charAt(y.length-1)!=="/"&&(y+="/"),y=s.recodePath(y),this._parts.path=this._parts.path.replace(V,y),this.build(!C),this}},d.filename=function(y,C){if(this._parts.urn)return y===void 0?"":this;if(typeof y!="string"){if(!this._parts.path||this._parts.path==="/")return"";var x=this._parts.path.lastIndexOf("/"),B=this._parts.path.substring(x+1);return y?s.decodePathSegment(B):B}else{var O=!1;y.charAt(0)==="/"&&(y=y.substring(1)),y.match(/\.?\//)&&(O=!0);var I=new RegExp(m(this.filename())+"$");return y=s.recodePath(y),this._parts.path=this._parts.path.replace(I,y),O?this.normalizePath(C):this.build(!C),this}},d.suffix=function(y,C){if(this._parts.urn)return y===void 0?"":this;if(y===void 0||y===!0){if(!this._parts.path||this._parts.path==="/")return"";var x=this.filename(),B=x.lastIndexOf("."),O,I;return B===-1?"":(O=x.substring(B+1),I=/^[a-z0-9%]+$/i.test(O)?O:"",y?s.decodePathSegment(I):I)}else{y.charAt(0)==="."&&(y=y.substring(1));var V=this.suffix(),j;if(V)y?j=new RegExp(m(V)+"$"):j=new RegExp(m("."+V)+"$");else{if(!y)return this;this._parts.path+="."+s.recodePath(y)}return j&&(y=s.recodePath(y),this._parts.path=this._parts.path.replace(j,y)),this.build(!C),this}},d.segment=function(y,C,x){var B=this._parts.urn?":":"/",O=this.path(),I=O.substring(0,1)==="/",V=O.split(B);if(y!==void 0&&typeof y!="number"&&(x=C,C=y,y=void 0),y!==void 0&&typeof y!="number")throw new Error('Bad segment "'+y+'", must be 0-based integer');if(I&&V.shift(),y<0&&(y=Math.max(V.length+y,0)),C===void 0)return y===void 0?V:V[y];if(y===null||V[y]===void 0)if(g(C)){V=[];for(var j=0,N=C.length;j<N;j++)!C[j].length&&(!V.length||!V[V.length-1].length)||(V.length&&!V[V.length-1].length&&V.pop(),V.push(w(C[j])))}else(C||typeof C=="string")&&(C=w(C),V[V.length-1]===""?V[V.length-1]=C:V.push(C));else C?V[y]=w(C):V.splice(y,1);return I&&V.unshift(""),this.path(V.join(B),x)},d.segmentCoded=function(y,C,x){var B,O,I;if(typeof y!="number"&&(x=C,C=y,y=void 0),C===void 0){if(B=this.segment(y,C,x),!g(B))B=B!==void 0?s.decode(B):void 0;else for(O=0,I=B.length;O<I;O++)B[O]=s.decode(B[O]);return B}if(!g(C))C=typeof C=="string"||C instanceof String?s.encode(C):C;else for(O=0,I=C.length;O<I;O++)C[O]=s.encode(C[O]);return this.segment(y,C,x)};var W=d.query;return d.query=function(y,C){if(y===!0)return s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof y=="function"){var x=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace),B=y.call(this,x);return this._parts.query=s.buildQuery(B||x,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!C),this}else return y!==void 0&&typeof y!="string"?(this._parts.query=s.buildQuery(y,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!C),this):W.call(this,y,C)},d.setQuery=function(y,C,x){var B=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof y=="string"||y instanceof String)B[y]=C!==void 0?C:null;else if(typeof y=="object")for(var O in y)h.call(y,O)&&(B[O]=y[O]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=s.buildQuery(B,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof y!="string"&&(x=C),this.build(!x),this},d.addQuery=function(y,C,x){var B=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.addQuery(B,y,C===void 0?null:C),this._parts.query=s.buildQuery(B,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof y!="string"&&(x=C),this.build(!x),this},d.removeQuery=function(y,C,x){var B=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.removeQuery(B,y,C),this._parts.query=s.buildQuery(B,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof y!="string"&&(x=C),this.build(!x),this},d.hasQuery=function(y,C,x){var B=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.hasQuery(B,y,C,x)},d.setSearch=d.setQuery,d.addSearch=d.addQuery,d.removeSearch=d.removeQuery,d.hasSearch=d.hasQuery,d.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},d.normalizeProtocol=function(y){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!y)),this},d.normalizeHostname=function(y){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&n&&(this._parts.hostname=n.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!y)),this},d.normalizePort=function(y){return typeof this._parts.protocol=="string"&&this._parts.port===s.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!y)),this},d.normalizePath=function(y){var C=this._parts.path;if(!C)return this;if(this._parts.urn)return this._parts.path=s.recodeUrnPath(this._parts.path),this.build(!y),this;if(this._parts.path==="/")return this;C=s.recodePath(C);var x,B="",O,I;for(C.charAt(0)!=="/"&&(x=!0,C="/"+C),(C.slice(-3)==="/.."||C.slice(-2)==="/.")&&(C+="/"),C=C.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),x&&(B=C.substring(1).match(/^(\.\.\/)+/)||"",B&&(B=B[0]));O=C.search(/\/\.\.(\/|$)/),O!==-1;){if(O===0){C=C.substring(3);continue}I=C.substring(0,O).lastIndexOf("/"),I===-1&&(I=O),C=C.substring(0,I)+C.substring(O+3)}return x&&this.is("relative")&&(C=B+C.substring(1)),this._parts.path=C,this.build(!y),this},d.normalizePathname=d.normalizePath,d.normalizeQuery=function(y){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(s.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!y)),this},d.normalizeFragment=function(y){return this._parts.fragment||(this._parts.fragment=null,this.build(!y)),this},d.normalizeSearch=d.normalizeQuery,d.normalizeHash=d.normalizeFragment,d.iso8859=function(){var y=s.encode,C=s.decode;s.encode=escape,s.decode=decodeURIComponent;try{this.normalize()}finally{s.encode=y,s.decode=C}return this},d.unicode=function(){var y=s.encode,C=s.decode;s.encode=T,s.decode=unescape;try{this.normalize()}finally{s.encode=y,s.decode=C}return this},d.readable=function(){var y=this.clone();y.username("").password("").normalize();var C="";if(y._parts.protocol&&(C+=y._parts.protocol+"://"),y._parts.hostname&&(y.is("punycode")&&t?(C+=t.toUnicode(y._parts.hostname),y._parts.port&&(C+=":"+y._parts.port)):C+=y.host()),y._parts.hostname&&y._parts.path&&y._parts.path.charAt(0)!=="/"&&(C+="/"),C+=y.path(!0),y._parts.query){for(var x="",B=0,O=y._parts.query.split("&"),I=O.length;B<I;B++){var V=(O[B]||"").split("=");x+="&"+s.decodeQuery(V[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),V[1]!==void 0&&(x+="="+s.decodeQuery(V[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}C+="?"+x.substring(1)}return C+=s.decodeQuery(y.hash(),!0),C},d.absoluteTo=function(y){var C=this.clone(),x=["protocol","username","password","hostname","port"],B,O,I;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(y instanceof s||(y=new s(y)),C._parts.protocol||(C._parts.protocol=y._parts.protocol,this._parts.hostname))return C;for(O=0;I=x[O];O++)C._parts[I]=y._parts[I];return C._parts.path?(C._parts.path.substring(-2)===".."&&(C._parts.path+="/"),C.path().charAt(0)!=="/"&&(B=y.directory(),B=B||(y.path().indexOf("/")===0?"/":""),C._parts.path=(B?B+"/":"")+C._parts.path,C.normalizePath())):(C._parts.path=y._parts.path,C._parts.query||(C._parts.query=y._parts.query)),C.build(),C},d.relativeTo=function(y){var C=this.clone().normalize(),x,B,O,I,V;if(C._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(y=new s(y).normalize(),x=C._parts,B=y._parts,I=C.path(),V=y.path(),I.charAt(0)!=="/")throw new Error("URI is already relative");if(V.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(x.protocol===B.protocol&&(x.protocol=null),x.username!==B.username||x.password!==B.password||x.protocol!==null||x.username!==null||x.password!==null)return C.build();if(x.hostname===B.hostname&&x.port===B.port)x.hostname=null,x.port=null;else return C.build();if(I===V)return x.path="",C.build();if(O=s.commonPath(I,V),!O)return C.build();var j=B.path.substring(O.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return x.path=j+x.path.substring(O.length)||"./",C.build()},d.equals=function(y){var C=this.clone(),x=new s(y),B={},O={},I={},V,j,N;if(C.normalize(),x.normalize(),C.toString()===x.toString())return!0;if(V=C.query(),j=x.query(),C.query(""),x.query(""),C.toString()!==x.toString()||V.length!==j.length)return!1;B=s.parseQuery(V,this._parts.escapeQuerySpace),O=s.parseQuery(j,this._parts.escapeQuerySpace);for(N in B)if(h.call(B,N)){if(g(B[N])){if(!P(B[N],O[N]))return!1}else if(B[N]!==O[N])return!1;I[N]=!0}for(N in O)if(h.call(O,N)&&!I[N])return!1;return!0},d.preventInvalidHostname=function(y){return this._parts.preventInvalidHostname=!!y,this},d.duplicateQueryParameters=function(y){return this._parts.duplicateQueryParameters=!!y,this},d.escapeQuerySpace=function(y){return this._parts.escapeQuerySpace=!!y,this},s})}(Zg);var m7=Zg.exports,p7=th(m7);const LE={},BE={},Qg={},RE={},Jg={},Ra={};class f7{constructor(t){Object.keys(In).forEach(m=>{switch(LE[In[m]]=t.protocol+"://{s}.tianditu.gov.cn/"+In[m]+"/wmts",BE[In[m]]=In[m].slice(0,3),Qg[In[m]]=In[m].slice(4),RE[In[m]]="tiles",Qg[In[m]]==="w"?Jg[In[m]]="900913":Jg[In[m]]="4490",In[m]){case"img_w":case"img_c":case"cia_w":case"cia_c":case"cta_w":case"cta_c":Ra[In[m]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18"];break;case"vec_w":case"vec_c":case"cva_w":case"cva_c":Ra[In[m]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"];break;case"ter_w":case"ter_c":Ra[In[m]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14"];break;case"eia_w":case"eia_c":case"eva_w":case"eva_c":case"ibo_c":case"ibo_w":Ra[In[m]]=["1","2","3","4","5","6","7","8","9","10"];break}});const{Credit:n,Resource:i,defaultValue:r,Event:a,GeographicTilingScheme:s,WebMercatorTilingScheme:l}=Cesium;t=r(t,{}),this._mapStyle=r(t.mapStyle,In.IMG_W),this._url=t.url||r(t.url,LE[this._mapStyle]);const d=i.createIfNeeded(this._url);d.appendForwardSlash(),this._ready=!1,this._resource=d,this._token=t.token,this._layer=r(t.layer,BE[this._mapStyle]),this._style=r(t.style,"default"),this._tileMatrixSetID=r(t.tileMatrixSetID,Qg[this._mapStyle]),this._tileMatrixLabels=r(t.tileMatrixLabels,Ra[this._mapStyle]),this._format=r(t.format,RE[this._mapStyle]),this._epsgCode=Jg[this._mapStyle],this._tilingScheme=this._epsgCode==="900913"?new l:new s,this._tileWidth=r(t.tileWidth,256),this._tileHeight=r(t.tileHeight,256),this._minimumLevel=r(t.minimumLevel,0),this._maximumLevel=r(t.maximumLevel,Ra[this._mapStyle].length),this._rectangle=r(t.rectangle,this._tilingScheme.rectangle),this._errorEvent=new a;const h=r(t.credit,"\u5929\u5730\u56FE\u5168\u7403\u5F71\u50CF\u670D\u52A1");this._credit=typeof h=="string"?new n(h):h,this._subdomains=r(t.subdomains,["t0","t1","t2","t3","t4","t5","t6","t7"]),this._tileDiscardPolicy=t.tileDiscardPolicy,this._ready=!0}getTileCredits(t,n,i){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,n,i,r){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");const a=g7.call(this,t,n,i,r);return Cesium.ImageryProvider.loadImage(this,a)}pickFeatures(t,n,i,r,a){}get url(){return this._resource.url}get proxy(){return this._resource.proxy}get mapStyle(){return this._mapStyle}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get maximumLevel(){return this._maximumLevel}get minimumLevel(){return this._minimumLevel}get tilingScheme(){return this._tilingScheme}get rectangle(){return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return!0}get credit(){return this._credit}get hasAlphaChannel(){return!0}get tileDiscardPolicy(){return this._tileDiscardPolicy}}function g7(e,t,n,i){var r;const{combine:a,defined:s,defaultValue:l,queryToObject:d,objectToQuery:h}=Cesium,m=Object.freeze,p=m({service:"WMTS",version:"1.0.0",request:"GetTile"});this._epsgCode==="900913"&&(n-=1);const g=this._tileMatrixLabels,v=s(g)?g[n]:n.toString(),b=this._subdomains;let P=this._url.replace("{s}",b[(e+t+n)%b.length]);const w=new p7(P);let S=d(l((r=w.query)==null?void 0:r.call(w),""));S=a(p,S),S.tilematrix=v,S.layer=this._layer,S.style=this._style,S.tilerow=t,S.tilecol=e,S.tilematrixset=this._tileMatrixSetID,S.format=this._format;const T=h(S);return P=w.toString()+"?"+T,s(this._proxy)&&(P=this._proxy.getURL(P)),s(this._token)&&(P+="&tk="+this._token),this._resource.getDerivedResource({url:P,request:i})}const Xg={...Si,...di,...Xn,...vn,mapStyle:{type:String,default:"img_w",validator:e=>["cia_c","cia_w","cta_c","cta_w","cva_c","cva_w","eia_c","eia_w","eva_c","eva_w","img_c","img_w","ter_c","ter_w","vec_c","vec_w","ibo_c","ibo_w"].includes(e)},token:String,protocol:{type:String,default:"https"},credit:{type:[String,Object],default:"\u5929\u5730\u56FE\u5168\u7403\u5F71\u50CF\u670D\u52A1"},...Do};var VE=u.defineComponent({name:"VcImageryProviderTianditu",props:Xg,emits:Vt,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="TiandituImageryProvider";const i=Rt(e,t,n);if(i!==void 0)return n.createCesiumObject=async()=>{Cesium.TiandituImageryProvider=Cesium.TiandituImageryProvider||f7,i.unwatchFns.length===0&&i.setPropsWatcher(!0);const r=i.transformProps(e);return new Cesium.TiandituImageryProvider(r)},()=>{var r;return u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const Yg={...Ki,...at,color:{type:[Object,String,Array],default:"YELLOW"},...ur,...dr};var FE=u.defineComponent({name:"VcImageryProviderTileCoordinates",props:Yg,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="TileCoordinatesImageryProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const Kg={url:[String,Object],...Rh,...un,...di,...Xn,...vn,...Ki,...at,...ur,...dr,flipXY:Boolean,...Do};var $E=u.defineComponent({name:"VcImageryProviderTms",props:Kg,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="TileMapServiceImageryProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const ev={...Si,...Fh,...un,...di,...Xn,...vn,...Ki,...at,...ur,...dr,dir:{type:String,reqiured:!0},scales:{type:Array,default:()=>[1/295829355,1/147914678,1/73957339,1/36978669,1/18489335,1/9244667,1/4622334,1/2311167,1/1155583,1/577792,1/288896,1/144448,1/72224,1/36112,1/18056,1/9026,1/4514]}};var NE=u.defineComponent({name:"VcImageryProviderTiledcache",props:ev,emits:Vt,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="UrlTemplateImageryProvider";const i=Rt(e,t,n);if(i===void 0)return;n.createCesiumObject=async()=>{const a=i.transformProps(e),{Credit:s,defined:l,defaultValue:d,DeveloperError:h,Ellipsoid:m,GeographicTilingScheme:p,Rectangle:g,Resource:v,UrlTemplateImageryProvider:b}=Cesium,{url:P,dir:w,format:S}=a;if(!l(P))throw new h("options.url is required.");if(!l(w))throw new h("options.dir is required.");const T=v.createIfNeeded(P);T.url+=`?dir=${w}&scale={scale}&col={x}&row={y}&format=${S}`;const _=d(a.tilingScheme,new p({ellipsoid:d(a.ellipsoid,m.WGS84),numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1})),M=d(a.tileWidth,256),A=d(a.tileHeight,256),D=a.maximumLevel,z=d(a.minimumLevel,0),$=d(a.rectangle,_.rectangle),L=_.positionToTileXY(g.southwest($),z),U=_.positionToTileXY(g.northeast($),z),Z=(Math.abs(U.x-L.x)+1)*(Math.abs(U.y-L.y)+1);if(Z>4)throw new h("The rectangle and minimumLevel indicate that there are "+Z+" tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.");let W=d(a.credit,"");return typeof W=="string"&&(W=new s(W)),new b({url:T,credit:W,tilingScheme:_,tileWidth:M,tileHeight:A,minimumLevel:z,maximumLevel:D,rectangle:$,customTags:{scale:(y,C,x,B)=>{const O=1/e.scales[B];return r(y,"{scale}",O)}}})};const r=(a,s,l)=>{if(a&&a.urlSchemeZeroPadding&&Object.prototype.hasOwnProperty.call(a.urlSchemeZeroPadding,s)){const d=a.urlSchemeZeroPadding[s];if(typeof d=="string"){const h=d.length;h>1&&(l=l.length>=h?l:new Array(h-l.toString().length+1).join("0")+l)}}return l};return()=>{var a;return u.createCommentVNode(pe(((a=n.proxy)==null?void 0:a.$options.name)||""))}}});const tv={...Si,pickFeaturesUrl:[String,Object],urlSchemeZeroPadding:Object,...sc,...un,...di,...Xn,...vn,...Ki,...at,...ur,...dr,hasAlphaChannel:{type:Boolean,default:!0},...$h,...ac,customTags:Object,...Do};var jE=u.defineComponent({name:"VcImageryProviderUrltemplate",props:tv,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="UrlTemplateImageryProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const nv={...Si,...Bh,parameters:Object,getFeatureInfoParameters:Object,...ac,...$h,...vn,...Ki,...at,...ur,...dr,...di,...Xn,crs:String,srs:String,...un,...sc,...Cs,...Nh,getFeatureInfoUrl:[String,Object]};var kE=u.defineComponent({name:"VcImageryProviderWms",props:nv,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="WebMapServiceImageryProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const iv={...Si,...Fh,layer:{type:String,required:!0},wmtsStyle:{type:String,required:!0},tileMatrixSetID:{type:String,required:!0},tileMatrixLabels:Array,...Cs,...Nh,dimensions:Object,...ur,...dr,...Ki,...vn,...di,...Xn,...at,...un,...sc};var zE=u.defineComponent({name:"VcImageryProviderWmts",props:iv,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="WebMapTileServiceImageryProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const rv={url:[String,Object],requestVertexNormals:{type:Boolean,default:!1},requestWaterMask:{type:Boolean,default:!1},requestMetadata:{type:Boolean,default:!0},assetId:Number,...at,...un};var GE=u.defineComponent({name:"VcTerrainProviderCesium",props:rv,emits:Vt,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="CesiumTerrainProvider";const i=Rt(e,t,n);if(i!==void 0)return n.createCesiumObject=async()=>{i.unwatchFns.length===0&&i.setPropsWatcher(!0);const r=i.transformProps(e);return Cesium.defined(e.assetId)&&typeof Cesium[n.cesiumClass].fromIonAssetId=="function"?await Cesium.CesiumTerrainProvider.fromIonAssetId(e.assetId,r):typeof Cesium[n.cesiumClass].fromUrl=="function"?Cesium.defined(r.url)?await Cesium.CesiumTerrainProvider.fromUrl(r.url,r):await Cesium.createWorldTerrainAsync({requestVertexNormals:r.requestVertexNormals,requestWaterMask:r.requestWaterMask}):Cesium.defined(r.url)?new Cesium.CesiumTerrainProvider(r):Cesium.createWorldTerrain({requestVertexNormals:r.requestVertexNormals,requestWaterMask:r.requestWaterMask})},()=>{var r;return u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const ov={url:{type:[String,Object],default:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"},...at,...Lh};var UE=u.defineComponent({name:"VcTerrainProviderArcgis",props:ov,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="ArcGISTiledElevationTerrainProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const av={url:{type:[String,Object],default:"https://www.vr-theworld.com/vr-theworld/tiles1.0.0/73/"},...at,...un};var HE=u.defineComponent({name:"VcTerrainProviderVrTheworld",props:av,emits:Vt,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="VRTheWorldTerrainProvider",Rt(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const sv={url:{type:String,default:"https://{s}.tianditu.gov.cn/"},subdomains:{type:Array,default:()=>["t0","t1","t2","t3","t4","t5","t6","t7"]},pluginPath:{type:String,default:"https://api.tianditu.gov.cn/cdn/plugins/cesium/cesiumTdt.js"},dataType:{type:String,default:"int",validator:e=>["int","float"].includes(e)},tileType:{type:String,default:"heightmap",validator:e=>["heightmap","quantized-mesh"].includes(e)},token:String};var WE=u.defineComponent({name:"VcTerrainProviderTianditu",props:sv,emits:Vt,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="GeoTerrainProvider";const i=Rt(e,t,n);if(i===void 0)return;const{emit:r}=t,a=vc();let s;return n.createCesiumObject=async()=>new Promise((l,d)=>{s=document.createElement("script"),document.body.appendChild(s),s.src=e.pluginPath,s.onload=()=>{i.unwatchFns.length===0&&i.setPropsWatcher(!0);const h=[];for(let m=0;m<e.subdomains.length;m++){const p=e.url.replace("{s}",e.subdomains[m])+"mapservice/swdx?tk="+e.token;h.push(p)}l(new Cesium.GeoTerrainProvider({urls:h}))}}),n.unmount=async()=>{var l;const d=new Cesium.EllipsoidTerrainProvider;return(l=d==null?void 0:d.readyPromise)==null||l.then(()=>{ze(n,"readyPromise")&&r("readyPromise",d,a==null?void 0:a.viewer,n.proxy)}),a&&(a.viewer.terrainProvider=d),s==null||s.parentNode.removeChild(s),!0},()=>{var l;return u.createCommentVNode(pe(((l=n.proxy)==null?void 0:l.$options.name)||""))}}});[lE,cE,fE,gE,vE,yE,CE,wE,_E,PE,ME,TE,VE,FE,$E,NE,jE,kE,zE,GE,UE,HE,WE].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const lv=lE,cv=cE,uv=fE,dv=gE,hv=vE,mv=yE,pv=CE,fv=wE,gv=_E,vv=PE,yv=ME,bv=TE,Cv=VE,wv=FE,_v=$E,Pv=NE,Ev=jE,xv=kE,Ov=zE,Mv=GE,Sv=UE,Tv=HE,Iv=WE,Av={...qe,..._t,entities:{type:Array,default:()=>[]},name:String,destroy:{type:Boolean,default:!1}};var qE=u.defineComponent({name:"VcDatasourceCustom",props:Av,emits:Ca,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="CustomDataSource",ha(e,t,n),n.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name),()=>{var i,r;return t.slots.default?u.h("i",{class:pe(((i=n.proxy)==null?void 0:i.$options.name)||""),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(((r=n.proxy)==null?void 0:r.$options.name)||""))}}});const Dv={...qe,..._t,entities:{type:Array,default:()=>[]},czml:{type:[String,Object,Array],required:!0},...dc,...un,destroy:{type:Boolean,default:!1}};var ZE=u.defineComponent({name:"VcDatasourceCzml",props:Dv,emits:Ca,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="CzmlDataSource";const i=ha(e,t,n);if(i!==void 0)return n.createCesiumObject=async()=>{const r=i.transformProps(e);return Cesium.CzmlDataSource.load(e.czml,r)},()=>{var r,a;return t.slots.default?u.h("i",{class:pe(((r=n.proxy)==null?void 0:r.$options.name)||""),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(((a=n.proxy)==null?void 0:a.$options.name)||""))}}});const Lv={...qe,..._t,entities:{type:Array,default:()=>[]},...em,...dc,describe:[Function,Object],markerSize:{type:Number,default:48},markerSymbol:String,markerColor:{type:[Object,String,Array],default:()=>({x:.2549019607843137,y:.4117647058823529,z:.8823529411764706}),watcherOptions:{cesiumObjectBuilder:Ue}},stroke:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0}),watcherOptions:{cesiumObjectBuilder:Ue}},strokeWidth:{type:Number,default:2},fill:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0,w:.39215686274509803}),watcherOptions:{cesiumObjectBuilder:Ue}},...ys,...un,destroy:{type:Boolean,default:!1}};var QE=u.defineComponent({name:"VcDatasourceGeojson",props:Lv,emits:Ca,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="GeoJsonDataSource";const i=ha(e,t,n);if(i!==void 0)return n.createCesiumObject=async()=>{const r=i.transformProps(e);return Cesium.GeoJsonDataSource.load(e.data,r)},()=>{var r,a;return t.slots.default?u.h("i",{class:pe(((r=n.proxy)==null?void 0:r.$options.name)||""),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(((a=n.proxy)==null?void 0:a.$options.name)||""))}}});const Bv={...qe,..._t,entities:{type:Array,default:()=>[]},...em,camera:Object,canvas:HTMLCanvasElement,...dc,...ys,...at,...un,destroy:{type:Boolean,default:!1},screenOverlayContainer:[Element,String]};var JE=u.defineComponent({name:"VcDatasourceKml",props:Bv,emits:Ca,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="KmlDataSource";const i=ha(e,t,n),r=vc();return n.createCesiumObject=async()=>{const a=i==null?void 0:i.transformProps(e);return a.camera||(a.camera=r==null?void 0:r.viewer.camera),a.canvas||(a.canvas=r==null?void 0:r.viewer.canvas),Cesium.KmlDataSource.load(e.data||"",a)},()=>{var a,s;return t.slots.default?u.h("i",{class:pe(((a=n.proxy)==null?void 0:a.$options.name)||""),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(((s=n.proxy)==null?void 0:s.$options.name)||""))}}});[qE,ZE,QE,JE].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const Rv=qE,Vv=ZE,Fv=QE,$v=JE,Nv={...jl,...So,...aa,...hs,...ms,...fs,...$n,...Tr,...Ir,...dh,...kl,...Qi,...xn,...To,...Io,...ps,...Mo,...qe,...Zt,...ZC};var XE=u.defineComponent({name:"VcGraphicsBillboard",props:Nv,emits:ba,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="BillboardGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const jv={...qe,...zl,...$n,...Ji,...Qn,...Xi,...Ln,...Nn,...On,...Zt};var YE=u.defineComponent({name:"VcGraphicsBox",props:jv,emits:ba,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="BoxGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const v7={...qe,...Jn,...Qi,...xn,...$n,...jn,...gs,...Ao,...Bt,...Ji,...Qn,...Xi,...Ln,...Nn,...On,...Zt,...Yi,...sa};var KE=u.defineComponent({name:"VcGraphicsCorridor",props:v7,emits:ba,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="CorridorGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const kv={...qe,...Gl,...Ul,...Hl,...$n,...Ji,...Qn,...Xi,...Ln,...Nn,...la,...Wl,...On,...Zt};var ex=u.defineComponent({name:"VcGraphicsCylinder",props:kv,emits:ba,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="CylinderGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const zv={...qe,...ql,...Zl,...xn,...$n,...jn,...gs,...Ir,...cr,...Bt,...Ji,...Qn,...Xi,...Ln,...Nn,...la,...On,...Zt,...Yi,...sa};var tx=u.defineComponent({name:"VcGraphicsEllipse",props:zv,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="EllipseGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const Gv={...qe,...Ql,...Jl,...Xl,...Yl,...Kl,...ec,...$n,...Ji,...Qn,...Xi,...Ln,...Nn,...ca,...ua,...tc,...On,...Zt};var nx=u.defineComponent({name:"VcGraphicsEllipsoid",props:Gv,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="EllipsoidGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const Uv={...qe,...hh,...mh,...ph,...So,...fh,...gh,...vh,...aa,...hs,...ms,...fs,...$n,...yh,...Ln,...Nn,...Io,...ps,...To,...Zt,...Mo};var ix=u.defineComponent({name:"VcGraphicsLabel",props:Uv,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="LabelGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const Hv={...qe,...bh,...So,...Ch,...wh,..._h,...QC,...Ph,...On,...$n,...Eh,...xh,...Tr,...Oh,...Mh,...nc,...Sh,...Zt,...JC,...XC,...vs};var rx=u.defineComponent({name:"VcGraphicsModel",props:Hv,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="ModelGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const Wv={...qe,leadTime:[Number,Object,Function],trailTime:[Number,Object,Function],...Qi,resolution:{type:[Number,Object,Function],default:60},...Qn,...Zt};var ox=u.defineComponent({name:"VcGraphicsPath",props:Wv,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PathGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||""))}}});const qv={...qe,...YC,dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:kt}},...Ji,...Qn,...Xi,...Ln,...Nn,...On,...Zt};var ax=u.defineComponent({name:"VcGraphicsPlane",props:qv,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PlaneGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const Zv={...qe,...Th,...$n,...Tr,...Ln,...Nn,...To,...Io,...Zt,...Mo};var sx=u.defineComponent({name:"VcGraphicsPoint",props:Zv,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PointGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const Qv={...qe,...KC,...xn,...$n,...jn,...gs,...cr,...Bt,...Ji,...Qn,...Xi,...Ln,...Nn,...ic,...Ih,...Ah,...Ar,...On,...Zt,...Yi,...sa};var lx=u.defineComponent({name:"VcGraphicsPolygon",props:Qv,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PolygonGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const Jv={...qe,...Jn,...Qi,...Bt,...Qn,...ew,...Ar,...ys,...On,...Zt,...Yi,...sa};var cx=u.defineComponent({name:"VcGraphicsPolyline",props:Jv,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PolylineGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const Xv={...qe,...Jn,...tw,...Ao,...Bt,...Ji,...Qn,...Xi,...Ln,...Nn,...On,...Zt};var ux=u.defineComponent({name:"VcGraphicsPolylineVolume",props:Xv,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="PolylineVolumeGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const Yv={...qe,...nw,...xn,...$n,...jn,...gs,...Ir,...cr,...Bt,...Ji,...Qn,...Xi,...Ln,...Nn,...On,...Zt,...Yi,...sa};var dx=u.defineComponent({name:"VcGraphicsRectangle",props:Yv,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="RectangleGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const Kv={...qe,...bh,...Dh};var hx=u.defineComponent({name:"VcGraphicsTileset",props:Kv,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="Cesium3DTilesetGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});const ey={...qe,...Jn,...rc,...oc,...Bt,...Ji,...Qn,...Xi,...Ln,...Nn,...On,...Zt};var mx=u.defineComponent({name:"VcGraphicsWall",props:ey,emits:Le,setup(e,t){const n=u.getCurrentInstance();return n.cesiumClass="WallGraphics",dn(e,t,n),()=>{var i;return u.createCommentVNode(pe(((i=n.proxy)==null?void 0:i.$options.name)||"v-if"))}}});[XE,YE,KE,ex,tx,nx,ix,rx,ox,ax,sx,lx,cx,ux,dx,hx,mx].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const ty=XE,ny=YE,iy=KE,ry=ex,oy=tx,ay=nx,sy=ix,ly=rx,cy=ox,uy=ax,dy=sx,hy=lx,my=cx,py=ux,fy=dx,gy=hx,vy=mx,yy={fragmentShader:String,uniforms:Object,textureScale:{type:Number,default:1},forcePowerOfTwo:{type:Boolean,default:!1},sampleMode:Number,pixelFormat:Number,pixelDatatype:Number,...fw,...gw,name:String};var by=u.defineComponent({name:"VcPostProcessStage",props:yy,emits:Le,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="PostProcessStage",n.cesiumEvents=[];const i=rt(e,t,n);if(i===void 0)return;const{$services:r}=i;return n.mount=async()=>{const{postProcessStages:a}=r,s=a.add(n.cesiumObject);return a.contains(s)},n.unmount=async()=>{const{postProcessStages:a}=r;return a==null?void 0:a.remove(n.cesiumObject)},()=>{var a;return u.createCommentVNode(pe(((a=n.proxy)==null?void 0:a.$options.name)||""))}}}),y7=`
  uniform sampler2D colorTexture;
  uniform sampler2D depthTexture;
  in vec2 v_textureCoordinates;
  uniform vec4 u_scanCenterEC;
  uniform vec3 u_scanPlaneNormalEC;
  uniform vec3 u_scanLineNormalEC;
  uniform float u_radius;
  uniform vec4 u_scanColor;
  vec4 toEye(in vec2 uv, in float depth)
  {
    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));
    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);
    posInCamera =posInCamera / posInCamera.w;
    return posInCamera;
  }
  bool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)
  {
    vec3 v01 = testPt - ptOnLine;
    normalize(v01);
    vec3 temp = cross(v01, lineNormal);
    float d = dot(temp, u_scanPlaneNormalEC);
    return d > 0.5;
  }
  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)
  {
    vec3 v01 = point -planeOrigin;
    float d = dot(planeNormal, v01) ;
    return (point - planeNormal * d);
  }
  float distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)
  {
    vec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);
    return length(tempPt - ptOnLine);
  }
  float getDepth(in vec4 depth)
  {
    float z_window = czm_unpackDepth(depth);
    z_window = czm_reverseLogDepth(z_window);
    float n_range = czm_depthRange.near;
    float f_range = czm_depthRange.far;
    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
  }
  void main()
  {
    out_FragColor = texture(colorTexture, v_textureCoordinates);
    float depth = getDepth( texture(depthTexture, v_textureCoordinates));
    vec4 viewPos = toEye(v_textureCoordinates, depth);
    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);
    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);
    float twou_radius = u_radius * 2.0;
    if(dis < u_radius)
    {
      float f0 = 1.0 -abs(u_radius - dis) / u_radius;
      f0 = pow(f0, 64.0);
      vec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;
      float f = 0.0;
      if(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz))
      {
        float dis1= length(prjOnPlane.xyz - lineEndPt);
        f = abs(twou_radius -dis1) / twou_radius;
        f = pow(f, 3.0);
      }
      out_FragColor = mix(out_FragColor, u_scanColor, f + f0);
    }
  }
`;function b7(e){return{webgl:t=>{var n;const{viewer:i}=e,r=(n=e.viewer.scene.context)==null?void 0:n.webgl2;let a=y7;r||(a=a.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),a=a.replace(/texture\(/g,"texture2D("),a=a.replace(/out_FragColor/g,"gl_FragColor"));const s=Cesium.Cartographic.fromCartesian(t.position,i.scene.globe.ellipsoid),l=Cesium.Cartographic.toCartesian(s,i.scene.globe.ellipsoid),d=new Cesium.Cartesian4(l.x,l.y,l.z,1),h=new Cesium.Cartographic(s.longitude,s.latitude,s.height+500),m=Cesium.Cartographic.toCartesian(h,i.scene.globe.ellipsoid),p=new Cesium.Cartesian4(m.x,m.y,m.z,1),g=new Cesium.Cartographic(s.longitude+Cesium.Math.toRadians(.001),s.latitude,s.height),v=Cesium.Cartographic.toCartesian(g,i.scene.globe.ellipsoid),b=new Cesium.Cartesian4(v.x,v.y,v.z,1),P=new Cesium.Quaternion,w=new Cesium.Matrix3,S=new Date().getTime(),T=new Cesium.Cartesian4,_=new Cesium.Cartesian4,M=new Cesium.Cartesian4,A=new Cesium.Cartesian3,D=new Cesium.Cartesian3,z={u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,d,T)},u_scanPlaneNormalEC:function(){const $=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,d,T),L=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,p,_);return A.x=L.x-$.x,A.y=L.y-$.y,A.z=L.z-$.z,Cesium.Cartesian3.normalize(A,A),A},u_radius:t.radius,u_scanLineNormalEC:function(){const $=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,d,T),L=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,p,_),U=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,b,M);A.x=L.x-$.x,A.y=L.y-$.y,A.z=L.z-$.z,Cesium.Cartesian3.normalize(A,A),D.x=U.x-$.x,D.y=U.y-$.y,D.z=U.z-$.z;const Z=(new Date().getTime()-S)%t.interval/t.interval;return Cesium.Quaternion.fromAxisAngle(A,Z*Cesium.Math.PI*2,P),Cesium.Matrix3.fromQuaternion(P,w),Cesium.Matrix3.multiplyByVector(w,D,D),Cesium.Cartesian3.normalize(D,D),D},u_scanColor:t.color};return{shaderSource:a,uniforms:z}}}}var C7=`
  uniform sampler2D colorTexture;
  uniform sampler2D depthTexture;
  in vec2 v_textureCoordinates;
  uniform vec4 u_scanCenterEC;
  uniform vec3 u_scanPlaneNormalEC;
  uniform float u_radius;
  uniform vec4 u_scanColor;
  vec4 toEye(in vec2 uv, in float depth)
  {
    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));
    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);
    posInCamera =posInCamera / posInCamera.w;
    return posInCamera;
  }
  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)
  {
    vec3 v01 = point -planeOrigin;
    float d = dot(planeNormal, v01) ;
    return (point - planeNormal * d);
  }
  float getDepth(in vec4 depth)
  {
    float z_window = czm_unpackDepth(depth);
    z_window = czm_reverseLogDepth(z_window);
    float n_range = czm_depthRange.near;
    float f_range = czm_depthRange.far;
    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
  }
  void main()
  {
    out_FragColor = texture(colorTexture, v_textureCoordinates);
    float depth = getDepth( texture(depthTexture, v_textureCoordinates));
    vec4 viewPos = toEye(v_textureCoordinates, depth);
    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);
    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);
    if(dis < u_radius)
    {
      float f = 1.0 -abs(u_radius - dis) / u_radius;
      f = pow(f, 4.0);
      out_FragColor = mix(out_FragColor, u_scanColor, f);
    }
  }
`;function w7(e){return{webgl:t=>{var n;const{viewer:i}=e,r=(n=i.scene.context)==null?void 0:n.webgl2;let a=C7;r||(a=a.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),a=a.replace(/texture\(/g,"texture2D("),a=a.replace(/out_FragColor/g,"gl_FragColor"));const s=Cesium.Cartographic.fromCartesian(t.position,i.scene.globe.ellipsoid),l=Cesium.Cartographic.toCartesian(s,i.scene.globe.ellipsoid),d=new Cesium.Cartesian4(l.x,l.y,l.z,1),h=new Cesium.Cartographic(s.longitude,s.latitude,s.height+500),m=Cesium.Cartographic.toCartesian(h,i.scene.globe.ellipsoid),p=new Cesium.Cartesian4(m.x,m.y,m.z,1),g=new Date().getTime(),v=new Cesium.Cartesian4,b=new Cesium.Cartesian4,P=new Cesium.Cartesian3,w={u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,d,v)},u_scanPlaneNormalEC:function(){const S=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,d,v),T=Cesium.Matrix4.multiplyByVector(i.camera.viewMatrix,p,b);return P.x=T.x-S.x,P.y=T.y-S.y,P.z=T.z-S.z,Cesium.Cartesian3.normalize(P,P),P},u_radius:function(){return t.radius*((new Date().getTime()-g)%t.interval)/t.interval},u_scanColor:t.color};return{shaderSource:a,uniforms:w}}}}const _7={position:[0,0],radius:1500,interval:3500,color:[0,0,0,255]},Cy={type:{type:String,default:"radar"},options:Object};var px=u.defineComponent({name:"VcPostProcessStageScan",props:Cy,emits:Le,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="VcPostProcessStageScan",n.cesiumEvents=[];const i=rt(e,t,n);if(i===void 0)return;const r=u.ref(""),a=u.ref(null),{$services:s}=i,l=b7(s),d=w7(s);let h=[];const m=u.computed(()=>Object.assign({},_7,e.options));return h.push(u.watch(()=>m,p=>{n.mounted&&n.proxy.reload()},{deep:!0})),n.createCesiumObject=async()=>{const p=i.transformProps(m.value);let g;return e.type==="radar"?g=l.webgl(p):e.type==="circle"&&(g=d.webgl(p)),r.value=g.shaderSource,a.value=g.uniforms,!0},u.onUnmounted(()=>{h.forEach(p=>p()),h=[]}),()=>u.h(by,{fragmentShader:r.value,uniforms:a.value})}});const wy={postProcesses:{type:Array,default:()=>[]}};var fx=u.defineComponent({name:"VcPostProcessStageCollection",props:wy,emits:Le,setup(e,t){const n=u.getCurrentInstance();n.cesiumClass="PostProcessStageCollection",n.cesiumEvents=[];const i=rt(e,t,n);if(i===void 0)return;const{$services:r}=i,a=[];let s=[];return s.push(u.watch(()=>e.postProcesses,l=>{var d,h;n.mounted&&((h=(d=n.proxy).reload)==null||h.call(d))},{deep:!0})),n.createCesiumObject=async()=>a,n.mount=async()=>{const{postProcessStages:l}=r;return e.postProcesses.forEach(d=>{const h=i.transformProps(d);a.push(l.add(new Cesium.PostProcessStage(h)))}),!0},n.unmount=async()=>{const{postProcessStages:l}=r;return a.forEach(d=>{l.remove(d)}),a.length=0,!0},u.onUnmounted(()=>{s.forEach(l=>l()),s=[]}),()=>{var l,d;return t.slots.default?u.h("i",{class:pe(((l=n.proxy)==null?void 0:l.$options.name)||""),style:{display:"none !important"}},xt(t.slots.default)):u.createCommentVNode(pe(((d=n.proxy)==null?void 0:d.$options.name)||""))}}});[by,px,fx].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const _y=by,Py=px,Ey=fx;var Eu=u.defineComponent({name:"VcConfigProvider",props:{locale:{type:Object,default:()=>yw},cesiumPath:{type:String,default:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js"},accessToken:{type:String,default:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"},reloadMode:{type:String,default:"all"}},setup(e,{slots:t}){const n=TC(e);return()=>u.renderSlot(t,"default",{config:n==null?void 0:n.value})}});Eu.install=e=>{e.component(Eu.name,Eu)};const gx=Eu;var P7=gx;const vx=gx,E7={...Le,stop:e=>!0};var yx=u.defineComponent({name:"VcAnalysisFlood",props:{minHeight:{type:Number,default:-1},maxHeight:{type:Number,default:8888},speed:{type:Number,default:10},loop:{type:Boolean,default:!1},color:{type:[Object,Array,String],default:"rgba(40,150,200,0.6)"},...Ro},emits:E7,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcAnalysisFlood",i.cesiumEvents=[];const r=rt(e,t,i);if(r===void 0)return;const{emit:a}=t,s=u.ref(!1);(n=cn(i).proxy.creatingPromise)==null||n.then(()=>{s.value=!0});const l=u.ref(!1),d=u.ref(null),h=u.ref(-1),m=u.ref(null);let p=!1,g=[];g.push(u.watch(()=>e.minHeight,S=>{h.value=S})),i.createCesiumObject=async()=>{const{ColorGeometryInstanceAttribute:S}=Cesium;return d.value={color:S.fromColor(Ue(e.color))},m.value},i.mount=async()=>{const{viewer:S}=r.$services;return S.clock.onTick.addEventListener(v),!0},i.unmount=async()=>{const{viewer:S}=r.$services;return S.clock.onTick.removeEventListener(v),h.value=-1,l.value=!1,!0};const v=()=>{l.value&&(h.value<=e.maxHeight?(h.value+=e.speed,p=!1):(ze(i,"stop")&&a("stop",m.value),p=!0,e.loop?h.value=e.minHeight:l.value=!1))},b=S=>{h.value=Cesium.defined(S)?S:e.minHeight,l.value=!0},P=()=>{l.value=!l.value,p&&(h.value=e.minHeight)},w=()=>{h.value=-1,l.value=!1};return u.onUnmounted(()=>{g.forEach(S=>S()),g=[]}),Object.assign(i.proxy,{start:b,pause:P,stop:w,getCurrentHeight:()=>h.value}),()=>{if(s.value){const{createGuid:S}=Cesium;return u.h(cu,{asynchronous:!1,ref:m},()=>u.h(Rr,{id:S(),attributes:d.value},()=>u.h(fu,{extrudedHeight:h.value,polygonHierarchy:e.polygonHierarchy})))}else return u.createCommentVNode("v-if")}}});const x7=Object.assign({},Kt,{icon:"vc-icons-analysis-sightline"}),O7=Object.assign({},of,{polylineOpts:Object.assign({},Aa,{colors:["#51ff00","red"]}),primitiveOpts:Object.assign({},jo,{appearance:{type:"PolylineColorAppearance"},depthFailAppearance:{type:"PolylineColorAppearance"}}),sightlineType:"polyline"}),M7=Object.assign({},Kt,{icon:"vc-icons-analysis-viewshed"}),S7=Object.assign({},ou,{pointOpts:Object.assign({},ro,{show:!1}),polylineOpts:Object.assign({},Aa,{width:15}),primitiveOpts:Object.assign({},jo,{show:!1,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}}}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},ln),removeAll:Object.assign({},ln,{icon:"vc-icons-delete"})},viewshedOpts:{fovH:90,fovV:60,offsetHeight:1.8,visibleColor:"#00ff00",invisibleColor:"#ff0000",showGridLine:!0,faceColor:"rgba(255,255,255,0.1)",lineColor:"rgba(255,255,255,0.4)"}}),T7=Object.assign({},{}),I7=Object.assign({},Kt,{direction:"right",icon:"vc-icons-analysis-button",activeIcon:"vc-icons-analysis-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),bx=["sightline","viewshed"],A7=e=>{let t=!0;return e.forEach(n=>{bx.includes(n)||(console.error(`VueCesium: unknown analysis type: ${n}`),t=!1)}),t},xu={...sf,analyses:{type:Array,default:()=>bx,validator:A7},mainFabOpts:{type:Object,default:()=>I7},fabActionOpts:{type:Object,default:()=>T7},sightlineActionOpts:{type:Object,default:()=>x7},sightlineAnalysisOpts:{type:Object,default:()=>O7},viewshedActionOpts:{type:Object,default:()=>M7},viewshedAnalysisOpts:{type:Object,default:()=>S7}},lo=Oi(xu);var xy=u.defineComponent({name:"VcAnalysisSightline",props:{...Tn,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,sightlineType:{type:String,default:"polyline"}},emits:Yt,setup(e,t){if(e.sightlineType==="segment"||e.sightlineType==="circle")return $r(e,t,"VcAnalysisSightline");if(e.sightlineType==="polyline")return La(e,t,"VcAnalysisSightline")}}),Oy=u.defineComponent({name:"VcAnalysisViewshed",props:{...Tn,polylineOpts:Object,primitiveOpts:Object,viewshedOpts:Object},emits:Yt,setup(e,t){return $r(e,t,"VcAnalysisViewshed")}});const D7={...Yt,fabUpdated:e=>!0,clearEvt:(e,t)=>!0};var Cx=u.defineComponent({name:"VcAnalyses",props:xu,emits:D7,setup(e,t){var n;const i=u.getCurrentInstance();i.cesiumClass="VcAnalyses";const{t:r}=Qt(),a={},s=u.reactive(Object.assign({},lo.clearActionOpts,e.clearActionOpts)),l=u.reactive(Object.assign({},lo.mainFabOpts,e.mainFabOpts)),d=u.reactive(Object.assign({},lo.fabActionOpts,e.fabActionOpts)),h=u.reactive(Object.assign({},lo.sightlineActionOpts,P("sightlineActionOpts"))),m=u.reactive(jt(ut(lo.sightlineAnalysisOpts),e.sightlineAnalysisOpts)),p=u.reactive(Object.assign({},lo.viewshedActionOpts,P("viewshedActionOpts"))),g=u.reactive(jt(ut(lo.viewshedAnalysisOpts),e.viewshedAnalysisOpts));a.sightlineActionOpts=h,a.sightlineAnalysisOpts=m,a.viewshedActionOpts=p,a.viewshedAnalysisOpts=g,a.clearActionOpts=s;const v=u.computed(()=>e.analyses.map(w=>({name:w,type:"analysis",actionStyle:{background:a[`${En(w)}ActionOpts`].color,color:a[`${En(w)}ActionOpts`].textColor},actionClass:`vc-analysis-${w} vc-analysis-button`,actionRef:u.ref(null),actionOpts:a[`${En(w)}ActionOpts`],cmp:b(w),cmpRef:u.ref(null),cmpOpts:a[`${En(w)}AnalysisOpts`],tip:a[`${En(w)}ActionOpts`].tooltip.tip||r(`vc.analysis.${En(w)}.tip`),isActive:!1})));function b(w){switch(w){case"sightline":return xy;case"viewshed":return Oy;default:return}}function P(w){return Dl(lo[w],e[w])?d:Object.assign({},d,e[w])}return(n=Sg(e,t,i,v,l,s,"analysis"))==null?void 0:n.renderContent}});[yx,Cx].forEach(e=>{e.install=t=>{t.component(e.name,e)}});const My=yx,Sy=Cx;var L7=[op,Wp,qp,Zp,Qp,Jp,Xp,Yp,Kp,ef,tf,nf,rf,D8,G8,$2,lv,cv,uv,dv,hv,mv,pv,fv,gv,vv,yv,bv,Cv,wv,_v,Pv,Ev,xv,Ov,Mv,Sv,Tv,Iv,Rv,Vv,Fv,$v,R2,ty,ny,iy,ry,oy,ay,sy,ly,cy,uy,dy,hy,my,py,fy,gy,vy,cu,uu,Ks,Mf,Br,Sf,Tf,Df,Lf,Bf,If,Rf,mu,Kf,ko,zo,e0,oo,t0,n0,i0,r0,o0,ao,w8,V0,F0,$0,N0,j0,k0,z0,G0,U0,H0,W0,q0,Z0,Q0,J0,X0,el,Y0,K0,fu,eg,Vr,tg,ng,ig,rg,og,ag,sg,lg,cg,Fr,hg,pg,fg,mg,gg,_y,Py,Ey,zn,Dr,mn,ip,kc,Xm,Vs,Ym,Km,ep,Vc,Fc,$c,Nc,tp,jc,np,zc,Fs,rp,P7,My,Sy],Ty=Xd([...L7]);const wx=Ty.install,_x=Ty.version;var B7=Object.freeze({__proto__:null,install:wx,version:_x,default:Ty,makeInstaller:Xd,VcAnalysisSightline:xy,VcAnalysisViewshed:Oy,analysesProps:xu,VcAnalysisFlood:My,VcAnalyses:Sy,VcConfigProvider:vx,compassProps:up,distanceLegendProps:Bp,myLocationProps:yp,navigationProps:Fp,navigationSmProps:Gp,zoomControlSmProps:kp,compassSmProps:Np,printProps:gp,selectionIndicatorProps:Hp,statusBarProps:Dp,overviewProps:Up,zoomControlProps:pp,VcCompass:Wp,VcZoomControl:qp,VcPrint:Zp,VcMyLocation:Qp,VcStatusBar:Jp,VcDistanceLegend:Xp,VcNavigation:Yp,VcCompassSm:Kp,VcZoomControlSm:ef,VcNavigationSm:tf,VcOverviewMap:nf,VcSelectionIndicator:rf,customDatasourceProps:Av,czmlDatasourceProps:Dv,geojsonDatasourceProps:Lv,kmlDatasourceProps:Bv,VcDatasourceCustom:Rv,VcDatasourceCzml:Vv,VcDatasourceGeojson:Fv,VcDatasourceKml:$v,VcDrawingPin:Tg,VcDrawingPoint:Ig,VcDrawingPolygon:Dg,VcDrawingPolyline:Ag,VcDrawingRectangle:Lg,VcDrawingRegular:yu,drawingsProps:vu,VcDrawings:sE,entityProps:hf,VcEntity:V2,boxGeometryProps:s0,boxOutlineGeometryProps:l0,circleGeometryProps:c0,circleOutlineGeometryProps:u0,polygonCoplanarProps:d0,polygonCoplanarOutlineProps:h0,corridorGeometryProps:m0,corridorOutlineGeometryProps:p0,cylinderGeometryProps:f0,cylinderOutlineGeometryProps:g0,ellipseGeometryProps:v0,ellipseOutlineGeometryProps:y0,ellipsoidGeometryProps:b0,frustumGeometryProps:C0,frustumOutlineGeometryProps:w0,groundPolylineGeometryProps:_0,planeGeometryProps:P0,polygonGeometryProps:E0,polygonOutlineGeometryProps:x0,polylineGeometryProps:O0,polylineVolumeGeometryProps:M0,polylineVolumeOutlineGeometryProps:S0,rectangleGeometryProps:T0,rectangleOutlineGeometryProps:I0,simplePolylineGeometryProps:A0,sphereGeometryProps:D0,sphereGeometryOutlineProps:L0,wallGeometryProps:B0,wallOutlineProps:R0,VcGeometryBox:V0,VcGeometryBoxOutline:F0,VcGeometryCircle:$0,VcGeometryCircleOutline:N0,VcGeometryPolygonCoplanar:j0,VcGeometryPolygonCoplanarOutline:k0,VcGeometryCorridor:z0,VcGeometryCorridorOutline:G0,VcGeometryCylinder:U0,VcGeometryCylinderOutline:H0,VcGeometryEllipse:W0,VcGeometryEllipseOutline:q0,VcGeometryEllipsoid:Z0,VcGeometryEllipsoidOutline:Q0,VcGeometryFrustum:J0,VcGeometryFrustumOutline:X0,VcGeometryGroundPolyline:el,VcGeometryPlane:Y0,VcGeometryPlaneOutline:K0,VcGeometryPolygon:fu,VcGeometryPolygonOutline:eg,VcGeometryPolyline:Vr,VcGeometryPolylineVolume:tg,VcGeometryPolylineVolumeOutline:ng,VcGeometryRectangle:ig,VcGeometryRectangleOutline:rg,VcGeometrySimplePolyline:og,VcGeometrySphere:ag,VcGeometrySphereOutline:sg,VcGeometryWall:lg,VcGeometryWallOutline:cg,geometryInstanceProps:a0,VcGeometryInstance:Rr,billboarGraphicsProps:Nv,boxGraphicsProps:jv,cylinderGraphicsProps:kv,ellipseGraphicsProps:zv,ellipsoidGraphicsProps:Gv,labelGraphicsProps:Uv,modelGraphicsProps:Hv,pathGraphicsProps:Wv,planeGraphicsProps:qv,pointGraphicsProps:Zv,polygonGraphicsProps:Qv,polylineGraphicsProps:Jv,polylineVolumeGraphicsProps:Xv,rectangleGraphicsProps:Yv,tilesetGraphicsProps:Kv,wallGraphicsProps:ey,VcGraphicsBillboard:ty,VcGraphicsBox:ny,VcGraphicsCorridor:iy,VcGraphicsCylinder:ry,VcGraphicsEllipse:oy,VcGraphicsEllipsoid:ay,VcGraphicsLabel:sy,VcGraphicsModel:ly,VcGraphicsPath:cy,VcGraphicsPlane:uy,VcGraphicsPoint:dy,VcGraphicsPolygon:hy,VcGraphicsPolyline:my,VcGraphicsPolylineVolume:py,VcGraphicsRectangle:fy,VcGraphicsTileset:gy,VcGraphicsWall:vy,imageryLayerProps:mf,VcLayerImagery:N2,VcMeasurementDistance:yg,VcMeasurementPolyline:bg,VcMeasurementHorizontal:Cg,VcMeasurementVertical:wg,VcMeasurementHeight:_g,VcMeasurementPoint:Eg,VcMeasurementArea:xg,VcMeasurementRectangle:Og,VcMeasurementRegular:Mg,measurementsProps:au,VcMeasurements:rE,dynamicOverlayProps:kf,echartsOverlayProps:Ff,heatmapOverlayProps:Vf,htmlOverlayProps:cf,windmapOverlayProps:jf,typhoonOverlayProps:dg,VcOverlayHtml:Fr,VcOverlayHeatmap:hg,VcOverlayEcharts:mg,VcOverlayWind:pg,VcOverlayDynamic:fg,VcOverlayTyphoon:gg,postProcessStageProps:yy,postProcessStageCollectionProps:wy,postProcessStageScanProps:Cy,VcPostProcessStage:_y,VcPostProcessStageScan:Py,VcPostProcessStageCollection:Ey,billboardProps:Gf,billboardCollectionProps:zf,cumulusCloudProps:Uf,cloudCollectionProps:Hf,labelProps:qf,labelCollectionProps:Wf,pointProps:Qf,pointCollectionProps:Zf,polygonProps:Yf,polylineProps:Jf,primitiveCollectionProps:Xf,VcCollectionBillboard:mu,VcCollectionCloud:Kf,VcCollectionLabel:ko,VcCollectionPoint:zo,VcCollectionPolyline:e0,VcCollectionPrimitive:oo,VcBillboard:t0,VcCumulusCloud:n0,VcLabel:i0,VcPoint:r0,VcPolyline:o0,VcPolygon:ao,classificationPrimitiveProps:pf,groundPrimitiveProps:ff,groundPolylinePrimitiveProps:gf,modelPrimitiveProps:vf,osmBuildingsProps:Cf,particlePrimitiveProps:wf,primitiveProps:yf,tilesetPrimitiveProps:bf,viewshedProps:_f,timeDynamicPointCloudProps:Pf,i3sDataProviderProps:Ef,voxelPromitiveProps:xf,primitiveClusterProps:Of,VcPrimitiveClassification:cu,VcPrimitiveGround:uu,VcPrimitiveGroundPolyline:Ks,VcPrimitiveModel:Mf,VcPrimitive:Br,VcPrimitiveTileset:Sf,VcPrimitiveOsmBuildings:Tf,VcPrimitiveParticle:If,VcViewshed:Af,VcPrimitiveTimeDynamicPointCloud:Df,VcPrimitiveI3sDataProvider:Lf,VcPrimitiveVoxel:Bf,VcPrimitiveCluster:Rf,amapImageryProviderProps:Bg,arcgisImageryProviderProps:Rg,arcgisTerrainProviderProps:ov,baiduImageryProviderProps:$g,bingImageryProviderProps:Ng,cesiumTerrainProviderProps:rv,googleImageryProviderProps:jg,gridImageryProviderProps:kg,ionImageryProviderProps:bE,mapboxImageryProviderProps:zg,osmImageryProviderProps:Gg,singletileImageryProviderProps:Ug,supermapImageryProviderProps:Wg,tencentImageryProviderProps:qg,tiandituImageryProviderProps:Xg,tiandituTerrainProviderProps:sv,tileCoordinatesImageryProviderProps:Yg,tmsImageryProviderProps:Kg,tiledcacheImageryProviderProps:ev,urltemplateImageryProviderProps:tv,vrTheworldImageryProviderProps:av,wmsImageryProviderProps:nv,wmtsImageryProviderProps:iv,VcImageryProviderAmap:lv,VcImageryProviderArcgis:cv,VcImageryProviderBaidu:uv,VcImageryProviderBing:dv,VcImageryProviderGoogle:hv,VcImageryProviderGrid:mv,VcImageryProviderIon:pv,VcImageryProviderMapbox:fv,VcImageryProviderOsm:gv,VcImageryProviderSingletile:vv,VcImageryProviderSupermap:yv,VcImageryProviderTencent:bv,VcImageryProviderTianditu:Cv,VcImageryProviderTileCoordinates:wv,VcImageryProviderTms:_v,VcImageryProviderTiledcache:Pv,VcImageryProviderUrltemplate:Ev,VcImageryProviderWms:xv,VcImageryProviderWmts:Ov,VcTerrainProviderCesium:Mv,VcTerrainProviderArcgis:Sv,VcTerrainProviderVrTheworld:Tv,VcTerrainProviderTianditu:Iv,ajaxBarProps:Um,btnProps:Nm,fabProps:Zm,fabActionProps:Qm,iconProps:$m,skeletonTypes:Hm,skeletonAnimations:Wm,skeletonProps:qm,SpinnerBall:_c,SpinnerBars:Pc,SpinnerDots:Ec,SpinnerGears:xc,SpinnerHourglass:Oc,SpinnerIos:Mc,SpinnerOrbit:Sc,SpinnerOval:Tc,SpinnerPuff:Ic,SpinnerRings:Ac,SpinnerTail:Dc,Spinner:Bs,tooltipProps:zm,sliderProps:Jm,VcBtn:zn,VcIcon:Dr,VcSpinnerBall:Xm,VcSpinnerBars:Vs,VcSpinnerDots:Ym,VcSpinnerGears:Km,VcSpinnerHourglass:ep,VcSpinnerIos:Vc,VcSpinnerOrbit:Fc,VcSpinnerOval:$c,VcSpinnerPuff:Nc,VcSpinnerRings:tp,VcSpinnerTail:jc,VcSpinner:np,VcTooltip:mn,VcAjaxBar:ip,VcSkeleton:kc,VcFab:zc,VcFabAction:Fs,VcSlider:rp,viewerProps:Vm,VcViewer:op,Ripple:dm,TouchHold:Is,TouchRepeat:Ew,TouchPan:pm,useCommon:rt,useDatasources:ha,useEvents:hc,useGeometries:pt,useGraphics:dn,useHandler:fm,usePrimitiveCollectionItems:Xr,usePrimitiveCollections:Yr,usePrimitives:Yn,useProviders:Rt,useVueCesium:vc,buildTranslator:tm,translate:nm,buildLocaleContext:im,useLocale:Qt,VisibilityState:bm,DrawStatus:Ve,MeasureUnits:Bn,DistanceUnits:sn,AreaUnits:Jt,VolumeUnits:bn,AngleUnits:Xt,PolygonPrimitive:yc,DynamicOverlay:bc,DebugCameraPrimitive:Cm,PrimitiveCluster:xm,RectangleExtend:Im,ShadowMapShaderExtend:Dm,MaterialExtend:Kd,VcCircleWaveMaterialProperty:Zr,VcLineFlowMaterialProperty:ra,VcLineTrailMaterialProperty:oa,Viewshed:Lm,VcTimeline:Hw,commonEmits:Le,pickEventEmits:ya,graphicsEmits:ba,providerEmits:Vt,primitiveEmits:Kn,primitiveCollectionEmits:mi,datasourceEmits:Ca,drawingEmit:Yt});F.AngleUnits=Xt,F.AreaUnits=Jt,F.DebugCameraPrimitive=Cm,F.DistanceUnits=sn,F.DrawStatus=Ve,F.DynamicOverlay=bc,F.MaterialExtend=Kd,F.MeasureUnits=Bn,F.PolygonPrimitive=yc,F.PrimitiveCluster=xm,F.RectangleExtend=Im,F.Ripple=dm,F.ShadowMapShaderExtend=Dm,F.Spinner=Bs,F.SpinnerBall=_c,F.SpinnerBars=Pc,F.SpinnerDots=Ec,F.SpinnerGears=xc,F.SpinnerHourglass=Oc,F.SpinnerIos=Mc,F.SpinnerOrbit=Sc,F.SpinnerOval=Tc,F.SpinnerPuff=Ic,F.SpinnerRings=Ac,F.SpinnerTail=Dc,F.TouchHold=Is,F.TouchPan=pm,F.TouchRepeat=Ew,F.VcAjaxBar=ip,F.VcAnalyses=Sy,F.VcAnalysisFlood=My,F.VcAnalysisSightline=xy,F.VcAnalysisViewshed=Oy,F.VcBillboard=t0,F.VcBtn=zn,F.VcCircleWaveMaterialProperty=Zr,F.VcCollectionBillboard=mu,F.VcCollectionCloud=Kf,F.VcCollectionLabel=ko,F.VcCollectionPoint=zo,F.VcCollectionPolyline=e0,F.VcCollectionPrimitive=oo,F.VcCompass=Wp,F.VcCompassSm=Kp,F.VcConfigProvider=vx,F.VcCumulusCloud=n0,F.VcDatasourceCustom=Rv,F.VcDatasourceCzml=Vv,F.VcDatasourceGeojson=Fv,F.VcDatasourceKml=$v,F.VcDistanceLegend=Xp,F.VcDrawingPin=Tg,F.VcDrawingPoint=Ig,F.VcDrawingPolygon=Dg,F.VcDrawingPolyline=Ag,F.VcDrawingRectangle=Lg,F.VcDrawingRegular=yu,F.VcDrawings=sE,F.VcEntity=V2,F.VcFab=zc,F.VcFabAction=Fs,F.VcGeometryBox=V0,F.VcGeometryBoxOutline=F0,F.VcGeometryCircle=$0,F.VcGeometryCircleOutline=N0,F.VcGeometryCorridor=z0,F.VcGeometryCorridorOutline=G0,F.VcGeometryCylinder=U0,F.VcGeometryCylinderOutline=H0,F.VcGeometryEllipse=W0,F.VcGeometryEllipseOutline=q0,F.VcGeometryEllipsoid=Z0,F.VcGeometryEllipsoidOutline=Q0,F.VcGeometryFrustum=J0,F.VcGeometryFrustumOutline=X0,F.VcGeometryGroundPolyline=el,F.VcGeometryInstance=Rr,F.VcGeometryPlane=Y0,F.VcGeometryPlaneOutline=K0,F.VcGeometryPolygon=fu,F.VcGeometryPolygonCoplanar=j0,F.VcGeometryPolygonCoplanarOutline=k0,F.VcGeometryPolygonOutline=eg,F.VcGeometryPolyline=Vr,F.VcGeometryPolylineVolume=tg,F.VcGeometryPolylineVolumeOutline=ng,F.VcGeometryRectangle=ig,F.VcGeometryRectangleOutline=rg,F.VcGeometrySimplePolyline=og,F.VcGeometrySphere=ag,F.VcGeometrySphereOutline=sg,F.VcGeometryWall=lg,F.VcGeometryWallOutline=cg,F.VcGraphicsBillboard=ty,F.VcGraphicsBox=ny,F.VcGraphicsCorridor=iy,F.VcGraphicsCylinder=ry,F.VcGraphicsEllipse=oy,F.VcGraphicsEllipsoid=ay,F.VcGraphicsLabel=sy,F.VcGraphicsModel=ly,F.VcGraphicsPath=cy,F.VcGraphicsPlane=uy,F.VcGraphicsPoint=dy,F.VcGraphicsPolygon=hy,F.VcGraphicsPolyline=my,F.VcGraphicsPolylineVolume=py,F.VcGraphicsRectangle=fy,F.VcGraphicsTileset=gy,F.VcGraphicsWall=vy,F.VcIcon=Dr,F.VcImageryProviderAmap=lv,F.VcImageryProviderArcgis=cv,F.VcImageryProviderBaidu=uv,F.VcImageryProviderBing=dv,F.VcImageryProviderGoogle=hv,F.VcImageryProviderGrid=mv,F.VcImageryProviderIon=pv,F.VcImageryProviderMapbox=fv,F.VcImageryProviderOsm=gv,F.VcImageryProviderSingletile=vv,F.VcImageryProviderSupermap=yv,F.VcImageryProviderTencent=bv,F.VcImageryProviderTianditu=Cv,F.VcImageryProviderTileCoordinates=wv,F.VcImageryProviderTiledcache=Pv,F.VcImageryProviderTms=_v,F.VcImageryProviderUrltemplate=Ev,F.VcImageryProviderWms=xv,F.VcImageryProviderWmts=Ov,F.VcLabel=i0,F.VcLayerImagery=N2,F.VcLineFlowMaterialProperty=ra,F.VcLineTrailMaterialProperty=oa,F.VcMeasurementArea=xg,F.VcMeasurementDistance=yg,F.VcMeasurementHeight=_g,F.VcMeasurementHorizontal=Cg,F.VcMeasurementPoint=Eg,F.VcMeasurementPolyline=bg,F.VcMeasurementRectangle=Og,F.VcMeasurementRegular=Mg,F.VcMeasurementVertical=wg,F.VcMeasurements=rE,F.VcMyLocation=Qp,F.VcNavigation=Yp,F.VcNavigationSm=tf,F.VcOverlayDynamic=fg,F.VcOverlayEcharts=mg,F.VcOverlayHeatmap=hg,F.VcOverlayHtml=Fr,F.VcOverlayTyphoon=gg,F.VcOverlayWind=pg,F.VcOverviewMap=nf,F.VcPoint=r0,F.VcPolygon=ao,F.VcPolyline=o0,F.VcPostProcessStage=_y,F.VcPostProcessStageCollection=Ey,F.VcPostProcessStageScan=Py,F.VcPrimitive=Br,F.VcPrimitiveClassification=cu,F.VcPrimitiveCluster=Rf,F.VcPrimitiveGround=uu,F.VcPrimitiveGroundPolyline=Ks,F.VcPrimitiveI3sDataProvider=Lf,F.VcPrimitiveModel=Mf,F.VcPrimitiveOsmBuildings=Tf,F.VcPrimitiveParticle=If,F.VcPrimitiveTileset=Sf,F.VcPrimitiveTimeDynamicPointCloud=Df,F.VcPrimitiveVoxel=Bf,F.VcPrint=Zp,F.VcSelectionIndicator=rf,F.VcSkeleton=kc,F.VcSlider=rp,F.VcSpinner=np,F.VcSpinnerBall=Xm,F.VcSpinnerBars=Vs,F.VcSpinnerDots=Ym,F.VcSpinnerGears=Km,F.VcSpinnerHourglass=ep,F.VcSpinnerIos=Vc,F.VcSpinnerOrbit=Fc,F.VcSpinnerOval=$c,F.VcSpinnerPuff=Nc,F.VcSpinnerRings=tp,F.VcSpinnerTail=jc,F.VcStatusBar=Jp,F.VcTerrainProviderArcgis=Sv,F.VcTerrainProviderCesium=Mv,F.VcTerrainProviderTianditu=Iv,F.VcTerrainProviderVrTheworld=Tv,F.VcTimeline=Hw,F.VcTooltip=mn,F.VcViewer=op,F.VcViewshed=Af,F.VcZoomControl=qp,F.VcZoomControlSm=ef,F.Viewshed=Lm,F.VisibilityState=bm,F.VolumeUnits=bn,F.ajaxBarProps=Um,F.amapImageryProviderProps=Bg,F.analysesProps=xu,F.arcgisImageryProviderProps=Rg,F.arcgisTerrainProviderProps=ov,F.baiduImageryProviderProps=$g,F.billboarGraphicsProps=Nv,F.billboardCollectionProps=zf,F.billboardProps=Gf,F.bingImageryProviderProps=Ng,F.boxGeometryProps=s0,F.boxGraphicsProps=jv,F.boxOutlineGeometryProps=l0,F.btnProps=Nm,F.buildLocaleContext=im,F.buildTranslator=tm,F.cesiumTerrainProviderProps=rv,F.circleGeometryProps=c0,F.circleOutlineGeometryProps=u0,F.classificationPrimitiveProps=pf,F.cloudCollectionProps=Hf,F.commonEmits=Le,F.compassProps=up,F.compassSmProps=Np,F.corridorGeometryProps=m0,F.corridorOutlineGeometryProps=p0,F.cumulusCloudProps=Uf,F.customDatasourceProps=Av,F.cylinderGeometryProps=f0,F.cylinderGraphicsProps=kv,F.cylinderOutlineGeometryProps=g0,F.czmlDatasourceProps=Dv,F.datasourceEmits=Ca,F.default=B7,F.distanceLegendProps=Bp,F.drawingEmit=Yt,F.drawingsProps=vu,F.dynamicOverlayProps=kf,F.echartsOverlayProps=Ff,F.ellipseGeometryProps=v0,F.ellipseGraphicsProps=zv,F.ellipseOutlineGeometryProps=y0,F.ellipsoidGeometryProps=b0,F.ellipsoidGraphicsProps=Gv,F.entityProps=hf,F.fabActionProps=Qm,F.fabProps=Zm,F.frustumGeometryProps=C0,F.frustumOutlineGeometryProps=w0,F.geojsonDatasourceProps=Lv,F.geometryInstanceProps=a0,F.googleImageryProviderProps=jg,F.graphicsEmits=ba,F.gridImageryProviderProps=kg,F.groundPolylineGeometryProps=_0,F.groundPolylinePrimitiveProps=gf,F.groundPrimitiveProps=ff,F.heatmapOverlayProps=Vf,F.htmlOverlayProps=cf,F.i3sDataProviderProps=Ef,F.iconProps=$m,F.imageryLayerProps=mf,F.install=wx,F.ionImageryProviderProps=bE,F.kmlDatasourceProps=Bv,F.labelCollectionProps=Wf,F.labelGraphicsProps=Uv,F.labelProps=qf,F.makeInstaller=Xd,F.mapboxImageryProviderProps=zg,F.measurementsProps=au,F.modelGraphicsProps=Hv,F.modelPrimitiveProps=vf,F.myLocationProps=yp,F.navigationProps=Fp,F.navigationSmProps=Gp,F.osmBuildingsProps=Cf,F.osmImageryProviderProps=Gg,F.overviewProps=Up,F.particlePrimitiveProps=wf,F.pathGraphicsProps=Wv,F.pickEventEmits=ya,F.planeGeometryProps=P0,F.planeGraphicsProps=qv,F.pointCollectionProps=Zf,F.pointGraphicsProps=Zv,F.pointProps=Qf,F.polygonCoplanarOutlineProps=h0,F.polygonCoplanarProps=d0,F.polygonGeometryProps=E0,F.polygonGraphicsProps=Qv,F.polygonOutlineGeometryProps=x0,F.polygonProps=Yf,F.polylineGeometryProps=O0,F.polylineGraphicsProps=Jv,F.polylineProps=Jf,F.polylineVolumeGeometryProps=M0,F.polylineVolumeGraphicsProps=Xv,F.polylineVolumeOutlineGeometryProps=S0,F.postProcessStageCollectionProps=wy,F.postProcessStageProps=yy,F.postProcessStageScanProps=Cy,F.primitiveClusterProps=Of,F.primitiveCollectionEmits=mi,F.primitiveCollectionProps=Xf,F.primitiveEmits=Kn,F.primitiveProps=yf,F.printProps=gp,F.providerEmits=Vt,F.rectangleGeometryProps=T0,F.rectangleGraphicsProps=Yv,F.rectangleOutlineGeometryProps=I0,F.selectionIndicatorProps=Hp,F.simplePolylineGeometryProps=A0,F.singletileImageryProviderProps=Ug,F.skeletonAnimations=Wm,F.skeletonProps=qm,F.skeletonTypes=Hm,F.sliderProps=Jm,F.sphereGeometryOutlineProps=L0,F.sphereGeometryProps=D0,F.statusBarProps=Dp,F.supermapImageryProviderProps=Wg,F.tencentImageryProviderProps=qg,F.tiandituImageryProviderProps=Xg,F.tiandituTerrainProviderProps=sv,F.tileCoordinatesImageryProviderProps=Yg,F.tiledcacheImageryProviderProps=ev,F.tilesetGraphicsProps=Kv,F.tilesetPrimitiveProps=bf,F.timeDynamicPointCloudProps=Pf,F.tmsImageryProviderProps=Kg,F.tooltipProps=zm,F.translate=nm,F.typhoonOverlayProps=dg,F.urltemplateImageryProviderProps=tv,F.useCommon=rt,F.useDatasources=ha,F.useEvents=hc,F.useGeometries=pt,F.useGraphics=dn,F.useHandler=fm,F.useLocale=Qt,F.usePrimitiveCollectionItems=Xr,F.usePrimitiveCollections=Yr,F.usePrimitives=Yn,F.useProviders=Rt,F.useVueCesium=vc,F.version=_x,F.viewerProps=Vm,F.viewshedProps=_f,F.voxelPromitiveProps=xf,F.vrTheworldImageryProviderProps=av,F.wallGeometryProps=B0,F.wallGraphicsProps=ey,F.wallOutlineProps=R0,F.windmapOverlayProps=jf,F.wmsImageryProviderProps=nv,F.wmtsImageryProviderProps=iv,F.zoomControlProps=pp,F.zoomControlSmProps=kp,Object.defineProperty(F,"__esModule",{value:!0})});
//# sourceMappingURL=index.full.min.js.map
