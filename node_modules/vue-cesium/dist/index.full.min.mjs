/*! VueCesium v3.2.9 */import{ref as he,getCurrentInstance as fe,inject as Eu,computed as ge,provide as Gr,unref as Gh,isRef as T_,onBeforeUnmount as fo,onUnmounted as Vt,watch as Pe,markRaw as AD,reactive as Ve,onMounted as Es,nextTick as nt,h as R,withDirectives as I_,defineComponent as de,Transition as A_,Teleport as Ur,createCommentVNode as me,createApp as DD,toRaw as Hr,renderSlot as LD}from"vue";import*as Pu from"echarts";const BD="3.2.9",D_=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Wr=D_?Symbol("VueCesium"):"VueCesium",L_=D_?Symbol("_vc_f_"):"_vc_f_",Uh=Symbol();var B_=typeof global=="object"&&global&&global.Object===Object&&global,RD=typeof self=="object"&&self&&self.Object===Object&&self,nr=B_||RD||Function("return this")(),kn=nr.Symbol,R_=Object.prototype,FD=R_.hasOwnProperty,$D=R_.toString,Ps=kn?kn.toStringTag:void 0;function jD(e){var t=FD.call(e,Ps),i=e[Ps];try{e[Ps]=void 0;var n=!0}catch(a){}var r=$D.call(e);return n&&(t?e[Ps]=i:delete e[Ps]),r}var ND=Object.prototype,kD=ND.toString;function VD(e){return kD.call(e)}var zD="[object Null]",GD="[object Undefined]",F_=kn?kn.toStringTag:void 0;function zo(e){return e==null?e===void 0?GD:zD:F_&&F_ in Object(e)?jD(e):VD(e)}function Cr(e){return e!=null&&typeof e=="object"}var UD="[object Symbol]";function Ou(e){return typeof e=="symbol"||Cr(e)&&zo(e)==UD}function $_(e,t){for(var i=-1,n=e==null?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}var wn=Array.isArray,HD=1/0,j_=kn?kn.prototype:void 0,N_=j_?j_.toString:void 0;function k_(e){if(typeof e=="string")return e;if(wn(e))return $_(e,k_)+"";if(Ou(e))return N_?N_.call(e):"";var t=e+"";return t=="0"&&1/e==-HD?"-0":t}var WD=/\s/;function qD(e){for(var t=e.length;t--&&WD.test(e.charAt(t)););return t}var ZD=/^\s+/;function QD(e){return e&&e.slice(0,qD(e)+1).replace(ZD,"")}function Vn(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var V_=0/0,JD=/^[-+]0x[0-9a-f]+$/i,XD=/^0b[01]+$/i,YD=/^0o[0-7]+$/i,KD=parseInt;function Hh(e){if(typeof e=="number")return e;if(Ou(e))return V_;if(Vn(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Vn(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=QD(e);var i=XD.test(e);return i||YD.test(e)?KD(e.slice(2),i?2:8):JD.test(e)?V_:+e}var z_=1/0,e4=17976931348623157e292;function t4(e){if(!e)return e===0?e:0;if(e=Hh(e),e===z_||e===-z_){var t=e<0?-1:1;return t*e4}return e===e?e:0}function i4(e){var t=t4(e),i=t%1;return t===t?i?t-i:t:0}function Wh(e){return e}var n4="[object AsyncFunction]",r4="[object Function]",o4="[object GeneratorFunction]",a4="[object Proxy]";function qh(e){if(!Vn(e))return!1;var t=zo(e);return t==r4||t==o4||t==n4||t==a4}var Zh=nr["__core-js_shared__"],G_=function(){var e=/[^.]+$/.exec(Zh&&Zh.keys&&Zh.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function s4(e){return!!G_&&G_ in e}var l4=Function.prototype,u4=l4.toString;function Go(e){if(e!=null){try{return u4.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var c4=/[\\^$.*+?()[\]{}|]/g,d4=/^\[object .+?Constructor\]$/,h4=Function.prototype,p4=Object.prototype,m4=h4.toString,f4=p4.hasOwnProperty,v4=RegExp("^"+m4.call(f4).replace(c4,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function g4(e){if(!Vn(e)||s4(e))return!1;var t=qh(e)?v4:d4;return t.test(Go(e))}function y4(e,t){return e==null?void 0:e[t]}function Uo(e,t){var i=y4(e,t);return g4(i)?i:void 0}var Qh=Uo(nr,"WeakMap"),U_=Object.create,b4=function(){function e(){}return function(t){if(!Vn(t))return{};if(U_)return U_(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();function C4(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function _4(){}function H_(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}var w4=800,x4=16,E4=Date.now;function P4(e){var t=0,i=0;return function(){var n=E4(),r=x4-(n-i);if(i=n,r>0){if(++t>=w4)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function O4(e){return function(){return e}}var Mu=function(){try{var e=Uo(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),M4=Mu?function(e,t){return Mu(e,"toString",{configurable:!0,enumerable:!1,value:O4(t),writable:!0})}:Wh,S4=P4(M4);function T4(e,t){for(var i=-1,n=e==null?0:e.length;++i<n&&t(e[i],i,e)!==!1;);return e}function W_(e,t,i,n){for(var r=e.length,a=i+(n?1:-1);n?a--:++a<r;)if(t(e[a],a,e))return a;return-1}function I4(e){return e!==e}function A4(e,t,i){for(var n=i-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1}function D4(e,t,i){return t===t?A4(e,t,i):W_(e,I4,i)}function q_(e,t){var i=e==null?0:e.length;return!!i&&D4(e,t,0)>-1}var L4=9007199254740991,B4=/^(?:0|[1-9]\d*)$/;function Su(e,t){var i=typeof e;return t=t==null?L4:t,!!t&&(i=="number"||i!="symbol"&&B4.test(e))&&e>-1&&e%1==0&&e<t}function Jh(e,t,i){t=="__proto__"&&Mu?Mu(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function Os(e,t){return e===t||e!==e&&t!==t}var R4=Object.prototype,F4=R4.hasOwnProperty;function Z_(e,t,i){var n=e[t];(!(F4.call(e,t)&&Os(n,i))||i===void 0&&!(t in e))&&Jh(e,t,i)}function Ms(e,t,i,n){var r=!i;i||(i={});for(var a=-1,s=t.length;++a<s;){var l=t[a],c=n?n(i[l],e[l],l,i,e):void 0;c===void 0&&(c=e[l]),r?Jh(i,l,c):Z_(i,l,c)}return i}var Q_=Math.max;function $4(e,t,i){return t=Q_(t===void 0?e.length-1:t,0),function(){for(var n=arguments,r=-1,a=Q_(n.length-t,0),s=Array(a);++r<a;)s[r]=n[t+r];r=-1;for(var l=Array(t+1);++r<t;)l[r]=n[r];return l[t]=i(s),C4(e,this,l)}}function J_(e,t){return S4($4(e,t,Wh),e+"")}var j4=9007199254740991;function Xh(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=j4}function Ss(e){return e!=null&&Xh(e.length)&&!qh(e)}function N4(e,t,i){if(!Vn(i))return!1;var n=typeof t;return(n=="number"?Ss(i)&&Su(t,i.length):n=="string"&&t in i)?Os(i[t],e):!1}function k4(e){return J_(function(t,i){var n=-1,r=i.length,a=r>1?i[r-1]:void 0,s=r>2?i[2]:void 0;for(a=e.length>3&&typeof a=="function"?(r--,a):void 0,s&&N4(i[0],i[1],s)&&(a=r<3?void 0:a,r=1),t=Object(t);++n<r;){var l=i[n];l&&e(t,l,n,a)}return t})}var V4=Object.prototype;function Yh(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||V4;return e===i}function z4(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}var G4="[object Arguments]";function X_(e){return Cr(e)&&zo(e)==G4}var Y_=Object.prototype,U4=Y_.hasOwnProperty,H4=Y_.propertyIsEnumerable,Ts=X_(function(){return arguments}())?X_:function(e){return Cr(e)&&U4.call(e,"callee")&&!H4.call(e,"callee")};function W4(){return!1}var K_=typeof exports=="object"&&exports&&!exports.nodeType&&exports,ew=K_&&typeof module=="object"&&module&&!module.nodeType&&module,q4=ew&&ew.exports===K_,tw=q4?nr.Buffer:void 0,Z4=tw?tw.isBuffer:void 0,Is=Z4||W4,Q4="[object Arguments]",J4="[object Array]",X4="[object Boolean]",Y4="[object Date]",K4="[object Error]",eL="[object Function]",tL="[object Map]",iL="[object Number]",nL="[object Object]",rL="[object RegExp]",oL="[object Set]",aL="[object String]",sL="[object WeakMap]",lL="[object ArrayBuffer]",uL="[object DataView]",cL="[object Float32Array]",dL="[object Float64Array]",hL="[object Int8Array]",pL="[object Int16Array]",mL="[object Int32Array]",fL="[object Uint8Array]",vL="[object Uint8ClampedArray]",gL="[object Uint16Array]",yL="[object Uint32Array]",zt={};zt[cL]=zt[dL]=zt[hL]=zt[pL]=zt[mL]=zt[fL]=zt[vL]=zt[gL]=zt[yL]=!0,zt[Q4]=zt[J4]=zt[lL]=zt[X4]=zt[uL]=zt[Y4]=zt[K4]=zt[eL]=zt[tL]=zt[iL]=zt[nL]=zt[rL]=zt[oL]=zt[aL]=zt[sL]=!1;function bL(e){return Cr(e)&&Xh(e.length)&&!!zt[zo(e)]}function Tu(e){return function(t){return e(t)}}var iw=typeof exports=="object"&&exports&&!exports.nodeType&&exports,As=iw&&typeof module=="object"&&module&&!module.nodeType&&module,CL=As&&As.exports===iw,Kh=CL&&B_.process,Oa=function(){try{var e=As&&As.require&&As.require("util").types;return e||Kh&&Kh.binding&&Kh.binding("util")}catch(t){}}(),nw=Oa&&Oa.isTypedArray,ep=nw?Tu(nw):bL,_L=Object.prototype,wL=_L.hasOwnProperty;function rw(e,t){var i=wn(e),n=!i&&Ts(e),r=!i&&!n&&Is(e),a=!i&&!n&&!r&&ep(e),s=i||n||r||a,l=s?z4(e.length,String):[],c=l.length;for(var d in e)(t||wL.call(e,d))&&!(s&&(d=="length"||r&&(d=="offset"||d=="parent")||a&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||Su(d,c)))&&l.push(d);return l}function ow(e,t){return function(i){return e(t(i))}}var xL=ow(Object.keys,Object),EL=Object.prototype,PL=EL.hasOwnProperty;function OL(e){if(!Yh(e))return xL(e);var t=[];for(var i in Object(e))PL.call(e,i)&&i!="constructor"&&t.push(i);return t}function Ds(e){return Ss(e)?rw(e):OL(e)}function ML(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var SL=Object.prototype,TL=SL.hasOwnProperty;function IL(e){if(!Vn(e))return ML(e);var t=Yh(e),i=[];for(var n in e)n=="constructor"&&(t||!TL.call(e,n))||i.push(n);return i}function Ls(e){return Ss(e)?rw(e,!0):IL(e)}var AL=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,DL=/^\w*$/;function tp(e,t){if(wn(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||Ou(e)?!0:DL.test(e)||!AL.test(e)||t!=null&&e in Object(t)}var Bs=Uo(Object,"create");function LL(){this.__data__=Bs?Bs(null):{},this.size=0}function BL(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var RL="__lodash_hash_undefined__",FL=Object.prototype,$L=FL.hasOwnProperty;function jL(e){var t=this.__data__;if(Bs){var i=t[e];return i===RL?void 0:i}return $L.call(t,e)?t[e]:void 0}var NL=Object.prototype,kL=NL.hasOwnProperty;function VL(e){var t=this.__data__;return Bs?t[e]!==void 0:kL.call(t,e)}var zL="__lodash_hash_undefined__";function GL(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Bs&&t===void 0?zL:t,this}function Ho(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Ho.prototype.clear=LL,Ho.prototype.delete=BL,Ho.prototype.get=jL,Ho.prototype.has=VL,Ho.prototype.set=GL;function UL(){this.__data__=[],this.size=0}function Iu(e,t){for(var i=e.length;i--;)if(Os(e[i][0],t))return i;return-1}var HL=Array.prototype,WL=HL.splice;function qL(e){var t=this.__data__,i=Iu(t,e);if(i<0)return!1;var n=t.length-1;return i==n?t.pop():WL.call(t,i,1),--this.size,!0}function ZL(e){var t=this.__data__,i=Iu(t,e);return i<0?void 0:t[i][1]}function QL(e){return Iu(this.__data__,e)>-1}function JL(e,t){var i=this.__data__,n=Iu(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this}function qr(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}qr.prototype.clear=UL,qr.prototype.delete=qL,qr.prototype.get=ZL,qr.prototype.has=QL,qr.prototype.set=JL;var Rs=Uo(nr,"Map");function XL(){this.size=0,this.__data__={hash:new Ho,map:new(Rs||qr),string:new Ho}}function YL(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Au(e,t){var i=e.__data__;return YL(t)?i[typeof t=="string"?"string":"hash"]:i.map}function KL(e){var t=Au(this,e).delete(e);return this.size-=t?1:0,t}function eB(e){return Au(this,e).get(e)}function tB(e){return Au(this,e).has(e)}function iB(e,t){var i=Au(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this}function Zr(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Zr.prototype.clear=XL,Zr.prototype.delete=KL,Zr.prototype.get=eB,Zr.prototype.has=tB,Zr.prototype.set=iB;var nB="Expected a function";function ip(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(nB);var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],a=i.cache;if(a.has(r))return a.get(r);var s=e.apply(this,n);return i.cache=a.set(r,s)||a,s};return i.cache=new(ip.Cache||Zr),i}ip.Cache=Zr;var rB=500;function oB(e){var t=ip(e,function(n){return i.size===rB&&i.clear(),n}),i=t.cache;return t}var aB=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,sB=/\\(\\)?/g,lB=oB(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(aB,function(i,n,r,a){t.push(r?a.replace(sB,"$1"):n||i)}),t});function Fs(e){return e==null?"":k_(e)}function np(e,t){return wn(e)?e:tp(e,t)?[e]:lB(Fs(e))}var uB=1/0;function $s(e){if(typeof e=="string"||Ou(e))return e;var t=e+"";return t=="0"&&1/e==-uB?"-0":t}function rp(e,t){t=np(t,e);for(var i=0,n=t.length;e!=null&&i<n;)e=e[$s(t[i++])];return i&&i==n?e:void 0}function aw(e,t,i){var n=e==null?void 0:rp(e,t);return n===void 0?i:n}function op(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e}var sw=kn?kn.isConcatSpreadable:void 0;function cB(e){return wn(e)||Ts(e)||!!(sw&&e&&e[sw])}function lw(e,t,i,n,r){var a=-1,s=e.length;for(i||(i=cB),r||(r=[]);++a<s;){var l=e[a];t>0&&i(l)?t>1?lw(l,t-1,i,n,r):op(r,l):n||(r[r.length]=l)}return r}var ap=ow(Object.getPrototypeOf,Object),dB="[object Object]",hB=Function.prototype,pB=Object.prototype,uw=hB.toString,mB=pB.hasOwnProperty,fB=uw.call(Object);function vB(e){if(!Cr(e)||zo(e)!=dB)return!1;var t=ap(e);if(t===null)return!0;var i=mB.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i instanceof i&&uw.call(i)==fB}function cw(e,t,i){var n=-1,r=e.length;t<0&&(t=-t>r?0:r+t),i=i>r?r:i,i<0&&(i+=r),r=t>i?0:i-t>>>0,t>>>=0;for(var a=Array(r);++n<r;)a[n]=e[n+t];return a}function gB(e,t,i){var n=e.length;return i=i===void 0?n:i,!t&&i>=n?e:cw(e,t,i)}var yB="\\ud800-\\udfff",bB="\\u0300-\\u036f",CB="\\ufe20-\\ufe2f",_B="\\u20d0-\\u20ff",wB=bB+CB+_B,xB="\\ufe0e\\ufe0f",EB="\\u200d",PB=RegExp("["+EB+yB+wB+xB+"]");function dw(e){return PB.test(e)}function OB(e){return e.split("")}var hw="\\ud800-\\udfff",MB="\\u0300-\\u036f",SB="\\ufe20-\\ufe2f",TB="\\u20d0-\\u20ff",IB=MB+SB+TB,AB="\\ufe0e\\ufe0f",DB="["+hw+"]",sp="["+IB+"]",lp="\\ud83c[\\udffb-\\udfff]",LB="(?:"+sp+"|"+lp+")",pw="[^"+hw+"]",mw="(?:\\ud83c[\\udde6-\\uddff]){2}",fw="[\\ud800-\\udbff][\\udc00-\\udfff]",BB="\\u200d",vw=LB+"?",gw="["+AB+"]?",RB="(?:"+BB+"(?:"+[pw,mw,fw].join("|")+")"+gw+vw+")*",FB=gw+vw+RB,$B="(?:"+[pw+sp+"?",sp,mw,fw,DB].join("|")+")",jB=RegExp(lp+"(?="+lp+")|"+$B+FB,"g");function NB(e){return e.match(jB)||[]}function kB(e){return dw(e)?NB(e):OB(e)}function VB(e){return function(t){t=Fs(t);var i=dw(t)?kB(t):void 0,n=i?i[0]:t.charAt(0),r=i?gB(i,1).join(""):t.slice(1);return n[e]()+r}}var zB=VB("toUpperCase");function GB(e){return zB(Fs(e).toLowerCase())}function UB(e,t,i,n){var r=-1,a=e==null?0:e.length;for(n&&a&&(i=e[++r]);++r<a;)i=t(i,e[r],r,e);return i}function HB(e){return function(t){return e==null?void 0:e[t]}}var WB={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},qB=HB(WB),ZB=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,QB="\\u0300-\\u036f",JB="\\ufe20-\\ufe2f",XB="\\u20d0-\\u20ff",YB=QB+JB+XB,KB="["+YB+"]",eR=RegExp(KB,"g");function tR(e){return e=Fs(e),e&&e.replace(ZB,qB).replace(eR,"")}var iR=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function nR(e){return e.match(iR)||[]}var rR=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function oR(e){return rR.test(e)}var yw="\\ud800-\\udfff",aR="\\u0300-\\u036f",sR="\\ufe20-\\ufe2f",lR="\\u20d0-\\u20ff",uR=aR+sR+lR,bw="\\u2700-\\u27bf",Cw="a-z\\xdf-\\xf6\\xf8-\\xff",cR="\\xac\\xb1\\xd7\\xf7",dR="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hR="\\u2000-\\u206f",pR=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_w="A-Z\\xc0-\\xd6\\xd8-\\xde",mR="\\ufe0e\\ufe0f",ww=cR+dR+hR+pR,xw="['\u2019]",Ew="["+ww+"]",fR="["+uR+"]",Pw="\\d+",vR="["+bw+"]",Ow="["+Cw+"]",Mw="[^"+yw+ww+Pw+bw+Cw+_w+"]",gR="\\ud83c[\\udffb-\\udfff]",yR="(?:"+fR+"|"+gR+")",bR="[^"+yw+"]",Sw="(?:\\ud83c[\\udde6-\\uddff]){2}",Tw="[\\ud800-\\udbff][\\udc00-\\udfff]",Ma="["+_w+"]",CR="\\u200d",Iw="(?:"+Ow+"|"+Mw+")",_R="(?:"+Ma+"|"+Mw+")",Aw="(?:"+xw+"(?:d|ll|m|re|s|t|ve))?",Dw="(?:"+xw+"(?:D|LL|M|RE|S|T|VE))?",Lw=yR+"?",Bw="["+mR+"]?",wR="(?:"+CR+"(?:"+[bR,Sw,Tw].join("|")+")"+Bw+Lw+")*",xR="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ER="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",PR=Bw+Lw+wR,OR="(?:"+[vR,Sw,Tw].join("|")+")"+PR,MR=RegExp([Ma+"?"+Ow+"+"+Aw+"(?="+[Ew,Ma,"$"].join("|")+")",_R+"+"+Dw+"(?="+[Ew,Ma+Iw,"$"].join("|")+")",Ma+"?"+Iw+"+"+Aw,Ma+"+"+Dw,ER,xR,Pw,OR].join("|"),"g");function SR(e){return e.match(MR)||[]}function TR(e,t,i){return e=Fs(e),t=i?void 0:t,t===void 0?oR(e)?SR(e):nR(e):e.match(t)||[]}var IR="['\u2019]",AR=RegExp(IR,"g");function DR(e){return function(t){return UB(TR(tR(t).replace(AR,"")),e,"")}}var LR=DR(function(e,t,i){return t=t.toLowerCase(),e+(i?GB(t):t)}),Rw=LR;function BR(){this.__data__=new qr,this.size=0}function RR(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function FR(e){return this.__data__.get(e)}function $R(e){return this.__data__.has(e)}var jR=200;function NR(e,t){var i=this.__data__;if(i instanceof qr){var n=i.__data__;if(!Rs||n.length<jR-1)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Zr(n)}return i.set(e,t),this.size=i.size,this}function rr(e){var t=this.__data__=new qr(e);this.size=t.size}rr.prototype.clear=BR,rr.prototype.delete=RR,rr.prototype.get=FR,rr.prototype.has=$R,rr.prototype.set=NR;function kR(e,t){return e&&Ms(t,Ds(t),e)}function VR(e,t){return e&&Ms(t,Ls(t),e)}var Fw=typeof exports=="object"&&exports&&!exports.nodeType&&exports,$w=Fw&&typeof module=="object"&&module&&!module.nodeType&&module,zR=$w&&$w.exports===Fw,jw=zR?nr.Buffer:void 0,Nw=jw?jw.allocUnsafe:void 0;function kw(e,t){if(t)return e.slice();var i=e.length,n=Nw?Nw(i):new e.constructor(i);return e.copy(n),n}function GR(e,t){for(var i=-1,n=e==null?0:e.length,r=0,a=[];++i<n;){var s=e[i];t(s,i,e)&&(a[r++]=s)}return a}function Vw(){return[]}var UR=Object.prototype,HR=UR.propertyIsEnumerable,zw=Object.getOwnPropertySymbols,up=zw?function(e){return e==null?[]:(e=Object(e),GR(zw(e),function(t){return HR.call(e,t)}))}:Vw;function WR(e,t){return Ms(e,up(e),t)}var qR=Object.getOwnPropertySymbols,Gw=qR?function(e){for(var t=[];e;)op(t,up(e)),e=ap(e);return t}:Vw;function ZR(e,t){return Ms(e,Gw(e),t)}function Uw(e,t,i){var n=t(e);return wn(e)?n:op(n,i(e))}function cp(e){return Uw(e,Ds,up)}function QR(e){return Uw(e,Ls,Gw)}var dp=Uo(nr,"DataView"),hp=Uo(nr,"Promise"),Sa=Uo(nr,"Set"),Hw="[object Map]",JR="[object Object]",Ww="[object Promise]",qw="[object Set]",Zw="[object WeakMap]",Qw="[object DataView]",XR=Go(dp),YR=Go(Rs),KR=Go(hp),e9=Go(Sa),t9=Go(Qh),Wo=zo;(dp&&Wo(new dp(new ArrayBuffer(1)))!=Qw||Rs&&Wo(new Rs)!=Hw||hp&&Wo(hp.resolve())!=Ww||Sa&&Wo(new Sa)!=qw||Qh&&Wo(new Qh)!=Zw)&&(Wo=function(e){var t=zo(e),i=t==JR?e.constructor:void 0,n=i?Go(i):"";if(n)switch(n){case XR:return Qw;case YR:return Hw;case KR:return Ww;case e9:return qw;case t9:return Zw}return t});var js=Wo,i9=Object.prototype,n9=i9.hasOwnProperty;function r9(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&n9.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var Du=nr.Uint8Array;function pp(e){var t=new e.constructor(e.byteLength);return new Du(t).set(new Du(e)),t}function o9(e,t){var i=t?pp(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var a9=/\w*$/;function s9(e){var t=new e.constructor(e.source,a9.exec(e));return t.lastIndex=e.lastIndex,t}var Jw=kn?kn.prototype:void 0,Xw=Jw?Jw.valueOf:void 0;function l9(e){return Xw?Object(Xw.call(e)):{}}function Yw(e,t){var i=t?pp(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var u9="[object Boolean]",c9="[object Date]",d9="[object Map]",h9="[object Number]",p9="[object RegExp]",m9="[object Set]",f9="[object String]",v9="[object Symbol]",g9="[object ArrayBuffer]",y9="[object DataView]",b9="[object Float32Array]",C9="[object Float64Array]",_9="[object Int8Array]",w9="[object Int16Array]",x9="[object Int32Array]",E9="[object Uint8Array]",P9="[object Uint8ClampedArray]",O9="[object Uint16Array]",M9="[object Uint32Array]";function S9(e,t,i){var n=e.constructor;switch(t){case g9:return pp(e);case u9:case c9:return new n(+e);case y9:return o9(e,i);case b9:case C9:case _9:case w9:case x9:case E9:case P9:case O9:case M9:return Yw(e,i);case d9:return new n;case h9:case f9:return new n(e);case p9:return s9(e);case m9:return new n;case v9:return l9(e)}}function Kw(e){return typeof e.constructor=="function"&&!Yh(e)?b4(ap(e)):{}}var T9="[object Map]";function I9(e){return Cr(e)&&js(e)==T9}var e2=Oa&&Oa.isMap,A9=e2?Tu(e2):I9,D9="[object Set]";function L9(e){return Cr(e)&&js(e)==D9}var t2=Oa&&Oa.isSet,B9=t2?Tu(t2):L9,R9=1,F9=2,$9=4,i2="[object Arguments]",j9="[object Array]",N9="[object Boolean]",k9="[object Date]",V9="[object Error]",n2="[object Function]",z9="[object GeneratorFunction]",G9="[object Map]",U9="[object Number]",r2="[object Object]",H9="[object RegExp]",W9="[object Set]",q9="[object String]",Z9="[object Symbol]",Q9="[object WeakMap]",J9="[object ArrayBuffer]",X9="[object DataView]",Y9="[object Float32Array]",K9="[object Float64Array]",eF="[object Int8Array]",tF="[object Int16Array]",iF="[object Int32Array]",nF="[object Uint8Array]",rF="[object Uint8ClampedArray]",oF="[object Uint16Array]",aF="[object Uint32Array]",Ft={};Ft[i2]=Ft[j9]=Ft[J9]=Ft[X9]=Ft[N9]=Ft[k9]=Ft[Y9]=Ft[K9]=Ft[eF]=Ft[tF]=Ft[iF]=Ft[G9]=Ft[U9]=Ft[r2]=Ft[H9]=Ft[W9]=Ft[q9]=Ft[Z9]=Ft[nF]=Ft[rF]=Ft[oF]=Ft[aF]=!0,Ft[V9]=Ft[n2]=Ft[Q9]=!1;function Lu(e,t,i,n,r,a){var s,l=t&R9,c=t&F9,d=t&$9;if(i&&(s=r?i(e,n,r,a):i(e)),s!==void 0)return s;if(!Vn(e))return e;var h=wn(e);if(h){if(s=r9(e),!l)return H_(e,s)}else{var p=js(e),f=p==n2||p==z9;if(Is(e))return kw(e,l);if(p==r2||p==i2||f&&!r){if(s=c||f?{}:Kw(e),!l)return c?ZR(e,VR(s,e)):WR(e,kR(s,e))}else{if(!Ft[p])return r?e:{};s=S9(e,p,l)}}a||(a=new rr);var v=a.get(e);if(v)return v;a.set(e,s),B9(e)?e.forEach(function(C){s.add(Lu(C,t,i,C,e,a))}):A9(e)&&e.forEach(function(C,M){s.set(M,Lu(C,t,i,M,e,a))});var y=d?c?QR:cp:c?Ls:Ds,w=h?void 0:y(e);return T4(w||e,function(C,M){w&&(M=C,C=e[M]),Z_(s,M,Lu(C,t,i,M,e,a))}),s}var sF=1,lF=4;function yt(e){return Lu(e,sF|lF)}var uF="__lodash_hash_undefined__";function cF(e){return this.__data__.set(e,uF),this}function dF(e){return this.__data__.has(e)}function Ta(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new Zr;++t<i;)this.add(e[t])}Ta.prototype.add=Ta.prototype.push=cF,Ta.prototype.has=dF;function hF(e,t){for(var i=-1,n=e==null?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}function mp(e,t){return e.has(t)}var pF=1,mF=2;function o2(e,t,i,n,r,a){var s=i&pF,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var d=a.get(e),h=a.get(t);if(d&&h)return d==t&&h==e;var p=-1,f=!0,v=i&mF?new Ta:void 0;for(a.set(e,t),a.set(t,e);++p<l;){var y=e[p],w=t[p];if(n)var C=s?n(w,y,p,t,e,a):n(y,w,p,e,t,a);if(C!==void 0){if(C)continue;f=!1;break}if(v){if(!hF(t,function(M,S){if(!mp(v,S)&&(y===M||r(y,M,i,n,a)))return v.push(S)})){f=!1;break}}else if(!(y===w||r(y,w,i,n,a))){f=!1;break}}return a.delete(e),a.delete(t),f}function fF(e){var t=-1,i=Array(e.size);return e.forEach(function(n,r){i[++t]=[r,n]}),i}function fp(e){var t=-1,i=Array(e.size);return e.forEach(function(n){i[++t]=n}),i}var vF=1,gF=2,yF="[object Boolean]",bF="[object Date]",CF="[object Error]",_F="[object Map]",wF="[object Number]",xF="[object RegExp]",EF="[object Set]",PF="[object String]",OF="[object Symbol]",MF="[object ArrayBuffer]",SF="[object DataView]",a2=kn?kn.prototype:void 0,vp=a2?a2.valueOf:void 0;function TF(e,t,i,n,r,a,s){switch(i){case SF:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case MF:return!(e.byteLength!=t.byteLength||!a(new Du(e),new Du(t)));case yF:case bF:case wF:return Os(+e,+t);case CF:return e.name==t.name&&e.message==t.message;case xF:case PF:return e==t+"";case _F:var l=fF;case EF:var c=n&vF;if(l||(l=fp),e.size!=t.size&&!c)return!1;var d=s.get(e);if(d)return d==t;n|=gF,s.set(e,t);var h=o2(l(e),l(t),n,r,a,s);return s.delete(e),h;case OF:if(vp)return vp.call(e)==vp.call(t)}return!1}var IF=1,AF=Object.prototype,DF=AF.hasOwnProperty;function LF(e,t,i,n,r,a){var s=i&IF,l=cp(e),c=l.length,d=cp(t),h=d.length;if(c!=h&&!s)return!1;for(var p=c;p--;){var f=l[p];if(!(s?f in t:DF.call(t,f)))return!1}var v=a.get(e),y=a.get(t);if(v&&y)return v==t&&y==e;var w=!0;a.set(e,t),a.set(t,e);for(var C=s;++p<c;){f=l[p];var M=e[f],S=t[f];if(n)var _=s?n(S,M,f,t,e,a):n(M,S,f,e,t,a);if(!(_===void 0?M===S||r(M,S,i,n,a):_)){w=!1;break}C||(C=f=="constructor")}if(w&&!C){var O=e.constructor,I=t.constructor;O!=I&&"constructor"in e&&"constructor"in t&&!(typeof O=="function"&&O instanceof O&&typeof I=="function"&&I instanceof I)&&(w=!1)}return a.delete(e),a.delete(t),w}var BF=1,s2="[object Arguments]",l2="[object Array]",Bu="[object Object]",RF=Object.prototype,u2=RF.hasOwnProperty;function FF(e,t,i,n,r,a){var s=wn(e),l=wn(t),c=s?l2:js(e),d=l?l2:js(t);c=c==s2?Bu:c,d=d==s2?Bu:d;var h=c==Bu,p=d==Bu,f=c==d;if(f&&Is(e)){if(!Is(t))return!1;s=!0,h=!1}if(f&&!h)return a||(a=new rr),s||ep(e)?o2(e,t,i,n,r,a):TF(e,t,c,i,n,r,a);if(!(i&BF)){var v=h&&u2.call(e,"__wrapped__"),y=p&&u2.call(t,"__wrapped__");if(v||y){var w=v?e.value():e,C=y?t.value():t;return a||(a=new rr),r(w,C,i,n,a)}}return f?(a||(a=new rr),LF(e,t,i,n,r,a)):!1}function Ru(e,t,i,n,r){return e===t?!0:e==null||t==null||!Cr(e)&&!Cr(t)?e!==e&&t!==t:FF(e,t,i,n,Ru,r)}var $F=1,jF=2;function NF(e,t,i,n){var r=i.length,a=r,s=!n;if(e==null)return!a;for(e=Object(e);r--;){var l=i[r];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++r<a;){l=i[r];var c=l[0],d=e[c],h=l[1];if(s&&l[2]){if(d===void 0&&!(c in e))return!1}else{var p=new rr;if(n)var f=n(d,h,c,e,t,p);if(!(f===void 0?Ru(h,d,$F|jF,n,p):f))return!1}}return!0}function c2(e){return e===e&&!Vn(e)}function kF(e){for(var t=Ds(e),i=t.length;i--;){var n=t[i],r=e[n];t[i]=[n,r,c2(r)]}return t}function d2(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}function VF(e){var t=kF(e);return t.length==1&&t[0][2]?d2(t[0][0],t[0][1]):function(i){return i===e||NF(i,e,t)}}function zF(e,t){return e!=null&&t in Object(e)}function GF(e,t,i){t=np(t,e);for(var n=-1,r=t.length,a=!1;++n<r;){var s=$s(t[n]);if(!(a=e!=null&&i(e,s)))break;e=e[s]}return a||++n!=r?a:(r=e==null?0:e.length,!!r&&Xh(r)&&Su(s,r)&&(wn(e)||Ts(e)))}function UF(e,t){return e!=null&&GF(e,t,zF)}var HF=1,WF=2;function qF(e,t){return tp(e)&&c2(t)?d2($s(e),t):function(i){var n=aw(i,e);return n===void 0&&n===t?UF(i,e):Ru(t,n,HF|WF)}}function ZF(e){return function(t){return t==null?void 0:t[e]}}function QF(e){return function(t){return rp(t,e)}}function JF(e){return tp(e)?ZF($s(e)):QF(e)}function Fu(e){return typeof e=="function"?e:e==null?Wh:typeof e=="object"?wn(e)?qF(e[0],e[1]):VF(e):JF(e)}function XF(e){return function(t,i,n){for(var r=-1,a=Object(t),s=n(t),l=s.length;l--;){var c=s[e?l:++r];if(i(a[c],c,a)===!1)break}return t}}var YF=XF(),gp=function(){return nr.Date.now()},KF="Expected a function",e8=Math.max,t8=Math.min;function i8(e,t,i){var n,r,a,s,l,c,d=0,h=!1,p=!1,f=!0;if(typeof e!="function")throw new TypeError(KF);t=Hh(t)||0,Vn(i)&&(h=!!i.leading,p="maxWait"in i,a=p?e8(Hh(i.maxWait)||0,t):a,f="trailing"in i?!!i.trailing:f);function v(A){var V=n,$=r;return n=r=void 0,d=A,s=e.apply($,V),s}function y(A){return d=A,l=setTimeout(M,t),h?v(A):s}function w(A){var V=A-c,$=A-d,D=t-V;return p?t8(D,a-$):D}function C(A){var V=A-c,$=A-d;return c===void 0||V>=t||V<0||p&&$>=a}function M(){var A=gp();if(C(A))return S(A);l=setTimeout(M,w(A))}function S(A){return l=void 0,f&&n?v(A):(n=r=void 0,s)}function _(){l!==void 0&&clearTimeout(l),d=0,n=c=r=l=void 0}function O(){return l===void 0?s:S(gp())}function I(){var A=gp(),V=C(A);if(n=arguments,r=this,c=A,V){if(l===void 0)return y(c);if(p)return clearTimeout(l),l=setTimeout(M,t),v(c)}return l===void 0&&(l=setTimeout(M,t)),s}return I.cancel=_,I.flush=O,I}function yp(e,t,i){(i!==void 0&&!Os(e[t],i)||i===void 0&&!(t in e))&&Jh(e,t,i)}function $u(e){return Cr(e)&&Ss(e)}function bp(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}function n8(e){return Ms(e,Ls(e))}function r8(e,t,i,n,r,a,s){var l=bp(e,i),c=bp(t,i),d=s.get(c);if(d){yp(e,i,d);return}var h=a?a(l,c,i+"",e,t,s):void 0,p=h===void 0;if(p){var f=wn(c),v=!f&&Is(c),y=!f&&!v&&ep(c);h=c,f||v||y?wn(l)?h=l:$u(l)?h=H_(l):v?(p=!1,h=kw(c,!0)):y?(p=!1,h=Yw(c,!0)):h=[]:vB(c)||Ts(c)?(h=l,Ts(l)?h=n8(l):(!Vn(l)||qh(l))&&(h=Kw(c))):p=!1}p&&(s.set(c,h),r(h,c,n,a,s),s.delete(c)),yp(e,i,h)}function h2(e,t,i,n,r){e!==t&&YF(t,function(a,s){if(r||(r=new rr),Vn(a))r8(e,t,s,i,h2,n,r);else{var l=n?n(bp(e,s),a,s+"",e,t,r):void 0;l===void 0&&(l=a),yp(e,s,l)}},Ls)}function p2(e,t,i){for(var n=-1,r=e==null?0:e.length;++n<r;)if(i(t,e[n]))return!0;return!1}var o8=200;function a8(e,t,i,n){var r=-1,a=q_,s=!0,l=e.length,c=[],d=t.length;if(!l)return c;i&&(t=$_(t,Tu(i))),n?(a=p2,s=!1):t.length>=o8&&(a=mp,s=!1,t=new Ta(t));e:for(;++r<l;){var h=e[r],p=i==null?h:i(h);if(h=n||h!==0?h:0,s&&p===p){for(var f=d;f--;)if(t[f]===p)continue e;c.push(h)}else a(t,p,n)||c.push(h)}return c}function m2(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var s8=J_(function(e,t){var i=m2(t);return $u(i)&&(i=void 0),$u(e)?a8(e,lw(t,1,$u,!0),Fu(i)):[]}),Zt=s8;function l8(e){return function(t,i,n){var r=Object(t);if(!Ss(t)){var a=Fu(i);t=Ds(t),i=function(l){return a(r[l],l,r)}}var s=e(t,i,n);return s>-1?r[a?t[s]:s]:void 0}}var u8=Math.max;function f2(e,t,i){var n=e==null?0:e.length;if(!n)return-1;var r=i==null?0:i4(i);return r<0&&(r=u8(n+r,0)),W_(e,Fu(t),r)}var c8=l8(f2),v2=c8;function d8(e,t){return t.length<2?e:rp(e,cw(t,0,-1))}function ju(e,t){return Ru(e,t)}function h8(e){return e===null}function xn(e){return e===void 0}var p8=k4(function(e,t,i){h2(e,t,i)}),Qt=p8;function m8(e,t){return t=np(t,e),e=d8(e,t),e==null||delete e[$s(m2(t))]}var f8=Array.prototype,v8=f8.splice;function g8(e,t){for(var i=e?t.length:0,n=i-1;i--;){var r=t[i];if(i==n||r!==a){var a=r;Su(r)?v8.call(e,r,1):m8(e,r)}}return e}function g2(e,t){var i=[];if(!(e&&e.length))return i;var n=-1,r=[],a=e.length;for(t=Fu(t);++n<a;){var s=e[n];t(s,n,e)&&(i.push(s),r.push(n))}return g8(e,r),i}var y8=1/0,b8=Sa&&1/fp(new Sa([,-0]))[1]==y8?function(e){return new Sa(e)}:_4,C8=200;function _8(e,t,i){var n=-1,r=q_,a=e.length,s=!0,l=[],c=l;if(i)s=!1,r=p2;else if(a>=C8){var d=t?null:b8(e);if(d)return fp(d);s=!1,r=mp,c=new Ta}else c=t?[]:l;e:for(;++n<a;){var h=e[n],p=t?t(h):h;if(h=i||h!==0?h:0,s&&p===p){for(var f=c.length;f--;)if(c[f]===p)continue e;t&&c.push(p),l.push(h)}else r(c,p,i)||(c!==l&&c.push(p),l.push(h))}return l}function w8(e,t){return t=typeof t=="function"?t:void 0,e&&e.length?_8(e,void 0,t):[]}const x8=Object.prototype.hasOwnProperty,bt=(e,t)=>x8.call(e,t),$t=Array.isArray,hi=e=>typeof e=="function",zn=e=>typeof e=="string",_r=e=>e!==null&&typeof e=="object",E8=Object.prototype.toString,P8=e=>E8.call(e),Gt=e=>P8(e)==="[object Object]",Cp=e=>{const t=Object.create(null);return i=>t[i]||(t[i]=e(i))},O8=/-(\w)/g,Li=Cp(e=>e.replace(O8,(t,i)=>i?i.toUpperCase():"")),M8=/\B([A-Z])/g,S8=Cp(e=>e.replace(M8,"-$1").toLowerCase()),Nu=Cp(e=>e.charAt(0).toUpperCase()+e.slice(1));function y2(e){if(typeof e!="string"&&(e=e+""),e.length===0)return".";let t=e.charCodeAt(0);const i=t===47;let n=-1,r=!0;for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!r){n=a;break}}else r=!1;return n===-1?i?"/":".":i&&n===1?"/":e.slice(0,n)}function Ns(e){return xn(e)||h8(e)?!0:e instanceof Element?!1:Object.keys(e).length===0}const ye=S8;function T8(e,t){if(typeof e!="object"||e===null)return!1;let i=Object.getPrototypeOf(e);for(;;){if(i===null)return!1;if(i===(t==null?void 0:t.prototype))return!0;i=Object.getPrototypeOf(i)}}function I8(e){let t;const i=Object.keys(Cesium);for(let n=0;n<i.length;n++){const r=i[n];if(T8(e,Cesium[r])){t=r;break}}return t}function _p(e,t=!1){if(e&&e.constructor){if(t){const i=I8(e);if(i)return i}return e.constructor.name}return typeof e}function an(e,t){return e!=null?e:t}function Gn(e,t=[]){const i={};return Object.keys(e).forEach(n=>{if(t.indexOf(n)===-1){const r=e[n];i[n]=hi(r)?void 0:Gt(r)?hi(r.default)?r.default():r.default:r}}),i}const or=(e,t,i=[])=>{for(const n in t)!e[n]&&i.indexOf(n)===-1&&(e[n]=t[n])};function A8(e){if(Array.isArray(e))return!0;if(typeof e!="object"||!e)return!1;const t=e.length;return typeof t=="number"&&t>=0}function D8(e){return typeof e=="number"&&isFinite(e)}function ku(e,t,i){const{JulianDate:n,Color:r}=Cesium,a=n.now();return e?(typeof e.getValue=="function"&&(e=e.getValue(i||a)),typeof e=="string"?r.fromCssColorString(e):typeof e=="function"?ku(e(i),t):e):t}function wp(e,t,i){const{JulianDate:n,Property:r}=Cesium,a=n.now();if(!e)return e;if(t){if(e instanceof t)return e;if(e instanceof r&&e._value instanceof t)return e._value}return hi(e.getValue)?e.getValue(i||a):e}const b2=e=>Object.keys(e),Vu=he();function zu(e,t=void 0){const i=fe()?Eu(Uh,Vu):Vu;return e?ge(()=>{var n,r;return(r=(n=i.value)==null?void 0:n[e])!=null?r:t}):i}const C2=(e,t,i=!1)=>{var n;const r=!!fe(),a=r?zu():void 0;if(!((n=t==null?void 0:t.provide)!=null?n:r&&Gr)){console.warn("provideGlobalConfig","provideGlobalConfig() can only be used inside setup().");return}const s=ge(()=>{const l=Gh(e);return a!=null&&a.value?L8(a.value,l):l});return t!=null&&t.provide?t.provide(Uh,s):Gr(Uh,s),(i||!Vu.value)&&(Vu.value=s.value),s},L8=(e,t)=>{var i;const n=[...new Set([...b2(e),...b2(t)])],r={};for(const a of n)r[a]=(i=t[a])!=null?i:e[a];return r};function ks(e){var t,i,n,r;const a=(C="")=>function(...M){C&&(zn(M[0])?M[0]=C.trim()+" "+M[0]:M=[C.trim(),...M]),console.log(...M)},s=(C="")=>function(...M){C&&(zn(M[0])?M[0]=C.trim()+" "+M[0]:M=[C.trim(),...M]),console.warn(...M)},l=(C="")=>function(...M){C&&(zn(M[0])?M[0]=C.trim()+" "+M[0]:M=[C.trim(),...M]),console.error(...M)},c=(C="")=>function(...M){C&&(zn(M[0])?M[0]=C.trim()+" "+M[0]:M=[C.trim(),...M])},d=(C="default")=>{let M="";switch(C){case"default":M="#35495E";break;case"primary":M="#3488ff";break;case"success":M="#43B883";break;case"warning":M="#e6a23c";break;case"danger":M="#f56c6c";break}return M},h=(C,M,S="primary")=>{console.log(`%c ${C} %c ${M} %c`,"background:#35495E; padding: 1px; border-radius: 3px 0 0 3px; color: #fff;",`background:${d(S)}; padding: 1px; border-radius: 0 3px 3px 0;  color: #fff;`,"background:transparent")},p=C=>{console.log(`%c${C.map(M=>M.text||"").join("%c")}`,...C.map(M=>`color: ${d(M.type)};`))},f=C=>{p([{text:C,type:"success"}])},v=C=>{p([{text:C,type:"warning"}])},y=C=>{p([{text:C,type:"danger"}])},w=C=>{p([{text:C,type:"primary"}])};return{log:a(`[VueCesium] ${(t=e==null?void 0:e.proxy)==null?void 0:t.$options.name}`),warn:s(`[VueCesium] WARN ${(i=e==null?void 0:e.proxy)==null?void 0:i.$options.name}`),error:l(`[VueCesium] ERR ${(n=e==null?void 0:e.proxy)==null?void 0:n.$options.name}`),debug:c(`[VueCesium] Debug ${(r=e==null?void 0:e.proxy)==null?void 0:r.$options.name}`),capsule:h,success:f,warning:v,danger:y,primary:w}}ks(void 0);const _2=Symbol("INSTALLED_KEY"),xp=(e=[])=>({version:BD,install:(t,i)=>{if(t[_2])return;const n={cesiumPath:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js",accessToken:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"};t[_2]=!0;const r=Object.assign(n,i);e.forEach(a=>{t.use(a,r)}),C2(r,t,!0)}});function w2(e){return{all:e=e||new Map,on:function(t,i){var n=e.get(t);n?n.push(i):e.set(t,[i])},off:function(t,i){var n=e.get(t);n&&(i?n.splice(n.indexOf(i)>>>0,1):e.set(t,[]))},emit:function(t,i){var n=e.get(t);n&&n.slice().map(function(r){r(i)}),(n=e.get("*"))&&n.slice().map(function(r){r(t,i)})}}}/*!
 * merge-descriptors
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2015 Douglas Christopher Wilson
 * MIT Licensed
 */const B8=Object.prototype.hasOwnProperty;function R8(e,t,i){if(!e)throw new TypeError("argument dest is required");if(!t)throw new TypeError("argument src is required");return i===void 0&&(i=!0),Object.getOwnPropertyNames(t).forEach(function(n){if(!i&&B8.call(e,n))return;const r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r)}),e}function qo(...e){let t;return typeof e[e.length-1]!="object"&&(t=e.pop()),e.slice(1).reduce((i,n,r)=>R8(i,n,t),e[0])}function F8(e){return e.appContext.config.globalProperties.$router!==void 0}function Ep(e,t){return e.vnode.props!==null&&e.vnode.props[t]!==void 0}function Ze(e,t){const i=e.vnode.props;if(i===null)return;const n=Object.keys(i),r=f2(n,a=>a.includes(`on${Nu(t)}`)||a.includes(`on${Nu(Rw(t))}`));return i[n[r]]}function De(e){return e.value}function bi(e){var t;const i=e.parent;return!i.cesiumClass&&((t=i.proxy)==null?void 0:t.$options.name)!=="VcViewer"?bi(i):i}const $8=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,x2=e=>{if(typeof e!="string")throw new TypeError("Invalid argument expected string");const t=e.match($8);if(!t)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return t.shift(),t},E2=e=>e==="*"||e==="x"||e==="X",P2=e=>{const t=parseInt(e,10);return isNaN(t)?e:t},j8=(e,t)=>typeof e!=typeof t?[String(e),String(t)]:[e,t],N8=(e,t)=>{if(E2(e)||E2(t))return 0;const[i,n]=j8(P2(e),P2(t));return i>n?1:i<n?-1:0},O2=(e,t)=>{for(let i=0;i<Math.max(e.length,t.length);i++){const n=N8(e[i]||"0",t[i]||"0");if(n!==0)return n}return 0},k8=(e,t)=>{const i=x2(e),n=x2(t),r=i.pop(),a=n.pop(),s=O2(i,n);return s!==0?s:r&&a?O2(r.split("."),a.split(".")):r||a?r?-1:1:0},V8=(e,t,i)=>{z8(i);const n=k8(e,t);return M2[i].includes(n)},M2={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1],"!=":[-1,1]},S2=Object.keys(M2),z8=e=>{if(typeof e!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof e}`);if(S2.indexOf(e)===-1)throw new Error(`Invalid operator, expected one of ${S2.join("|")}`)};var G8=`
czm_material czm_getMaterial(czm_materialInput materialInput) {
czm_material material = czm_getDefaultMaterial(materialInput);
material.diffuse = 1.5 * color.rgb;
vec2 st = materialInput.st;
vec3 str = materialInput.str;
float dis = distance(st, vec2(0.5, 0.5));
float per = fract(time);
if (abs(str.z) > 0.001) {
  discard;
}
if (dis > 0.5) {
  discard;
} else {
  float perDis = 0.5 / count;
  float disNum;
  float bl = .0;
  for (int i = 0; i <= 9; i++) {
    if (float(i) <= count) {
      disNum = perDis *float(i) - dis + per / count;
      if (disNum > 0.0) {
        if (disNum < perDis) {
          bl = 1.0 - disNum / perDis;
        } else if(disNum - perDis < perDis) {
          bl = 1.0 - abs(1.0 - disNum / perDis);
        }
        material.alpha = pow(bl, gradient);
      }
    }
  }
}
return material;
}`,U8=`
uniform float globalAlpha;
uniform bool axisY;
uniform bool mixt;

czm_material czm_getMaterial(czm_materialInput materialInput) {
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = repeat * materialInput.st;

  vec4 colorImage;
  if (speed != 0.0) {
    float currTime;
    if (time < 0.0) {
      currTime = speed * czm_frameNumber / 1000.0;
    } else {
      currTime = time;
    }
    colorImage = texture(image, vec2(fract((axisY ? st.t : st.s) - currTime), st.t));
  } else {
    colorImage = texture(image, st);
  }

  if (color.a == 0.0) {
    if (colorImage.rgb == vec3(1.0)) {
      discard;
    }
  }

  if (color.rgb == vec3(1.0)) {
    material.alpha = colorImage.a * globalAlpha;
    material.diffuse = colorImage.rgb;
  } else {
    material.alpha = colorImage.a * color.a * globalAlpha;
    if (mixt)
      material.diffuse = max(colorImage.rgb * color.rgb * material.alpha * 3.0, colorImage.rgb * color.rgb);
    else
      material.diffuse = max(color.rgb * material.alpha * 3.0, color.rgb);
  }

  if (hasImage2) {
    vec4 colorBG = texture(image2, materialInput.st);
    if (colorBG.a > 0.5) {
      material.diffuse = color2.rgb;
    }
  }
  return material;
}
`,H8=`
czm_material czm_getMaterial(czm_materialInput materialInput)
{
  czm_material material = czm_getDefaultMaterial(materialInput);
  vec2 st = materialInput.st;
  vec4 colorImage = texture(image, vec2(fract(st.s - time), st.t));
  material.alpha = colorImage.a * color.a;
  material.diffuse = (colorImage.rgb+color.rgb)/2.0;
  return material;
}
`;let Gu=!1;class Pp{static extend(t){var i;if(Gu)return;const{Material:n,Color:r,Cartesian2:a}=Cesium,s=(i=t.scene.context)==null?void 0:i.webgl2;let l=U8,c=G8,d=H8;s||(l=l.replace(/texture\(/g,"texture2D("),c=c.replace(/texture\(/g,"texture2D("),d=d.replace(/texture\(/g,"texture2D(")),n.VcCircleWave="VcCircleWave",Cesium.Material._materialCache.addMaterial(n.VcCircleWave,{fabric:{type:n.VcCircleWave,uniforms:{color:new r(1,0,0,1),time:1,count:1,gradient:.1},source:c},translucent(){return!0}}),n.VcLineFlow="VcLineFlow",Cesium.Material._materialCache.addMaterial(n.VcLineFlow,{fabric:{type:n.VcLineFlow,uniforms:{image:n.DefaultImageId,color:new r(1,1,1,1),repeat:new a(1,1),axisY:!1,mixt:!1,speed:10,time:-1,hasImage2:!1,image2:n.DefaultImageId,color2:new r(1,1,1),globalAlpha:1},source:l},translucent(){return!0}}),n.VcLineTrail="VcLineTrail",Cesium.Material._materialCache.addMaterial(n.VcLineTrail,{fabric:{type:n.VcLineTrail,uniforms:{image:n.DefaultImageId,color:new r(1,0,0,1),repeat:new a(1,1),time:0,axisY:!1},source:d},translucent(){return!0}}),Gu=!0}static revoke(t){Gu&&(Gu=!1)}}class Op{constructor(t={}){this.options=t,this._definitionChanged=new Cesium.Event}get isConstant(){return!0}get definitionChanged(){return this._definitionChanged}getType(t){return null}getValue(t,i={}){return i}equals(t){return this===t}}class Io extends Op{constructor(t){super(t);const{Event:i,defaultValue:n}=Cesium;Object.getOwnPropertyDescriptor(Io.prototype,"color")||Object.defineProperties(Io.prototype,{color:Cesium.createPropertyDescriptor("color")}),this._definitionChanged=new i,this._color=new Cesium.ConstantProperty(t.color),this._duration=n(t.duration,1e3),this.count=n(t.count,2),this.count<=0&&(this.count=1),this._gradient=n(t.gradient,.1),this._gradient===0&&(this._gradient=0),this._gradient>1&&(this._gradient=1),this._time=new Date().getTime()}get isConstant(){return!1}get definitionChanged(){return this._definitionChanged}get color(){return this._color}set color(t){const i=this._color;i!==t&&(this._color=new Cesium.ConstantProperty(t),this._definitionChanged.raiseEvent(this,"color",t,i))}get duration(){return this._duration}set duration(t){const i=this._duration;i!==t&&(this._duration=t,this._definitionChanged.raiseEvent(this,"duration",t,i))}get count(){return this._count}set count(t){const i=this._count;i!==t&&(this._count=t,this._definitionChanged.raiseEvent(this,"count",t,i))}getType(){return"VcCircleWave"}getValue(t,i){return Cesium.defined(i)||(i={}),i.color=Cesium.Property.getValueOrClonedDefault(this._color,t,Cesium.Color.YELLOW,i.color),i.time=(new Date().getTime()-this._time)%this.duration/this.duration,i.count=this.count,i.gradient=1+10*(1-this._gradient),i}equals(t){return this===t||t instanceof Io&&Cesium.Property.equals(this._color,t._color)}}class as extends Op{constructor(t={}){var i,n,r,a,s,l,c,d,h,p;super(t);const{Color:f,Cartesian2:v,defined:y}=Cesium;this.image=(i=t.image)!=null?i:t.url,this.color=(n=t.color)!=null?n:new f(1,1,1,0),this.axisY=(r=t.axisY)!=null?r:!1,this.mixt=(a=t.mixt)!=null?a:!1,this.speed=(s=t.speed)!=null?s:10,this.duration=t.duration,this.repeat=(l=t.repeat)!=null?l:new v(1,1),this.image2=(c=t.image2)!=null?c:t.bgUrl,this.color2=(h=(d=t.color2)!=null?d:t.bgColor)!=null?h:new f(1,1,1,0),this.hasImage2=y(this.image2),this.globalAlpha=(p=t.globalAlpha)!=null?p:!0}getType(t){return"VcLineFlow"}getValue(t,i){const{Color:n,Cartesian2:r,defined:a}=Cesium;return!a(i)&&(i={}),i.image=this.image,i.color=ku(this.color,new n(1,1,1,0),t),i.repeat=wp(this.repeat,r,t),i.axisY=this.axisY,i.mixt=this.mixt,i.speed=wp(this.speed,Number,t),this.duration?this._time===void 0&&(this._time=new Date().getTime(),i.time=(new Date().getTime()-this._time)/(this.duration*1e3)):i.time=-1,i.hasImage2=this.hasImage2,i.image2=this.image2,i.color2=ku(this.color2,new n(1,1,1,0),t),i.globalAlpha=this.globalAlpha,i}equals(t){return this===t||t instanceof as&&Cesium.Property.equals(this.color,t.color)&&Cesium.Property.equals(this.repeat,t.repeat)&&this.image===t.image&&this.axisY===t.axisY&&this.speed===t.speed&&this.hasImage2===t.hasImage2&&this.image2===t.image2&&this.image2===t.image2&&Cesium.Property.equals(this.color2,t.color2)}}class ss extends Op{constructor(t={}){var i,n,r,a,s,l,c;super(t);const{Color:d,Cartesian2:h,defined:p}=Cesium;this.image=(i=t.image)!=null?i:t.url,this.color=(n=t.color)!=null?n:new d(1,0,0,1),this.axisY=(r=t.axisY)!=null?r:!1,this.time=(a=t.time)!=null?a:0,this.repeat=(s=t.repeat)!=null?s:new h(1,1),this.loop=(l=t.loop)!=null?l:!0,this.duration=(c=t.duration)!=null?c:3,this._time=new Date().getTime()}getType(t){return"VcLineTrail"}getValue(t,i){const{Color:n,Cartesian2:r,defined:a}=Cesium;return!a(i)&&(i={}),this.lastTime>=.99&&!this.loop||(i.image=this.image,i.color=ku(this.color,new n(1,1,1,0),t),i.repeat=wp(this.repeat,r,t),i.axisY=this.axisY,i.time=(new Date().getTime()-this._time)%this.duration/this.duration,this.lastTime=i.time),i}equals(t){return this===t||t instanceof ss&&Cesium.Property.equals(this.color,t.color)&&Cesium.Property.equals(this.repeat,t.repeat)&&this.image===t.image&&this.axisY===t.axisY&&this.duration===t.duration}}var En=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Mp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Uu={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Uu.exports,function(e,t){(function(){var i,n="4.17.21",r=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",l="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",d=500,h="__lodash_placeholder__",p=1,f=2,v=4,y=1,w=2,C=1,M=2,S=4,_=8,O=16,I=32,A=64,V=128,$=256,D=512,G=30,q="...",H=800,g=16,b=1,E=2,L=3,P=1/0,T=9007199254740991,F=17976931348623157e292,N=0/0,j=4294967295,U=j-1,te=j>>>1,ie=[["ary",V],["bind",C],["bindKey",M],["curry",_],["curryRight",O],["flip",D],["partial",I],["partialRight",A],["rearg",$]],K="[object Arguments]",Z="[object Array]",z="[object AsyncFunction]",Q="[object Boolean]",re="[object Date]",X="[object DOMException]",J="[object Error]",ae="[object Function]",ne="[object GeneratorFunction]",ce="[object Map]",le="[object Number]",pe="[object Null]",Ce="[object Object]",Se="[object Promise]",Re="[object Proxy]",Me="[object RegExp]",Te="[object Set]",$e="[object String]",Le="[object Symbol]",Ie="[object Undefined]",We="[object WeakMap]",Y="[object WeakSet]",_e="[object ArrayBuffer]",Be="[object DataView]",Fe="[object Float32Array]",Bt="[object Float64Array]",vi="[object Int8Array]",Ke="[object Int16Array]",Ee="[object Int32Array]",Qe="[object Uint8Array]",He="[object Uint8ClampedArray]",Xe="[object Uint16Array]",_t="[object Uint32Array]",wt=/\b__p \+= '';/g,lt=/\b(__p \+=) '' \+/g,ot=/(__e\(.*?\)|\b__t\)) \+\n'';/g,An=/&(?:amp|lt|gt|quot|#39);/g,Ao=/[&<>"']/g,Do=RegExp(An.source),Dd=RegExp(Ao.source),Tt=/<%-([\s\S]+?)%>/g,Dl=/<%([\s\S]+?)%>/g,Nt=/<%=([\s\S]+?)%>/g,ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ei=/^\w*$/,Ct=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yt=/[\\^$.*+?()[\]{}|]/g,fr=RegExp(Yt.source),vr=/^\s+/,ls=/\s/,Ll=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bl=/\{\n\/\* \[wrapped with (.+)\] \*/,Rl=/,? & /,pS=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,mS=/[()=,{}\[\]\/\s]/,fS=/\\(\\)?/g,vS=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ib=/\w*$/,gS=/^[-+]0x[0-9a-f]+$/i,yS=/^0b[01]+$/i,bS=/^\[object .+?Constructor\]$/,CS=/^0o[0-7]+$/i,_S=/^(?:0|[1-9]\d*)$/,wS=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Fl=/($^)/,xS=/['\n\r\u2028\u2029\\]/g,$l="\\ud800-\\udfff",ES="\\u0300-\\u036f",PS="\\ufe20-\\ufe2f",OS="\\u20d0-\\u20ff",nb=ES+PS+OS,rb="\\u2700-\\u27bf",ob="a-z\\xdf-\\xf6\\xf8-\\xff",MS="\\xac\\xb1\\xd7\\xf7",SS="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",TS="\\u2000-\\u206f",IS=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ab="A-Z\\xc0-\\xd6\\xd8-\\xde",sb="\\ufe0e\\ufe0f",lb=MS+SS+TS+IS,Ld="['\u2019]",AS="["+$l+"]",ub="["+lb+"]",jl="["+nb+"]",cb="\\d+",DS="["+rb+"]",db="["+ob+"]",hb="[^"+$l+lb+cb+rb+ob+ab+"]",Bd="\\ud83c[\\udffb-\\udfff]",LS="(?:"+jl+"|"+Bd+")",pb="[^"+$l+"]",Rd="(?:\\ud83c[\\udde6-\\uddff]){2}",Fd="[\\ud800-\\udbff][\\udc00-\\udfff]",ha="["+ab+"]",mb="\\u200d",fb="(?:"+db+"|"+hb+")",BS="(?:"+ha+"|"+hb+")",vb="(?:"+Ld+"(?:d|ll|m|re|s|t|ve))?",gb="(?:"+Ld+"(?:D|LL|M|RE|S|T|VE))?",yb=LS+"?",bb="["+sb+"]?",RS="(?:"+mb+"(?:"+[pb,Rd,Fd].join("|")+")"+bb+yb+")*",FS="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$S="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Cb=bb+yb+RS,jS="(?:"+[DS,Rd,Fd].join("|")+")"+Cb,NS="(?:"+[pb+jl+"?",jl,Rd,Fd,AS].join("|")+")",kS=RegExp(Ld,"g"),VS=RegExp(jl,"g"),$d=RegExp(Bd+"(?="+Bd+")|"+NS+Cb,"g"),zS=RegExp([ha+"?"+db+"+"+vb+"(?="+[ub,ha,"$"].join("|")+")",BS+"+"+gb+"(?="+[ub,ha+fb,"$"].join("|")+")",ha+"?"+fb+"+"+vb,ha+"+"+gb,$S,FS,cb,jS].join("|"),"g"),GS=RegExp("["+mb+$l+nb+sb+"]"),US=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,HS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],WS=-1,kt={};kt[Fe]=kt[Bt]=kt[vi]=kt[Ke]=kt[Ee]=kt[Qe]=kt[He]=kt[Xe]=kt[_t]=!0,kt[K]=kt[Z]=kt[_e]=kt[Q]=kt[Be]=kt[re]=kt[J]=kt[ae]=kt[ce]=kt[le]=kt[Ce]=kt[Me]=kt[Te]=kt[$e]=kt[We]=!1;var Rt={};Rt[K]=Rt[Z]=Rt[_e]=Rt[Be]=Rt[Q]=Rt[re]=Rt[Fe]=Rt[Bt]=Rt[vi]=Rt[Ke]=Rt[Ee]=Rt[ce]=Rt[le]=Rt[Ce]=Rt[Me]=Rt[Te]=Rt[$e]=Rt[Le]=Rt[Qe]=Rt[He]=Rt[Xe]=Rt[_t]=!0,Rt[J]=Rt[ae]=Rt[We]=!1;var qS={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ZS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},QS={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},JS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},XS=parseFloat,YS=parseInt,_b=typeof En=="object"&&En&&En.Object===Object&&En,KS=typeof self=="object"&&self&&self.Object===Object&&self,Ai=_b||KS||Function("return this")(),jd=t&&!t.nodeType&&t,Lo=jd&&!0&&e&&!e.nodeType&&e,wb=Lo&&Lo.exports===jd,Nd=wb&&_b.process,Dn=function(){try{var se=Lo&&Lo.require&&Lo.require("util").types;return se||Nd&&Nd.binding&&Nd.binding("util")}catch(be){}}(),xb=Dn&&Dn.isArrayBuffer,Eb=Dn&&Dn.isDate,Pb=Dn&&Dn.isMap,Ob=Dn&&Dn.isRegExp,Mb=Dn&&Dn.isSet,Sb=Dn&&Dn.isTypedArray;function vn(se,be,ve){switch(ve.length){case 0:return se.call(be);case 1:return se.call(be,ve[0]);case 2:return se.call(be,ve[0],ve[1]);case 3:return se.call(be,ve[0],ve[1],ve[2])}return se.apply(be,ve)}function e5(se,be,ve,Ge){for(var at=-1,Et=se==null?0:se.length;++at<Et;){var gi=se[at];be(Ge,gi,ve(gi),se)}return Ge}function Ln(se,be){for(var ve=-1,Ge=se==null?0:se.length;++ve<Ge&&be(se[ve],ve,se)!==!1;);return se}function t5(se,be){for(var ve=se==null?0:se.length;ve--&&be(se[ve],ve,se)!==!1;);return se}function Tb(se,be){for(var ve=-1,Ge=se==null?0:se.length;++ve<Ge;)if(!be(se[ve],ve,se))return!1;return!0}function oo(se,be){for(var ve=-1,Ge=se==null?0:se.length,at=0,Et=[];++ve<Ge;){var gi=se[ve];be(gi,ve,se)&&(Et[at++]=gi)}return Et}function Nl(se,be){var ve=se==null?0:se.length;return!!ve&&pa(se,be,0)>-1}function kd(se,be,ve){for(var Ge=-1,at=se==null?0:se.length;++Ge<at;)if(ve(be,se[Ge]))return!0;return!1}function qt(se,be){for(var ve=-1,Ge=se==null?0:se.length,at=Array(Ge);++ve<Ge;)at[ve]=be(se[ve],ve,se);return at}function ao(se,be){for(var ve=-1,Ge=be.length,at=se.length;++ve<Ge;)se[at+ve]=be[ve];return se}function Vd(se,be,ve,Ge){var at=-1,Et=se==null?0:se.length;for(Ge&&Et&&(ve=se[++at]);++at<Et;)ve=be(ve,se[at],at,se);return ve}function i5(se,be,ve,Ge){var at=se==null?0:se.length;for(Ge&&at&&(ve=se[--at]);at--;)ve=be(ve,se[at],at,se);return ve}function zd(se,be){for(var ve=-1,Ge=se==null?0:se.length;++ve<Ge;)if(be(se[ve],ve,se))return!0;return!1}var n5=Gd("length");function r5(se){return se.split("")}function o5(se){return se.match(pS)||[]}function Ib(se,be,ve){var Ge;return ve(se,function(at,Et,gi){if(be(at,Et,gi))return Ge=Et,!1}),Ge}function kl(se,be,ve,Ge){for(var at=se.length,Et=ve+(Ge?1:-1);Ge?Et--:++Et<at;)if(be(se[Et],Et,se))return Et;return-1}function pa(se,be,ve){return be===be?g5(se,be,ve):kl(se,Ab,ve)}function a5(se,be,ve,Ge){for(var at=ve-1,Et=se.length;++at<Et;)if(Ge(se[at],be))return at;return-1}function Ab(se){return se!==se}function Db(se,be){var ve=se==null?0:se.length;return ve?Hd(se,be)/ve:N}function Gd(se){return function(be){return be==null?i:be[se]}}function Ud(se){return function(be){return se==null?i:se[be]}}function Lb(se,be,ve,Ge,at){return at(se,function(Et,gi,Dt){ve=Ge?(Ge=!1,Et):be(ve,Et,gi,Dt)}),ve}function s5(se,be){var ve=se.length;for(se.sort(be);ve--;)se[ve]=se[ve].value;return se}function Hd(se,be){for(var ve,Ge=-1,at=se.length;++Ge<at;){var Et=be(se[Ge]);Et!==i&&(ve=ve===i?Et:ve+Et)}return ve}function Wd(se,be){for(var ve=-1,Ge=Array(se);++ve<se;)Ge[ve]=be(ve);return Ge}function l5(se,be){return qt(be,function(ve){return[ve,se[ve]]})}function Bb(se){return se&&se.slice(0,jb(se)+1).replace(vr,"")}function gn(se){return function(be){return se(be)}}function qd(se,be){return qt(be,function(ve){return se[ve]})}function us(se,be){return se.has(be)}function Rb(se,be){for(var ve=-1,Ge=se.length;++ve<Ge&&pa(be,se[ve],0)>-1;);return ve}function Fb(se,be){for(var ve=se.length;ve--&&pa(be,se[ve],0)>-1;);return ve}function u5(se,be){for(var ve=se.length,Ge=0;ve--;)se[ve]===be&&++Ge;return Ge}var c5=Ud(qS),d5=Ud(ZS);function h5(se){return"\\"+JS[se]}function p5(se,be){return se==null?i:se[be]}function ma(se){return GS.test(se)}function m5(se){return US.test(se)}function f5(se){for(var be,ve=[];!(be=se.next()).done;)ve.push(be.value);return ve}function Zd(se){var be=-1,ve=Array(se.size);return se.forEach(function(Ge,at){ve[++be]=[at,Ge]}),ve}function $b(se,be){return function(ve){return se(be(ve))}}function so(se,be){for(var ve=-1,Ge=se.length,at=0,Et=[];++ve<Ge;){var gi=se[ve];(gi===be||gi===h)&&(se[ve]=h,Et[at++]=ve)}return Et}function Vl(se){var be=-1,ve=Array(se.size);return se.forEach(function(Ge){ve[++be]=Ge}),ve}function v5(se){var be=-1,ve=Array(se.size);return se.forEach(function(Ge){ve[++be]=[Ge,Ge]}),ve}function g5(se,be,ve){for(var Ge=ve-1,at=se.length;++Ge<at;)if(se[Ge]===be)return Ge;return-1}function y5(se,be,ve){for(var Ge=ve+1;Ge--;)if(se[Ge]===be)return Ge;return Ge}function fa(se){return ma(se)?C5(se):n5(se)}function Kn(se){return ma(se)?_5(se):r5(se)}function jb(se){for(var be=se.length;be--&&ls.test(se.charAt(be)););return be}var b5=Ud(QS);function C5(se){for(var be=$d.lastIndex=0;$d.test(se);)++be;return be}function _5(se){return se.match($d)||[]}function w5(se){return se.match(zS)||[]}var x5=function se(be){be=be==null?Ai:va.defaults(Ai.Object(),be,va.pick(Ai,HS));var ve=be.Array,Ge=be.Date,at=be.Error,Et=be.Function,gi=be.Math,Dt=be.Object,Qd=be.RegExp,E5=be.String,Bn=be.TypeError,zl=ve.prototype,P5=Et.prototype,ga=Dt.prototype,Gl=be["__core-js_shared__"],Ul=P5.toString,It=ga.hasOwnProperty,O5=0,Nb=function(){var o=/[^.]+$/.exec(Gl&&Gl.keys&&Gl.keys.IE_PROTO||"");return o?"Symbol(src)_1."+o:""}(),Hl=ga.toString,M5=Ul.call(Dt),S5=Ai._,T5=Qd("^"+Ul.call(It).replace(Yt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wl=wb?be.Buffer:i,lo=be.Symbol,ql=be.Uint8Array,kb=Wl?Wl.allocUnsafe:i,Zl=$b(Dt.getPrototypeOf,Dt),Vb=Dt.create,zb=ga.propertyIsEnumerable,Ql=zl.splice,Gb=lo?lo.isConcatSpreadable:i,cs=lo?lo.iterator:i,Bo=lo?lo.toStringTag:i,Jl=function(){try{var o=No(Dt,"defineProperty");return o({},"",{}),o}catch(u){}}(),I5=be.clearTimeout!==Ai.clearTimeout&&be.clearTimeout,A5=Ge&&Ge.now!==Ai.Date.now&&Ge.now,D5=be.setTimeout!==Ai.setTimeout&&be.setTimeout,Xl=gi.ceil,Yl=gi.floor,Jd=Dt.getOwnPropertySymbols,L5=Wl?Wl.isBuffer:i,Ub=be.isFinite,B5=zl.join,R5=$b(Dt.keys,Dt),yi=gi.max,ki=gi.min,F5=Ge.now,$5=be.parseInt,Hb=gi.random,j5=zl.reverse,Xd=No(be,"DataView"),ds=No(be,"Map"),Yd=No(be,"Promise"),ya=No(be,"Set"),hs=No(be,"WeakMap"),ps=No(Dt,"create"),Kl=hs&&new hs,ba={},N5=ko(Xd),k5=ko(ds),V5=ko(Yd),z5=ko(ya),G5=ko(hs),eu=lo?lo.prototype:i,ms=eu?eu.valueOf:i,Wb=eu?eu.toString:i;function k(o){if(ti(o)&&!st(o)&&!(o instanceof vt)){if(o instanceof Rn)return o;if(It.call(o,"__wrapped__"))return ZC(o)}return new Rn(o)}var Ca=function(){function o(){}return function(u){if(!Kt(u))return{};if(Vb)return Vb(u);o.prototype=u;var m=new o;return o.prototype=i,m}}();function tu(){}function Rn(o,u){this.__wrapped__=o,this.__actions__=[],this.__chain__=!!u,this.__index__=0,this.__values__=i}k.templateSettings={escape:Tt,evaluate:Dl,interpolate:Nt,variable:"",imports:{_:k}},k.prototype=tu.prototype,k.prototype.constructor=k,Rn.prototype=Ca(tu.prototype),Rn.prototype.constructor=Rn;function vt(o){this.__wrapped__=o,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function U5(){var o=new vt(this.__wrapped__);return o.__actions__=tn(this.__actions__),o.__dir__=this.__dir__,o.__filtered__=this.__filtered__,o.__iteratees__=tn(this.__iteratees__),o.__takeCount__=this.__takeCount__,o.__views__=tn(this.__views__),o}function H5(){if(this.__filtered__){var o=new vt(this);o.__dir__=-1,o.__filtered__=!0}else o=this.clone(),o.__dir__*=-1;return o}function W5(){var o=this.__wrapped__.value(),u=this.__dir__,m=st(o),x=u<0,B=m?o.length:0,W=rT(0,B,this.__views__),ee=W.start,oe=W.end,ue=oe-ee,we=x?oe:ee-1,xe=this.__iteratees__,Oe=xe.length,Ne=0,qe=ki(ue,this.__takeCount__);if(!m||!x&&B==ue&&qe==ue)return vC(o,this.__actions__);var et=[];e:for(;ue--&&Ne<qe;){we+=u;for(var ct=-1,tt=o[we];++ct<Oe;){var mt=xe[ct],gt=mt.iteratee,Cn=mt.type,qi=gt(tt);if(Cn==E)tt=qi;else if(!qi){if(Cn==b)continue e;break e}}et[Ne++]=tt}return et}vt.prototype=Ca(tu.prototype),vt.prototype.constructor=vt;function Ro(o){var u=-1,m=o==null?0:o.length;for(this.clear();++u<m;){var x=o[u];this.set(x[0],x[1])}}function q5(){this.__data__=ps?ps(null):{},this.size=0}function Z5(o){var u=this.has(o)&&delete this.__data__[o];return this.size-=u?1:0,u}function Q5(o){var u=this.__data__;if(ps){var m=u[o];return m===c?i:m}return It.call(u,o)?u[o]:i}function J5(o){var u=this.__data__;return ps?u[o]!==i:It.call(u,o)}function X5(o,u){var m=this.__data__;return this.size+=this.has(o)?0:1,m[o]=ps&&u===i?c:u,this}Ro.prototype.clear=q5,Ro.prototype.delete=Z5,Ro.prototype.get=Q5,Ro.prototype.has=J5,Ro.prototype.set=X5;function Br(o){var u=-1,m=o==null?0:o.length;for(this.clear();++u<m;){var x=o[u];this.set(x[0],x[1])}}function Y5(){this.__data__=[],this.size=0}function K5(o){var u=this.__data__,m=iu(u,o);if(m<0)return!1;var x=u.length-1;return m==x?u.pop():Ql.call(u,m,1),--this.size,!0}function e3(o){var u=this.__data__,m=iu(u,o);return m<0?i:u[m][1]}function t3(o){return iu(this.__data__,o)>-1}function i3(o,u){var m=this.__data__,x=iu(m,o);return x<0?(++this.size,m.push([o,u])):m[x][1]=u,this}Br.prototype.clear=Y5,Br.prototype.delete=K5,Br.prototype.get=e3,Br.prototype.has=t3,Br.prototype.set=i3;function Rr(o){var u=-1,m=o==null?0:o.length;for(this.clear();++u<m;){var x=o[u];this.set(x[0],x[1])}}function n3(){this.size=0,this.__data__={hash:new Ro,map:new(ds||Br),string:new Ro}}function r3(o){var u=mu(this,o).delete(o);return this.size-=u?1:0,u}function o3(o){return mu(this,o).get(o)}function a3(o){return mu(this,o).has(o)}function s3(o,u){var m=mu(this,o),x=m.size;return m.set(o,u),this.size+=m.size==x?0:1,this}Rr.prototype.clear=n3,Rr.prototype.delete=r3,Rr.prototype.get=o3,Rr.prototype.has=a3,Rr.prototype.set=s3;function Fo(o){var u=-1,m=o==null?0:o.length;for(this.__data__=new Rr;++u<m;)this.add(o[u])}function l3(o){return this.__data__.set(o,c),this}function u3(o){return this.__data__.has(o)}Fo.prototype.add=Fo.prototype.push=l3,Fo.prototype.has=u3;function er(o){var u=this.__data__=new Br(o);this.size=u.size}function c3(){this.__data__=new Br,this.size=0}function d3(o){var u=this.__data__,m=u.delete(o);return this.size=u.size,m}function h3(o){return this.__data__.get(o)}function p3(o){return this.__data__.has(o)}function m3(o,u){var m=this.__data__;if(m instanceof Br){var x=m.__data__;if(!ds||x.length<r-1)return x.push([o,u]),this.size=++m.size,this;m=this.__data__=new Rr(x)}return m.set(o,u),this.size=m.size,this}er.prototype.clear=c3,er.prototype.delete=d3,er.prototype.get=h3,er.prototype.has=p3,er.prototype.set=m3;function qb(o,u){var m=st(o),x=!m&&Vo(o),B=!m&&!x&&mo(o),W=!m&&!x&&!B&&Ea(o),ee=m||x||B||W,oe=ee?Wd(o.length,E5):[],ue=oe.length;for(var we in o)(u||It.call(o,we))&&!(ee&&(we=="length"||B&&(we=="offset"||we=="parent")||W&&(we=="buffer"||we=="byteLength"||we=="byteOffset")||Nr(we,ue)))&&oe.push(we);return oe}function Zb(o){var u=o.length;return u?o[uh(0,u-1)]:i}function f3(o,u){return fu(tn(o),$o(u,0,o.length))}function v3(o){return fu(tn(o))}function Kd(o,u,m){(m!==i&&!tr(o[u],m)||m===i&&!(u in o))&&Fr(o,u,m)}function fs(o,u,m){var x=o[u];(!(It.call(o,u)&&tr(x,m))||m===i&&!(u in o))&&Fr(o,u,m)}function iu(o,u){for(var m=o.length;m--;)if(tr(o[m][0],u))return m;return-1}function g3(o,u,m,x){return uo(o,function(B,W,ee){u(x,B,m(B),ee)}),x}function Qb(o,u){return o&&yr(u,Pi(u),o)}function y3(o,u){return o&&yr(u,rn(u),o)}function Fr(o,u,m){u=="__proto__"&&Jl?Jl(o,u,{configurable:!0,enumerable:!0,value:m,writable:!0}):o[u]=m}function eh(o,u){for(var m=-1,x=u.length,B=ve(x),W=o==null;++m<x;)B[m]=W?i:Bh(o,u[m]);return B}function $o(o,u,m){return o===o&&(m!==i&&(o=o<=m?o:m),u!==i&&(o=o>=u?o:u)),o}function Fn(o,u,m,x,B,W){var ee,oe=u&p,ue=u&f,we=u&v;if(m&&(ee=B?m(o,x,B,W):m(o)),ee!==i)return ee;if(!Kt(o))return o;var xe=st(o);if(xe){if(ee=aT(o),!oe)return tn(o,ee)}else{var Oe=Vi(o),Ne=Oe==ae||Oe==ne;if(mo(o))return bC(o,oe);if(Oe==Ce||Oe==K||Ne&&!B){if(ee=ue||Ne?{}:NC(o),!oe)return ue?Q3(o,y3(ee,o)):Z3(o,Qb(ee,o))}else{if(!Rt[Oe])return B?o:{};ee=sT(o,Oe,oe)}}W||(W=new er);var qe=W.get(o);if(qe)return qe;W.set(o,ee),m_(o)?o.forEach(function(tt){ee.add(Fn(tt,u,m,tt,o,W))}):h_(o)&&o.forEach(function(tt,mt){ee.set(mt,Fn(tt,u,m,mt,o,W))});var et=we?ue?Ch:bh:ue?rn:Pi,ct=xe?i:et(o);return Ln(ct||o,function(tt,mt){ct&&(mt=tt,tt=o[mt]),fs(ee,mt,Fn(tt,u,m,mt,o,W))}),ee}function b3(o){var u=Pi(o);return function(m){return Jb(m,o,u)}}function Jb(o,u,m){var x=m.length;if(o==null)return!x;for(o=Dt(o);x--;){var B=m[x],W=u[B],ee=o[B];if(ee===i&&!(B in o)||!W(ee))return!1}return!0}function Xb(o,u,m){if(typeof o!="function")throw new Bn(s);return ws(function(){o.apply(i,m)},u)}function vs(o,u,m,x){var B=-1,W=Nl,ee=!0,oe=o.length,ue=[],we=u.length;if(!oe)return ue;m&&(u=qt(u,gn(m))),x?(W=kd,ee=!1):u.length>=r&&(W=us,ee=!1,u=new Fo(u));e:for(;++B<oe;){var xe=o[B],Oe=m==null?xe:m(xe);if(xe=x||xe!==0?xe:0,ee&&Oe===Oe){for(var Ne=we;Ne--;)if(u[Ne]===Oe)continue e;ue.push(xe)}else W(u,Oe,x)||ue.push(xe)}return ue}var uo=EC(gr),Yb=EC(ih,!0);function C3(o,u){var m=!0;return uo(o,function(x,B,W){return m=!!u(x,B,W),m}),m}function nu(o,u,m){for(var x=-1,B=o.length;++x<B;){var W=o[x],ee=u(W);if(ee!=null&&(oe===i?ee===ee&&!bn(ee):m(ee,oe)))var oe=ee,ue=W}return ue}function _3(o,u,m,x){var B=o.length;for(m=ut(m),m<0&&(m=-m>B?0:B+m),x=x===i||x>B?B:ut(x),x<0&&(x+=B),x=m>x?0:v_(x);m<x;)o[m++]=u;return o}function Kb(o,u){var m=[];return uo(o,function(x,B,W){u(x,B,W)&&m.push(x)}),m}function Di(o,u,m,x,B){var W=-1,ee=o.length;for(m||(m=uT),B||(B=[]);++W<ee;){var oe=o[W];u>0&&m(oe)?u>1?Di(oe,u-1,m,x,B):ao(B,oe):x||(B[B.length]=oe)}return B}var th=PC(),eC=PC(!0);function gr(o,u){return o&&th(o,u,Pi)}function ih(o,u){return o&&eC(o,u,Pi)}function ru(o,u){return oo(u,function(m){return kr(o[m])})}function jo(o,u){u=ho(u,o);for(var m=0,x=u.length;o!=null&&m<x;)o=o[br(u[m++])];return m&&m==x?o:i}function tC(o,u,m){var x=u(o);return st(o)?x:ao(x,m(o))}function Hi(o){return o==null?o===i?Ie:pe:Bo&&Bo in Dt(o)?nT(o):vT(o)}function nh(o,u){return o>u}function w3(o,u){return o!=null&&It.call(o,u)}function x3(o,u){return o!=null&&u in Dt(o)}function E3(o,u,m){return o>=ki(u,m)&&o<yi(u,m)}function rh(o,u,m){for(var x=m?kd:Nl,B=o[0].length,W=o.length,ee=W,oe=ve(W),ue=1/0,we=[];ee--;){var xe=o[ee];ee&&u&&(xe=qt(xe,gn(u))),ue=ki(xe.length,ue),oe[ee]=!m&&(u||B>=120&&xe.length>=120)?new Fo(ee&&xe):i}xe=o[0];var Oe=-1,Ne=oe[0];e:for(;++Oe<B&&we.length<ue;){var qe=xe[Oe],et=u?u(qe):qe;if(qe=m||qe!==0?qe:0,!(Ne?us(Ne,et):x(we,et,m))){for(ee=W;--ee;){var ct=oe[ee];if(!(ct?us(ct,et):x(o[ee],et,m)))continue e}Ne&&Ne.push(et),we.push(qe)}}return we}function P3(o,u,m,x){return gr(o,function(B,W,ee){u(x,m(B),W,ee)}),x}function gs(o,u,m){u=ho(u,o),o=GC(o,u);var x=o==null?o:o[br(jn(u))];return x==null?i:vn(x,o,m)}function iC(o){return ti(o)&&Hi(o)==K}function O3(o){return ti(o)&&Hi(o)==_e}function M3(o){return ti(o)&&Hi(o)==re}function ys(o,u,m,x,B){return o===u?!0:o==null||u==null||!ti(o)&&!ti(u)?o!==o&&u!==u:S3(o,u,m,x,ys,B)}function S3(o,u,m,x,B,W){var ee=st(o),oe=st(u),ue=ee?Z:Vi(o),we=oe?Z:Vi(u);ue=ue==K?Ce:ue,we=we==K?Ce:we;var xe=ue==Ce,Oe=we==Ce,Ne=ue==we;if(Ne&&mo(o)){if(!mo(u))return!1;ee=!0,xe=!1}if(Ne&&!xe)return W||(W=new er),ee||Ea(o)?FC(o,u,m,x,B,W):tT(o,u,ue,m,x,B,W);if(!(m&y)){var qe=xe&&It.call(o,"__wrapped__"),et=Oe&&It.call(u,"__wrapped__");if(qe||et){var ct=qe?o.value():o,tt=et?u.value():u;return W||(W=new er),B(ct,tt,m,x,W)}}return Ne?(W||(W=new er),iT(o,u,m,x,B,W)):!1}function T3(o){return ti(o)&&Vi(o)==ce}function oh(o,u,m,x){var B=m.length,W=B,ee=!x;if(o==null)return!W;for(o=Dt(o);B--;){var oe=m[B];if(ee&&oe[2]?oe[1]!==o[oe[0]]:!(oe[0]in o))return!1}for(;++B<W;){oe=m[B];var ue=oe[0],we=o[ue],xe=oe[1];if(ee&&oe[2]){if(we===i&&!(ue in o))return!1}else{var Oe=new er;if(x)var Ne=x(we,xe,ue,o,u,Oe);if(!(Ne===i?ys(xe,we,y|w,x,Oe):Ne))return!1}}return!0}function nC(o){if(!Kt(o)||dT(o))return!1;var u=kr(o)?T5:bS;return u.test(ko(o))}function I3(o){return ti(o)&&Hi(o)==Me}function A3(o){return ti(o)&&Vi(o)==Te}function D3(o){return ti(o)&&_u(o.length)&&!!kt[Hi(o)]}function rC(o){return typeof o=="function"?o:o==null?on:typeof o=="object"?st(o)?sC(o[0],o[1]):aC(o):M_(o)}function ah(o){if(!_s(o))return R5(o);var u=[];for(var m in Dt(o))It.call(o,m)&&m!="constructor"&&u.push(m);return u}function L3(o){if(!Kt(o))return fT(o);var u=_s(o),m=[];for(var x in o)x=="constructor"&&(u||!It.call(o,x))||m.push(x);return m}function sh(o,u){return o<u}function oC(o,u){var m=-1,x=nn(o)?ve(o.length):[];return uo(o,function(B,W,ee){x[++m]=u(B,W,ee)}),x}function aC(o){var u=wh(o);return u.length==1&&u[0][2]?VC(u[0][0],u[0][1]):function(m){return m===o||oh(m,o,u)}}function sC(o,u){return Eh(o)&&kC(u)?VC(br(o),u):function(m){var x=Bh(m,o);return x===i&&x===u?Rh(m,o):ys(u,x,y|w)}}function ou(o,u,m,x,B){o!==u&&th(u,function(W,ee){if(B||(B=new er),Kt(W))B3(o,u,ee,m,ou,x,B);else{var oe=x?x(Oh(o,ee),W,ee+"",o,u,B):i;oe===i&&(oe=W),Kd(o,ee,oe)}},rn)}function B3(o,u,m,x,B,W,ee){var oe=Oh(o,m),ue=Oh(u,m),we=ee.get(ue);if(we){Kd(o,m,we);return}var xe=W?W(oe,ue,m+"",o,u,ee):i,Oe=xe===i;if(Oe){var Ne=st(ue),qe=!Ne&&mo(ue),et=!Ne&&!qe&&Ea(ue);xe=ue,Ne||qe||et?st(oe)?xe=oe:ci(oe)?xe=tn(oe):qe?(Oe=!1,xe=bC(ue,!0)):et?(Oe=!1,xe=CC(ue,!0)):xe=[]:xs(ue)||Vo(ue)?(xe=oe,Vo(oe)?xe=g_(oe):(!Kt(oe)||kr(oe))&&(xe=NC(ue))):Oe=!1}Oe&&(ee.set(ue,xe),B(xe,ue,x,W,ee),ee.delete(ue)),Kd(o,m,xe)}function lC(o,u){var m=o.length;if(m)return u+=u<0?m:0,Nr(u,m)?o[u]:i}function uC(o,u,m){u.length?u=qt(u,function(W){return st(W)?function(ee){return jo(ee,W.length===1?W[0]:W)}:W}):u=[on];var x=-1;u=qt(u,gn(Ye()));var B=oC(o,function(W,ee,oe){var ue=qt(u,function(we){return we(W)});return{criteria:ue,index:++x,value:W}});return s5(B,function(W,ee){return q3(W,ee,m)})}function R3(o,u){return cC(o,u,function(m,x){return Rh(o,x)})}function cC(o,u,m){for(var x=-1,B=u.length,W={};++x<B;){var ee=u[x],oe=jo(o,ee);m(oe,ee)&&bs(W,ho(ee,o),oe)}return W}function F3(o){return function(u){return jo(u,o)}}function lh(o,u,m,x){var B=x?a5:pa,W=-1,ee=u.length,oe=o;for(o===u&&(u=tn(u)),m&&(oe=qt(o,gn(m)));++W<ee;)for(var ue=0,we=u[W],xe=m?m(we):we;(ue=B(oe,xe,ue,x))>-1;)oe!==o&&Ql.call(oe,ue,1),Ql.call(o,ue,1);return o}function dC(o,u){for(var m=o?u.length:0,x=m-1;m--;){var B=u[m];if(m==x||B!==W){var W=B;Nr(B)?Ql.call(o,B,1):hh(o,B)}}return o}function uh(o,u){return o+Yl(Hb()*(u-o+1))}function $3(o,u,m,x){for(var B=-1,W=yi(Xl((u-o)/(m||1)),0),ee=ve(W);W--;)ee[x?W:++B]=o,o+=m;return ee}function ch(o,u){var m="";if(!o||u<1||u>T)return m;do u%2&&(m+=o),u=Yl(u/2),u&&(o+=o);while(u);return m}function dt(o,u){return Mh(zC(o,u,on),o+"")}function j3(o){return Zb(Pa(o))}function N3(o,u){var m=Pa(o);return fu(m,$o(u,0,m.length))}function bs(o,u,m,x){if(!Kt(o))return o;u=ho(u,o);for(var B=-1,W=u.length,ee=W-1,oe=o;oe!=null&&++B<W;){var ue=br(u[B]),we=m;if(ue==="__proto__"||ue==="constructor"||ue==="prototype")return o;if(B!=ee){var xe=oe[ue];we=x?x(xe,ue,oe):i,we===i&&(we=Kt(xe)?xe:Nr(u[B+1])?[]:{})}fs(oe,ue,we),oe=oe[ue]}return o}var hC=Kl?function(o,u){return Kl.set(o,u),o}:on,k3=Jl?function(o,u){return Jl(o,"toString",{configurable:!0,enumerable:!1,value:$h(u),writable:!0})}:on;function V3(o){return fu(Pa(o))}function $n(o,u,m){var x=-1,B=o.length;u<0&&(u=-u>B?0:B+u),m=m>B?B:m,m<0&&(m+=B),B=u>m?0:m-u>>>0,u>>>=0;for(var W=ve(B);++x<B;)W[x]=o[x+u];return W}function z3(o,u){var m;return uo(o,function(x,B,W){return m=u(x,B,W),!m}),!!m}function au(o,u,m){var x=0,B=o==null?x:o.length;if(typeof u=="number"&&u===u&&B<=te){for(;x<B;){var W=x+B>>>1,ee=o[W];ee!==null&&!bn(ee)&&(m?ee<=u:ee<u)?x=W+1:B=W}return B}return dh(o,u,on,m)}function dh(o,u,m,x){var B=0,W=o==null?0:o.length;if(W===0)return 0;u=m(u);for(var ee=u!==u,oe=u===null,ue=bn(u),we=u===i;B<W;){var xe=Yl((B+W)/2),Oe=m(o[xe]),Ne=Oe!==i,qe=Oe===null,et=Oe===Oe,ct=bn(Oe);if(ee)var tt=x||et;else we?tt=et&&(x||Ne):oe?tt=et&&Ne&&(x||!qe):ue?tt=et&&Ne&&!qe&&(x||!ct):qe||ct?tt=!1:tt=x?Oe<=u:Oe<u;tt?B=xe+1:W=xe}return ki(W,U)}function pC(o,u){for(var m=-1,x=o.length,B=0,W=[];++m<x;){var ee=o[m],oe=u?u(ee):ee;if(!m||!tr(oe,ue)){var ue=oe;W[B++]=ee===0?0:ee}}return W}function mC(o){return typeof o=="number"?o:bn(o)?N:+o}function yn(o){if(typeof o=="string")return o;if(st(o))return qt(o,yn)+"";if(bn(o))return Wb?Wb.call(o):"";var u=o+"";return u=="0"&&1/o==-P?"-0":u}function co(o,u,m){var x=-1,B=Nl,W=o.length,ee=!0,oe=[],ue=oe;if(m)ee=!1,B=kd;else if(W>=r){var we=u?null:K3(o);if(we)return Vl(we);ee=!1,B=us,ue=new Fo}else ue=u?[]:oe;e:for(;++x<W;){var xe=o[x],Oe=u?u(xe):xe;if(xe=m||xe!==0?xe:0,ee&&Oe===Oe){for(var Ne=ue.length;Ne--;)if(ue[Ne]===Oe)continue e;u&&ue.push(Oe),oe.push(xe)}else B(ue,Oe,m)||(ue!==oe&&ue.push(Oe),oe.push(xe))}return oe}function hh(o,u){return u=ho(u,o),o=GC(o,u),o==null||delete o[br(jn(u))]}function fC(o,u,m,x){return bs(o,u,m(jo(o,u)),x)}function su(o,u,m,x){for(var B=o.length,W=x?B:-1;(x?W--:++W<B)&&u(o[W],W,o););return m?$n(o,x?0:W,x?W+1:B):$n(o,x?W+1:0,x?B:W)}function vC(o,u){var m=o;return m instanceof vt&&(m=m.value()),Vd(u,function(x,B){return B.func.apply(B.thisArg,ao([x],B.args))},m)}function ph(o,u,m){var x=o.length;if(x<2)return x?co(o[0]):[];for(var B=-1,W=ve(x);++B<x;)for(var ee=o[B],oe=-1;++oe<x;)oe!=B&&(W[B]=vs(W[B]||ee,o[oe],u,m));return co(Di(W,1),u,m)}function gC(o,u,m){for(var x=-1,B=o.length,W=u.length,ee={};++x<B;){var oe=x<W?u[x]:i;m(ee,o[x],oe)}return ee}function mh(o){return ci(o)?o:[]}function fh(o){return typeof o=="function"?o:on}function ho(o,u){return st(o)?o:Eh(o,u)?[o]:qC(Pt(o))}var G3=dt;function po(o,u,m){var x=o.length;return m=m===i?x:m,!u&&m>=x?o:$n(o,u,m)}var yC=I5||function(o){return Ai.clearTimeout(o)};function bC(o,u){if(u)return o.slice();var m=o.length,x=kb?kb(m):new o.constructor(m);return o.copy(x),x}function vh(o){var u=new o.constructor(o.byteLength);return new ql(u).set(new ql(o)),u}function U3(o,u){var m=u?vh(o.buffer):o.buffer;return new o.constructor(m,o.byteOffset,o.byteLength)}function H3(o){var u=new o.constructor(o.source,ib.exec(o));return u.lastIndex=o.lastIndex,u}function W3(o){return ms?Dt(ms.call(o)):{}}function CC(o,u){var m=u?vh(o.buffer):o.buffer;return new o.constructor(m,o.byteOffset,o.length)}function _C(o,u){if(o!==u){var m=o!==i,x=o===null,B=o===o,W=bn(o),ee=u!==i,oe=u===null,ue=u===u,we=bn(u);if(!oe&&!we&&!W&&o>u||W&&ee&&ue&&!oe&&!we||x&&ee&&ue||!m&&ue||!B)return 1;if(!x&&!W&&!we&&o<u||we&&m&&B&&!x&&!W||oe&&m&&B||!ee&&B||!ue)return-1}return 0}function q3(o,u,m){for(var x=-1,B=o.criteria,W=u.criteria,ee=B.length,oe=m.length;++x<ee;){var ue=_C(B[x],W[x]);if(ue){if(x>=oe)return ue;var we=m[x];return ue*(we=="desc"?-1:1)}}return o.index-u.index}function wC(o,u,m,x){for(var B=-1,W=o.length,ee=m.length,oe=-1,ue=u.length,we=yi(W-ee,0),xe=ve(ue+we),Oe=!x;++oe<ue;)xe[oe]=u[oe];for(;++B<ee;)(Oe||B<W)&&(xe[m[B]]=o[B]);for(;we--;)xe[oe++]=o[B++];return xe}function xC(o,u,m,x){for(var B=-1,W=o.length,ee=-1,oe=m.length,ue=-1,we=u.length,xe=yi(W-oe,0),Oe=ve(xe+we),Ne=!x;++B<xe;)Oe[B]=o[B];for(var qe=B;++ue<we;)Oe[qe+ue]=u[ue];for(;++ee<oe;)(Ne||B<W)&&(Oe[qe+m[ee]]=o[B++]);return Oe}function tn(o,u){var m=-1,x=o.length;for(u||(u=ve(x));++m<x;)u[m]=o[m];return u}function yr(o,u,m,x){var B=!m;m||(m={});for(var W=-1,ee=u.length;++W<ee;){var oe=u[W],ue=x?x(m[oe],o[oe],oe,m,o):i;ue===i&&(ue=o[oe]),B?Fr(m,oe,ue):fs(m,oe,ue)}return m}function Z3(o,u){return yr(o,xh(o),u)}function Q3(o,u){return yr(o,$C(o),u)}function lu(o,u){return function(m,x){var B=st(m)?e5:g3,W=u?u():{};return B(m,o,Ye(x,2),W)}}function _a(o){return dt(function(u,m){var x=-1,B=m.length,W=B>1?m[B-1]:i,ee=B>2?m[2]:i;for(W=o.length>3&&typeof W=="function"?(B--,W):i,ee&&Wi(m[0],m[1],ee)&&(W=B<3?i:W,B=1),u=Dt(u);++x<B;){var oe=m[x];oe&&o(u,oe,x,W)}return u})}function EC(o,u){return function(m,x){if(m==null)return m;if(!nn(m))return o(m,x);for(var B=m.length,W=u?B:-1,ee=Dt(m);(u?W--:++W<B)&&x(ee[W],W,ee)!==!1;);return m}}function PC(o){return function(u,m,x){for(var B=-1,W=Dt(u),ee=x(u),oe=ee.length;oe--;){var ue=ee[o?oe:++B];if(m(W[ue],ue,W)===!1)break}return u}}function J3(o,u,m){var x=u&C,B=Cs(o);function W(){var ee=this&&this!==Ai&&this instanceof W?B:o;return ee.apply(x?m:this,arguments)}return W}function OC(o){return function(u){u=Pt(u);var m=ma(u)?Kn(u):i,x=m?m[0]:u.charAt(0),B=m?po(m,1).join(""):u.slice(1);return x[o]()+B}}function wa(o){return function(u){return Vd(P_(E_(u).replace(kS,"")),o,"")}}function Cs(o){return function(){var u=arguments;switch(u.length){case 0:return new o;case 1:return new o(u[0]);case 2:return new o(u[0],u[1]);case 3:return new o(u[0],u[1],u[2]);case 4:return new o(u[0],u[1],u[2],u[3]);case 5:return new o(u[0],u[1],u[2],u[3],u[4]);case 6:return new o(u[0],u[1],u[2],u[3],u[4],u[5]);case 7:return new o(u[0],u[1],u[2],u[3],u[4],u[5],u[6])}var m=Ca(o.prototype),x=o.apply(m,u);return Kt(x)?x:m}}function X3(o,u,m){var x=Cs(o);function B(){for(var W=arguments.length,ee=ve(W),oe=W,ue=xa(B);oe--;)ee[oe]=arguments[oe];var we=W<3&&ee[0]!==ue&&ee[W-1]!==ue?[]:so(ee,ue);if(W-=we.length,W<m)return AC(o,u,uu,B.placeholder,i,ee,we,i,i,m-W);var xe=this&&this!==Ai&&this instanceof B?x:o;return vn(xe,this,ee)}return B}function MC(o){return function(u,m,x){var B=Dt(u);if(!nn(u)){var W=Ye(m,3);u=Pi(u),m=function(oe){return W(B[oe],oe,B)}}var ee=o(u,m,x);return ee>-1?B[W?u[ee]:ee]:i}}function SC(o){return jr(function(u){var m=u.length,x=m,B=Rn.prototype.thru;for(o&&u.reverse();x--;){var W=u[x];if(typeof W!="function")throw new Bn(s);if(B&&!ee&&pu(W)=="wrapper")var ee=new Rn([],!0)}for(x=ee?x:m;++x<m;){W=u[x];var oe=pu(W),ue=oe=="wrapper"?_h(W):i;ue&&Ph(ue[0])&&ue[1]==(V|_|I|$)&&!ue[4].length&&ue[9]==1?ee=ee[pu(ue[0])].apply(ee,ue[3]):ee=W.length==1&&Ph(W)?ee[oe]():ee.thru(W)}return function(){var we=arguments,xe=we[0];if(ee&&we.length==1&&st(xe))return ee.plant(xe).value();for(var Oe=0,Ne=m?u[Oe].apply(this,we):xe;++Oe<m;)Ne=u[Oe].call(this,Ne);return Ne}})}function uu(o,u,m,x,B,W,ee,oe,ue,we){var xe=u&V,Oe=u&C,Ne=u&M,qe=u&(_|O),et=u&D,ct=Ne?i:Cs(o);function tt(){for(var mt=arguments.length,gt=ve(mt),Cn=mt;Cn--;)gt[Cn]=arguments[Cn];if(qe)var qi=xa(tt),_n=u5(gt,qi);if(x&&(gt=wC(gt,x,B,qe)),W&&(gt=xC(gt,W,ee,qe)),mt-=_n,qe&&mt<we){var di=so(gt,qi);return AC(o,u,uu,tt.placeholder,m,gt,di,oe,ue,we-mt)}var ir=Oe?m:this,zr=Ne?ir[o]:o;return mt=gt.length,oe?gt=gT(gt,oe):et&&mt>1&&gt.reverse(),xe&&ue<mt&&(gt.length=ue),this&&this!==Ai&&this instanceof tt&&(zr=ct||Cs(zr)),zr.apply(ir,gt)}return tt}function TC(o,u){return function(m,x){return P3(m,o,u(x),{})}}function cu(o,u){return function(m,x){var B;if(m===i&&x===i)return u;if(m!==i&&(B=m),x!==i){if(B===i)return x;typeof m=="string"||typeof x=="string"?(m=yn(m),x=yn(x)):(m=mC(m),x=mC(x)),B=o(m,x)}return B}}function gh(o){return jr(function(u){return u=qt(u,gn(Ye())),dt(function(m){var x=this;return o(u,function(B){return vn(B,x,m)})})})}function du(o,u){u=u===i?" ":yn(u);var m=u.length;if(m<2)return m?ch(u,o):u;var x=ch(u,Xl(o/fa(u)));return ma(u)?po(Kn(x),0,o).join(""):x.slice(0,o)}function Y3(o,u,m,x){var B=u&C,W=Cs(o);function ee(){for(var oe=-1,ue=arguments.length,we=-1,xe=x.length,Oe=ve(xe+ue),Ne=this&&this!==Ai&&this instanceof ee?W:o;++we<xe;)Oe[we]=x[we];for(;ue--;)Oe[we++]=arguments[++oe];return vn(Ne,B?m:this,Oe)}return ee}function IC(o){return function(u,m,x){return x&&typeof x!="number"&&Wi(u,m,x)&&(m=x=i),u=Vr(u),m===i?(m=u,u=0):m=Vr(m),x=x===i?u<m?1:-1:Vr(x),$3(u,m,x,o)}}function hu(o){return function(u,m){return typeof u=="string"&&typeof m=="string"||(u=Nn(u),m=Nn(m)),o(u,m)}}function AC(o,u,m,x,B,W,ee,oe,ue,we){var xe=u&_,Oe=xe?ee:i,Ne=xe?i:ee,qe=xe?W:i,et=xe?i:W;u|=xe?I:A,u&=~(xe?A:I),u&S||(u&=~(C|M));var ct=[o,u,B,qe,Oe,et,Ne,oe,ue,we],tt=m.apply(i,ct);return Ph(o)&&UC(tt,ct),tt.placeholder=x,HC(tt,o,u)}function yh(o){var u=gi[o];return function(m,x){if(m=Nn(m),x=x==null?0:ki(ut(x),292),x&&Ub(m)){var B=(Pt(m)+"e").split("e"),W=u(B[0]+"e"+(+B[1]+x));return B=(Pt(W)+"e").split("e"),+(B[0]+"e"+(+B[1]-x))}return u(m)}}var K3=ya&&1/Vl(new ya([,-0]))[1]==P?function(o){return new ya(o)}:kh;function LC(o){return function(u){var m=Vi(u);return m==ce?Zd(u):m==Te?v5(u):l5(u,o(u))}}function $r(o,u,m,x,B,W,ee,oe){var ue=u&M;if(!ue&&typeof o!="function")throw new Bn(s);var we=x?x.length:0;if(we||(u&=~(I|A),x=B=i),ee=ee===i?ee:yi(ut(ee),0),oe=oe===i?oe:ut(oe),we-=B?B.length:0,u&A){var xe=x,Oe=B;x=B=i}var Ne=ue?i:_h(o),qe=[o,u,m,x,B,xe,Oe,W,ee,oe];if(Ne&&mT(qe,Ne),o=qe[0],u=qe[1],m=qe[2],x=qe[3],B=qe[4],oe=qe[9]=qe[9]===i?ue?0:o.length:yi(qe[9]-we,0),!oe&&u&(_|O)&&(u&=~(_|O)),!u||u==C)var et=J3(o,u,m);else u==_||u==O?et=X3(o,u,oe):(u==I||u==(C|I))&&!B.length?et=Y3(o,u,m,x):et=uu.apply(i,qe);var ct=Ne?hC:UC;return HC(ct(et,qe),o,u)}function BC(o,u,m,x){return o===i||tr(o,ga[m])&&!It.call(x,m)?u:o}function RC(o,u,m,x,B,W){return Kt(o)&&Kt(u)&&(W.set(u,o),ou(o,u,i,RC,W),W.delete(u)),o}function eT(o){return xs(o)?i:o}function FC(o,u,m,x,B,W){var ee=m&y,oe=o.length,ue=u.length;if(oe!=ue&&!(ee&&ue>oe))return!1;var we=W.get(o),xe=W.get(u);if(we&&xe)return we==u&&xe==o;var Oe=-1,Ne=!0,qe=m&w?new Fo:i;for(W.set(o,u),W.set(u,o);++Oe<oe;){var et=o[Oe],ct=u[Oe];if(x)var tt=ee?x(ct,et,Oe,u,o,W):x(et,ct,Oe,o,u,W);if(tt!==i){if(tt)continue;Ne=!1;break}if(qe){if(!zd(u,function(mt,gt){if(!us(qe,gt)&&(et===mt||B(et,mt,m,x,W)))return qe.push(gt)})){Ne=!1;break}}else if(!(et===ct||B(et,ct,m,x,W))){Ne=!1;break}}return W.delete(o),W.delete(u),Ne}function tT(o,u,m,x,B,W,ee){switch(m){case Be:if(o.byteLength!=u.byteLength||o.byteOffset!=u.byteOffset)return!1;o=o.buffer,u=u.buffer;case _e:return!(o.byteLength!=u.byteLength||!W(new ql(o),new ql(u)));case Q:case re:case le:return tr(+o,+u);case J:return o.name==u.name&&o.message==u.message;case Me:case $e:return o==u+"";case ce:var oe=Zd;case Te:var ue=x&y;if(oe||(oe=Vl),o.size!=u.size&&!ue)return!1;var we=ee.get(o);if(we)return we==u;x|=w,ee.set(o,u);var xe=FC(oe(o),oe(u),x,B,W,ee);return ee.delete(o),xe;case Le:if(ms)return ms.call(o)==ms.call(u)}return!1}function iT(o,u,m,x,B,W){var ee=m&y,oe=bh(o),ue=oe.length,we=bh(u),xe=we.length;if(ue!=xe&&!ee)return!1;for(var Oe=ue;Oe--;){var Ne=oe[Oe];if(!(ee?Ne in u:It.call(u,Ne)))return!1}var qe=W.get(o),et=W.get(u);if(qe&&et)return qe==u&&et==o;var ct=!0;W.set(o,u),W.set(u,o);for(var tt=ee;++Oe<ue;){Ne=oe[Oe];var mt=o[Ne],gt=u[Ne];if(x)var Cn=ee?x(gt,mt,Ne,u,o,W):x(mt,gt,Ne,o,u,W);if(!(Cn===i?mt===gt||B(mt,gt,m,x,W):Cn)){ct=!1;break}tt||(tt=Ne=="constructor")}if(ct&&!tt){var qi=o.constructor,_n=u.constructor;qi!=_n&&"constructor"in o&&"constructor"in u&&!(typeof qi=="function"&&qi instanceof qi&&typeof _n=="function"&&_n instanceof _n)&&(ct=!1)}return W.delete(o),W.delete(u),ct}function jr(o){return Mh(zC(o,i,XC),o+"")}function bh(o){return tC(o,Pi,xh)}function Ch(o){return tC(o,rn,$C)}var _h=Kl?function(o){return Kl.get(o)}:kh;function pu(o){for(var u=o.name+"",m=ba[u],x=It.call(ba,u)?m.length:0;x--;){var B=m[x],W=B.func;if(W==null||W==o)return B.name}return u}function xa(o){var u=It.call(k,"placeholder")?k:o;return u.placeholder}function Ye(){var o=k.iteratee||jh;return o=o===jh?rC:o,arguments.length?o(arguments[0],arguments[1]):o}function mu(o,u){var m=o.__data__;return cT(u)?m[typeof u=="string"?"string":"hash"]:m.map}function wh(o){for(var u=Pi(o),m=u.length;m--;){var x=u[m],B=o[x];u[m]=[x,B,kC(B)]}return u}function No(o,u){var m=p5(o,u);return nC(m)?m:i}function nT(o){var u=It.call(o,Bo),m=o[Bo];try{o[Bo]=i;var x=!0}catch(W){}var B=Hl.call(o);return x&&(u?o[Bo]=m:delete o[Bo]),B}var xh=Jd?function(o){return o==null?[]:(o=Dt(o),oo(Jd(o),function(u){return zb.call(o,u)}))}:Vh,$C=Jd?function(o){for(var u=[];o;)ao(u,xh(o)),o=Zl(o);return u}:Vh,Vi=Hi;(Xd&&Vi(new Xd(new ArrayBuffer(1)))!=Be||ds&&Vi(new ds)!=ce||Yd&&Vi(Yd.resolve())!=Se||ya&&Vi(new ya)!=Te||hs&&Vi(new hs)!=We)&&(Vi=function(o){var u=Hi(o),m=u==Ce?o.constructor:i,x=m?ko(m):"";if(x)switch(x){case N5:return Be;case k5:return ce;case V5:return Se;case z5:return Te;case G5:return We}return u});function rT(o,u,m){for(var x=-1,B=m.length;++x<B;){var W=m[x],ee=W.size;switch(W.type){case"drop":o+=ee;break;case"dropRight":u-=ee;break;case"take":u=ki(u,o+ee);break;case"takeRight":o=yi(o,u-ee);break}}return{start:o,end:u}}function oT(o){var u=o.match(Bl);return u?u[1].split(Rl):[]}function jC(o,u,m){u=ho(u,o);for(var x=-1,B=u.length,W=!1;++x<B;){var ee=br(u[x]);if(!(W=o!=null&&m(o,ee)))break;o=o[ee]}return W||++x!=B?W:(B=o==null?0:o.length,!!B&&_u(B)&&Nr(ee,B)&&(st(o)||Vo(o)))}function aT(o){var u=o.length,m=new o.constructor(u);return u&&typeof o[0]=="string"&&It.call(o,"index")&&(m.index=o.index,m.input=o.input),m}function NC(o){return typeof o.constructor=="function"&&!_s(o)?Ca(Zl(o)):{}}function sT(o,u,m){var x=o.constructor;switch(u){case _e:return vh(o);case Q:case re:return new x(+o);case Be:return U3(o,m);case Fe:case Bt:case vi:case Ke:case Ee:case Qe:case He:case Xe:case _t:return CC(o,m);case ce:return new x;case le:case $e:return new x(o);case Me:return H3(o);case Te:return new x;case Le:return W3(o)}}function lT(o,u){var m=u.length;if(!m)return o;var x=m-1;return u[x]=(m>1?"& ":"")+u[x],u=u.join(m>2?", ":" "),o.replace(Ll,`{
/* [wrapped with `+u+`] */
`)}function uT(o){return st(o)||Vo(o)||!!(Gb&&o&&o[Gb])}function Nr(o,u){var m=typeof o;return u=u==null?T:u,!!u&&(m=="number"||m!="symbol"&&_S.test(o))&&o>-1&&o%1==0&&o<u}function Wi(o,u,m){if(!Kt(m))return!1;var x=typeof u;return(x=="number"?nn(m)&&Nr(u,m.length):x=="string"&&u in m)?tr(m[u],o):!1}function Eh(o,u){if(st(o))return!1;var m=typeof o;return m=="number"||m=="symbol"||m=="boolean"||o==null||bn(o)?!0:Ei.test(o)||!ft.test(o)||u!=null&&o in Dt(u)}function cT(o){var u=typeof o;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?o!=="__proto__":o===null}function Ph(o){var u=pu(o),m=k[u];if(typeof m!="function"||!(u in vt.prototype))return!1;if(o===m)return!0;var x=_h(m);return!!x&&o===x[0]}function dT(o){return!!Nb&&Nb in o}var hT=Gl?kr:zh;function _s(o){var u=o&&o.constructor,m=typeof u=="function"&&u.prototype||ga;return o===m}function kC(o){return o===o&&!Kt(o)}function VC(o,u){return function(m){return m==null?!1:m[o]===u&&(u!==i||o in Dt(m))}}function pT(o){var u=bu(o,function(x){return m.size===d&&m.clear(),x}),m=u.cache;return u}function mT(o,u){var m=o[1],x=u[1],B=m|x,W=B<(C|M|V),ee=x==V&&m==_||x==V&&m==$&&o[7].length<=u[8]||x==(V|$)&&u[7].length<=u[8]&&m==_;if(!(W||ee))return o;x&C&&(o[2]=u[2],B|=m&C?0:S);var oe=u[3];if(oe){var ue=o[3];o[3]=ue?wC(ue,oe,u[4]):oe,o[4]=ue?so(o[3],h):u[4]}return oe=u[5],oe&&(ue=o[5],o[5]=ue?xC(ue,oe,u[6]):oe,o[6]=ue?so(o[5],h):u[6]),oe=u[7],oe&&(o[7]=oe),x&V&&(o[8]=o[8]==null?u[8]:ki(o[8],u[8])),o[9]==null&&(o[9]=u[9]),o[0]=u[0],o[1]=B,o}function fT(o){var u=[];if(o!=null)for(var m in Dt(o))u.push(m);return u}function vT(o){return Hl.call(o)}function zC(o,u,m){return u=yi(u===i?o.length-1:u,0),function(){for(var x=arguments,B=-1,W=yi(x.length-u,0),ee=ve(W);++B<W;)ee[B]=x[u+B];B=-1;for(var oe=ve(u+1);++B<u;)oe[B]=x[B];return oe[u]=m(ee),vn(o,this,oe)}}function GC(o,u){return u.length<2?o:jo(o,$n(u,0,-1))}function gT(o,u){for(var m=o.length,x=ki(u.length,m),B=tn(o);x--;){var W=u[x];o[x]=Nr(W,m)?B[W]:i}return o}function Oh(o,u){if(!(u==="constructor"&&typeof o[u]=="function")&&u!="__proto__")return o[u]}var UC=WC(hC),ws=D5||function(o,u){return Ai.setTimeout(o,u)},Mh=WC(k3);function HC(o,u,m){var x=u+"";return Mh(o,lT(x,yT(oT(x),m)))}function WC(o){var u=0,m=0;return function(){var x=F5(),B=g-(x-m);if(m=x,B>0){if(++u>=H)return arguments[0]}else u=0;return o.apply(i,arguments)}}function fu(o,u){var m=-1,x=o.length,B=x-1;for(u=u===i?x:u;++m<u;){var W=uh(m,B),ee=o[W];o[W]=o[m],o[m]=ee}return o.length=u,o}var qC=pT(function(o){var u=[];return o.charCodeAt(0)===46&&u.push(""),o.replace(Ct,function(m,x,B,W){u.push(B?W.replace(fS,"$1"):x||m)}),u});function br(o){if(typeof o=="string"||bn(o))return o;var u=o+"";return u=="0"&&1/o==-P?"-0":u}function ko(o){if(o!=null){try{return Ul.call(o)}catch(u){}try{return o+""}catch(u){}}return""}function yT(o,u){return Ln(ie,function(m){var x="_."+m[0];u&m[1]&&!Nl(o,x)&&o.push(x)}),o.sort()}function ZC(o){if(o instanceof vt)return o.clone();var u=new Rn(o.__wrapped__,o.__chain__);return u.__actions__=tn(o.__actions__),u.__index__=o.__index__,u.__values__=o.__values__,u}function bT(o,u,m){(m?Wi(o,u,m):u===i)?u=1:u=yi(ut(u),0);var x=o==null?0:o.length;if(!x||u<1)return[];for(var B=0,W=0,ee=ve(Xl(x/u));B<x;)ee[W++]=$n(o,B,B+=u);return ee}function CT(o){for(var u=-1,m=o==null?0:o.length,x=0,B=[];++u<m;){var W=o[u];W&&(B[x++]=W)}return B}function _T(){var o=arguments.length;if(!o)return[];for(var u=ve(o-1),m=arguments[0],x=o;x--;)u[x-1]=arguments[x];return ao(st(m)?tn(m):[m],Di(u,1))}var wT=dt(function(o,u){return ci(o)?vs(o,Di(u,1,ci,!0)):[]}),xT=dt(function(o,u){var m=jn(u);return ci(m)&&(m=i),ci(o)?vs(o,Di(u,1,ci,!0),Ye(m,2)):[]}),ET=dt(function(o,u){var m=jn(u);return ci(m)&&(m=i),ci(o)?vs(o,Di(u,1,ci,!0),i,m):[]});function PT(o,u,m){var x=o==null?0:o.length;return x?(u=m||u===i?1:ut(u),$n(o,u<0?0:u,x)):[]}function OT(o,u,m){var x=o==null?0:o.length;return x?(u=m||u===i?1:ut(u),u=x-u,$n(o,0,u<0?0:u)):[]}function MT(o,u){return o&&o.length?su(o,Ye(u,3),!0,!0):[]}function ST(o,u){return o&&o.length?su(o,Ye(u,3),!0):[]}function TT(o,u,m,x){var B=o==null?0:o.length;return B?(m&&typeof m!="number"&&Wi(o,u,m)&&(m=0,x=B),_3(o,u,m,x)):[]}function QC(o,u,m){var x=o==null?0:o.length;if(!x)return-1;var B=m==null?0:ut(m);return B<0&&(B=yi(x+B,0)),kl(o,Ye(u,3),B)}function JC(o,u,m){var x=o==null?0:o.length;if(!x)return-1;var B=x-1;return m!==i&&(B=ut(m),B=m<0?yi(x+B,0):ki(B,x-1)),kl(o,Ye(u,3),B,!0)}function XC(o){var u=o==null?0:o.length;return u?Di(o,1):[]}function IT(o){var u=o==null?0:o.length;return u?Di(o,P):[]}function AT(o,u){var m=o==null?0:o.length;return m?(u=u===i?1:ut(u),Di(o,u)):[]}function DT(o){for(var u=-1,m=o==null?0:o.length,x={};++u<m;){var B=o[u];x[B[0]]=B[1]}return x}function YC(o){return o&&o.length?o[0]:i}function LT(o,u,m){var x=o==null?0:o.length;if(!x)return-1;var B=m==null?0:ut(m);return B<0&&(B=yi(x+B,0)),pa(o,u,B)}function BT(o){var u=o==null?0:o.length;return u?$n(o,0,-1):[]}var RT=dt(function(o){var u=qt(o,mh);return u.length&&u[0]===o[0]?rh(u):[]}),FT=dt(function(o){var u=jn(o),m=qt(o,mh);return u===jn(m)?u=i:m.pop(),m.length&&m[0]===o[0]?rh(m,Ye(u,2)):[]}),$T=dt(function(o){var u=jn(o),m=qt(o,mh);return u=typeof u=="function"?u:i,u&&m.pop(),m.length&&m[0]===o[0]?rh(m,i,u):[]});function jT(o,u){return o==null?"":B5.call(o,u)}function jn(o){var u=o==null?0:o.length;return u?o[u-1]:i}function NT(o,u,m){var x=o==null?0:o.length;if(!x)return-1;var B=x;return m!==i&&(B=ut(m),B=B<0?yi(x+B,0):ki(B,x-1)),u===u?y5(o,u,B):kl(o,Ab,B,!0)}function kT(o,u){return o&&o.length?lC(o,ut(u)):i}var VT=dt(KC);function KC(o,u){return o&&o.length&&u&&u.length?lh(o,u):o}function zT(o,u,m){return o&&o.length&&u&&u.length?lh(o,u,Ye(m,2)):o}function GT(o,u,m){return o&&o.length&&u&&u.length?lh(o,u,i,m):o}var UT=jr(function(o,u){var m=o==null?0:o.length,x=eh(o,u);return dC(o,qt(u,function(B){return Nr(B,m)?+B:B}).sort(_C)),x});function HT(o,u){var m=[];if(!(o&&o.length))return m;var x=-1,B=[],W=o.length;for(u=Ye(u,3);++x<W;){var ee=o[x];u(ee,x,o)&&(m.push(ee),B.push(x))}return dC(o,B),m}function Sh(o){return o==null?o:j5.call(o)}function WT(o,u,m){var x=o==null?0:o.length;return x?(m&&typeof m!="number"&&Wi(o,u,m)?(u=0,m=x):(u=u==null?0:ut(u),m=m===i?x:ut(m)),$n(o,u,m)):[]}function qT(o,u){return au(o,u)}function ZT(o,u,m){return dh(o,u,Ye(m,2))}function QT(o,u){var m=o==null?0:o.length;if(m){var x=au(o,u);if(x<m&&tr(o[x],u))return x}return-1}function JT(o,u){return au(o,u,!0)}function XT(o,u,m){return dh(o,u,Ye(m,2),!0)}function YT(o,u){var m=o==null?0:o.length;if(m){var x=au(o,u,!0)-1;if(tr(o[x],u))return x}return-1}function KT(o){return o&&o.length?pC(o):[]}function eI(o,u){return o&&o.length?pC(o,Ye(u,2)):[]}function tI(o){var u=o==null?0:o.length;return u?$n(o,1,u):[]}function iI(o,u,m){return o&&o.length?(u=m||u===i?1:ut(u),$n(o,0,u<0?0:u)):[]}function nI(o,u,m){var x=o==null?0:o.length;return x?(u=m||u===i?1:ut(u),u=x-u,$n(o,u<0?0:u,x)):[]}function rI(o,u){return o&&o.length?su(o,Ye(u,3),!1,!0):[]}function oI(o,u){return o&&o.length?su(o,Ye(u,3)):[]}var aI=dt(function(o){return co(Di(o,1,ci,!0))}),sI=dt(function(o){var u=jn(o);return ci(u)&&(u=i),co(Di(o,1,ci,!0),Ye(u,2))}),lI=dt(function(o){var u=jn(o);return u=typeof u=="function"?u:i,co(Di(o,1,ci,!0),i,u)});function uI(o){return o&&o.length?co(o):[]}function cI(o,u){return o&&o.length?co(o,Ye(u,2)):[]}function dI(o,u){return u=typeof u=="function"?u:i,o&&o.length?co(o,i,u):[]}function Th(o){if(!(o&&o.length))return[];var u=0;return o=oo(o,function(m){if(ci(m))return u=yi(m.length,u),!0}),Wd(u,function(m){return qt(o,Gd(m))})}function e_(o,u){if(!(o&&o.length))return[];var m=Th(o);return u==null?m:qt(m,function(x){return vn(u,i,x)})}var hI=dt(function(o,u){return ci(o)?vs(o,u):[]}),pI=dt(function(o){return ph(oo(o,ci))}),mI=dt(function(o){var u=jn(o);return ci(u)&&(u=i),ph(oo(o,ci),Ye(u,2))}),fI=dt(function(o){var u=jn(o);return u=typeof u=="function"?u:i,ph(oo(o,ci),i,u)}),vI=dt(Th);function gI(o,u){return gC(o||[],u||[],fs)}function yI(o,u){return gC(o||[],u||[],bs)}var bI=dt(function(o){var u=o.length,m=u>1?o[u-1]:i;return m=typeof m=="function"?(o.pop(),m):i,e_(o,m)});function t_(o){var u=k(o);return u.__chain__=!0,u}function CI(o,u){return u(o),o}function vu(o,u){return u(o)}var _I=jr(function(o){var u=o.length,m=u?o[0]:0,x=this.__wrapped__,B=function(W){return eh(W,o)};return u>1||this.__actions__.length||!(x instanceof vt)||!Nr(m)?this.thru(B):(x=x.slice(m,+m+(u?1:0)),x.__actions__.push({func:vu,args:[B],thisArg:i}),new Rn(x,this.__chain__).thru(function(W){return u&&!W.length&&W.push(i),W}))});function wI(){return t_(this)}function xI(){return new Rn(this.value(),this.__chain__)}function EI(){this.__values__===i&&(this.__values__=f_(this.value()));var o=this.__index__>=this.__values__.length,u=o?i:this.__values__[this.__index__++];return{done:o,value:u}}function PI(){return this}function OI(o){for(var u,m=this;m instanceof tu;){var x=ZC(m);x.__index__=0,x.__values__=i,u?B.__wrapped__=x:u=x;var B=x;m=m.__wrapped__}return B.__wrapped__=o,u}function MI(){var o=this.__wrapped__;if(o instanceof vt){var u=o;return this.__actions__.length&&(u=new vt(this)),u=u.reverse(),u.__actions__.push({func:vu,args:[Sh],thisArg:i}),new Rn(u,this.__chain__)}return this.thru(Sh)}function SI(){return vC(this.__wrapped__,this.__actions__)}var TI=lu(function(o,u,m){It.call(o,m)?++o[m]:Fr(o,m,1)});function II(o,u,m){var x=st(o)?Tb:C3;return m&&Wi(o,u,m)&&(u=i),x(o,Ye(u,3))}function AI(o,u){var m=st(o)?oo:Kb;return m(o,Ye(u,3))}var DI=MC(QC),LI=MC(JC);function BI(o,u){return Di(gu(o,u),1)}function RI(o,u){return Di(gu(o,u),P)}function FI(o,u,m){return m=m===i?1:ut(m),Di(gu(o,u),m)}function i_(o,u){var m=st(o)?Ln:uo;return m(o,Ye(u,3))}function n_(o,u){var m=st(o)?t5:Yb;return m(o,Ye(u,3))}var $I=lu(function(o,u,m){It.call(o,m)?o[m].push(u):Fr(o,m,[u])});function jI(o,u,m,x){o=nn(o)?o:Pa(o),m=m&&!x?ut(m):0;var B=o.length;return m<0&&(m=yi(B+m,0)),wu(o)?m<=B&&o.indexOf(u,m)>-1:!!B&&pa(o,u,m)>-1}var NI=dt(function(o,u,m){var x=-1,B=typeof u=="function",W=nn(o)?ve(o.length):[];return uo(o,function(ee){W[++x]=B?vn(u,ee,m):gs(ee,u,m)}),W}),kI=lu(function(o,u,m){Fr(o,m,u)});function gu(o,u){var m=st(o)?qt:oC;return m(o,Ye(u,3))}function VI(o,u,m,x){return o==null?[]:(st(u)||(u=u==null?[]:[u]),m=x?i:m,st(m)||(m=m==null?[]:[m]),uC(o,u,m))}var zI=lu(function(o,u,m){o[m?0:1].push(u)},function(){return[[],[]]});function GI(o,u,m){var x=st(o)?Vd:Lb,B=arguments.length<3;return x(o,Ye(u,4),m,B,uo)}function UI(o,u,m){var x=st(o)?i5:Lb,B=arguments.length<3;return x(o,Ye(u,4),m,B,Yb)}function HI(o,u){var m=st(o)?oo:Kb;return m(o,Cu(Ye(u,3)))}function WI(o){var u=st(o)?Zb:j3;return u(o)}function qI(o,u,m){(m?Wi(o,u,m):u===i)?u=1:u=ut(u);var x=st(o)?f3:N3;return x(o,u)}function ZI(o){var u=st(o)?v3:V3;return u(o)}function QI(o){if(o==null)return 0;if(nn(o))return wu(o)?fa(o):o.length;var u=Vi(o);return u==ce||u==Te?o.size:ah(o).length}function JI(o,u,m){var x=st(o)?zd:z3;return m&&Wi(o,u,m)&&(u=i),x(o,Ye(u,3))}var XI=dt(function(o,u){if(o==null)return[];var m=u.length;return m>1&&Wi(o,u[0],u[1])?u=[]:m>2&&Wi(u[0],u[1],u[2])&&(u=[u[0]]),uC(o,Di(u,1),[])}),yu=A5||function(){return Ai.Date.now()};function YI(o,u){if(typeof u!="function")throw new Bn(s);return o=ut(o),function(){if(--o<1)return u.apply(this,arguments)}}function r_(o,u,m){return u=m?i:u,u=o&&u==null?o.length:u,$r(o,V,i,i,i,i,u)}function o_(o,u){var m;if(typeof u!="function")throw new Bn(s);return o=ut(o),function(){return--o>0&&(m=u.apply(this,arguments)),o<=1&&(u=i),m}}var Ih=dt(function(o,u,m){var x=C;if(m.length){var B=so(m,xa(Ih));x|=I}return $r(o,x,u,m,B)}),a_=dt(function(o,u,m){var x=C|M;if(m.length){var B=so(m,xa(a_));x|=I}return $r(u,x,o,m,B)});function s_(o,u,m){u=m?i:u;var x=$r(o,_,i,i,i,i,i,u);return x.placeholder=s_.placeholder,x}function l_(o,u,m){u=m?i:u;var x=$r(o,O,i,i,i,i,i,u);return x.placeholder=l_.placeholder,x}function u_(o,u,m){var x,B,W,ee,oe,ue,we=0,xe=!1,Oe=!1,Ne=!0;if(typeof o!="function")throw new Bn(s);u=Nn(u)||0,Kt(m)&&(xe=!!m.leading,Oe="maxWait"in m,W=Oe?yi(Nn(m.maxWait)||0,u):W,Ne="trailing"in m?!!m.trailing:Ne);function qe(di){var ir=x,zr=B;return x=B=i,we=di,ee=o.apply(zr,ir),ee}function et(di){return we=di,oe=ws(mt,u),xe?qe(di):ee}function ct(di){var ir=di-ue,zr=di-we,S_=u-ir;return Oe?ki(S_,W-zr):S_}function tt(di){var ir=di-ue,zr=di-we;return ue===i||ir>=u||ir<0||Oe&&zr>=W}function mt(){var di=yu();if(tt(di))return gt(di);oe=ws(mt,ct(di))}function gt(di){return oe=i,Ne&&x?qe(di):(x=B=i,ee)}function Cn(){oe!==i&&yC(oe),we=0,x=ue=B=oe=i}function qi(){return oe===i?ee:gt(yu())}function _n(){var di=yu(),ir=tt(di);if(x=arguments,B=this,ue=di,ir){if(oe===i)return et(ue);if(Oe)return yC(oe),oe=ws(mt,u),qe(ue)}return oe===i&&(oe=ws(mt,u)),ee}return _n.cancel=Cn,_n.flush=qi,_n}var KI=dt(function(o,u){return Xb(o,1,u)}),eA=dt(function(o,u,m){return Xb(o,Nn(u)||0,m)});function tA(o){return $r(o,D)}function bu(o,u){if(typeof o!="function"||u!=null&&typeof u!="function")throw new Bn(s);var m=function(){var x=arguments,B=u?u.apply(this,x):x[0],W=m.cache;if(W.has(B))return W.get(B);var ee=o.apply(this,x);return m.cache=W.set(B,ee)||W,ee};return m.cache=new(bu.Cache||Rr),m}bu.Cache=Rr;function Cu(o){if(typeof o!="function")throw new Bn(s);return function(){var u=arguments;switch(u.length){case 0:return!o.call(this);case 1:return!o.call(this,u[0]);case 2:return!o.call(this,u[0],u[1]);case 3:return!o.call(this,u[0],u[1],u[2])}return!o.apply(this,u)}}function iA(o){return o_(2,o)}var nA=G3(function(o,u){u=u.length==1&&st(u[0])?qt(u[0],gn(Ye())):qt(Di(u,1),gn(Ye()));var m=u.length;return dt(function(x){for(var B=-1,W=ki(x.length,m);++B<W;)x[B]=u[B].call(this,x[B]);return vn(o,this,x)})}),Ah=dt(function(o,u){var m=so(u,xa(Ah));return $r(o,I,i,u,m)}),c_=dt(function(o,u){var m=so(u,xa(c_));return $r(o,A,i,u,m)}),rA=jr(function(o,u){return $r(o,$,i,i,i,u)});function oA(o,u){if(typeof o!="function")throw new Bn(s);return u=u===i?u:ut(u),dt(o,u)}function aA(o,u){if(typeof o!="function")throw new Bn(s);return u=u==null?0:yi(ut(u),0),dt(function(m){var x=m[u],B=po(m,0,u);return x&&ao(B,x),vn(o,this,B)})}function sA(o,u,m){var x=!0,B=!0;if(typeof o!="function")throw new Bn(s);return Kt(m)&&(x="leading"in m?!!m.leading:x,B="trailing"in m?!!m.trailing:B),u_(o,u,{leading:x,maxWait:u,trailing:B})}function lA(o){return r_(o,1)}function uA(o,u){return Ah(fh(u),o)}function cA(){if(!arguments.length)return[];var o=arguments[0];return st(o)?o:[o]}function dA(o){return Fn(o,v)}function hA(o,u){return u=typeof u=="function"?u:i,Fn(o,v,u)}function pA(o){return Fn(o,p|v)}function mA(o,u){return u=typeof u=="function"?u:i,Fn(o,p|v,u)}function fA(o,u){return u==null||Jb(o,u,Pi(u))}function tr(o,u){return o===u||o!==o&&u!==u}var vA=hu(nh),gA=hu(function(o,u){return o>=u}),Vo=iC(function(){return arguments}())?iC:function(o){return ti(o)&&It.call(o,"callee")&&!zb.call(o,"callee")},st=ve.isArray,yA=xb?gn(xb):O3;function nn(o){return o!=null&&_u(o.length)&&!kr(o)}function ci(o){return ti(o)&&nn(o)}function bA(o){return o===!0||o===!1||ti(o)&&Hi(o)==Q}var mo=L5||zh,CA=Eb?gn(Eb):M3;function _A(o){return ti(o)&&o.nodeType===1&&!xs(o)}function wA(o){if(o==null)return!0;if(nn(o)&&(st(o)||typeof o=="string"||typeof o.splice=="function"||mo(o)||Ea(o)||Vo(o)))return!o.length;var u=Vi(o);if(u==ce||u==Te)return!o.size;if(_s(o))return!ah(o).length;for(var m in o)if(It.call(o,m))return!1;return!0}function xA(o,u){return ys(o,u)}function EA(o,u,m){m=typeof m=="function"?m:i;var x=m?m(o,u):i;return x===i?ys(o,u,i,m):!!x}function Dh(o){if(!ti(o))return!1;var u=Hi(o);return u==J||u==X||typeof o.message=="string"&&typeof o.name=="string"&&!xs(o)}function PA(o){return typeof o=="number"&&Ub(o)}function kr(o){if(!Kt(o))return!1;var u=Hi(o);return u==ae||u==ne||u==z||u==Re}function d_(o){return typeof o=="number"&&o==ut(o)}function _u(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=T}function Kt(o){var u=typeof o;return o!=null&&(u=="object"||u=="function")}function ti(o){return o!=null&&typeof o=="object"}var h_=Pb?gn(Pb):T3;function OA(o,u){return o===u||oh(o,u,wh(u))}function MA(o,u,m){return m=typeof m=="function"?m:i,oh(o,u,wh(u),m)}function SA(o){return p_(o)&&o!=+o}function TA(o){if(hT(o))throw new at(a);return nC(o)}function IA(o){return o===null}function AA(o){return o==null}function p_(o){return typeof o=="number"||ti(o)&&Hi(o)==le}function xs(o){if(!ti(o)||Hi(o)!=Ce)return!1;var u=Zl(o);if(u===null)return!0;var m=It.call(u,"constructor")&&u.constructor;return typeof m=="function"&&m instanceof m&&Ul.call(m)==M5}var Lh=Ob?gn(Ob):I3;function DA(o){return d_(o)&&o>=-T&&o<=T}var m_=Mb?gn(Mb):A3;function wu(o){return typeof o=="string"||!st(o)&&ti(o)&&Hi(o)==$e}function bn(o){return typeof o=="symbol"||ti(o)&&Hi(o)==Le}var Ea=Sb?gn(Sb):D3;function LA(o){return o===i}function BA(o){return ti(o)&&Vi(o)==We}function RA(o){return ti(o)&&Hi(o)==Y}var FA=hu(sh),$A=hu(function(o,u){return o<=u});function f_(o){if(!o)return[];if(nn(o))return wu(o)?Kn(o):tn(o);if(cs&&o[cs])return f5(o[cs]());var u=Vi(o),m=u==ce?Zd:u==Te?Vl:Pa;return m(o)}function Vr(o){if(!o)return o===0?o:0;if(o=Nn(o),o===P||o===-P){var u=o<0?-1:1;return u*F}return o===o?o:0}function ut(o){var u=Vr(o),m=u%1;return u===u?m?u-m:u:0}function v_(o){return o?$o(ut(o),0,j):0}function Nn(o){if(typeof o=="number")return o;if(bn(o))return N;if(Kt(o)){var u=typeof o.valueOf=="function"?o.valueOf():o;o=Kt(u)?u+"":u}if(typeof o!="string")return o===0?o:+o;o=Bb(o);var m=yS.test(o);return m||CS.test(o)?YS(o.slice(2),m?2:8):gS.test(o)?N:+o}function g_(o){return yr(o,rn(o))}function jA(o){return o?$o(ut(o),-T,T):o===0?o:0}function Pt(o){return o==null?"":yn(o)}var NA=_a(function(o,u){if(_s(u)||nn(u)){yr(u,Pi(u),o);return}for(var m in u)It.call(u,m)&&fs(o,m,u[m])}),y_=_a(function(o,u){yr(u,rn(u),o)}),xu=_a(function(o,u,m,x){yr(u,rn(u),o,x)}),kA=_a(function(o,u,m,x){yr(u,Pi(u),o,x)}),VA=jr(eh);function zA(o,u){var m=Ca(o);return u==null?m:Qb(m,u)}var GA=dt(function(o,u){o=Dt(o);var m=-1,x=u.length,B=x>2?u[2]:i;for(B&&Wi(u[0],u[1],B)&&(x=1);++m<x;)for(var W=u[m],ee=rn(W),oe=-1,ue=ee.length;++oe<ue;){var we=ee[oe],xe=o[we];(xe===i||tr(xe,ga[we])&&!It.call(o,we))&&(o[we]=W[we])}return o}),UA=dt(function(o){return o.push(i,RC),vn(b_,i,o)});function HA(o,u){return Ib(o,Ye(u,3),gr)}function WA(o,u){return Ib(o,Ye(u,3),ih)}function qA(o,u){return o==null?o:th(o,Ye(u,3),rn)}function ZA(o,u){return o==null?o:eC(o,Ye(u,3),rn)}function QA(o,u){return o&&gr(o,Ye(u,3))}function JA(o,u){return o&&ih(o,Ye(u,3))}function XA(o){return o==null?[]:ru(o,Pi(o))}function YA(o){return o==null?[]:ru(o,rn(o))}function Bh(o,u,m){var x=o==null?i:jo(o,u);return x===i?m:x}function KA(o,u){return o!=null&&jC(o,u,w3)}function Rh(o,u){return o!=null&&jC(o,u,x3)}var e6=TC(function(o,u,m){u!=null&&typeof u.toString!="function"&&(u=Hl.call(u)),o[u]=m},$h(on)),t6=TC(function(o,u,m){u!=null&&typeof u.toString!="function"&&(u=Hl.call(u)),It.call(o,u)?o[u].push(m):o[u]=[m]},Ye),i6=dt(gs);function Pi(o){return nn(o)?qb(o):ah(o)}function rn(o){return nn(o)?qb(o,!0):L3(o)}function n6(o,u){var m={};return u=Ye(u,3),gr(o,function(x,B,W){Fr(m,u(x,B,W),x)}),m}function r6(o,u){var m={};return u=Ye(u,3),gr(o,function(x,B,W){Fr(m,B,u(x,B,W))}),m}var o6=_a(function(o,u,m){ou(o,u,m)}),b_=_a(function(o,u,m,x){ou(o,u,m,x)}),a6=jr(function(o,u){var m={};if(o==null)return m;var x=!1;u=qt(u,function(W){return W=ho(W,o),x||(x=W.length>1),W}),yr(o,Ch(o),m),x&&(m=Fn(m,p|f|v,eT));for(var B=u.length;B--;)hh(m,u[B]);return m});function s6(o,u){return C_(o,Cu(Ye(u)))}var l6=jr(function(o,u){return o==null?{}:R3(o,u)});function C_(o,u){if(o==null)return{};var m=qt(Ch(o),function(x){return[x]});return u=Ye(u),cC(o,m,function(x,B){return u(x,B[0])})}function u6(o,u,m){u=ho(u,o);var x=-1,B=u.length;for(B||(B=1,o=i);++x<B;){var W=o==null?i:o[br(u[x])];W===i&&(x=B,W=m),o=kr(W)?W.call(o):W}return o}function c6(o,u,m){return o==null?o:bs(o,u,m)}function d6(o,u,m,x){return x=typeof x=="function"?x:i,o==null?o:bs(o,u,m,x)}var __=LC(Pi),w_=LC(rn);function h6(o,u,m){var x=st(o),B=x||mo(o)||Ea(o);if(u=Ye(u,4),m==null){var W=o&&o.constructor;B?m=x?new W:[]:Kt(o)?m=kr(W)?Ca(Zl(o)):{}:m={}}return(B?Ln:gr)(o,function(ee,oe,ue){return u(m,ee,oe,ue)}),m}function p6(o,u){return o==null?!0:hh(o,u)}function m6(o,u,m){return o==null?o:fC(o,u,fh(m))}function f6(o,u,m,x){return x=typeof x=="function"?x:i,o==null?o:fC(o,u,fh(m),x)}function Pa(o){return o==null?[]:qd(o,Pi(o))}function v6(o){return o==null?[]:qd(o,rn(o))}function g6(o,u,m){return m===i&&(m=u,u=i),m!==i&&(m=Nn(m),m=m===m?m:0),u!==i&&(u=Nn(u),u=u===u?u:0),$o(Nn(o),u,m)}function y6(o,u,m){return u=Vr(u),m===i?(m=u,u=0):m=Vr(m),o=Nn(o),E3(o,u,m)}function b6(o,u,m){if(m&&typeof m!="boolean"&&Wi(o,u,m)&&(u=m=i),m===i&&(typeof u=="boolean"?(m=u,u=i):typeof o=="boolean"&&(m=o,o=i)),o===i&&u===i?(o=0,u=1):(o=Vr(o),u===i?(u=o,o=0):u=Vr(u)),o>u){var x=o;o=u,u=x}if(m||o%1||u%1){var B=Hb();return ki(o+B*(u-o+XS("1e-"+((B+"").length-1))),u)}return uh(o,u)}var C6=wa(function(o,u,m){return u=u.toLowerCase(),o+(m?x_(u):u)});function x_(o){return Fh(Pt(o).toLowerCase())}function E_(o){return o=Pt(o),o&&o.replace(wS,c5).replace(VS,"")}function _6(o,u,m){o=Pt(o),u=yn(u);var x=o.length;m=m===i?x:$o(ut(m),0,x);var B=m;return m-=u.length,m>=0&&o.slice(m,B)==u}function w6(o){return o=Pt(o),o&&Dd.test(o)?o.replace(Ao,d5):o}function x6(o){return o=Pt(o),o&&fr.test(o)?o.replace(Yt,"\\$&"):o}var E6=wa(function(o,u,m){return o+(m?"-":"")+u.toLowerCase()}),P6=wa(function(o,u,m){return o+(m?" ":"")+u.toLowerCase()}),O6=OC("toLowerCase");function M6(o,u,m){o=Pt(o),u=ut(u);var x=u?fa(o):0;if(!u||x>=u)return o;var B=(u-x)/2;return du(Yl(B),m)+o+du(Xl(B),m)}function S6(o,u,m){o=Pt(o),u=ut(u);var x=u?fa(o):0;return u&&x<u?o+du(u-x,m):o}function T6(o,u,m){o=Pt(o),u=ut(u);var x=u?fa(o):0;return u&&x<u?du(u-x,m)+o:o}function I6(o,u,m){return m||u==null?u=0:u&&(u=+u),$5(Pt(o).replace(vr,""),u||0)}function A6(o,u,m){return(m?Wi(o,u,m):u===i)?u=1:u=ut(u),ch(Pt(o),u)}function D6(){var o=arguments,u=Pt(o[0]);return o.length<3?u:u.replace(o[1],o[2])}var L6=wa(function(o,u,m){return o+(m?"_":"")+u.toLowerCase()});function B6(o,u,m){return m&&typeof m!="number"&&Wi(o,u,m)&&(u=m=i),m=m===i?j:m>>>0,m?(o=Pt(o),o&&(typeof u=="string"||u!=null&&!Lh(u))&&(u=yn(u),!u&&ma(o))?po(Kn(o),0,m):o.split(u,m)):[]}var R6=wa(function(o,u,m){return o+(m?" ":"")+Fh(u)});function F6(o,u,m){return o=Pt(o),m=m==null?0:$o(ut(m),0,o.length),u=yn(u),o.slice(m,m+u.length)==u}function $6(o,u,m){var x=k.templateSettings;m&&Wi(o,u,m)&&(u=i),o=Pt(o),u=xu({},u,x,BC);var B=xu({},u.imports,x.imports,BC),W=Pi(B),ee=qd(B,W),oe,ue,we=0,xe=u.interpolate||Fl,Oe="__p += '",Ne=Qd((u.escape||Fl).source+"|"+xe.source+"|"+(xe===Nt?vS:Fl).source+"|"+(u.evaluate||Fl).source+"|$","g"),qe="//# sourceURL="+(It.call(u,"sourceURL")?(u.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++WS+"]")+`
`;o.replace(Ne,function(tt,mt,gt,Cn,qi,_n){return gt||(gt=Cn),Oe+=o.slice(we,_n).replace(xS,h5),mt&&(oe=!0,Oe+=`' +
__e(`+mt+`) +
'`),qi&&(ue=!0,Oe+=`';
`+qi+`;
__p += '`),gt&&(Oe+=`' +
((__t = (`+gt+`)) == null ? '' : __t) +
'`),we=_n+tt.length,tt}),Oe+=`';
`;var et=It.call(u,"variable")&&u.variable;if(!et)Oe=`with (obj) {
`+Oe+`
}
`;else if(mS.test(et))throw new at(l);Oe=(ue?Oe.replace(wt,""):Oe).replace(lt,"$1").replace(ot,"$1;"),Oe="function("+(et||"obj")+`) {
`+(et?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(oe?", __e = _.escape":"")+(ue?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Oe+`return __p
}`;var ct=O_(function(){return Et(W,qe+"return "+Oe).apply(i,ee)});if(ct.source=Oe,Dh(ct))throw ct;return ct}function j6(o){return Pt(o).toLowerCase()}function N6(o){return Pt(o).toUpperCase()}function k6(o,u,m){if(o=Pt(o),o&&(m||u===i))return Bb(o);if(!o||!(u=yn(u)))return o;var x=Kn(o),B=Kn(u),W=Rb(x,B),ee=Fb(x,B)+1;return po(x,W,ee).join("")}function V6(o,u,m){if(o=Pt(o),o&&(m||u===i))return o.slice(0,jb(o)+1);if(!o||!(u=yn(u)))return o;var x=Kn(o),B=Fb(x,Kn(u))+1;return po(x,0,B).join("")}function z6(o,u,m){if(o=Pt(o),o&&(m||u===i))return o.replace(vr,"");if(!o||!(u=yn(u)))return o;var x=Kn(o),B=Rb(x,Kn(u));return po(x,B).join("")}function G6(o,u){var m=G,x=q;if(Kt(u)){var B="separator"in u?u.separator:B;m="length"in u?ut(u.length):m,x="omission"in u?yn(u.omission):x}o=Pt(o);var W=o.length;if(ma(o)){var ee=Kn(o);W=ee.length}if(m>=W)return o;var oe=m-fa(x);if(oe<1)return x;var ue=ee?po(ee,0,oe).join(""):o.slice(0,oe);if(B===i)return ue+x;if(ee&&(oe+=ue.length-oe),Lh(B)){if(o.slice(oe).search(B)){var we,xe=ue;for(B.global||(B=Qd(B.source,Pt(ib.exec(B))+"g")),B.lastIndex=0;we=B.exec(xe);)var Oe=we.index;ue=ue.slice(0,Oe===i?oe:Oe)}}else if(o.indexOf(yn(B),oe)!=oe){var Ne=ue.lastIndexOf(B);Ne>-1&&(ue=ue.slice(0,Ne))}return ue+x}function U6(o){return o=Pt(o),o&&Do.test(o)?o.replace(An,b5):o}var H6=wa(function(o,u,m){return o+(m?" ":"")+u.toUpperCase()}),Fh=OC("toUpperCase");function P_(o,u,m){return o=Pt(o),u=m?i:u,u===i?m5(o)?w5(o):o5(o):o.match(u)||[]}var O_=dt(function(o,u){try{return vn(o,i,u)}catch(m){return Dh(m)?m:new at(m)}}),W6=jr(function(o,u){return Ln(u,function(m){m=br(m),Fr(o,m,Ih(o[m],o))}),o});function q6(o){var u=o==null?0:o.length,m=Ye();return o=u?qt(o,function(x){if(typeof x[1]!="function")throw new Bn(s);return[m(x[0]),x[1]]}):[],dt(function(x){for(var B=-1;++B<u;){var W=o[B];if(vn(W[0],this,x))return vn(W[1],this,x)}})}function Z6(o){return b3(Fn(o,p))}function $h(o){return function(){return o}}function Q6(o,u){return o==null||o!==o?u:o}var J6=SC(),X6=SC(!0);function on(o){return o}function jh(o){return rC(typeof o=="function"?o:Fn(o,p))}function Y6(o){return aC(Fn(o,p))}function K6(o,u){return sC(o,Fn(u,p))}var eD=dt(function(o,u){return function(m){return gs(m,o,u)}}),tD=dt(function(o,u){return function(m){return gs(o,m,u)}});function Nh(o,u,m){var x=Pi(u),B=ru(u,x);m==null&&!(Kt(u)&&(B.length||!x.length))&&(m=u,u=o,o=this,B=ru(u,Pi(u)));var W=!(Kt(m)&&"chain"in m)||!!m.chain,ee=kr(o);return Ln(B,function(oe){var ue=u[oe];o[oe]=ue,ee&&(o.prototype[oe]=function(){var we=this.__chain__;if(W||we){var xe=o(this.__wrapped__),Oe=xe.__actions__=tn(this.__actions__);return Oe.push({func:ue,args:arguments,thisArg:o}),xe.__chain__=we,xe}return ue.apply(o,ao([this.value()],arguments))})}),o}function iD(){return Ai._===this&&(Ai._=S5),this}function kh(){}function nD(o){return o=ut(o),dt(function(u){return lC(u,o)})}var rD=gh(qt),oD=gh(Tb),aD=gh(zd);function M_(o){return Eh(o)?Gd(br(o)):F3(o)}function sD(o){return function(u){return o==null?i:jo(o,u)}}var lD=IC(),uD=IC(!0);function Vh(){return[]}function zh(){return!1}function cD(){return{}}function dD(){return""}function hD(){return!0}function pD(o,u){if(o=ut(o),o<1||o>T)return[];var m=j,x=ki(o,j);u=Ye(u),o-=j;for(var B=Wd(x,u);++m<o;)u(m);return B}function mD(o){return st(o)?qt(o,br):bn(o)?[o]:tn(qC(Pt(o)))}function fD(o){var u=++O5;return Pt(o)+u}var vD=cu(function(o,u){return o+u},0),gD=yh("ceil"),yD=cu(function(o,u){return o/u},1),bD=yh("floor");function CD(o){return o&&o.length?nu(o,on,nh):i}function _D(o,u){return o&&o.length?nu(o,Ye(u,2),nh):i}function wD(o){return Db(o,on)}function xD(o,u){return Db(o,Ye(u,2))}function ED(o){return o&&o.length?nu(o,on,sh):i}function PD(o,u){return o&&o.length?nu(o,Ye(u,2),sh):i}var OD=cu(function(o,u){return o*u},1),MD=yh("round"),SD=cu(function(o,u){return o-u},0);function TD(o){return o&&o.length?Hd(o,on):0}function ID(o,u){return o&&o.length?Hd(o,Ye(u,2)):0}return k.after=YI,k.ary=r_,k.assign=NA,k.assignIn=y_,k.assignInWith=xu,k.assignWith=kA,k.at=VA,k.before=o_,k.bind=Ih,k.bindAll=W6,k.bindKey=a_,k.castArray=cA,k.chain=t_,k.chunk=bT,k.compact=CT,k.concat=_T,k.cond=q6,k.conforms=Z6,k.constant=$h,k.countBy=TI,k.create=zA,k.curry=s_,k.curryRight=l_,k.debounce=u_,k.defaults=GA,k.defaultsDeep=UA,k.defer=KI,k.delay=eA,k.difference=wT,k.differenceBy=xT,k.differenceWith=ET,k.drop=PT,k.dropRight=OT,k.dropRightWhile=MT,k.dropWhile=ST,k.fill=TT,k.filter=AI,k.flatMap=BI,k.flatMapDeep=RI,k.flatMapDepth=FI,k.flatten=XC,k.flattenDeep=IT,k.flattenDepth=AT,k.flip=tA,k.flow=J6,k.flowRight=X6,k.fromPairs=DT,k.functions=XA,k.functionsIn=YA,k.groupBy=$I,k.initial=BT,k.intersection=RT,k.intersectionBy=FT,k.intersectionWith=$T,k.invert=e6,k.invertBy=t6,k.invokeMap=NI,k.iteratee=jh,k.keyBy=kI,k.keys=Pi,k.keysIn=rn,k.map=gu,k.mapKeys=n6,k.mapValues=r6,k.matches=Y6,k.matchesProperty=K6,k.memoize=bu,k.merge=o6,k.mergeWith=b_,k.method=eD,k.methodOf=tD,k.mixin=Nh,k.negate=Cu,k.nthArg=nD,k.omit=a6,k.omitBy=s6,k.once=iA,k.orderBy=VI,k.over=rD,k.overArgs=nA,k.overEvery=oD,k.overSome=aD,k.partial=Ah,k.partialRight=c_,k.partition=zI,k.pick=l6,k.pickBy=C_,k.property=M_,k.propertyOf=sD,k.pull=VT,k.pullAll=KC,k.pullAllBy=zT,k.pullAllWith=GT,k.pullAt=UT,k.range=lD,k.rangeRight=uD,k.rearg=rA,k.reject=HI,k.remove=HT,k.rest=oA,k.reverse=Sh,k.sampleSize=qI,k.set=c6,k.setWith=d6,k.shuffle=ZI,k.slice=WT,k.sortBy=XI,k.sortedUniq=KT,k.sortedUniqBy=eI,k.split=B6,k.spread=aA,k.tail=tI,k.take=iI,k.takeRight=nI,k.takeRightWhile=rI,k.takeWhile=oI,k.tap=CI,k.throttle=sA,k.thru=vu,k.toArray=f_,k.toPairs=__,k.toPairsIn=w_,k.toPath=mD,k.toPlainObject=g_,k.transform=h6,k.unary=lA,k.union=aI,k.unionBy=sI,k.unionWith=lI,k.uniq=uI,k.uniqBy=cI,k.uniqWith=dI,k.unset=p6,k.unzip=Th,k.unzipWith=e_,k.update=m6,k.updateWith=f6,k.values=Pa,k.valuesIn=v6,k.without=hI,k.words=P_,k.wrap=uA,k.xor=pI,k.xorBy=mI,k.xorWith=fI,k.zip=vI,k.zipObject=gI,k.zipObjectDeep=yI,k.zipWith=bI,k.entries=__,k.entriesIn=w_,k.extend=y_,k.extendWith=xu,Nh(k,k),k.add=vD,k.attempt=O_,k.camelCase=C6,k.capitalize=x_,k.ceil=gD,k.clamp=g6,k.clone=dA,k.cloneDeep=pA,k.cloneDeepWith=mA,k.cloneWith=hA,k.conformsTo=fA,k.deburr=E_,k.defaultTo=Q6,k.divide=yD,k.endsWith=_6,k.eq=tr,k.escape=w6,k.escapeRegExp=x6,k.every=II,k.find=DI,k.findIndex=QC,k.findKey=HA,k.findLast=LI,k.findLastIndex=JC,k.findLastKey=WA,k.floor=bD,k.forEach=i_,k.forEachRight=n_,k.forIn=qA,k.forInRight=ZA,k.forOwn=QA,k.forOwnRight=JA,k.get=Bh,k.gt=vA,k.gte=gA,k.has=KA,k.hasIn=Rh,k.head=YC,k.identity=on,k.includes=jI,k.indexOf=LT,k.inRange=y6,k.invoke=i6,k.isArguments=Vo,k.isArray=st,k.isArrayBuffer=yA,k.isArrayLike=nn,k.isArrayLikeObject=ci,k.isBoolean=bA,k.isBuffer=mo,k.isDate=CA,k.isElement=_A,k.isEmpty=wA,k.isEqual=xA,k.isEqualWith=EA,k.isError=Dh,k.isFinite=PA,k.isFunction=kr,k.isInteger=d_,k.isLength=_u,k.isMap=h_,k.isMatch=OA,k.isMatchWith=MA,k.isNaN=SA,k.isNative=TA,k.isNil=AA,k.isNull=IA,k.isNumber=p_,k.isObject=Kt,k.isObjectLike=ti,k.isPlainObject=xs,k.isRegExp=Lh,k.isSafeInteger=DA,k.isSet=m_,k.isString=wu,k.isSymbol=bn,k.isTypedArray=Ea,k.isUndefined=LA,k.isWeakMap=BA,k.isWeakSet=RA,k.join=jT,k.kebabCase=E6,k.last=jn,k.lastIndexOf=NT,k.lowerCase=P6,k.lowerFirst=O6,k.lt=FA,k.lte=$A,k.max=CD,k.maxBy=_D,k.mean=wD,k.meanBy=xD,k.min=ED,k.minBy=PD,k.stubArray=Vh,k.stubFalse=zh,k.stubObject=cD,k.stubString=dD,k.stubTrue=hD,k.multiply=OD,k.nth=kT,k.noConflict=iD,k.noop=kh,k.now=yu,k.pad=M6,k.padEnd=S6,k.padStart=T6,k.parseInt=I6,k.random=b6,k.reduce=GI,k.reduceRight=UI,k.repeat=A6,k.replace=D6,k.result=u6,k.round=MD,k.runInContext=se,k.sample=WI,k.size=QI,k.snakeCase=L6,k.some=JI,k.sortedIndex=qT,k.sortedIndexBy=ZT,k.sortedIndexOf=QT,k.sortedLastIndex=JT,k.sortedLastIndexBy=XT,k.sortedLastIndexOf=YT,k.startCase=R6,k.startsWith=F6,k.subtract=SD,k.sum=TD,k.sumBy=ID,k.template=$6,k.times=pD,k.toFinite=Vr,k.toInteger=ut,k.toLength=v_,k.toLower=j6,k.toNumber=Nn,k.toSafeInteger=jA,k.toString=Pt,k.toUpper=N6,k.trim=k6,k.trimEnd=V6,k.trimStart=z6,k.truncate=G6,k.unescape=U6,k.uniqueId=fD,k.upperCase=H6,k.upperFirst=Fh,k.each=i_,k.eachRight=n_,k.first=YC,Nh(k,function(){var o={};return gr(k,function(u,m){It.call(k.prototype,m)||(o[m]=u)}),o}(),{chain:!1}),k.VERSION=n,Ln(["bind","bindKey","curry","curryRight","partial","partialRight"],function(o){k[o].placeholder=k}),Ln(["drop","take"],function(o,u){vt.prototype[o]=function(m){m=m===i?1:yi(ut(m),0);var x=this.__filtered__&&!u?new vt(this):this.clone();return x.__filtered__?x.__takeCount__=ki(m,x.__takeCount__):x.__views__.push({size:ki(m,j),type:o+(x.__dir__<0?"Right":"")}),x},vt.prototype[o+"Right"]=function(m){return this.reverse()[o](m).reverse()}}),Ln(["filter","map","takeWhile"],function(o,u){var m=u+1,x=m==b||m==L;vt.prototype[o]=function(B){var W=this.clone();return W.__iteratees__.push({iteratee:Ye(B,3),type:m}),W.__filtered__=W.__filtered__||x,W}}),Ln(["head","last"],function(o,u){var m="take"+(u?"Right":"");vt.prototype[o]=function(){return this[m](1).value()[0]}}),Ln(["initial","tail"],function(o,u){var m="drop"+(u?"":"Right");vt.prototype[o]=function(){return this.__filtered__?new vt(this):this[m](1)}}),vt.prototype.compact=function(){return this.filter(on)},vt.prototype.find=function(o){return this.filter(o).head()},vt.prototype.findLast=function(o){return this.reverse().find(o)},vt.prototype.invokeMap=dt(function(o,u){return typeof o=="function"?new vt(this):this.map(function(m){return gs(m,o,u)})}),vt.prototype.reject=function(o){return this.filter(Cu(Ye(o)))},vt.prototype.slice=function(o,u){o=ut(o);var m=this;return m.__filtered__&&(o>0||u<0)?new vt(m):(o<0?m=m.takeRight(-o):o&&(m=m.drop(o)),u!==i&&(u=ut(u),m=u<0?m.dropRight(-u):m.take(u-o)),m)},vt.prototype.takeRightWhile=function(o){return this.reverse().takeWhile(o).reverse()},vt.prototype.toArray=function(){return this.take(j)},gr(vt.prototype,function(o,u){var m=/^(?:filter|find|map|reject)|While$/.test(u),x=/^(?:head|last)$/.test(u),B=k[x?"take"+(u=="last"?"Right":""):u],W=x||/^find/.test(u);B&&(k.prototype[u]=function(){var ee=this.__wrapped__,oe=x?[1]:arguments,ue=ee instanceof vt,we=oe[0],xe=ue||st(ee),Oe=function(mt){var gt=B.apply(k,ao([mt],oe));return x&&Ne?gt[0]:gt};xe&&m&&typeof we=="function"&&we.length!=1&&(ue=xe=!1);var Ne=this.__chain__,qe=!!this.__actions__.length,et=W&&!Ne,ct=ue&&!qe;if(!W&&xe){ee=ct?ee:new vt(this);var tt=o.apply(ee,oe);return tt.__actions__.push({func:vu,args:[Oe],thisArg:i}),new Rn(tt,Ne)}return et&&ct?o.apply(this,oe):(tt=this.thru(Oe),et?x?tt.value()[0]:tt.value():tt)})}),Ln(["pop","push","shift","sort","splice","unshift"],function(o){var u=zl[o],m=/^(?:push|sort|unshift)$/.test(o)?"tap":"thru",x=/^(?:pop|shift)$/.test(o);k.prototype[o]=function(){var B=arguments;if(x&&!this.__chain__){var W=this.value();return u.apply(st(W)?W:[],B)}return this[m](function(ee){return u.apply(st(ee)?ee:[],B)})}}),gr(vt.prototype,function(o,u){var m=k[u];if(m){var x=m.name+"";It.call(ba,x)||(ba[x]=[]),ba[x].push({name:u,func:m})}}),ba[uu(i,M).name]=[{name:"wrapper",func:i}],vt.prototype.clone=U5,vt.prototype.reverse=H5,vt.prototype.value=W5,k.prototype.at=_I,k.prototype.chain=wI,k.prototype.commit=xI,k.prototype.next=EI,k.prototype.plant=OI,k.prototype.reverse=MI,k.prototype.toJSON=k.prototype.valueOf=k.prototype.value=SI,k.prototype.first=k.prototype.head,cs&&(k.prototype[cs]=PI),k},va=x5();Lo?((Lo.exports=va)._=va,jd._=va):Ai._=va}).call(En)}(Uu,Uu.exports);var W8=Uu.exports;function Jt(e,t=!1){const{Cartesian2:i,CallbackProperty:n}=Cesium;if(e instanceof Cesium.Cartesian2||e instanceof n)return e;if(Gt(e)&&bt(e,"x")&&bt(e,"y")){const r=e;return new i(r.x,r.y)}if($t(e))return new i(e[0],e[1]);if(hi(e))return new n(e,t)}function Ot(e,t,i=!1){const{CallbackProperty:n,Cartesian3:r,Ellipsoid:a,SampledPositionProperty:s,CompositePositionProperty:l,ConstantPositionProperty:c,TimeIntervalCollectionPositionProperty:d}=Cesium;if(e instanceof r||e instanceof n||e instanceof s||e instanceof l||e instanceof c||e instanceof d)return e;if(t=t||a.WGS84,Gt(e)){if(bt(e,"x")&&bt(e,"y")&&bt(e,"z")){const h=e;return new r(h.x,h.y,h.z)}else if(bt(e,"lng")&&bt(e,"lat")){const h=e;return r.fromDegrees(h.lng,h.lat,h.height||0,t)}}if($t(e))return r.fromDegrees(e[0],e[1],e[2]||0,t);if(hi(e))return new n(e,i)}function Un(e,t,i=!1){const{CallbackProperty:n,Cartesian3:r,Ellipsoid:a}=Cesium;if(e instanceof n)return e;if(hi(e))return new n(e,i);if(t=t||a.WGS84,$t(e)){if($t(e[0])||Gt(e[0])){const s=[];return e.forEach(l=>{s.push(Ot(l,t))}),s}return r.fromDegreesArrayHeights(e,t)}}function T2(e,t){const{CallbackProperty:i}=Cesium;if(e instanceof i)return e;if(hi(e))return new i(e,t);if($t(e)){const n=[];return e.forEach(r=>{n.push(Jt(r))}),n}}function Sp(e,t=!1){const{CallbackProperty:i,Quaternion:n,VelocityOrientationProperty:r}=Cesium;if(e instanceof n||e instanceof i||e instanceof r)return e;if(Gt(e)&&bt(e,"x")&&bt(e,"y")){const a=e;return new n(a.x,a.y,a.z,a.w)}if($t(e))return new n(e[0],e[1],e[2],e[3]);if(hi(e))return new i(e,t)}function I2(e,t){e.forEach(i=>{i.positions=Un(i.positions,t),i.holes&&I2(i.holes,t)})}function Tp(e,t,i=!1){var n;const{PolygonHierarchy:r,CallbackProperty:a}=Cesium;if(e instanceof r||e instanceof a)return e;if(hi(e))return new a(e,i);if($t(e)&&e.length>=3){const s=Un(e,t);return new r(s)}if(Gt(e)&&bt(e,"positions")){const s=W8.cloneDeep(e);return s.positions=Un(s.positions,t),(n=s.holes)!=null&&n.length&&I2(s.holes,t),s}}function Ip(e,t=!1){const{NearFarScalar:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(Gt(e)&&bt(e,"near")&&bt(e,"far")){const r=e;return new i(r.near,r.nearValue||0,r.far,r.farValue||1)}if($t(e))return new i(e[0],e[1],e[2],e[3]);if(hi(e))return new n(e,t)}function q8(e,t=!1){const{DistanceDisplayCondition:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(Gt(e)&&bt(e,"near")&&bt(e,"far")){const r=e;return new i(r.near,r.far)}if($t(e))return new i(e[0],e[1]);if(hi(e))return new n(e,t)}function Je(e,t=!1){const{Color:i,CallbackProperty:n,defaultValue:r}=Cesium;if(e instanceof i||e instanceof n)return e;if(zn(e))return i.fromCssColorString(e);if(Gt(e)){if(bt(e,"red")){const a=e;return i.fromBytes(r(a.red,255),r(a.green,255),r(a.blue,255),r(a.alpha,255))}else if(bt(e,"x")){const a=e;return new i(r(a.x,1),r(a.y,1),r(a.z,1),r(a.w,1))}}if($t(e))return i.fromBytes(e[0],e[1],e[2],r(e[3],255));if(hi(e))return new n(e,t)}function Z8(e){if($t(e)){const t=[];return e.forEach(i=>{t.push(Je(i))}),t}else return e}function Q8(e,t=!1){const{CallbackProperty:i,Color:n,CheckerboardMaterialProperty:r,ColorMaterialProperty:a,CompositeMaterialProperty:s,GridMaterialProperty:l,ImageMaterialProperty:c,MaterialProperty:d,PolylineArrowMaterialProperty:h,PolylineDashMaterialProperty:p,PolylineGlowMaterialProperty:f,PolylineOutlineMaterialProperty:v,StripeMaterialProperty:y,StripeOrientation:w,defaultValue:C,Cartesian2:M,Material:S}=Cesium;if(e instanceof i||e instanceof n||e instanceof r||e instanceof a||e instanceof s||e instanceof l||e instanceof c||e instanceof d||e instanceof h||e instanceof p||e instanceof f||e instanceof v||e instanceof y||e instanceof Io||e instanceof as||e instanceof ss)return e;if(zn(e)&&/(.*)\.(jpg|bmp|gif|ico|pcx|jpeg|tif|png|raw|tga)$/.test(e)||e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement)return new c({image:e,repeat:Jt({x:1,y:1}),color:n.WHITE,transparent:!0});if($t(e)||zn(e))return new a(Je(e));if(Gt(e)&&bt(e,"fabric")){const _=e;switch(_.fabric.type){case"Image":return new c({image:_.fabric.uniforms.image,repeat:Jt(C(_.fabric.uniforms.repeat,{x:1,y:1})),color:C(Je(_.fabric.uniforms.color),n.WHITE),transparent:C(_.fabric.uniforms.transparent,!1)});case"Color":return new a(Je(C(_.fabric.uniforms.color,n.WHITE)));case"PolylineArrow":return new h(Je(C(_.fabric.uniforms.color,n.WHITE)));case"PolylineDash":return new p({color:Je(C(_.fabric.uniforms.color,"white")),gapColor:Je(C(_.fabric.uniforms.gapColor,n.TRANSPARENT)),dashLength:C(_.fabric.uniforms.dashLength,16),dashPattern:C(_.fabric.uniforms.dashPattern,255)});case"PolylineGlow":return new f({color:Je(C(_.fabric.uniforms.color,n.WHITE)),glowPower:C(_.fabric.uniforms.glowPower,.25),taperPower:C(_.fabric.uniforms.taperPower,1)});case"PolylineOutline":return new v({color:Je(C(_.fabric.uniforms.color,n.WHITE)),outlineColor:Je(C(_.fabric.uniforms.outlineColor,n.BLACK)),outlineWidth:C(_.fabric.uniforms.outlineWidth,1)});case"Checkerboard":return new r({evenColor:Je(C(_.fabric.uniforms.evenColor,n.WHITE)),oddColor:Je(C(_.fabric.uniforms.oddColor,n.BLACK)),repeat:C(Jt(_.fabric.uniforms.repeat),{x:2,y:2})});case"Grid":return new l({color:Je(C(_.fabric.uniforms.color,n.WHITE)),cellAlpha:C(_.fabric.uniforms.cellAlpha,.1),lineCount:C(Jt(_.fabric.uniforms.lineCount),{x:8,y:8}),lineThickness:C(Jt(_.fabric.uniforms.lineThickness),{x:1,y:1}),lineOffset:C(Jt(_.fabric.uniforms.lineOffset),{x:0,y:0})});case"Stripe":return new y({orientation:C(_.fabric.uniforms.orientation,w.HORIZONTAL),evenColor:Je(C(_.fabric.uniforms.evenColor,"white")),oddColor:Je(C(_.fabric.uniforms.oddColor,"black")),offset:C(_.fabric.uniforms.offset,0),repeat:C(_.fabric.uniforms.repeat,1)});case"VcCircleWave":return new Io({duration:C(_.fabric.uniforms.duration,3e3),gradient:C(_.fabric.uniforms.gradient,.5),color:Je(C(_.fabric.uniforms.color,n.RED)),count:C(_.fabric.uniforms.count,3)});case"VcLineFlow":return new as({image:C(_.fabric.uniforms.image,S.DefaultImageId),color:Je(C(_.fabric.uniforms.color,new n(1,1,1,1))),repeat:Jt(C(_.fabric.uniforms.repeat,new M(1,1))),axisY:C(_.fabric.uniforms.axisY,!1),mixt:C(_.fabric.uniforms.mixt,!1),speed:C(_.fabric.uniforms.speed,10),time:C(_.fabric.uniforms.time,-1)});case"VcLineTrail":return new ss({image:C(_.fabric.uniforms.image,S.DefaultImageId),color:Je(C(_.fabric.uniforms.color,new n(1,0,0,1))),repeat:Jt(C(_.fabric.uniforms.repeat,new M(1,1))),axisY:C(_.fabric.uniforms.axisY,!1),duration:C(_.fabric.uniforms.duration,3e3),loop:C(_.fabric.uniforms.loop,!0)})}}return hi(e)?new i(e,t):e}function Ap(e){var t;const i=this,n=(t=i==null?void 0:i.proxy)==null?void 0:t.$options.name;if(n&&(n.indexOf("Graphics")!==-1||n.indexOf("Datasource")!==-1||n==="VcOverlayDynamic"||n==="VcEntity"))return Q8(e);const{Material:r,combine:a}=Cesium;if(e instanceof r)return e;if(Gt(e)&&bt(e,"fabric")){const s=l=>{for(const c in l)if(!$t(l[c])&&Gt(l[c]))s(l[c]);else if(c.toLocaleLowerCase().indexOf("color")!==-1&&!Ns(l[c])){const d=Je(l[c]);l[c]=a(d,d,!0)}};return s(e),new r(e)}if($t(e)||zn(e)){const s=r.fromType("Color");return s.uniforms.color=Je(e),s}}function Hu(e){var t;const{Appearance:i,DebugAppearance:n,MaterialAppearance:r,PolylineColorAppearance:a,EllipsoidSurfaceAppearance:s,PerInstanceColorAppearance:l,PolylineMaterialAppearance:c}=Cesium;if(e instanceof i||e instanceof n||e instanceof r||e instanceof a||e instanceof s||e instanceof l||e instanceof c)return e;if(Gt(e)&&bt(e,"type")){const d={...e.options};return(t=e.options)!=null&&t.material&&(d.material=Ap.call(this,e.options.material)),new Cesium[e.type]({...d})}}function Zo(e,t=!1){const{Rectangle:i,RectangleGraphics:n,CallbackProperty:r}=Cesium;if(e instanceof n||e instanceof i||e instanceof r)return e;if($t(e))return i.fromDegrees(e[0],e[1],e[2],e[3]);if(Gt(e)){if(bt(e,"west")){const a=e;return i.fromDegrees(a.west,a.south,a.east,a.north)}else if(bt(e,"x")){const a=e;return new i(a.x,a.y,a.z,a.w)}}if(hi(e))return new r(e,t)}function A2(e,t=!1){const{BoundingRectangle:i,CallbackProperty:n}=Cesium;if(e instanceof i||e instanceof n)return e;if(Gt(e)&&bt(e,"x")){const r=e;return new i(r.x,r.y,r.width,r.height)}if($t(e))return new i(e[0],e[1],e[2],e[3]);if(hi(e))return new n(e,t)}function J8(e,t=!1){const{Cartesian3:i,Plane:n,PlaneGraphics:r,CallbackProperty:a}=Cesium;if(e instanceof r||e instanceof n||e instanceof a)return e;if(Gt(e)&&bt(e,"normal")){const s=e;return i.normalize(Ot(s.normal),s.normal),new n(s.normal,s.distance)}if($t(e)){const s=Ot(e[0]),l=i.normalize(s,new i);return new n(l,e[1])}if(hi(e))return new a(e,t)}function X8(e,t=!1){const{TranslationRotationScale:i,CallbackProperty:n}=Cesium;if(e instanceof n||e instanceof i)return e;if(Gt(e)&&bt(e,"translation")){const r=e;return new i(Ot(r.translation),Sp(r.rotation),Ot(r.scale))}return $t(e)?new i(Ot(e[0]),Sp(e[1]),Ot(e[2])):hi(e)?new n(e,t):e}function Y8(e){var t;const i=(t=this.proxy)==null?void 0:t.$options.name,n={};switch(i){case"VcDatasourceGeojson":return Object.assign(n,e),n&&n.markerColor&&(n.markerColor=Je(n.markerColor)),n&&n.stroke&&(n.stroke=Je(n.stroke)),n&&n.fill&&(n.fill=Je(n.fill)),n}return e}function K8(e){const t=e.scene,i=new Promise((n,r)=>{const a=e.scene.postRender.addEventListener(()=>{a();try{const s=e.scene.canvas;n(s.toDataURL("image/png"))}catch(s){r(s)}})});return t.render(e.clock.currentTime),i}function D2(e,t){const{Math:i,Rectangle:n,defaultValue:r}=Cesium;let a,s={};if(bt(e,"position")){const l=e.position;a=Ot(l,t),bt(l,"lng")&&bt(l,"lat")||$t(l)?s={heading:i.toRadians(r(e.heading,360)),pitch:i.toRadians(r(e.pitch,-90)),roll:i.toRadians(r(e.roll,0))}:s={heading:r(e.heading,2*Math.PI),pitch:r(e.pitch,-Math.PI/2),roll:r(e.roll,0)}}else if(bt(e,"rectangle")){const l=e.rectangle;a=Zo(l),n.validate(a),bt(l,"west")&&bt(l,"south")&&bt(l,"east")&&bt(l,"north")||$t(l)?s={heading:i.toRadians(r(e.heading,360)),pitch:i.toRadians(r(e.pitch,-90)),roll:i.toRadians(r(e.roll,0))}:s={heading:r(e.heading,2*Math.PI),pitch:r(e.pitch,-Math.PI/2),roll:r(e.roll,0)}}return{destination:a,orientation:s}}function Dp(e,t){const{destination:i,orientation:n}=D2(t,e.scene.globe.ellipsoid);e.camera.setView({destination:i,orientation:n})}function e7(e,t,i){const{destination:n,orientation:r}=D2(t,e.scene.globe.ellipsoid);e.camera.flyTo({...i,destination:(i==null?void 0:i.destination)||n,orientation:(i==null?void 0:i.orientation)||r})}function Lp(e,t,i){const{EllipsoidGeodesic:n,Ellipsoid:r}=Cesium;i=i||r.WGS84;const a=i.cartesianToCartographic(e),s=i.cartesianToCartographic(t);return new n(a,s).surfaceDistance}function t7(e,t,i,n){const{Cartesian3:r}=Cesium;if(r.equals(e,t))return;const a=Cesium.Cartesian3.subtract(t,e,new Cesium.Cartesian3),s=Cesium.Cartesian3.normalize(a,new Cesium.Cartesian3),l=Cesium.Transforms.rotationMatrixFromPositionVelocity(e,s,i.globe.ellipsoid),c=Cesium.Matrix4.fromRotationTranslation(l,e),d=Cesium.Transforms.eastNorthUpToFixedFrame(Cesium.Matrix4.getTranslation(c,new Cesium.Cartesian3),Cesium.Ellipsoid.WGS84,new Cesium.Matrix4),h=Cesium.Matrix4.multiply(Cesium.Matrix4.inverse(d,new Cesium.Matrix4),c,new Cesium.Matrix4),p=Cesium.Matrix4.getMatrix3(h,new Cesium.Matrix3),f=Cesium.Quaternion.fromRotationMatrix(p);return Cesium.HeadingPitchRoll.fromQuaternion(f)}function i7(e,t,i,n){const{HeadingPitchRoll:r,Transforms:a,Matrix4:s,Cartesian3:l,Cartesian4:c,Quaternion:d,Cartographic:h,Ellipsoid:p}=Cesium;n=n||p.WGS84;const f=new r(t,0,0),v=new l(1,1,1),y=a.headingPitchRollToFixedFrame(e,f),w=s.getColumn(y,1,new c),C=new l(w.x,w.y,w.z),M=d.fromAxisAngle(C,i*n.oneOverRadii.x),S=s.fromTranslationQuaternionRotationScale(l.ZERO,M,v),_=s.multiplyByPoint(S,e,new l),O=h.fromCartesian(e,n),I=h.fromCartesian(_,n);return I.height=O.height,h.toCartesian(I,n)}function L2(e){let t=0;const{CoplanarPolygonGeometry:i,VertexFormat:n,defined:r,Cartesian3:a}=Cesium,s=i.createGeometry(i.fromPositions({positions:e,vertexFormat:n.POSITION_ONLY}));if(!xn(s)&&r(s)){const l=s.indices,c=s.attributes.position.values;for(let d=0;d<l.length;d+=3){const h=l[d],p=l[d+1],f=l[d+2];t+=n7(a.unpack(c,3*h,{}),a.unpack(c,3*p,{}),a.unpack(c,3*f,{}))}}return t}const n7=(e,t,i)=>{const{Cartesian3:n}=Cesium,r=n.subtract(e,t,{}),a=n.subtract(i,t,{}),s=n.cross(r,a,r);return .5*n.magnitude(s)};function ar(e){const{JulianDate:t}=Cesium;return e instanceof t?e:zn(e)?Cesium.JulianDate.fromDate(new Date(e)):e instanceof Date?Cesium.JulianDate.fromDate(e):Cesium.JulianDate.now()}function Bp(e){const{HeadingPitchRange:t,Math:i}=Cesium;return e instanceof Cesium.HeadingPitchRange?e:Array.isArray(e)?new t(i.toRadians(e[0])||0,i.toRadians(e[1])||0,e[2]||0):Gt(e)?new t(e.heading||0,e.pitch||0,e.range||0):new t}function B2(e,t){const{Cartesian3:i,Matrix4:n,Transforms:r,Math:a}=Cesium,s=new i,l=r.eastNorthUpToFixedFrame(e);return n.inverse(l,l),n.multiplyByPoint(l,t,s),i.normalize(s,s),a.toDegrees(Math.atan2(s.x,s.y))}function R2(e,t){const{Cartesian3:i,Matrix4:n,Transforms:r,Math:a}=Cesium,s=new i,l=r.eastNorthUpToFixedFrame(e);return n.inverse(l,l),n.multiplyByPoint(l,t,s),i.normalize(s,s),a.toDegrees(Math.asin(s.z))}function F2(e,t,i,n=[]){const{Cartesian3:r,Ray:a,defined:s}=Cesium,l=r.normalize(r.subtract(t,e,new r),new r),c=new a(e,l),d=i.scene.pickFromRay(c,n);if(s(d)&&s(d.position))return d.position}function Rp(e){const t=7096758e-11,i=91610.74,n=-40467.74;return Math.round(n+(40487.57-n)/(1+Math.pow(e/i,t)))}function ii(e,t,i=">="){return e=e||"1.6.7",V8(e,t,i)}function r7(e){const{ImageBasedLighting:t,defined:i}=Cesium;if(e instanceof Cesium.ImageBasedLighting)return e;const n=new t;return n.imageBasedLightingFactor&&(n.imageBasedLightingFactor=Jt(e.imageBasedLightingFactor)),n.sphericalHarmonicCoefficients&&(n.sphericalHarmonicCoefficients=Un(e.sphericalHarmonicCoefficients)),n.luminanceAtZenith&&(n.luminanceAtZenith=Number(e.luminanceAtZenith)),i(n.specularEnvironmentMaps)&&(n.specularEnvironmentMaps=e.specularEnvironmentMaps),n}const Qo={position:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ot,deep:!0}}},$2={viewFrom:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ot,deep:!0}}},Fp={orientation:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Sp}}},$p={alignedAxis:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:Ot}}},Qr={color:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Je}}},o7={depthFailColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Je}}},Jo={disableDepthTestDistance:[Number,Object,Function]},ni={distanceDisplayCondition:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:q8}}},Vs={eyeOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0,z:0}),watcherOptions:{cesiumObjectBuilder:Ot}}},Bi={height:[Number,Object,Function]},Zi={heightReference:{type:[Number,Object,Function]}},zs={horizontalOrigin:{type:[Number,Object,Function],default:0}},Wu={image:[String,Object,HTMLCanvasElement,Function]},j2={imageSubRegion:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:A2}}},Ia={pixelOffset:{type:[Object,Array,Function],default:()=>({x:0,y:0}),validator:e=>$t(e)?e.length===2:_r(e)?bt(e,"x")&&bt(e,"y"):!!hi(e),watcherOptions:{cesiumObjectBuilder:Jt}}},Gs={pixelOffsetScaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ip}}},Jr={rotation:{type:[Number,Object,Function],default:0}},Xo={scale:{type:[Number,Object,Function],default:1}},Yo={scaleByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ip}}},it={show:{type:[Boolean,Object,Function],default:!0}},qu={sizeInMeters:{type:[Boolean,Object,Function],default:!1}},Ko={translucencyByDistance:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ip}}},Us={verticalOrigin:{type:[Number,Object,Function],default:0}},sr={width:[Number,Object,Function]},Zu={dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ot}}},lr={fill:{type:[Boolean,Object,Function],default:!0}},sn={material:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Ap}}},ur={outline:{type:[Boolean,Object,Function],default:!1}},zi={outlineColor:{type:[Object,String,Array,Function],default:"black",watcherOptions:{cesiumObjectBuilder:Je}}},Qi={outlineWidth:{type:[Number,Object,Function],default:1}},Ri={shadows:[Number,Object,Function]},ln={positions:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:Un,exclude:"_callback",deep:!0}}},Ji={extrudedHeight:[Number,Object,Function]},Hs={extrudedHeightReference:[Number,Object,Function]},ea={cornerType:{type:[Number,Object,Function],default:0}},Ut={granularity:[Number,Object,Function]},cr={classificationType:{type:[Number,Object,Function]}},Aa={zIndex:[Number,Object,Function]},Qu={length:[Number,Object,Function]},Ju={topRadius:[Number,Object,Function]},Xu={bottomRadius:[Number,Object,Function]},Da={numberOfVerticalLines:{type:[Number,Object,Function],default:16}},Yu={slices:{type:[Number,Object,Function],default:128}},Ku={semiMajorAxis:[Number,Object,Function]},ec={semiMinorAxis:[Number,Object,Function]},wr={stRotation:{type:[Number,Object,Function],default:0}},tc={radii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ot}}},ic={innerRadii:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Ot}}},nc={minimumClock:{type:[Number,Object,Function],default:0}},rc={maximumClock:{type:[Number,Object,Function],default:2*Math.PI}},oc={minimumCone:{type:[Number,Object,Function],default:0}},ac={maximumCone:{type:[Number,Object,Function],default:Math.PI}},La={stackPartitions:{type:[Number,Object,Function],default:64}},Ba={slicePartitions:{type:[Number,Object,Function],default:64}},sc={subdivisions:{type:[Number,Object,Function],default:128}},jp={text:[String,Object,Function]},Np={font:{type:[String,Object,Function],default:"30px sans-serif"}},kp={labelStyle:{type:[Number,Object,Function],default:0}},Vp={showBackground:{type:[Boolean,Object,Function],default:!1}},zp={backgroundColor:{type:[Object,String,Array,Function],default:()=>({x:.165,y:.165,z:.165,w:.8}),watcherOptions:{cesiumObjectBuilder:Je}}},Gp={backgroundPadding:{type:[Object,Array,Function],default:()=>({x:7,y:5}),watcherOptions:{cesiumObjectBuilder:Jt}}},Up={fillColor:{type:[Object,String,Array,Function],default:"white",watcherOptions:{cesiumObjectBuilder:Je}}},Hp={uri:[String,Object,Function]},Wp={minimumPixelSize:{type:[Number,Object,Function],default:0}},qp={maximumScale:[Number,Object,Function]},Zp={incrementallyLoadTextures:{type:[Boolean,Object,Function],default:!0}},N2={clampAnimations:{type:[Boolean,Object,Function],default:!0}},Qp={clampAnimations:{type:[Boolean,Object,Function],default:!0}},Jp={silhouetteColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Je}}},Xp={silhouetteSize:{type:[Number,Object,Function],default:0}},Yp={colorBlendMode:{type:[Number,Object,Function],default:0}},Kp={colorBlendAmount:{type:[Number,Object,Function],default:.5}},lc={imageBasedLightingFactor:{type:[Object,Array,Function],default:()=>[1,1],watcherOptions:{cesiumObjectBuilder:Jt}}},em={lightColor:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Je}}},k2={nodeTransformations:{type:[Object,Function],watcherOptions:{cesiumObjectBuilder:X8}}},V2={articulations:[Object,Function]},Ws={clippingPlanes:[Object,Function]},z2={plane:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:J8}}},tm={pixelSize:{type:[Number,Object,Function],default:1}},G2={hierarchy:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Tp,deep:!0,exclude:"_callback"}}},uc={perPositionHeight:{type:[Boolean,Object,Function],default:!1}},im={closeTop:{type:[Boolean,Object,Function],default:!0}},nm={closeBottom:{type:[Boolean,Object,Function],default:!0}},Xr={arcType:{type:[Number,Object,Function],default:1}},U2={depthFailMaterial:{type:[Object,String,Array,Function],watcherOptions:{cesiumObjectBuilder:Ap}}},qs={clampToGround:{type:[Boolean,Object,Function],default:!1}},H2={shape:{type:[Array,Object,Function],watcherOptions:{cesiumObjectBuilder:T2}}},W2={coordinates:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Zo}}},rm={maximumScreenSpaceError:{type:[Number,Object,Function],default:16}},cc={minimumHeights:[Array,Object,Function]},dc={maximumHeights:[Array,Object,Function]},q2={cutoutRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Zo}}},Z2={colorToAlpha:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Je}}},Hn={url:[String,Object]},om={token:String},Zs={tileDiscardPolicy:Object},am={layers:String},hc={enablePickFeatures:{type:Boolean,default:!0}},Oi={rectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Zo}}},dr={tilingScheme:Object},pt={ellipsoid:Object},Ci={credit:{type:[String,Object],default:""}},xr={tileWidth:{type:Number,default:256}},Er={tileHeight:{type:Number,default:256}},un={maximumLevel:Number},Pn={minimumLevel:{type:Number,default:0}},sm={fileExtension:{type:String,default:"png"}},lm={accessToken:String},um={format:{type:String,default:"png"}},pc={subdomains:[String,Array]},cm={getFeatureInfoFormats:Array},Qs={clock:Object},dm={times:Object},ta={projectionTransforms:{type:[Boolean,Object],default:!1}},hm={customShader:{type:Object}},Q2={maximumMemoryUsage:{type:Number,default:256}},J2={defaultColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Je}}},pm={tileStyle:{type:Object}},ia={allowPicking:{type:Boolean,default:!0}},na={asynchronous:{type:Boolean,default:!0}},mc={debugShowShadowVolume:{type:Boolean,default:!1}},Js={releaseGeometryInstances:{type:Boolean,default:!0}},Xs={interleave:{type:Boolean,default:!1}},Ra={appearance:{type:Object,watcherOptions:{cesiumObjectBuilder:Hu,deep:!0}}},mm={depthFailAppearance:{type:Object,watcherOptions:{cesiumObjectBuilder:Hu,deep:!0}}},Ys={geometryInstances:[Array,Object]},fc={vertexCacheOptimize:{type:Boolean,default:!1}},Ks={compressVertices:{type:Boolean,default:!0}},Wn={modelMatrix:Object},hr={debugShowBoundingVolume:{tyep:Boolean,default:!1}},el={scene:Object},vc={blendOption:{type:Number,default:2}},vo={id:null},fm={loop:{type:Boolean,default:!1}},vm={debugWireframe:{type:Boolean,default:!1}},Fi={vertexFormat:Object},tl={center:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ot}}},il={radius:Number},gm={frustum:Object},ym={origin:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ot}}},ra={polygonHierarchy:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Tp,deep:!0}}},X2={startColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Je}}},Y2={endColor:{type:[Object,String,Array],watcherOptions:{cesiumObjectBuilder:Je}}},K2={minimumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Jt}}},ex={maximumImageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Jt}}},tx={imageSize:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Jt}}},bm={shapePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:T2,deep:!0}}},Cm={polylinePositions:{type:Array,watcherOptions:{cesiumObjectBuilder:Un,deep:!0}}},ix={lightColor:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:Ot}}},_m={luminanceAtZenith:{type:Number,default:.2}},wm={sphericalHarmonicCoefficients:{type:[Array,Object],watcherOptions:{cesiumObjectBuilder:Un}}},xm={specularEnvironmentMaps:String},nx={imageBasedLighting:{type:Object,watcherOptions:{cesiumObjectBuilder:r7}}},Em={backFaceCulling:{type:Boolean,default:!0}},Pm={colors:{type:Array,watcherOptions:{cesiumObjectBuilder:Z8,deep:!0}}},Om={data:{type:[String,Object],required:!0}},gc={sourceUri:{type:[String,Object]}},a7={options:{type:Object,watcherOptions:{cesiumObjectBuilder:Y8,deep:!0}}},rx={glowColor:{type:[String,Array,Object],default:()=>[0,1,0,.05],watcherOptions:{cesiumObjectBuilder:Je}}},ox={clearColor:{type:[String,Array,Object],watcherOptions:{cesiumObjectBuilder:Je}}},ax={scissorRectangle:{type:[Object,Array],watcherOptions:{cesiumObjectBuilder:A2}}},At={enableMouseEvent:{type:Boolean,default:!0}};var sx=Object.freeze({__proto__:null,customShader:hm,maximumMemoryUsage:Q2,tileStyle:pm,defaultColor:J2,viewFrom:$2,projectionTransforms:ta,sourceUri:gc,colors:Pm,enableMouseEvent:At,backFaceCulling:Em,imageBasedLighting:nx,specularEnvironmentMaps:xm,sphericalHarmonicCoefficients:wm,luminanceAtZenith:_m,maximumScreenSpaceError:rm,runAnimations:N2,articulations:V2,scissorRectangle:ax,clearColor:ox,glowColor:rx,options:a7,data:Om,imageSubRegion:j2,coordinates:W2,nodeTransformations:k2,hierarchy:G2,plane:z2,colorToAlpha:Z2,cutoutRectangle:q2,polylinePositions:Cm,shapePositions:bm,imageSize:tx,maximumImageSize:ex,minimumImageSize:K2,endColor:Y2,startColor:X2,shape:H2,lightColor:em,lightColor2:ix,imageBasedLightingFactor:lc,polygonHierarchy:ra,orientation:Fp,origin:ym,frustum:gm,maximumCone:ac,minimumCone:oc,maximumClock:rc,minimumClock:nc,innerRadii:ic,radius:il,center:tl,debugWireframe:vm,vertexFormat:Fi,position:Qo,loop:fm,geometryInstances:Ys,depthFailAppearance:mm,appearance:Ra,interleave:Xs,releaseGeometryInstances:Js,debugShowShadowVolume:mc,id:vo,allowPicking:ia,asynchronous:na,vertexCacheOptimize:fc,compressVertices:Ks,modelMatrix:Wn,debugShowBoundingVolume:hr,scene:el,blendOption:vc,maximumHeights:dc,minimumHeights:cc,arcType:Xr,clampToGround:qs,closeBottom:nm,closeTop:im,perPositionHeight:uc,pixelSize:tm,clippingPlanes:Ws,colorBlendAmount:Kp,colorBlendMode:Yp,silhouetteSize:Xp,silhouetteColor:Jp,clampAnimations:Qp,incrementallyLoadTextures:Zp,maximumScale:qp,minimumPixelSize:Wp,uri:Hp,fillColor:Up,backgroundPadding:Gp,backgroundColor:zp,showBackground:Vp,labelStyle:kp,font:Np,text:jp,subdivisions:sc,slicePartitions:Ba,stackPartitions:La,radii:tc,stRotation:wr,semiMinorAxis:ec,semiMajorAxis:Ku,slices:Yu,numberOfVerticalLines:Da,bottomRadius:Xu,topRadius:Ju,length:Qu,zIndex:Aa,classificationType:cr,granularity:Ut,cornerType:ea,extrudedHeightReference:Hs,extrudedHeight:Ji,positions:ln,image:Wu,scale:Xo,pixelOffset:Ia,eyeOffset:Vs,horizontalOrigin:zs,verticalOrigin:Us,heightReference:Zi,depthFailColor:o7,color:Qr,rotation:Jr,alignedAxis:$p,sizeInMeters:qu,width:sr,height:Bi,scaleByDistance:Yo,translucencyByDistance:Ko,pixelOffsetScaleByDistance:Gs,disableDepthTestDistance:Jo,dimensions:Zu,fill:lr,depthFailMaterial:U2,material:sn,outline:ur,outlineColor:zi,outlineWidth:Qi,shadows:Ri,distanceDisplayCondition:ni,show:it,times:dm,clock:Qs,getFeatureInfoFormats:cm,subdomains:pc,format:um,accessToken:lm,fileExtension:sm,minimumLevel:Pn,maximumLevel:un,tileHeight:Er,url:Hn,token:om,tileDiscardPolicy:Zs,layers:am,enablePickFeatures:hc,rectangle:Oi,tilingScheme:dr,ellipsoid:pt,credit:Ci,tileWidth:xr}),lx={name:"zh-hans",nativeName:"\u4E2D\u6587(\u7B80\u4F53)",vc:{loadError:"\u52A0\u8F7D\u5931\u8D25\uFF0C\u5FC5\u987B\u4F5C\u4E3A VcViewer \u7684\u5B50\u7EC4\u4EF6\u52A0\u8F7D\u3002",navigation:{compass:{outerTip:`\u65CB\u8F6C\u89C6\u56FE\uFF1A\u987A/\u9006\u65F6\u9488\u65B9\u5411\u62D6\u62FD\u7F57\u76D8\u5916\u73AF\u3002
\u91CD\u7F6E\u89C6\u56FE\uFF1A\u53CC\u51FB\u7F57\u76D8\u5916\u73AF\u3002`,innerTip:`\u7FFB\u8F6C\u89C6\u56FE\uFF1A\u7531\u5185\u73AF\u5411\u5916\u73AF\u62D6\u62FD\u7F57\u76D8\u3002
 \u6216\u8005\u6309\u4F4F Ctrl \u952E\u7684\u540C\u65F6\u62D6\u62FD\u5730\u56FE\u3002`,title:"\u6309\u4F4F\u9F20\u6807\u62D6\u62FD\u65CB\u8F6C\u76F8\u673A\u3002"},zoomCotrol:{zoomInTip:"\u653E\u5927",zoomResetTip:"\u91CD\u7F6E\u89C6\u56FE",zoomOutTip:"\u7F29\u5C0F"},print:{printTip:"\u573A\u666F\u622A\u56FE/\u6253\u5370",printViewTitle:"\u6253\u5370\u9884\u89C8",credit:"\u5730\u56FE\u7248\u6743",screenshot:"\u573A\u666F\u622A\u56FE"},myLocation:{myLocationTip:"\u5B9A\u4F4D\u60A8\u7684\u4F4D\u7F6E",positioning:"\u5B9A\u4F4D\u4E2D...",fail:"\u5B9A\u4F4D\u5931\u8D25",centreMap:"\u6211\u7684\u4F4D\u7F6E",lat:"\u7EAC\u5EA6",lng:"\u7ECF\u5EA6",address:"\u5730\u5740"},statusBar:{lat:"\u7EAC\u5EA6",lng:"\u7ECF\u5EA6",zone:"\u5E26\u53F7",e:"X",n:"Y",elev:"\u9AD8\u7A0B",level:"\u5C42\u7EA7",heading:"\u65B9\u4F4D",pitch:"\u4FEF\u4EF0",roll:"\u4FA7\u7FFB",cameraHeight:"\u89C6\u9AD8",tip:"\u70B9\u51FB\u5207\u6362\u9F20\u6807\u663E\u793A\u5750\u6807\u4E3A UTM \u6295\u5F71\u5750\u6807"}},navigationSm:{compass:{outerTip:"\u65CB\u8F6C\u89C6\u56FE\uFF1A\u987A/\u9006\u65F6\u9488\u65B9\u5411\u62D6\u62FD\u7F57\u76D8\u5916\u73AF\uFF1B\u91CD\u7F6E\u89C6\u56FE\uFF1A\u53CC\u51FB\u7F57\u76D8\u5916\u73AF\u3002"},zoomCotrol:{zoomInTip:"\u653E\u5927",zoomBarTip:"\u6309\u4F4F\u6ED1\u5757\u5411\u4E0A\u653E\u5927\uFF0C\u5411\u4E0B\u7F29\u5C0F\u3002",zoomOutTip:"\u7F29\u5C0F"}},measurement:{expand:"\u5C55\u5F00",collapse:"\u6536\u62E2",editor:{move:"\u79FB\u52A8\u8282\u70B9",insert:"\u63D2\u5165\u8282\u70B9",remove:"\u79FB\u9664\u8282\u70B9",removeAll:"\u79FB\u9664\u6240\u6709\u8282\u70B9"},distance:{tip:"\u8DDD\u79BB\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u8DDD\u79BB\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u8DDD\u79BB\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},"component-distance":{tip:"\u4E09\u89D2\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E09\u89D2\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E09\u89D2\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},polyline:{tip:"\u6298\u7EBF\u8DDD\u79BB\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u91CF\u7B97\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},horizontal:{tip:"\u6C34\u5E73\u8DDD\u79BB\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u91CF\u7B97\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},vertical:{tip:"\u5782\u76F4\u8DDD\u79BB\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5782\u76F4\u8DDD\u79BB\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5782\u76F4\u8DDD\u79BB\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},height:{tip:"\u5730\u8868\u9AD8\u5EA6\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u9AD8\u5EA6\u91CF\u7B97\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u9AD8\u5EA6\u91CF\u7B97\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},area:{tip:"\u9762\u79EF\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u91CF\u7B97\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},point:{tip:"\u5750\u6807\u91CF\u7B97",drawingTipStart:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u5750\u6807\u91CF\u7B97\u70B9\u3002",drawingTipEnd:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u5750\u6807\u91CF\u7B97\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002",lng:"\u7ECF\u5EA6\uFF1A",lat:"\u7EAC\u5EA6\uFF1A",height:"\u9AD8\u5EA6\uFF1A",slope:"\u5761\u5EA6\uFF1A"},rectangle:{tip:"\u77E9\u5F62\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u77E9\u5F62\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u77E9\u5F62\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},regular:{tip:"\u6B63\u591A\u8FB9\u5F62\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},circle:{tip:"\u5706\u5F62\u91CF\u7B97",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5706\u5F62\u91CF\u7B97\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5706\u5F62\u91CF\u7B97\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},clear:{tip:"\u6E05\u9664\u91CF\u7B97\u7ED3\u679C"}},drawing:{expand:"\u5C55\u5F00",collapse:"\u6536\u62E2",editor:{move:"\u79FB\u52A8\u8282\u70B9",insert:"\u63D2\u5165\u8282\u70B9",remove:"\u79FB\u9664\u8282\u70B9",removeAll:"\u79FB\u9664\u6240\u6709\u8282\u70B9"},pin:{tip:"\u7ED8\u5236\u56FE\u6807\u70B9",drawingTipStart:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u56FE\u6807\u70B9\u3002",drawingTipEnd:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u56FE\u6807\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},point:{tip:"\u7ED8\u5236\u70B9",drawingTipStart:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u70B9\u3002",drawingTipEnd:"\u70B9\u51FB\u5DE6\u952E\u7ED8\u5236\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},polyline:{tip:"\u7ED8\u5236\u7EBF",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u7ED8\u5236\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},polygon:{tip:"\u7ED8\u5236\u9762",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u7B2C\u4E00\u4E2A\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u4E0B\u4E00\u4E2A\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u7ED8\u5236\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},rectangle:{tip:"\u7ED8\u5236\u77E9\u5F62",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u77E9\u5F62\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u77E9\u5F62\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},circle:{tip:"\u7ED8\u5236\u5706",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5706\u5F62\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u5706\u5F62\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},regular:{tip:"\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u6B63\u591A\u8FB9\u5F62\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},clear:{tip:"\u6E05\u9664\u7ED8\u5236\u7ED3\u679C"}},analysis:{expand:"\u5C55\u5F00",collapse:"\u6536\u62E2",editor:{move:"\u79FB\u52A8\u8282\u70B9",insert:"\u63D2\u5165\u8282\u70B9",remove:"\u79FB\u9664\u8282\u70B9",removeAll:"\u79FB\u9664\u6240\u6709\u8282\u70B9"},sightline:{tip:"\u901A\u89C6\u5206\u6790",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u89C2\u6D4B\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u76EE\u6807\u70B9\uFF0C\u53CC\u51FB\u5DE6\u952E\u7ED3\u675F\u7ED8\u5236\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},viewshed:{tip:"\u53EF\u89C6\u57DF\u5206\u6790",drawingTipStart:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u53EF\u89C6\u57DF\u5206\u6790\u8D77\u70B9\u3002",drawingTipEnd:"\u5355\u51FB\u5DE6\u952E\u7ED8\u5236\u53EF\u89C6\u57DF\u5206\u6790\u7EC8\u70B9\u3002",drawingTipEditing:"\u79FB\u52A8\u9F20\u6807\u4FEE\u6539\u8282\u70B9\uFF0C\u5355\u51FB\u5DE6\u952E\u786E\u5B9A\u4FEE\u6539\uFF0C\u5355\u51FB\u53F3\u952E\u653E\u5F03\u4FEE\u6539\u3002"},clear:{tip:"\u6E05\u9664\u5206\u6790\u7ED3\u679C"}},overview:{show:"\u663E\u793A\u9E70\u773C",hidden:"\u9690\u85CF\u9E70\u773C"},typhoon:{warn:"\u64AD\u653E\u53F0\u98CE\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A\u672A\u627E\u5230\u5BF9\u5E94\u7F16\u53F7\u7684\u53F0\u98CE\u6570\u636E\u3002"}}};const Mm=e=>(t,i)=>Sm(t,i,Gh(e)),Sm=(e,t,i)=>aw(i,e,e).replace(/\{(\w+)\}/g,(n,r)=>{var a;return`${(a=t==null?void 0:t[r])!=null?a:`{${r}}`}`}),Tm=e=>{const t=ge(()=>Gh(e).name),i=T_(e)?e:he(e);return{lang:t,locale:i,t:Mm(e)}},ri=()=>{const e=zu("locale");return Tm(ge(()=>e.value||lx))};function yc(e,t,i){const n=(s,l,c=!0)=>{const d=l||t.cesiumEvents||[];d&&d.forEach(h=>{if(s[h]){const p=Ze(t,h),f=c?"addEventListener":"removeEventListener";p&&s[h][f](p)}})},r=s=>{var l;const{viewer:c,cesiumObject:d}=t;if(d===void 0||c===void 0)return;const{ScreenSpaceEventHandler:h,ScreenSpaceEventType:p}=Cesium;(!c._vcPickScreenSpaceEventHandler||!c._vcViewerScreenSpaceEventHandler)&&(c._vcPickScreenSpaceEventHandler=new h(c.canvas),c._vcViewerScreenSpaceEventHandler=new h(c.canvas),Im.forEach(f=>{const v=Ze(t,f);v&&c._vcViewerScreenSpaceEventHandler.setInputAction(v,p[f]),c._vcPickScreenSpaceEventHandler.setInputAction(a.bind({eventName:f,viewer:c}),p[f])})),n(d,t.cesiumEvents||[],s),(l=t.cesiumMembersEvents)==null||l.forEach(f=>{const v=$t(f.name)&&f.name.length>0&&d[f.name[0]]?d[f.name[0]][f.name[1]]:d[f.name];v&&n(v,f.events,s)}),e.enableMouseEvent&&ux.forEach(f=>{const v=Ze(t,f);s?v&&(d[`vc${f}`]=v):v&&delete d[`vc${f}`]})};function a(s){if(!e.enableMouseEvent||!s)return;const l=this.viewer,{eventName:c}=this,d=s.position||s.endPosition;if(!d)return;const h=[];let p;c.indexOf("LEFT_DOUBLE_CLICK")!==-1?p="dblclick":c.indexOf("CLICK")!==-1?p="click":c.indexOf("DOWN")!==-1?p="mousedown":c.indexOf("UP")!==-1?p="mouseup":c.indexOf("MOUSE_MOVE")!==-1&&(p="mousemove");let f;p==="mousemove"?f="mouseout":p==="click"&&(f="clickout");const v=l.scene.pick(d);if(Cesium.defined(v)?(this.pickedFeature&&this.pickedFeature.id!==v.id&&h.push({callbackName:f,pickedFeature:this.pickedFeature}),p==="mousemove"&&(!this.pickedFeature||this.pickedFeature.id!==v.id)&&h.push({callbackName:"mouseover",pickedFeature:v}),h.push({callbackName:p,pickedFeature:v})):(this.pickedFeature&&h.push({callbackName:f,pickedFeature:this.pickedFeature}),this.pickedFeature=void 0),h.length===0)return;let y;const w=l.scene;if(w.mode===Cesium.SceneMode.SCENE3D){const S=w.camera.getPickRay(d);y=w.globe.pick(S,w)}else y=w.camera.pickEllipsoid(d,w.globe.ellipsoid);let C=-1;c.indexOf("LEFT")!==-1?C=0:c.indexOf("MIDDLE")!==-1?C=1:c.indexOf("RIGHT")!==-1&&(C=2);const M=[];h.forEach(S=>{const _=S.callbackName,O=S.pickedFeature;O.id&&($t(O.id)?O.id[0]instanceof Cesium.Entity?M.push({callbackName:_,cesiumObject:O.id[0].entityCollection.owner,pickedFeature:O}):M.push({callbackName:_,cesiumObject:O.primitive.owner,pickedFeature:O}):O.id instanceof Cesium.Entity&&(M.push({callbackName:_,cesiumObject:O.id,pickedFeature:O}),M.push({callbackName:_,cesiumObject:O.id.entityCollection.owner,pickedFeature:O})));const I=A=>{M.push({callbackName:_,cesiumObject:A,pickedFeature:O}),A._vcParent&&I(A._vcParent)};O.primitive&&(O.primitive._vcParent&&I(O.primitive._vcParent),M.push({callbackName:_,cesiumObject:O.primitive,pickedFeature:O})),O.collection&&(O.collection._vcParent&&I(O.collection._vcParent),M.push({callbackName:_,cesiumObject:O.collection,pickedFeature:O}))}),M.forEach(S=>{if(S.callbackName){const _=S.cesiumObject[`vc${S.callbackName}`]||S.cesiumObject[`on${Nu(S.callbackName)}`]||S.cesiumObject[ye(`on${Nu(S.callbackName)}`)];if(Cesium.defined(_)){const O={type:`on${S.callbackName}`,windowPosition:d,surfacePosition:y,pickedFeature:S.pickedFeature,button:C,cesiumObject:S.cesiumObject};_ instanceof Cesium.CallbackProperty?_._callback(O):_(O)}}}),this.pickedFeature=v}return{bindEvents:n,registerEvents:r}}const Im=["LEFT_CLICK","LEFT_DOUBLE_CLICK","LEFT_DOWN","LEFT_UP","MIDDLE_CLICK","MIDDLE_DOWN","MIDDLE_UP","MOUSE_MOVE","PINCH_END","PINCH_MOVE","PINCH_START","RIGHT_CLICK","RIGHT_DOWN","RIGHT_UP","WHEEL"],ux=["mousedown","mouseup","click","clickout","dblclick","mousemove","mouseover","mouseout"];function Am(){let e;return fo(()=>{clearTimeout(e)}),{registerTimeout(t,i){clearTimeout(e),e=setTimeout(t,i)},removeTimeout(){clearTimeout(e)}}}const s7=["Graphics","VcEntity","Datasource","VcOverlayDynamic"];function ht(e,{emit:t,attrs:i},n){const r=ks(n),{registerTimeout:a,removeTimeout:s}=Am();n.alreadyListening=[],n.removeCallbacks=[];let l=[];n.mounted=!1;const c=w2();n.vcMitt=c;const d=Eu(Wr),{t:h}=ri();if(d===void 0){console.error(`${n.cesiumClass} ${h("vc.loadError")}`);return}const p=bi(n),f=yc(e,n);n.children=[];const v={billboard:!0,box:!0,corridor:!0,cylinder:!0,ellipse:!0,ellipsoid:!0,label:!0,model:!0,tileset:!0,path:!0,plane:!0,point:!0,polygon:!0,polyline:!0,polylineVolume:!0,rectangle:!0,wall:!0},y=zu(),w=async()=>{if(t("beforeLoad",n),p.nowaiting)return!0;await p.proxy.creatingPromise},C=async()=>{var b;if(n.mounted)return!1;r.debug(`${n.cesiumClass}---loading`),await w();const{Cesium:E,viewer:L}=d;return n.viewer=L,n.Cesium=E,!p.cesiumObject&&!p.nowaiting?await((b=p.proxy)==null?void 0:b.load()):(D(!0),V().then(async P=>(n.cesiumObject=P,I().then(()=>{n.mounted=!0,p.children.push(n),Object.assign(n.proxy,{cesiumObject:n.cesiumObject});const T={Cesium:E,viewer:L,cesiumObject:P,vm:n};return t("ready",T),c.emit("ready",T),r.debug(`${n.cesiumClass}---loaded`),T}))))},M=async()=>{await n.unloadingPromise},S=async()=>{await M();for(let b=0;b<n.children.length;b++)await n.children[b].proxy.unload();return n.children.length=0,n.isUnmounted=!1,n.mounted?A().then(async()=>(D(!1),n.cesiumObject=void 0,n.mounted=!1,n.removeCallbacks.forEach(b=>{b()}),t("destroyed",n),c.emit("destroyed",n),r.debug(`${n.cesiumClass}---unmounted`),n.renderByParent&&!n.unloadingPromise?p.proxy.unload():!0)):!1},_=async()=>{await n.reloadingPromise},O=async()=>(await _(),S().then(()=>C())),I=async()=>{var b;return f.registerEvents(!0),((b=n.mount)==null?void 0:b.call(n))||!0},A=async()=>{var b;return f.registerEvents(!1),((b=n.unmount)==null?void 0:b.call(n))||!0},V=async()=>{if(r.debug("do createCesiumObject"),hi(n.createCesiumObject))return n.createCesiumObject();{const b=G(e);return new Cesium[n.cesiumClass](b)}},$=(b,E)=>{let L=E==null?void 0:E.deep;const{SampledPositionProperty:P,Appearance:T,DebugAppearance:F,MaterialAppearance:N,PolylineColorAppearance:j,EllipsoidSurfaceAppearance:U,PerInstanceColorAppearance:te,PolylineMaterialAppearance:ie}=Cesium;if(b==="position")L=!(n.proxy[b]instanceof P);else if(b==="appearance"||b==="depthFailAppearance"){const K=n.proxy[b];L=!(K instanceof T||K instanceof F||K instanceof N||K instanceof j||K instanceof U||K instanceof te||K instanceof ie||_p(K).indexOf("Appearance")!==-1)}return L},D=b=>{if(b){if(!n.cesiumClass||!Cesium[n.cesiumClass])return;e&&Object.keys(e).forEach(E=>{var L,P,T,F,N;let j=E;if(E==="labelStyle"||E==="wmtsStyle"?j="style":E==="bmKey"&&(j="key"),(P=(L=n.proxy)==null?void 0:L.$options.watch)!=null&&P[E]||n.alreadyListening.indexOf(E)!==-1)return;const U=(F=(T=n.proxy)==null?void 0:T.$options.props[E])==null?void 0:F.watcherOptions,te=(N=n.proxy)==null?void 0:N.$watch(E,async(ie,K)=>{await n.proxy.creatingPromise;const{cesiumObject:Z}=n,z=Z&&Object.getOwnPropertyDescriptor(Z,j),Q=Z&&Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Z),j);if(z&&(z.writable||z.set)||Q&&(Q.writable||Q.set)){if(U&&U.cesiumObjectBuilder){const re=U.cesiumObjectBuilder.call(n,ie,n.viewer.scene.globe.ellipsoid);Cesium.defined(Z[j])&&Cesium.defined(Z[j]._callback)||(Z[j]=re)}else Z[j]=q(j,ie);return!0}else(!ju(ie,K)||Array.isArray(ie))&&(i["reload-mode"]==="once"||i.reloadMode==="once"||y.value.reloadMode==="once"?(s(),a(()=>{n.proxy.reload()},0)):n.reloadingPromise=new Promise((re,X)=>{n.proxy.reload().then(()=>{re(!0)}).catch(J=>{X(J)})}))},{deep:$(E,U)});l.push(te)})}else l.forEach(E=>E()),l=[]},G=(b,E)=>{const L={};return b&&Object.keys(b).forEach(P=>{let T=P;P==="labelStyle"||P==="wmtsStyle"?T="style":P==="bmKey"&&(T="key"),!(b[P]===void 0||b[P]===null)&&(_p(b[P])&&v[T]&&(n.cesiumClass==="Entity"||n.cesiumClass.indexOf("DataSource")>0||n.cesiumClass==="VcOverlayDynamic")?L[T]=G(b[P],E):L[T]=q(P,b[P],E))}),L},q=(b,E,L)=>{var P,T;if(_p(E)&&v[b]&&(n.cesiumClass==="Entity"||n.cesiumClass.indexOf("DataSource")>0||n.cesiumClass==="VcOverlayDynamic"))return G(E,L);{const F=(P=n.proxy)==null?void 0:P.$options.name;let N=!1;hi(E)&&F&&s7.forEach(U=>{F.indexOf(U)!==-1&&(N=!0)});const j=((T=n.proxy)==null?void 0:T.$options.props[b])||(L==null?void 0:L[b])||sx[b]&&sx[b][b];return j!=null&&j.watcherOptions&&!Ns(E)?j.watcherOptions.cesiumObjectBuilder.call(n,E,n.viewer.scene.globe.ellipsoid):N?new Cesium.CallbackProperty(E,!1):E}},H=()=>qo({},d||{}),g=new Promise((b,E)=>{try{let L=!1;d.viewer&&(L=!0,C().then(P=>{b(P),L=!1}).catch(P=>{t("unready",P),E(P)})),p.vcMitt.on("ready",()=>{!L&&!n.isUnmounted&&C().then(P=>{b(P)}).catch(P=>{t("unready",P),E(P)})})}catch(L){t("unready",L),E(L)}});return r.debug(`${n.cesiumClass}---onCreated`),Vt(()=>{r.debug(`${n.cesiumClass}---onUnmounted`),n.unloadingPromise=new Promise((b,E)=>{S().then(()=>{r.debug(`${n.cesiumClass}---unloaded`),b(!0),n.isUnmounted=!0,n.unloadingPromise=void 0,c.all.clear()})}),n.alreadyListening=[]}),Object.assign(n.proxy,{creatingPromise:g,load:C,unload:S,reload:O,getCreatingPromise:()=>g,getCesiumObject:()=>n.cesiumObject}),{$services:d,load:C,unload:S,reload:O,creatingPromise:g,transformProp:q,transformProps:G,unwatchFns:l,setPropsWatcher:D,logger:r,getServices:H}}function Fa(e,t,i){i.cesiumEvents=["changedEvent","errorEvent","loadingEvent"],i.cesiumClass==="KmlDataSource"&&(i.cesiumEvents.push("refreshEvent"),i.cesiumEvents.push("unsupportedNodeEvent")),i.cesiumMembersEvents=[{name:"clock",events:["definitionChanged"]},{name:"clustering",events:["clusterEvent"]},{name:"entities",events:["collectionChanged"]}];const n=ht(e,t,i);if(n===void 0)return;i.alreadyListening.push("entities");let r=[];r.push(Pe(()=>yt(e.entities),(l,c)=>{if(!i.mounted)return;const d=i.cesiumObject;if(l.length===c.length){const h=[];for(let p=0;p<l.length;p++){const f=l[p],v=c[p];JSON.stringify(f)!==JSON.stringify(v)&&h.push({newOptions:f,oldOptions:v})}h.forEach(p=>{const f=d.entities.getById(p.oldOptions.id);if(p.oldOptions.id===p.newOptions.id)f&&Object.keys(p.newOptions).forEach(v=>{p.oldOptions[v]!==p.newOptions[v]&&(f[v]=n.transformProp(v,p.newOptions[v]))});else{d.entities.remove(f);const v=p.newOptions;a(d,[v])}})}else{const h=Zt(l,c,"id"),p=Zt(c,l,"id"),f=[];for(let v=0;v<p.length;v++){const y=d.entities.getById(p[v].id);f.push(y)}f.forEach(v=>{d.entities.remove(v)}),a(d,h)}},{deep:!0}));const a=(l,c)=>{for(let d=0;d<c.length;d++){const h=c[d],p=n.transformProps(h),f=l.entities.add(p);h.id!==f.id&&(h.id=f.id),or(f,p)}};i.mount=async()=>{const l=n.$services.dataSources,c=i.cesiumObject;return c.show=e.show,a(c,e.entities),l.add(c).then(()=>!0)},i.unmount=async()=>{const l=n.$services.dataSources,c=i.cesiumObject;return l&&l.remove(c,e.destroy)};const s=()=>qo(n.getServices(),{get datasource(){return i.cesiumObject},get entities(){var l;return(l=i.cesiumObject)==null?void 0:l.entities}});return Vt(()=>{r.forEach(l=>l()),r=[]}),Gr(Wr,s()),{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function xt(e,t,i){i.cesiumEvents=[],i.renderByParent=!0;const n=ht(e,t,i);if(n!==void 0)return i.mount=async()=>{var r;const a=i.cesiumObject,s=bi(i).proxy;return(r=s.__updateGeometry)==null?void 0:r.call(s,a)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function _i(e,t,i){i.cesiumEvents=["definitionChanged"],ht(e,t,i)!==void 0&&(i.mount=async()=>{var n,r;const a=i.cesiumObject;if(a===void 0)return!1;const s=ye(((n=i.proxy)==null?void 0:n.$options.name)||"").split("-"),l=s.length===3?`update:${s[2]}`:"update:polylineVolume",c=bi(i).proxy;return c&&((r=c.__updateGraphics)==null?void 0:r.call(c,a,l))},i.unmount=async()=>{var n,r;const a=ye(((n=i.proxy)==null?void 0:n.$options.name)||"").split("-"),s=a.length===3?`update:${a[2]}`:"update:polylineVolume",l=bi(i).proxy;return l&&((r=l.__updateGraphics)==null?void 0:r.call(l,void 0,s))})}const bc=e=>AD(e);function Dm(e,t){const i=e.style;Object.keys(t).forEach(n=>{i[n]=t[n]})}function cx(e){if(e==null)return;if(typeof e=="string")try{return document.querySelector(e)||void 0}catch(i){return}const t=T_(e)===!0?e.value:e;if(t)return t.$el||t}const go={hasPassive:!1,passiveCapture:!0,notPassiveCapture:!0,passive:void 0};try{const e=Object.defineProperty({},"passive",{get(){Object.assign(go,{hasPassive:!0,passive:{passive:!0},notPassive:{passive:!1},passiveCapture:{passive:!0,capture:!0},notPassiveCapture:{passive:!1,capture:!0}})}});window.addEventListener("qtest",null,e),window.removeEventListener("qtest",null,e)}catch(e){}function Lm(){}function Bm(e){return e.button===0}function Pr(e){return e.touches&&e.touches[0]?e=e.touches[0]:e.changedTouches&&e.changedTouches[0]?e=e.changedTouches[0]:e.targetTouches&&e.targetTouches[0]&&(e=e.targetTouches[0]),{top:e.clientY,left:e.clientX}}function nl(e){e.stopPropagation()}function oa(e){e.cancelable!==!1&&e.preventDefault()}function Or(e){e.cancelable!==!1&&e.preventDefault(),e.stopPropagation()}function Rm(e,t){if(e===void 0||t===!0&&e.__dragPrevented===!0)return;const i=t===!0?n=>{n.__dragPrevented=!0,n.addEventListener("dragstart",oa,go.notPassiveCapture)}:n=>{delete n.__dragPrevented,n.removeEventListener("dragstart",oa,go.notPassiveCapture)};e.querySelectorAll("a, img").forEach(i)}function wi(e,t,i){const n=`__vc_${t}_evt`;e[n]=e[n]!==void 0?e[n].concat(i):i,i.forEach(r=>{r[0].addEventListener(r[1],e[r[2]],go[r[3]])})}function On(e,t){const i=`__vc_${t}_evt`;e[i]!==void 0&&(e[i].forEach(n=>{n[0].removeEventListener(n[1],e[n[2]],go[n[3]])}),e[i]=void 0)}function l7(e){return e!==Object(e)||e.isComposing===!0||e.qKeyEvent===!0}function rl(e,t){return l7(e)===!0?!1:[].concat(t).includes(e.keyCode)}function Fm(e,t=250){let i=!1,n;return function(){return i===!1&&(i=!0,setTimeout(()=>{i=!1},t),n=e.apply(this,arguments)),n}}function dx(e,t,i,n){i.modifiers.stop===!0&&nl(e);const r=i.modifiers.color;let a=i.modifiers.center;a=a===!0||n===!0;const s=document.createElement("span"),l=document.createElement("span"),c=Pr(e),{left:d,top:h,width:p,height:f}=t.getBoundingClientRect(),v=Math.sqrt(p*p+f*f),y=v/2,w=`${(p-v)/2}px`,C=a?w:`${c.left-d-y}px`,M=`${(f-v)/2}px`,S=a?M:`${c.top-h-y}px`;l.className="vc-ripple__inner",Dm(l,{height:`${v}px`,width:`${v}px`,transform:`translate3d(${C},${S},0) scale3d(.2,.2,1)`,opacity:0}),s.className=`vc-ripple${r?" text-"+r:""}`,s.setAttribute("dir","ltr"),s.appendChild(l),t.appendChild(s);const _=()=>{s.remove(),clearTimeout(O)};i.abort.push(_);let O=setTimeout(()=>{l.classList.add("vc-ripple__inner--enter"),l.style.transform=`translate3d(${w},${M},0) scale3d(1,1,1)`,l.style.opacity="0.2",O=setTimeout(()=>{l.classList.remove("vc-ripple__inner--enter"),l.classList.add("vc-ripple__inner--leave"),l.style.opacity="0",O=setTimeout(()=>{s.remove(),i.abort.splice(i.abort.indexOf(_),1)},275)},250)},50)}function hx(e,{modifiers:t,value:i,arg:n,instance:r}){const a=Object.assign({},t,i);e.modifiers={early:a.early===!0,stop:a.stop===!0,center:a.center===!0,color:a.color||n,keyCodes:[].concat(a.keyCodes||13)}}var $m=bc({name:"ripple",beforeMount(e,t){const i={enabled:t.value!==!1,modifiers:{},abort:[],start(n){i.enabled===!0&&n.qSkipRipple!==!0&&(i.modifiers.early===!0?["mousedown","touchstart"].includes(n.type)===!0:n.type==="click")&&dx(n,e,i,n.qKeyEvent===!0)},keystart:Fm(n=>{i.enabled===!0&&n.qSkipRipple!==!0&&rl(n,i.modifiers.keyCodes)===!0&&n.type===`key${i.modifiers.early===!0?"down":"up"}`&&dx(n,e,i,!0)},300)};hx(i,t),e.__vcripple=i,wi(i,"main",[[e,"mousedown","start","passive"],[e,"touchstart","start","passive"],[e,"click","start","passive"],[e,"keydown","keystart","passive"],[e,"keyup","keystart","passive"]])},updated(e,t){if(t.oldValue!==t.value){const i=e.__vcripple;i.enabled=t.value!==!1,i.enabled===!0&&Object(t.value)===t.value&&hx(i,t)}},beforeUnmount(e){const t=e.__vcripple;t.abort.forEach(i=>{i()}),On(t,"main"),delete e._vcripple}});function Xt(){const e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,n=/(?:Android)/.test(e),r=/(?:Firefox)/.test(e),a=/(?:Chrome|CriOS)/.test(e),s=/(?:iPad|PlayBook)/.test(e)||n&&!/(?:Mobile)/.test(e)||r&&/(?:Tablet)/.test(e),l=/(?:iPhone)/.test(e)&&!s,c=!l&&!n&&!i,d=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);return{isTablet:s,isPhone:l,isAndroid:n,isPc:c,isFireFox:r,isChrome:a,isIOS:d,hasTouch:"ontouchstart"in window||window.navigator.maxTouchPoints>0}}function Mr(){if(window.getSelection!==void 0){const e=window.getSelection();(e==null?void 0:e.empty)!==void 0?e.empty():(e==null?void 0:e.removeAllRanges)!==void 0&&(e.removeAllRanges(),Xt().isPhone!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}var ol=bc({name:"touch-hold",beforeMount(e,t){const{modifiers:i}=t;if(i.mouse!==!0&&Xt().hasTouch!==!0)return;const n={handler:t.value,noop:Lm,mouseStart(a){typeof n.handler=="function"&&Bm(a)===!0&&(wi(n,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),n.start(a,!0))},touchStart(a){var s;if(a.target!==void 0&&typeof n.handler=="function"){const l=a.target;wi(n,"temp",[[l,"touchmove","move","passiveCapture"],[l,"touchcancel","end","notPassiveCapture"],[l,"touchend","end","notPassiveCapture"]]),n.start(a),(s=t==null?void 0:t.touchStart)==null||s.call(t,a)}},start(a,s){n.origin=Pr(a);const l=Date.now();Xt().isPhone===!0&&(document.body.classList.add("non-selectable"),Mr(),n.styleCleanup=c=>{n.styleCleanup=void 0;const d=()=>{document.body.classList.remove("non-selectable")};c===!0?(Mr(),setTimeout(d,10)):d()}),n.triggered=!1,n.sensitivity=s===!0?n.mouseSensitivity:n.touchSensitivity,n.timer=setTimeout(()=>{Mr(),n.triggered=!0,n.handler({evt:a,touch:s!==!0,mouse:s===!0,position:n.origin,duration:Date.now()-l})},n.duration)},move(a){const{top:s,left:l}=Pr(a);(Math.abs(l-n.origin.left)>=n.sensitivity||Math.abs(s-n.origin.top)>=n.sensitivity)&&clearTimeout(n.timer)},end(a){var s;On(n,"temp"),n.styleCleanup!==void 0&&n.styleCleanup(n.triggered),n.triggered===!0?a!==void 0&&Or(a):clearTimeout(n.timer),(s=t==null?void 0:t.touchEnd)==null||s.call(t,a)}},r=[600,5,7];typeof t.arg=="string"&&t.arg.length>0&&t.arg.split(":").forEach((a,s)=>{const l=parseInt(a,10);l&&(r[s]=l)}),[n.duration,n.touchSensitivity,n.mouseSensitivity]=r,e.__vctouchhold=n,i.mouse===!0&&wi(n,"main",[[e,"mousedown","mouseStart",`passive${i.mouseCapture===!0?"Capture":""}`]]),Xt().hasTouch===!0&&wi(n,"main",[[e,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[e,"touchend","noop","notPassiveCapture"]])},updated(e,t){const i=e.__vctouchhold;i!==void 0&&t.oldValue!==t.value&&(typeof t.value!="function"&&i.end(),i.handler=t.value)},beforeUnmount(e){const t=e.__vctouchhold;t!==void 0&&(On(t,"main"),On(t,"temp"),clearTimeout(t.timer),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__vctouchhold)}});const px={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},u7=new RegExp(`^([\\d+]+|${Object.keys(px).join("|")})$`,"i");function c7(e,t){const{top:i,left:n}=Pr(e);return Math.abs(n-t.left)>=7||Math.abs(i-t.top)>=7}var mx=bc({name:"touch-repeat",beforeMount(e,{modifiers:t,value:i,arg:n,touchStart:r}){const a=Object.keys(t).reduce((d,h)=>{if(u7.test(h)===!0){const p=isNaN(parseInt(h,10))?px[h.toLowerCase()]:parseInt(h,10);p>=0&&d.push(p)}return d},[]);if(t.mouse!==!0&&Xt().hasTouch!==!0&&a.length===0)return;const s=typeof n=="string"&&n.length>0?n.split(":").map(d=>parseInt(d,10)):[0,600,300],l=s.length-1,c={keyboard:a,handler:i,noop:Lm,mouseStart(d){c.event===void 0&&typeof c.handler=="function"&&Bm(d)===!0&&(wi(c,"temp",[[document,"mousemove","move","passiveCapture"],[document,"click","end","notPassiveCapture"]]),c.start(d,!0))},keyboardStart(d){if(typeof c.handler=="function"&&rl(d,a)===!0){if((s[0]===0||c.event!==void 0)&&(Or(d),e.focus(),c.event!==void 0))return;wi(c,"temp",[[document,"keyup","end","notPassiveCapture"],[document,"click","end","notPassiveCapture"]]),c.start(d,!1,!0)}},touchStart(d){if(d.target!==void 0&&typeof c.handler=="function"){const h=d.target;wi(c,"temp",[[h,"touchmove","move","passiveCapture"],[h,"touchcancel","end","notPassiveCapture"],[h,"touchend","end","notPassiveCapture"]]),c.start(d),r==null||r(d)}},start(d,h,p){p!==!0&&(c.origin=Pr(d));function f(y){c.styleCleanup=void 0,document.documentElement.style.cursor="";const w=()=>{document.body.classList.remove("non-selectable")};y===!0?(Mr(),setTimeout(w,10)):w()}Xt().isPhone===!0&&(document.body.classList.add("non-selectable"),Mr(),c.styleCleanup=f),c.event={touch:h!==!0&&p!==!0,mouse:h===!0,keyboard:p===!0,startTime:Date.now(),repeatCount:0};const v=()=>{if(c.event===void 0)return;c.event.repeatCount===0&&(c.event.evt=d,p===!0?c.event.keyCode=d.keyCode:c.event.position=Pr(d),Xt().isPhone!==!0&&(document.documentElement.style.cursor="pointer",document.body.classList.add("non-selectable"),Mr(),c.styleCleanup=f)),c.event.duration=Date.now()-c.event.startTime,c.event.repeatCount+=1,c.handler(c.event);const y=l<c.event.repeatCount?l:c.event.repeatCount;c.timer=setTimeout(v,s[y])};s[0]===0?v():c.timer=setTimeout(v,s[0])},move(d){c.event!==void 0&&c7(d,c.origin)===!0&&clearTimeout(c.timer)},end(d){c.event!==void 0&&(c.styleCleanup!==void 0&&c.styleCleanup(!0),d!==void 0&&c.event.repeatCount>0&&Or(d),On(c,"temp"),clearTimeout(c.timer),c.event=void 0)}};e.__vctouchrepeat=c,t.mouse===!0&&wi(c,"main",[[e,"mousedown","mouseStart",`passive${t.mouseCapture===!0?"Capture":""}`]]),Xt().hasTouch===!0&&wi(c,"main",[[e,"touchstart","touchStart",`passive${t.capture===!0?"Capture":""}`],[e,"touchend","noop","notPassiveCapture"]]),a.length>0&&wi(c,"main",[[e,"keydown","keyboardStart",`notPassive${t.keyCapture===!0?"Capture":""}`]])},updated(e,{oldValue:t,value:i}){const n=e.__vctouchrepeat;n!==void 0&&t!==i&&(typeof i!="function"&&n.end(),n.handler=i)},beforeUnmount(e){const t=e.__vctouchrepeat;t!==void 0&&(clearTimeout(t.timer),On(t,"main"),On(t,"temp"),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__vctouchrepeat)}});const d7=["left","right","up","down","horizontal","vertical"],h7={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0,all:!0};function fx(e){const t={};return d7.forEach(i=>{e[i]&&(t[i]=!0)}),Object.keys(t).length===0?h7:(t.horizontal===!0&&(t.left=t.right=!0),t.vertical===!0&&(t.up=t.down=!0),t.left===!0&&t.right===!0&&(t.horizontal=!0),t.up===!0&&t.down===!0&&(t.vertical=!0),t.horizontal===!0&&t.vertical===!0&&(t.all=!0),t)}const jm=Xt().isIOS||navigator.vendor.toLowerCase().indexOf("apple")>-1?()=>document:e=>e;function vx(e,t){return t.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof t.handler=="function"&&e.target.nodeName.toUpperCase()!=="INPUT"&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(t.uid)===-1)}function Nm(e,t,i){const n=Pr(e);let r,a=n.left-t.event.x,s=n.top-t.event.y,l=Math.abs(a),c=Math.abs(s);const d=t.direction;d.horizontal===!0&&d.vertical!==!0?r=a<0?"left":"right":d.horizontal!==!0&&d.vertical===!0?r=s<0?"up":"down":d.up===!0&&s<0?(r="up",l>c&&(d.left===!0&&a<0?r="left":d.right===!0&&a>0&&(r="right"))):d.down===!0&&s>0?(r="down",l>c&&(d.left===!0&&a<0?r="left":d.right===!0&&a>0&&(r="right"))):d.left===!0&&a<0?(r="left",l<c&&(d.up===!0&&s<0?r="up":d.down===!0&&s>0&&(r="down"))):d.right===!0&&a>0&&(r="right",l<c&&(d.up===!0&&s<0?r="up":d.down===!0&&s>0&&(r="down")));let h=!1;if(r===void 0&&i===!1){if(t.event.isFirst===!0||t.event.lastDir===void 0)return{};r=t.event.lastDir,h=!0,r==="left"||r==="right"?(n.left-=a,l=0,a=0):(n.top-=s,c=0,s=0)}return{synthetic:h,payload:{evt:e,touch:t.event.mouse!==!0,mouse:t.event.mouse===!0,position:n,direction:r,isFirst:t.event.isFirst,isFinal:i===!0,duration:Date.now()-t.event.time,distance:{x:l,y:c},offset:{x:a,y:s},delta:{x:n.left-t.event.lastX,y:n.top-t.event.lastY}}}}let p7=0;var km=bc({name:"touch-pan",beforeMount(e,{value:t,modifiers:i}){if(i.mouse!==!0&&Xt().hasTouch!==!0)return;function n(a,s){i.mouse===!0&&s===!0?Or(a):(i.stop===!0&&nl(a),i.prevent===!0&&oa(a))}const r={uid:"qvtp_"+p7++,handler:t,modifiers:i,direction:fx(i),noop:Lm,mouseStart(a){vx(a,r)&&Bm(a)&&(wi(r,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),r.start(a,!0))},touchStart(a){if(vx(a,r)){const s=a.target;wi(r,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","passiveCapture"],[s,"touchend","end","passiveCapture"]]),r.start(a)}},start(a,s){if(Xt().isFireFox===!0&&Rm(e,!0),r.lastEvt=a,s===!0||i.stop===!0){if(r.direction.all!==!0&&(s!==!0||r.modifiers.mouseAllDir!==!0&&r.modifiers.mousealldir!==!0)){const d=a.type.indexOf("mouse")>-1?new MouseEvent(a.type,a):new TouchEvent(a.type,a);a.defaultPrevented===!0&&oa(d),a.cancelBubble===!0&&nl(d),Object.assign(d,{qKeyEvent:a.qKeyEvent,qClickOutside:a.qClickOutside,qAnchorHandled:a.qAnchorHandled,qClonedBy:a.qClonedBy===void 0?[r.uid]:a.qClonedBy.concat(r.uid)}),r.initialEvent={target:a.target,event:d}}nl(a)}const{left:l,top:c}=Pr(a);r.event={x:l,y:c,time:Date.now(),mouse:s===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:l,lastY:c}},move(a){if(r.event===void 0)return;const s=Pr(a),l=s.left-r.event.x,c=s.top-r.event.y;if(l===0&&c===0)return;r.lastEvt=a;const d=r.event.mouse===!0,h=()=>{n(a,d);let v;i.preserveCursor!==!0&&i.preservecursor!==!0&&(v=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),d===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Mr(),r.styleCleanup=y=>{if(r.styleCleanup=void 0,v!==void 0&&(document.documentElement.style.cursor=v),document.body.classList.remove("non-selectable"),d===!0){const w=()=>{document.body.classList.remove("no-pointer-events--children")};y!==void 0?setTimeout(()=>{w(),y()},50):w()}else y!==void 0&&y()}};if(r.event.detected===!0){r.event.isFirst!==!0&&n(a,r.event.mouse);const{payload:v,synthetic:y}=Nm(a,r,!1);v!==void 0&&(r.handler(v)===!1?r.end(a):(r.styleCleanup===void 0&&r.event.isFirst===!0&&h(),r.event.lastX=v.position.left,r.event.lastY=v.position.top,r.event.lastDir=y===!0?void 0:v.direction,r.event.isFirst=!1));return}if(r.direction.all===!0||d===!0&&(r.modifiers.mouseAllDir===!0||r.modifiers.mousealldir===!0)){h(),r.event.detected=!0,r.move(a);return}const p=Math.abs(l),f=Math.abs(c);p!==f&&(r.direction.horizontal===!0&&p>f||r.direction.vertical===!0&&p<f||r.direction.up===!0&&p<f&&c<0||r.direction.down===!0&&p<f&&c>0||r.direction.left===!0&&p>f&&l<0||r.direction.right===!0&&p>f&&l>0?(r.event.detected=!0,r.move(a)):r.end(a,!0))},end(a,s){if(r.event!==void 0){if(On(r,"temp"),Xt().isFireFox===!0&&Rm(e,!1),s===!0)r.styleCleanup!==void 0&&r.styleCleanup(),r.event.detected!==!0&&r.initialEvent!==void 0&&r.initialEvent.target.dispatchEvent(r.initialEvent.event);else if(r.event.detected===!0){r.event.isFirst===!0&&r.handler(Nm(a===void 0?r.lastEvt:a,r).payload);const{payload:l}=Nm(a===void 0?r.lastEvt:a,r,!0),c=()=>{r.handler(l)};r.styleCleanup!==void 0?r.styleCleanup(c):c()}r.event=void 0,r.initialEvent=void 0,r.lastEvt=void 0}}};if(e.__qtouchpan=r,i.mouse===!0){const a=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";wi(r,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}Xt().hasTouch===!0&&wi(r,"main",[[e,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,t){const i=e.__qtouchpan;i!==void 0&&(t.oldValue!==t.value&&(typeof t.value!="function"&&i.end(),i.handler=t.value),i.direction=fx(t.modifiers))},beforeUnmount(e){const t=e.__qtouchpan;t!==void 0&&(t.event!==void 0&&t.end(),On(t,"main"),On(t,"temp"),Xt().isFireFox===!0&&Rm(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(),delete e.__qtouchpan)}});function al(){let e,t;const i=new Promise(function(n,r){e=n,t=r});return{resolve:e,reject:t,promise:i}}function Vm(e,{handleMouseClick:t=void 0,handleMouseDown:i=void 0,handleMouseUp:n=void 0,handleMouseMove:r=void 0,handleDoubleClick:a=void 0,handleMouseWheel:s=void 0,handlePinch:l=void 0}){const c=he(void 0),d=he(!1),h=()=>{if(d.value)return;const{ScreenSpaceEventType:Y,KeyboardEventModifier:_e,ScreenSpaceEventHandler:Be}=Cesium;if(!c.value){const{viewer:Bt}=e;c.value=new Be(Bt.canvas),ol.beforeMount(Bt.canvas,{arg:"2000",value:Le,touchStart:We,touchEnd:Ie,modifiers:{}})}const Fe=c.value;Fe.setInputAction(v,Y.LEFT_CLICK),Fe.setInputAction(y,Y.LEFT_CLICK,_e.SHIFT),Fe.setInputAction(w,Y.LEFT_CLICK,_e.CTRL),Fe.setInputAction(V,Y.LEFT_DOWN),Fe.setInputAction($,Y.LEFT_DOWN,_e.SHIFT),Fe.setInputAction(D,Y.LEFT_DOWN,_e.CTRL),Fe.setInputAction(L,Y.LEFT_UP),Fe.setInputAction(P,Y.LEFT_UP,_e.SHIFT),Fe.setInputAction(T,Y.LEFT_UP,_e.CTRL),Fe.setInputAction(O,Y.RIGHT_CLICK),Fe.setInputAction(I,Y.RIGHT_CLICK,_e.SHIFT),Fe.setInputAction(A,Y.RIGHT_CLICK,_e.CTRL),Fe.setInputAction(g,Y.RIGHT_DOWN),Fe.setInputAction(b,Y.RIGHT_DOWN,_e.SHIFT),Fe.setInputAction(E,Y.RIGHT_DOWN,_e.CTRL),Fe.setInputAction(U,Y.RIGHT_UP),Fe.setInputAction(te,Y.RIGHT_UP,_e.SHIFT),Fe.setInputAction(ie,Y.RIGHT_UP,_e.CTRL),Fe.setInputAction(C,Y.MIDDLE_CLICK),Fe.setInputAction(M,Y.MIDDLE_CLICK,_e.SHIFT),Fe.setInputAction(S,Y.MIDDLE_CLICK,_e.CTRL),Fe.setInputAction(G,Y.MIDDLE_DOWN),Fe.setInputAction(q,Y.MIDDLE_DOWN,_e.SHIFT),Fe.setInputAction(H,Y.MIDDLE_DOWN,_e.CTRL),Fe.setInputAction(F,Y.MIDDLE_UP),Fe.setInputAction(N,Y.MIDDLE_UP,_e.SHIFT),Fe.setInputAction(j,Y.MIDDLE_UP,_e.CTRL),Fe.setInputAction(K,Y.LEFT_DOUBLE_CLICK),Fe.setInputAction(Z,Y.LEFT_DOUBLE_CLICK,_e.SHIFT),Fe.setInputAction(z,Y.LEFT_DOUBLE_CLICK,_e.CTRL),Fe.setInputAction(Q,Y.MOUSE_MOVE),Fe.setInputAction(re,Y.MOUSE_MOVE,_e.SHIFT),Fe.setInputAction(X,Y.MOUSE_MOVE,_e.CTRL),Fe.setInputAction(J,Y.WHEEL),Fe.setInputAction(ae,Y.WHEEL,_e.SHIFT),Fe.setInputAction(ne,Y.WHEEL,_e.CTRL),Fe.setInputAction(ce,Y.PINCH_START),Fe.setInputAction(le,Y.PINCH_START,_e.SHIFT),Fe.setInputAction(pe,Y.PINCH_START,_e.CTRL),Fe.setInputAction(Ce,Y.PINCH_END),Fe.setInputAction(Se,Y.PINCH_END,_e.SHIFT),Fe.setInputAction(Re,Y.PINCH_END,_e.CTRL),Fe.setInputAction(Me,Y.PINCH_MOVE),Fe.setInputAction(Te,Y.PINCH_MOVE,_e.SHIFT),Fe.setInputAction($e,Y.PINCH_MOVE,_e.CTRL),d.value=!0},p=()=>{if(!d.value)return;const{ScreenSpaceEventType:Y,KeyboardEventModifier:_e}=Cesium,Be=c.value;if(!Be)return;Be.removeInputAction(Y.LEFT_CLICK),Be.removeInputAction(Y.LEFT_CLICK,_e.SHIFT),Be.removeInputAction(Y.LEFT_CLICK,_e.CTRL),Be.removeInputAction(Y.LEFT_DOWN),Be.removeInputAction(Y.LEFT_DOWN,_e.SHIFT),Be.removeInputAction(Y.LEFT_DOWN,_e.CTRL),Be.removeInputAction(Y.LEFT_UP),Be.removeInputAction(Y.LEFT_UP,_e.SHIFT),Be.removeInputAction(Y.LEFT_UP,_e.CTRL),Be.removeInputAction(Y.RIGHT_CLICK),Be.removeInputAction(Y.RIGHT_CLICK,_e.SHIFT),Be.removeInputAction(Y.RIGHT_CLICK,_e.CTRL),Be.removeInputAction(Y.RIGHT_DOWN),Be.removeInputAction(Y.RIGHT_DOWN,_e.SHIFT),Be.removeInputAction(Y.RIGHT_DOWN,_e.CTRL),Be.removeInputAction(Y.RIGHT_UP),Be.removeInputAction(Y.RIGHT_UP,_e.SHIFT),Be.removeInputAction(Y.RIGHT_UP,_e.CTRL),Be.removeInputAction(Y.MIDDLE_CLICK),Be.removeInputAction(Y.MIDDLE_CLICK,_e.SHIFT),Be.removeInputAction(Y.MIDDLE_CLICK,_e.CTRL),Be.removeInputAction(Y.MIDDLE_DOWN),Be.removeInputAction(Y.MIDDLE_DOWN,_e.SHIFT),Be.removeInputAction(Y.MIDDLE_DOWN,_e.CTRL),Be.removeInputAction(Y.MIDDLE_UP),Be.removeInputAction(Y.MIDDLE_UP,_e.SHIFT),Be.removeInputAction(Y.MIDDLE_UP,_e.CTRL),Be.removeInputAction(Y.LEFT_DOUBLE_CLICK),Be.removeInputAction(Y.LEFT_DOUBLE_CLICK,_e.SHIFT),Be.removeInputAction(Y.LEFT_DOUBLE_CLICK,_e.CTRL),Be.removeInputAction(Y.MOUSE_MOVE),Be.removeInputAction(Y.MOUSE_MOVE,_e.SHIFT),Be.removeInputAction(Y.MOUSE_MOVE,_e.CTRL),Be.removeInputAction(Y.WHEEL),Be.removeInputAction(Y.WHEEL,_e.SHIFT),Be.removeInputAction(Y.WHEEL,_e.CTRL),Be.removeInputAction(Y.PINCH_START),Be.removeInputAction(Y.PINCH_START,_e.SHIFT),Be.removeInputAction(Y.PINCH_START,_e.CTRL),Be.removeInputAction(Y.PINCH_END),Be.removeInputAction(Y.PINCH_END,_e.SHIFT),Be.removeInputAction(Y.PINCH_END,_e.CTRL),Be.removeInputAction(Y.PINCH_MOVE),Be.removeInputAction(Y.PINCH_MOVE,_e.SHIFT),Be.removeInputAction(Y.PINCH_MOVE,_e.CTRL);const{viewer:Fe}=e;ol.beforeUnmount(Fe.canvas),d.value=!1},f=()=>{var Y;(Y=c.value)==null||Y.destroy(),c.value=void 0},v=Y=>{t==null||t(Y,{button:0})},y=Y=>{t==null||t(Y,{button:0,shift:!0})},w=Y=>{t==null||t(Y,{button:0,ctrl:!0})},C=Y=>{t==null||t(Y,{button:1})},M=Y=>{t==null||t(Y,{button:1,shift:!0})},S=Y=>{t==null||t(Y,{button:1,ctrl:!0})};let _;const O=Y=>{var _e;_?(_e=_==null?void 0:_.promise)==null||_e.then(Be=>{Be&&(t==null||t(Y,{button:2}))}):t==null||t(Y,{button:2})},I=Y=>{t==null||t(Y,{button:2,shift:!0})},A=Y=>{t==null||t(Y,{button:2,ctrl:!0})},V=Y=>{i==null||i(Y,{button:0})},$=Y=>{i==null||i(Y,{button:0,shift:!0})},D=Y=>{i==null||i(Y,{button:0,ctrl:!0})},G=Y=>{i==null||i(Y,{button:1})},q=Y=>{i==null||i(Y,{button:1,shift:!0})},H=Y=>{i==null||i(Y,{button:1,ctrl:!0})},g=Y=>{i==null||i(Y,{button:2})},b=Y=>{i==null||i(Y,{button:2,shift:!0})},E=Y=>{i==null||i(Y,{button:2,ctrl:!0})},L=Y=>{n==null||n(Y,{button:0})},P=Y=>{n==null||n(Y,{button:0,shift:!0})},T=Y=>{n==null||n(Y,{button:0,ctrl:!0})},F=Y=>{n==null||n(Y,{button:1,ctrl:!0})},N=Y=>{n==null||n(Y,{button:1,shift:!0})},j=Y=>{n==null||n(Y,{button:1,ctrl:!0})},U=Y=>{n==null||n(Y,{button:2})},te=Y=>{n==null||n(Y,{button:2,shift:!0})},ie=Y=>{n==null||n(Y,{button:2,ctrl:!0})},K=Y=>{a==null||a(Y,{button:0})},Z=Y=>{a==null||a(Y,{button:0,shift:!0})},z=Y=>{a==null||a(Y,{button:0,ctrl:!0})},Q=Y=>{r==null||r(Y)},re=Y=>{r==null||r(Y,{shift:!0})},X=Y=>{r==null||r(Y,{ctrl:!0})},J=Y=>{s==null||s(Y)},ae=Y=>{s==null||s(Y,{shift:!0})},ne=Y=>{s==null||s(Y,{ctrl:!0})},ce=Y=>{l==null||l(Y,{start:!0})},le=Y=>{l==null||l(Y,{start:!0,shift:!0})},pe=Y=>{l==null||l(Y,{start:!0,ctrl:!0})},Ce=Y=>{l==null||l(Y,{end:!0})},Se=Y=>{l==null||l(Y,{end:!0,shift:!0})},Re=Y=>{l==null||l(Y,{end:!0,ctrl:!0})},Me=Y=>{l==null||l(Y,{move:!0})},Te=Y=>{l==null||l(Y,{move:!0,shift:!0})},$e=Y=>{l==null||l(Y,{move:!0,ctrl:!0})},Le=Y=>{if(Y.touch){const _e={position:{x:Y.position.left,y:Y.position.top}};a==null||a(_e,{button:0})}_.resolve(!1)},Ie=Y=>{_.resolve(!0)},We=Y=>{_=al()};return{activate:h,deactivate:p,destroy:f,isActive:d}}function yo(e,t,i){const n=ht(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{const r=n.transformProps(e),a=n.$services.primitives;return a&&a.add(r)},i.mount=async()=>{const r=n.$services.primitives,a=i.cesiumObject;return r&&r.contains(a)},i.unmount=async()=>{const r=n.$services.primitives,a=i.cesiumObject;return r&&!r.isDestroyed()&&r.remove(a)},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher,$services:n.$services}}function bo(e,t,i){i.cesiumEvents=["primitiveAdded","primitiveRemoved"];const n=ht(e,t,i);return n===void 0?void 0:(i.mount=async()=>{const r=n.$services.primitives,a=i.cesiumObject,s=r&&r.add(a);return Cesium.defined(s)},i.unmount=async()=>{const r=n.$services.primitives,a=i.cesiumObject;return r&&r.remove(a)},Gr(Wr,(()=>qo(n.getServices(),{get primitives(){return i.cesiumObject}}))()),{transformProps:n.transformProps,transformProp:n.transformProp,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher})}function cn(e,t,i){const n=ht(e,t,i);if(n===void 0)return;const{emit:r}=t,a=he(0),s=he([]);i.createCesiumObject=async()=>{var d,h;const p=n.transformProps(e);if(p.asynchronous||await((h=(d=Cesium[i.cesiumClass]).initializeTerrainHeights)==null?void 0:h.call(d)),e.geometryInstances&&($t(e.geometryInstances)?(s.value.push(...e.geometryInstances),a.value+=e.geometryInstances.length):(a.value+=1,s.value.push(e.geometryInstances))),(i.cesiumClass==="Cesium3DTileset"||i.cesiumClass==="I3SDataProvider")&&ii(Cesium.VERSION,"1.104"))try{return Cesium.defined(e.assetId)&&i.cesiumClass==="Cesium3DTileset"?await Cesium[i.cesiumClass].fromIonAssetId(e.assetId,p):await Cesium[i.cesiumClass].fromUrl(e.url,p)}catch(f){n.logger.error(`Failed to load tileset: ${f}`)}else return new Cesium[i.cesiumClass](p)},i.mount=async()=>{var d;const h=n.$services.primitives,p=i.cesiumObject;(d=p==null?void 0:p.readyPromise)==null||d.then(v=>{Ze(i,"readyPromise")&&r("readyPromise",v,n.$services.viewer,i.proxy)}),p._vcParent=h;const f=h&&h.add(p);if(i.cesiumClass==="ParticleSystem"){const v=setInterval(()=>{Cesium.defined(f._billboardCollection)&&(f._billboardCollection._vcParent=f,clearInterval(v))},500)}return Cesium.defined(f)},i.unmount=async()=>{a.value=0,s.value=[];const d=n.$services.primitives,h=i.cesiumObject;return d&&d.remove(h)};const l=(d,h)=>{if(s.value.push(d),h===a.value-1)if(Ze(i,"update:geometryInstances"))t.emit("update:geometryInstances",s.value);else{const p=i.cesiumObject;p.geometryInstances=h===0?d:s.value}return!0},c=d=>{const h=s.value.indexOf(d);return s.value.splice(h,1),!0};return Gr(Wr,(()=>qo(n.getServices(),{get primitive(){return i.cesiumObject}}))()),Object.assign(i.proxy,{__updateGeometryInstances:l,__removeGeometryInstances:c,__childCount:a}),{transformProps:n.transformProps,transformProp:n.transformProp,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher,$services:n.$services}}const Cc=Math.PI*3e3/180,Mi=Math.PI,_c=6378245,wc=.006693421622965943,zm=function(i,n){var i=+i,n=+n;const r=i-.0065,a=n-.006,s=Math.sqrt(r*r+a*a)-2e-5*Math.sin(a*Cc),l=Math.atan2(a,r)-3e-6*Math.cos(r*Cc),c=s*Math.cos(l),d=s*Math.sin(l);return[c,d]},Gm=function(n,i){var i=+i,n=+n;const r=Math.sqrt(n*n+i*i)+2e-5*Math.sin(i*Cc),a=Math.atan2(i,n)+3e-6*Math.cos(n*Cc),s=r*Math.cos(a)+.0065,l=r*Math.sin(a)+.006;return[s,l]},gx=function(n,i){var i=+i,n=+n;if(Cx(n,i))return[n,i];{let r=yx(n-105,i-35),a=bx(n-105,i-35);const s=i/180*Mi;let l=Math.sin(s);l=1-wc*l*l;const c=Math.sqrt(l);r=r*180/(_c*(1-wc)/(l*c)*Mi),a=a*180/(_c/c*Math.cos(s)*Mi);const d=i+r;return[n+a,d]}},Um=function(n,i){var i=+i,n=+n;if(Cx(n,i))return[n,i];{let r=yx(n-105,i-35),a=bx(n-105,i-35);const s=i/180*Mi;let l=Math.sin(s);l=1-wc*l*l;const c=Math.sqrt(l);r=r*180/(_c*(1-wc)/(l*c)*Mi),a=a*180/(_c/c*Math.cos(s)*Mi);const d=i+r,h=n+a;return[n*2-h,i*2-d]}};var yx=function(n,i){var i=+i,n=+n;let r=-100+2*n+3*i+.2*i*i+.1*n*i+.2*Math.sqrt(Math.abs(n));return r+=(20*Math.sin(6*n*Mi)+20*Math.sin(2*n*Mi))*2/3,r+=(20*Math.sin(i*Mi)+40*Math.sin(i/3*Mi))*2/3,r+=(160*Math.sin(i/12*Mi)+320*Math.sin(i*Mi/30))*2/3,r},bx=function(n,i){var i=+i,n=+n;let r=300+n+2*i+.1*n*n+.1*n*i+.1*Math.sqrt(Math.abs(n));return r+=(20*Math.sin(6*n*Mi)+20*Math.sin(2*n*Mi))*2/3,r+=(20*Math.sin(n*Mi)+40*Math.sin(n/3*Mi))*2/3,r+=(150*Math.sin(n/12*Mi)+300*Math.sin(n/30*Mi))*2/3,r},Cx=function(n,i){var i=+i,n=+n;return!(n>73.66&&n<135.05&&i>3.86&&i<53.55)},_x=Object.freeze({__proto__:null,bd09togcj02:zm,gcj02tobd09:Gm,wgs84togcj02:gx,gcj02towgs84:Um});function Ht(e,t,i){i.cesiumEvents=["errorEvent"];const n=ht(e,t,i);if(n===void 0)return;const{emit:r}=t;return i.createCesiumObject=async()=>{const a=n.transformProps(e);return ii(Cesium.VERSION,"1.104")&&typeof Cesium[i.cesiumClass].fromUrl=="function"?await Cesium[i.cesiumClass].fromUrl(a.url,a):new Cesium[i.cesiumClass](a)},i.mount=async()=>{var a,s,l,c,d;const{viewer:h}=n.$services;if(i.cesiumClass.indexOf("ImageryProvider")!==-1){i.renderByParent=!0;const p=i.cesiumObject;if((a=p==null?void 0:p.readyPromise)==null||a.then(()=>{Ze(i,"readyPromise")&&r("readyPromise",p,h,i.proxy)}),e.projectionTransforms&&e.projectionTransforms.from!==e.projectionTransforms.to&&!(((s=i.proxy)==null?void 0:s.$options.name)==="VcImageryProviderBaidu"||((l=i.proxy)==null?void 0:l.$options.name)==="VcImageryProviderTianditu"&&p._epsgCode==="4490")){const{WebMercatorTilingScheme:v,Cartographic:y,Math:w}=Cesium,C=new v,M=C.projection,S=M.project,_=M.unproject;let O,I;e.projectionTransforms.to.toUpperCase()==="WGS84"?(O="wgs84togcj02",I="gcj02towgs84"):e.projectionTransforms.to.toUpperCase()==="GCJ02"&&(O="gcj02towgs84",I="wgs84togcj02"),O&&I&&(M.project=function(A,V){return V=V||new Cesium.Cartesian3,V=_x[O](w.toDegrees(A.longitude),w.toDegrees(A.latitude)),S.call(this,new y(w.toRadians(V==null?void 0:V[0]),w.toRadians(V==null?void 0:V[1])))},M.unproject=function(A,V){V=V||new y;const $=_.call(this,A);return V=_x[I](w.toDegrees($.longitude),w.toDegrees($.latitude)),new y(w.toRadians(V==null?void 0:V[0]),w.toRadians(V==null?void 0:V[1]))},p._tilingScheme=C)}const f=bi(i).proxy;return f&&((c=f.__updateProvider)==null?void 0:c.call(f,p))}else{const p=i.cesiumObject;return(d=p==null?void 0:p.readyPromise)==null||d.then(()=>{Ze(i,"readyPromise")&&r("readyPromise",p,h,i.proxy)}),h.terrainProvider=p,!0}},i.unmount=async()=>{var a,s;const{viewer:l}=n.$services;if(i.cesiumClass.indexOf("ImageryProvider")!==-1){const c=bi(i).proxy;return c&&((a=c.__updateProvider)==null?void 0:a.call(c,void 0))}else{const c=new Cesium.EllipsoidTerrainProvider;return(s=c==null?void 0:c.readyPromise)==null||s.then(()=>{Ze(i,"readyPromise")&&r("readyPromise",c,l,i.proxy)}),l.terrainProvider=c,!0}},{transformProps:n.transformProps,unwatchFns:n.unwatchFns,setPropsWatcher:n.setPropsWatcher}}function xc(e){var t,i,n;const r=fe(),a=(r==null?void 0:r.parent)===null?r.vnode.appContext&&r.vnode.appContext.provides:(t=r==null?void 0:r.parent)==null?void 0:t.provides;(!a||!(Wr in a))&&!e&&(e="cesiumContainer");const s=ks();if(r)if(e){const l=(n=(i=r.appContext.config.globalProperties)==null?void 0:i.$VueCesium)==null?void 0:n[e];return l||s.warn(`Failed to get $vc, reason: vc-viewer with containerId: ${e} was not found.`),l}else return Eu(Wr);else s.warn("VueCesium useVueCesium() can only be used inside setup().")}var m7={cesiumPath:String,animation:{type:Boolean,default:!1},baseLayerPicker:{type:Boolean,default:!1},fullscreenButton:{type:Boolean,default:!1},vrButton:{type:Boolean,default:!1},geocoder:{type:[Boolean,Array],default:!1},homeButton:{type:Boolean,default:!1},infoBox:{type:Boolean,default:!0},sceneModePicker:{type:Boolean,default:!1},selectionIndicator:{type:Boolean,default:!0},timeline:{type:Boolean,default:!1},navigationHelpButton:{type:Boolean,default:!1},navigationInstructionsInitiallyVisible:{type:Boolean,default:!1},scene3DOnly:{type:Boolean,default:!1},shouldAnimate:{type:Boolean,default:!1},clockViewModel:Object,selectedImageryProviderViewModel:Object,imageryProviderViewModels:Array,selectedTerrainProviderViewModel:Object,terrainProviderViewModels:Array,imageryProvider:Object,baseLayer:{type:[Object,Boolean],default:()=>{}},terrainProvider:Object,skyBox:{type:[Object,Boolean],default:()=>{}},skyAtmosphere:{type:[Object,Boolean],default:()=>{}},fullscreenElement:{type:[String,Element]},useDefaultRenderLoop:{type:Boolean,default:!0},targetFrameRate:Number,showRenderLoopErrors:{type:Boolean,default:!0},useBrowserRecommendedResolution:{type:Boolean,default:!0},automaticallyTrackDataSourceClocks:{type:Boolean,default:!0},contextOptions:Object,sceneMode:{type:Number,default:3},mapProjection:Object,globe:{type:[Object,Boolean],default:()=>{}},orderIndependentTranslucency:{type:Boolean,default:!0},creditContainer:[String,Element],creditViewport:[String,Element],dataSources:Object,terrainExaggeration:{type:Number,default:1},verticalExaggeration:{type:Number,default:1},shadows:{type:Boolean,default:!1},terrainShadows:{type:Number,default:3},mapMode2D:{type:Number,default:1},projectionPicker:{type:Boolean,default:!1},requestRenderMode:{type:Boolean,default:!1},maximumRenderTimeChange:{type:Number,default:0},debugShowFramesPerSecond:{type:Boolean,default:!1},showCredit:{type:Boolean,default:!0},accessToken:String,camera:{type:Object,default:()=>({position:{lng:105,lat:29.999999999999993,height:19059568497290563e-9},heading:360,pitch:-90,roll:0})},navigation:{type:Boolean,default:!1},TZCode:{type:String},UTCOffset:{type:Number},removeCesiumScript:{type:Boolean,default:!0},autoSortImageryLayers:{type:Boolean,default:!0},enableMouseEvent:{type:Boolean,default:!0},skeleton:{type:[Boolean,Object],default:()=>({dark:!1,animation:"wave",square:!0,bordered:!0,color:void 0})},touchHoldArg:{type:String,default:"1000"},viewerCreator:Function,mars3dConfig:Object,dcConfig:Object,containerId:String};function f7(){return{"font-awesome":["https://unpkg.com/font-awesome@latest/css/font-awesome.min.css"],haoutil:["https://unpkg.com/haoutil@latest/dist/haoutil-src.js"],turf:["https://unpkg.com/@turf/turf@latest/turf.min.js"],"mars3d-space":["https://unpkg.com/mars3d-space@latest/dist/mars3d-space.js"],"mars3d-echarts":["https://unpkg.com/echarts@latest/dist/echarts.min.js","https://unpkg.com/echarts-gl@latest/dist/echarts-gl.min.js","https://unpkg.com/mars3d-echarts@latest/dist/mars3d-echarts.js"],"mars3d-mapv":["https://unpkg.com/mapv@latest/build/mapv.min.js","https://unpkg.com/mars3d-mapv@latest/dist/mars3d-mapv.js"],"mars3d-heatmap":["https://unpkg.com/heatmapjs@latest/heatmap.min.js","https://unpkg.com/mars3d-heatmap@latest/dist/mars3d-heatmap.js"],"mars3d-wind":["https://unpkg.com/netcdfjs@latest/lib/index.js","https://unpkg.com/mars3d-wind@latest/dist/mars3d-wind.js"],"mars3d-tdt":["https://unpkg.com/mars3d-tdt@latest/dist/mars3d-tdt.js"],"mars3d-widget":["https://unpkg.com/mars3d-widget@latest/dist/mars3d-widget.js"],mars3d:["https://unpkg.com/mars3d-cesium@latest/Build/Cesium/Widgets/widgets.css","https://unpkg.com/mars3d-cesium@latest/Build/Cesium/Cesium.js","https://unpkg.com/mars3d@latest/dist/mars3d.css","https://unpkg.com/mars3d@latest/dist/mars3d.js"]}}class Hm{constructor(){this.states=new Cesium.ManagedArray,this.count=0}hidePrimitiveCollection(t){const{PrimitiveCollection:i,Cesium3DTileset:n,Model:r}=Cesium,a=t.length;for(let s=0;s<a;s++){const l=t.get(s);l instanceof i?this.hidePrimitiveCollection(l):(this.states.push(l.show),l instanceof n||l instanceof r||(l.show=!1))}}restorePrimitiveCollection(t){const{PrimitiveCollection:i}=Cesium,n=t.length;for(let r=0;r<n;r++){const a=t.get(r);a instanceof i?this.restorePrimitiveCollection(a):a.show=this.states.get(this.count++)}}hide(t){this.states.length=0,this.hidePrimitiveCollection(t.primitives),this.hidePrimitiveCollection(t.groundPrimitives)}restore(t){this.count=0,this.restorePrimitiveCollection(t.primitives),this.restorePrimitiveCollection(t.groundPrimitives)}}var ze={BeforeDraw:0,Drawing:1,AfterDraw:2};const mi=Object.freeze({METERS:"METERS",CENTIMETERS:"CENTIMETERS",KILOMETERS:"KILOMETERS",FEET:"FEET",US_SURVEY_FEET:"US_SURVEY_FEET",INCHES:"INCHES",YARDS:"YARDS",MILES:"MILES"}),oi=Object.freeze({SQUARE_METERS:"SQUARE_METERS",SQUARE_CENTIMETERS:"SQUARE_CENTIMETERS",SQUARE_KILOMETERS:"SQUARE_KILOMETERS",SQUARE_FEET:"SQUARE_FEET",SQUARE_INCHES:"SQUARE_INCHES",SQUARE_YARDS:"SQUARE_YARDS",SQUARE_MILES:"SQUARE_MILES",ACRES:"ACRES",HECTARES:"HECTARES"}),Si=Object.freeze({CUBIC_METERS:"CUBIC_METERS",CUBIC_CENTIMETERS:"CUBIC_CENTIMETERS",CUBIC_KILOMETERS:"CUBIC_KILOMETERS",CUBIC_FEET:"CUBIC_FEET",CUBIC_INCHES:"CUBIC_INCHES",CUBIC_YARDS:"CUBIC_YARDS",CUBIC_MILES:"CUBIC_MILES"}),ai=Object.freeze({DEGREES:"DEGREES",RADIANS:"RADIANS",DEGREES_MINUTES_SECONDS:"DEGREES_MINUTES_SECONDS",GRADE:"GRADE",RATIO:"RATIO"}),wx=class fn{constructor(t){t=an(t,{}),this.distanceUnits=an(t.distanceUnits,mi.METERS),this.areaUnits=an(t.areaUnits,oi.SQUARE_METERS),this.volumeUnits=an(t.volumeUnits,Si.CUBIC_METERS),this.angleUnits=an(t.angleUnits,ai.DEGREES),this.slopeUnits=an(t.slopeUnits,ai.DEGREES)}static distanceToString(t,i,n,r){return t=fn.convertDistance(t,mi.METERS,i),$a(t,n,r)+fn.getDistanceUnitSpacing(i)+fn.getDistanceUnitSymbol(i)}static areaToString(t,i,n,r){return t=fn.convertArea(t,oi.SQUARE_METERS,i),$a(t,n,r)+fn.getAreaUnitSpacing(i)+fn.getAreaUnitSymbol(i)}static angleToString(t,i,n,r){const{Math:a}=Cesium;if(i===ai.DEGREES||i===ai.RADIANS||i===ai.GRADE)return t=Ox(t,i),$a(t,n,r)+fn.getAngleUnitSpacing(i)+fn.getAngleUnitSymbol(i);if(i===ai.DEGREES_MINUTES_SECONDS){const s=a.toDegrees(t),l=s<0?"-":"",c=Math.floor(s),d=60*(s-c),h=Math.floor(d);return l+c+"\xB0 "+h+"' "+$a(60*(d-h),void 0,r)+'"'}ai.RATIO}static volumeToString(t,i,n,r){return t=fn.convertArea(t,Si.CUBIC_METERS,i),$a(t,n,r)+fn.getVolumeUnitSpacing(i)+fn.getVolumeUnitSymbol(i)}static getDistanceUnitSpacing(t){return" "}static getAreaUnitSpacing(t){return" "}static getAngleUnitSpacing(t){return t===ai.RADIANS?" ":""}static getVolumeUnitSpacing(t){return" "}static getDistanceUnitSymbol(t){switch(t){case mi.METERS:return"m";case mi.CENTIMETERS:return"cm";case mi.KILOMETERS:return"km";case mi.FEET:case mi.US_SURVEY_FEET:return"ft";case mi.INCHES:return"in";case mi.YARDS:return"yd";case mi.MILES:return"mi";default:return"m"}}static getAreaUnitSymbol(t){switch(t){case oi.SQUARE_METERS:return"m\xB2";case oi.SQUARE_CENTIMETERS:return"cm\xB2";case oi.SQUARE_KILOMETERS:return"km\xB2";case oi.SQUARE_FEET:return"sq ft";case oi.SQUARE_INCHES:return"sq in";case oi.SQUARE_YARDS:return"sq yd";case oi.SQUARE_MILES:return"sq mi";case oi.ACRES:return"ac";case oi.HECTARES:return"ha";default:return"m\xB2"}}static getVolumeUnitSymbol(t){switch(t){case Si.CUBIC_METERS:return"m\xB3";case Si.CUBIC_CENTIMETERS:return"cm\xB3";case Si.CUBIC_KILOMETERS:return"km\xB3";case Si.CUBIC_FEET:return"cu ft";case Si.CUBIC_INCHES:return"cu in";case Si.CUBIC_YARDS:return"cu yd";case Si.CUBIC_MILES:return"cu mi";default:return"m\xB3"}}static getAngleUnitSymbol(t){return t===ai.DEGREES?"\xB0":t===ai.RADIANS?"rad":t===ai.GRADE?"%":void 0}static convertDistance(t,i,n){return i===n?t:t*xx(i)*(1/xx(n))}static convertArea(t,i,n){return i===n?t:t*Ex(i)*(1/Ex(n))}static convertVolume(t,i,n){return i===n?t:t*Px(i)*(1/Px(n))}static convertAngle(t,i,n){return i===n?t:Ox(v7(t,i),n)}static longitudeToString(t,i,n,r){return fn.angleToString(Math.abs(t),i,n,r)+" "+(t<0?"W":"E")}static latitudeToString(t,i,n,r){return fn.angleToString(Math.abs(t),i,n,r)+" "+(t<0?"S":"N")}};wx.numberToString=function(e,t,i){return $a(e,t,i)};let Gi=wx;function xx(e){switch(e){case mi.METERS:return 1;case mi.CENTIMETERS:return .01;case mi.KILOMETERS:return 1e3;case mi.FEET:return .3048;case mi.US_SURVEY_FEET:return 1200/3937;case mi.INCHES:return .254;case mi.YARDS:return .9144;case mi.MILES:return 1609.344;default:return 1}}function Ex(e){switch(e){case oi.SQUARE_METERS:return 1;case oi.SQUARE_CENTIMETERS:return 1e-4;case oi.SQUARE_KILOMETERS:return 1e6;case oi.SQUARE_FEET:return .09290304;case oi.SQUARE_INCHES:return 64516e-8;case oi.SQUARE_YARDS:return .83612736;case oi.SQUARE_MILES:return 2589988110336e-6;case oi.ACRES:return 4046.85642232;case oi.HECTARES:return 1e4;default:return 1}}function Px(e){switch(e){case Si.CUBIC_METERS:return 1;case Si.CUBIC_CENTIMETERS:return 1e-6;case Si.CUBIC_KILOMETERS:return 1e9;case Si.CUBIC_FEET:return .09290304*.3048;case Si.CUBIC_INCHES:return 16387064e-12;case Si.CUBIC_YARDS:return .764554857984;case Si.CUBIC_MILES:return 416818182544058e-5;default:return 1}}function v7(e,t){const{defined:i,Math:n,RuntimeError:r}=Cesium;if(t===ai.RADIANS)return e;if(t===ai.DEGREES)return n.toRadians(e);if(t===ai.GRADE)return e===Number.POSITIVE_INFINITY?n.PI_OVER_TWO:Math.atan(e/100);if(t===ai.RATIO)return Math.atan(e);if(t===ai.DEGREES_MINUTES_SECONDS){const a=/(-?)(\d+)\s*\s*(\d+)\s*'\s*([\d.,]+)"\s*([WENS]?)/i.exec(e)||[];if(!i(a))throw new r("Could not convert angle to radians: "+e);let s=0<a[1].length?-1:1;const l=parseInt(a[2]),c=parseInt(a[3]),d=parseFloat(a[4]);let h=a[5];h.length===1&&((h=h.toUpperCase())!=="W"&&h!=="S"||(s*=-1));const p=s*(l+c/60+d/3600);return n.toRadians(p)}}function Ox(e,t){const{Math:i}=Cesium;if(t===ai.RADIANS)return e;if(t===ai.DEGREES)return i.toDegrees(e);if(t===ai.GRADE)return i.clamp(e,0,i.PI_OVER_TWO)===i.PI_OVER_TWO?Number.POSITIVE_INFINITY:100*Math.tan(e);if(t===ai.RATIO)return Math.sin(e)/Math.cos(e)}function $a(e,t,i){const n=g7(i,e,t),r=e.toLocaleString(t,n),a=-0,s=0;return r===a.toLocaleString(t,n)?s.toLocaleString(t,n):r}function g7(e,t,i){let n={minimumFractionDigits:0,maximumFractionDigits:0};return e=Cesium.defaultValue(e,2),typeof e=="number"?(n.minimumFractionDigits=e,n.maximumFractionDigits=e):n=typeof e=="function"?e(t,i):e,n}class Ec{constructor(t){const{defined:i,defaultValue:n,createGuid:r,BoundingSphere:a,Ellipsoid:s,ClassificationType:l,ArcType:c}=Cesium;t=n(t,{}),this.show=n(t.show,!0),this._id=i(t.id)?t.id:r(),this._ellipsoid=n(t.ellipsoid,s.WGS84),this._appearance=n(t.appearance,new Cesium.MaterialAppearance),this._depthFailAppearance=t.depthFailAppearance,this._positions=n(t.positions,[]),this._polygonHierarchy=t.polygonHierarchy,this._clampToGround=n(t.clampToGround,!1),this._classificationType=n(t.classificationType,l.BOTH),this._arcType=n(t.arcType,c.RHUMB),this._allowPicking=n(t.allowPicking,!0),this._asynchronous=n(t.asynchronous,!1),this._boundingSphere=new a,this._primitive=void 0,this._update=!0}get positions(){return this._positions}set positions(t){this._positions=t,this._update=!0}get polygonHierarchy(){return this._polygonHierarchy}set polygonHierarchy(t){this._polygonHierarchy=t,this._update=!0}get appearance(){return this._appearance}set appearance(t){this._appearance=t,this._primitive!==void 0&&(this._primitive.appearance=t)}get depthFailAppearance(){return this._depthFailAppearance}set depthFailAppearance(t){this._depthFailAppearance=t,this._primitive!==void 0&&this._primitive instanceof Cesium.Primitive&&(this._primitive.depthFailAppearance=t)}get id(){return this._id}set id(t){this._id=t}get boundingVolume(){return this._boundingSphere}get ellipsoid(){return this._ellipsoid}get clampToGround(){return this._clampToGround}set clampToGround(t){this._clampToGround=t}get classificationType(){return this._classificationType}set classificationType(t){this._classificationType=t,this._update=!0}get allowPicking(){return this._allowPicking}set allowPicking(t){this._allowPicking=t}get asynchronous(){return this._asynchronous}set asynchronous(t){this._asynchronous=t}async update(t){if(this.show){const i=this._polygonHierarchy?this._polygonHierarchy.positions:this._positions;if(i.length<3)this._primitive&&this._primitive.destroy(),this._primitive=void 0;else{if(this._update){this._update=!1;let n;this._clampToGround?n=this._createGroundPolygon():n=this._createPolygon(),n.then(r=>{this._primitive&&this._primitive.destroy(),this._primitive=void 0,this._primitive=r,this._primitive._vcParent=this,this._boundingSphere=Cesium.BoundingSphere.fromPoints(i,this._boundingSphere)})}this._primitive&&this._primitive.update(t)}}}async _createPolygon(){const{Primitive:t,GeometryInstance:i,CoplanarPolygonGeometry:n,Cartesian3:r}=Cesium;return new t({geometryInstances:new i({geometry:this._polygonHierarchy?new n({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid}):n.fromPositions({positions:this._positions.map(function(a){return r.clone(a)}),ellipsoid:this._ellipsoid}),id:this._id}),appearance:this._appearance,depthFailAppearance:this._depthFailAppearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous})}async _createGroundPolygon(){const{GroundPrimitive:t,GeometryInstance:i,PolygonGeometry:n,Cartesian3:r}=Cesium;return await Cesium.GroundPrimitive.initializeTerrainHeights(),new t({geometryInstances:new i({geometry:this._polygonHierarchy?new n({polygonHierarchy:this._polygonHierarchy,ellipsoid:this._ellipsoid,arcType:this._arcType}):n.fromPositions({positions:this._positions.map(function(a){return r.clone(a)}),ellipsoid:this._ellipsoid,arcType:this._arcType}),id:this._id}),appearance:this._appearance,allowPicking:this._allowPicking,asynchronous:this._asynchronous,classificationType:this._classificationType})}isDestroyed(){return!1}destroy(){return this._primitive&&this._primitive.destroy(),this._primitive=void 0,Cesium.destroyObject(this)}}class Pc{constructor(t){const{SampledPositionProperty:i,Entity:n,ExtrapolationType:r,VelocityOrientationProperty:a,CallbackProperty:s}=Cesium;this._lastTime=void 0,this._sampledPosition=new i,this._sampledPosition.forwardExtrapolationType=t.forwardExtrapolationType||r.HOLD,this._sampledPosition.backwardExtrapolationType=t.backwardExtrapolationType||r.HOLD,this._cache=[],this._maxCacheSize=t.maxCacheSize||10;const l=new n(t);if(l.position=this._sampledPosition,!Cesium.defined(t.orientation)){const c=new a(this._sampledPosition);let d;l.orientation=new s((h,p)=>{const f=c.getValue(h);if(f)d=f;else return d;return f},!1)}this._entity=l,this._velocityVectorProperty=new Cesium.VelocityVectorProperty(this._sampledPosition,!1)}get id(){return this._entity.id}set id(t){this._entity.id=t}set maxCacheSize(t){this._maxCacheSize=t}get maxCacheSize(){return this._maxCacheSize}get position(){return this._sampledPosition.getValue(Cesium.JulianDate.now())}_removePosition(){if(this._cache.length>this._maxCacheSize){const t=Cesium.JulianDate.addSeconds(this._cache[0],-.2,new Cesium.JulianDate),i=Cesium.JulianDate.addSeconds(this._cache[this._cache.length-this._maxCacheSize],-.2,new Cesium.JulianDate);this._sampledPosition.removeSamples(new Cesium.TimeInterval({start:t,stop:i})),this._cache.splice(0,this._cache.length-this._maxCacheSize)}}addPosition(t,i){this._removePosition();let n;if(typeof i=="number"){const r=Cesium.JulianDate.now();n=Cesium.JulianDate.addSeconds(r,i,new Cesium.JulianDate),Cesium.destroyObject(r)}else n=ar(i);return this._sampledPosition.addSample(n,Ot(t)),this._lastTime=n,this._cache.push(this._lastTime),n}}const y7={position:0,normal:1};class Wm{constructor(t){const{defaultValue:i,Matrix4:n,Math:r,Color:a,BoundingSphere:s}=Cesium;this.modelMatrix=i(t.modelMatrix,new n),this.fovH=i(t.fovH,r.toRadians(60)),this.fovV=i(t.fovV,r.toRadians(30)),this.segmentH=i(t.segmentH,16),this.segmentV=i(t.segmentV,8),this.subSegmentH=i(t.subSegmentH,3),this.subSegmentV=i(t.subSegmentV,3),this._faceColor=i(t.faceColor,new a(1,1,1,.1)),this._lineColor=i(t.lineColor,new a(1,1,1,.4)),this.show=i(t.show,!0),this._modelMatrix=n.clone(n.IDENTITY),this._fovH=0,this._fovV=0,this._segmentH=1,this._segmentV=1,this._subSegmentH=1,this._subSegmentV=1,this._boundingSphere=new s,this._initBoundingSphere=void 0,this._command=void 0}get faceColor(){return this._faceColor}set faceColor(t){this._faceColor=t}get lineColor(){return this._lineColor}set lineColor(t){this._lineColor=t}update(t){if(this.show&&t.passes.render){const{clone:i,Matrix4:n,defined:r,BoundingSphere:a}=Cesium;this.fovH===this._fovH&&this.fovV===this._fovV&&this.segmentH===this._segmentH&&this.segmentV===this._segmentV&&this.subSegmentH===this._subSegmentH&&this.subSegmentV===this._subSegmentV||(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=i(n.IDENTITY),this._destroyVideoMemory()),this.fovH!==this._fovH&&this.fovV!==this._fovV&&this.segmentH!==this._segmentH&&this.segmentV!==this._segmentV&&this.subSegmentH!==this._subSegmentH&&this.subSegmentV!==this._subSegmentV&&(this._fovH=this.fovH,this._fovV=this.fovV,this._segmentH=this.segmentH,this._segmentV=this.segmentV,this._subSegmentH=this.subSegmentH,this._subSegmentV=this.subSegmentV,this._modelMatrix=i(n.IDENTITY),this._destroyVideoMemory()),r(this._command)||this._createCommand(t.context),n.equals(this.modelMatrix,this._modelMatrix)||(n.clone(this.modelMatrix,this._modelMatrix),this._command.modelMatrix=n.IDENTITY,this._command.modelMatrix=this._modelMatrix,this._command.boundingVolume=a.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere),this._lineCommand.modelMatrix=n.IDENTITY,this._lineCommand.modelMatrix=this._modelMatrix,this._lineCommand.boundingVolume=a.transform(this._initBoundingSphere,this._modelMatrix,this._boundingSphere)),this._command&&t.commandList.push(this._command),this._lineCommand&&t.commandList.push(this._lineCommand)}}isDestroyed(){return!1}destroy(){this._destroyVideoMemory(),Cesium.destroyObject(this)}_createCommand(t){const{Appearance:i,RenderState:n,ShaderSource:r,ShaderProgram:a,BufferUsage:s,IndexDatatype:l,VertexArray:c,ComponentDatatype:d,BoundingSphere:h,DrawCommand:p,PrimitiveType:f,Pass:v,Matrix4:y}=Cesium,w=this,C=this._subSegmentH*this._segmentH,M=this._subSegmentV*this._segmentV,S=Mx(this._fovH,this._fovV,C,M),_=Mx(this._fovH,this._fovV,C,M),O=b7(C,M),I=C7(this._segmentH,this._segmentV,this._subSegmentH,this._subSegmentV),A=i.getDefaultRenderState(!0,!1,void 0),V=n.fromCache(A),$=t.webgl2,D=new r({sources:[`
        // \u4F7F\u7528double\u7C7B\u578B\u7684position\u8FDB\u884C\u8BA1\u7B97
        // attribute vec3 position3DHigh;
        // attribute vec3 position3DLow;
        ${$?"in":"attribute"} vec3 position;
        ${$?"in":"attribute"} vec3 normal;
        // attribute vec2 st;
        // attribute float batchId;
        ${$?"out":"varying"} vec3 v_positionEC;
        ${$?"out":"varying"} vec3 v_normalEC;
        // varying vec2 v_st;
        void main()
          {
            // \u4F7F\u7528double\u7C7B\u578B\u7684position\u8FDB\u884C\u8BA1\u7B97
            // vec4 p = czm_translateRelativeToEye(position3DHigh, position3DLow);
            // v_positionEC = (czm_modelViewRelativeToEye * p).xyz;
            // position in eye coordinates
            // v_normalEC = czm_normal * normal;
            // normal in eye coordinates
            // v_st = st;
            // gl_Position = czm_modelViewProjectionRelativeToEye * p;
            v_positionEC = (czm_modelView * vec4(position, 1.0)).xyz;
            // position in eye coordinates
            v_normalEC = czm_normal * normal;
            // normal in eye coordinates
            // v_st = st;
            gl_Position = czm_modelViewProjection * vec4(position, 1.0);
          }
        `]}),G=new r({sources:[`
        ${$?"in":"varying"} vec3 v_positionEC;
        ${$?"in":"varying"} vec3 v_normalEC;
        // varying vec2 v_st;
        // uniform sampler2D myImage;
        uniform vec4 vcColor;
        void main()
        {
          vec3 positionToEyeEC = -v_positionEC;
          vec3 normalEC = normalize(v_normalEC);
          #ifdef FACE_FORWARD
          normalEC = faceforward(normalEC, vec3(0.0, 0.0, 1.0), -normalEC);
          #endif
          czm_materialInput materialInput;
          materialInput.normalEC = normalEC;
          materialInput.positionToEyeEC = positionToEyeEC;
          // materialInput.st = v_st;
          //czm_material material = czm_getMaterial(materialInput);
          czm_material material = czm_getDefaultMaterial(materialInput);
          // material.diffuse = texture2D(myImage, materialInput.st).rgb;
          material.diffuse = vcColor.rgb;
          material.alpha = vcColor.a;
          #ifdef FLAT
          ${$?"out_FragColor":"gl_FragColor"} = vec4(material.diffuse + material.emission, material.alpha);
          #else
          ${$?"out_FragColor":"gl_FragColor"} = czm_phong(normalize(positionToEyeEC), material, czm_lightDirectionEC);
          #endif
        }
        `]}),q={vcColor:function(){return w._faceColor}},H={vcColor:function(){return w._lineColor}},g=a.fromCache({context:t,vertexShaderSource:D,fragmentShaderSource:G,attributeLocations:y7});this._shaderprogram=g;const b=Cesium.Buffer.createVertexBuffer({context:t,typedArray:S,usage:s.STATIC_DRAW}),E=Cesium.Buffer.createVertexBuffer({context:t,typedArray:_,usage:s.STATIC_DRAW}),L=Cesium.Buffer.createIndexBuffer({context:t,typedArray:O,usage:s.STATIC_DRAW,indexDatatype:l.UNSIGNED_SHORT}),P=Cesium.Buffer.createIndexBuffer({context:t,typedArray:I,usage:s.STATIC_DRAW,indexDatatype:l.UNSIGNED_SHORT}),T=new c({context:t,attributes:[{index:0,vertexBuffer:b,componentsPerAttribute:3,componentDatatype:d.FLOAT},{index:1,vertexBuffer:E,componentsPerAttribute:3,componentDatatype:d.FLOAT}],indexBuffer:L}),F=new c({context:t,attributes:[{index:0,vertexBuffer:b,componentsPerAttribute:3,componentDatatype:d.FLOAT},{index:1,vertexBuffer:E,componentsPerAttribute:3,componentDatatype:d.FLOAT}],indexBuffer:P});this._initBoundingSphere=h.fromVertices(S),this._command=new p({vertexArray:T,primitiveType:f.TRIANGLES,renderState:V,shaderProgram:g,uniformMap:q,owner:this,pass:v.TRANSLUCENT,modelMatrix:new y,boundingVolume:new h,cull:!0}),this._lineCommand=new p({vertexArray:F,primitiveType:f.LINES,renderState:V,shaderProgram:g,uniformMap:H,owner:this,pass:v.TRANSLUCENT,modelMatrix:new y,boundingVolume:new h,cull:!0})}_destroyVideoMemory(){const{defined:t}=Cesium;this._shaderprogram=this._shaderprogram&&this._shaderprogram.destroy(),t(this._command)&&(this._command.vertexArray.destroy(),this._command=void 0),t(this._lineCommand)&&(this._lineCommand.vertexArray.destroy(),this._lineCommand=void 0)}}function Mx(e,t,i,n){const r=new Float32Array((i+1)*(n+1)*3+3);for(let a=0;a<i+1;a++)for(let s=0;s<n+1;s++){const l=e*(a/i-.5),c=t*(s/n-.5),d=[Math.cos(-l)*Math.cos(-c),Math.sin(-l)*Math.cos(-c),Math.sin(c)];r[3*(s*(i+1)+a)+0]=d[0],r[3*(s*(i+1)+a)+1]=d[1],r[3*(s*(i+1)+a)+2]=d[2]}return r[(i+1)*(n+1)*3+0]=0,r[(i+1)*(n+1)*3+1]=0,r[(i+1)*(n+1)*3+2]=0,r}function b7(e,t){const i=e*t*6,n=new Uint16Array(i);for(let r=0;r<e;r++)for(let a=0;a<t;a++){const s=a*(1+e)+r,l=a*(1+e)+r+1,c=(a+1)*(1+e)+r,d=(a+1)*(1+e)+r+1,h=6*(a*e+r);n[0+h]=s,n[1+h]=l,n[2+h]=d,n[3+h]=s,n[4+h]=d,n[5+h]=c}return n}function C7(e,t,i,n){const r=e*i,a=t*n,s=new Uint16Array((e+1)*(2*a)+(t+1)*(2*r)+8);for(let d=0;d<e+1;d++)for(let h=0;h<a;h++){const p=d*i;s[2*(d*a+h)+0]=h*(1+r)+p,s[2*(d*a+h)+1]=(h+1)*(1+r)+p}const l=(e+1)*(2*a);for(let d=0;d<t;d++)for(let h=0;h<r;h++){const p=d*n;s[l+2*(h+d*r)]=p*(1+r)+h,s[l+2*(h+d*r)+1]=p*(1+r)+h+1}const c=(e+1)*(2*a)+(t+1)*(2*r);return s[c]=0,s[c+1]=(1+r)*(1+a),s[c+2]=r,s[c+3]=(1+r)*(1+a),s[c+4]=(1+r)*a,s[c+5]=(1+r)*(1+a),s[c+6]=(1+r)*(1+a)-1,s[c+7]=(1+r)*(1+a),s}const Sx=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],qm=1,sl=8;class tb{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[i,n]=new Uint8Array(t,0,2);if(i!==219)throw new Error("Data does not appear to be in a KDBush format.");const r=n>>4;if(r!==qm)throw new Error(`Got v${r} data when expected v${qm}.`);const a=Sx[n&15];if(!a)throw new Error("Unrecognized array type.");const[s]=new Uint16Array(t,2,1),[l]=new Uint32Array(t,4,1);return new tb(l,s,a,t)}constructor(t,i=64,n=Float64Array,r){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+i,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const a=Sx.indexOf(this.ArrayType),s=t*2*this.ArrayType.BYTES_PER_ELEMENT,l=t*this.IndexArrayType.BYTES_PER_ELEMENT,c=(8-l%8)%8;if(a<0)throw new Error(`Unexpected typed array class: ${n}.`);r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,sl,t),this.coords=new this.ArrayType(this.data,sl+l+c,t*2),this._pos=t*2,this._finished=!0):(this.data=new ArrayBuffer(sl+s+l+c),this.ids=new this.IndexArrayType(this.data,sl,t),this.coords=new this.ArrayType(this.data,sl+l+c,t*2),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,(qm<<4)+a]),new Uint16Array(this.data,2,1)[0]=i,new Uint32Array(this.data,4,1)[0]=t)}add(t,i){const n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=i,n}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return Zm(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,i,n,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:a,coords:s,nodeSize:l}=this,c=[0,a.length-1,0],d=[];for(;c.length;){const h=c.pop()||0,p=c.pop()||0,f=c.pop()||0;if(p-f<=l){for(let C=f;C<=p;C++){const M=s[2*C],S=s[2*C+1];M>=t&&M<=n&&S>=i&&S<=r&&d.push(a[C])}continue}const v=f+p>>1,y=s[2*v],w=s[2*v+1];y>=t&&y<=n&&w>=i&&w<=r&&d.push(a[v]),(h===0?t<=y:i<=w)&&(c.push(f),c.push(v-1),c.push(1-h)),(h===0?n>=y:r>=w)&&(c.push(v+1),c.push(p),c.push(1-h))}return d}within(t,i,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:a,nodeSize:s}=this,l=[0,r.length-1,0],c=[],d=n*n;for(;l.length;){const h=l.pop()||0,p=l.pop()||0,f=l.pop()||0;if(p-f<=s){for(let C=f;C<=p;C++)Ix(a[2*C],a[2*C+1],t,i)<=d&&c.push(r[C]);continue}const v=f+p>>1,y=a[2*v],w=a[2*v+1];Ix(y,w,t,i)<=d&&c.push(r[v]),(h===0?t-n<=y:i-n<=w)&&(l.push(f),l.push(v-1),l.push(1-h)),(h===0?t+n>=y:i+n>=w)&&(l.push(v+1),l.push(p),l.push(1-h))}return c}}function Zm(e,t,i,n,r,a){if(r-n<=i)return;const s=n+r>>1;Tx(e,t,s,n,r,a),Zm(e,t,i,n,s-1,1-a),Zm(e,t,i,s+1,r,1-a)}function Tx(e,t,i,n,r,a){for(;r>n;){if(r-n>600){const d=r-n+1,h=i-n+1,p=Math.log(d),f=.5*Math.exp(2*p/3),v=.5*Math.sqrt(p*f*(d-f)/d)*(h-d/2<0?-1:1),y=Math.max(n,Math.floor(i-h*f/d+v)),w=Math.min(r,Math.floor(i+(d-h)*f/d+v));Tx(e,t,i,y,w,a)}const s=t[2*i+a];let l=n,c=r;for(ll(e,t,n,i),t[2*r+a]>s&&ll(e,t,n,r);l<c;){for(ll(e,t,l,c),l++,c--;t[2*l+a]<s;)l++;for(;t[2*c+a]>s;)c--}t[2*n+a]===s?ll(e,t,n,c):(c++,ll(e,t,c,r)),c<=i&&(n=c+1),i<=c&&(r=c-1)}}function ll(e,t,i,n){Qm(e,i,n),Qm(t,2*i,2*n),Qm(t,2*i+1,2*n+1)}function Qm(e,t,i){const n=e[t];e[t]=e[i],e[i]=n}function Ix(e,t,i,n){const r=e-i,a=t-n;return r*r+a*a}class Jm{constructor(t){t=an(t,{}),this._enabled=an(t.enabled,!1),this._pixelRange=an(t.pixelRange,80),this._minimumClusterSize=an(t.minimumClusterSize,2),this._clusterBillboards=an(t.clusterBillboards,!0),this._clusterLabels=an(t.clusterLabels,!0),this._clusterPoints=an(t.clusterPoints,!0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity={},this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._clusterDirty=!1,this._cluster=void 0,this._removeEventListener=void 0,this._clusterEvent=new Cesium.Event,this.show=an(t.show,!0)}_initialize(t){this._scene=t;const i=x7(this);this._cluster=i,this._removeEventListener=t.camera.changed.addEventListener(i)}get enabled(){return this._enabled}set enabled(t){this._enabledDirty=t!==this._enabled,this._enabled=t}get pixelRange(){return this._pixelRange}set pixelRange(t){this._clusterDirty=this._clusterDirty||t!==this._pixelRange,this._pixelRange=t}get minimumClusterSize(){return this._minimumClusterSize}set minimumClusterSize(t){this._clusterDirty=this._clusterDirty||t!==this._minimumClusterSize,this._minimumClusterSize=t}get clusterEvent(){return this._clusterEvent}get clusterBillboards(){return this._clusterBillboards}set clusterBillboards(t){this._clusterDirty=this._clusterDirty||t!==this._clusterBillboards,this._clusterBillboards=t}get clusterLabels(){return this._clusterLabels}set clusterLabels(t){this._clusterDirty=this._clusterDirty||t!==this._clusterLabels,this._clusterLabels=t}get clusterPoints(){return this._clusterPoints}set clusterPoints(t){this._clusterDirty=this._clusterDirty||t!==this._clusterPoints,this._clusterPoints=t}getLabel(t){return Ym.call(this,t,"_labelCollection",Cesium.LabelCollection,"_unusedLabelIndices","labelIndex")}removeLabel(t){const{defined:i}=Cesium,n=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(!i(this._labelCollection)||!i(n)||!i(n.labelIndex))return;const r=n.labelIndex;n.labelIndex=void 0,Km(this,t.id);const a=this._labelCollection.get(r);a.show=!1,a.text="",a.id=void 0,this._unusedLabelIndices.push(r),this._clusterDirty=!0}getBillboard(t){return Ym.call(this,t,"_billboardCollection",Cesium.BillboardCollection,"_unusedBillboardIndices","billboardIndex")}removeBillboard(t){const{defined:i}=Cesium,n=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(!i(this._billboardCollection)||!i(n)||!i(n.billboardIndex))return;const r=n.billboardIndex;n.billboardIndex=void 0,Km(this,t.id);const a=this._billboardCollection.get(r);a.id=void 0,a.show=!1,a.image=void 0,this._unusedBillboardIndices.push(r),this._clusterDirty=!0}getPoint(t){return Ym.call(this,t,"_pointCollection",Cesium.PointPrimitiveCollection,"_unusedPointIndices","pointIndex")}removePoint(t){const{defined:i}=Cesium,n=this._collectionIndicesByEntity&&this._collectionIndicesByEntity[t.id];if(!i(this._pointCollection)||!i(n)||!i(n.pointIndex))return;const r=n.pointIndex;n.pointIndex=void 0,Km(this,t.id);const a=this._pointCollection.get(r);a.show=!1,a.id=void 0,this._unusedPointIndices.push(r),this._clusterDirty=!0}update(t){if(!this.show)return;const{defined:i}=Cesium;let n;i(this._labelCollection)&&this._labelCollection.length>0&&this._labelCollection.get(0)._glyphs.length===0&&(n=t.commandList,t.commandList=[],this._labelCollection.update(t),t.commandList=n),i(this._billboardCollection)&&this._billboardCollection.length>0&&!i(this._billboardCollection.get(0).width)&&(n=t.commandList,t.commandList=[],this._billboardCollection.update(t),t.commandList=n),this._enabledDirty&&(this._enabledDirty=!1,_7(this),this._clusterDirty=!0),this._clusterDirty&&(this._clusterDirty=!1,this._cluster()),i(this._clusterLabelCollection)&&this._clusterLabelCollection.update(t),i(this._clusterBillboardCollection)&&this._clusterBillboardCollection.update(t),i(this._clusterPointCollection)&&this._clusterPointCollection.update(t),i(this._labelCollection)&&this._labelCollection.update(t),i(this._billboardCollection)&&this._billboardCollection.update(t),i(this._pointCollection)&&this._pointCollection.update(t)}destroy(){const{defined:t}=Cesium;this._labelCollection=this._labelCollection&&this._labelCollection.destroy(),this._billboardCollection=this._billboardCollection&&this._billboardCollection.destroy(),this._pointCollection=this._pointCollection&&this._pointCollection.destroy(),this._clusterLabelCollection=this._clusterLabelCollection&&this._clusterLabelCollection.destroy(),this._clusterBillboardCollection=this._clusterBillboardCollection&&this._clusterBillboardCollection.destroy(),this._clusterPointCollection=this._clusterPointCollection&&this._clusterPointCollection.destroy(),t(this._removeEventListener)&&(this._removeEventListener(),this._removeEventListener=void 0),this._labelCollection=void 0,this._billboardCollection=void 0,this._pointCollection=void 0,this._clusterBillboardCollection=void 0,this._clusterLabelCollection=void 0,this._clusterPointCollection=void 0,this._collectionIndicesByEntity=void 0,this._unusedLabelIndices=[],this._unusedBillboardIndices=[],this._unusedPointIndices=[],this._previousClusters=[],this._previousHeight=void 0,this._enabledDirty=!1,this._pixelRangeDirty=!1,this._minimumClusterSizeDirty=!1}}function _7(e){if(e.enabled)return;const{defined:t}=Cesium;t(e._clusterLabelCollection)&&e._clusterLabelCollection.destroy(),t(e._clusterBillboardCollection)&&e._clusterBillboardCollection.destroy(),t(e._clusterPointCollection)&&e._clusterPointCollection.destroy(),e._clusterLabelCollection=void 0,e._clusterBillboardCollection=void 0,e._clusterPointCollection=void 0,Xm(e._labelCollection),Xm(e._billboardCollection),Xm(e._pointCollection)}function Xm(e){const{defined:t}=Cesium;if(!t(e))return;const i=e.length;for(let n=0;n<i;++n)e.get(n).clusterShow=!0}function Ym(e,t,i,n,r){const{defined:a}=Cesium;let s=this[t];a(this._collectionIndicesByEntity)||(this._collectionIndicesByEntity={});let l=this._collectionIndicesByEntity[e.id];if(a(l)||(l=this._collectionIndicesByEntity[e.id]={billboardIndex:void 0,labelIndex:void 0,pointIndex:void 0}),a(s)&&a(l[r]))return s.get(l[r]);a(s)||(s=this[t]=new i({scene:this._scene}));let c,d;const h=this[n];h.length>0?(c=h.pop(),d=s.get(c)):(d=s.add(),c=s.length-1),l[r]=c;const p=this;return Promise.resolve().then(function(){p._clusterDirty=!0}),d}function Km(e,t){const{defined:i}=Cesium,n=e._collectionIndicesByEntity[t];!i(n.billboardIndex)&&!i(n.labelIndex)&&!i(n.pointIndex)&&delete e._collectionIndicesByEntity[t]}function Ax(e,t){e.x-=t,e.y-=t,e.width+=t*2,e.height+=t*2}function Dx(e,t,i,n,r){const{defined:a,Label:s,Billboard:l,PointPrimitive:c,BoundingRectangle:d}=Cesium,h=new d;if(a(e._labelCollection)&&n._clusterLabels?r=s.getScreenSpaceBoundingBox(e,t,r):a(e._billboardCollection)&&n._clusterBillboards?r=l.getScreenSpaceBoundingBox(e,t,r):a(e._pointPrimitiveCollection)&&n._clusterPoints&&(r=c.getScreenSpaceBoundingBox(e,t,r)),Ax(r,i),n._clusterLabels&&!a(e._labelCollection)&&a(e.id)&&Bx(n,e.id.id)&&a(e.id._label)){const p=n._collectionIndicesByEntity[e.id.id].labelIndex,f=n._labelCollection.get(p),v=s.getScreenSpaceBoundingBox(f,t,h);Ax(v,i),r=d.union(r,v,r)}return r}function w7(e,t){const{defined:i}=Cesium;if(e.clusterShow=!0,!i(e._labelCollection)&&i(e.id)&&Bx(t,e.id.id)&&i(e.id._label)){const n=t._collectionIndicesByEntity[e.id.id].labelIndex,r=t._labelCollection.get(n);r.clusterShow=!0}}function Lx(e,t,i,n){const r={billboard:n._clusterBillboardCollection.add(),label:n._clusterLabelCollection.add(),point:n._clusterPointCollection.add()};r.billboard.show=!1,r.point.show=!1,r.label.show=!0,r.label.text=t.toLocaleString(),r.label.id=i,r.billboard.position=r.label.position=r.point.position=e,r.billboard.owner=n,r.label.owner=n,r.point.owner=n,n._clusterEvent.raiseEvent(i,r)}function Bx(e,t){const{defined:i}=Cesium;return i(e)&&i(e._collectionIndicesByEntity[t])&&i(e._collectionIndicesByEntity[t].labelIndex)}function ef(e,t,i,n,r){const{defined:a,SceneMode:s}=Cesium;if(!a(e))return;const l=e.length;for(let c=0;c<l;++c){const d=e.get(c);if(d.clusterShow=!1,!d.show||r._scene.mode===s.SCENE3D&&!n.isPointVisible(d.position))continue;const h=d.computeScreenSpacePosition(i);a(h)&&t.push({index:c,collection:e,clustered:!1,coord:h})}}function x7(e){const{defined:t,LabelCollection:i,BillboardCollection:n,PointPrimitiveCollection:r,Billboard:a,Matrix4:s,Cartesian3:l,Cartesian2:c,BoundingRectangle:d}=Cesium,h=new d,p=new d,f=new d;return function(v){if(t(v)&&v<.05||!e.enabled)return;const y=e._scene,w=e._labelCollection,C=e._billboardCollection,M=e._pointCollection;if(!t(w)&&!t(C)&&!t(M)||!e._clusterBillboards&&!e._clusterLabels&&!e._clusterPoints)return;let S=e._clusterLabelCollection,_=e._clusterBillboardCollection,O=e._clusterPointCollection;t(S)?S.removeAll():S=e._clusterLabelCollection=new i({scene:y}),t(_)?_.removeAll():_=e._clusterBillboardCollection=new n({scene:y}),t(O)?O.removeAll():O=e._clusterPointCollection=new r;const I=e._pixelRange,A=e._minimumClusterSize,V=e._previousClusters,$=[],D=e._previousHeight,G=y.camera.positionCartographic.height,q=y.mapProjection.ellipsoid,H=y.camera.positionWC,g=new Cesium.EllipsoidalOccluder(q,H),b=[];e._clusterLabels&&ef(w,b,y,g,e),e._clusterBillboards&&ef(C,b,y,g,e),e._clusterPoints&&ef(M,b,y,g,e);let E,L,P,T,F,N,j,U,te,ie,K,Z;const z=new tb(b.length,64,Int32Array);for(let Q=0;Q<b.length;Q++)z.add(b[Q].coord.x,b[Q].coord.y);if(z.finish(),G<D)for(P=V.length,E=0;E<P;++E){const Q=V[E];if(!g.isPointVisible(Q.position))continue;const re=a._computeScreenSpacePosition(s.IDENTITY,Q.position,l.ZERO,c.ZERO,y);if(!t(re))continue;const X=1-G/D;let J=Q.width=Q.width*X,ae=Q.height=Q.height*X;J=Math.max(J,Q.minimumWidth),ae=Math.max(ae,Q.minimumHeight);const ne=re.x-J*.5,ce=re.y-ae*.5,le=re.x+J,pe=re.y+ae;for(F=z.range(ne,ce,le,pe),N=F.length,ie=0,te=[],L=0;L<N;++L)j=F[L],U=b[j],U.clustered||(++ie,K=U.collection,Z=U.index,te.push(K.get(Z).id));if(ie>=A)for(Lx(Q.position,ie,te,e),$.push(Q),L=0;L<N;++L)b[F[L]].clustered=!0}for(P=b.length,E=0;E<P;++E){const Q=b[E];if(Q.clustered)continue;Q.clustered=!0,K=Q.collection,Z=Q.index;const re=K.get(Z);T=Dx(re,Q.coord,I,e,h);const X=d.clone(T,p);F=z.range(T.x,T.y,T.x+T.width,T.y+T.height),N=F.length;const J=l.clone(re.position);for(ie=1,te=[re.id],L=0;L<N;++L)if(j=F[L],U=b[j],!U.clustered){const ae=U.collection.get(U.index),ne=Dx(ae,U.coord,I,e,f);l.add(ae.position,J,J),d.union(X,ne,X),++ie,te.push(ae.id)}if(ie>=A){const ae=l.multiplyByScalar(J,1/ie,J);for(Lx(ae,ie,te,e),$.push({position:ae,width:X.width,height:X.height,minimumWidth:T.width,minimumHeight:T.height}),L=0;L<N;++L)b[F[L]].clustered=!0}else w7(re,e)}S.length===0&&(S.destroy(),e._clusterLabelCollection=void 0),_.length===0&&(_.destroy(),e._clusterBillboardCollection=void 0),O.length===0&&(O.destroy(),e._clusterPointCollection=void 0),e._previousClusters=$,e._previousHeight=G}}let Oc=!1;class tf{static extend(t){if(Oc)return;const{Rectangle:i}=Cesium;i.prototype.expand=function(n,r,a){return a=a&&a instanceof i?a:this.clone(),n=a.width*(1-n)/2,r=a.height*(1-r)/2,a.west+=n,a.south+=r,a.east-=n,a.north-=r,a.west=a.west<-Math.PI?-Math.PI:a.west,a.east=a.east>Math.PI?Math.PI:a.east,a.north=a.north>Math.PI/2?Math.PI/2:a.north,a.south=a.south<-Math.PI/2?-Math.PI/2:a.south,a},Oc=!0}static revoke(t){if(!Oc)return;const{Rectangle:i}=Cesium;i.prototype.expand=void 0,Oc=!1}}let Mc=!1,nf;class rf{static extend(t){if(Mc)return;const i=Cesium.ShadowMapShader;nf=i.createShadowReceiveFragmentShader,i.createShadowReceiveFragmentShader=function(n,r,a,s,l){var c;if(n=nf.bind(this)(n,r,a,s,l),r._isSpotLight){n.sources[0]=`
          uniform vec4 shadowMap_viewshedVisibleColor;
          uniform vec4 shadowMap_viewshedInvisibleColor;
          ${n.sources[0]}
        `;const d=(c=t.scene.context)==null?void 0:c.webgl2;n.sources[n.sources.length-1]=n.sources[n.sources.length-1].replace(`${d?"out_FragColor":"gl_FragColor"}.rgb *= visibility;`,`
          float _depth = shadowPosition.z - shadowParameters.depthBias;
          float _visibility = czm_shadowDepthCompare(shadowMap_texture, shadowPosition.xy, _depth);
          ${d?"out_FragColor":"gl_FragColor"}.rgb *= (_visibility < 0.999 ? shadowMap_viewshedInvisibleColor.rgb :shadowMap_viewshedVisibleColor.rgb);
          `),n.sources[n.sources.length-1]=n.sources[n.sources.length-1].replace("vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);","vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);if (distance(positionEC.xyz, shadowMap_lightPositionEC.xyz) > shadowMap_lightPositionEC.w) { return; }")}return n},Mc=!0}static revoke(t){if(!Mc)return;const i=Cesium.ShadowMapShader;i.createShadowReceiveFragmentShader=nf,Mc=!1}}class of{constructor(t,i){const{defined:n,DeveloperError:r,PerspectiveFrustum:a,Math:s,Camera:l,ShadowMap:c,ShadowMode:d,Event:h,Cartesian3:p,defaultValue:f,Color:v}=Cesium;if(!n(t))throw new r("scene is required.");this._scene=t,this._frustum=new a,this._frustum.fov=s.PI/3,this._frustum.aspectRatio=3,this._frustum.near=1,this._frustum.far=400,this._spotLightCamera=new l(this._scene),this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap=new c({context:this._scene.context,lightCamera:this._spotLightCamera,cascadesEnabled:!1}),i=i||{},this._scene.globe.shadows=d.ENABLED,this._viewshedShadowMap._terrainBias.depthBias=0,this._debugCameraPrimitive=new Wm({}),this._enabledChangedEvent=new h,this._position=new p,this._offsetHeight=f(i.offsetHeight,1.8),this._visibleColor=f(i.visibleColor,new v(0,1,0,1)),this._invisibleColor=f(i.invisibleColor,new v(1,0,0,1)),this._viewshedShadowMap._viewshedColors={visible:this._visibleColor,invisible:this._invisibleColor},this._showGridLine=i.showGridLine,this._debugCameraPrimitive.show=this._showGridLine,this._debugCameraPrimitive.lineColor=f(i.lineColor,new v(1,1,1,.4)),this._debugCameraPrimitive.faceColor=f(i.faceColor,new v(1,1,1,.1))}get frustum(){return this._frustum}get fovH(){return this._fovH}set fovH(t){if(isNaN(t)||t===void 0||t==null||t<0||t>=Math.PI)throw new Error("fovH must be in the range [0, PI).");this._fovH=Number(t),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get fovV(){return this._fovV}set fovV(t){if(isNaN(t)||t===void 0||t==null||t<0||t>=Math.PI)throw new Error("fovV must be in the range [0, PI).");this._fovV=Number(t),this.frustum.aspectRatio=Math.tan(.5*this._fovH)/Math.tan(.5*this._fovV),this.frustum.fov=this._fovH>this._fovV?this._fovH:this._fovV}get near(){return this.frustum.near}set near(t){this.frustum.near!==t&&(this.frustum.near=t)}get far(){return this.far.near}set far(t){this.frustum.far!==t&&(this.frustum.far=t)}get position(){return this._position}set position(t){t instanceof Cesium.Cartesian3&&this.setView({destination:t.clone(),orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get offsetHeight(){return this._offsetHeight}set offsetHeight(t){if(isNaN(t)||t==null||t==null)throw new Error("Unacceptable offset.");this._offsetHeight=Number(t),this.setView({destination:this._position.clone(),orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get heading(){return this._spotLightCamera.heading}set heading(t){this._spotLightCamera.heading!==t&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:t,pitch:this._spotLightCamera.pitch,roll:this._spotLightCamera.roll}})}get pitch(){return this._spotLightCamera.pitch}set pitch(t){this._spotLightCamera.pitch!==t&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:t,roll:this._spotLightCamera.roll}})}get roll(){return this._spotLightCamera.roll}set roll(t){this._spotLightCamera.roll!==t&&this._spotLightCamera.setView({destination:this._spotLightCamera.positionWC,orientation:{heading:this._spotLightCamera.heading,pitch:this._spotLightCamera.pitch,roll:t}})}get shadowMap(){return this._viewshedShadowMap}get lightCamera(){return this._spotLightCamera}get enabled(){return this._viewshedShadowMap.enabled}set enabled(t){this._viewshedShadowMap.enabled!==t&&(t?(this._viewshedShadowMap.enabled=!0,this._viewshedShadowMap._pointLightRadius=this._spotLightCamera.frustum.far):this._viewshedShadowMap.enabled=!1,this._enabledChangedEvent.raiseEvent(t))}get enabledChangedEvent(){return this._enabledChangedEvent}get visibleColor(){return this._visibleColor}set visibleColor(t){this._visibleColor=t,this._viewshedShadowMap._viewshedColors.visible=t}get invisibleColor(){return this._invisibleColor}set invisibleColor(t){this._invisibleColor=t,this._viewshedShadowMap._viewshedColors.invisible=t}get showGridLine(){return this._showGridLine}set showGridLine(t){this._showGridLine=t,this._debugCameraPrimitive.show=t}get faceColor(){return this._debugCameraPrimitive.faceColor}set faceColor(t){this._debugCameraPrimitive.faceColor=t}get lineColor(){return this._debugCameraPrimitive.lineColor}set lineColor(t){this._debugCameraPrimitive.lineColor=t}update(t){if(this._viewshedShadowMap.enabled){const{ShadowMode:i,Matrix3:n,Matrix4:r,Math:a}=Cesium;if(this._scene.globe.shadows!==i.ENABLED&&(this._scene.globe.shadows=i.ENABLED),t.shadowMaps.unshift(this._viewshedShadowMap),this._frustum.equals(this._spotLightCamera.frustum)||(this._frustum.clone(this._spotLightCamera.frustum),this._viewshedShadowMap._pointLightRadius=this._frustum.far,this.shadowMap._boundingSphere.radius=Math.random()),this._debugCameraPrimitive.show){const s=this._debugCameraPrimitive.modelMatrix;r.clone(this._spotLightCamera.inverseViewMatrix,s);const l=n.fromRotationZ(.5*a.PI),c=n.fromRotationY(.5*a.PI),d=new n;n.multiply(l,c,d),r.multiplyByMatrix3(s,d,s),r.multiplyByUniformScale(s,this._spotLightCamera.frustum.far,s);const h=this._spotLightCamera.frustum;this._debugCameraPrimitive.fovV=h.aspectRatio<=1?h.fov:2*Math.atan(Math.tan(.5*h.fov)/h.aspectRatio),this._debugCameraPrimitive.fovH=1<h.aspectRatio?h.fov:2*Math.atan(Math.tan(.5*h.fov)*h.aspectRatio),this._debugCameraPrimitive.segmentH=parseInt(String(this._debugCameraPrimitive.fovH/(Math.PI/30)))||1,this._debugCameraPrimitive.segmentV=parseInt(String(this._debugCameraPrimitive.fovV/(Math.PI/30)))||1,this._debugCameraPrimitive.update(t)}}}setView(t){t=t||{};const i=t.destination;if(i instanceof Cesium.Cartesian3){this._position=i.clone();const n=this._offsetHeight,r=Cesium.Cartographic.fromCartesian(i,this._scene.globe.ellipsoid);if(r){r.height=r.height+n;const a=Cesium.Cartesian3.fromRadians(r.longitude,r.latitude,r.height,this._scene.globe.ellipsoid);t.destination=a}}this._spotLightCamera.setView(t)}isDestroyed(){return!1}destroy(){this._debugCameraPrimitive&&this._debugCameraPrimitive.destroy(),this._viewshedShadowMap&&this._viewshedShadowMap.destroy(),Cesium.destroyObject(this)}}class E7{constructor(t,i,n){this._color=t,this._height=i,this._base=Cesium.defaultValue(n,0)}getHeight(){return this._height}getBase(){return this._base}getStartTime(){return this._start}getStopTime(){return this._stop}setRange(t,i){this._start=t,this._stop=i}render(t){let i="";const{JulianDate:n}=Cesium;if(this._start&&this._stop&&this._color){const r=n.secondsDifference(this._start,t.epochJulian);let a=Math.round(t.timeBarWidth*t.getAlpha(r));const s=n.secondsDifference(this._stop,t.epochJulian);let l=Math.round(t.timeBarWidth*t.getAlpha(s))-a;a<0&&(l+=a,a=0),a+l>t.timeBarWidth&&(l=t.timeBarWidth-a),l>0&&(i=`<span class="cesium-timeline-highlight" style="left: ${a.toString()}px; width: ${l.toString()}px; bottom: ${this._base.toString()}px; height: ${this._height}px; background-color: ${this._color};"></span>`)}return i}}class P7{constructor(t,i,n,r){const{Color:a}=Cesium;this.interval=t,this.height=i,this.color=n||new a(.5,.5,.5,1),this.backgroundColor=r||new a(0,0,0,0)}render(t,i){const{JulianDate:n,defined:r}=Cesium,a=this.interval.start,s=this.interval.stop,l=i.startJulian,c=n.addSeconds(i.startJulian,i.duration,new n);if(n.lessThan(a,l)&&n.greaterThan(s,c))t.fillStyle=this.color.toCssColorString(),t.fillRect(0,i.y,i.timeBarWidth,this.height);else if(n.lessThanOrEquals(a,c)&&n.greaterThanOrEquals(s,l)){let d,h,p;for(d=0;d<i.timeBarWidth;++d){const f=n.addSeconds(i.startJulian,d/i.timeBarWidth*i.duration,new n);!r(h)&&n.greaterThanOrEquals(f,a)?h=d:!r(p)&&n.greaterThanOrEquals(f,s)&&(p=d)}t.fillStyle=this.backgroundColor.toCssColorString(),t.fillRect(0,i.y,i.timeBarWidth,this.height),r(h)&&(r(p)||(p=i.timeBarWidth),t.fillStyle=this.color.toCssColorString(),t.fillRect(h,i.y,Math.max(p-h,1),this.height))}}}let af=1e12;const qn={none:0,scrub:1,slide:2,zoom:3,touchOnly:4},Xi={none:0,scrub:1,slideZoom:2,singleTap:3,ignore:4},Co=[.001,.002,.005,.01,.02,.05,.1,.25,.5,1,2,5,10,15,30,60,120,300,600,900,1800,3600,7200,14400,21600,43200,86400,172800,345600,604800,1296e3,2592e3,5184e3,7776e3,15552e3,31536e3,63072e3,126144e3,15768e4,31536e4,63072e4,126144e4,15768e5,31536e5,63072e5,126144e5,15768e6,31536e6],O7=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];class Rx{constructor(t,i){this.smallestTicInPixels=7;const{defined:n,DeveloperError:r}=Cesium;if(!n(t))throw new r("container is required.");if(!n(i))throw new r("clock is required.");t=cx(t);const a=t.ownerDocument;this.container=t;const s=a.createElement("div");s.className="cesium-timeline-main",t.appendChild(s),this._topDiv=s,this._endJulian=void 0,this._epochJulian=void 0,this._lastXPos=void 0,this._scrubElement=void 0,this._startJulian=void 0,this._timeBarSecondsSpan=void 0,this._clock=i,this._scrubJulian=i.currentTime,this._mainTicSpan=-1,this._mouseMode=qn.none,this._touchMode=Xi.none,this._touchState={centerX:0,spanX:0},this._mouseX=0,this._timelineDrag=0,this._timelineDragLocation=void 0,this._lastHeight=void 0,this._lastWidth=void 0,this._topDiv.innerHTML='<div class="cesium-timeline-bar"></div><div class="cesium-timeline-trackContainer"><canvas class="cesium-timeline-tracks" width="10" height="1"></canvas></div><div class="cesium-timeline-needle"></div><span class="cesium-timeline-ruler"></span>',this._timeBarEle=this._topDiv.childNodes[0],this._trackContainer=this._topDiv.childNodes[1],this._trackListEle=this._topDiv.childNodes[1].childNodes[0],this._needleEle=this._topDiv.childNodes[2],this._rulerEle=this._topDiv.childNodes[3],this._context=this._trackListEle.getContext("2d"),this._trackList=[],this._highlightRanges=[],this.zoomTo(i.startTime,i.stopTime),this._onMouseDown=M7(this),this._onMouseUp=S7(this),this._onMouseMove=T7(this),this._onMouseWheel=I7(this),this._onTouchStart=A7(this),this._onTouchMove=L7(this),this._onTouchEnd=D7(this);const l=this._timeBarEle;a.addEventListener("mouseup",this._onMouseUp,!1),a.addEventListener("mousemove",this._onMouseMove,!1),l.addEventListener("mousedown",this._onMouseDown,!1),l.addEventListener("DOMMouseScroll",this._onMouseWheel,!1),l.addEventListener("mousewheel",this._onMouseWheel,!1),l.addEventListener("touchstart",this._onTouchStart,!1),l.addEventListener("touchmove",this._onTouchMove,!1),l.addEventListener("touchend",this._onTouchEnd,!1),l.addEventListener("touchcancel",this._onTouchEnd,!1),this._topDiv.oncontextmenu=function(){return!1},i.onTick.addEventListener(this.updateFromClock,this),this.updateFromClock()}addEventListener(t,i,n){this._topDiv.addEventListener(t,i,n)}removeEventListener(t,i,n){this._topDiv.removeEventListener(t,i,n)}isDestroyed(){return!1}destroy(){this._clock.onTick.removeEventListener(this.updateFromClock,this);const t=this.container.ownerDocument;t.removeEventListener("mouseup",this._onMouseUp,!1),t.removeEventListener("mousemove",this._onMouseMove,!1);const i=this._timeBarEle;i.removeEventListener("mousedown",this._onMouseDown,!1),i.removeEventListener("DOMMouseScroll",this._onMouseWheel,!1),i.removeEventListener("mousewheel",this._onMouseWheel,!1),i.removeEventListener("touchstart",this._onTouchStart,!1),i.removeEventListener("touchmove",this._onTouchMove,!1),i.removeEventListener("touchend",this._onTouchEnd,!1),i.removeEventListener("touchcancel",this._onTouchEnd,!1),this.container.removeChild(this._topDiv),Cesium.destroyObject(this)}addHighlightRange(t,i,n){const r=new E7(t,i,n);return this._highlightRanges.push(r),this.resize(),r}addTrack(t,i,n,r){const a=new P7(t,i,n,r);return this._trackList.push(a),this._lastHeight=void 0,this.resize(),a}resize(){const t=this.container.clientWidth,i=this.container.clientHeight;if(t===this._lastWidth&&i===this._lastHeight)return;this._trackContainer.style.height=`${i}px`;let n=1;this._trackList.forEach(function(r){n+=r.height}),this._trackListEle.style.height=`${n.toString()}px`,this._trackListEle.width=this._trackListEle.clientWidth,this._trackListEle.height=n,this._makeTics(),this._lastXPos=void 0,this._lastWidth=t,this._lastHeight=i}zoomTo(t,i){const{defined:n,JulianDate:r,DeveloperError:a,ClockRange:s}=Cesium;if(!n(t))throw new a("startTime is required.");if(!n(i))throw new a("stopTime is required");if(r.lessThanOrEquals(i,t))throw new a("Start time must come before end time.");if(this._startJulian=t,this._endJulian=i,this._timeBarSecondsSpan=r.secondsDifference(i,t),this._clock&&this._clock.clockRange!==s.UNBOUNDED){const c=this._clock.startTime,d=this._clock.stopTime,h=r.secondsDifference(d,c),p=r.secondsDifference(c,this._startJulian),f=r.secondsDifference(d,this._endJulian);this._timeBarSecondsSpan>=h?(this._timeBarSecondsSpan=h,this._startJulian=this._clock.startTime,this._endJulian=this._clock.stopTime):p>0?(this._endJulian=r.addSeconds(this._endJulian,p,new r),this._startJulian=c,this._timeBarSecondsSpan=r.secondsDifference(this._endJulian,this._startJulian)):f<0&&(this._startJulian=r.addSeconds(this._startJulian,f,new r),this._endJulian=d,this._timeBarSecondsSpan=r.secondsDifference(this._endJulian,this._startJulian))}this._makeTics();const l=new Event("setzoom",{bubbles:!0,cancelable:!0,composed:!0});l.startJulian=this._startJulian,l.endJulian=this._endJulian,l.epochJulian=this._epochJulian,l.totalSpan=this._timeBarSecondsSpan,l.mainTicSpan=this._mainTicSpan,this._topDiv.dispatchEvent(l)}updateFromClock(){const{defined:t,JulianDate:i}=Cesium;this._scrubJulian=this._clock.currentTime;const n=this._scrubElement;if(t(this._scrubElement)){const r=i.secondsDifference(this._scrubJulian,this._startJulian),a=Math.round(r*this._topDiv.clientWidth/this._timeBarSecondsSpan);this._lastXPos!==a&&(this._lastXPos=a,n.style.left=`${a-8}px`,this._needleEle.style.left=`${a}px`)}t(this._timelineDragLocation)&&(this._setTimeBarTime(this._timelineDragLocation,this._timelineDragLocation*this._timeBarSecondsSpan/this._topDiv.clientWidth),this.zoomTo(i.addSeconds(this._startJulian,this._timelineDrag,new i),i.addSeconds(this._endJulian,this._timelineDrag,new i)))}_setTimeBarTime(t,i){const{JulianDate:n}=Cesium;if(t=Math.round(t),this._scrubJulian=n.addSeconds(this._startJulian,i,new n),this._scrubElement){const a=t-8;this._scrubElement.style.left=`${a.toString()}px`,this._needleEle.style.left=`${t.toString()}px`}const r=new Event("settime",{bubbles:!0,cancelable:!0,composed:!0});r.clientX=t,r.timeSeconds=i,r.timeJulian=this._scrubJulian,r.clock=this._clock,this._topDiv.dispatchEvent(r)}zoomFrom(t){const{JulianDate:i}=Cesium;let n=i.secondsDifference(this._scrubJulian,this._startJulian);t>1||n<0||n>this._timeBarSecondsSpan?n=this._timeBarSecondsSpan*.5:n+=n-this._timeBarSecondsSpan*.5;const r=this._timeBarSecondsSpan-n;this.zoomTo(i.addSeconds(this._startJulian,n-n*t,new i),i.addSeconds(this._endJulian,r*t-r,new i))}makeLabel(t){const{JulianDate:i}=Cesium,n=i.toGregorianDate(t),r=n.millisecond;let a=" UTC";if(r>0&&this._timeBarSecondsSpan<3600){for(a=Math.floor(r).toString();a.length<3;)a=`0${a}`;a=`.${a}`}return`${O7[n.month-1]} ${n.day} ${n.year} ${sf(n.hour)}:${sf(n.minute)}:${sf(n.second)}${a}`}_makeTics(){const{JulianDate:t}=Cesium,i=this._timeBarEle,n=t.secondsDifference(this._scrubJulian,this._startJulian),r=Math.round(n*this._topDiv.clientWidth/this._timeBarSecondsSpan),a=r-8;let s;const l=this;this._needleEle.style.left=`${r.toString()}px`;let c="";const d=.01,h=31536e6,p=1e-10;let f=0,v=this._timeBarSecondsSpan;v<d?(v=d,this._timeBarSecondsSpan=d,this._endJulian=t.addSeconds(this._startJulian,d,new t)):v>h&&(v=h,this._timeBarSecondsSpan=h,this._endJulian=t.addSeconds(this._startJulian,h,new t));let y=this._timeBarEle.clientWidth;y<10&&(y=10);const w=this._startJulian,C=Math.min(v/y*1e-5,.4);let M;const S=t.toGregorianDate(w);v>31536e4?M=t.fromDate(new Date(Date.UTC(Math.floor(S.year/100)*100,0))):v>31536e3?M=t.fromDate(new Date(Date.UTC(Math.floor(S.year/10)*10,0))):v>86400?M=t.fromDate(new Date(Date.UTC(S.year,0))):M=t.fromDate(new Date(Date.UTC(S.year,S.month,S.day)));const _=t.secondsDifference(this._startJulian,t.addSeconds(M,C,new t));let O=_+v;this._epochJulian=M;function I(U){return Math.floor(_/U)*U}function A(U,te){return Math.ceil(U/te+.5)*te}function V(U){return(U-_)/v}function $(U,te){return U-te*Math.round(U/te)}this._rulerEle.innerHTML=this.makeLabel(t.addSeconds(this._endJulian,-d,new t));let D=this._rulerEle.offsetWidth+20;D<30&&(D=180);const G=f;f-=p;const q={startTime:_,startJulian:w,epochJulian:M,duration:v,timeBarWidth:y,getAlpha:V};this._highlightRanges.forEach(function(U){c+=U.render(q)});let H=0,g=0,b=0,E=D/y;E>1&&(E=1),E*=this._timeBarSecondsSpan;let L=-1,P=-1;const T=Co.length;let F;for(F=0;F<T;++F){const U=Co[F];if(++L,H=U,U>E&&U>f)break;P<0&&y*(U/this._timeBarSecondsSpan)>=this.smallestTicInPixels&&(P=L)}if(L>0){for(;L>0;)if(--L,Math.abs($(H,Co[L]))<1e-5){Co[L]>=f&&(g=Co[L]);break}if(P>=0)for(;P<L;){if(Math.abs($(g,Co[P]))<1e-5&&Co[P]>=f){b=Co[P];break}++P}}f=G,f>p&&b<1e-5&&Math.abs(f-H)>p&&(b=f,f<=H+p&&(g=0));let N=-999999,j;if(y*(b/this._timeBarSecondsSpan)>=3)for(s=I(b);s<=O;s=A(s,b))c+=`<span class="cesium-timeline-ticTiny" style="left: ${Math.round(y*V(s)).toString()}px;"></span>`;if(y*(g/this._timeBarSecondsSpan)>=3)for(s=I(g);s<=O;s=A(s,g))c+=`<span class="cesium-timeline-ticSub" style="left: ${Math.round(y*V(s)).toString()}px;"></span>`;if(y*(H/this._timeBarSecondsSpan)>=2){this._mainTicSpan=H,O+=H,s=I(H);const U=t.computeTaiMinusUtc(M);for(;s<=O;){let te=t.addSeconds(w,s-_,new t);if(H>2.1){const z=t.computeTaiMinusUtc(te);Math.abs(z-U)>.1&&(s+=z-U,te=t.addSeconds(w,s-_,new t))}const ie=Math.round(y*V(s)),K=this.makeLabel(te);this._rulerEle.innerHTML=K,j=this._rulerEle.offsetWidth,j<10&&(j=D);const Z=ie-(j/2-1);Z>N?(N=Z+j+5,c+=`<span class="cesium-timeline-ticMain" style="left: ${ie.toString()}px;"></span><span class="cesium-timeline-ticLabel" style="left: ${Z.toString()}px;">${K}</span>`):c+=`<span class="cesium-timeline-ticSub" style="left: ${ie.toString()}px;"></span>`,s=A(s,H)}}else this._mainTicSpan=-1;c+=`<span class="cesium-timeline-icon16" style="left:${a}px;bottom:0;background-position: 0 0;"></span>`,i.innerHTML=c,this._scrubElement=i.lastChild,this._context.clearRect(0,0,this._trackListEle.width,this._trackListEle.height),q.y=0,this._trackList.forEach(function(U){U.render(l._context,q),q.y+=U.height})}}function M7(e){return function(t){e._mouseMode!==qn.touchOnly&&(t.button===0?(e._mouseMode=qn.scrub,e._scrubElement&&(e._scrubElement.style.backgroundPosition="-16px 0"),e._onMouseMove(t)):(e._mouseX=t.clientX,t.button===2?e._mouseMode=qn.zoom:e._mouseMode=qn.slide)),t.preventDefault()}}function S7(e){return function(t){e._mouseMode=qn.none,e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0"),e._timelineDrag=0,e._timelineDragLocation=void 0}}function T7(e){return function(t){let i;if(e._mouseMode===qn.scrub){t.preventDefault();const n=t.clientX-e._topDiv.getBoundingClientRect().left;n<0?(e._timelineDragLocation=0,e._timelineDrag=-.01*e._timeBarSecondsSpan):n>e._topDiv.clientWidth?(e._timelineDragLocation=e._topDiv.clientWidth,e._timelineDrag=.01*e._timeBarSecondsSpan):(e._timelineDragLocation=void 0,e._setTimeBarTime(n,n*e._timeBarSecondsSpan/e._topDiv.clientWidth))}else if(e._mouseMode===qn.slide){if(i=e._mouseX-t.clientX,e._mouseX=t.clientX,i!==0){const{JulianDate:n}=Cesium,r=i*e._timeBarSecondsSpan/e._topDiv.clientWidth;e.zoomTo(n.addSeconds(e._startJulian,r,new n),n.addSeconds(e._endJulian,r,new n))}}else e._mouseMode===qn.zoom&&(i=e._mouseX-t.clientX,e._mouseX=t.clientX,i!==0&&e.zoomFrom(Math.pow(1.01,i)))}}function I7(e){return function(t){let i=t.wheelDeltaY||t.wheelDelta||-t.detail;af=Math.max(Math.min(Math.abs(i),af),1),i/=af,e.zoomFrom(Math.pow(1.05,-i))}}function A7(e){return function(t){const i=t.touches.length;let n,r;const a=e._topDiv.getBoundingClientRect().left;t.preventDefault(),e._mouseMode=qn.touchOnly,i===1?(n=Cesium.JulianDate.secondsDifference(e._scrubJulian,e._startJulian),r=Math.round(n*e._topDiv.clientWidth/e._timeBarSecondsSpan+a),Math.abs(t.touches[0].clientX-r)<50?(e._touchMode=Xi.scrub,e._scrubElement&&(e._scrubElement.style.backgroundPosition=i===1?"-16px 0":"0 0")):(e._touchMode=Xi.singleTap,e._touchState.centerX=t.touches[0].clientX-a)):i===2?(e._touchMode=Xi.slideZoom,e._touchState.centerX=(t.touches[0].clientX+t.touches[1].clientX)*.5-a,e._touchState.spanX=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):e._touchMode=Xi.ignore}}function D7(e){return function(t){const i=t.touches.length,n=e._topDiv.getBoundingClientRect().left;e._touchMode===Xi.singleTap?(e._touchMode=Xi.scrub,e._onTouchMove(t)):e._touchMode===Xi.scrub&&e._onTouchMove(t),e._mouseMode=qn.touchOnly,i!==1?e._touchMode=i>0?Xi.ignore:Xi.none:e._touchMode===Xi.slideZoom&&(e._touchState.centerX=t.touches[0].clientX-n),e._scrubElement&&(e._scrubElement.style.backgroundPosition="0 0")}}function L7(e){return function(t){let i,n,r,a,s,l,c=1;const d=e._topDiv.getBoundingClientRect().left;if(e._touchMode===Xi.singleTap&&(e._touchMode=Xi.slideZoom),e._mouseMode=qn.touchOnly,e._touchMode===Xi.scrub)t.preventDefault(),t.changedTouches.length===1&&(n=t.changedTouches[0].clientX-d,n>=0&&n<=e._topDiv.clientWidth&&e._setTimeBarTime(n,n*e._timeBarSecondsSpan/e._topDiv.clientWidth));else if(e._touchMode===Xi.slideZoom){r=t.touches.length,r===2?(a=(t.touches[0].clientX+t.touches[1].clientX)*.5-d,s=Math.abs(t.touches[0].clientX-t.touches[1].clientX)):r===1&&(a=t.touches[0].clientX-d,s=0);const{defined:h,JulianDate:p}=Cesium;h(a)&&(s>0&&e._touchState.spanX>0?(c=e._touchState.spanX/s,l=p.addSeconds(e._startJulian,(e._touchState.centerX*e._timeBarSecondsSpan-a*e._timeBarSecondsSpan*c)/e._topDiv.clientWidth,new p)):(i=e._touchState.centerX-a,l=p.addSeconds(e._startJulian,i*e._timeBarSecondsSpan/e._topDiv.clientWidth,new p)),e.zoomTo(l,p.addSeconds(l,e._timeBarSecondsSpan*c,new p)),e._touchState.centerX=a,e._touchState.spanX=s)}}}function sf(e){return e<10?`0${e.toString()}`:e.toString()}const Fx=[tf,rf,Pp];function B7(){return{invokeExtensions:e=>{Fx.forEach(t=>{t.extend(e)})},revokeExtensions:e=>{Fx.forEach(t=>{t.revoke(e)})}}}const lf=m7;function R7(e,t,i){let n,r;const a=new Promise((P,T)=>{n=P,r=T}),s=he(),l=he(!1),c=w2(),{emit:d}=t,h=zu(),p=ks(i);i.mounted=!1,i.vcMitt=c,i.cesiumClass="Viewer",i.children=[];const f=yc(e,i),v=Ve({toolbarContainerRC:void 0,timelineContainerRC:void 0,animationContainerRC:void 0,bottomContainerRC:void 0});let y=[];p.debug("viewer creating");const{t:w}=ri(),{invokeExtensions:C,revokeExtensions:M}=B7();Pe(()=>e.selectionIndicator,P=>{const{viewer:T,viewerElement:F}=i,{defined:N,SelectionIndicator:j}=Cesium;let U;if(N(T.selectionIndicator)&&!T.selectionIndicator.isDestroyed()&&!P)U=T.selectionIndicator.container,F==null||F.removeChild(U),T.selectionIndicator.destroy(),T._selectionIndicator=void 0;else if(!N(T.selectionIndicator)||T.selectionIndicator.isDestroyed()){U=document.createElement("div"),U.className="cesium-viewer-selectionIndicatorContainer",F==null||F.appendChild(U);const te=new j(U,T.scene);T._selectionIndicator=te}T.viewerWidgetResized.raiseEvent({type:"selectionIndicator",status:P?"added":"removed",target:U})}),Pe(()=>e.infoBox,P=>{var T,F;const{viewer:N,viewerElement:j}=i,{defined:U,InfoBox:te}=Cesium,ie=["cameraClicked","closeClicked"];let K;if(U(N.infoBox)&&!N.infoBox.isDestroyed()&&!P){const Z=N.infoBox.viewModel;Z&&f.bindEvents(Z,ie,!1),K=N.infoBox.container,j==null||j.removeChild(K),N.infoBox.destroy(),N._infoBox=void 0}else if(!U(N.infoBox)||N.infoBox.isDestroyed()){K=document.createElement("div"),K.className="cesium-viewer-infoBoxContainer",j==null||j.appendChild(K);const Z=new te(K),z=Z.viewModel;N._onInfoBoxCameraClicked&&((T=N._eventHelper)==null||T.add(z.cameraClicked,N._onInfoBoxCameraClicked,N)),N._onInfoBoxClockClicked&&((F=N._eventHelper)==null||F.add(z.closeClicked,N._onInfoBoxClockClicked,N)),z&&f.bindEvents(z,ie,!0),N._infoBox=Z}N.forceResize(),N.viewerWidgetResized.raiseEvent({type:"infoBox",status:P?"added":"removed",target:K})}),Pe(()=>e.geocoder,P=>{var T;const{viewer:F}=i,N=F._toolbar,{defined:j,Geocoder:U}=Cesium;let te;if(j(F.geocoder)&&!F.geocoder.isDestroyed()&&!P)te=F.geocoder.container,N==null||N.removeChild(te),F.geocoder.destroy(),F._geocoder=void 0;else if(!j(F.geocoder)||F.geocoder.isDestroyed()){te=document.createElement("div"),te.className="cesium-viewer-geocoderContainer",N==null||N.appendChild(te);const ie=new U({container:te,geocoderServices:j(e.geocoder)&&typeof e.geocoder!="boolean"?Array.isArray(e.geocoder)?e.geocoder:[e.geocoder]:void 0,scene:F.scene});F._clearObjects&&((T=F._eventHelper)==null||T.add(ie.viewModel.search.beforeExecute,F._clearObjects,F)),F._geocoder=ie,E(N)}F.viewerWidgetResized.raiseEvent({type:"geocoder",status:P?"added":"removed",target:te})}),Pe(()=>e.homeButton,P=>{var T,F;const{viewer:N}=i,j=N._toolbar,{defined:U,HomeButton:te}=Cesium;if(U(N.homeButton)&&!N.homeButton.isDestroyed()&&!P)N.homeButton.destroy(),N._homeButton=void 0;else if(!U(N.homeButton)||N.homeButton.isDestroyed()){const ie=new te(j,N.scene);U(N.geocoder)&&((T=N._eventHelper)==null||T.add(ie.viewModel.command.afterExecute,function(){const K=N.geocoder.viewModel;K.searchText="",K.isSearchInProgress&&K.search()})),N._clearTrackedObject&&((F=N._eventHelper)==null||F.add(ie.viewModel.command.beforeExecute,N._clearTrackedObject,N)),N._homeButton=ie,E(j)}N.viewerWidgetResized.raiseEvent({type:"homeButton",status:P?"added":"removed",target:j})}),Pe(()=>e.sceneModePicker,P=>{const{viewer:T}=i,F=T._toolbar,{defined:N,DeveloperError:j,SceneModePicker:U}=Cesium;if(N(T.sceneModePicker)&&!T.sceneModePicker.isDestroyed()&&!P)T.sceneModePicker.destroy(),T._sceneModePicker=void 0;else if(!N(T.sceneModePicker)||T.sceneModePicker.isDestroyed()){if(e.sceneModePicker&&e.scene3DOnly)throw new j("options.sceneModePicker is not available when options.scene3DOnly is set to true.");if(!e.scene3DOnly&&e.sceneModePicker){const te=new U(F,T.scene);T._sceneModePicker=te,E(F)}}T.viewerWidgetResized.raiseEvent({type:"sceneModePicker",status:P?"added":"removed",target:F})}),Pe(()=>e.projectionPicker,P=>{const{viewer:T}=i,F=T._toolbar,{defined:N,ProjectionPicker:j}=Cesium;if(N(T.projectionPicker)&&!T.projectionPicker.isDestroyed()&&!P)T.projectionPicker.destroy(),T._projectionPicker=void 0;else if(!N(T.projectionPicker)||T.projectionPicker.isDestroyed()){const U=new j(F,T.scene);T._projectionPicker=U,E(F)}T.viewerWidgetResized.raiseEvent({type:"projectionPicker",status:P?"added":"removed",target:F})}),Pe(()=>e.baseLayerPicker,async P=>{const{viewer:T}=i,F=T._toolbar,{defined:N,buildModuleUrl:j,DeveloperError:U,defaultValue:te,createDefaultImageryProviderViewModels:ie,createDefaultTerrainProviderViewModels:K,BaseLayerPicker:Z}=Cesium;if(N(T.baseLayerPicker)&&!T.baseLayerPicker.isDestroyed()&&!P){T.baseLayerPicker.destroy(),T._baseLayerPicker=void 0,T.imageryLayers.remove(T.imageryLayers.get(T.imageryLayers.length-1));const z=j("Assets/Textures/NaturalEarthII"),Q=T.imageryLayers.addImageryProvider(ii(Cesium.VERSION,"1.104")?await Cesium.TileMapServiceImageryProvider.fromUrl(z):new Cesium.TileMapServiceImageryProvider({url:z}));T.imageryLayers.lowerToBottom(Q)}else if(!N(T.baseLayerPicker)||T.baseLayerPicker.isDestroyed()){const z=(!Cesium.defined(T.scene.globe)||e.globe!==!1)&&(!Cesium.defined(T.baseLayerPicker)||e.baseLayerPicker!==!1);if(z&&N(e.imageryProvider))throw new U(`options.imageryProvider is not available when using the BaseLayerPicker widget.
        Either specify options.selectedImageryProviderViewModel instead or set options.baseLayerPicker to false.`);if(!z&&N(e.selectedImageryProviderViewModel))throw new U(`options.selectedImageryProviderViewModel is not available when not using the BaseLayerPicker widget.
        Either specify options.imageryProvider instead or set options.baseLayerPicker to true.`);if(z&&N(e.terrainProvider))throw new U(`options.terrainProvider is not available when using the BaseLayerPicker widget.
        Either specify options.selectedTerrainProviderViewModel instead or set options.baseLayerPicker to false.`);if(!z&&N(e.selectedTerrainProviderViewModel))throw new U(`options.selectedTerrainProviderViewModel is not available when not using the BaseLayerPicker widget.
        Either specify options.terrainProvider instead or set options.baseLayerPicker to true.`);if(z){const Q=te(e.imageryProviderViewModels,ie()),re=te(e.terrainProviderViewModels,K()),X=new Z(F,{globe:T.scene.globe,imageryProviderViewModels:Q,selectedImageryProviderViewModel:Q[0],terrainProviderViewModels:re,selectedTerrainProviderViewModel:re[0]}),J=F==null?void 0:F.getElementsByClassName("cesium-baseLayerPicker-dropDown"),ae=J==null?void 0:J[0];T._baseLayerPickerDropDown=ae,T._baseLayerPicker=X,T.imageryLayers.raiseToTop(T.imageryLayers.get(0)),E(F)}}T.viewerWidgetResized.raiseEvent({type:"baseLayerPicker",status:P?"added":"removed",target:F})}),Pe(()=>e.navigationHelpButton,P=>{const{viewer:T}=i,F=T._toolbar,{defined:N,defaultValue:j,NavigationHelpButton:U}=Cesium;if(N(T.navigationHelpButton)&&!T.navigationHelpButton.isDestroyed()&&!P)T.navigationHelpButton.destroy(),T._navigationHelpButton=void 0;else if(!N(T.navigationHelpButton)||T.navigationHelpButton.isDestroyed()){let te=!0;try{if(N(window.localStorage)){const K=window.localStorage.getItem("cesium-hasSeenNavHelp");N(K)&&K?te=!1:window.localStorage.setItem("cesium-hasSeenNavHelp","true")}}catch(K){}const ie=new U({container:F,instructionsInitiallyVisible:j(e.navigationInstructionsInitiallyVisible,te)});T._navigationHelpButton=ie,E(F)}T.viewerWidgetResized.raiseEvent({type:"navigationHelpButton",status:P?"added":"removed",target:F})}),Pe(()=>e.animation,P=>{const{viewer:T,viewerElement:F}=i,{defined:N,Animation:j,AnimationViewModel:U}=Cesium;let te;if(N(T.animation)&&!T.animation.isDestroyed()&&!P)te=T.animation.container,F==null||F.removeChild(te),T.animation.destroy(),T._animation=void 0;else if(!N(T.animation)||T.animation.isDestroyed()){te=document.createElement("div"),te.className="cesium-viewer-animationContainer",F==null||F.appendChild(te);const ie=new j(te,new U(T.clockViewModel));ie.viewModel.dateFormatter=q,ie.viewModel.timeFormatter=H,T._animation=ie}T.forceResize(),T.viewerWidgetResized.raiseEvent({type:"animation",status:P?"added":"removed",target:te})}),Pe(()=>e.timeline,P=>{var T;const{viewer:F,viewerElement:N}=i,{defined:j,Timeline:U}=Cesium;let te;if(j(F.timeline)&&!F.timeline.isDestroyed()&&!P)te=F.timeline.container,N==null||N.removeChild(te),F.timeline.destroy(),F._timeline=void 0;else if(!j(F.timeline)||F.timeline.isDestroyed()){te=document.createElement("div"),te.className="cesium-viewer-timelineContainer",N==null||N.appendChild(te);const ie=new U(te,F.clock);ie.makeLabel=K=>q(K),(T=ie.addEventListener)==null||T.call(ie,"settime",g,!1),ie.zoomTo(F.clock.startTime,F.clock.stopTime),F._timeline=ie}F.forceResize(),F.viewerWidgetResized.raiseEvent({type:"timeline",status:P?"added":"removed",target:te})}),Pe(()=>e.fullscreenButton,P=>{const{viewer:T,viewerElement:F}=i,{defined:N,FullscreenButton:j}=Cesium;let U;if(N(T.fullscreenButton)&&!T.fullscreenButton.isDestroyed()&&!P)U=T.fullscreenButton.container,F==null||F.removeChild(U),T.fullscreenButton.destroy(),T._fullscreenButton=void 0;else if(!N(T.fullscreenButton)||T.fullscreenButton.isDestroyed()){U=document.createElement("div"),U.className="cesium-viewer-fullscreenContainer",F==null||F.appendChild(U);const te=new j(U,F);T._fullscreenButton=te}T.forceResize(),T.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:P?"added":"removed",target:U})}),Pe(()=>e.fullscreenElement,P=>{const{viewer:T}=i,{defined:F}=Cesium;F(T.fullscreenButton)&&F(P)&&(T.fullscreenButton.viewModel.fullscreenElement=P)}),Pe(()=>e.vrButton,P=>{const{viewer:T,viewerElement:F}=i,{defined:N,VRButton:j}=Cesium;let U;if(N(T.vrButton)&&!T.vrButton.isDestroyed()&&!P)U=T.vrButton.container,F==null||F.removeChild(U),T.vrButton.destroy(),T._vrButton=void 0;else if(!N(T.vrButton)||T.vrButton.isDestroyed()){U=document.createElement("div"),U.className="cesium-viewer-vrContainer",F==null||F.appendChild(U);const te=new j(U,T.scene,F),ie=te.viewModel.command;te.viewModel._command=function(K){ie(),b(T,K.isVRMode)},T._vrButton=te}T.forceResize(),T.viewerWidgetResized.raiseEvent({type:"fullscreenButton",status:P?"added":"removed",target:U})}),Pe(()=>e.useDefaultRenderLoop,P=>{i.viewer.useDefaultRenderLoop=P}),Pe(()=>e.sceneMode,P=>{const{SceneMode:T}=Cesium;(T.COLUMBUS_VIEW===P||T.MORPHING===P||T.SCENE2D===P||T.SCENE3D===P)&&(i.viewer.scene.mode=P)}),Pe(()=>e.shouldAnimate,P=>{i.viewer.clock.shouldAnimate=P}),Pe(()=>e.terrainExaggeration,P=>{i.viewer._terrainExaggeration=P}),Pe(()=>e.shadows,P=>{i.viewer.scene.shadowMap.enabled=P}),Pe(()=>e.terrainProvider,P=>{P&&(i.viewer.terrainProvider=P)}),Pe(()=>e.camera,P=>{Dp(i.viewer,P)},{deep:!0}),Pe(()=>e.imageryProvider,(P,T)=>{const{viewer:F}=i,{defined:N}=Cesium;if(N(P)){for(let j=0;j<F.imageryLayers.length;j++)F.imageryLayers.get(j).imageryProvider===T&&F.imageryLayers.remove(F.imageryLayers[j]);P&&F.imageryLayers.addImageryProvider(P)}}),Pe(()=>e.showCredit,P=>{const{viewer:T}=i;T.cesiumWidget.creditContainer.style.display=P?"inline":"none",T.viewerWidgetResized.raiseEvent({type:"credit",status:P?"added":"removed",target:T.cesiumWidget.creditContainer})}),Pe(()=>e.debugShowFramesPerSecond,P=>{const{viewer:T}=i;T.scene.debugShowFramesPerSecond=P});const S=async function(){p.debug("beforeLoad - viewer"),Ze(i,"beforeLoad")&&d("beforeLoad",i),h.value.__scriptPromise=h.value.__scriptPromise||A(),await h.value.__scriptPromise},_=async function(){var P,T,F;if(p.debug("loading-viewer"),i.mounted||(await S(),typeof Cesium=="undefined"))return!1;const{Ion:N,buildModuleUrl:j,ImageryLayer:U,TileMapServiceImageryProvider:te,Viewer:ie,defined:K,Math:Z,Event:z}=Cesium,Q=e.accessToken?e.accessToken:h.value.accessToken;N.defaultAccessToken=Q;const re=j("Assets/Textures/NaturalEarthII"),X={};e&&Object.keys(e).forEach(ne=>{e[ne]===void 0||e[ne]===null||(X[ne]=e[ne])}),X.fullscreenElement=Ns(X.fullscreenElement)?De(s):X.fullscreenElement,ii(Cesium.VERSION,"1.104")?X.baseLayer=Ns(X.baseLayer)&&X.baseLayer!==!1?U.fromProviderAsync(te.fromUrl(re),{}):X.baseLayer:X.imageryProvider=Ns(X.imageryProvider)?new te({url:re}):X.imageryProvider;let J;e.viewerCreator?J=e.viewerCreator(i,De(s),X):globalThis.mars3d?(i.map=new mars3d.Map(De(s).id,{scene:X,control:X}),J=(P=i.map)==null?void 0:P._viewer):globalThis.DC?(i.dcViewer=new DC.Viewer(De(s).id,X),J=(T=i.dcViewer)==null?void 0:T.delegate):globalThis.XE?(i.earth=new globalThis.XE.Earth(De(s),X),J=(F=i.earth)==null?void 0:F.czm.viewer):J=new ie(De(s),X),C(J),i.Cesium=Cesium,i.viewer=J,i.viewerElement=J._element,i.mounted=!0,ii(Cesium.VERSION,"1.83")&&(ii(Cesium.VERSION,"1.116")?J.scene.verticalExaggeration=X.verticalExaggeration||X.terrainExaggeration:J.scene.globe.terrainExaggeration=X.verticalExaggeration||X.terrainExaggeration),K(X.camera)&&Dp(J,X.camera),Ze(i,"update:camera")&&J.camera.changed.addEventListener(()=>{const ne=J.camera.positionCartographic;let ce;bt(X.camera.position,"lng")?ce={position:{lng:Z.toDegrees(ne.longitude),lat:Z.toDegrees(ne.latitude),height:ne.height},heading:Z.toDegrees(J.camera.heading||360),pitch:Z.toDegrees(J.camera.pitch||-90),roll:Z.toDegrees(J.camera.roll||0)}:ce={position:{x:J.camera.position.x,y:J.camera.position.y,z:J.camera.position.z},heading:J.camera.heading||2*Math.PI,pitch:J.camera.pitch||-Math.PI/2,roll:J.camera.roll||0},d("update:camera",ce)}),K(J.animation)&&(J.animation.viewModel.dateFormatter=q,J.animation.viewModel.timeFormatter=H),K(J.timeline)&&(J.timeline.makeLabel=ne=>q(ne),J.timeline.zoomTo(J.clock.startTime,J.clock.stopTime)),!e.showCredit&&(J.cesiumWidget.creditContainer.style.display="none"),e.debugShowFramesPerSecond&&(J.scene.debugShowFramesPerSecond=!0),J.viewerWidgetResized=J.viewerWidgetResized||new z,J.viewerWidgetResized.addEventListener(D),J.imageryLayers.layerAdded.addEventListener(G),f.registerEvents(!0);const ae={Cesium,viewer:J,vm:i};return globalThis.XE?Object.assign(ae,{earth:i.earth}):globalThis.mars3d?Object.assign(ae,{map:i.map}):globalThis.DC&&Object.assign(ae,{dcViewer:i.dcViewer}),Ze(i,"ready")&&d("ready",ae),c==null||c.emit("ready",ae),nt(()=>{J.resize(),D({type:"viewer",status:"added",target:J.container}),l.value=!0}),p.debug("loaded-viewer"),Object.assign(i.proxy,{cesiumObject:J}),ae},O=async function(){if(!i.mounted)return!1;p.debug("viewer---unloading");let P;h.value.__viewerUnloadingPromise=new Promise((te,ie)=>{P=te});for(let te=0;te<i.children.length;te++)await i.children[te].proxy.unload();i.children.length=0;const{viewer:T,earth:F,map:N,dcViewer:j}=i;globalThis.Cesium&&(T.imageryLayers.layerAdded.removeEventListener(G),f.registerEvents(!1));const{removeCesiumScript:U}=e;if(T._vcPickScreenSpaceEventHandler&&T._vcPickScreenSpaceEventHandler.destroy(),T._vcViewerScreenSpaceEventHandler&&T._vcViewerScreenSpaceEventHandler.destroy(),T._vcPickScreenSpaceEventHandler=void 0,T._vcViewerScreenSpaceEventHandler=void 0,U&&M(T),delete i.appContext.config.globalProperties.$VueCesium[T.container.id],globalThis.XE?F&&F.destroy():globalThis.mars3d?N&&N.destroy():globalThis.DC?j&&j.destroy():T&&T.destroy(),i.viewer=void 0,i.mounted=!1,U&&globalThis.Cesium){const te=document.getElementsByTagName("script"),ie=[];for(const Z of te)Z.src.indexOf("/Cesium.js")>-1&&ie.push(Z),Z.src.indexOf("/Workers/zlib.min.js")>-1&&ie.push(Z),globalThis.XE&&(Z.src.indexOf("/rxjs.umd.min.js")>-1&&ie.push(Z),Z.src.indexOf("/XbsjCesium.js")>-1&&ie.push(Z),Z.src.indexOf("/viewerCesiumNavigationMixin.js")>-1&&ie.push(Z),Z.src.indexOf("/XbsjEarth.js")>-1&&ie.push(Z)),y.includes(Z.src)&&!ie.includes(Z)&&ie.push(Z);const K=document.getElementsByTagName("link");for(const Z of K)Z.href.includes("Widgets/widgets.css")&&!ie.includes(Z)&&ie.push(Z),y.includes(Z.href)&&!ie.includes(Z)&&ie.push(Z);ie.forEach(Z=>{Z.parentNode&&Z.parentNode.removeChild(Z)}),globalThis.Cesium&&(globalThis.Cesium=void 0),globalThis.XbsjCesium&&(globalThis.XbsjCesium=void 0),globalThis.XbsjEarth&&(globalThis.XbsjEarth=void 0),globalThis.XE&&(globalThis.XE=void 0),globalThis.mars3d&&(globalThis.mars3d=void 0),globalThis.DC&&(globalThis.DC=void 0),globalThis.DcCore&&(globalThis.DcCore=void 0),h.value.__scriptPromise=void 0,y=[]}return i.isUnmounted=!1,Ze(i,"destroyed")&&d("destroyed",i),c.emit("destroyed",i),p.debug("viewer---unloaded"),P(!0),h.value.__viewerUnloadingPromise=void 0,l.value=!1,!0},I=function(){return O().then(()=>_())},A=async function(){if(p.debug("getCesiumScript"),globalThis.Cesium)return Promise.resolve(globalThis.Cesium);{const P=e.cesiumPath?e.cesiumPath:h.value.cesiumPath,T=y2(P),F=h.value.mars3dConfig||e.mars3dConfig,N=h.value.dcConfig||e.dcConfig;if(F){const te=F.libs||f7(),ie=(F.include||"mars3d").trim().split(","),K={};for(let Z=0,z=ie.length;Z<z;Z++){const Q=ie[Z];K[Q]||(K[Q]=!0,y.push(...te[Q]))}}else if(N){y.push(P),y.push(P.replace("dc.min.js","dc.min.css")),y.push(N.Cesium);const te=y2(N.Cesium);y.push(`${te}/Widgets/widgets.css`),N.turf&&y.push(N.turf),N.echarts&&y.push(N.echarts)}else P.includes("/dc.base.min.js")?(y.push(P),y.push(P.replace("/dc.base.min.js","/dc.core.min.js")),y.push(P.replace("/dc.base.min.js","/dc.core.min.js").replace("/dc.core.min.js","/dc.core.min.css"))):P.includes("/XbsjEarth.js")?y.push(P):(y.push(P),y.push(`${T}/Widgets/widgets.css`));const j=y;if(F||N){const te=y.find(ie=>ie.includes("Cesium.js"));await V(te),j.splice(j.indexOf(te),1)}const U=[];return j.forEach(te=>{new RegExp("\\.css").test(te)?U.push($(te)):U.push(V(te))}),Promise.all(U).then(()=>{if(globalThis.Cesium)if(globalThis.DC){const te={...N,Cesium:globalThis.Cesium};return N.echarts&&(te.echarts=globalThis.echarts),N.turf&&(te.turf=globalThis.turf),globalThis.DC.ready(te).then(()=>(globalThis.Cesium=DC.getLib("Cesium"),Ze(i,"cesiumReady")&&d("cesiumReady",globalThis.DC),globalThis.Cesium))}else return Ze(i,"cesiumReady")&&d("cesiumReady",globalThis.Cesium),globalThis.Cesium;else{if(globalThis.XE)return globalThis.XE.ready().then(()=>(Ze(i,"cesiumReady")&&d("cesiumReady",globalThis.Cesium),globalThis.Cesium));if(globalThis.DC)return ii(globalThis.DC.VERSION,"3.0.0")?globalThis.DC.ready({...N,Cesium:globalThis.Cesium}).then(()=>(globalThis.Cesium=DC.getLib("Cesium"),Ze(i,"cesiumReady")&&d("cesiumReady",globalThis.DC),globalThis.Cesium)):(globalThis.DC.use(globalThis.DcCore.default||globalThis.DcCore),globalThis.DC.baseUrl=`${T}/resources/`,globalThis.DC.ready(()=>(globalThis.Cesium=DC.Namespace.Cesium,Ze(i,"cesiumReady")&&d("cesiumReady",globalThis.DC),globalThis.Cesium)),globalThis.Cesium);r(new Error("VueCesium ERROR: Error loading CesiumJS!"))}})}},V=P=>{const T=document.createElement("script");return T.async=!1,T.src=P,document.body.appendChild(T),new Promise((F,N)=>{T.onload=()=>{F(!0)}})},$=P=>{const T=document.createElement("link");return T.rel="stylesheet",T.href=P,document.head.appendChild(T),new Promise((F,N)=>{T.onload=()=>{F(!0)}})},D=P=>{var T,F;const{viewer:N}=i,j=N._toolbar;j!==void 0&&getComputedStyle(j).visibility!=="hidden"&&getComputedStyle(j).display!=="none"?v.toolbarContainerRC=j.getBoundingClientRect():v.toolbarContainerRC=void 0;const U=N.bottomContainer;U!==void 0&&getComputedStyle(U).visibility!=="hidden"&&getComputedStyle(U).display!=="none"?v.bottomContainerRC=U.getBoundingClientRect():v.bottomContainerRC=void 0;const te=(T=N.timeline)==null?void 0:T.container;te!==void 0&&getComputedStyle(te).visibility!=="hidden"&&getComputedStyle(te).display!=="none"?v.timelineContainerRC=te.getBoundingClientRect():v.timelineContainerRC=void 0;const ie=(F=N.animation)==null?void 0:F.container;ie!==void 0&&getComputedStyle(ie).visibility!=="hidden"&&getComputedStyle(ie).display!=="none"?v.animationContainerRC=ie.getBoundingClientRect():v.animationContainerRC=void 0,N.resize(),Ze(i,"viewerWidgetResized")&&d("viewerWidgetResized",P)},G=P=>{const T=i.viewer,{autoSortImageryLayers:F}=e;T.baseLayerPicker&&T.imageryLayers.raiseToTop(P);const{defined:N}=Cesium;F&&(P.sortOrder=N(P.sortOrder)?P.sortOrder:9999,T.imageryLayers._layers.sort((j,U)=>j.sortOrder-U.sortOrder),T.imageryLayers._update())},q=function(P,T,F){const{JulianDate:N}=Cesium;let j;if(e.UTCOffset){P=N.addMinutes(P,e.UTCOffset,new N);const K=new Date().getTimezoneOffset()-e.UTCOffset;j=K===0?"UTC":"UTC+"+-(K/60)}else j=new Date().getTimezoneOffset()===0?"UTC":"UTC+"+-(new Date().getTimezoneOffset()/60);const U=N.toDate(P),te=U.toLocaleString(w("name"),{hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}).replace(/,/g,""),ie=U.toLocaleString(w("name"),{year:"numeric",month:"short",day:"numeric"}).replace(/,/g,"");return!F&&(T||U.getHours()+U.getMinutes()===0)?ie:(e.TZCode&&(j=e.TZCode),F?`${te} ${j}`:`${ie} ${te} ${j}`)},H=function(P,T){return q(P,T,!0)},g=function(P){const T=P.clock;T.currentTime=P.timeJulian,T.shouldAnimate=!1},b=function(P,T){const F=P._geocoder,N=P._homeButton,j=P._sceneModePicker,U=P._projectionPicker,te=P._baseLayerPicker,ie=P._animation,K=P._timeline,Z=P._fullscreenButton,z=P._infoBox,Q=P._selectionIndicator,re=T?"hidden":"visible",{defined:X}=Cesium;if(X(F)&&(F.container.style.visibility=re),X(N)&&(N.container.style.visibility=re),X(j)&&(j.container.style.visibility=re),X(U)&&(U.container.style.visibility=re),X(te)&&(te.container.style.visibility=re),X(ie)&&(ie.container.style.visibility=re),X(K)&&(K.container.style.visibility=re),X(Z)&&Z.viewModel.isFullscreenEnabled&&(Z.container.style.visibility=re),X(z)&&(z.container.style.visibility=re),X(Q)&&(Q.container.style.visibility=re),P._container){const J=T||!X(Z)?0:Z.container.clientWidth;P._vrButton.container.style.right=J+"px",P.forceResize()}},E=function(P,T){Array.prototype.slice.call(P.children).forEach(N=>{switch(N.className){case"cesium-viewer-geocoderContainer":N.customIndex=1;break;case"cesium-button cesium-toolbar-button cesium-home-button":N.customIndex=2;break;case"cesium-sceneModePicker-wrapper cesium-toolbar-button":N.customIndex=3;break;case"cesium-projectionPicker-wrapper cesium-toolbar-button":N.customIndex=4;break;case"cesium-button cesium-toolbar-button":case"cesium-baseLayerPicker-dropDown":N.customIndex=5;break;case"cesium-navigationHelpButton-wrapper":N.customIndex=6;break}});const F=[];Array.prototype.slice.call(P.children).forEach(N=>{F.push(N)}),F.sort(function(N,j){return N.customIndex-j.customIndex});for(let N=0;N<F.length;N++)P.appendChild(F[N])},L=function(){return qo({},{get layout(){return v},get vm(){return i},get Cesium(){return i.Cesium},get viewer(){return i.viewer},get dataSources(){var P;return(P=i.viewer)==null?void 0:P.dataSources},get entities(){var P;return(P=i.viewer)==null?void 0:P.entities},get imageryLayers(){var P;return(P=i.viewer)==null?void 0:P.imageryLayers},get primitives(){var P;return(P=i.viewer)==null?void 0:P.scene.primitives},get groundPrimitives(){var P;return(P=i.viewer)==null?void 0:P.scene.groundPrimitives},get postProcessStages(){var P;return(P=i.viewer)==null?void 0:P.postProcessStages},get creatingPromise(){return a},get mars3dMap(){return i.map},get dcViewer(){return i.dcViewer},get earth(){return i.earth}})};return Object.defineProperties(i,{cesiumObject:{enumerable:!0,get:()=>i.viewer}}),Es(async()=>{var P;try{p.debug("viewer - onMounted"),await((P=h.value)==null?void 0:P.__viewerUnloadingPromise),_().then(T=>{n(T)}).catch(T=>{d("unready",T),r(T)})}catch(T){d("unready",T),r(T)}}),Vt(()=>{p.debug("viewer - onUnmounted"),O().then(()=>{c.all.clear()})}),{isReady:l,load:_,unload:O,reload:I,getServices:L,viewerRef:s,creatingPromise:a}}const $x=[{name:"imageryLayers",events:["layerAdded","layerMoved","layerRemoved","layerShownOrHidden"]},{name:"dataSources",events:["dataSourceAdded","dataSourceMoved","dataSourceRemoved"]},{name:"entities",events:["collectionChanged"]},{name:"scene",events:["morphComplete","morphStart","postRender","postUpdate","preRender","preUpdate","renderError","terrainProviderChanged"]},{name:"camera",events:["changed","moveEnd","moveStart"]},{name:"clock",events:["onStop","onTick"]},{name:"terrainProvider",events:["errorEvent"]},{name:["infoBox","viewModel"],events:["cameraClicked","closeClicked"]},{name:["scene","globe"],events:["imageryLayersUpdatedEvent","terrainProviderChanged","tileLoadProgressEvent"]}],F7=Im.map(e=>Rw(e)),$7=["beforeLoad","cesiumReady","ready","destroyed","update:camera","viewerWidgetResized",...Im,...F7,...ux];$x.reduce((e,t)=>e.concat(t.events),$7);const uf={xs:18,sm:24,md:32,lg:38,xl:46},jx={size:String};function Nx(e,t=uf){return ge(()=>e.size!==void 0?{fontSize:e.size in t?`${t[e.size]}px`:e.size}:null)}function Lt(e,t){return e!==void 0?e():t}function Zn(e,t){return e!==void 0?t.concat(e()):t}function kx(e,t,i,n,r,a){t.key=n+r;const s=R(e,t,i);return r===!0?I_(s,a()):s}const cf={...jx,tag:{type:String,default:"i"},name:String,color:String,hoverColor:String,left:Boolean,right:Boolean};var ja=de({name:"VcIcon",props:cf,setup(e,{slots:t}){const i=Nx(e),n=ge(()=>{const s=i.value;if(s)return e.color&&(s.color=e.color),e.hoverColor&&(s["--hover-color"]=e.hoverColor),s}),r=ge(()=>"vc-icon"+(e.left===!0?" on-left":"")+(e.right===!0?" on-right":"")+(e.color!==void 0?` text-${e.color}`:"")),a=ge(()=>{let s,l=e.name;if(!l)return{none:!0,cls:r.value};if(l.startsWith("M")===!0){const[d,h]=l.split("|");return{svg:!0,cls:r.value,nodes:d.split("&&").map(p=>{const[f,v,y]=p.split("@@");return R("path",{style:v,d:f,transform:y})}),viewBox:h!==void 0?h:"0 0 24 24"}}if(l.startsWith("img:")===!0)return{img:!0,cls:r.value,src:l.substring(4)};if(l.startsWith("svguse:")===!0){const[d,h]=l.split("|");return{svguse:!0,cls:r.value,src:d.substring(7),viewBox:h!==void 0?h:"0 0 24 24"}}let c=" ";return/^[l|f]a[s|r|l|b|d]{0,1} /.test(l)||l.startsWith("icon-")===!0?s=l:l.startsWith("bt-")===!0?s=`bt ${l}`:l.startsWith("eva-")===!0?s=`eva ${l}`:/^ion-(md|ios|logo)/.test(l)===!0?s=`ionicons ${l}`:l.startsWith("ion-")===!0?s=`ionicons ion-md${l.substr(3)}`:l.startsWith("mdi-")===!0?s=`mdi ${l}`:l.startsWith("iconfont ")===!0?s=`${l}`:l.startsWith("ti-")===!0?s=`themify-icon ${l}`:l.startsWith("vc-")===!0?s=`vc-icons ${l}`:(s="notranslate material-icons",l.startsWith("o_")===!0?(l=l.substring(2),s+="-outlined"):l.startsWith("r_")===!0?(l=l.substring(2),s+="-round"):l.startsWith("s_")===!0&&(l=l.substring(2),s+="-sharp"),c=l),{cls:s+" "+r.value,content:c}});return()=>{const s={class:a.value.cls,style:n.value,"aria-hidden":"true",role:"presentation",viewBox:"",src:""};return a.value.none===!0?R(e.tag,s,Lt(t.default)):a.value.img===!0?(s.src=a.value.src,s.style&&(s.style.width=s.style.fontSize,s.style.height=s.style.fontSize),R("img",s)):a.value.svg===!0?(s.viewBox=a.value.viewBox,s["aria-hidden"]="true",s.style&&(s.style.width=s.style.fontSize,s.style.height=s.style.fontSize),R("svg",s,Zn(t.default,a.value.nodes))):a.value.svguse===!0?(s.viewBox=a.value.viewBox,s["aria-hidden"]="true",s.style&&(s.style.width=s.style.fontSize,s.style.height=s.style.fontSize),R("svg",s,Zn(t.default,[R("use",{"xlink:href":a.value.src})]))):R(e.tag,s,Zn(t.default,[a.value.content]))}}});const Qn={size:{type:[Number,String],default:"1em"},color:String};function Jn(e){return{cSize:ge(()=>e.size in uf?`${uf[e.size]}px`:e.size),classes:ge(()=>"vc-spinner"+(e.color?` text-${e.color}`:""))}}const j7=[R("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[R("circle",{cx:"5",cy:"50",r:"5"},[R("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})]),R("circle",{cx:"27",cy:"5",r:"5"},[R("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})]),R("circle",{cx:"49",cy:"50",r:"5"},[R("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"})])])];var Sc=de({name:"VcSpinnerBall",props:Qn,setup(e){const{cSize:t,classes:i}=Jn(e);return()=>R("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 57 57",xmlns:"http://www.w3.org/2000/svg"},j7)}});const N7=[R("rect",{y:"10",width:"15",height:"120",rx:"6"},[R("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),R("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6"},[R("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),R("rect",{x:"60",width:"15",height:"140",rx:"6"},[R("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),R("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6"},[R("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]),R("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6"},[R("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})])];var Tc=de({name:"VcSpinnerBars",props:Qn,setup(e){const{cSize:t,classes:i}=Jn(e);return()=>R("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg"},N7)}});const k7=[R("circle",{cx:"15",cy:"15",r:"15"},[R("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),R("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[R("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),R("circle",{cx:"105",cy:"15",r:"15"},[R("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Ic=de({name:"VcSpinnerDots",props:Qn,setup(e){const{cSize:t,classes:i}=Jn(e);return()=>R("svg",{class:i.value,fill:"currentColor",width:t.value,height:t.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},k7)}});const V7=[R("g",{transform:"translate(-20,-20)"},[R("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[R("animateTransform",{attributeName:"transform",type:"rotate",from:"90 50 50",to:"0 50 50",dur:"1s",repeatCount:"indefinite"})])]),R("g",{transform:"translate(20,20) rotate(15 50 50)"},[R("path",{d:"M79.9,52.6C80,51.8,80,50.9,80,50s0-1.8-0.1-2.6l-5.1-0.4c-0.3-2.4-0.9-4.6-1.8-6.7l4.2-2.9c-0.7-1.6-1.6-3.1-2.6-4.5 L70,35c-1.4-1.9-3.1-3.5-4.9-4.9l2.2-4.6c-1.4-1-2.9-1.9-4.5-2.6L59.8,27c-2.1-0.9-4.4-1.5-6.7-1.8l-0.4-5.1C51.8,20,50.9,20,50,20 s-1.8,0-2.6,0.1l-0.4,5.1c-2.4,0.3-4.6,0.9-6.7,1.8l-2.9-4.1c-1.6,0.7-3.1,1.6-4.5,2.6l2.1,4.6c-1.9,1.4-3.5,3.1-5,4.9l-4.5-2.1 c-1,1.4-1.9,2.9-2.6,4.5l4.1,2.9c-0.9,2.1-1.5,4.4-1.8,6.8l-5,0.4C20,48.2,20,49.1,20,50s0,1.8,0.1,2.6l5,0.4 c0.3,2.4,0.9,4.7,1.8,6.8l-4.1,2.9c0.7,1.6,1.6,3.1,2.6,4.5l4.5-2.1c1.4,1.9,3.1,3.5,5,4.9l-2.1,4.6c1.4,1,2.9,1.9,4.5,2.6l2.9-4.1 c2.1,0.9,4.4,1.5,6.7,1.8l0.4,5.1C48.2,80,49.1,80,50,80s1.8,0,2.6-0.1l0.4-5.1c2.3-0.3,4.6-0.9,6.7-1.8l2.9,4.2 c1.6-0.7,3.1-1.6,4.5-2.6L65,69.9c1.9-1.4,3.5-3,4.9-4.9l4.6,2.2c1-1.4,1.9-2.9,2.6-4.5L73,59.8c0.9-2.1,1.5-4.4,1.8-6.7L79.9,52.6 z M50,65c-8.3,0-15-6.7-15-15c0-8.3,6.7-15,15-15s15,6.7,15,15C65,58.3,58.3,65,50,65z",fill:"currentColor"},[R("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"90 50 50",dur:"1s",repeatCount:"indefinite"})])])];var Ac=de({name:"VcSpinnerGears",props:Qn,setup(e){const{cSize:t,classes:i}=Jn(e);return()=>R("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},V7)}});const z7=[R("g",[R("path",{fill:"none",stroke:"currentColor","stroke-width":"5","stroke-miterlimit":"10",d:"M58.4,51.7c-0.9-0.9-1.4-2-1.4-2.3s0.5-0.4,1.4-1.4 C70.8,43.8,79.8,30.5,80,15.5H70H30H20c0.2,15,9.2,28.1,21.6,32.3c0.9,0.9,1.4,1.2,1.4,1.5s-0.5,1.6-1.4,2.5 C29.2,56.1,20.2,69.5,20,85.5h10h40h10C79.8,69.5,70.8,55.9,58.4,51.7z"}),R("clipPath",{id:"uil-hourglass-clip1"},[R("rect",{x:"15",y:"20",width:" 70",height:"25"},[R("animate",{attributeName:"height",from:"25",to:"0",dur:"1s",repeatCount:"indefinite",values:"25;0;0",keyTimes:"0;0.5;1"}),R("animate",{attributeName:"y",from:"20",to:"45",dur:"1s",repeatCount:"indefinite",values:"20;45;45",keyTimes:"0;0.5;1"})])]),R("clipPath",{id:"uil-hourglass-clip2"},[R("rect",{x:"15",y:"55",width:" 70",height:"25"},[R("animate",{attributeName:"height",from:"0",to:"25",dur:"1s",repeatCount:"indefinite",values:"0;25;25",keyTimes:"0;0.5;1"}),R("animate",{attributeName:"y",from:"80",to:"55",dur:"1s",repeatCount:"indefinite",values:"80;55;55",keyTimes:"0;0.5;1"})])]),R("path",{d:"M29,23c3.1,11.4,11.3,19.5,21,19.5S67.9,34.4,71,23H29z","clip-path":"url(#uil-hourglass-clip1)",fill:"currentColor"}),R("path",{d:"M71.6,78c-3-11.6-11.5-20-21.5-20s-18.5,8.4-21.5,20H71.6z","clip-path":"url(#uil-hourglass-clip2)",fill:"currentColor"}),R("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 50",to:"180 50 50",repeatCount:"indefinite",dur:"1s",values:"0 50 50;0 50 50;180 50 50",keyTimes:"0;0.7;1"})])];var Dc=de({name:"VcSpinnerHourglass",props:Qn,setup(e){const{cSize:t,classes:i}=Jn(e);return()=>R("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},z7)}});const G7=[R("g",{"stroke-width":"4","stroke-linecap":"round"},[R("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(180)"},[R("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})]),R("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(210)"},[R("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0",repeatCount:"indefinite"})]),R("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(240)"},[R("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".1;0;1;.85;.7;.65;.55;.45;.35;.25;.15;.1",repeatCount:"indefinite"})]),R("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(270)"},[R("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".15;.1;0;1;.85;.7;.65;.55;.45;.35;.25;.15",repeatCount:"indefinite"})]),R("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(300)"},[R("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".25;.15;.1;0;1;.85;.7;.65;.55;.45;.35;.25",repeatCount:"indefinite"})]),R("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(330)"},[R("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".35;.25;.15;.1;0;1;.85;.7;.65;.55;.45;.35",repeatCount:"indefinite"})]),R("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(0)"},[R("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".45;.35;.25;.15;.1;0;1;.85;.7;.65;.55;.45",repeatCount:"indefinite"})]),R("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(30)"},[R("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".55;.45;.35;.25;.15;.1;0;1;.85;.7;.65;.55",repeatCount:"indefinite"})]),R("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(60)"},[R("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".65;.55;.45;.35;.25;.15;.1;0;1;.85;.7;.65",repeatCount:"indefinite"})]),R("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(90)"},[R("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".7;.65;.55;.45;.35;.25;.15;.1;0;1;.85;.7",repeatCount:"indefinite"})]),R("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(120)"},[R("animate",{attributeName:"stroke-opacity",dur:"750ms",values:".85;.7;.65;.55;.45;.35;.25;.15;.1;0;1;.85",repeatCount:"indefinite"})]),R("line",{y1:"17",y2:"29",transform:"translate(32,32) rotate(150)"},[R("animate",{attributeName:"stroke-opacity",dur:"750ms",values:"1;.85;.7;.65;.55;.45;.35;.25;.15;.1;0;1",repeatCount:"indefinite"})])])];var Lc=de({name:"VcSpinnerIos",props:Qn,setup(e){const{cSize:t,classes:i}=Jn(e);return()=>R("svg",{class:i.value,width:t.value,height:t.value,stroke:"currentColor",fill:"currentColor",viewBox:"0 0 64 64"},G7)}});const U7=[R("circle",{cx:"50",cy:"50",r:"44",fill:"none","stroke-width":"4","stroke-opacity":".5",stroke:"currentColor"}),R("circle",{cx:"8",cy:"54",r:"6",fill:"currentColor","stroke-width":"3",stroke:"currentColor"},[R("animateTransform",{attributeName:"transform",type:"rotate",from:"0 50 48",to:"360 50 52",dur:"2s",repeatCount:"indefinite"})])];var Bc=de({name:"VcSpinnerOrbit",props:Qn,setup(e){const{cSize:t,classes:i}=Jn(e);return()=>R("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg"},U7)}});const H7=[R("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},[R("circle",{"stroke-opacity":".5",cx:"18",cy:"18",r:"18"}),R("path",{d:"M36 18c0-9.94-8.06-18-18-18"},[R("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})])])];var Rc=de({name:"VcSpinnerOval",props:Qn,setup(e){const{cSize:t,classes:i}=Jn(e);return()=>R("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},H7)}});const W7=[R("g",{fill:"none","fill-rule":"evenodd","stroke-width":"2"},[R("circle",{cx:"22",cy:"22",r:"1"},[R("animate",{attributeName:"r",begin:"0s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),R("animate",{attributeName:"stroke-opacity",begin:"0s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})]),R("circle",{cx:"22",cy:"22",r:"1"},[R("animate",{attributeName:"r",begin:"-0.9s",dur:"1.8s",values:"1; 20",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.165, 0.84, 0.44, 1",repeatCount:"indefinite"}),R("animate",{attributeName:"stroke-opacity",begin:"-0.9s",dur:"1.8s",values:"1; 0",calcMode:"spline",keyTimes:"0; 1",keySplines:"0.3, 0.61, 0.355, 1",repeatCount:"indefinite"})])])];var Fc=de({name:"VcSpinnerPuff",props:Qn,setup(e){const{cSize:t,classes:i}=Jn(e);return()=>R("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 44 44",xmlns:"http://www.w3.org/2000/svg"},W7)}});const q7=[R("g",{fill:"none","fill-rule":"evenodd",transform:"translate(1 1)","stroke-width":"2"},[R("circle",{cx:"22",cy:"22",r:"6"},[R("animate",{attributeName:"r",begin:"1.5s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"stroke-opacity",begin:"1.5s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"stroke-width",begin:"1.5s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),R("circle",{cx:"22",cy:"22",r:"6"},[R("animate",{attributeName:"r",begin:"3s",dur:"3s",values:"6;22",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"stroke-opacity",begin:"3s",dur:"3s",values:"1;0",calcMode:"linear",repeatCount:"indefinite"}),R("animate",{attributeName:"stroke-width",begin:"3s",dur:"3s",values:"2;0",calcMode:"linear",repeatCount:"indefinite"})]),R("circle",{cx:"22",cy:"22",r:"8"},[R("animate",{attributeName:"r",begin:"0s",dur:"1.5s",values:"6;1;2;3;4;5;6",calcMode:"linear",repeatCount:"indefinite"})])])];var $c=de({name:"VcSpinnerRings",props:Qn,setup(e){const{cSize:t,classes:i}=Jn(e);return()=>R("svg",{class:i.value,stroke:"currentColor",width:t.value,height:t.value,viewBox:"0 0 45 45",xmlns:"http://www.w3.org/2000/svg"},q7)}});const Z7=[R("defs",[R("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"a"},[R("stop",{"stop-color":"currentColor","stop-opacity":"0",offset:"0%"}),R("stop",{"stop-color":"currentColor","stop-opacity":".631",offset:"63.146%"}),R("stop",{"stop-color":"currentColor",offset:"100%"})])]),R("g",{transform:"translate(1 1)",fill:"none","fill-rule":"evenodd"},[R("path",{d:"M36 18c0-9.94-8.06-18-18-18",stroke:"url(#a)","stroke-width":"2"},[R("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})]),R("circle",{fill:"currentColor",cx:"36",cy:"18",r:"1"},[R("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})])])];var jc=de({name:"VcSpinnerTail",props:Qn,setup(e){const{cSize:t,classes:i}=Jn(e);return()=>R("svg",{class:i.value,width:t.value,height:t.value,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg"},Z7)}}),ul=de({name:"VcSpinner",props:{...Qn,thickness:{type:Number,default:5}},setup(e){const{cSize:t,classes:i}=Jn(e);return()=>R("svg",{class:i.value+" vc-spinner-mat",width:t.value,height:t.value,viewBox:"25 25 50 50"},[R("circle",{class:"path",cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor","stroke-width":e.thickness,"stroke-miterlimit":"10"})])}});const Vx={left:"start",center:"center",right:"end",between:"between",around:"around",evenly:"evenly",stretch:"stretch"},Q7=Object.keys(Vx),J7={align:{type:String,validator:e=>Q7.includes(e)}};function X7(e){return ge(()=>{const t=e.align===void 0?e.vertical===!0?"stretch":"left":e.align;return`${e.vertical===!0?"items":"justify"}-${Vx[t]}`})}const zx={none:0,xs:4,sm:8,md:16,lg:24,xl:32},Y7={xs:8,sm:10,md:14,lg:20,xl:24},K7={...jx,type:{type:String,default:"button"},label:[Number,String],icon:String,iconRight:String,round:Boolean,outline:Boolean,flat:Boolean,unelevated:Boolean,rounded:Boolean,push:Boolean,glossy:Boolean,size:String,fab:Boolean,fabMini:Boolean,padding:String,color:String,textColor:String,noCaps:Boolean,noWrap:Boolean,dense:Boolean,tabindex:[Number,String],ripple:{type:[Boolean,Object],default:!0},align:{...J7.align,default:"center"},stack:Boolean,stretch:Boolean,loading:{type:Boolean,default:null},disable:Boolean};function e$(e){const t=Nx(e,Y7),i=X7(e),n=ge(()=>{const p=e.fab===!1&&e.fabMini===!1?t.value:{};return e.padding!==void 0?Object.assign({},p,{padding:e.padding.split(/\s+/).map(f=>f in zx?zx[f]+"px":f).join(" "),minWidth:"0",minHeight:"0"}):p}),r=ge(()=>e.rounded===!0||e.fab===!0||e.fabMini===!0),a=ge(()=>e.disable!==!0&&e.loading!==!0),s=ge(()=>a.value===!0?e.tabindex||0:-1),l=ge(()=>e.flat===!0?"flat":e.outline===!0?"outline":e.push===!0?"push":e.unelevated===!0?"unelevated":"standard"),c=ge(()=>{const p={tabindex:s.value};return e.type!=="a"&&(p.type=e.type),p.role=e.type==="a"?"link":"button",e.loading===!0&&e.percentage!==void 0&&Object.assign(p,{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":e.percentage}),e.disable===!0&&(p.disabled="",p["aria-disabled"]="true"),p}),d=ge(()=>{let p;return e.color!==void 0?e.flat===!0||e.outline===!0?p=`text-${e.textColor||e.color}`:p=`bg-${e.color} text-${e.textColor||"white"}`:e.textColor&&(p=`text-${e.textColor}`),`vc-btn--${l.value} vc-btn--${e.round===!0?"round":`rectangle${r.value===!0?" vc-btn--rounded":""}`}`+(p!==void 0?" "+p:"")+(a.value===!0?" vc-btn--actionable vc-focusable vc-hoverable":e.disable===!0?" disabled":"")+(e.fab===!0?" vc-btn--fab":e.fabMini===!0?" vc-btn--fab-mini":"")+(e.noCaps===!0?" vc-btn--no-uppercase":"")+(e.dense===!0?" vc-btn--dense":"")+(e.stretch===!0?" no-border-radius self-stretch":"")+(e.glossy===!0?" glossy":"")}),h=ge(()=>i.value+(e.stack===!0?" column":" row")+(e.noWrap===!0?" no-wrap text-no-wrap":"")+(e.loading===!0?" vc-btn__content--hidden":""));return{classes:d,style:n,innerClasses:h,attributes:c,isActionable:a}}const{passiveCapture:Xn}=go;let Na,ka,Va;const df={...K7,percentage:{type:Number,default:0},darkPercentage:Boolean};var Nc=de({name:"VcBtn",props:df,emits:["click","keydown","touchstart","mousedown","keyup"],setup(e,{slots:t,emit:i}){var n;const r=(n=fe())==null?void 0:n.proxy,{classes:a,style:s,innerClasses:l,attributes:c,isActionable:d}=e$(e),h=he(),p=he();let f=null,v,y;const w=ge(()=>e.label!==void 0&&e.label!==null&&e.label!==""),C=ge(()=>e.ripple===!1?!1:{keyCodes:13,...e.ripple===!0?{}:e.ripple}),M=ge(()=>{const H=Math.max(0,Math.min(100,e.percentage));return H>0?{transition:"transform 0.6s",transform:`translateX(${H-100}%)`}:{}}),S=ge(()=>e.loading===!0?{onMousedown:q,onTouchstart:q,onClick:q,onKeydown:q,onKeyup:q}:d.value===!0?{onClick:I,onKeydown:A,onMousedown:$,onTouchstart:V}:{}),_=ge(()=>[[$m,C.value,void 0,{center:e.round}]]),O=ge(()=>({ref:h,class:"vc-btn vc-btn-item non-selectable no-outline "+a.value,style:s.value,...c.value,...S.value}));function I(H){var g;if(H!==void 0){if(H.defaultPrevented===!0)return;const b=document.activeElement;if(e.type==="submit"&&b!==document.body&&((g=h.value)==null?void 0:g.contains(b))===!1&&(b==null?void 0:b.contains(h.value))===!1){h.value.focus();const E=()=>{document.removeEventListener("keydown",Or,!0),document.removeEventListener("keyup",E,Xn),h.value!==null&&h.value.removeEventListener("blur",E,Xn)};document.addEventListener("keydown",Or,!0),document.addEventListener("keyup",E,Xn),h.value.addEventListener("blur",E,Xn)}}i("click",H,()=>{})}function A(H){var g,b,E;rl(H,[13,32])===!0&&(Or(H),ka!==h.value&&(ka!==null&&G(),(g=h.value)==null||g.focus(),ka=h.value,(b=h.value)==null||b.classList.add("vc-btn--active"),document.addEventListener("keyup",D,!0),(E=h.value)==null||E.addEventListener("blur",D,Xn))),i("keydown",H)}function V(H){Na!==h.value&&(Na!==null&&G(),Na=h.value,f=jm(H.target),f==null||f.addEventListener("touchcancel",D,Xn),f==null||f.addEventListener("touchend",D,Xn)),v=!0,clearTimeout(y),y=setTimeout(()=>{v=!1},200),i("touchstart",H)}function $(H){var g;Va!==h.value&&(Va!==null&&G(),Va=h.value,(g=h.value)==null||g.classList.add("vc-btn--active"),document.addEventListener("mouseup",D,Xn)),H.qSkipRipple=v===!0,i("mousedown",H)}function D(H){var g;if(!(H!==void 0&&H.type==="blur"&&document.activeElement===h.value)){if(H!==void 0&&H.type==="keyup"){if(ka===h.value&&rl(H,[13,32])===!0){const b=new MouseEvent("click",H);b.qKeyEvent=!0,H.defaultPrevented===!0&&oa(b),H.cancelBubble===!0&&nl(b),(g=h.value)==null||g.dispatchEvent(b),Or(H),H.qKeyEvent=!0}i("keyup",H)}G()}}function G(H){const g=p.value;H!==!0&&(Na===h.value||Va===h.value)&&g!==null&&g!==document.activeElement&&(g.setAttribute("tabindex","-1"),g.focus()),Na===h.value&&(f!==null&&(f.removeEventListener("touchcancel",D,Xn),f.removeEventListener("touchend",D,Xn)),Na=f=null),Va===h.value&&(document.removeEventListener("mouseup",D,Xn),Va=null),ka===h.value&&(document.removeEventListener("keyup",D,!0),h.value!==null&&h.value.removeEventListener("blur",D,Xn),ka=null),h.value!==null&&h.value.classList.remove("vc-btn--active")}function q(H){Or(H),H.qSkipRipple=!0}return fo(()=>{G(!0)}),Object.assign(r,{click:I}),()=>{let H=[];e.icon!==void 0&&H.push(R(ja,{name:e.icon,left:e.stack===!1&&w.value===!0,role:"img","aria-hidden":"true"})),w.value===!0&&H.push(R("span",{class:"block"},[e.label])),H=Zn(t.default,H),e.iconRight!==void 0&&e.round===!1&&H.push(R(ja,{name:e.iconRight,right:e.stack===!1&&w.value===!0,role:"img","aria-hidden":"true"}));const g=[R("span",{class:"vc-focus-helper",ref:p})];return e.loading===!0&&e.percentage!==void 0&&g.push(R("span",{class:"vc-btn__progress absolute-full overflow-hidden"},[R("span",{class:"vc-btn__progress-indicator fit block"+(e.darkPercentage===!0?" vc-btn__progress--dark":""),style:M.value})])),g.push(R("span",{class:"vc-btn__content text-center col items-center vc-anchor--skip "+l.value},H)),e.loading!==null&&g.push(R(A_,{name:"vc-transition--fade"},()=>e.loading===!0?[R("span",{key:"loading",class:"absolute-full flex flex-center"},t.loading!==void 0?t.loading():[R(ul)])]:null)),kx("button",O.value,g,"ripple",e.disable!==!0&&e.ripple!==!1,()=>_.value)}}});const t$={target:{type:[Boolean,String],default:!0},noParentEvent:Boolean,contextMenu:Boolean};function i$({showing:e,avoidEmit:t,configureAnchorEl:i}){const{props:n,proxy:r,emit:a}=fe(),s=he(null);let l;function c(v){return s.value===null?!1:v===void 0||v.touches===void 0||v.touches.length<=1}const d={};i===void 0&&(Object.assign(d,{hide(v){r.hide(v)},toggle(v){r.toggle(v)},toggleKey(v){rl(v,13)===!0&&r.toggle(v)},contextClick(v){r.hide(v),nt(()=>{r.show(v)}),oa(v)},mobilePrevent:oa,mobileTouch(v){var y;if(d.mobileCleanup(v),c(v)!==!0)return;r.hide(v),(y=s.value)==null||y.classList.add("non-selectable");const w=jm(v.target);wi(d,"anchor",[[w,"touchmove","mobileCleanup","passive"],[w,"touchend","mobileCleanup","passive"],[w,"touchcancel","mobileCleanup","passive"],[s.value,"contextmenu","mobilePrevent","notPassive"]]),l=setTimeout(()=>{r.show(v)},300)},mobileCleanup(v){s.value.classList.remove("non-selectable"),clearTimeout(l),e.value===!0&&v!==void 0&&Mr()}}),i=function(v=n.contextMenu){if(n.noParentEvent===!0||s.value===null)return;let y;v===!0?Xt().isPhone===!0?y=[[s.value,"touchstart","mobileTouch","passive"]]:y=[[s.value,"click","hide","passive"],[s.value,"contextmenu","contextClick","notPassive"]]:y=[[s.value,"click","toggle","passive"],[s.value,"keyup","toggleKey","passive"]],wi(d,"anchor",y)});function h(){On(d,"anchor")}function p(v){for(s.value=v;s.value.classList.contains("vc-anchor--skip");)s.value=s.value.parentNode;i()}function f(){if(n.target===!1||n.target==="")s.value=null;else if(n.target===!0)p(r==null?void 0:r.$el.parentNode);else{let v=n.target;if(typeof n.target=="string")try{v=document.querySelector(n.target)}catch(y){v=void 0}v!=null?(s.value=v.$el||v,i()):(s.value=null,console.error(`Anchor: target "${n.target}" not found`))}}return Pe(()=>n.contextMenu,v=>{s.value!==null&&(h(),i(v))}),Pe(()=>n.target,()=>{s.value!==null&&h(),f()}),Pe(()=>n.noParentEvent,v=>{s.value!==null&&(v===!0?h():i())}),Es(()=>{f(),t!==!0&&n.modelValue===!0&&s.value===null&&a("update:modelValue",!1)}),fo(()=>{clearTimeout(l),h()}),{anchorEl:s,canShow:c,anchorEvents:d}}function n$(e,t){const i=he(null);let n;function r(l,c){const d=`${c!==void 0?"add":"remove"}EventListener`,h=c!==void 0?c:n;l!==window&&l[d]("scroll",h,go.passive),window[d]("scroll",h,go.passive),n=c}function a(){i.value!==null&&(r(i.value),i.value=null)}const s=Pe(()=>e.noParentEvent,()=>{i.value!==null&&(a(),t())});return fo(s),{localScrollTarget:i,unconfigureScrollTarget:a,changeScrollEvent:r}}const Gx={modelValue:{type:Boolean,default:null}},Ux=["update:modelValue","before-show","show","before-hide","hide"];function Hx({showing:e,canShow:t=void 0,hideOnRouteChange:i=void 0,handleShow:n=void 0,handleHide:r=void 0,processOnMount:a=void 0}){const s=fe(),{props:l,emit:c,proxy:d}=s;let h;function p(S){(e==null?void 0:e.value)===!0?y(S):f(S)}function f(S){if(l.disable===!0||t!==void 0&&t(S)!==!0)return;const _=Ep(s,"onUpdate:modelValue")===!0;_===!0&&(c("update:modelValue",!0),h=S,nt(()=>{h===S&&(h=void 0)})),(l.modelValue===null||_===!1)&&v(S)}function v(S){(e==null?void 0:e.value)!==!0&&(e&&(e.value=!0),c("before-show",S),!(S&&S.cancel===!0)&&(n!==void 0?n(S):c("show",S)))}function y(S){if(l.disable===!0)return;const _=Ep(s,"onUpdate:modelValue")===!0;_===!0&&(c("update:modelValue",!1),h=S,nt(()=>{h===S&&(h=void 0)})),(l.modelValue===null||_===!1)&&w(S)}function w(S){(e==null?void 0:e.value)!==!1&&(e&&(e.value=!1),c("before-hide",S),r!==void 0?r(S):c("hide",S))}function C(S){l.disable===!0&&S===!0?Ep(s,"onUpdate:modelValue")===!0&&c("update:modelValue",!1):S===!0!==(e==null?void 0:e.value)&&(S===!0?v:w)(h)}Pe(()=>l.modelValue,C),i!==void 0&&F8(s)===!0&&Pe(()=>d.$route,()=>{i.value===!0&&(e==null?void 0:e.value)===!0&&y()}),a===!0&&Es(()=>{C(l.modelValue)});const M={show:f,hide:y,toggle:p};return Object.assign(d,M),M}let r$=document.body;function o$(e){const t=document.createElement("div");return e!==void 0&&(t.id=e),r$.appendChild(t),t}function a$(e){e.remove()}const hf=[];function s$(e){for(e=e.parent;e!=null;){if(e.type.name==="VcGlobalDialog")return!0;if(e.type.name==="VcDialog"||e.type.name==="VcMenu")return!1;e=e.parent}return!1}function Wx(e,t,i,n){var r,a,s,l;let c=null;(a=(r=e.props)==null?void 0:r.teleport)!=null&&a.to&&(c=(l=(s=e.props)==null?void 0:s.teleport)==null?void 0:l.to);const d=n===!0&&s$(e),h=he(!1);function p(){d===!1&&c===null&&(c=o$()),h.value=!0,hf.push(e.proxy)}function f(){var v,y;h.value=!1;const w=hf.indexOf(e.proxy);w>-1&&hf.splice(w,1),c!==null&&!((y=(v=e.props)==null?void 0:v.teleport)!=null&&y.to)&&(a$(c),c=null)}return Vt(f),Object.assign(e.proxy,{__vcPortalInnerRef:t}),{showPortal:p,hidePortal:f,portalIsActive:h,renderPortal:()=>d===!0?i():h.value===!0?[R(Ur,{to:c},i())]:void 0}}const l$={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function u$(e,t){const i=he(t.value);return Pe(t,n=>{nt(()=>{i.value=n})}),{transition:ge(()=>"vc-transition--"+(i.value===!0?e.transitionHide:e.transitionShow)),transitionStyle:ge(()=>`--vc-transition-duration: ${e.transitionDuration}ms`)}}function c$(){let e;return fo(()=>{e=void 0}),{registerTick(t){e=t},removeTick(){e=void 0},prepareTick(){if(e!==void 0){const t=e;nt(()=>{e===t&&(e(),e=void 0)})}}}}const d$=[null,document,document.body,document.scrollingElement,document.documentElement];function h$(e,t){let i=cx(t);if(i===void 0){if(e==null)return window;i=e.closest(".scroll,.scroll-y,.overflow-auto")}return d$.includes(i)?window:i}let kc;function p$(){if(kc!==void 0)return kc;const e=document.createElement("p"),t=document.createElement("div");Dm(e,{width:"100%",height:"200px"}),Dm(t,{position:"absolute",top:"0px",left:"0px",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),t.appendChild(e),document.body.appendChild(t);const i=e.offsetWidth;t.style.overflow="scroll";let n=e.offsetWidth;return i===n&&(n=t.clientWidth),t.remove(),kc=i-n,kc}let qx,Zx;function Qx(e){const t=e.split(" ");return t.length!==2?!1:["top","center","bottom"].includes(t[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(t[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function m$(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const pf={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{pf[`${e}#ltr`]=e,pf[`${e}#rtl`]=e});function Jx(e,t){const i=e.split(" ");return{vertical:i[0],horizontal:pf[`${i[1]}#${t===!0?"rtl":"ltr"}`]}}function f$(e,t){let{top:i,left:n,right:r,bottom:a,width:s,height:l}=e.getBoundingClientRect();return t!==void 0&&(i-=t[1],n-=t[0],a+=t[1],r+=t[0],s+=t[0],l+=t[1]),{top:i,left:n,right:r,bottom:a,width:s,height:l,middle:n+(r-n)/2,center:i+(a-i)/2}}function v$(e){return{top:0,center:e.offsetHeight/2,bottom:e.offsetHeight,left:0,middle:e.offsetWidth/2,right:e.offsetWidth}}function g$(e){if(Xt().isIOS===!0&&window.visualViewport!==void 0){const l=document.body.style,{offsetLeft:c,offsetTop:d}=window.visualViewport;c!==qx&&(l.setProperty("--vc-pe-left",c+"px"),qx=c),d!==Zx&&(l.setProperty("--vc-pe-top",d+"px"),Zx=d)}let t={};const{scrollLeft:i,scrollTop:n}=e.el;if(e.absoluteOffset===void 0)t=f$(e.anchorEl,e.cover===!0?[0,0]:e.offset);else{const{top:l,left:c}=e.anchorEl.getBoundingClientRect(),d=l+e.absoluteOffset.top,h=c+e.absoluteOffset.left;t={top:d,left:h,width:1,height:1,right:h+1,center:d,middle:h,bottom:d+1}}let r={maxHeight:e.maxHeight,maxWidth:e.maxWidth,visibility:"visible"};(e.fit===!0||e.cover===!0)&&(r.minWidth=t.width+"px",e.cover===!0&&(r.minHeight=t.height+"px")),Object.assign(e.el.style,r);const a=v$(e.el),s={top:t[e.anchorOrigin.vertical]-a[e.selfOrigin.vertical],left:t[e.anchorOrigin.horizontal]-a[e.selfOrigin.horizontal]};y$(s,t,a,e.anchorOrigin,e.selfOrigin),r={top:s.top+"px",left:s.left+"px"},s.maxHeight!==void 0&&(r.maxHeight=s.maxHeight+"px",t.height>s.maxHeight&&(r.minHeight=r.maxHeight)),s.maxWidth!==void 0&&(r.maxWidth=s.maxWidth+"px",t.width>s.maxWidth&&(r.minWidth=r.maxWidth)),Object.assign(e.el.style,r),e.el.scrollTop!==n&&(e.el.scrollTop=n),e.el.scrollLeft!==i&&(e.el.scrollLeft=i)}function y$(e,t,i,n,r){const a=i.bottom,s=i.right,l=p$(),c=window.innerHeight-l,d=document.body.clientWidth;if(e.top<0||e.top+a>c)if(r.vertical==="center")e.top=t[n.vertical]>c/2?Math.max(0,c-a):0,e.maxHeight=Math.min(a,c);else if(t[n.vertical]>c/2){const h=Math.min(c,n.vertical==="center"?t.center:n.vertical===r.vertical?t.bottom:t.top);e.maxHeight=Math.min(a,h),e.top=Math.max(0,h-a)}else e.top=Math.max(0,n.vertical==="center"?t.center:n.vertical===r.vertical?t.top:t.bottom),e.maxHeight=Math.min(a,c-e.top);if(e.left<0||e.left+s>d)if(e.maxWidth=Math.min(s,d),r.horizontal==="middle")e.left=t[n.horizontal]>d/2?Math.max(0,d-s):0;else if(t[n.horizontal]>d/2){const h=Math.min(d,n.horizontal==="middle"?t.middle:n.horizontal===r.horizontal?t.right:t.left);e.maxWidth=Math.min(s,h),e.left=Math.max(0,h-e.maxWidth)}else e.left=Math.max(0,n.horizontal==="middle"?t.middle:n.horizontal===r.horizontal?t.left:t.right),e.maxWidth=Math.min(s,d-e.left)}const mf={...t$,...Gx,...l$,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null},transitionShow:{type:String,default:"jump-down"},transitionHide:{type:String,default:"jump-up"},anchor:{type:String,default:"bottom middle",validator:Qx},self:{type:String,default:"top middle",validator:Qx},offset:{type:Array,default:()=>[14,14],validator:m$},scrollTarget:String,delay:{type:Number,default:0},hideDelay:{type:Number,default:0},persistent:{type:Boolean}};var Xx=de({name:"VcTooltip",inheritAttrs:!1,props:mf,emits:[...Ux],setup(e,{slots:t,emit:i,attrs:n}){let r,a;const s=fe(),l=he(null),c=he(!1),d=ge(()=>Jx(e.anchor,!0)),h=ge(()=>Jx(e.self,!0)),p=ge(()=>e.persistent!==!0),{registerTick:f,removeTick:v,prepareTick:y}=c$(),{registerTimeout:w,removeTimeout:C}=Am(),{transition:M,transitionStyle:S}=u$(e,c),{localScrollTarget:_,changeScrollEvent:O,unconfigureScrollTarget:I}=n$(e,j),{anchorEl:A,canShow:V,anchorEvents:$}=i$({showing:c,configureAnchorEl:N,avoidEmit:void 0}),{show:D,hide:G}=Hx({showing:c,canShow:V,handleShow:b,handleHide:E,hideOnRouteChange:p,processOnMount:!0});Object.assign($,{delayShow:T,delayHide:F});const{showPortal:q,hidePortal:H,renderPortal:g}=Wx(s,l,te);function b(ie){v(),C(),q(),f(()=>{a=new MutationObserver(()=>P()),a.observe(l.value,{attributes:!1,childList:!0,characterData:!0,subtree:!0}),P(),j()}),y(),r===void 0&&(r=Pe(()=>e.self+"|"+e.anchor,P)),w(()=>{i("show",ie)},e.transitionDuration)}function E(ie){v(),C(),L(),w(()=>{H(),i("hide",ie)},e.transitionDuration)}function L(){a!==void 0&&(a.disconnect(),a=void 0),r!==void 0&&(r(),r=void 0),I(),On($,"tooltipTemp")}function P(){const ie=l.value;A.value===void 0||!ie||g$({el:ie,offset:e.offset,anchorEl:A.value,anchorOrigin:d.value,selfOrigin:h.value,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function T(ie){if(Xt().isPhone===!0){Mr(),document.body.classList.add("non-selectable");const K=jm(A.value),Z=["touchmove","touchcancel","touchend","click"].map(z=>[K,z,"__delayHide","passiveCapture"]);wi($,"tooltipTemp",Z)}w(()=>{D(ie)},e.delay)}function F(ie){C(),Xt().isPhone===!0&&(On($,"tooltipTemp"),Mr(),setTimeout(()=>{document.body.classList.remove("non-selectable")},10)),w(()=>{G(ie)},e.hideDelay)}function N(){if(e.noParentEvent===!0||A.value===void 0)return;const ie=Xt().isPhone===!0?[[A.value,"touchstart","delayShow","passive"]]:[[A.value,"mouseenter","delayShow","passive"],[A.value,"mouseleave","delayHide","passive"]];wi($,"anchor",ie)}function j(){if(A.value!==void 0||e.scrollTarget!==void 0){_.value=h$(A.value,e.scrollTarget);const ie=e.noParentEvent===!0?P:G;O(_.value,ie)}}function U(){return c.value===!0?R("div",{...n,ref:l,class:["vc-tooltip vc-tooltip--style vc-position-engine no-pointer-events",n.class],style:S.value,role:"complementary"},Lt(t.default)):null}function te(){return R(A_,{name:M.value,appear:!0},U)}return fo(L),Object.assign(s==null?void 0:s.proxy,{updatePosition:P}),g}});function aa(e,t,i){return i<=t?t:Math.min(i,Math.max(t,e))}const ff=XMLHttpRequest,Yx=ff.prototype.open,b$=["top","right","bottom","left"];let Vc=[],cl=0;function C$({p:e,pos:t,active:i,horiz:n,reverse:r,dir:a}){let s=1,l=1;return n===!0?(r===!0&&(s=-1),t==="bottom"&&(l=-1),{transform:`translate3d(${s*(e-100)}%,${i?0:l*-200}%,0)`}):(r===!0&&(l=-1),t==="right"&&(s=-1),{transform:`translate3d(${i?0:a*s*-200}%,${l*(e-100)}%,0)`})}function _$(e,t){return typeof t!="number"&&(e<25?t=Math.random()*3+3:e<65?t=Math.random()*3:e<85?t=Math.random()*2:e<99?t=.6:t=0),aa(e+t,0,100)}function w$(e){cl++,Vc.push(e),!(cl>1)&&(ff.prototype.open=function(t,i){const n=[],r=()=>{Vc.forEach(s=>{(s.hijackFilter.value===null||s.hijackFilter.value(i)===!0)&&(s.start(),n.push(s.stop))})},a=()=>{n.forEach(s=>{s()})};this.addEventListener("loadstart",r,{once:!0}),this.addEventListener("loadend",a,{once:!0}),Yx.apply(this,arguments)})}function x$(e){Vc=Vc.filter(t=>t.start!==e),cl=Math.max(0,cl-1),cl===0&&(ff.prototype.open=Yx)}const vf={position:{type:String,default:"top",validator:e=>b$.includes(e)},size:{type:String,default:"2px"},color:String,skipHijack:Boolean,reverse:Boolean,positioning:{type:String,default:"absolute",validator:e=>["absolute","fixed"].includes(e)},hijackFilter:Function};var Kx=de({name:"VcAjaxBar",props:vf,emits:["start","stop"],setup(e,{emit:t}){const{proxy:i}=fe(),n=he(0),r=he(!1),a=he(!0);let s=0,l,c;const d=ge(()=>`vc-loading-bar vc-loading-bar--${e.position}`+(e.color!==void 0?` bg-${e.color}`:"")+(a.value===!0?"":" no-transition")),h=ge(()=>e.position==="top"||e.position==="bottom"),p=ge(()=>h.value===!0?"height":"width"),f=ge(()=>{const _=r.value,O=C$({p:n.value,pos:e.position,active:_,horiz:h.value,reverse:e.reverse,dir:1});return O[p.value]=e.size,O.opacity=_?1:0,O.position=e.positioning==="absolute"?"absolute":"fixed",O.backgroundColor=e.color,O}),v=ge(()=>r.value===!0?{role:"progressbar","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":n.value}:{"aria-hidden":"true"});function y(_=300){const O=c;return c=Math.max(0,_)||0,s++,s>1?(O===0&&_>0?M():O>0&&_<=0&&clearTimeout(l),s):(clearTimeout(l),t("start"),n.value=0,l=setTimeout(()=>{a.value=!0,_>0&&M()},r.value===!0?500:1),r.value!==!0&&(r.value=!0,a.value=!1),s)}function w(_){return s>0&&(n.value=_$(n.value,_)),s}function C(){if(s=Math.max(0,s-1),s>0)return s;clearTimeout(l),t("stop");const _=()=>{a.value=!0,n.value=100,l=setTimeout(()=>{r.value=!1},1e3)};n.value===0?l=setTimeout(_,1):_()}function M(){n.value<100&&(l=setTimeout(()=>{w(),M()},c))}let S;return Es(()=>{e.skipHijack!==!0&&(S=!0,w$({start:y,stop:C,hijackFilter:ge(()=>e.hijackFilter||null)}))}),fo(()=>{clearTimeout(l),S===!0&&x$(y)}),Object.assign(i,{start:y,stop:C,increment:w}),()=>R("div",{class:d.value,style:f.value,...v.value})}});const eE={dark:{type:Boolean,default:null}};function tE(e){return ge(()=>e.dark)}const gf=["text","rect","circle","VcBtn","VcBadge","VcChip","VcToolbar","VcCheckbox","VcRadio","VcToggle","VcSlider","VcRange","VcInput","VcAvatar"],yf=["wave","pulse","pulse-x","pulse-y","fade","blink","none"],bf={...eE,tag:{type:String,default:"div"},type:{type:String,validator:e=>gf.includes(e),default:"rect"},animation:{type:String,validator:e=>yf.includes(e),default:"wave"},square:Boolean,bordered:Boolean,size:String,width:String,height:String};var iE=de({name:"VcSkeleton",props:bf,setup(e,{slots:t}){const i=tE(e),n=ge(()=>e.size!==void 0?{width:e.size,height:e.size}:{width:e.width,height:e.height}),r=ge(()=>`vc-skeleton vc-skeleton--${i.value===!0?"dark":"light"} vc-skeleton--type-${e.type}`+(e.animation!=="none"?` vc-skeleton--anim vc-skeleton--anim-${e.animation}`:"")+(e.square===!0?" vc-skeleton--square":"")+(e.bordered===!0?" vc-skeleton--bordered":""));return()=>R(e.tag,{class:r.value,style:n.value},Lt(t.default))}});const E$=["top","right","bottom","left"],nE={type:{type:String,default:"a"},outline:Boolean,push:Boolean,flat:Boolean,unelevated:Boolean,color:String,textColor:String,glossy:Boolean,square:Boolean,padding:String,size:String,label:{type:[String,Number],default:""},labelPosition:{type:String,default:"right",validator:e=>E$.includes(e)},externalLabel:Boolean,hideLabel:{type:Boolean},labelClass:[Array,String,Object],labelStyle:[Array,String,Object],disable:Boolean,tabindex:[Number,String]};function rE(e,t){return{formClass:ge(()=>`vc-fab--form-${e.square===!0?"square":"rounded"}`),stacked:ge(()=>e.externalLabel===!1&&["top","bottom"].includes(e.labelPosition)),labelProps:ge(()=>{if(e.externalLabel===!0){const i=e.hideLabel===null?t.value===!1:e.hideLabel;return{action:"push",data:{class:[e.labelClass,`vc-fab__label vc-tooltip--style vc-fab__label--external vc-fab__label--external-${e.labelPosition}`+(i===!0?" vc-fab__label--external-hidden":"")],style:e.labelStyle}}}return{action:["left","top"].includes(e.labelPosition)?"unshift":"push",data:{class:[e.labelClass,`vc-fab__label vc-fab__label--internal vc-fab__label--internal-${e.labelPosition}`+(e.hideLabel===!0?" vc-fab__label--internal-hidden":"")],style:e.labelStyle}}})}}const P$=["up","right","down","left"],O$=["left","center","right"],M$={...nE,...Gx,icon:String,activeIcon:String,hideActionOnClick:{type:Boolean,default:!0},hideIcon:Boolean,hideLabel:{type:Boolean,default:!0},direction:{type:String,default:"right",validator:e=>P$.includes(e)},persistent:Boolean,stacked:Boolean,verticalActionsAlign:{type:String,default:"center",validator:e=>O$.includes(e)}},Cf=M$;var oE=de({name:"VcFab",props:Cf,emits:Ux,setup(e,{slots:t}){const i=he(null),n=he(e.modelValue===!0),{formClass:r,labelProps:a}=rE(e,n),s=ge(()=>e.persistent!==!0),{hide:l,toggle:c}=Hx({showing:n,hideOnRouteChange:s}),d=ge(()=>({opened:n.value})),h=ge(()=>`vc-fab z-fab row inline justify-center vc-fab--align-${e.verticalActionsAlign} ${r.value}`+(n.value===!0?" vc-fab--opened":" vc-fab--closed")),p=ge(()=>`vc-fab__actions flex no-wrap inline vc-fab__actions--${e.direction} vc-fab__actions--${n.value===!0?"opened":"closed"}`),f=ge(()=>`vc-fab__icon-holder  vc-fab__icon-holder--${n.value===!0?"opened":"closed"}`);function v(w,C){const M=t[w],S=`vc-fab__${w} absolute-full`;return M===void 0?R(ja,{class:S,name:e[C]}):R("div",{class:S},M(d.value))}function y(){const w=[];return e.hideIcon!==!0&&w.push(R("div",{class:f.value},[v("icon","icon"),v("active-icon","activeIcon")])),(e.label!==""||t.label!==void 0)&&w[a.value.action](R("div",a.value.data,t.label!==void 0?t.label(d.value):[e.label])),Zn(t.tooltip,w)}return Gr(L_,{showing:n,onChildClick(w){e.hideActionOnClick&&l(w),i.value!==null&&i.value.$el.focus()}}),()=>R("div",{class:h.value},[R(Nc,{ref:i,class:r.value,...e,noWrap:!0,stack:e.stacked,align:void 0,icon:void 0,label:void 0,noCaps:!0,fab:!0,flat:e.flat,size:e.size,"aria-expanded":n.value===!0?"true":"false","aria-haspopup":"true",onClick:c},y),R("div",{class:p.value},Lt(t.default))])}});const aE={start:"self-end",center:"self-center",end:"self-start"},S$=Object.keys(aE),T$={...nE,icon:{type:String,default:""},stacked:Boolean,anchor:{type:String,validator:e=>S$.includes(e)},to:[String,Object],replace:Boolean},_f=T$;var sE=de({name:"VcFabAction",props:_f,emits:["click"],setup(e,{slots:t,emit:i}){const n=Eu(L_),{formClass:r,labelProps:a}=rE(e,n==null?void 0:n.showing),s=ge(()=>{let p;return e.anchor&&(p=aE[e.anchor]),r.value+(p!==void 0?` ${p}`:"")}),l=ge(()=>{var p;return e.disable===!0||((p=n==null?void 0:n.showing)==null?void 0:p.value)!==!0});function c(p){var f;(f=n==null?void 0:n.onChildClick)==null||f.call(n,p),i("click",p)}function d(){const p=[];return e.icon!==""&&p.push(R(ja,{name:e.icon})),e.label!==""&&p[a.value.action](R("div",a.value.data,[e.label])),Zn(t.default,p)}const h=fe();return Object.assign(h==null?void 0:h.proxy,{click:c}),()=>R(Nc,{class:s.value,...e,noWrap:!0,stack:e.stacked,icon:void 0,label:void 0,noCaps:!0,fabMini:!0,disable:l.value,size:e.size,onClick:c},d)}});const I$={name:String};function A$(e){return ge(()=>({type:"hidden",name:e.name,value:e.modelValue}))}function D$(e={}){return(t,i,n)=>{t[i](R("input",{class:"hidden"+(n||""),...e.value}))}}const lE="vc-slider__marker-labels",L$=e=>({value:e}),B$=({marker:e})=>R("div",{key:e.value,style:e.style,class:e.classes},e.label),uE=[34,37,40,33,39,38],R$={...eE,...I$,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,hideSelection:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},F$=["pan","update:modelValue","change"];function $$({updateValue:e,updatePosition:t,getDragging:i,formAttrs:n}){const{props:r,emit:a,slots:s,proxy:l}=fe(),c=tE(r),d=D$(n),h=he(!1),p=he(!1),f=he(!1),v=he(!1),y=ge(()=>r.vertical===!0?"--v":"--h"),w=ge(()=>"-"+(r.switchLabelSide===!0?"switched":"standard")),C=ge(()=>r.reverse===!0),M=ge(()=>isNaN(r.innerMin)===!0||r.innerMin<r.min?r.min:r.innerMin),S=ge(()=>isNaN(r.innerMax)===!0||r.innerMax>r.max?r.max:r.innerMax),_=ge(()=>r.disable!==!0&&r.readonly!==!0&&M.value<S.value),O=ge(()=>(String(r.step).trim().split(".")[1]||"").length),I=ge(()=>r.step===0?1:r.step),A=ge(()=>_.value===!0?r.tabindex||0:-1),V=ge(()=>r.max-r.min),$=ge(()=>S.value-M.value),D=ge(()=>J(M.value)),G=ge(()=>J(S.value)),q=ge(()=>r.vertical===!0?C.value===!0?"bottom":"top":C.value===!0?"right":"left"),H=ge(()=>r.vertical===!0?"height":"width"),g=ge(()=>r.vertical===!0?"width":"height"),b=ge(()=>r.vertical===!0?"vertical":"horizontal"),E=ge(()=>{const Ee={role:"slider","aria-valuemin":M.value,"aria-valuemax":S.value,"aria-orientation":b.value,"data-step":r.step};return r.disable===!0?Ee["aria-disabled"]="true":r.readonly===!0&&(Ee["aria-readonly"]="true"),Ee}),L=ge(()=>`vc-slider vc-slider${y.value} vc-slider--${h.value===!0?"":"in"}active inline no-wrap `+(r.vertical===!0?"row":"column")+(r.disable===!0?" disabled":" vc-slider--enabled"+(_.value===!0?" vc-slider--editable":""))+(f.value==="both"?" vc-slider--focus":"")+(r.label||r.labelAlways===!0?" vc-slider--label":"")+(r.labelAlways===!0?" vc-slider--label-always":"")+(c.value===!0?" vc-slider--dark":"")+(r.dense===!0?" vc-slider--dense vc-slider--dense"+y.value:""));function P(Ee){const Qe="vc-slider__"+Ee;return`${Qe} ${Qe}${y.value} ${Qe}${y.value}${w.value}`}function T(Ee){const Qe="vc-slider__"+Ee;return`${Qe} ${Qe}${y.value}`}const F=ge(()=>{const Ee=r.selectionColor||r.color;return"vc-slider__selection absolute"+(Ee!==void 0?` text-${Ee}`:"")}),N=ge(()=>T("markers")+" absolute overflow-hidden"),j=ge(()=>T("track-container")),U=ge(()=>P("pin")),te=ge(()=>P("label")),ie=ge(()=>P("text-container")),K=ge(()=>P("marker-labels-container")+(r.markerLabelsClass!==void 0?` ${r.markerLabelsClass}`:"")),Z=ge(()=>"vc-slider__track relative-position no-outline"+(r.trackColor!==void 0?` bg-${r.trackColor}`:"")),z=ge(()=>{const Ee={[g.value]:r.trackSize};return r.trackImg!==void 0&&(Ee.backgroundImage=`url(${r.trackImg}) !important`),Ee}),Q=ge(()=>"vc-slider__inner absolute"+(r.innerTrackColor!==void 0?` bg-${r.innerTrackColor}`:"")),re=ge(()=>{const Ee={[q.value]:`${100*D.value}%`,[H.value]:`${100*(G.value-D.value)}%`};return r.innerTrackImg!==void 0&&(Ee.backgroundImage=`url(${r.innerTrackImg}) !important`),Ee});function X(Ee){const{min:Qe,max:He,step:Xe}=r;let _t=Qe+Ee*(He-Qe);if(Xe>0){const wt=(_t-Qe)%Xe;_t+=(Math.abs(wt)>=Xe/2?(wt<0?-1:1)*Xe:0)-wt}return O.value>0&&(_t=parseFloat(_t.toFixed(O.value))),aa(_t,M.value,S.value)}function J(Ee){return V.value===0?0:(Ee-r.min)/V.value}function ae(Ee,Qe){const He=Pr(Ee),Xe=r.vertical===!0?aa((He.top-Qe.top)/Qe.height,0,1):aa((He.left-Qe.left)/Qe.width,0,1);return aa(C.value===!0?1-Xe:Xe,D.value,G.value)}const ne=ge(()=>D8(r.markers)===!0?r.markers:I.value),ce=ge(()=>{const Ee=[],Qe=ne.value,He=r.max;let Xe=r.min;do Ee.push(Xe),Xe+=Qe;while(Xe<He);return Ee.push(He),Ee}),le=ge(()=>{const Ee=` ${lE}${y.value}-`;return lE+`${Ee}${r.switchMarkerLabelsSide===!0?"switched":"standard"}${Ee}${C.value===!0?"rtl":"ltr"}`}),pe=ge(()=>r.markerLabels===!1?null:Re(r.markerLabels).map((Ee,Qe)=>({index:Qe,value:Ee.value,label:Ee.label||Ee.value,classes:le.value+(Ee.classes!==void 0?" "+Ee.classes:""),style:{...Me(Ee.value),...Ee.style||{}}}))),Ce=ge(()=>({markerList:pe.value,markerMap:Te.value,classes:le.value,getStyle:Me})),Se=ge(()=>{if($.value!==0){const Ee=100*ne.value/$.value;return{...re.value,backgroundSize:r.vertical===!0?`2px ${Ee}%`:`${Ee}% 2px`}}return null});function Re(Ee){if(Ee===!1)return null;if(Ee===!0)return ce.value.map(L$);if(typeof Ee=="function")return ce.value.map(He=>{const Xe=Ee(He);return _r(Xe)===!0?{...Xe,value:He}:{value:He,label:Xe}});const Qe=({value:He})=>He>=r.min&&He<=r.max;return Array.isArray(Ee)===!0?Ee.map(He=>_r(He)===!0?He:{value:He}).filter(Qe):Object.keys(Ee).map(He=>{const Xe=Ee[He],_t=Number(He);return _r(Xe)===!0?{...Xe,value:_t}:{value:_t,label:Xe}}).filter(Qe)}function Me(Ee){return{[q.value]:`${100*(Ee-r.min)/V.value}%`}}const Te=ge(()=>{if(r.markerLabels===!1)return null;const Ee={};return pe.value.forEach(Qe=>{Ee[Qe.value]=Qe}),Ee});function $e(){if(s["marker-label-group"]!==void 0)return s["marker-label-group"](Ce.value);const Ee=s["marker-label"]||B$;return pe.value.map(Qe=>Ee({marker:Qe,...Ce.value}))}const Le=ge(()=>[[km,Ie,void 0,{[b.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function Ie(Ee){Ee.isFinal===!0?(v.value!==void 0&&(t(Ee.evt),Ee.touch===!0&&e(!0),v.value=void 0,a("pan","end")),h.value=!1,f.value=!1):Ee.isFirst===!0?(v.value=i(Ee.evt),t(Ee.evt),e(),h.value=!0,a("pan","start")):(t(Ee.evt),e())}function We(){f.value=!1}function Y(Ee){t(Ee,i(Ee)),e(),p.value=!0,h.value=!0,document.addEventListener("mouseup",_e,!0)}function _e(){p.value=!1,h.value=!1,e(!0),We(),document.removeEventListener("mouseup",_e,!0)}function Be(Ee){t(Ee,i(Ee)),e(!0)}function Fe(Ee){uE.includes(Ee.keyCode)&&e(!0)}function Bt(Ee){if(r.vertical===!0)return null;const Qe=Ee;return{transform:`translateX(calc(${2*Qe-1} * ${r.thumbSize} / 2 + ${50-100*Qe}%))`}}function vi(Ee){const Qe=ge(()=>p.value===!1&&(f.value===Ee.focusValue||f.value==="both")?" vc-slider--focus":""),He=ge(()=>`vc-slider__thumb vc-slider__thumb${y.value} vc-slider__thumb${y.value}-${C.value===!0?"rtl":"ltr"} absolute non-selectable`+Qe.value+(Ee.thumbColor.value!==void 0?` text-${Ee.thumbColor.value}`:"")),Xe=ge(()=>({width:r.thumbSize,height:r.thumbSize,[q.value]:`${100*Ee.ratio.value}%`,zIndex:f.value===Ee.focusValue?2:void 0})),_t=ge(()=>Ee.labelColor.value!==void 0?` text-${Ee.labelColor.value}`:""),wt=ge(()=>Bt(Ee.ratio.value)),lt=ge(()=>"vc-slider__text"+(Ee.labelTextColor.value!==void 0?` text-${Ee.labelTextColor.value}`:""));return()=>{const ot=[R("svg",{class:"vc-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[R("path",{d:r.thumbPath})]),R("div",{class:"vc-slider__focus-ring fit"})];return(r.label===!0||r.labelAlways===!0)&&(ot.push(R("div",{class:U.value+" absolute fit no-pointer-events"+_t.value},[R("div",{class:te.value,style:{minWidth:r.thumbSize}},[R("div",{class:ie.value,style:wt.value},[R("span",{class:lt.value},Ee.label.value)])])])),r.name!==void 0&&r.disable!==!0&&d(ot,"push")),R("div",{class:He.value,style:Xe.value,...Ee.getNodeData()},ot)}}function Ke(Ee,Qe,He,Xe){const _t=[];r.innerTrackColor!=="transparent"&&_t.push(R("div",{key:"inner",class:Q.value,style:re.value})),r.selectionColor!=="transparent"&&_t.push(R("div",{key:"selection",class:F.value,style:Ee.value})),r.markers!==!1&&_t.push(R("div",{key:"marker",class:N.value,style:Se.value})),Xe(_t);const wt=[kx("div",{key:"trackC",class:j.value,tabindex:Qe.value,...He.value},[R("div",{class:Z.value,style:z.value},_t)],"slide",_.value,()=>Le.value)];if(r.markerLabels!==!1){const lt=r.switchMarkerLabelsSide===!0?"unshift":"push";wt[lt](R("div",{key:"markerL",class:K.value},$e()))}return wt}return fo(()=>{document.removeEventListener("mouseup",_e,!0)}),{state:{active:h,focus:f,preventFocus:p,dragging:v,editable:_,classes:L,tabindex:A,attributes:E,step:I,decimals:O,trackLen:V,innerMin:M,innerMinRatio:D,innerMax:S,innerMaxRatio:G,positionProp:q,sizeProp:H,isReversed:C},methods:{onActivate:Y,onMobileClick:Be,onBlur:We,onKeyup:Fe,getContent:Ke,getThumbRenderFn:vi,convertRatioToModel:X,convertModelToRatio:J,getDraggingRatio:ae}}}const j$=()=>({}),wf={...R$,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]};var cE=de({name:"VcSlider",props:wf,emits:F$,setup(e,{emit:t}){const{state:i,methods:n}=$$({updateValue:v,updatePosition:w,getDragging:y,formAttrs:A$(e)}),r=he(null),a=he(0),s=he(0);function l(){s.value=e.modelValue===null?i.innerMin.value:aa(e.modelValue,i.innerMin.value,i.innerMax.value)}Pe(()=>`${e.modelValue}|${i.innerMin.value}|${i.innerMax.value}`,l),l();const c=ge(()=>n.convertModelToRatio(s.value)),d=ge(()=>i.active.value===!0?a.value:c.value),h=ge(()=>{const S={[i.positionProp.value]:`${100*i.innerMinRatio.value}%`,[i.sizeProp.value]:`${100*(d.value-i.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(S.backgroundImage=`url(${e.selectionImg}) !important`),S}),p=n.getThumbRenderFn({focusValue:!0,getNodeData:j$,ratio:d,label:ge(()=>e.labelValue!==void 0?e.labelValue:s.value),thumbColor:ge(()=>e.thumbColor||e.color),labelColor:ge(()=>e.labelColor),labelTextColor:ge(()=>e.labelTextColor)}),f=ge(()=>i.editable.value!==!0?{}:Xt().isPhone===!0?{onClick:n.onMobileClick}:{onMousedown:n.onActivate,onFocus:C,onBlur:n.onBlur,onKeydown:M,onKeyup:n.onKeyup});function v(S){s.value!==e.modelValue&&t("update:modelValue",s.value),S===!0&&t("change",s.value)}function y(){return r.value.getBoundingClientRect()}function w(S,_=i.dragging.value){const O=n.getDraggingRatio(S,_);s.value=n.convertRatioToModel(O),a.value=e.snap!==!0||e.step===0?O:n.convertModelToRatio(s.value)}function C(){i.focus.value=!0}function M(S){if(!uE.includes(S.keyCode))return;Or(S);const _=([34,33].includes(S.keyCode)?10:1)*i.step.value,O=([34,37,40].includes(S.keyCode)?-1:1)*(i.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*_;s.value=aa(parseFloat((s.value+O).toFixed(i.decimals.value)),i.innerMin.value,i.innerMax.value),v()}return()=>{const S=n.getContent(h,i.tabindex,f,_=>{_.push(p())});return R("div",{ref:r,class:i.classes.value+(e.modelValue===null?" vc-slider--no-value":""),...i.attributes.value,"aria-valuenow":e.modelValue},S)}}});const N$=[Nc,ja,Sc,Tc,Ic,Ac,Dc,Lc,Bc,Rc,Fc,$c,jc,ul,Xx,Kx,iE,oE,sE,cE];N$.forEach(e=>{e.install=t=>{t.component(e.name,e)}});const Yi=Nc,Yr=ja,xf=Sc,dl=Tc,Ef=Ic,Pf=Ac,Of=Dc,zc=Lc,Gc=Bc,Uc=Rc,Hc=Fc,Mf=$c,Wc=jc,Sf=ul,xi=Xx,Tf=Kx,qc=iE,Zc=oE,hl=sE,If=cE,je={beforeLoad:e=>!0,ready:e=>!0,unready:e=>!0,destroyed:e=>!0},za={mousedown:e=>!0,mouseup:e=>!0,click:e=>!0,clickout:e=>!0,dblclick:e=>!0,mousemove:e=>!0,mouseover:e=>!0,mouseout:e=>!0},Ga={...je,definitionChanged:e=>!0},Wt={...je,errorEvent:e=>!0,readyPromise:(e,t,i)=>!0},dn={...je,...za,readyPromise:(e,t,i)=>!0,"update:geometryInstances":e=>!0},Mn={...je,...za},Ua={...je,...za,definitionChanged:e=>!0,clusterEvent:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,changedEvent:e=>!0,errorEvent:(e,t)=>!0,loadingEvent:(e,t)=>!0,refreshEvent:(e,t)=>!0,unsupportedNodeEvent:(e,t,i,n,r,a,s)=>!0},si={...je,activeEvt:(e,t)=>!0,drawEvt:(e,t)=>!0,editorEvt:(e,t)=>!0,mouseEvt:(e,t)=>!0},k$={...je,cesiumReady:e=>!0,viewerWidgetResized:e=>!0,selectedEntityChanged:e=>!0,trackedEntityChanged:e=>!0,layerAdded:(e,t)=>!0,layerMoved:(e,t,i)=>!0,layerRemoved:(e,t)=>!0,layerShownOrHidden:(e,t,i)=>!0,dataSourceAdded:(e,t)=>!0,dataSourceMoved:(e,t,i)=>!0,dataSourceRemoved:(e,t)=>!0,collectionChanged:(e,t,i,n)=>!0,morphComplete:(e,t,i,n)=>!0,morphStart:(e,t,i,n)=>!0,postRender:(e,t)=>!0,preRender:(e,t)=>!0,postUpdate:(e,t)=>!0,preUpdate:(e,t)=>!0,renderError:(e,t)=>!0,terrainProviderChanged:e=>!0,changed:e=>!0,moveEnd:()=>!0,moveStart:()=>!0,onStop:e=>!0,onTick:e=>!0,errorEvent:e=>!0,cameraClicked:e=>!0,closeClicked:e=>!0,leftClick:e=>!0,leftDoubleClick:e=>!0,leftDown:e=>!0,leftUp:e=>!0,middleClick:e=>!0,middleDown:e=>!0,middleUp:e=>!0,mouseMove:e=>!0,pinchStart:e=>!0,pinchMove:e=>!0,pinchEnd:()=>!0,rightClick:e=>!0,rightDown:e=>!0,rightUp:e=>!0,wheel:e=>!0,imageryLayersUpdatedEvent:()=>!0,tileLoadProgressEvent:e=>!0,touchEnd:e=>!0,"update:camera":e=>!0};var Qc=de({name:"VcViewer",props:lf,emits:k$,setup(e,t){const i=fe();i.cesiumEvents=["selectedEntityChanged","trackedEntityChanged"],i.cesiumMembersEvents=$x;const n=R7(e,t,i),r=ge(()=>e.containerId||t.attrs.id||"cesiumContainer");Gr(Wr,n.getServices()),i.appContext.config.globalProperties.$VueCesium=i.appContext.config.globalProperties.$VueCesium||{},i.appContext.config.globalProperties.$VueCesium[r.value]=n.getServices(),Object.assign(i.proxy,{creatingPromise:n.creatingPromise,load:n.load,unload:n.unload,reload:n.reload,cesiumObject:i.cesiumObject,getCesiumObject:()=>i.cesiumObject});const a=s=>{t.emit("touchEnd",s)};return()=>{var s;const l=[];return Gt(e.skeleton)&&!n.isReady.value?l.push(R(qc,{...e.skeleton,style:{background:e.skeleton.color,width:"100%",height:"100%"}})):l.push(me("v-if")),l.push(me("vc-viewer"),I_(R("div",{ref:n.viewerRef,class:ye(((s=i.proxy)==null?void 0:s.$options.name)||""),id:r.value,style:t.attrs.style||{width:"100%",height:"100%"}},Lt(t.slots.default)),[[ol,a,e.touchHoldArg]])),l}}});Qc.install=(e,t)=>{e.component(Qc.name,Qc)};const dE=Qc,Af=dE,_o={position:{type:String,default:"top-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2}};function Sn(e,t){const i=ge(()=>{const d=e.position;return{top:d.indexOf("top")>-1,right:d.indexOf("right")>-1,bottom:d.indexOf("bottom")>-1,left:d.indexOf("left")>-1,vertical:d==="top"||d==="bottom",horizontal:d==="left"||d==="right"}}),n=he(0),r=he(0),a=he(0),s=he(0),l=ge(()=>{let d=0,h=0;const p=i.value,f=1;p.top===!0&&n.value!==0?h=`${n.value}px`:p.bottom===!0&&s.value!==0&&(h=`${-s.value}px`),p.left===!0&&a.value!==0?d=`${f*a.value}px`:p.right===!0&&r.value!==0&&(d=`${-f*r.value}px`);const v={transform:`translate(${d}, ${h})`};return e.offset&&(v.margin=`${e.offset[1]}px ${e.offset[0]}px`),p.vertical===!0?(a.value!==0&&(v.right=`${a.value}px`),r.value!==0&&(v.left=`${r.value}px`)):p.horizontal===!0&&(n.value!==0&&(v.top=`${n.value}px`),s.value!==0&&(v.bottom=`${s.value}px`)),typeof e.teleportToViewer=="undefined"||e.teleportToViewer?v:{}}),c=ge(()=>typeof e.teleportToViewer=="undefined"||e.teleportToViewer?`absolute absolute-${e.position}`:"relative-position");return{attach:i,style:l,classes:c}}const Df={enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},..._o,outerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-outer",size:"96px",color:"#3f4854",background:"transparent",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},innerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-inner",size:"24px",color:"#3f4854",background:"#fff",tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}})},markerOptions:{type:Object,default:()=>({icon:"vc-icons-compass-rotation-marker",size:"96px",color:"#1976D2"})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},Lf=Gn(Df);class hE{static createTween(t,i){const{Cartesian2:n,Cartesian3:r,defaultValue:a,defined:s,DeveloperError:l,EasingFunction:c,Math:d,SceneMode:h}=Cesium;i=a(i,{});let p=i.destination;if(!s(t))throw new l("scene is required.");if(!s(p))throw new l("destination is required.");const f=t.mode;if(f===h.MORPHING)return Rf();const v=a(i.convert,!0),y=t.mapProjection,w=y.ellipsoid,C=i.maximumHeight,M=i.flyOverLongitude,S=i.flyOverLongitudeWeight,_=i.pitchAdjustHeight;let O=i.easingFunction;v&&f!==h.SCENE3D&&(w.cartesianToCartographic(p,fE),p=y.project(fE,X$));const I=t.camera,A=i.endTransform;s(A)&&I._setTransform(A);let V=i.duration;s(V)||(V=Math.ceil(r.distance(I.position,p)/1e6)+2,V=Math.min(V,3));const $=a(i.heading,0),D=a(i.pitch,-d.PI_OVER_TWO),G=a(i.roll,0),q=t.screenSpaceCameraController;q.enableInputs=!1;const H=vE(q,i.complete),g=vE(q,i.cancel),b=I.frustum;let E=t.mode===h.SCENE2D;if(E=E&&n.equalsEpsilon(I.position,p,d.EPSILON6),E=E&&d.equalsEpsilon(Math.max(b.right-b.left,b.top-b.bottom),p.z,d.EPSILON6),E=E||t.mode!==h.SCENE2D&&r.equalsEpsilon(p,I.position,d.EPSILON10),E=E&&d.equalsEpsilon(d.negativePiToPi($),d.negativePiToPi(I.heading),d.EPSILON10)&&d.equalsEpsilon(d.negativePiToPi(D),d.negativePiToPi(I.pitch),d.EPSILON10)&&d.equalsEpsilon(d.negativePiToPi(G),d.negativePiToPi(I.roll),d.EPSILON10),E)return Rf(H,g);const L=new Array(4);if(L[h.SCENE2D]=J$,L[h.SCENE3D]=Q$,L[h.COLUMBUS_VIEW]=U$,V<=0)return Rf(function(){L[f](t,1,p,$,D,G,C,M,S,_)({time:1}),typeof H=="function"&&H()},g);const P=L[f](t,V,p,$,D,G,C,M,S,_);if(!s(O)){const T=I.positionCartographic.height,F=f===h.SCENE3D?w.cartesianToCartographic(p).height:p.z;T>F&&T>11500?O=c.CUBIC_OUT:O=c.QUINTIC_IN_OUT}return{duration:V,easingFunction:O,startObject:{time:0},stopObject:{time:V},update:P,complete:H,cancel:g}}}function V$(e,t,i){const{PerspectiveFrustum:n,PerspectiveOffCenterFrustum:r}=Cesium;let a,s,l;if(e instanceof n){const c=Math.tan(.5*e.fovy);return a=e.near,s=e.near*c,l=e.aspectRatio*s,Math.max(t*a/l,i*a/s)}else if(e instanceof r)return a=e.near,s=e.top,l=e.right,Math.max(t*a/l,i*a/s);return Math.max(t,i)}const z$={},pE={};function G$(e,t,i,n){const{defined:r,Math:a}=Cesium;if(r(n)&&i(.5)>n){const s=i(0),l=i(1),c=i(.5),d=c-s,h=c-l;return function(p){const f=i(p);if(p<=.5){const y=(f-s)/d;return a.lerp(e,-a.PI_OVER_TWO,y)}const v=(f-l)/h;return a.lerp(-a.PI_OVER_TWO,t,1-v)}}return function(s){return a.lerp(e,t,s)}}function Bf(e,t,i,n,r){const{Cartesian3:a,defined:s,Math:l}=Cesium;let c=r;const d=Math.max(i,n);if(!s(c)){const h=e.position,p=t,f=e.up,v=e.right,y=e.frustum,w=a.subtract(h,p,z$),C=a.magnitude(a.multiplyByScalar(f,a.dot(w,f),pE)),M=a.magnitude(a.multiplyByScalar(v,a.dot(w,v),pE));c=Math.min(V$(y,C,M)*.2,1e9)}if(d<c){const h=-Math.pow((c-i)*1e6,.125),p=Math.pow((c-n)*1e6,1/8);return function(f){const v=f*(p-h)+h;return-Math.pow(v,8)/1e6+c}}return function(h){return l.lerp(i,n,h)}}function pl(e,t){const{Math:i}=Cesium;return i.equalsEpsilon(e,i.TWO_PI,i.EPSILON11)&&(e=0),t>e+Math.PI?e+=i.TWO_PI:t<e-Math.PI&&(e-=i.TWO_PI),e}const mE={};function U$(e,t,i,n,r,a,s){const{Cartesian2:l,Cartesian3:c,Math:d}=Cesium,h=e.camera,p=c.clone(h.position,mE),f=h.pitch,v=pl(h.heading,n),y=pl(h.roll,a),w=Bf(h,i,p.z,i.z,s);function C(M){const S=M.time/t;h.setView({orientation:{heading:d.lerp(v,n,S),pitch:d.lerp(f,r,S),roll:d.lerp(y,a,S)}}),l.lerp(p,i,S,h.position),h.position.z=w(S)}return C}function H$(e,t){const{Math:i}=Cesium;e.longitude<t.longitude?e.longitude+=i.TWO_PI:t.longitude+=i.TWO_PI}function W$(e,t){const{Math:i}=Cesium,n=e.longitude-t.longitude;n<-i.PI?e.longitude+=i.TWO_PI:n>i.PI&&(t.longitude+=i.TWO_PI)}const q$={},Z$={};function Q$(e,t,i,n,r,a,s,l,c,d){const{Cartesian3:h,Cartographic:p,defined:f,Math:v}=Cesium,y=e.camera,w=e.mapProjection.ellipsoid,C=p.clone(y.positionCartographic,q$),M=y.pitch,S=pl(y.heading,n),_=pl(y.roll,a),O=w.cartesianToCartographic(i,Z$);C.longitude=v.zeroToTwoPi(C.longitude),O.longitude=v.zeroToTwoPi(O.longitude);let I=!1;if(f(l)){const D=v.zeroToTwoPi(l),G=Math.min(C.longitude,O.longitude),q=Math.max(C.longitude,O.longitude),H=D>=G&&D<=q;if(f(c)){const g=Math.abs(C.longitude-O.longitude),b=v.TWO_PI-g;(H?g:b)<(H?b:g)*c&&!H&&(I=!0)}else H||(I=!0)}I?H$(C,O):W$(C,O);const A=Bf(y,i,C.height,O.height,s),V=G$(M,r,A,d);function $(){const D=C.longitude,G=O.longitude,q=C.latitude,H=O.latitude;return function(g){const b=g.time/t,E=h.fromRadians(v.lerp(D,G,b),v.lerp(q,H,b),A(b),e.globe.ellipsoid);y.setView({destination:E,orientation:{heading:v.lerp(S,n,b),pitch:V(b),roll:v.lerp(_,a,b)}})}}return $()}function J$(e,t,i,n,r,a,s){const{Cartesian2:l,Cartesian3:c,Math:d}=Cesium,h=e.camera,p=c.clone(h.position,mE),f=pl(h.heading,n),v=h.frustum.right-h.frustum.left,y=Bf(h,i,v,i.z,s);function w(C){const M=C.time/t;h.setView({orientation:{heading:d.lerp(f,n,M)}}),l.lerp(p,i,M,h.position);const S=y(M),_=h.frustum,O=_.top/_.right,I=(S-(_.right-_.left))*.5;_.right+=I,_.left-=I,_.top=O*_.right,_.bottom=-_.top}return w}const fE={},X$={};function Rf(e,t){return{startObject:{},stopObject:{},duration:0,complete:e,cancel:t}}function vE(e,t){function i(){typeof t=="function"&&t(),e.enableInputs=!0}return i}function Y$(e,{emit:t},i){const n={},r={},a={},s={};let l,c,d,h,p;const f=he(0),v=he(0),y=he(0);let w=0,C={},M=!1,S,_,O=0,I={},A=0;const V=he(null),$=he(null),D=E=>{var L,P;E.stopPropagation&&E.stopPropagation(),E.preventDefault&&E.preventDefault(),(L=De(V))==null||L.hide(),(P=De($))==null||P.hide();const{SceneMode:T,Cartesian2:F}=Cesium;if(i.viewer.scene.mode===T.MORPHING)return!0;const N=E.currentTarget,j=N.getBoundingClientRect(),U=j.width/2,te=new F((j.right-j.left)/2,(j.bottom-j.top)/2);let ie;E instanceof MouseEvent?ie=new F(E.clientX-j.left,E.clientY-j.top):E instanceof TouchEvent&&(ie=new F(E.changedTouches[0].clientX-j.left,E.changedTouches[0].clientY-j.top));const K=F.subtract(ie,te,n),Z=F.magnitude(K)/U;if(Z<50/145)g(N,K);else if(Z<1)b(N,K);else return!0},G=E=>{const{Cartesian2:L,Cartesian3:P,defined:T,Ellipsoid:F,Matrix4:N,Ray:j,SceneMode:U,Transforms:te}=Cesium,{viewer:ie}=i,K=ie.scene,Z=K.camera,z=K.screenSpaceCameraController;if(K.mode===U.MORPHING||!z.enableInputs)return!0;if(K.mode===U.COLUMBUS_VIEW&&!z.enableTranslate||(K.mode===U.SCENE3D||K.mode===U.COLUMBUS_VIEW)&&(!z.enableLook||K.mode===U.SCENE3D&&!z.enableRotate))return;const Q=new L;Q.x=K.canvas.clientWidth/2,Q.y=K.canvas.clientHeight/2;const re=new j,X=Z.getPickRay(Q,re),J=K.globe.pick(X,K,s);if(!_r(J)||!T(J)){ie.camera.flyHome();return}const ae=Ze(i,"compassEvt");ae&&t("compassEvt",{type:"reset",camera:ie.camera,status:"start",target:E.currentTarget});const ne=te.eastNorthUpToFixedFrame(J,ie.scene.globe.ellipsoid),ce=P.subtract(J,Z.position,new P),le=hE.createTween(K,{destination:N.multiplyByPoint(ne,new P(0,0,P.magnitude(ce)),new P),direction:N.multiplyByPointAsVector(ne,new P(0,0,-1),new P),up:N.multiplyByPointAsVector(ne,new P(0,1,0),new P),duration:e.duration,complete:()=>{ae&&t("compassEvt",{type:"reset",camera:ie.camera,status:"end",target:E.currentTarget})},cancel:()=>{ae&&t("compassEvt",{type:"reset",camera:ie.camera,status:"cancel",target:E.currentTarget})}});K.tweens.add(le)},q=()=>{y.value=0,v.value=0},H=()=>{const{defined:E}=Cesium;E(i.viewer)?(l&&(l(),l=void 0),l=i.viewer.scene.postRender.addEventListener(function(){f.value!==i.viewer.scene.camera.heading&&(f.value=i.viewer.scene.camera.heading)})):l&&(l(),l=void 0)},g=(E,L)=>{const{Cartesian2:P,Cartesian3:T,defined:F,getTimestamp:N,Math:j,Matrix4:U,Ray:te,SceneMode:ie,Transforms:K}=Cesium;let Z=i.viewer.scene,z=Z.camera;const Q=Z.screenSpaceCameraController;if(Z.mode===ie.MORPHING||!Q.enableInputs)return;switch(Z.mode){case ie.COLUMBUS_VIEW:if(Q.enableLook)break;if(!Q.enableTranslate||!Q.enableTilt)return;break;case ie.SCENE3D:if(Q.enableLook)break;if(!Q.enableTilt||!Q.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!Q.enableTranslate)return;break}const re=Ze(i,"compassEvt");re&&t("compassEvt",{type:"orbit",camera:Z.camera,status:"start",target:E}),document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",h,!1),document.removeEventListener("touchmove",d,!1),document.removeEventListener("touchend",h,!1),F(p)&&i.viewer.clock.onTick.removeEventListener(p),d=void 0,h=void 0,p=void 0,w=N();const X=new P;X.x=Z.canvas.clientWidth/2,X.y=Z.canvas.clientHeight/2;const J=new te,ae=z.getPickRay(X,J),ne=Z.globe.pick(ae,Z,s);F(ne)?(C=K.eastNorthUpToFixedFrame(ne||new Cesium.Cartesian3,Z.globe.ellipsoid,a),M=!1):(C=K.eastNorthUpToFixedFrame(z.positionWC,Z.globe.ellipsoid,a),M=!0),p=function(le){const pe=N(),Ce=pe-w,Se=(y.value-.5)*2.5/1e3,Re=Ce*Se,Me=v.value+j.PI_OVER_TWO,Te=Math.cos(Me)*Re,$e=Math.sin(Me)*Re;Z=i.viewer.scene,z=Z.camera;const Le=U.clone(z.transform,r);z.lookAtTransform(C),M?(z.look(T.UNIT_Z,-Te),z.look(z.right,-$e)):(z.rotateLeft(Te),z.rotateUp($e)),z.lookAtTransform(Le),w=pe};function ce(le,pe){const Ce=Math.atan2(-le.y,le.x);v.value=j.zeroToTwoPi(Ce-j.PI_OVER_TWO);const Se=P.magnitude(le),Re=pe/2,Me=Math.min(Se/Re,1),Te=.5*Me*Me+.5;y.value=Te}d=function(le){const pe=E.getBoundingClientRect(),Ce=new P((pe.right-pe.left)/2,(pe.bottom-pe.top)/2);let Se;le instanceof MouseEvent?Se=new P(le.clientX-pe.left,le.clientY-pe.top):le instanceof TouchEvent&&(Se=new P(le.changedTouches[0].clientX-pe.left,le.changedTouches[0].clientY-pe.top));const Re=P.subtract(Se,Ce,n);ce(Re,pe.width),re&&t("compassEvt",{type:"orbit",camera:Z.camera,status:"changing",target:E})},h=function(le){document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",h,!1),document.removeEventListener("touchmove",d,!1),document.removeEventListener("touchend",h,!1),F(p)&&i.viewer.clock.onTick.removeEventListener(p),d=void 0,h=void 0,p=void 0,q(),re&&t("compassEvt",{type:"orbit",camera:Z.camera,status:"end",target:E})},document.addEventListener("mousemove",d,!1),document.addEventListener("mouseup",h,!1),document.addEventListener("touchmove",d,!1),document.addEventListener("touchend",h,!1),c=i.viewer.clock.onTick.addEventListener(p),ce(L,E.getBoundingClientRect().width)},b=(E,L)=>{if(!e.enableCompassOuterRing)return;const P=i.viewer.scene;let T=P.camera;const F=P.screenSpaceCameraController;if(P.mode===Cesium.SceneMode.MORPHING||P.mode===Cesium.SceneMode.SCENE2D||!F.enableInputs||!F.enableLook&&(P.mode===Cesium.SceneMode.COLUMBUS_VIEW||P.mode===Cesium.SceneMode.SCENE3D&&!F.enableRotate))return;document.removeEventListener("mousemove",_,!1),document.removeEventListener("touchmove",_,!1),document.removeEventListener("mouseup",S,!1),document.removeEventListener("touchend",S,!1);const{Cartesian2:N,Cartesian3:j,defined:U,Math:te,Matrix4:ie,Ray:K,Transforms:Z}=Cesium;_=void 0,S=void 0;const z=Ze(i,"compassEvt");z&&t("compassEvt",{type:"rotate",camera:P.camera,status:"start",target:E}),O=Math.atan2(-L.y,L.x);const Q=new N;Q.x=P.canvas.clientWidth/2,Q.y=P.canvas.clientHeight/2;const re=new K,X=T.getPickRay(Q,re),J=P.globe.pick(X,P,s);U(J)?I=Z.eastNorthUpToFixedFrame(J||new j,P.globe.ellipsoid,a):I=Z.eastNorthUpToFixedFrame(T.positionWC,P.globe.ellipsoid,a);let ae=ie.clone(T.transform,r);T.lookAtTransform(I),A=Math.atan2(T.position.y,T.position.x),j.magnitude(new j(T.position.x,T.position.y,0)),T.lookAtTransform(ae),_=function(ne){const ce=E.getBoundingClientRect(),le=new N((ce.right-ce.left)/2,(ce.bottom-ce.top)/2);let pe;ne instanceof MouseEvent?pe=new N(ne.clientX-ce.left,ne.clientY-ce.top):ne instanceof TouchEvent&&(pe=new N(ne.changedTouches[0].clientX-ce.left,ne.changedTouches[0].clientY-ce.top));const Ce=N.subtract(pe,le,n),Se=Math.atan2(-Ce.y,Ce.x)-O,Re=te.zeroToTwoPi(A-Se);T=i.viewer.scene.camera,ae=ie.clone(T.transform,r),T.lookAtTransform(I);const Me=Math.atan2(T.position.y,T.position.x);T.rotateRight(Re-Me),T.lookAtTransform(ae),z&&t("compassEvt",{type:"rotate",camera:P.camera,status:"changing",target:E})},S=function(ne){document.removeEventListener("mousemove",_,!1),document.removeEventListener("touchmove",_,!1),document.removeEventListener("mouseup",S,!1),document.removeEventListener("touchend",S,!1),_=void 0,S=void 0,z&&t("compassEvt",{type:"rotate",camera:P.camera,status:"end",target:E})},document.addEventListener("mousemove",_,!1),document.addEventListener("touchmove",_,!1),document.addEventListener("mouseup",S,!1),document.addEventListener("touchend",S,!1)};return{heading:f,orbitCursorAngle:v,orbitCursorOpacity:y,handleDoubleClick:G,handleMouseDown:D,resetRotater:q,onTooltipBeforeShow:E=>{(_!==void 0||d!==void 0)&&(E.cancel=!0)},viewerChange:H,load:async E=>(i.viewer=E,H(),!0),unload:async()=>(document.removeEventListener("mousemove",d,!1),document.removeEventListener("mouseup",h,!1),document.removeEventListener("touchmove",d,!1),document.removeEventListener("touchend",h,!1),c&&c(),l&&l(),!0),iconOuterTooltipRef:V,iconInnerTooltipRef:$}}const K$={...je,compassEvt:e=>!0},Ff=Df;var $f=de({name:"VcCompass",props:Ff,emits:K$,setup(e,t){var i;const n=fe();n.cesiumClass="VcCompass";const r=ht(e,t,n);if(r===void 0)return;const{t:a}=ri(),s=bi(n),{$services:l}=r,c=Y$(e,t,n),d=Sn(e),h=he(null),p=he(null),f=((i=s.proxy)==null?void 0:i.$options.name)==="VcNavigation",v=he(f),y=Ve({});Pe(()=>e,A=>{nt(()=>{n.mounted&&I()})},{deep:!0});const w=ge(()=>Object.assign({},Lf.innerOptions,e.innerOptions)),C=ge(()=>Object.assign({},Lf.outerOptions,e.outerOptions)),M=ge(()=>Object.assign({},Lf.markerOptions,e.markerOptions)),S=ge(()=>({transform:"translate(-50%,-50%) rotate(-"+c.heading.value+"rad)",WebkitTransform:"translate(-50%,-50%) rotate(-"+c.heading.value+"rad)",opacity:void 0,background:C.value.background,color:C.value.color})),_=ge(()=>({transform:"rotate(-"+c.orbitCursorAngle.value+"rad)",WebkitTransform:"rotate(-"+c.orbitCursorAngle.value+"rad)",opacity:c.orbitCursorOpacity.value,color:M.value.color})),O=ge(()=>({background:w.value.background,color:w.value.color}));n.createCesiumObject=async()=>h,n.mount=async()=>{var A;v.value=!0,nt(()=>{I()});const{viewer:V}=l;return(A=V.viewerWidgetResized)==null||A.raiseEvent({type:n.cesiumClass,status:"mounted",target:De(h)}),c.load(l.viewer)},n.unmount=async()=>{var A;v.value=!1;const{viewer:V}=l;return(A=V.viewerWidgetResized)==null||A.raiseEvent({type:n.cesiumClass,status:"unmounted",target:De(h)}),c.unload()};const I=()=>{var A;const V=d.style.value,$=(A=De(p))==null?void 0:A.$el;if($!==void 0){const D=$.getBoundingClientRect();V.width=`${D.width}px`,V.height=`${D.height}px`}if(typeof e.teleportToViewer=="undefined"||e.teleportToViewer){y.left=V.left,y.top=V.top,y.transform=V.transform;const D=d.attach.value;$!==void 0&&((D.bottom||D.top)&&!D.left&&!D.right&&(V.left="50%",V.transform="translate(-50%, 0)"),(D.left||D.right)&&!D.top&&!D.bottom&&(V.top="50%",V.transform="translate(0, -50%)"))}Object.assign(y,V)};return()=>{if(v.value){let A=[];A=Zn(t.slots.default,A),A.push(R(Yi,{ref:p,class:"vc-compass-outerRing absolute-center",style:S.value,size:C.value.size,dense:!0,round:!0,disabled:!e.enableCompassOuterRing},()=>[R(Yr,{size:C.value.size,name:C.value.icon}),C.value.tooltip?R(xi,{ref:c.iconOuterTooltipRef,...C.value.tooltip,onBeforeShow:c.onTooltipBeforeShow},()=>R("strong",{},C.value.tooltip.tip||a("vc.navigation.compass.outerTip"))):me("v-if")])),A.push(R(Yi,{class:"vc-compass-innerRing absolute-center",style:O.value,size:w.value.size,dense:!0,round:!0},()=>[R(Yr,{size:w.value.size,name:w.value.icon}),w.value.tooltip?R(xi,{ref:c.iconInnerTooltipRef,...w.value.tooltip,onBeforeShow:c.onTooltipBeforeShow},()=>R("strong",{},w.value.tooltip.tip||a("vc.navigation.compass.innerTip"))):me("v-if")])),A.push(_.value.opacity?R(Yi,{class:"vc-compass-rotation-marker absolute-center",dense:!0,round:!0},()=>[R(Yr,{size:M.value.size,name:M.value.icon,style:_.value})]):me("v-if"));const V=R("div",{ref:h,class:`vc-compass ${d.classes.value} ${e.customClass}`,style:y,onDblclick:c.handleDoubleClick,onMousedown:c.handleMouseDown,onMouseup:c.resetRotater,onTouchend:c.resetRotater,onTouchstart:c.handleMouseDown},A);return!f&&e.teleportToViewer?R(Ur,{to:l.viewer._element},V):V}else return me("v-if")}}});const jf={enableResetButton:{type:Boolean,default:!0},zoomAmount:{type:Number,default:2},duration:{type:Number,default:.5},durationReset:{type:Number},defaultResetView:{type:Object,default:()=>({position:{lng:105,lat:30,height:190595685e-1}})},overrideViewerCamera:{type:Boolean,default:!1},..._o,background:{type:String,default:"#3f4854"},border:{type:String,default:"solid 1px rgba(255, 255, 255, 0.2)"},borderRadius:{type:String,default:"100px"},direction:{type:String,default:"vertical",validator:e=>["vertical","horizontal"].includes(e)},zoomInOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-in",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomOutOptions:{type:Object,default:()=>({icon:"vc-icons-zoom-out",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},zoomResetOptions:{type:Object,default:()=>({icon:"vc-icons-reset",size:"24px",color:"#fff",background:"transparent",round:!0,flat:!0,label:void 0,stack:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},Nf=Gn(jf);function ej(e,{emit:t},i,n){const r=he(null),a=he(null),s=he(null),l=f=>{d(1/e.zoomAmount,f)},c=f=>{d(e.zoomAmount,f)},d=(f,v)=>{var y,w;(y=De(r))==null||y.hide(),(w=De(a))==null||w.hide();const{Cartesian3:C,defined:M,IntersectionTests:S,Ray:_,SceneMode:O}=Cesium,{viewer:I}=n;if(M(I)){const A=I.scene,V=A.screenSpaceCameraController;if(!V.enableInputs||!V.enableZoom||A.mode===O.COLUMBUS_VIEW&&!V.enableTranslate)return;const $=A.camera;let D;switch(A.mode){case O.MORPHING:break;case O.SCENE2D:{$.zoomIn($.positionCartographic.height*(1-f));break}default:{let G;if(M(I.trackedEntity)?G=new Cesium.Cartesian3:G=p(I.scene),Cesium.defined(G))D={direction:$.direction,up:$.up};else{const F=new _($.worldToCameraCoordinatesPoint(A.globe.ellipsoid.cartographicToCartesian($.positionCartographic)),$.directionWC);G=S.grazingAltitudeLocation(F,A.globe.ellipsoid),D={heading:$.heading,pitch:$.pitch,roll:$.roll}}const q=new C,H=C.subtract($.position,G,q),g=C.multiplyByScalar(H,f,H),b=C.add(G,g,G),E=f<1?"zoomIn":"zoomOut",L=v.currentTarget,P=Rp($.positionCartographic.height).toFixed(0),T=Ze(i,"zoomEvt");T&&t("zoomEvt",{type:E,camera:I.camera,status:"start",target:L,level:P}),Cesium.defined(I.trackedEntity)||A.mode===O.COLUMBUS_VIEW?$.position=b:$.flyTo({destination:b,orientation:D,duration:e.duration,convert:!1,complete:()=>{T&&t("zoomEvt",{type:E,camera:I.camera,status:"end",target:L,level:P})},cancel:()=>{T&&t("zoomEvt",{type:E,camera:I.camera,status:"cancel",target:L,level:P})}})}}}},h=f=>{var v;(v=De(s))==null||v.hide();const{viewer:y}=n;if(y.scene.screenSpaceCameraController.enableInputs)if(Cesium.defined(y.trackedEntity)){const w=y.trackedEntity;y.trackedEntity=void 0,y.trackedEntity=w}else{const w=Ze(i,"zoomEvt"),C=f==null?void 0:f.currentTarget,M=Rp(y.camera.positionCartographic.height).toFixed(0);w&&t("zoomEvt",{type:"zoomReset",camera:y.camera,status:"start",target:C,level:M});const S=()=>{w&&t("zoomEvt",{type:"zoomReset",camera:y.camera,status:"end",target:C,level:M})},_=()=>{w&&t("zoomEvt",{type:"zoomReset",camera:y.camera,status:"cancel",target:C,level:M})},O=e.defaultResetView,I={duration:e.durationReset,complete:S,cancel:_};e7(y,O,I)}},p=f=>{const{defined:v,IntersectionTests:y,Ray:w}=Cesium,C=new w(f.camera.positionWC,f.camera.directionWC),M=y.rayEllipsoid(C,f.globe.ellipsoid);return v(M)?w.getPoint(C,M.start):y.grazingAltitudeLocation(C,f.globe.ellipsoid)};return{zoomIn:l,zoomOut:c,zoomReset:h,zoomInTooltipRef:r,zoomOutTooltipRef:a,resetTooltipRef:s}}const tj={...je,zoomEvt:e=>!0},kf=jf;var Vf=de({name:"VcZoomControl",props:kf,emits:tj,setup(e,t){var i;const n=fe();n.cesiumClass="VcZoomControl",n.cesiumEvents=[];const r=ht(e,t,n);if(r===void 0)return;const{t:a}=ri(),{$services:s}=r,l=ej(e,t,n,s),c=Sn(e),d=he(null),h=he(null),p=he(null),f=he(null),v=((i=bi(n).proxy)==null?void 0:i.$options.name)==="VcNavigation",y=he(v),w=Ve({});Pe(()=>e,I=>{nt(()=>{n.mounted&&_()})},{deep:!0});const C=ge(()=>Object.assign({},Nf.zoomOutOptions,e.zoomOutOptions)),M=ge(()=>Object.assign({},Nf.zoomInOptions,e.zoomInOptions)),S=ge(()=>Object.assign({},Nf.zoomResetOptions,e.zoomResetOptions));n.createCesiumObject=async()=>{const{viewer:I}=s;if(e.overrideViewerCamera){const A=e.defaultResetView;Dp(I,A)}return d},n.mount=async()=>{var I;y.value=!0,nt(()=>{_()});const{viewer:A}=s;return(I=A.viewerWidgetResized)==null||I.raiseEvent({type:n.cesiumClass,status:"mounted",target:De(d)}),!0},n.unmount=async()=>{var I;y.value=!1;const{viewer:A}=s;return(I=A.viewerWidgetResized)==null||I.raiseEvent({type:n.cesiumClass,status:"unmounted",target:De(d)}),!0};const _=()=>{var I,A,V;const $=c.style.value;if(w.left=$.left,w.top=$.top,w.transform=$.transform,$.flexDirection=e.direction==="vertical"?"column":"row",$.background=e.background,$.borderRadius=e.borderRadius,$.border=e.border,!v){const D=(I=De(h))==null?void 0:I.$el,G=(A=De(p))==null?void 0:A.$el,q=(V=De(f))==null?void 0:V.$el;let H=0,g=0;if(D!==void 0){const b=D.getBoundingClientRect();e.direction==="horizontal"?(H+=b.width,g=b.height>g?b.height:g):(g+=b.height,H=b.width>H?b.width:H)}if(G!==void 0){const b=G.getBoundingClientRect();e.direction==="horizontal"?(H+=b.width,g=b.height>g?b.height:g):(g+=b.height,H=b.width>H?b.width:H)}if(q!==void 0){const b=q.getBoundingClientRect();e.direction==="horizontal"?(H+=b.width,g=b.height>g?b.height:g):(g+=b.height,H=b.width>H?b.width:H)}if($.width=`${H+4}px`,$.height=`${g+4}px`,typeof e.teleportToViewer=="undefined"||e.teleportToViewer){const b=c.attach.value;(b.bottom||b.top)&&!b.left&&!b.right&&($.left="50%",$.transform="translate(-50%, 0)"),(b.left||b.right)&&!b.top&&!b.bottom&&($.top="50%",$.transform="translate(0, -50%)")}}Object.assign(w,$)},O=(I,A)=>{var V,$,D;let G,q,H,g;A==="zoomIn"?(G=h,q=l.zoomInTooltipRef,H=((V=I.tooltip)==null?void 0:V.tip)||a("vc.navigation.zoomCotrol.zoomInTip"),g=l.zoomIn):A==="zoomOut"?(G=f,q=l.zoomOutTooltipRef,H=(($=I.tooltip)==null?void 0:$.tip)||a("vc.navigation.zoomCotrol.zoomOutTip"),g=l.zoomOut):A==="zoomReset"&&(G=p,q=l.resetTooltipRef,H=((D=I.tooltip)==null?void 0:D.tip)||a("vc.navigation.zoomCotrol.zoomResetTip"),g=l.zoomReset);const b=[];return b.push(R(Yr,{name:I.icon,size:I.size})),b.push(R("div",null,I.label)),I.tooltip?b.push(R(xi,{ref:q,...I.tooltip},()=>R("strong",null,H))):b.push(me("v-if")),R(Yi,{class:`vc-${ye(A)}`,ref:G,size:I.size,flat:I.flat,stack:I.stack,round:I.round,dense:!0,style:{color:I.color,background:I.background},onClick:g},()=>Zn(t.slots.default,b))};return Object.assign(n.proxy,{zoomIn:I=>l.zoomIn(I),zoomOut:I=>l.zoomOut(I),zoomReset:I=>l.zoomReset(I)}),()=>{if(y.value){const I=[];I.push(R("li",null,O(M.value,"zoomIn"))),e.enableResetButton?I.push(R("li",null,O(S.value,"zoomReset"))):I.push(me("v-if")),I.push(R("li",null,O(C.value,"zoomOut")));const A=R("div",{ref:d,class:`vc-zoom-control ${c.classes.value} ${e.customClass}`,style:w},R("ul",{class:"vc-list"},I));return!v&&e.teleportToViewer?R(Ur,{to:s.viewer._element},A):A}else return me("v-if")}}});const ij=de({name:"VcPrintView",props:{options:Object},setup(e){const t=he(!1),i=he(!1),n=fe();n.cesiumClass="VcPrintView";const{t:r}=ri(),a=()=>{var c,d;if(t.value)return;const h=(c=e.options)==null?void 0:c.printWindow.document.getElementsByTagName("img");if(h.length===0)return;let p=!0;for(let f=0;p&&f<h.length;++f)p=h[f].complete;p&&(l(),t.value=p,t.value&&!i.value&&((d=e.options)!=null&&d.readyCallback&&e.options.readyCallback(e.options.printWindow),i.value=!0))};let s;const l=()=>{s&&s()};return Es(()=>{var c;const d=(c=e.options)==null?void 0:c.printWindow,h=window,p=d==null?void 0:d.setInterval(a,200),f=h.setInterval(a,200);s=()=>{d.clearInterval(p),h.clearInterval(f),s=void 0}}),Vt(()=>{l()}),()=>{var c,d,h,p,f,v;const y=[];if(y.push(R("p",{},R("img",{src:(c=e.options)==null?void 0:c.image,alt:r("vc.navigation.screenshot"),class:"vc-map-image"}))),(d=e.options)!=null&&d.credits.length&&(h=e.options)!=null&&h.showCredit?y.push(R("h1",{},r("vc.navigation.credit"))):y.push(me("v-if")),(p=e.options)!=null&&p.credits.length&&(f=e.options)!=null&&f.showCredit){const w=[];(v=e.options)==null||v.credits.forEach(C=>{w.push(R("li",{innerHTML:C}))}),y.push(R("ul",{},w))}else y.push(me("v-if"));return R("div",{},y)}}}),nj=`
  .background {
    width: 100%;
    fill: rgba(255, 255, 255, 1.0);
  }

  .map-image {
    max-width: 95vw;
    max-height: 95vh;
  }

  .layer-legends {
    display: inline;
    float: left;
    padding-left: 20px;
    padding-right: 20px;
  }

  .layer-title {
    font-weight: bold;
  }

  h1, h2, h3 {
    clear: both;
  }
`,rj=e=>{const{printWindow:t=window.open(),closeCallback:i,title:n}=e;i&&t.addEventListener("unload",()=>{i(t)}),t.document.open(),t.document.close(),t.document.head.innerHTML=`
    <meta charset="UTF-8">
    <title>${e.title}</title>
    <style>${nj}</style>
    `,t.document.body.innerHTML='<div id="print"></div>',e.printWindow=e.printWindow||t,DD(ij,{options:e}).mount(t.document.getElementById("print"))};var gE={showCredit:{type:Boolean,default:!0},printAutomatically:{type:Boolean,default:!1},showPrintView:{type:Boolean,default:!0},downloadAutomatically:{type:Boolean,default:!1},..._o,icon:{type:String,default:"vc-icons-capture"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},screenshotName:String,customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};function oj(e){const t=al();let i=0;const n=setTimeout(function(){t.reject(!1)},1e4);function r(){clearTimeout(n)}function a(){i<=0&&t.resolve()}return e.matchMedia&&e.matchMedia("print").addListener(function(s){r(),s.matches?++i:(--i,a())}),e.onbeforeprint=function(){r(),++i},e.onafterprint=function(){r(),--i,a()},e.document.execCommand("print",!0,null)||e.print(),t.promise}const aj={...je,printEvt:e=>!0},zf=gE;var Gf=de({name:"VcPrint",props:zf,emits:aj,setup(e,t){var i;const n=fe();n.cesiumClass="VcPrint",n.cesiumEvents=[];const r=ht(e,t,n);if(r===void 0)return;const{t:a}=ri(),{$services:s}=r,l=he(null),c=he(null),d=he(null),h=Sn(e),p=he(!1),f=((i=bi(n).proxy)==null?void 0:i.$options.name)==="VcNavigation",v=he(f),y=Ve({});Pe(()=>e,A=>{nt(()=>{n.mounted&&w()})},{deep:!0}),n.createCesiumObject=async()=>l,n.mount=async()=>{var A;v.value=!0,nt(()=>{w()});const{viewer:V}=s;return(A=V.viewerWidgetResized)==null||A.raiseEvent({type:n.cesiumClass,status:"mounted",target:De(l)}),!0},n.unmount=async()=>{var A;v.value=!1;const{viewer:V}=s;return(A=V.viewerWidgetResized)==null||A.raiseEvent({type:n.cesiumClass,status:"unmounted",target:De(l)}),!0};const w=()=>{var A;const V=h.style.value;if(y.left=V.left,y.top=V.top,y.transform=V.transform,!f){const $=h.attach.value;((A=De(d))==null?void 0:A.$el)!==void 0&&(typeof e.teleportToViewer=="undefined"||e.teleportToViewer)&&(($.bottom||$.top)&&!$.left&&!$.right&&(V.left="50%",V.transform="translate(-50%, 0)"),($.left||$.right)&&!$.top&&!$.bottom&&(V.top="50%",V.transform="translate(0, -50%)"))}Object.assign(y,V)},C=()=>{var A;(A=De(c))==null||A.hide();const{viewer:V}=s;K8(V).then($=>{if(e.downloadAutomatically){const D=document.createElement("a");D.download=e.screenshotName||a("vc.navigation.print.screenshot"),D.style.display="none",D.href=$,document.body.appendChild(D),D.click(),document.body.removeChild(D)}(e.printAutomatically||e.showPrintView)&&(e.showPrintView?S($):e.printAutomatically&&M($)),Ze(n,"printEvt")&&t.emit("printEvt",{type:"capture",image:$,status:"end"})})},M=A=>{_(!0,!0,A)},S=A=>{_(!1,!1,A)},_=(A,V,$)=>{p.value=!0;let D;A&&(D=document.createElement("iframe"),document.body.appendChild(D));const{viewer:G}=s;rj({image:$,showCredit:e.showCredit,credits:O(G),printWindow:D?D.contentWindow:void 0,title:a("vc.navigation.print.printViewTitle"),readyCallback:q=>{V&&oj(q).catch(H=>{r.logger.warn(H)}).then(()=>{D&&document.body.removeChild(D),A&&(p.value=!1)})},closeCallback:q=>{A&&(p.value=!1)}}),A||(p.value=!1)},O=A=>A.scene.frameState.creditDisplay._currentFrameCredits.screenCredits.values.concat(A.scene.frameState.creditDisplay._currentFrameCredits.lightboxCredits.values).map(V=>V.html),I=A=>{p.value&&(A.cancel=!0)};return()=>{if(v.value){const A=[];A.push(R(Yr,{name:e.icon,size:e.size})),A.push(R("div",null,e.label)),Gt(e.tooltip)?A.push(R(xi,{ref:c,onBeforeShow:I,...e.tooltip},()=>R("strong",null,Gt(e.tooltip)&&e.tooltip.tip||a("vc.navigation.print.printTip")))):A.push(me("v-if"));const V=[R(Yi,{ref:d,size:e.size,disabled:p.value,flat:e.flat,stack:e.stack,round:e.round,style:{color:e.color,background:e.background},dense:!0,onClick:C},()=>A)],$=R("div",{ref:l,class:`vc-print ${h.classes.value} ${e.customClass}`,style:y},V);return!f&&e.teleportToViewer?R(Ur,{to:s.viewer._element},$):$}else return me("v-if")}}}),Jc={exports:{}};Jc.exports,function(e,t){(function(i,n){e.exports=n()})(En,function(){function i(p){var f=[];return p.AMapUI&&f.push(n(p.AMapUI)),p.Loca&&f.push(r(p.Loca)),Promise.all(f)}function n(p){return new Promise(function(f,v){var y=[];if(p.plugins)for(var w=0;w<p.plugins.length;w+=1)s.AMapUI.plugins.indexOf(p.plugins[w])==-1&&y.push(p.plugins[w]);if(l.AMapUI===a.failed)v("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(l.AMapUI===a.notload){l.AMapUI=a.loading,s.AMapUI.version=p.version||s.AMapUI.version,w=s.AMapUI.version;var C=document.body||document.head,M=document.createElement("script");M.type="text/javascript",M.src="https://webapi.amap.com/ui/"+w+"/main.js",M.onerror=function(S){l.AMapUI=a.failed,v("\u8BF7\u6C42 AMapUI \u5931\u8D25")},M.onload=function(){if(l.AMapUI=a.loaded,y.length)window.AMapUI.loadUI(y,function(){for(var S=0,_=y.length;S<_;S++){var O=y[S].split("/").slice(-1)[0];window.AMapUI[O]=arguments[S]}for(f();c.AMapUI.length;)c.AMapUI.splice(0,1)[0]()});else for(f();c.AMapUI.length;)c.AMapUI.splice(0,1)[0]()},C.appendChild(M)}else l.AMapUI===a.loaded?p.version&&p.version!==s.AMapUI.version?v("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):y.length?window.AMapUI.loadUI(y,function(){for(var S=0,_=y.length;S<_;S++){var O=y[S].split("/").slice(-1)[0];window.AMapUI[O]=arguments[S]}f()}):f():p.version&&p.version!==s.AMapUI.version?v("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):c.AMapUI.push(function(S){S?v(S):y.length?window.AMapUI.loadUI(y,function(){for(var _=0,O=y.length;_<O;_++){var I=y[_].split("/").slice(-1)[0];window.AMapUI[I]=arguments[_]}f()}):f()})})}function r(p){return new Promise(function(f,v){if(l.Loca===a.failed)v("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(l.Loca===a.notload){l.Loca=a.loading,s.Loca.version=p.version||s.Loca.version;var y=s.Loca.version,w=s.AMap.version.startsWith("2"),C=y.startsWith("2");if(w&&!C||!w&&C)v("JSAPI \u4E0E Loca \u7248\u672C\u4E0D\u5BF9\u5E94\uFF01\uFF01");else{w=s.key,C=document.body||document.head;var M=document.createElement("script");M.type="text/javascript",M.src="https://webapi.amap.com/loca?v="+y+"&key="+w,M.onerror=function(S){l.Loca=a.failed,v("\u8BF7\u6C42 AMapUI \u5931\u8D25")},M.onload=function(){for(l.Loca=a.loaded,f();c.Loca.length;)c.Loca.splice(0,1)[0]()},C.appendChild(M)}}else l.Loca===a.loaded?p.version&&p.version!==s.Loca.version?v("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):f():p.version&&p.version!==s.Loca.version?v("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):c.Loca.push(function(S){S?v(S):v()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var a;(function(p){p.notload="notload",p.loading="loading",p.loaded="loaded",p.failed="failed"})(a||(a={}));var s={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},c={AMap:[],AMapUI:[],Loca:[]},d=[],h=function(p){typeof p=="function"&&(l.AMap===a.loaded?p(window.AMap):d.push(p))};return{load:function(p){return new Promise(function(f,v){if(l.AMap==a.failed)v("");else if(l.AMap==a.notload){var y=p.key,w=p.version,C=p.plugins;y?(window.AMap&&location.host!=="lbs.amap.com"&&v("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),s.key=y,s.AMap.version=w||s.AMap.version,s.AMap.plugins=C||s.AMap.plugins,l.AMap=a.loading,w=document.body||document.head,window.___onAPILoaded=function(S){if(delete window.___onAPILoaded,S)l.AMap=a.failed,v(S);else for(l.AMap=a.loaded,i(p).then(function(){f(window.AMap)}).catch(v);d.length;)d.splice(0,1)[0]()},C=document.createElement("script"),C.type="text/javascript",C.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+s.AMap.version+"&key="+y+"&plugin="+s.AMap.plugins.join(","),C.onerror=function(S){l.AMap=a.failed,v(S)},w.appendChild(C)):v("\u8BF7\u586B\u5199key")}else if(l.AMap==a.loaded)if(p.key&&p.key!==s.key)v("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(p.version&&p.version!==s.AMap.version)v("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(y=[],p.plugins)for(w=0;w<p.plugins.length;w+=1)s.AMap.plugins.indexOf(p.plugins[w])==-1&&y.push(p.plugins[w]);y.length?window.AMap.plugin(y,function(){i(p).then(function(){f(window.AMap)}).catch(v)}):i(p).then(function(){f(window.AMap)}).catch(v)}else if(p.key&&p.key!==s.key)v("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(p.version&&p.version!==s.AMap.version)v("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var M=[];if(p.plugins)for(w=0;w<p.plugins.length;w+=1)s.AMap.plugins.indexOf(p.plugins[w])==-1&&M.push(p.plugins[w]);h(function(){M.length?window.AMap.plugin(M,function(){i(p).then(function(){f(window.AMap)}).catch(v)}):i(p).then(function(){f(window.AMap)}).catch(v)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,s={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},l={AMap:a.notload,AMapUI:a.notload,Loca:a.notload},c={AMap:[],AMapUI:[],Loca:[]}}}})}(Jc,Jc.exports);var sj=Jc.exports,lj=Mp(sj),yE={geolocation:{type:Object,default:()=>({enableHighAccuracy:!0,timeout:5e3,maximumAge:0})},amap:Object,id:{type:String,default:"My Location"},pointColor:{type:[Array,Object,String],default:"#08ABD5"},pixelSize:{type:Number,default:25/2},outlineWidth:{type:Number,default:3},outlineColor:{type:[Array,Object,String],default:"#ffffff"},level:{type:Number,default:6},duration:{type:Number,default:3},factor:{type:Number,default:.01},maximumHeight:Number,hpr:{type:Array,default:()=>[0,0,3e3]},customAPI:Function,customApi:Function,description:Function,..._o,icon:{type:String,default:"vc-icons-geolocation"},size:{type:String,default:"24px"},color:{type:String,default:"#3f4854"},background:{type:String,default:"#fff"},round:{type:Boolean,default:!0},flat:{type:Boolean,default:!1},label:String,stack:{type:Boolean,default:!1},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},loadingType:{type:String,default:"puff"},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const uj={...je,locationEvt:e=>!0},Uf=yE;var Hf=de({name:"VcMyLocation",props:Uf,emits:uj,setup(e,t){var i;const n=fe();n.cesiumClass="VcMyLocation",n.cesiumEvents=[];const r=ht(e,t,n);if(r===void 0)return;const{$services:a}=r,{t:s}=ri(),l=he(null),c=he(null),d=he(null),h=he(!1),p=Sn(e),f=((i=bi(n).proxy)==null?void 0:i.$options.name)==="VcNavigation",v=he(f),y=Ve({});let w,C;Pe(()=>e,D=>{nt(()=>{n.mounted&&S()})},{deep:!0});const M=ge(()=>h.value?s("vc.navigation.myLocation.positioning"):Gt(e.tooltip)&&e.tooltip.tip||s("vc.navigation.myLocation.myLocationTip"));n.createCesiumObject=async()=>{const{viewer:D}=a,{CustomDataSource:G}=Cesium,q=D.dataSources.getByName("__vc-myLocation__");q.length?w=q[0]:D.dataSources.add(new G("__vc-myLocation__")).then(b=>{w=b});let H;if(e.amap&&e.amap.key){const b=e.amap.options;H=new Promise((E,L)=>{var P,T;lj.load({key:(P=e.amap)==null?void 0:P.key,version:(T=e.amap)==null?void 0:T.version,plugins:["AMap.Geolocation"]}).then(F=>{C=new F.Geolocation(b),E(C)}).catch(F=>{r.logger.error(F),L(F)})})}const g=new Promise((b,E)=>{nt(()=>{b(De(l))})});return Promise.all([g,H]).then(b=>b[0])},n.mount=async()=>{var D;v.value=!0,nt(()=>{S()});const{viewer:G}=a;return(D=G.viewerWidgetResized)==null||D.raiseEvent({type:n.cesiumClass,status:"mounted",target:De(l)}),!0},n.unmount=async()=>{var D;v.value=!1;const{viewer:G}=a;if(C){const q=document.getElementsByTagName("script"),H=[];for(const g of q)g.src.indexOf("/webapi.amap.com/maps")>-1&&H.push(g);H.forEach(g=>{document.getElementsByTagName("body")[0].removeChild(g)})}return(D=G.viewerWidgetResized)==null||D.raiseEvent({type:n.cesiumClass,status:"unmounted",target:De(l)}),G.dataSources.remove(w,!0)};const S=()=>{var D;const G=p.style.value;if(y.left=G.left,y.top=G.top,y.transform=G.transform,!f){const q=p.attach.value;((D=De(d))==null?void 0:D.$el)!==void 0&&(typeof e.teleportToViewer=="undefined"||e.teleportToViewer)&&((q.bottom||q.top)&&!q.left&&!q.right&&(G.left="50%",G.transform="translate(-50%, 0)"),(q.left||q.right)&&!q.top&&!q.bottom&&(G.top="50%",G.transform="translate(0, -50%)"))}Object.assign(y,G)},_=()=>{var D;(D=De(c))==null||D.hide(),h.value=!0;const G=e.customApi||e.customAPI;if(hi(G)){const q=G(A);O(q)}else C&&e.amap&&e.amap.key?C.getCurrentPosition((q,H)=>{var g;if(q==="complete"){let b=[H.position.lng,H.position.lat];(g=e.amap)!=null&&g.transformToWGS84&&(b=Um(b[0],b[1])),O({lng:b[0],lat:b[1],address:H.formattedAddress},H)}else A(s("vc.navigation.myLocation.fail"),H.message)}):e.geolocation?navigator.geolocation.getCurrentPosition(q=>{O({lng:q.coords.longitude,lat:q.coords.latitude},q)},A,{enableHighAccuracy:e.geolocation.enableHighAccuracy,timeout:e.geolocation.timeout,maximumAge:e.geolocation.maximumAge}):A(s("vc.navigation.myLocation.fail"))},O=(D,G)=>{var q;const H=D.lng,g=D.lat,b=D.address,{Rectangle:E,sampleTerrain:L,defined:P,SceneMode:T}=Cesium,{viewer:F}=a;w.entities.removeAll();const N=w.entities.add({id:e.id,position:Ot([H,g],F.scene.globe.ellipsoid),point:{color:Je(e.pointColor),pixelSize:e.pixelSize,outlineWidth:e.outlineWidth,outlineColor:Je(e.outlineColor)},properties:{...G},description:((q=e.description)==null?void 0:q.call(this,D,G))||I({[s("vc.navigation.myLocation.lng")]:H,[s("vc.navigation.myLocation.lat")]:g,[s("vc.navigation.myLocation.address")]:b})}),j=Ze(n,"locationEvt");j&&t.emit("locationEvt",{type:"location",position:D,detail:G,entity:N});const U={duration:e.duration};if(P(e.maximumHeight)&&(U.maximumHeight=e.maximumHeight),P(e.hpr)&&$t(e.hpr)&&(U.offset=new Cesium.HeadingPitchRange(e.hpr[0],e.hpr[1],e.hpr[2])),F.scene.mode===T.SCENE2D||F.scene.mode===T.COLUMBUS_VIEW)return F.flyTo(N,U).then(()=>{h.value=!1,j&&t.emit("locationEvt",{type:"zoomIn",camera:F.camera,status:"end"})});const te=e.factor,ie=E.fromDegrees(H-te,g-te,H+te,g+te),K=F.scene.camera,Z=K.getRectangleCameraCoordinates(ie),z=F.scene.globe.ellipsoid.cartesianToCartographic(Z),Q=F.scene.globe.terrainProvider,re=e.level,X=[E.center(ie)];return L(Q,re,X).then(function(J){const ae={longitude:z.longitude,latitude:z.latitude,height:z.height+J[0].height},ne=F.scene.globe.ellipsoid.cartographicToCartesian(ae);j&&t.emit("locationEvt",{type:"zoomIn",camera:F.camera,status:"start"}),K.flyTo({duration:e.duration,destination:ne,complete:()=>{h.value=!1,j&&t.emit("locationEvt",{type:"zoomIn",camera:F.camera,status:"end"})},cancel:()=>{h.value=!1,j&&t.emit("locationEvt",{type:"zoomIn",camera:F.camera,status:"cancel"})}})})},I=(D,G)=>{let q="";D instanceof Cesium.PropertyBag&&(D=D.getValue(Cesium.JulianDate.now()));for(let H in D)if(Object.prototype.hasOwnProperty.call(D,H)){if(H===G)continue;let g=D[H];typeof g=="object"&&(g=I(g)),H=H.replace(/_/g," "),Cesium.defined(g)&&(q+="<tr><th>"+H+"</th><td>"+g+"</td></tr>")}return q.length>0&&(q='<table class="cesium-infoBox-defaultTable"><tbody>'+q+"</tbody></table>"),q},A=(...D)=>{h.value=!1,r.logger.error(...D)},V=()=>{switch(e.loadingType){case"bars":return dl;case"ios":return zc;case"orbit":return Gc;case"oval":return Uc;case"puff":return Hc;case"tail":return Wc;default:return dl}},$=D=>{h.value&&(D.cancel=!0)};return()=>{if(v.value){const D=[];D.push(R(Yr,{name:e.icon,size:e.size})),D.push(R("div",null,e.label)),Gt(e.tooltip)?D.push(R(xi,{ref:c,onBeforeShow:$,...e.tooltip},()=>R("strong",null,M.value))):D.push(me("v-if"));const G=R("div",{ref:l,class:`vc-my-location ${p.classes.value} ${e.customClass}`,style:y},[R(Yi,{ref:d,size:e.size,flat:e.flat,stack:e.stack,round:e.round,loading:h.value,dense:!0,style:{color:e.color,background:e.background},onClick:_},{default:()=>D,loading:()=>R(V())})]);return!f&&e.teleportToViewer?R(Ur,{to:a.viewer._element},G):G}else return me("v-if")}}});function cj(e,t,i){const n={latitude:"",longitude:"",elevation:""},{defaultValue:r,defined:a}=Cesium,s=r(i,{}),l=r(s.decimal,5);return s.rangeType===0?(n.latitude=Math.abs(t).toFixed(l)+"\xB0"+(t<0?"S":"N"),n.longitude=Math.abs(e).toFixed(l)+"\xB0"+(e<0?"W":"E")):s.rangeType===1?(n.latitude=t.toFixed(l)+"\xB0",n.longitude=e.toFixed(l)+"\xB0"):s.rangeType===2&&(n.latitude=t.toFixed(l)+"\xB0",n.longitude=(e<0?360+e:e).toFixed(l)+"\xB0"),a(s.height)?n.elevation=Math.round(s.height)+(a(s.errorBar)?"\xB1"+Math.round(s.errorBar):"")+"m":n.elevation="",n}function dj(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var sa=1,la=2,Ha=3,hj=4,Wf=5,bE=6378137,pj=6356752314e-3,CE=.0066943799901413165,ml=484813681109536e-20,Ae=Math.PI/2,mj=.16666666666666666,fj=.04722222222222222,vj=.022156084656084655,ke=1e-10,$i=.017453292519943295,Sr=57.29577951308232,Mt=Math.PI/4,fl=Math.PI*2,pi=3.14159265359,hn={};hn.greenwich=0,hn.lisbon=-9.131906111111,hn.paris=2.337229166667,hn.bogota=-74.080916666667,hn.madrid=-3.687938888889,hn.rome=12.452333333333,hn.bern=7.439583333333,hn.jakarta=106.807719444444,hn.ferro=-17.666666666667,hn.brussels=4.367975,hn.stockholm=18.058277777778,hn.athens=23.7163375,hn.oslo=10.722916666667;var gj={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},_E=/[\s_\-\/\(\)]/g;function wo(e,t){if(e[t])return e[t];for(var i=Object.keys(e),n=t.toLowerCase().replace(_E,""),r=-1,a,s;++r<i.length;)if(a=i[r],s=a.toLowerCase().replace(_E,""),s===n)return e[a]}function qf(e){var t={},i=e.split("+").map(function(l){return l.trim()}).filter(function(l){return l}).reduce(function(l,c){var d=c.split("=");return d.push(!0),l[d[0].toLowerCase()]=d[1],l},{}),n,r,a,s={proj:"projName",datum:"datumCode",rf:function(l){t.rf=parseFloat(l)},lat_0:function(l){t.lat0=l*$i},lat_1:function(l){t.lat1=l*$i},lat_2:function(l){t.lat2=l*$i},lat_ts:function(l){t.lat_ts=l*$i},lon_0:function(l){t.long0=l*$i},lon_1:function(l){t.long1=l*$i},lon_2:function(l){t.long2=l*$i},alpha:function(l){t.alpha=parseFloat(l)*$i},gamma:function(l){t.rectified_grid_angle=parseFloat(l)},lonc:function(l){t.longc=l*$i},x_0:function(l){t.x0=parseFloat(l)},y_0:function(l){t.y0=parseFloat(l)},k_0:function(l){t.k0=parseFloat(l)},k:function(l){t.k0=parseFloat(l)},a:function(l){t.a=parseFloat(l)},b:function(l){t.b=parseFloat(l)},r_a:function(){t.R_A=!0},zone:function(l){t.zone=parseInt(l,10)},south:function(){t.utmSouth=!0},towgs84:function(l){t.datum_params=l.split(",").map(function(c){return parseFloat(c)})},to_meter:function(l){t.to_meter=parseFloat(l)},units:function(l){t.units=l;var c=wo(gj,l);c&&(t.to_meter=c.to_meter)},from_greenwich:function(l){t.from_greenwich=l*$i},pm:function(l){var c=wo(hn,l);t.from_greenwich=(c||parseFloat(l))*$i},nadgrids:function(l){l==="@null"?t.datumCode="none":t.nadgrids=l},axis:function(l){var c="ewnsud";l.length===3&&c.indexOf(l.substr(0,1))!==-1&&c.indexOf(l.substr(1,1))!==-1&&c.indexOf(l.substr(2,1))!==-1&&(t.axis=l)},approx:function(){t.approx=!0}};for(n in i)r=i[n],n in s?(a=s[n],typeof a=="function"?a(r):t[a]=r):t[n]=r;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var vl=1,wE=2,xE=3,Xc=4,EE=5,Zf=-1,yj=/\s/,bj=/[A-Za-z]/,Cj=/[A-Za-z84_]/,Yc=/[,\]]/,PE=/[\d\.E\-\+]/;function Kr(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=vl}Kr.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==Xc)for(;yj.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case vl:return this.neutral(e);case wE:return this.keyword(e);case Xc:return this.quoted(e);case EE:return this.afterquote(e);case xE:return this.number(e);case Zf:return}},Kr.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=Xc;return}if(Yc.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)},Kr.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=vl;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=vl,this.currentObject=this.stack.pop(),this.currentObject||(this.state=Zf);return}},Kr.prototype.number=function(e){if(PE.test(e)){this.word+=e;return}if(Yc.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)},Kr.prototype.quoted=function(e){if(e==='"'){this.state=EE;return}this.word+=e},Kr.prototype.keyword=function(e){if(Cj.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=vl;return}if(Yc.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)},Kr.prototype.neutral=function(e){if(bj.test(e)){this.word=e,this.state=wE;return}if(e==='"'){this.word="",this.state=Xc;return}if(PE.test(e)){this.word=e,this.state=xE;return}if(Yc.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)},Kr.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===Zf)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function _j(e){var t=new Kr(e);return t.output()}function OE(e,t,i){Array.isArray(t)&&(i.unshift(t),t=null);var n=t?{}:e,r=i.reduce(function(a,s){return Wa(s,a),a},n);t&&(e[t]=r)}function Wa(e,t){if(!Array.isArray(e)){t[e]=!0;return}var i=e.shift();if(i==="PARAMETER"&&(i=e.shift()),e.length===1){if(Array.isArray(e[0])){t[i]={},Wa(e[0],t[i]);return}t[i]=e[0];return}if(!e.length){t[i]=!0;return}if(i==="TOWGS84"){t[i]=e;return}if(i==="AXIS"){i in t||(t[i]=[]),t[i].push(e);return}Array.isArray(i)||(t[i]={});var n;switch(i){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[i]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&Wa(e[2],t[i]);return;case"SPHEROID":case"ELLIPSOID":t[i]={name:e[0],a:e[1],rf:e[2]},e.length===4&&Wa(e[3],t[i]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],OE(t,i,e);return;default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return Wa(e,t[i]);return OE(t,i,e)}}var wj=.017453292519943295;function xj(e,t){var i=t[0],n=t[1];!(i in e)&&n in e&&(e[i]=e[n],t.length===3&&(e[i]=t[2](e[i])))}function Tr(e){return e*wj}function Ej(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",i=0,n=e.AXIS.length;i<n;++i){var r=[e.AXIS[i][0].toLowerCase(),e.AXIS[i][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?t+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?t+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?t+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var a=e.GEOGCS;e.type==="GEOGCS"&&(a=e),a&&(a.DATUM?e.datumCode=a.DATUM.name.toLowerCase():e.datumCode=a.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),a.DATUM&&a.DATUM.SPHEROID&&(e.ellps=a.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=a.DATUM.SPHEROID.a,e.rf=parseFloat(a.DATUM.SPHEROID.rf,10)),a.DATUM&&a.DATUM.TOWGS84&&(e.datum_params=a.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function s(d){var h=e.to_meter||1;return d*h}var l=function(d){return xj(e,d)},c=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",Tr],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",Tr],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",Tr],["lat0","latitude_of_origin",Tr],["lat0","standard_parallel_1",Tr],["lat1","standard_parallel_1",Tr],["lat2","standard_parallel_2",Tr],["azimuth","Azimuth"],["alpha","azimuth",Tr],["srsCode","name"]];c.forEach(l),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")?(e.lat0=Tr(e.lat1>0?90:-90),e.lat_ts=e.lat1):!e.lat_ts&&e.lat0&&e.projName==="Polar_Stereographic"&&(e.lat_ts=e.lat0,e.lat0=Tr(e.lat0>0?90:-90))}function ME(e){var t=_j(e),i=t.shift(),n=t.shift();t.unshift(["name",n]),t.unshift(["type",i]);var r={};return Wa(t,r),Ej(r),r}function Ki(e){var t=this;if(arguments.length===2){var i=arguments[1];typeof i=="string"?i.charAt(0)==="+"?Ki[e]=qf(arguments[1]):Ki[e]=ME(arguments[1]):Ki[e]=i}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(n){Array.isArray(n)?Ki.apply(t,n):Ki(n)});if(typeof e=="string"){if(e in Ki)return Ki[e]}else"EPSG"in e?Ki["EPSG:"+e.EPSG]=e:"ESRI"in e?Ki["ESRI:"+e.ESRI]=e:"IAU2000"in e?Ki["IAU2000:"+e.IAU2000]=e:console.log(e);return}}dj(Ki);function Pj(e){return typeof e=="string"}function Oj(e){return e in Ki}var Mj=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function Sj(e){return Mj.some(function(t){return e.indexOf(t)>-1})}var Tj=["3857","900913","3785","102113"];function Ij(e){var t=wo(e,"authority");if(t){var i=wo(t,"epsg");return i&&Tj.indexOf(i)>-1}}function Aj(e){var t=wo(e,"extension");if(t)return wo(t,"proj4")}function Dj(e){return e[0]==="+"}function Lj(e){if(Pj(e)){if(Oj(e))return Ki[e];if(Sj(e)){var t=ME(e);if(Ij(t))return Ki["EPSG:3857"];var i=Aj(t);return i?qf(i):t}if(Dj(e))return qf(e)}else return e}function SE(e,t){e=e||{};var i,n;if(!t)return e;for(n in t)i=t[n],i!==void 0&&(e[n]=i);return e}function Ir(e,t,i){var n=e*t;return i/Math.sqrt(1-n*n)}function gl(e){return e<0?-1:1}function Ue(e){return Math.abs(e)<=pi?e:e-gl(e)*fl}function pr(e,t,i){var n=e*i,r=.5*e;return n=Math.pow((1-n)/(1+n),r),Math.tan(.5*(Ae-t))/n}function yl(e,t){for(var i=.5*e,n,r,a=Ae-2*Math.atan(t),s=0;s<=15;s++)if(n=e*Math.sin(a),r=Ae-2*Math.atan(t*Math.pow((1-n)/(1+n),i))-a,a+=r,Math.abs(r)<=1e-10)return a;return-9999}function Bj(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=Ir(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function Rj(e){var t=e.x,i=e.y;if(i*Sr>90&&i*Sr<-90&&t*Sr>180&&t*Sr<-180)return null;var n,r;if(Math.abs(Math.abs(i)-Ae)<=ke)return null;if(this.sphere)n=this.x0+this.a*this.k0*Ue(t-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(Mt+.5*i));else{var a=Math.sin(i),s=pr(this.e,i,a);n=this.x0+this.a*this.k0*Ue(t-this.long0),r=this.y0-this.a*this.k0*Math.log(s)}return e.x=n,e.y=r,e}function Fj(e){var t=e.x-this.x0,i=e.y-this.y0,n,r;if(this.sphere)r=Ae-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var a=Math.exp(-i/(this.a*this.k0));if(r=yl(this.e,a),r===-9999)return null}return n=Ue(this.long0+t/(this.a*this.k0)),e.x=n,e.y=r,e}var $j=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],jj={init:Bj,forward:Rj,inverse:Fj,names:$j};function Nj(){}function TE(e){return e}var kj=["longlat","identity"],Vj={init:Nj,forward:TE,inverse:TE,names:kj},zj=[jj,Vj],Kc={},ed=[];function IE(e,t){var i=ed.length;return e.names?(ed[i]=e,e.names.forEach(function(n){Kc[n.toLowerCase()]=i}),this):(console.log(t),!0)}function Gj(e){if(!e)return!1;var t=e.toLowerCase();if(typeof Kc[t]!="undefined"&&ed[Kc[t]])return ed[Kc[t]]}function Uj(){zj.forEach(IE)}var Hj={start:Uj,add:IE,get:Gj},rt={};rt.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},rt.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},rt.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},rt.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},rt.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"},rt.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},rt.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},rt.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"},rt.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},rt.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},rt.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},rt.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"},rt.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},rt.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"},rt.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."},rt.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},rt.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"},rt.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},rt.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},rt.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"},rt.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"},rt.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"},rt.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"},rt.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"},rt.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},rt.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},rt.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},rt.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},rt.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},rt.hough={a:6378270,rf:297,ellipseName:"Hough"},rt.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},rt.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},rt.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},rt.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},rt.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"},rt.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},rt.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},rt.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"},rt.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"},rt.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},rt.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},rt.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var Wj=rt.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};rt.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function qj(e,t,i,n){var r=e*e,a=t*t,s=(r-a)/r,l=0;n?(e*=1-s*(mj+s*(fj+s*vj)),r=e*e,s=0):l=Math.sqrt(s);var c=(r-a)/a;return{es:s,e:l,ep2:c}}function Zj(e,t,i,n,r){if(!e){var a=wo(rt,n);a||(a=Wj),e=a.a,t=a.b,i=a.rf}return i&&!t&&(t=(1-1/i)*e),(i===0||Math.abs(e-t)<ke)&&(r=!0,t=e),{a:e,b:t,rf:i,sphere:r}}var Ti={};Ti.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},Ti.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},Ti.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},Ti.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},Ti.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},Ti.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},Ti.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},Ti.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},Ti.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},Ti.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},Ti.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},Ti.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},Ti.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},Ti.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},Ti.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},Ti.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},Ti.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function Qj(e,t,i,n,r,a,s){var l={};return e===void 0||e==="none"?l.datum_type=Wf:l.datum_type=hj,t&&(l.datum_params=t.map(parseFloat),(l.datum_params[0]!==0||l.datum_params[1]!==0||l.datum_params[2]!==0)&&(l.datum_type=sa),l.datum_params.length>3&&(l.datum_params[3]!==0||l.datum_params[4]!==0||l.datum_params[5]!==0||l.datum_params[6]!==0)&&(l.datum_type=la,l.datum_params[3]*=ml,l.datum_params[4]*=ml,l.datum_params[5]*=ml,l.datum_params[6]=l.datum_params[6]/1e6+1)),s&&(l.datum_type=Ha,l.grids=s),l.a=i,l.b=n,l.es=r,l.ep2=a,l}var AE={};function Jj(e,t){var i=new DataView(t),n=Kj(i),r=eN(i,n);r.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var a=tN(i,r,n),s={header:r,subgrids:a};return AE[e]=s,s}function Xj(e){if(e===void 0)return null;var t=e.split(",");return t.map(Yj)}function Yj(e){if(e.length===0)return null;var t=e[0]==="@";return t&&(e=e.slice(1)),e==="null"?{name:"null",mandatory:!t,grid:null,isNull:!0}:{name:e,mandatory:!t,grid:AE[e]||null,isNull:!1}}function qa(e){return e/3600*Math.PI/180}function Kj(e){var t=e.getInt32(8,!1);return t===11?!1:(t=e.getInt32(8,!0),t!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function eN(e,t){return{nFields:e.getInt32(8,t),nSubgridFields:e.getInt32(24,t),nSubgrids:e.getInt32(40,t),shiftType:Qf(e,56,56+8).trim(),fromSemiMajorAxis:e.getFloat64(120,t),fromSemiMinorAxis:e.getFloat64(136,t),toSemiMajorAxis:e.getFloat64(152,t),toSemiMinorAxis:e.getFloat64(168,t)}}function Qf(e,t,i){return String.fromCharCode.apply(null,new Uint8Array(e.buffer.slice(t,i)))}function tN(e,t,i){for(var n=176,r=[],a=0;a<t.nSubgrids;a++){var s=nN(e,n,i),l=rN(e,n,s,i),c=Math.round(1+(s.upperLongitude-s.lowerLongitude)/s.longitudeInterval),d=Math.round(1+(s.upperLatitude-s.lowerLatitude)/s.latitudeInterval);r.push({ll:[qa(s.lowerLongitude),qa(s.lowerLatitude)],del:[qa(s.longitudeInterval),qa(s.latitudeInterval)],lim:[c,d],count:s.gridNodeCount,cvs:iN(l)})}return r}function iN(e){return e.map(function(t){return[qa(t.longitudeShift),qa(t.latitudeShift)]})}function nN(e,t,i){return{name:Qf(e,t+8,t+16).trim(),parent:Qf(e,t+24,t+24+8).trim(),lowerLatitude:e.getFloat64(t+72,i),upperLatitude:e.getFloat64(t+88,i),lowerLongitude:e.getFloat64(t+104,i),upperLongitude:e.getFloat64(t+120,i),latitudeInterval:e.getFloat64(t+136,i),longitudeInterval:e.getFloat64(t+152,i),gridNodeCount:e.getInt32(t+168,i)}}function rN(e,t,i,n){for(var r=t+176,a=16,s=[],l=0;l<i.gridNodeCount;l++){var c={latitudeShift:e.getFloat32(r+l*a,n),longitudeShift:e.getFloat32(r+l*a+4,n),latitudeAccuracy:e.getFloat32(r+l*a+8,n),longitudeAccuracy:e.getFloat32(r+l*a+12,n)};s.push(c)}return s}function Ar(e,t){if(!(this instanceof Ar))return new Ar(e);t=t||function(d){if(d)throw d};var i=Lj(e);if(typeof i!="object"){t(e);return}var n=Ar.projections.get(i.projName);if(!n){t(e);return}if(i.datumCode&&i.datumCode!=="none"){var r=wo(Ti,i.datumCode);r&&(i.datum_params=i.datum_params||(r.towgs84?r.towgs84.split(","):null),i.ellps=r.ellipse,i.datumName=r.datumName?r.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var a=Zj(i.a,i.b,i.rf,i.ellps,i.sphere),s=qj(a.a,a.b,a.rf,i.R_A),l=Xj(i.nadgrids),c=i.datum||Qj(i.datumCode,i.datum_params,a.a,a.b,s.es,s.ep2,l);SE(this,i),SE(this,n),this.a=a.a,this.b=a.b,this.rf=a.rf,this.sphere=a.sphere,this.es=s.es,this.e=s.e,this.ep2=s.ep2,this.datum=c,this.init(),t(null,this)}Ar.projections=Hj,Ar.projections.start();function oN(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===sa?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===la?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function DE(e,t,i){var n=e.x,r=e.y,a=e.z?e.z:0,s,l,c,d;if(r<-Ae&&r>-1.001*Ae)r=-Ae;else if(r>Ae&&r<1.001*Ae)r=Ae;else{if(r<-Ae)return{x:-1/0,y:-1/0,z:e.z};if(r>Ae)return{x:1/0,y:1/0,z:e.z}}return n>Math.PI&&(n-=2*Math.PI),l=Math.sin(r),d=Math.cos(r),c=l*l,s=i/Math.sqrt(1-t*c),{x:(s+a)*d*Math.cos(n),y:(s+a)*d*Math.sin(n),z:(s*(1-t)+a)*l}}function LE(e,t,i,n){var r=1e-12,a=r*r,s=30,l,c,d,h,p,f,v,y,w,C,M,S,_,O=e.x,I=e.y,A=e.z?e.z:0,V,$,D;if(l=Math.sqrt(O*O+I*I),c=Math.sqrt(O*O+I*I+A*A),l/i<r){if(V=0,c/i<r)return $=Ae,D=-n,{x:e.x,y:e.y,z:e.z}}else V=Math.atan2(I,O);d=A/c,h=l/c,p=1/Math.sqrt(1-t*(2-t)*h*h),y=h*(1-t)*p,w=d*p,_=0;do _++,v=i/Math.sqrt(1-t*w*w),D=l*y+A*w-v*(1-t*w*w),f=t*v/(v+D),p=1/Math.sqrt(1-f*(2-f)*h*h),C=h*(1-f)*p,M=d*p,S=M*y-C*w,y=C,w=M;while(S*S>a&&_<s);return $=Math.atan(M/Math.abs(C)),{x:V,y:$,z:D}}function aN(e,t,i){if(t===sa)return{x:e.x+i[0],y:e.y+i[1],z:e.z+i[2]};if(t===la){var n=i[0],r=i[1],a=i[2],s=i[3],l=i[4],c=i[5],d=i[6];return{x:d*(e.x-c*e.y+l*e.z)+n,y:d*(c*e.x+e.y-s*e.z)+r,z:d*(-l*e.x+s*e.y+e.z)+a}}}function sN(e,t,i){if(t===sa)return{x:e.x-i[0],y:e.y-i[1],z:e.z-i[2]};if(t===la){var n=i[0],r=i[1],a=i[2],s=i[3],l=i[4],c=i[5],d=i[6],h=(e.x-n)/d,p=(e.y-r)/d,f=(e.z-a)/d;return{x:h+c*p-l*f,y:-c*h+p+s*f,z:l*h-s*p+f}}}function td(e){return e===sa||e===la}function lN(e,t,i){if(oN(e,t)||e.datum_type===Wf||t.datum_type===Wf)return i;var n=e.a,r=e.es;if(e.datum_type===Ha){var a=BE(e,!1,i);if(a!==0)return;n=bE,r=CE}var s=t.a,l=t.b,c=t.es;if(t.datum_type===Ha&&(s=bE,l=pj,c=CE),r===c&&n===s&&!td(e.datum_type)&&!td(t.datum_type))return i;if(i=DE(i,r,n),td(e.datum_type)&&(i=aN(i,e.datum_type,e.datum_params)),td(t.datum_type)&&(i=sN(i,t.datum_type,t.datum_params)),i=LE(i,c,s,l),t.datum_type===Ha){var d=BE(t,!0,i);if(d!==0)return}return i}function BE(e,t,i){if(e.grids===null||e.grids.length===0)return console.log("Grid shift grids not found"),-1;for(var n={x:-i.x,y:i.y},r={x:Number.NaN,y:Number.NaN},a=[],s=0;s<e.grids.length;s++){var l=e.grids[s];if(a.push(l.name),l.isNull){r=n;break}if(l.mandatory,l.grid===null){if(l.mandatory)return console.log("Unable to find mandatory grid '"+l.name+"'"),-1;continue}var c=l.grid.subgrids[0],d=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,h=c.ll[0]-d,p=c.ll[1]-d,f=c.ll[0]+(c.lim[0]-1)*c.del[0]+d,v=c.ll[1]+(c.lim[1]-1)*c.del[1]+d;if(!(p>n.y||h>n.x||v<n.y||f<n.x)&&(r=uN(n,t,c),!isNaN(r.x)))break}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*Sr+" "+n.y*Sr+" tried: '"+a+"'"),-1):(i.x=-r.x,i.y=r.y,0)}function uN(e,t,i){var n={x:Number.NaN,y:Number.NaN};if(isNaN(e.x))return n;var r={x:e.x,y:e.y};r.x-=i.ll[0],r.y-=i.ll[1],r.x=Ue(r.x-Math.PI)+Math.PI;var a=RE(r,i);if(t){if(isNaN(a.x))return n;a.x=r.x-a.x,a.y=r.y-a.y;var s=9,l=1e-12,c,d;do{if(d=RE(a,i),isNaN(d.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}c={x:r.x-(d.x+a.x),y:r.y-(d.y+a.y)},a.x+=c.x,a.y+=c.y}while(s--&&Math.abs(c.x)>l&&Math.abs(c.y)>l);if(s<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=Ue(a.x+i.ll[0]),n.y=a.y+i.ll[1]}else isNaN(a.x)||(n.x=e.x+a.x,n.y=e.y+a.y);return n}function RE(e,t){var i={x:e.x/t.del[0],y:e.y/t.del[1]},n={x:Math.floor(i.x),y:Math.floor(i.y)},r={x:i.x-1*n.x,y:i.y-1*n.y},a={x:Number.NaN,y:Number.NaN},s;if(n.x<0||n.x>=t.lim[0]||n.y<0||n.y>=t.lim[1])return a;s=n.y*t.lim[0]+n.x;var l={x:t.cvs[s][0],y:t.cvs[s][1]};s++;var c={x:t.cvs[s][0],y:t.cvs[s][1]};s+=t.lim[0];var d={x:t.cvs[s][0],y:t.cvs[s][1]};s--;var h={x:t.cvs[s][0],y:t.cvs[s][1]},p=r.x*r.y,f=r.x*(1-r.y),v=(1-r.x)*(1-r.y),y=(1-r.x)*r.y;return a.x=v*l.x+f*c.x+y*h.x+p*d.x,a.y=v*l.y+f*c.y+y*h.y+p*d.y,a}function FE(e,t,i){var n=i.x,r=i.y,a=i.z||0,s,l,c,d={};for(c=0;c<3;c++)if(!(t&&c===2&&i.z===void 0))switch(c===0?(s=n,"ew".indexOf(e.axis[c])!==-1?l="x":l="y"):c===1?(s=r,"ns".indexOf(e.axis[c])!==-1?l="y":l="x"):(s=a,l="z"),e.axis[c]){case"e":d[l]=s;break;case"w":d[l]=-s;break;case"n":d[l]=s;break;case"s":d[l]=-s;break;case"u":i[l]!==void 0&&(d.z=s);break;case"d":i[l]!==void 0&&(d.z=-s);break;default:return null}return d}function $E(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function cN(e){jE(e.x),jE(e.y)}function jE(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function dN(e,t){return(e.datum.datum_type===sa||e.datum.datum_type===la||e.datum.datum_type===Ha)&&t.datumCode!=="WGS84"||(t.datum.datum_type===sa||t.datum.datum_type===la||t.datum.datum_type===Ha)&&e.datumCode!=="WGS84"}function id(e,t,i,n){var r;Array.isArray(i)?i=$E(i):i={x:i.x,y:i.y,z:i.z,m:i.m};var a=i.z!==void 0;if(cN(i),e.datum&&t.datum&&dN(e,t)&&(r=new Ar("WGS84"),i=id(e,r,i,n),e=r),n&&e.axis!=="enu"&&(i=FE(e,!1,i)),e.projName==="longlat")i={x:i.x*$i,y:i.y*$i,z:i.z||0};else if(e.to_meter&&(i={x:i.x*e.to_meter,y:i.y*e.to_meter,z:i.z||0}),i=e.inverse(i),!i)return;if(e.from_greenwich&&(i.x+=e.from_greenwich),i=lN(e.datum,t.datum,i),!!i)return t.from_greenwich&&(i={x:i.x-t.from_greenwich,y:i.y,z:i.z||0}),t.projName==="longlat"?i={x:i.x*Sr,y:i.y*Sr,z:i.z||0}:(i=t.forward(i),t.to_meter&&(i={x:i.x/t.to_meter,y:i.y/t.to_meter,z:i.z||0})),n&&t.axis!=="enu"?FE(t,!0,i):(i&&!a&&delete i.z,i)}var NE=Ar("WGS84");function Jf(e,t,i,n){var r,a,s;return Array.isArray(i)?(r=id(e,t,i,n)||{x:NaN,y:NaN},i.length>2?typeof e.name!="undefined"&&e.name==="geocent"||typeof t.name!="undefined"&&t.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(i.splice(3)):[r.x,r.y,i[2]].concat(i.splice(3)):[r.x,r.y].concat(i.splice(2)):[r.x,r.y]):(a=id(e,t,i,n),s=Object.keys(i),s.length===2||s.forEach(function(l){if(typeof e.name!="undefined"&&e.name==="geocent"||typeof t.name!="undefined"&&t.name==="geocent"){if(l==="x"||l==="y"||l==="z")return}else if(l==="x"||l==="y")return;a[l]=i[l]}),a)}function kE(e){return e instanceof Ar?e:e.oProj?e.oProj:Ar(e)}function Tn(e,t,i){e=kE(e);var n=!1,r;return typeof t=="undefined"?(t=e,e=NE,n=!0):(typeof t.x!="undefined"||Array.isArray(t))&&(i=t,t=e,e=NE,n=!0),t=kE(t),i?Jf(e,t,i):(r={forward:function(a,s){return Jf(e,t,a,s)},inverse:function(a,s){return Jf(t,e,a,s)}},n&&(r.oProj=t),r)}var VE=6,zE="AJSAJS",GE="AFAFAF",Za=65,pn=73,Yn=79,bl=86,Cl=90,hN={forward:UE,inverse:pN,toPoint:HE};function UE(e,t){return t=t||5,vN(mN({lat:e[1],lon:e[0]}),t)}function pN(e){var t=Yf(ZE(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function HE(e){var t=Yf(ZE(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Xf(e){return e*(Math.PI/180)}function WE(e){return 180*(e/Math.PI)}function mN(e){var t=e.lat,i=e.lon,n=6378137,r=.00669438,a=.9996,s,l,c,d,h,p,f,v=Xf(t),y=Xf(i),w,C;C=Math.floor((i+180)/6)+1,i===180&&(C=60),t>=56&&t<64&&i>=3&&i<12&&(C=32),t>=72&&t<84&&(i>=0&&i<9?C=31:i>=9&&i<21?C=33:i>=21&&i<33?C=35:i>=33&&i<42&&(C=37)),s=(C-1)*6-180+3,w=Xf(s),l=r/(1-r),c=n/Math.sqrt(1-r*Math.sin(v)*Math.sin(v)),d=Math.tan(v)*Math.tan(v),h=l*Math.cos(v)*Math.cos(v),p=Math.cos(v)*(y-w),f=n*((1-r/4-3*r*r/64-5*r*r*r/256)*v-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*v)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*v)-35*r*r*r/3072*Math.sin(6*v));var M=a*c*(p+(1-d+h)*p*p*p/6+(5-18*d+d*d+72*h-58*l)*p*p*p*p*p/120)+5e5,S=a*(f+c*Math.tan(v)*(p*p/2+(5-d+9*h+4*h*h)*p*p*p*p/24+(61-58*d+d*d+600*h-330*l)*p*p*p*p*p*p/720));return t<0&&(S+=1e7),{northing:Math.round(S),easting:Math.round(M),zoneNumber:C,zoneLetter:fN(t)}}function Yf(e){var t=e.northing,i=e.easting,n=e.zoneLetter,r=e.zoneNumber;if(r<0||r>60)return null;var a=.9996,s=6378137,l=.00669438,c,d=(1-Math.sqrt(1-l))/(1+Math.sqrt(1-l)),h,p,f,v,y,w,C,M,S,_=i-5e5,O=t;n<"N"&&(O-=1e7),C=(r-1)*6-180+3,c=l/(1-l),w=O/a,M=w/(s*(1-l/4-3*l*l/64-5*l*l*l/256)),S=M+(3*d/2-27*d*d*d/32)*Math.sin(2*M)+(21*d*d/16-55*d*d*d*d/32)*Math.sin(4*M)+151*d*d*d/96*Math.sin(6*M),h=s/Math.sqrt(1-l*Math.sin(S)*Math.sin(S)),p=Math.tan(S)*Math.tan(S),f=c*Math.cos(S)*Math.cos(S),v=s*(1-l)/Math.pow(1-l*Math.sin(S)*Math.sin(S),1.5),y=_/(h*a);var I=S-h*Math.tan(S)/v*(y*y/2-(5+3*p+10*f-4*f*f-9*c)*y*y*y*y/24+(61+90*p+298*f+45*p*p-252*c-3*f*f)*y*y*y*y*y*y/720);I=WE(I);var A=(y-(1+2*p+f)*y*y*y/6+(5-2*f+28*p-3*f*f+8*c+24*p*p)*y*y*y*y*y/120)/Math.cos(S);A=C+WE(A);var V;if(e.accuracy){var $=Yf({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});V={top:$.lat,right:$.lon,bottom:I,left:A}}else V={lat:I,lon:A};return V}function fN(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function vN(e,t){var i="00000"+e.easting,n="00000"+e.northing;return e.zoneNumber+e.zoneLetter+gN(e.easting,e.northing,e.zoneNumber)+i.substr(i.length-5,t)+n.substr(n.length-5,t)}function gN(e,t,i){var n=qE(i),r=Math.floor(e/1e5),a=Math.floor(t/1e5)%20;return yN(r,a,n)}function qE(e){var t=e%VE;return t===0&&(t=VE),t}function yN(e,t,i){var n=i-1,r=zE.charCodeAt(n),a=GE.charCodeAt(n),s=r+e-1,l=a+t,c=!1;s>Cl&&(s=s-Cl+Za-1,c=!0),(s===pn||r<pn&&s>pn||(s>pn||r<pn)&&c)&&s++,(s===Yn||r<Yn&&s>Yn||(s>Yn||r<Yn)&&c)&&(s++,s===pn&&s++),s>Cl&&(s=s-Cl+Za-1),l>bl?(l=l-bl+Za-1,c=!0):c=!1,(l===pn||a<pn&&l>pn||(l>pn||a<pn)&&c)&&l++,(l===Yn||a<Yn&&l>Yn||(l>Yn||a<Yn)&&c)&&(l++,l===pn&&l++),l>bl&&(l=l-bl+Za-1);var d=String.fromCharCode(s)+String.fromCharCode(l);return d}function ZE(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,i=null,n="",r,a=0;!/[A-Z]/.test(r=e.charAt(a));){if(a>=2)throw"MGRSPoint bad conversion from: "+e;n+=r,a++}var s=parseInt(n,10);if(a===0||a+3>t)throw"MGRSPoint bad conversion from: "+e;var l=e.charAt(a++);if(l<="A"||l==="B"||l==="Y"||l>="Z"||l==="I"||l==="O")throw"MGRSPoint zone letter "+l+" not handled: "+e;i=e.substring(a,a+=2);for(var c=qE(s),d=bN(i.charAt(0),c),h=CN(i.charAt(1),c);h<_N(l);)h+=2e6;var p=t-a;if(p%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var f=p/2,v=0,y=0,w,C,M,S,_;return f>0&&(w=1e5/Math.pow(10,f),C=e.substring(a,a+f),v=parseFloat(C)*w,M=e.substring(a+f),y=parseFloat(M)*w),S=v+d,_=y+h,{easting:S,northing:_,zoneLetter:l,zoneNumber:s,accuracy:w}}function bN(e,t){for(var i=zE.charCodeAt(t-1),n=1e5,r=!1;i!==e.charCodeAt(0);){if(i++,i===pn&&i++,i===Yn&&i++,i>Cl){if(r)throw"Bad character: "+e;i=Za,r=!0}n+=1e5}return n}function CN(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var i=GE.charCodeAt(t-1),n=0,r=!1;i!==e.charCodeAt(0);){if(i++,i===pn&&i++,i===Yn&&i++,i>bl){if(r)throw"Bad character: "+e;i=Za,r=!0}n+=1e5}return n}function _N(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function Qa(e,t,i){if(!(this instanceof Qa))return new Qa(e,t,i);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t=="undefined"){var n=e.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=e,this.y=t,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Qa.fromMGRS=function(e){return new Qa(HE(e))},Qa.prototype.toMGRS=function(e){return UE([this.x,this.y],e)};var wN=1,xN=.25,QE=.046875,JE=.01953125,XE=.01068115234375,EN=.75,PN=.46875,ON=.013020833333333334,MN=.007120768229166667,SN=.3645833333333333,TN=.005696614583333333,IN=.3076171875;function YE(e){var t=[];t[0]=wN-e*(xN+e*(QE+e*(JE+e*XE))),t[1]=e*(EN-e*(QE+e*(JE+e*XE)));var i=e*e;return t[2]=i*(PN-e*(ON+e*MN)),i*=e,t[3]=i*(SN-e*TN),t[4]=i*e*IN,t}function nd(e,t,i,n){return i*=t,t*=t,n[0]*e-i*(n[1]+t*(n[2]+t*(n[3]+t*n[4])))}var AN=20;function KE(e,t,i){for(var n=1/(1-t),r=e,a=AN;a;--a){var s=Math.sin(r),l=1-t*s*s;if(l=(nd(r,s,Math.cos(r),i)-e)*(l*Math.sqrt(l))*n,r-=l,Math.abs(l)<ke)return r}return r}function DN(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=YE(this.es),this.ml0=nd(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function LN(e){var t=e.x,i=e.y,n=Ue(t-this.long0),r,a,s,l=Math.sin(i),c=Math.cos(i);if(this.es){var h=c*n,p=Math.pow(h,2),f=this.ep2*Math.pow(c,2),v=Math.pow(f,2),y=Math.abs(c)>ke?Math.tan(i):0,w=Math.pow(y,2),C=Math.pow(w,2);r=1-this.es*Math.pow(l,2),h=h/Math.sqrt(r);var M=nd(i,l,c,this.en);a=this.a*(this.k0*h*(1+p/6*(1-w+f+p/20*(5-18*w+C+14*f-58*w*f+p/42*(61+179*C-C*w-479*w)))))+this.x0,s=this.a*(this.k0*(M-this.ml0+l*n*h/2*(1+p/12*(5-w+9*f+4*v+p/30*(61+C-58*w+270*f-330*w*f+p/56*(1385+543*C-C*w-3111*w))))))+this.y0}else{var d=c*Math.sin(n);if(Math.abs(Math.abs(d)-1)<ke)return 93;if(a=.5*this.a*this.k0*Math.log((1+d)/(1-d))+this.x0,s=c*Math.cos(n)/Math.sqrt(1-Math.pow(d,2)),d=Math.abs(s),d>=1){if(d-1>ke)return 93;s=0}else s=Math.acos(s);i<0&&(s=-s),s=this.a*this.k0*(s-this.lat0)+this.y0}return e.x=a,e.y=s,e}function BN(e){var t,i,n,r,a=(e.x-this.x0)*(1/this.a),s=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+s/this.k0,i=KE(t,this.es,this.en),Math.abs(i)<Ae){var p=Math.sin(i),f=Math.cos(i),v=Math.abs(f)>ke?Math.tan(i):0,y=this.ep2*Math.pow(f,2),w=Math.pow(y,2),C=Math.pow(v,2),M=Math.pow(C,2);t=1-this.es*Math.pow(p,2);var S=a*Math.sqrt(t)/this.k0,_=Math.pow(S,2);t=t*v,n=i-t*_/(1-this.es)*.5*(1-_/12*(5+3*C-9*y*C+y-4*w-_/30*(61+90*C-252*y*C+45*M+46*y-_/56*(1385+3633*C+4095*M+1574*M*C)))),r=Ue(this.long0+S*(1-_/6*(1+2*C+y-_/20*(5+28*C+24*M+8*y*C+6*y-_/42*(61+662*C+1320*M+720*M*C))))/f)}else n=Ae*gl(s),r=0;else{var l=Math.exp(a/this.k0),c=.5*(l-1/l),d=this.lat0+s/this.k0,h=Math.cos(d);t=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(c,2))),n=Math.asin(t),s<0&&(n=-n),c===0&&h===0?r=0:r=Ue(Math.atan2(c,h)+this.long0)}return e.x=r,e.y=n,e}var RN=["Fast_Transverse_Mercator","Fast Transverse Mercator"],rd={init:DN,forward:LN,inverse:BN,names:RN};function eP(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function mr(e,t){e=Math.abs(e),t=Math.abs(t);var i=Math.max(e,t),n=Math.min(e,t)/(i||1);return i*Math.sqrt(1+Math.pow(n,2))}function FN(e){var t=1+e,i=t-1;return i===0?e:e*Math.log(t)/i}function $N(e){var t=Math.abs(e);return t=FN(t*(1+t/(mr(1,t)+1))),e<0?-t:t}function Kf(e,t){for(var i=2*Math.cos(2*t),n=e.length-1,r=e[n],a=0,s;--n>=0;)s=-a+i*r+e[n],a=r,r=s;return t+s*Math.sin(2*t)}function jN(e,t){for(var i=2*Math.cos(t),n=e.length-1,r=e[n],a=0,s;--n>=0;)s=-a+i*r+e[n],a=r,r=s;return Math.sin(t)*s}function NN(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function tP(e,t,i){for(var n=Math.sin(t),r=Math.cos(t),a=eP(i),s=NN(i),l=2*r*s,c=-2*n*a,d=e.length-1,h=e[d],p=0,f=0,v=0,y,w;--d>=0;)y=f,w=p,f=h,p=v,h=-y+l*f-c*p+e[d],v=-w+c*f+l*p;return l=n*s,c=r*a,[l*h-c*v,l*v+c*h]}function kN(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(rd.init.apply(this),this.forward=rd.forward,this.inverse=rd.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),i=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),i=i*t,this.cgb[1]=i*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=i*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),i=i*t,this.cgb[2]=i*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=i*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),i=i*t,this.cgb[3]=i*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=i*(1237/630+t*(-12/5+t*(-24832/14175))),i=i*t,this.cgb[4]=i*(4174/315+t*(-144838/6237)),this.cbg[4]=i*(-734/315+t*(109598/31185)),i=i*t,this.cgb[5]=i*(601676/22275),this.cbg[5]=i*(444337/155925),i=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=i*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=i*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),i=i*t,this.utg[2]=i*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=i*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),i=i*t,this.utg[3]=i*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=i*(49561/161280+t*(-179/168+t*(6601661/7257600))),i=i*t,this.utg[4]=i*(-4583/161280+t*(108847/3991680)),this.gtu[4]=i*(34729/80640+t*(-3418889/1995840)),i=i*t,this.utg[5]=i*(-20648693/638668800),this.gtu[5]=i*(212378941/319334400);var n=Kf(this.cbg,this.lat0);this.Zb=-this.Qn*(n+jN(this.gtu,2*n))}function VN(e){var t=Ue(e.x-this.long0),i=e.y;i=Kf(this.cbg,i);var n=Math.sin(i),r=Math.cos(i),a=Math.sin(t),s=Math.cos(t);i=Math.atan2(n,s*r),t=Math.atan2(a*r,mr(n,r*s)),t=$N(Math.tan(t));var l=tP(this.gtu,2*i,2*t);i=i+l[0],t=t+l[1];var c,d;return Math.abs(t)<=2.623395162778?(c=this.a*(this.Qn*t)+this.x0,d=this.a*(this.Qn*i+this.Zb)+this.y0):(c=1/0,d=1/0),e.x=c,e.y=d,e}function zN(e){var t=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);i=(i-this.Zb)/this.Qn,t=t/this.Qn;var n,r;if(Math.abs(t)<=2.623395162778){var a=tP(this.utg,2*i,2*t);i=i+a[0],t=t+a[1],t=Math.atan(eP(t));var s=Math.sin(i),l=Math.cos(i),c=Math.sin(t),d=Math.cos(t);i=Math.atan2(s*d,mr(c,d*l)),t=Math.atan2(c,d*l),n=Ue(t+this.long0),r=Kf(this.cgb,i)}else n=1/0,r=1/0;return e.x=n,e.y=r,e}var GN=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"],od={init:kN,forward:VN,inverse:zN,names:GN};function UN(e,t){if(e===void 0){if(e=Math.floor((Ue(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var HN="etmerc";function WN(){var e=UN(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*$i,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,od.init.apply(this),this.forward=od.forward,this.inverse=od.inverse}var qN=["Universal Transverse Mercator System","utm"],ZN={init:WN,names:qN,dependsOn:HN};function ev(e,t){return Math.pow((1-e)/(1+e),t)}var QN=20;function JN(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Mt)/(Math.pow(Math.tan(.5*this.lat0+Mt),this.C)*ev(this.e*e,this.ratexp))}function XN(e){var t=e.x,i=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+Mt),this.C)*ev(this.e*Math.sin(i),this.ratexp))-Ae,e.x=this.C*t,e}function YN(e){for(var t=1e-14,i=e.x/this.C,n=e.y,r=Math.pow(Math.tan(.5*n+Mt)/this.K,1/this.C),a=QN;a>0&&(n=2*Math.atan(r*ev(this.e*Math.sin(e.y),-.5*this.e))-Ae,!(Math.abs(n-e.y)<t));--a)e.y=n;return a?(e.x=i,e.y=n,e):null}var KN=["gauss"],tv={init:JN,forward:XN,inverse:YN,names:KN};function ek(){tv.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function tk(e){var t,i,n,r;return e.x=Ue(e.x-this.long0),tv.forward.apply(this,[e]),t=Math.sin(e.y),i=Math.cos(e.y),n=Math.cos(e.x),r=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*i*n),e.x=r*i*Math.sin(e.x),e.y=r*(this.cosc0*t-this.sinc0*i*n),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function ik(e){var t,i,n,r,a;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,a=Math.sqrt(e.x*e.x+e.y*e.y)){var s=2*Math.atan2(a,this.R2);t=Math.sin(s),i=Math.cos(s),r=Math.asin(i*this.sinc0+e.y*t*this.cosc0/a),n=Math.atan2(e.x*t,a*this.cosc0*i-e.y*this.sinc0*t)}else r=this.phic0,n=0;return e.x=n,e.y=r,tv.inverse.apply(this,[e]),e.x=Ue(e.x+this.long0),e}var nk=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],rk={init:ek,forward:tk,inverse:ik,names:nk};function ok(e,t,i){return t*=i,Math.tan(.5*(Ae+e))*Math.pow((1-t)/(1+t),.5*i)}function ak(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ke&&(this.k0=.5*(1+gl(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ke&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ke&&Math.abs(Math.cos(this.lat_ts))>ke&&(this.k0=.5*this.cons*Ir(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/pr(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=Ir(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Ae,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function sk(e){var t=e.x,i=e.y,n=Math.sin(i),r=Math.cos(i),a,s,l,c,d,h,p=Ue(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=ke&&Math.abs(i+this.lat0)<=ke?(e.x=NaN,e.y=NaN,e):this.sphere?(a=2*this.k0/(1+this.sinlat0*n+this.coslat0*r*Math.cos(p)),e.x=this.a*a*r*Math.sin(p)+this.x0,e.y=this.a*a*(this.coslat0*n-this.sinlat0*r*Math.cos(p))+this.y0,e):(s=2*Math.atan(this.ssfn_(i,n,this.e))-Ae,c=Math.cos(s),l=Math.sin(s),Math.abs(this.coslat0)<=ke?(d=pr(this.e,i*this.con,this.con*n),h=2*this.a*this.k0*d/this.cons,e.x=this.x0+h*Math.sin(t-this.long0),e.y=this.y0-this.con*h*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<ke?(a=2*this.a*this.k0/(1+c*Math.cos(p)),e.y=a*l):(a=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*l+this.cosX0*c*Math.cos(p))),e.y=a*(this.cosX0*l-this.sinX0*c*Math.cos(p))+this.y0),e.x=a*c*Math.sin(p)+this.x0,e))}function lk(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,r,a,s=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var l=2*Math.atan(s/(2*this.a*this.k0));return t=this.long0,i=this.lat0,s<=ke?(e.x=t,e.y=i,e):(i=Math.asin(Math.cos(l)*this.sinlat0+e.y*Math.sin(l)*this.coslat0/s),Math.abs(this.coslat0)<ke?this.lat0>0?t=Ue(this.long0+Math.atan2(e.x,-1*e.y)):t=Ue(this.long0+Math.atan2(e.x,e.y)):t=Ue(this.long0+Math.atan2(e.x*Math.sin(l),s*this.coslat0*Math.cos(l)-e.y*this.sinlat0*Math.sin(l))),e.x=t,e.y=i,e)}else if(Math.abs(this.coslat0)<=ke){if(s<=ke)return i=this.lat0,t=this.long0,e.x=t,e.y=i,e;e.x*=this.con,e.y*=this.con,n=s*this.cons/(2*this.a*this.k0),i=this.con*yl(this.e,n),t=this.con*Ue(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else r=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,s<=ke?a=this.X0:(a=Math.asin(Math.cos(r)*this.sinX0+e.y*Math.sin(r)*this.cosX0/s),t=Ue(this.long0+Math.atan2(e.x*Math.sin(r),s*this.cosX0*Math.cos(r)-e.y*this.sinX0*Math.sin(r)))),i=-1*yl(this.e,Math.tan(.5*(Ae+a)));return e.x=t,e.y=i,e}var uk=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ck={init:ak,forward:sk,inverse:lk,names:uk,ssfn_:ok};function dk(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),i=this.a,n=this.rf,r=1/n,a=2*r-Math.pow(r,2),s=this.e=Math.sqrt(a);this.R=this.k0*i*Math.sqrt(1-a)/(1-a*Math.pow(t,2)),this.alpha=Math.sqrt(1+a/(1-a)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var l=Math.log(Math.tan(Math.PI/4+this.b0/2)),c=Math.log(Math.tan(Math.PI/4+e/2)),d=Math.log((1+s*t)/(1-s*t));this.K=l-this.alpha*c+this.alpha*s/2*d}function hk(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),n=-this.alpha*(t+i)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),a=this.alpha*(e.x-this.lambda0),s=Math.atan(Math.sin(a)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(a))),l=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(a));return e.y=this.R/2*Math.log((1+Math.sin(l))/(1-Math.sin(l)))+this.y0,e.x=this.R*s+this.x0,e}function pk(e){for(var t=e.x-this.x0,i=e.y-this.y0,n=t/this.R,r=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),a=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),s=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),l=this.lambda0+s/this.alpha,c=0,d=a,h=-1e3,p=0;Math.abs(d-h)>1e-7;){if(++p>20)return;c=1/this.alpha*(Math.log(Math.tan(Math.PI/4+a/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(d))/2)),h=d,d=2*Math.atan(Math.exp(c))-Math.PI/2}return e.x=l,e.y=d,e}var mk=["somerc"],fk={init:dk,forward:hk,inverse:pk,names:mk},Ja=1e-7;function vk(e){var t=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],i=typeof e.PROJECTION=="object"?Object.keys(e.PROJECTION)[0]:e.PROJECTION;return"no_uoff"in e||"no_off"in e||t.indexOf(i)!==-1}function gk(){var e,t,i,n,r,a,s,l,c,d,h=0,p,f=0,v=0,y=0,w=0,C=0,M=0;this.no_off=vk(this),this.no_rot="no_rot"in this;var S=!1;"alpha"in this&&(S=!0);var _=!1;if("rectified_grid_angle"in this&&(_=!0),S&&(M=this.alpha),_&&(h=this.rectified_grid_angle*$i),S||_)f=this.longc;else if(v=this.long1,w=this.lat1,y=this.long2,C=this.lat2,Math.abs(w-C)<=Ja||(e=Math.abs(w))<=Ja||Math.abs(e-Ae)<=Ja||Math.abs(Math.abs(this.lat0)-Ae)<=Ja||Math.abs(Math.abs(C)-Ae)<=Ja)throw new Error;var O=1-this.es;t=Math.sqrt(O),Math.abs(this.lat0)>ke?(l=Math.sin(this.lat0),i=Math.cos(this.lat0),e=1-this.es*l*l,this.B=i*i,this.B=Math.sqrt(1+this.es*this.B*this.B/O),this.A=this.B*this.k0*t/e,n=this.B*t/(i*Math.sqrt(e)),r=n*n-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=n,this.E*=Math.pow(pr(this.e,this.lat0,l),this.B)):(this.B=1/t,this.A=this.k0,this.E=n=r=1),S||_?(S?(p=Math.asin(Math.sin(M)/n),_||(h=M)):(p=h,M=Math.asin(n*Math.sin(p))),this.lam0=f-Math.asin(.5*(r-1/r)*Math.tan(p))/this.B):(a=Math.pow(pr(this.e,w,Math.sin(w)),this.B),s=Math.pow(pr(this.e,C,Math.sin(C)),this.B),r=this.E/a,c=(s-a)/(s+a),d=this.E*this.E,d=(d-s*a)/(d+s*a),e=v-y,e<-Math.pi?y-=fl:e>Math.pi&&(y+=fl),this.lam0=Ue(.5*(v+y)-Math.atan(d*Math.tan(.5*this.B*(v-y))/c)/this.B),p=Math.atan(2*Math.sin(this.B*Ue(v-this.lam0))/(r-1/r)),h=M=Math.asin(n*Math.sin(p))),this.singam=Math.sin(p),this.cosgam=Math.cos(p),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(M))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*p,this.v_pole_n=this.ArB*Math.log(Math.tan(Mt-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(Mt+r))}function yk(e){var t={},i,n,r,a,s,l,c,d;if(e.x=e.x-this.lam0,Math.abs(Math.abs(e.y)-Ae)>ke){if(s=this.E/Math.pow(pr(this.e,e.y,Math.sin(e.y)),this.B),l=1/s,i=.5*(s-l),n=.5*(s+l),a=Math.sin(this.B*e.x),r=(i*this.singam-a*this.cosgam)/n,Math.abs(Math.abs(r)-1)<ke)throw new Error;d=.5*this.ArB*Math.log((1-r)/(1+r)),l=Math.cos(this.B*e.x),Math.abs(l)<Ja?c=this.A*e.x:c=this.ArB*Math.atan2(i*this.cosgam+a*this.singam,l)}else d=e.y>0?this.v_pole_n:this.v_pole_s,c=this.ArB*e.y;return this.no_rot?(t.x=c,t.y=d):(c-=this.u_0,t.x=d*this.cosrot+c*this.sinrot,t.y=c*this.cosrot-d*this.sinrot),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function bk(e){var t,i,n,r,a,s,l,c={};if(e.x=(e.x-this.x0)*(1/this.a),e.y=(e.y-this.y0)*(1/this.a),this.no_rot?(i=e.y,t=e.x):(i=e.x*this.cosrot-e.y*this.sinrot,t=e.y*this.cosrot+e.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*i),r=.5*(n-1/n),a=.5*(n+1/n),s=Math.sin(this.BrA*t),l=(s*this.cosgam+r*this.singam)/a,Math.abs(Math.abs(l)-1)<ke)c.x=0,c.y=l<0?-Ae:Ae;else{if(c.y=this.E/Math.sqrt((1+l)/(1-l)),c.y=yl(this.e,Math.pow(c.y,1/this.B)),c.y===1/0)throw new Error;c.x=-this.rB*Math.atan2(r*this.cosgam-s*this.singam,Math.cos(this.BrA*t))}return c.x+=this.lam0,c}var Ck=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"],_k={init:gk,forward:yk,inverse:bk,names:Ck};function wk(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ke)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),i=Math.cos(this.lat1),n=Ir(this.e,t,i),r=pr(this.e,this.lat1,t),a=Math.sin(this.lat2),s=Math.cos(this.lat2),l=Ir(this.e,a,s),c=pr(this.e,this.lat2,a),d=pr(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ke?this.ns=Math.log(n/l)/Math.log(r/c):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(d,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function xk(e){var t=e.x,i=e.y;Math.abs(2*Math.abs(i)-Math.PI)<=ke&&(i=gl(i)*(Ae-2*ke));var n=Math.abs(Math.abs(i)-Ae),r,a;if(n>ke)r=pr(this.e,i,Math.sin(i)),a=this.a*this.f0*Math.pow(r,this.ns);else{if(n=i*this.ns,n<=0)return null;a=0}var s=this.ns*Ue(t-this.long0);return e.x=this.k0*(a*Math.sin(s))+this.x0,e.y=this.k0*(this.rh-a*Math.cos(s))+this.y0,e}function Ek(e){var t,i,n,r,a,s=(e.x-this.x0)/this.k0,l=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(s*s+l*l),i=1):(t=-Math.sqrt(s*s+l*l),i=-1);var c=0;if(t!==0&&(c=Math.atan2(i*s,i*l)),t!==0||this.ns>0){if(i=1/this.ns,n=Math.pow(t/(this.a*this.f0),i),r=yl(this.e,n),r===-9999)return null}else r=-Ae;return a=Ue(c/this.ns+this.long0),e.x=a,e.y=r,e}var Pk=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"],Ok={init:wk,forward:xk,inverse:Ek,names:Pk};function Mk(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function Sk(e){var t,i,n,r,a,s,l,c=e.x,d=e.y,h=Ue(c-this.long0);return t=Math.pow((1+this.e*Math.sin(d))/(1-this.e*Math.sin(d)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(d/2+this.s45),this.alfa)/t)-this.s45),n=-h*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),a=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(r)),s=this.n*a,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),e.y=l*Math.cos(s)/1,e.x=l*Math.sin(s)/1,this.czech||(e.y*=-1,e.x*=-1),e}function Tk(e){var t,i,n,r,a,s,l,c,d=e.x;e.x=e.y,e.y=d,this.czech||(e.y*=-1,e.x*=-1),s=Math.sqrt(e.x*e.x+e.y*e.y),a=Math.atan2(e.y,e.x),r=a/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),i=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(t)),e.x=this.long0-i/this.alfa,l=t,c=0;var h=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(l))/(1-this.e*Math.sin(l)),this.e/2))-this.s45),Math.abs(l-e.y)<1e-10&&(c=1),l=e.y,h+=1;while(c===0&&h<15);return h>=15?null:e}var Ik=["Krovak","krovak"],Ak={init:Mk,forward:Sk,inverse:Tk,names:Ik};function en(e,t,i,n,r){return e*r-t*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)}function _l(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function wl(e){return .375*e*(1+.25*e*(1+.46875*e))}function xl(e){return .05859375*e*e*(1+.75*e)}function El(e){return e*e*e*(35/3072)}function Xa(e,t,i){var n=t*i;return e/Math.sqrt(1-n*n)}function Ya(e){return Math.abs(e)<Ae?e:e-gl(e)*Math.PI}function ad(e,t,i,n,r){var a,s;a=e/t;for(var l=0;l<15;l++)if(s=(e-(t*a-i*Math.sin(2*a)+n*Math.sin(4*a)-r*Math.sin(6*a)))/(t-2*i*Math.cos(2*a)+4*n*Math.cos(4*a)-6*r*Math.cos(6*a)),a+=s,Math.abs(s)<=1e-10)return a;return NaN}function Dk(){this.sphere||(this.e0=_l(this.es),this.e1=wl(this.es),this.e2=xl(this.es),this.e3=El(this.es),this.ml0=this.a*en(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Lk(e){var t,i,n=e.x,r=e.y;if(n=Ue(n-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(r)*Math.sin(n)),i=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var a=Math.sin(r),s=Math.cos(r),l=Xa(this.a,this.e,a),c=Math.tan(r)*Math.tan(r),d=n*Math.cos(r),h=d*d,p=this.es*s*s/(1-this.es),f=this.a*en(this.e0,this.e1,this.e2,this.e3,r);t=l*d*(1-h*c*(1/6-(8-c+8*p)*h/120)),i=f-this.ml0+l*a/s*h*(.5+(5-c+6*p)*h/24)}return e.x=t+this.x0,e.y=i+this.y0,e}function Bk(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,n,r;if(this.sphere){var a=i+this.lat0;n=Math.asin(Math.sin(a)*Math.cos(t)),r=Math.atan2(Math.tan(t),Math.cos(a))}else{var s=this.ml0/this.a+i,l=ad(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-Ae)<=ke)return e.x=this.long0,e.y=Ae,i<0&&(e.y*=-1),e;var c=Xa(this.a,this.e,Math.sin(l)),d=c*c*c/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(l),2),p=t*this.a/c,f=p*p;n=l-c*Math.tan(l)/d*p*p*(.5-(1+3*h)*p*p/24),r=p*(1-f*(h/3+(1+3*h)*h*f/15))/Math.cos(l)}return e.x=Ue(r+this.long0),e.y=Ya(n),e}var Rk=["Cassini","Cassini_Soldner","cass"],Fk={init:Dk,forward:Lk,inverse:Bk,names:Rk};function xo(e,t){var i;return e>1e-7?(i=e*t,(1-e*e)*(t/(1-i*i)-.5/e*Math.log((1-i)/(1+i)))):2*t}var $k=1,jk=2,Nk=3,kk=4;function Vk(){var e=Math.abs(this.lat0);if(Math.abs(e-Ae)<ke?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<ke?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=xo(this.e,1),this.mmf=.5/(1-this.es),this.apa=Jk(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=xo(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function zk(e){var t,i,n,r,a,s,l,c,d,h,p=e.x,f=e.y;if(p=Ue(p-this.long0),this.sphere){if(a=Math.sin(f),h=Math.cos(f),n=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(i=this.mode===this.EQUIT?1+h*n:1+this.sinph0*a+this.cosph0*h*n,i<=ke)return null;i=Math.sqrt(2/i),t=i*h*Math.sin(p),i*=this.mode===this.EQUIT?a:this.cosph0*a-this.sinph0*h*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(f+this.lat0)<ke)return null;i=Mt-f*.5,i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)),t=i*Math.sin(p),i*=n}}else{switch(l=0,c=0,d=0,n=Math.cos(p),r=Math.sin(p),a=Math.sin(f),s=xo(this.e,a),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(l=s/this.qp,c=Math.sqrt(1-l*l)),this.mode){case this.OBLIQ:d=1+this.sinb1*l+this.cosb1*c*n;break;case this.EQUIT:d=1+c*n;break;case this.N_POLE:d=Ae+f,s=this.qp-s;break;case this.S_POLE:d=f-Ae,s=this.qp+s;break}if(Math.abs(d)<ke)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),this.mode===this.OBLIQ?i=this.ymf*d*(this.cosb1*l-this.sinb1*c*n):i=(d=Math.sqrt(2/(1+c*n)))*l*this.ymf,t=this.xmf*d*c*r;break;case this.N_POLE:case this.S_POLE:s>=0?(t=(d=Math.sqrt(s))*r,i=n*(this.mode===this.S_POLE?d:-d)):t=i=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*i+this.y0,e}function Gk(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,i=e.y/this.a,n,r,a,s,l,c,d;if(this.sphere){var h=0,p,f=0;if(p=Math.sqrt(t*t+i*i),r=p*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(r),h=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=ke?0:Math.asin(i*f/p),t*=f,i=h*p;break;case this.OBLIQ:r=Math.abs(p)<=ke?this.lat0:Math.asin(h*this.sinph0+i*f*this.cosph0/p),t*=f*this.cosph0,i=(h-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:i=-i,r=Ae-r;break;case this.S_POLE:r-=Ae;break}n=i===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,i)}else{if(d=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,i*=this.dd,c=Math.sqrt(t*t+i*i),c<ke)return e.x=this.long0,e.y=this.lat0,e;s=2*Math.asin(.5*c/this.rq),a=Math.cos(s),t*=s=Math.sin(s),this.mode===this.OBLIQ?(d=a*this.sinb1+i*s*this.cosb1/c,l=this.qp*d,i=c*this.cosb1*a-i*this.sinb1*s):(d=i*s/c,l=this.qp*d,i=c*a)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),l=t*t+i*i,!l)return e.x=this.long0,e.y=this.lat0,e;d=1-l/this.qp,this.mode===this.S_POLE&&(d=-d)}n=Math.atan2(t,i),r=Xk(Math.asin(d),this.apa)}return e.x=Ue(this.long0+n),e.y=r,e}var Uk=.3333333333333333,Hk=.17222222222222222,Wk=.10257936507936508,qk=.06388888888888888,Zk=.0664021164021164,Qk=.016415012942191543;function Jk(e){var t,i=[];return i[0]=e*Uk,t=e*e,i[0]+=t*Hk,i[1]=t*qk,t*=e,i[0]+=t*Wk,i[1]+=t*Zk,i[2]=t*Qk,i}function Xk(e,t){var i=e+e;return e+t[0]*Math.sin(i)+t[1]*Math.sin(i+i)+t[2]*Math.sin(i+i+i)}var Yk=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],Kk={init:Vk,forward:zk,inverse:Gk,names:Yk,S_POLE:$k,N_POLE:jk,EQUIT:Nk,OBLIQ:kk};function Eo(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function eV(){Math.abs(this.lat1+this.lat2)<ke||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=Ir(this.e3,this.sin_po,this.cos_po),this.qs1=xo(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=Ir(this.e3,this.sin_po,this.cos_po),this.qs2=xo(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=xo(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ke?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function tV(e){var t=e.x,i=e.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var n=xo(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,a=this.ns0*Ue(t-this.long0),s=r*Math.sin(a)+this.x0,l=this.rh-r*Math.cos(a)+this.y0;return e.x=s,e.y=l,e}function iV(e){var t,i,n,r,a,s;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),n=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),n=-1),r=0,t!==0&&(r=Math.atan2(n*e.x,n*e.y)),n=t*this.ns0/this.a,this.sphere?s=Math.asin((this.c-n*n)/(2*this.ns0)):(i=(this.c-n*n)/this.ns0,s=this.phi1z(this.e3,i)),a=Ue(r/this.ns0+this.long0),e.x=a,e.y=s,e}function nV(e,t){var i,n,r,a,s,l=Eo(.5*t);if(e<ke)return l;for(var c=e*e,d=1;d<=25;d++)if(i=Math.sin(l),n=Math.cos(l),r=e*i,a=1-r*r,s=.5*a*a/n*(t/(1-c)-i/a+.5/e*Math.log((1-r)/(1+r))),l=l+s,Math.abs(s)<=1e-7)return l;return null}var rV=["Albers_Conic_Equal_Area","Albers","aea"],oV={init:eV,forward:tV,inverse:iV,names:rV,phi1z:nV};function aV(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function sV(e){var t,i,n,r,a,s,l,c,d=e.x,h=e.y;return n=Ue(d-this.long0),t=Math.sin(h),i=Math.cos(h),r=Math.cos(n),s=this.sin_p14*t+this.cos_p14*i*r,a=1,s>0||Math.abs(s)<=ke?(l=this.x0+this.a*a*i*Math.sin(n)/s,c=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*i*r)/s):(l=this.x0+this.infinity_dist*i*Math.sin(n),c=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*i*r)),e.x=l,e.y=c,e}function lV(e){var t,i,n,r,a,s;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(r=Math.atan2(t,this.rc),i=Math.sin(r),n=Math.cos(r),s=Eo(n*this.sin_p14+e.y*i*this.cos_p14/t),a=Math.atan2(e.x*i,t*this.cos_p14*n-e.y*this.sin_p14*i),a=Ue(this.long0+a)):(s=this.phic0,a=0),e.x=a,e.y=s,e}var uV=["gnom"],cV={init:aV,forward:sV,inverse:lV,names:uV};function dV(e,t){var i=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-i)<1e-6)return t<0?-1*Ae:Ae;for(var n=Math.asin(.5*t),r,a,s,l,c=0;c<30;c++)if(a=Math.sin(n),s=Math.cos(n),l=e*a,r=Math.pow(1-l*l,2)/(2*s)*(t/(1-e*e)-a/(1-l*l)+.5/e*Math.log((1-l)/(1+l))),n+=r,Math.abs(r)<=1e-10)return n;return NaN}function hV(){this.sphere||(this.k0=Ir(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function pV(e){var t=e.x,i=e.y,n,r,a=Ue(t-this.long0);if(this.sphere)n=this.x0+this.a*a*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var s=xo(this.e,Math.sin(i));n=this.x0+this.a*this.k0*a,r=this.y0+this.a*s*.5/this.k0}return e.x=n,e.y=r,e}function mV(e){e.x-=this.x0,e.y-=this.y0;var t,i;return this.sphere?(t=Ue(this.long0+e.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(i=dV(this.e,2*e.y*this.k0/this.a),t=Ue(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=i,e}var fV=["cea"],vV={init:hV,forward:pV,inverse:mV,names:fV};function gV(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function yV(e){var t=e.x,i=e.y,n=Ue(t-this.long0),r=Ya(i-this.lat0);return e.x=this.x0+this.a*n*this.rc,e.y=this.y0+this.a*r,e}function bV(e){var t=e.x,i=e.y;return e.x=Ue(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=Ya(this.lat0+(i-this.y0)/this.a),e}var CV=["Equirectangular","Equidistant_Cylindrical","eqc"],_V={init:gV,forward:yV,inverse:bV,names:CV},iP=20;function wV(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=_l(this.es),this.e1=wl(this.es),this.e2=xl(this.es),this.e3=El(this.es),this.ml0=this.a*en(this.e0,this.e1,this.e2,this.e3,this.lat0)}function xV(e){var t=e.x,i=e.y,n,r,a,s=Ue(t-this.long0);if(a=s*Math.sin(i),this.sphere)Math.abs(i)<=ke?(n=this.a*s,r=-1*this.a*this.lat0):(n=this.a*Math.sin(a)/Math.tan(i),r=this.a*(Ya(i-this.lat0)+(1-Math.cos(a))/Math.tan(i)));else if(Math.abs(i)<=ke)n=this.a*s,r=-1*this.ml0;else{var l=Xa(this.a,this.e,Math.sin(i))/Math.tan(i);n=l*Math.sin(a),r=this.a*en(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+l*(1-Math.cos(a))}return e.x=n+this.x0,e.y=r+this.y0,e}function EV(e){var t,i,n,r,a,s,l,c,d;if(n=e.x-this.x0,r=e.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=ke)t=Ue(n/this.a+this.long0),i=0;else{s=this.lat0+r/this.a,l=n*n/this.a/this.a+s*s,c=s;var h;for(a=iP;a;--a)if(h=Math.tan(c),d=-1*(s*(c*h+1)-c-.5*(c*c+l)*h)/((c-s)/h-1),c+=d,Math.abs(d)<=ke){i=c;break}t=Ue(this.long0+Math.asin(n*Math.tan(c)/this.a)/Math.sin(i))}else if(Math.abs(r+this.ml0)<=ke)i=0,t=Ue(this.long0+n/this.a);else{s=(this.ml0+r)/this.a,l=n*n/this.a/this.a+s*s,c=s;var p,f,v,y,w;for(a=iP;a;--a)if(w=this.e*Math.sin(c),p=Math.sqrt(1-w*w)*Math.tan(c),f=this.a*en(this.e0,this.e1,this.e2,this.e3,c),v=this.e0-2*this.e1*Math.cos(2*c)+4*this.e2*Math.cos(4*c)-6*this.e3*Math.cos(6*c),y=f/this.a,d=(s*(p*y+1)-y-.5*p*(y*y+l))/(this.es*Math.sin(2*c)*(y*y+l-2*s*y)/(4*p)+(s-y)*(p*v-2/Math.sin(2*c))-v),c-=d,Math.abs(d)<=ke){i=c;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),t=Ue(this.long0+Math.asin(n*p/this.a)/Math.sin(i))}return e.x=t,e.y=i,e}var PV=["Polyconic","poly"],OV={init:wV,forward:xV,inverse:EV,names:PV};function MV(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function SV(e){var t,i=e.x,n=e.y,r=n-this.lat0,a=i-this.long0,s=r/ml*1e-5,l=a,c=1,d=0;for(t=1;t<=10;t++)c=c*s,d=d+this.A[t]*c;var h=d,p=l,f=1,v=0,y,w,C=0,M=0;for(t=1;t<=6;t++)y=f*h-v*p,w=v*h+f*p,f=y,v=w,C=C+this.B_re[t]*f-this.B_im[t]*v,M=M+this.B_im[t]*f+this.B_re[t]*v;return e.x=M*this.a+this.x0,e.y=C*this.a+this.y0,e}function TV(e){var t,i=e.x,n=e.y,r=i-this.x0,a=n-this.y0,s=a/this.a,l=r/this.a,c=1,d=0,h,p,f=0,v=0;for(t=1;t<=6;t++)h=c*s-d*l,p=d*s+c*l,c=h,d=p,f=f+this.C_re[t]*c-this.C_im[t]*d,v=v+this.C_im[t]*c+this.C_re[t]*d;for(var y=0;y<this.iterations;y++){var w=f,C=v,M,S,_=s,O=l;for(t=2;t<=6;t++)M=w*f-C*v,S=C*f+w*v,w=M,C=S,_=_+(t-1)*(this.B_re[t]*w-this.B_im[t]*C),O=O+(t-1)*(this.B_im[t]*w+this.B_re[t]*C);w=1,C=0;var I=this.B_re[1],A=this.B_im[1];for(t=2;t<=6;t++)M=w*f-C*v,S=C*f+w*v,w=M,C=S,I=I+t*(this.B_re[t]*w-this.B_im[t]*C),A=A+t*(this.B_im[t]*w+this.B_re[t]*C);var V=I*I+A*A;f=(_*I+O*A)/V,v=(O*I-_*A)/V}var $=f,D=v,G=1,q=0;for(t=1;t<=9;t++)G=G*$,q=q+this.D[t]*G;var H=this.lat0+q*ml*1e5,g=this.long0+D;return e.x=g,e.y=H,e}var IV=["New_Zealand_Map_Grid","nzmg"],AV={init:MV,forward:SV,inverse:TV,names:IV};function DV(){}function LV(e){var t=e.x,i=e.y,n=Ue(t-this.long0),r=this.x0+this.a*n,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return e.x=r,e.y=a,e}function BV(e){e.x-=this.x0,e.y-=this.y0;var t=Ue(this.long0+e.x/this.a),i=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=i,e}var RV=["Miller_Cylindrical","mill"],FV={init:DV,forward:LV,inverse:BV,names:RV},$V=20;function jV(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=YE(this.es)}function NV(e){var t,i,n=e.x,r=e.y;if(n=Ue(n-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var a=this.n*Math.sin(r),s=$V;s;--s){var l=(this.m*r+Math.sin(r)-a)/(this.m+Math.cos(r));if(r-=l,Math.abs(l)<ke)break}t=this.a*this.C_x*n*(this.m+Math.cos(r)),i=this.a*this.C_y*r}else{var c=Math.sin(r),d=Math.cos(r);i=this.a*nd(r,c,d,this.en),t=this.a*n*d/Math.sqrt(1-this.es*c*c)}return e.x=t,e.y=i,e}function kV(e){var t,i,n,r;return e.x-=this.x0,n=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(t))),this.m?t=Eo((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=Eo(Math.sin(t)/this.n)),n=Ue(n+this.long0),t=Ya(t)):(t=KE(e.y/this.a,this.es,this.en),r=Math.abs(t),r<Ae?(r=Math.sin(t),i=this.long0+e.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(t)),n=Ue(i)):r-ke<Ae&&(n=this.long0)),e.x=n,e.y=t,e}var VV=["Sinusoidal","sinu"],zV={init:jV,forward:NV,inverse:kV,names:VV};function GV(){}function UV(e){for(var t=e.x,i=e.y,n=Ue(t-this.long0),r=i,a=Math.PI*Math.sin(i);;){var s=-(r+Math.sin(r)-a)/(1+Math.cos(r));if(r+=s,Math.abs(s)<ke)break}r/=2,Math.PI/2-Math.abs(i)<ke&&(n=0);var l=.900316316158*this.a*n*Math.cos(r)+this.x0,c=1.4142135623731*this.a*Math.sin(r)+this.y0;return e.x=l,e.y=c,e}function HV(e){var t,i;e.x-=this.x0,e.y-=this.y0,i=e.y/(1.4142135623731*this.a),Math.abs(i)>.999999999999&&(i=.999999999999),t=Math.asin(i);var n=Ue(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),i=(2*t+Math.sin(2*t))/Math.PI,Math.abs(i)>1&&(i=1);var r=Math.asin(i);return e.x=n,e.y=r,e}var WV=["Mollweide","moll"],qV={init:GV,forward:UV,inverse:HV,names:WV};function ZV(){Math.abs(this.lat1+this.lat2)<ke||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=_l(this.es),this.e1=wl(this.es),this.e2=xl(this.es),this.e3=El(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=Ir(this.e,this.sinphi,this.cosphi),this.ml1=en(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ke?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=Ir(this.e,this.sinphi,this.cosphi),this.ml2=en(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=en(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function QV(e){var t=e.x,i=e.y,n;if(this.sphere)n=this.a*(this.g-i);else{var r=en(this.e0,this.e1,this.e2,this.e3,i);n=this.a*(this.g-r)}var a=this.ns*Ue(t-this.long0),s=this.x0+n*Math.sin(a),l=this.y0+this.rh-n*Math.cos(a);return e.x=s,e.y=l,e}function JV(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,i,n,r;this.ns>=0?(i=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(i=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var a=0;if(i!==0&&(a=Math.atan2(t*e.x,t*e.y)),this.sphere)return r=Ue(this.long0+a/this.ns),n=Ya(this.g-i/this.a),e.x=r,e.y=n,e;var s=this.g-i/this.a;return n=ad(s,this.e0,this.e1,this.e2,this.e3),r=Ue(this.long0+a/this.ns),e.x=r,e.y=n,e}var XV=["Equidistant_Conic","eqdc"],YV={init:ZV,forward:QV,inverse:JV,names:XV};function KV(){this.R=this.a}function ez(e){var t=e.x,i=e.y,n=Ue(t-this.long0),r,a;Math.abs(i)<=ke&&(r=this.x0+this.R*n,a=this.y0);var s=Eo(2*Math.abs(i/Math.PI));(Math.abs(n)<=ke||Math.abs(Math.abs(i)-Ae)<=ke)&&(r=this.x0,i>=0?a=this.y0+Math.PI*this.R*Math.tan(.5*s):a=this.y0+Math.PI*this.R*-Math.tan(.5*s));var l=.5*Math.abs(Math.PI/n-n/Math.PI),c=l*l,d=Math.sin(s),h=Math.cos(s),p=h/(d+h-1),f=p*p,v=p*(2/d-1),y=v*v,w=Math.PI*this.R*(l*(p-y)+Math.sqrt(c*(p-y)*(p-y)-(y+c)*(f-y)))/(y+c);n<0&&(w=-w),r=this.x0+w;var C=c+p;return w=Math.PI*this.R*(v*C-l*Math.sqrt((y+c)*(c+1)-C*C))/(y+c),i>=0?a=this.y0+w:a=this.y0-w,e.x=r,e.y=a,e}function tz(e){var t,i,n,r,a,s,l,c,d,h,p,f,v;return e.x-=this.x0,e.y-=this.y0,p=Math.PI*this.R,n=e.x/p,r=e.y/p,a=n*n+r*r,s=-Math.abs(r)*(1+a),l=s-2*r*r+n*n,c=-2*s+1+2*r*r+a*a,v=r*r/c+(2*l*l*l/c/c/c-9*s*l/c/c)/27,d=(s-l*l/3/c)/c,h=2*Math.sqrt(-d/3),p=3*v/d/h,Math.abs(p)>1&&(p>=0?p=1:p=-1),f=Math.acos(p)/3,e.y>=0?i=(-h*Math.cos(f+Math.PI/3)-l/3/c)*Math.PI:i=-(-h*Math.cos(f+Math.PI/3)-l/3/c)*Math.PI,Math.abs(n)<ke?t=this.long0:t=Ue(this.long0+Math.PI*(a-1+Math.sqrt(1+2*(n*n-r*r)+a*a))/2/n),e.x=t,e.y=i,e}var iz=["Van_der_Grinten_I","VanDerGrinten","vandg"],nz={init:KV,forward:ez,inverse:tz,names:iz};function rz(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function oz(e){var t=e.x,i=e.y,n=Math.sin(e.y),r=Math.cos(e.y),a=Ue(t-this.long0),s,l,c,d,h,p,f,v,y,w,C,M,S,_,O,I,A,V,$,D,G,q,H;return this.sphere?Math.abs(this.sin_p12-1)<=ke?(e.x=this.x0+this.a*(Ae-i)*Math.sin(a),e.y=this.y0-this.a*(Ae-i)*Math.cos(a),e):Math.abs(this.sin_p12+1)<=ke?(e.x=this.x0+this.a*(Ae+i)*Math.sin(a),e.y=this.y0+this.a*(Ae+i)*Math.cos(a),e):(V=this.sin_p12*n+this.cos_p12*r*Math.cos(a),I=Math.acos(V),A=I?I/Math.sin(I):1,e.x=this.x0+this.a*A*r*Math.sin(a),e.y=this.y0+this.a*A*(this.cos_p12*n-this.sin_p12*r*Math.cos(a)),e):(s=_l(this.es),l=wl(this.es),c=xl(this.es),d=El(this.es),Math.abs(this.sin_p12-1)<=ke?(h=this.a*en(s,l,c,d,Ae),p=this.a*en(s,l,c,d,i),e.x=this.x0+(h-p)*Math.sin(a),e.y=this.y0-(h-p)*Math.cos(a),e):Math.abs(this.sin_p12+1)<=ke?(h=this.a*en(s,l,c,d,Ae),p=this.a*en(s,l,c,d,i),e.x=this.x0+(h+p)*Math.sin(a),e.y=this.y0+(h+p)*Math.cos(a),e):(f=n/r,v=Xa(this.a,this.e,this.sin_p12),y=Xa(this.a,this.e,n),w=Math.atan((1-this.es)*f+this.es*v*this.sin_p12/(y*r)),C=Math.atan2(Math.sin(a),this.cos_p12*Math.tan(w)-this.sin_p12*Math.cos(a)),C===0?$=Math.asin(this.cos_p12*Math.sin(w)-this.sin_p12*Math.cos(w)):Math.abs(Math.abs(C)-Math.PI)<=ke?$=-Math.asin(this.cos_p12*Math.sin(w)-this.sin_p12*Math.cos(w)):$=Math.asin(Math.sin(a)*Math.cos(w)/Math.sin(C)),M=this.e*this.sin_p12/Math.sqrt(1-this.es),S=this.e*this.cos_p12*Math.cos(C)/Math.sqrt(1-this.es),_=M*S,O=S*S,D=$*$,G=D*$,q=G*$,H=q*$,I=v*$*(1-D*O*(1-O)/6+G/8*_*(1-2*O)+q/120*(O*(4-7*O)-3*M*M*(1-7*O))-H/48*_),e.x=this.x0+I*Math.sin(C),e.y=this.y0+I*Math.cos(C),e))}function az(e){e.x-=this.x0,e.y-=this.y0;var t,i,n,r,a,s,l,c,d,h,p,f,v,y,w,C,M,S,_,O,I,A,V,$;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*Ae*this.a?void 0:(i=t/this.a,n=Math.sin(i),r=Math.cos(i),a=this.long0,Math.abs(t)<=ke?s=this.lat0:(s=Eo(r*this.sin_p12+e.y*n*this.cos_p12/t),l=Math.abs(this.lat0)-Ae,Math.abs(l)<=ke?this.lat0>=0?a=Ue(this.long0+Math.atan2(e.x,-e.y)):a=Ue(this.long0-Math.atan2(-e.x,e.y)):a=Ue(this.long0+Math.atan2(e.x*n,t*this.cos_p12*r-e.y*this.sin_p12*n))),e.x=a,e.y=s,e)):(c=_l(this.es),d=wl(this.es),h=xl(this.es),p=El(this.es),Math.abs(this.sin_p12-1)<=ke?(f=this.a*en(c,d,h,p,Ae),t=Math.sqrt(e.x*e.x+e.y*e.y),v=f-t,s=ad(v/this.a,c,d,h,p),a=Ue(this.long0+Math.atan2(e.x,-1*e.y)),e.x=a,e.y=s,e):Math.abs(this.sin_p12+1)<=ke?(f=this.a*en(c,d,h,p,Ae),t=Math.sqrt(e.x*e.x+e.y*e.y),v=t-f,s=ad(v/this.a,c,d,h,p),a=Ue(this.long0+Math.atan2(e.x,e.y)),e.x=a,e.y=s,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),C=Math.atan2(e.x,e.y),y=Xa(this.a,this.e,this.sin_p12),M=Math.cos(C),S=this.e*this.cos_p12*M,_=-S*S/(1-this.es),O=3*this.es*(1-_)*this.sin_p12*this.cos_p12*M/(1-this.es),I=t/y,A=I-_*(1+_)*Math.pow(I,3)/6-O*(1+3*_)*Math.pow(I,4)/24,V=1-_*A*A/2-I*A*A*A/6,w=Math.asin(this.sin_p12*Math.cos(A)+this.cos_p12*Math.sin(A)*M),a=Ue(this.long0+Math.asin(Math.sin(C)*Math.sin(A)/Math.cos(w))),$=Math.sin(w),s=Math.atan2(($-this.es*V*this.sin_p12)*Math.tan(w),$*(1-this.es)),e.x=a,e.y=s,e))}var sz=["Azimuthal_Equidistant","aeqd"],lz={init:rz,forward:oz,inverse:az,names:sz};function uz(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function cz(e){var t,i,n,r,a,s,l,c,d=e.x,h=e.y;return n=Ue(d-this.long0),t=Math.sin(h),i=Math.cos(h),r=Math.cos(n),s=this.sin_p14*t+this.cos_p14*i*r,a=1,(s>0||Math.abs(s)<=ke)&&(l=this.a*a*i*Math.sin(n),c=this.y0+this.a*a*(this.cos_p14*t-this.sin_p14*i*r)),e.x=l,e.y=c,e}function dz(e){var t,i,n,r,a,s,l;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),i=Eo(t/this.a),n=Math.sin(i),r=Math.cos(i),s=this.long0,Math.abs(t)<=ke?(l=this.lat0,e.x=s,e.y=l,e):(l=Eo(r*this.sin_p14+e.y*n*this.cos_p14/t),a=Math.abs(this.lat0)-Ae,Math.abs(a)<=ke?(this.lat0>=0?s=Ue(this.long0+Math.atan2(e.x,-e.y)):s=Ue(this.long0-Math.atan2(-e.x,e.y)),e.x=s,e.y=l,e):(s=Ue(this.long0+Math.atan2(e.x*n,t*this.cos_p14*r-e.y*this.sin_p14*n)),e.x=s,e.y=l,e))}var hz=["ortho"],pz={init:uz,forward:cz,inverse:dz,names:hz},ei={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},St={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function mz(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Ae-Mt/2?this.face=ei.TOP:this.lat0<=-(Ae-Mt/2)?this.face=ei.BOTTOM:Math.abs(this.long0)<=Mt?this.face=ei.FRONT:Math.abs(this.long0)<=Ae+Mt?this.face=this.long0>0?ei.RIGHT:ei.LEFT:this.face=ei.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function fz(e){var t={x:0,y:0},i,n,r,a,s,l,c={value:0};if(e.x-=this.long0,this.es!==0?i=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):i=e.y,n=e.x,this.face===ei.TOP)a=Ae-i,n>=Mt&&n<=Ae+Mt?(c.value=St.AREA_0,r=n-Ae):n>Ae+Mt||n<=-(Ae+Mt)?(c.value=St.AREA_1,r=n>0?n-pi:n+pi):n>-(Ae+Mt)&&n<=-Mt?(c.value=St.AREA_2,r=n+Ae):(c.value=St.AREA_3,r=n);else if(this.face===ei.BOTTOM)a=Ae+i,n>=Mt&&n<=Ae+Mt?(c.value=St.AREA_0,r=-n+Ae):n<Mt&&n>=-Mt?(c.value=St.AREA_1,r=-n):n<-Mt&&n>=-(Ae+Mt)?(c.value=St.AREA_2,r=-n-Ae):(c.value=St.AREA_3,r=n>0?-n+pi:-n-pi);else{var d,h,p,f,v,y,w;this.face===ei.RIGHT?n=Ka(n,+Ae):this.face===ei.BACK?n=Ka(n,+pi):this.face===ei.LEFT&&(n=Ka(n,-Ae)),f=Math.sin(i),v=Math.cos(i),y=Math.sin(n),w=Math.cos(n),d=v*w,h=v*y,p=f,this.face===ei.FRONT?(a=Math.acos(d),r=sd(a,p,h,c)):this.face===ei.RIGHT?(a=Math.acos(h),r=sd(a,p,-d,c)):this.face===ei.BACK?(a=Math.acos(-d),r=sd(a,p,-h,c)):this.face===ei.LEFT?(a=Math.acos(-h),r=sd(a,p,d,c)):(a=r=0,c.value=St.AREA_0)}return l=Math.atan(12/pi*(r+Math.acos(Math.sin(r)*Math.cos(Mt))-Ae)),s=Math.sqrt((1-Math.cos(a))/(Math.cos(l)*Math.cos(l))/(1-Math.cos(Math.atan(1/Math.cos(r))))),c.value===St.AREA_1?l+=Ae:c.value===St.AREA_2?l+=pi:c.value===St.AREA_3&&(l+=1.5*pi),t.x=s*Math.cos(l),t.y=s*Math.sin(l),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function vz(e){var t={lam:0,phi:0},i,n,r,a,s,l,c,d,h,p={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),i=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?p.value=St.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(p.value=St.AREA_1,i-=Ae):e.x<0&&-e.x>=Math.abs(e.y)?(p.value=St.AREA_2,i=i<0?i+pi:i-pi):(p.value=St.AREA_3,i+=Ae),h=pi/12*Math.tan(i),s=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),l=Math.atan(s),r=Math.cos(i),a=Math.tan(n),c=1-r*r*a*a*(1-Math.cos(Math.atan(1/Math.cos(l)))),c<-1?c=-1:c>1&&(c=1),this.face===ei.TOP)d=Math.acos(c),t.phi=Ae-d,p.value===St.AREA_0?t.lam=l+Ae:p.value===St.AREA_1?t.lam=l<0?l+pi:l-pi:p.value===St.AREA_2?t.lam=l-Ae:t.lam=l;else if(this.face===ei.BOTTOM)d=Math.acos(c),t.phi=d-Ae,p.value===St.AREA_0?t.lam=-l+Ae:p.value===St.AREA_1?t.lam=-l:p.value===St.AREA_2?t.lam=-l-Ae:t.lam=l<0?-l-pi:-l+pi;else{var f,v,y;f=c,h=f*f,h>=1?y=0:y=Math.sqrt(1-h)*Math.sin(l),h+=y*y,h>=1?v=0:v=Math.sqrt(1-h),p.value===St.AREA_1?(h=v,v=-y,y=h):p.value===St.AREA_2?(v=-v,y=-y):p.value===St.AREA_3&&(h=v,v=y,y=-h),this.face===ei.RIGHT?(h=f,f=-v,v=h):this.face===ei.BACK?(f=-f,v=-v):this.face===ei.LEFT&&(h=f,f=v,v=-h),t.phi=Math.acos(-y)-Ae,t.lam=Math.atan2(v,f),this.face===ei.RIGHT?t.lam=Ka(t.lam,-Ae):this.face===ei.BACK?t.lam=Ka(t.lam,-pi):this.face===ei.LEFT&&(t.lam=Ka(t.lam,+Ae))}if(this.es!==0){var w,C,M;w=t.phi<0?1:0,C=Math.tan(t.phi),M=this.b/Math.sqrt(C*C+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-M*M)/(this.one_minus_f*M)),w&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function sd(e,t,i,n){var r;return e<ke?(n.value=St.AREA_0,r=0):(r=Math.atan2(t,i),Math.abs(r)<=Mt?n.value=St.AREA_0:r>Mt&&r<=Ae+Mt?(n.value=St.AREA_1,r-=Ae):r>Ae+Mt||r<=-(Ae+Mt)?(n.value=St.AREA_2,r=r>=0?r-pi:r+pi):(n.value=St.AREA_3,r+=Ae)),r}function Ka(e,t){var i=e+t;return i<-pi?i+=fl:i>+pi&&(i-=fl),i}var gz=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],yz={init:mz,forward:fz,inverse:vz,names:gz},iv=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Pl=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],nP=.8487,rP=1.3523,oP=Sr/5,bz=1/oP,es=18,ld=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},Cz=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function _z(e,t,i,n){for(var r=t;n;--n){var a=e(r);if(r-=a,Math.abs(a)<i)break}return r}function wz(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function xz(e){var t=Ue(e.x-this.long0),i=Math.abs(e.y),n=Math.floor(i*oP);n<0?n=0:n>=es&&(n=es-1),i=Sr*(i-bz*n);var r={x:ld(iv[n],i)*t,y:ld(Pl[n],i)};return e.y<0&&(r.y=-r.y),r.x=r.x*this.a*nP+this.x0,r.y=r.y*this.a*rP+this.y0,r}function Ez(e){var t={x:(e.x-this.x0)/(this.a*nP),y:Math.abs(e.y-this.y0)/(this.a*rP)};if(t.y>=1)t.x/=iv[es][0],t.y=e.y<0?-Ae:Ae;else{var i=Math.floor(t.y*es);for(i<0?i=0:i>=es&&(i=es-1);;)if(Pl[i][0]>t.y)--i;else if(Pl[i+1][0]<=t.y)++i;else break;var n=Pl[i],r=5*(t.y-n[0])/(Pl[i+1][0]-n[0]);r=_z(function(a){return(ld(n,a)-t.y)/Cz(n,a)},r,ke,100),t.x/=ld(iv[i],r),t.y=(5*i+r)*$i,e.y<0&&(t.y=-t.y)}return t.x=Ue(t.x+this.long0),t}var Pz=["Robinson","robin"],Oz={init:wz,forward:xz,inverse:Ez,names:Pz};function Mz(){this.name="geocent"}function Sz(e){var t=DE(e,this.es,this.a);return t}function Tz(e){var t=LE(e,this.es,this.a,this.b);return t}var Iz=["Geocentric","geocentric","geocent","Geocent"],Az={init:Mz,forward:Sz,inverse:Tz,names:Iz},Ui={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},Ol={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Dz(){if(Object.keys(Ol).forEach(function(i){if(typeof this[i]=="undefined")this[i]=Ol[i].def;else{if(Ol[i].num&&isNaN(this[i]))throw new Error("Invalid parameter value, must be numeric "+i+" = "+this[i]);Ol[i].num&&(this[i]=parseFloat(this[i]))}Ol[i].degrees&&(this[i]=this[i]*$i)}.bind(this)),Math.abs(Math.abs(this.lat0)-Ae)<ke?this.mode=this.lat0<0?Ui.S_POLE:Ui.N_POLE:Math.abs(this.lat0)<ke?this.mode=Ui.EQUIT:(this.mode=Ui.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var e=this.tilt,t=this.azi;this.cg=Math.cos(t),this.sg=Math.sin(t),this.cw=Math.cos(e),this.sw=Math.sin(e)}function Lz(e){e.x-=this.long0;var t=Math.sin(e.y),i=Math.cos(e.y),n=Math.cos(e.x),r,a;switch(this.mode){case Ui.OBLIQ:a=this.sinph0*t+this.cosph0*i*n;break;case Ui.EQUIT:a=i*n;break;case Ui.S_POLE:a=-t;break;case Ui.N_POLE:a=t;break}switch(a=this.pn1/(this.p-a),r=a*i*Math.sin(e.x),this.mode){case Ui.OBLIQ:a*=this.cosph0*t-this.sinph0*i*n;break;case Ui.EQUIT:a*=t;break;case Ui.N_POLE:a*=-(i*n);break;case Ui.S_POLE:a*=i*n;break}var s,l;return s=a*this.cg+r*this.sg,l=1/(s*this.sw*this.h1+this.cw),r=(r*this.cg-a*this.sg)*this.cw*l,a=s*l,e.x=r*this.a,e.y=a*this.a,e}function Bz(e){e.x/=this.a,e.y/=this.a;var t={x:e.x,y:e.y},i,n,r;r=1/(this.pn1-e.y*this.sw),i=this.pn1*e.x*r,n=this.pn1*e.y*this.cw*r,e.x=i*this.cg+n*this.sg,e.y=n*this.cg-i*this.sg;var a=mr(e.x,e.y);if(Math.abs(a)<ke)t.x=0,t.y=e.y;else{var s,l;switch(l=1-a*a*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/a+a/this.pn1),s=Math.sqrt(1-l*l),this.mode){case Ui.OBLIQ:t.y=Math.asin(s*this.sinph0+e.y*l*this.cosph0/a),e.y=(s-this.sinph0*Math.sin(t.y))*a,e.x*=l*this.cosph0;break;case Ui.EQUIT:t.y=Math.asin(e.y*l/a),e.y=s*a,e.x*=l;break;case Ui.N_POLE:t.y=Math.asin(s),e.y=-e.y;break;case Ui.S_POLE:t.y=-Math.asin(s);break}t.x=Math.atan2(e.x,e.y)}return e.x=t.x+this.long0,e.y=t.y,e}var Rz=["Tilted_Perspective","tpers"],Fz={init:Dz,forward:Lz,inverse:Bz,names:Rz};function $z(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var e=1-this.es,t=1/e;this.radius_p=Math.sqrt(e),this.radius_p2=e,this.radius_p_inv2=t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function jz(e){var t=e.x,i=e.y,n,r,a,s;if(t=t-this.long0,this.shape==="ellipse"){i=Math.atan(this.radius_p2*Math.tan(i));var l=this.radius_p/mr(this.radius_p*Math.cos(i),Math.sin(i));if(r=l*Math.cos(t)*Math.cos(i),a=l*Math.sin(t)*Math.cos(i),s=l*Math.sin(i),(this.radius_g-r)*r-a*a-s*s*this.radius_p_inv2<0)return e.x=Number.NaN,e.y=Number.NaN,e;n=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(a/mr(s,n)),e.y=this.radius_g_1*Math.atan(s/n)):(e.x=this.radius_g_1*Math.atan(a/n),e.y=this.radius_g_1*Math.atan(s/mr(a,n)))}else this.shape==="sphere"&&(n=Math.cos(i),r=Math.cos(t)*n,a=Math.sin(t)*n,s=Math.sin(i),n=this.radius_g-r,this.flip_axis?(e.x=this.radius_g_1*Math.atan(a/mr(s,n)),e.y=this.radius_g_1*Math.atan(s/n)):(e.x=this.radius_g_1*Math.atan(a/n),e.y=this.radius_g_1*Math.atan(s/mr(a,n))));return e.x=e.x*this.a,e.y=e.y*this.a,e}function Nz(e){var t=-1,i=0,n=0,r,a,s,l;if(e.x=e.x/this.a,e.y=e.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*mr(1,n)):(i=Math.tan(e.x/this.radius_g_1),n=Math.tan(e.y/this.radius_g_1)*mr(1,i));var c=n/this.radius_p;if(r=i*i+c*c+t*t,a=2*this.radius_g*t,s=a*a-4*r*this.C,s<0)return e.x=Number.NaN,e.y=Number.NaN,e;l=(-a-Math.sqrt(s))/(2*r),t=this.radius_g+l*t,i*=l,n*=l,e.x=Math.atan2(i,t),e.y=Math.atan(n*Math.cos(e.x)/t),e.y=Math.atan(this.radius_p_inv2*Math.tan(e.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(e.y/this.radius_g_1),i=Math.tan(e.x/this.radius_g_1)*Math.sqrt(1+n*n)):(i=Math.tan(e.x/this.radius_g_1),n=Math.tan(e.y/this.radius_g_1)*Math.sqrt(1+i*i)),r=i*i+n*n+t*t,a=2*this.radius_g*t,s=a*a-4*r*this.C,s<0)return e.x=Number.NaN,e.y=Number.NaN,e;l=(-a-Math.sqrt(s))/(2*r),t=this.radius_g+l*t,i*=l,n*=l,e.x=Math.atan2(i,t),e.y=Math.atan(n*Math.cos(e.x)/t)}return e.x=e.x+this.long0,e}var kz=["Geostationary Satellite View","Geostationary_Satellite","geos"],Vz={init:$z,forward:jz,inverse:Nz,names:kz};function zz(e){e.Proj.projections.add(rd),e.Proj.projections.add(od),e.Proj.projections.add(ZN),e.Proj.projections.add(rk),e.Proj.projections.add(ck),e.Proj.projections.add(fk),e.Proj.projections.add(_k),e.Proj.projections.add(Ok),e.Proj.projections.add(Ak),e.Proj.projections.add(Fk),e.Proj.projections.add(Kk),e.Proj.projections.add(oV),e.Proj.projections.add(cV),e.Proj.projections.add(vV),e.Proj.projections.add(_V),e.Proj.projections.add(OV),e.Proj.projections.add(AV),e.Proj.projections.add(FV),e.Proj.projections.add(zV),e.Proj.projections.add(qV),e.Proj.projections.add(YV),e.Proj.projections.add(nz),e.Proj.projections.add(lz),e.Proj.projections.add(pz),e.Proj.projections.add(yz),e.Proj.projections.add(Oz),e.Proj.projections.add(Az),e.Proj.projections.add(Fz),e.Proj.projections.add(Vz)}Tn.defaultDatum="WGS84",Tn.Proj=Ar,Tn.WGS84=new Tn.Proj("WGS84"),Tn.Point=Qa,Tn.toPoint=$E,Tn.defs=Ki,Tn.nadgrid=Jj,Tn.transform=id,Tn.mgrs=hN,Tn.version="__VERSION__",zz(Tn);function Gz(e,t,i,n,r){const a=1+Math.floor((e+180)/6),s=i+" +zone="+a+(t<0?" +south":""),l=Tn(n,s,[e,t]);return{utmZone:a+(t<0?"S":"N"),north:l[1].toFixed(2)+r,east:l[0].toFixed(2)+r}}class Uz{constructor(t){this.gridFileUrl=t,this.data=void 0,this.minimumHeight=-106.99,this.maximumHeight=85.39}isSupported(){return typeof Int16Array!="undefined"&&typeof Uint8Array!="undefined"}getHeight(t,i){return aP(this).then(function(n){return sP(n,t,i)})}getHeights(t){return aP(this).then(function(i){for(let n=0;n<t.length;++n){const r=t[n];r.height=sP(i,r.longitude,r.latitude)}return t})}}async function aP(e){const{defined:t}=Cesium;t(e.data)||(e.data=Hz(e.gridFileUrl));let i=e.data;if(e.data instanceof Promise&&(i=await e.data),!(e.data instanceof Int16Array)){const n=new Uint8Array(i);for(let r=0;r<n.length;r+=2){const a=n[r];n[r]=n[r+1],n[r+1]=a}e.data=new Int16Array(i)}return e.data}function sP(e,t,i){const{Math:n}=Cesium;let r=720*(n.PI_OVER_TWO-i)/Math.PI;r<0?r=0:r>720&&(r=720),t=n.zeroToTwoPi(t);let a=1440*t/n.TWO_PI;a<0?a=0:a>1440&&(a=1440);const s=a|0,l=r|0,c=a-s,d=r-l,h=1-c,p=1-d,f=ud(e,l,s),v=ud(e,l,s+1),y=ud(e,l+1,s),w=ud(e,l+1,s+1);return(f*h*p+v*c*p+y*h*d+w*c*d)/100}function ud(e,t,i){return t>720?t=720:t<0&&(t=0),i>1439?i-=1440:i<0&&(i+=1440),e[t*1440+i]}function Hz(e){const{Resource:t}=Cesium;return t.createIfNeeded(e).fetchArrayBuffer()}class Wz{constructor(t){const{Cartographic:i,knockout:n}=Cesium,r=t.gridFileUrl;r&&(this.geoidModel=new Uz(r)),this.proj4Projection=t.proj4Projection,this.projectionUnits=t.projectionUnits,this.proj4longlat=t.proj4longlat,this.lastHeightSamplePosition=new i,this.accurateSamplingDebounceTime=250,this.tileRequestInFlight=void 0,this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east="",this.useProjection=!1,this.debounceSampleAccurateHeight=i8(this.sampleAccurateHeight,this.accurateSamplingDebounceTime),this.decimal=t.decimal||5,this.rangeType=t.rangeType||0,n.track(this,["elevation","utmZone","latitude","longitude","north","east","useProjection"])}toggleUseProjection(){this.useProjection=!this.useProjection}updateCoordinatesFromCesium(t,i){const{Cartographic:n,defined:r,EllipsoidTerrainProvider:a,Intersections2D:s,SceneMode:l}=Cesium,c=t.scene,d=c.camera.getPickRay(i),h=c.globe,p=h.pickTriangle(d,c);if(r(p)){const f=h.ellipsoid,v=f.cartesianToCartographic(p.v0),y=f.cartesianToCartographic(p.v1),w=f.cartesianToCartographic(p.v2),C=f.cartesianToCartographic(c.mode===l.SCENE3D?p.intersection:c.globe.pick(d,c));let M;if(h.terrainProvider instanceof a)C.height=void 0;else{const _=s.computeBarycentricCoordinates(C.longitude,C.latitude,v.longitude,v.latitude,y.longitude,y.latitude,w.longitude,w.latitude);if(_.x>=-1e-15&&_.y>=-1e-15&&_.z>=-1e-15){const G=_.x*v.height+_.y*y.height+_.z*w.height;C.height=G}const O=h.terrainProvider.getLevelMaximumGeometricError(p.tile.level),I=C.height,A=Math.max(p.tile.data.tileBoundingRegion.minimumHeight,I-O),V=Math.min(p.tile.data.tileBoundingRegion.maximumHeight,I+O),$=A-(this.geoidModel?this.geoidModel.minimumHeight:0),D=V+(this.geoidModel?this.geoidModel.maximumHeight:0);M=Math.max(Math.abs(I-$),Math.abs(D-I))}n.clone(C,this.lastHeightSamplePosition);const S=h.terrainProvider;this.cartographicToFields(C,M),S instanceof a||this.debounceSampleAccurateHeight(S,C)}else this.elevation="",this.utmZone="",this.latitude="",this.longitude="",this.north="",this.east=""}cartographicToFields(t,i){const{Math:n}=Cesium,r=n.toDegrees(t.latitude),a=n.toDegrees(t.longitude);if(this.useProjection){const l=Gz(a,r,this.proj4Projection,this.proj4longlat,this.projectionUnits);this.utmZone=l.utmZone,this.north=l.north,this.east=l.east}const s=cj(a,r,{height:t.height,errorBar:i,decimal:this.decimal,rangeType:this.rangeType});this.latitude=s.latitude,this.longitude=s.longitude,this.elevation=s.elevation}sampleAccurateHeight(t,i){const{Cartographic:n,sampleTerrainMostDetailed:r}=Cesium;if(this.tileRequestInFlight){this.debounceSampleAccurateHeight.cancel(),this.debounceSampleAccurateHeight(t,i);return}const a=n.clone(i),s=this.geoidModel?this.geoidModel.getHeight(i.longitude,i.latitude):void 0,l=r(t,[a]);this.tileRequestInFlight=Promise.all([s,l]).then(c=>{const d=c[0]||0;this.tileRequestInFlight=void 0,n.equals(i,this.lastHeightSamplePosition)&&(i.height=a.height-d,this.cartographicToFields(i))}).catch(()=>{this.tileRequestInFlight=void 0})}}const qz=[],Zz={start:0,stop:0},Qz={},Jz={},Xz={};function Yz(){const{Globe:e,GlobeSurfaceTile:t,BoundingSphere:i,defaultValue:n,Cartesian3:r,defined:a,DeveloperError:s,IntersectionTests:l,SceneMode:c}=Cesium;e.prototype.pickTriangle=e.prototype.pickTriangle||function(d,h,p,f){if(!a(d))throw new s("ray is required");if(!a(h))throw new s("scene is required");p=n(p,!0);const v=h.mode,y=h.mapProjection,w=qz;w.length=0;const C=this._surface._tilesToRender;let M=C.length,S,_;for(_=0;_<M;++_){S=C[_];const I=S.data;if(!a(I))continue;const A=I.pickBoundingSphere;v!==c.SCENE3D?(i.fromRectangleWithHeights2D(S.rectangle,y,I.minimumHeight,I.maximumHeight,A),r.fromElements(A.center.z,A.center.x,A.center.y,A.center)):i.clone(I.boundingSphere3D,A);const V=l.raySphere(d,A,Zz);a(V)&&w.push(S)}w.sort(Kz(d.origin));let O;for(M=w.length,_=0;_<M;++_)if(O=w[_].data.pickTriangle(d,h.mode,h.mapProjection,p,f),a(O)){O.tile=w[_];break}return O},t.prototype.pickTriangle=t.prototype.pickTriangle||function(d,h,p,f){const v=this.renderedMesh;if(!a(v))return;const y=v.vertices,w=v.indices,C=v.encoding,M=w.length;for(let S=0;S<M;S+=3){const _=w[S],O=w[S+1],I=w[S+2],A=nv(C,h,p,y,_,Qz),V=nv(C,h,p,y,O,Jz),$=nv(C,h,p,y,I,Xz),D=l.rayTriangle(d,A,V,$,f,new r);if(a(D))return{intersection:D,v0:A,v1:V,v2:$}}}}function Kz(e){const{BoundingSphere:t}=Cesium;return function(i,n){const r=t.distanceSquaredTo(i.data.pickBoundingSphere,e),a=t.distanceSquaredTo(n.data.pickBoundingSphere,e);return r-a}}function nv(e,t,i,n,r,a){e.decodePosition(n,r,a);const{Cartesian3:s,defined:l,SceneMode:c}=Cesium;if(l(t)&&t!==c.SCENE3D){const d=i.ellipsoid.cartesianToCartographic(a);i.project(d,a),s.fromElements(a.z,a.x,a.y,a)}return a}var lP={gridFileUrl:{type:String,default:"https://zouyaoji.top/vue-cesium/SampleData/WW15MGH.DAC"},proj4Projection:{type:String,default:"+proj=utm +ellps=GRS80 +units=m +no_defs"},projectionUnits:{type:String,default:"m"},proj4longlat:{type:String,default:"+proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees +no_defs"},position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},color:{type:String,default:"#fff"},decimal:{type:Number,default:6},rangeType:{type:Number,default:0},background:{type:String,default:"#3f4854"},showCameraInfo:{type:Boolean,default:!0},showMouseInfo:{type:Boolean,default:!0},showPerformanceInfo:{type:Boolean,default:!0},useProjection:{type:Boolean,default:!0},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const eG={...je,statusBarEvt:e=>!0},rv=lP;var ov=de({name:"VcStatusBar",props:rv,emits:eG,setup(e,t){var i;const n=fe();n.cesiumClass="VcStatusBar",n.cesiumEvents=[];const r=ht(e,t,n);if(r===void 0)return;const a=bi(n),{$services:s}=r,l=he(null),c=he(null),{t:d}=ri();let h=-1,p=-1;const f=Ve({heading:"NaN",pitch:"NaN",roll:"NaN",height:"NaN",level:"NaN"}),v=Ve({fps:"NaN",ms:"NaN"}),y=he(),w=Sn(e),C=((i=a.proxy)==null?void 0:i.$options.name)==="VcNavigation",M=he(C),S=Ve({});let _=!1;Pe(()=>e,D=>{nt(()=>{n.mounted&&O()})},{deep:!0}),n.createCesiumObject=async()=>{const{viewer:D}=s,G=D._element;return e.showMouseInfo&&(y.value=new Wz({gridFileUrl:e.gridFileUrl,proj4Projection:e.proj4Projection,projectionUnits:e.projectionUnits,proj4longlat:e.proj4longlat,decimal:e.decimal,rangeType:e.rangeType}),G.addEventListener("wheel",V,!1),G.addEventListener("mousemove",V,!1),G.addEventListener("touchmove",V,!1),Yz()),e.showCameraInfo&&(D.camera.changed.addEventListener(A),A()),e.showPerformanceInfo&&(_=D.scene.debugShowFramesPerSecond,D.scene.debugShowFramesPerSecond=!0,D.scene.postRender.addEventListener(I)),l},n.mount=async()=>{var D,G;M.value=!0,nt(()=>{O()});const{viewer:q}=s;return(G=q.viewerWidgetResized)==null||G.raiseEvent({type:n.cesiumClass,status:"mounted",target:(D=De(l))==null?void 0:D.$el}),!0},n.unmount=async()=>{var D,G;M.value=!1;const{viewer:q}=s,H=q._element;return e.showMouseInfo&&(y.value=void 0,H.removeEventListener("wheel",V),H.removeEventListener("mousemove",V),H.removeEventListener("touchmove",V)),e.showCameraInfo&&q.camera.changed.removeEventListener(A),e.showPerformanceInfo&&(_?q.scene._performanceDisplay._container.style.display="block":q.scene.debugShowFramesPerSecond=!1,q.scene.postRender.removeEventListener(I)),(G=q.viewerWidgetResized)==null||G.raiseEvent({type:n.cesiumClass,status:"unmounted",target:(D=De(l))==null?void 0:D.$el}),!0};const O=()=>{const D=w.style.value;if(S.left=D.left,S.top=D.top,S.transform=D.transform,D.background=e.background,D.color=e.color,typeof e.teleportToViewer=="undefined"||e.teleportToViewer){const G=w.attach.value;(G.bottom||G.top)&&!G.left&&!G.right&&(D.left="50%",D.transform="translate(-50%, 0)"),(G.left||G.right)&&!G.top&&!G.bottom&&(D.top="50%",D.transform="translate(0, -50%)")}Object.assign(S,D)},I=Fm(D=>{var G,q;v.fps=(G=D._performanceDisplay)==null?void 0:G._fpsText.nodeValue,v.ms=(q=D._performanceDisplay)==null?void 0:q._msText.nodeValue,D._performanceDisplay._container.style.display="none"},250),A=()=>{const{viewer:D}=s,G=D.scene,q=G.screenSpaceCameraController;if(G.mode===Cesium.SceneMode.MORPHING||!q.enableInputs)return;const{Math:H}=Cesium;f.heading=H.toDegrees(D.camera.heading).toFixed(1),f.pitch=H.toDegrees(D.camera.pitch).toFixed(1),f.roll=H.toDegrees(D.camera.roll).toFixed(1),f.height=D.camera.positionCartographic.height.toFixed(2),f.level=Rp(Number(f.height)).toFixed(0),Ze(n,"statusBarEvt")&&t.emit("statusBarEvt",{type:"statusBar",mouseCoordsInfo:y.value,cameraInfo:f,performanceInfo:v})},V=D=>{var G;const{Cartesian2:q,SceneMode:H}=Cesium,{viewer:g}=s;if(g.scene.mode===H.MORPHING)return;const b=D.type==="mousemove"||D.type==="wheel"?D.clientX:D.changedTouches[0].clientX,E=D.type==="mousemove"||D.type==="wheel"?D.clientY:D.changedTouches[0].clientY;if(b===h&&E===p)return;h=b,p=E;const L=g._element;if(g){if(e.showMouseInfo){const P=L.getBoundingClientRect(),T=new q(b-P.left,E-P.top);(G=y.value)==null||G.updateCoordinatesFromCesium(g,T)}Ze(n,"statusBarEvt")&&t.emit("statusBarEvt",{type:"statusBar",mouseCoordsInfo:y.value,cameraInfo:f,performanceInfo:v})}},$=()=>{var D,G;e.useProjection&&((D=De(c))==null||D.hide(),e.showMouseInfo&&((G=y.value)==null||G.toggleUseProjection()))};return Object.assign(n.proxy,{getMouseCoordsInfo:()=>y.value,getCameraInfo:()=>f,getPerformanceInfo:()=>v}),()=>{var D,G,q,H,g,b,E,L;if(M.value){const P=[];e.showMouseInfo?((D=y.value)!=null&&D.useProjection?P.push(R("div",{class:"vc-section-short ellipsis"},[R("span",{...t.attrs},d("vc.navigation.statusBar.zone")),R("span",null,(H=y.value)==null?void 0:H.utmZone)]),R("div",{class:"vc-section ellipsis"},[R("span",{...t.attrs},d("vc.navigation.statusBar.e")),R("span",null,(g=y.value)==null?void 0:g.east)]),R("div",{class:"vc-section ellipsis"},[R("span",{...t.attrs},d("vc.navigation.statusBar.n")),R("span",null,(b=y.value)==null?void 0:b.north)])):P.push(R("div",{class:"vc-section ellipsis"},[R("span",{...t.attrs},d("vc.navigation.statusBar.lng")),R("span",{},(G=y.value)==null?void 0:G.longitude)]),R("div",{class:"vc-section ellipsis"},[R("span",{},d("vc.navigation.statusBar.lat")),R("span",{},(q=y.value)==null?void 0:q.latitude)])),(E=y.value)!=null&&E.elevation?P.push(R("div",{class:"vc-section ellipsis"},[R("span",{...t.attrs},d("vc.navigation.statusBar.elev")),R("span",{},(L=y.value)==null?void 0:L.elevation)])):P.push(me("v-if"))):P.push(me("v-if")),e.showCameraInfo?P.push(R("div",{class:"vc-section-short-mini ellipsis"},[R("span",{...t.attrs},d("vc.navigation.statusBar.level")),R("span",null,f.level)]),R("div",{class:"vc-section-short ellipsis"},[R("span",{...t.attrs},d("vc.navigation.statusBar.heading")),R("span",null,`${f.heading}\xB0`)]),R("div",{class:"vc-section-short ellipsis"},[R("span",{...t.attrs},d("vc.navigation.statusBar.pitch")),R("span",null,`${f.pitch}\xB0`)]),R("div",{class:"vc-section-short ellipsis"},[R("span",{...t.attrs},d("vc.navigation.statusBar.roll")),R("span",null,`${f.roll}\xB0`)]),R("div",{class:"vc-section ellipsis"},[R("span",{...t.attrs},d("vc.navigation.statusBar.cameraHeight")),R("span",null,`${f.height}m`)])):P.push(me("v-if")),e.showPerformanceInfo?P.push(R("div",{class:"vc-section-short-mini ellipsis"},[R("span",null,v.ms)]),R("div",{class:"vc-section-short-mini ellipsis"},[R("span",null,v.fps)])):P.push(me("v-if")),Gt(e.tooltip)&&e.showMouseInfo&&e.useProjection?P.push(R(xi,{ref:c,...e.tooltip},()=>R("strong",null,Gt(e.tooltip)&&e.tooltip.tip||d("vc.navigation.statusBar.tip")))):P.push(me("v-if"));const T=R(Yi,{ref:l,class:`vc-status-bar ${w.classes.value} ${e.customClass}`,style:S,noCaps:!0,onClick:$},()=>P);return!C&&e.teleportToViewer?R(Ur,{to:s.viewer._element},T):T}else return me("v-if")}}}),uP={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},color:{type:String,default:"#fff"},background:{type:String,default:"#3f4854"},width:{type:Number,default:100},barBackground:{type:String,default:"#fff"},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}};const tG={...je,distanceLegendEvt:e=>!0},av=uP;var sv=de({name:"VcDistanceLegend",props:av,emits:tG,setup(e,t){var i;const n=fe();n.cesiumClass="VcDistanceLegend",n.cesiumEvents=[];const r=ht(e,t,n);if(r===void 0)return;const a=bi(n),{$services:s}=r,l=he(null),c=he(""),d=Sn(e),h=((i=a.proxy)==null?void 0:i.$options.name)==="VcNavigation",p=he(h),f=Ve({});let v=0;const y=he(0);let w=0;Pe(()=>e,_=>{nt(()=>{n.mounted&&M()})},{deep:!0});const C=ge(()=>({width:`${y.value}px`,left:`${5+(e.width+15-y.value)/2}px`,height:"2px",background:e.barBackground}));n.createCesiumObject=async()=>(c.value="",l),n.mount=async()=>{var _,O;p.value=!0,nt(()=>{M()});const{viewer:I}=s;return I.scene.postRender.addEventListener(S),(O=I.viewerWidgetResized)==null||O.raiseEvent({type:n.cesiumClass,status:"mounted",target:(_=De(l))==null?void 0:_.$el}),!0},n.unmount=async()=>{var _,O;p.value=!1;const{viewer:I}=s;return I.scene.postRender.removeEventListener(S),(O=I.viewerWidgetResized)==null||O.raiseEvent({type:n.cesiumClass,status:"unmounted",target:(_=De(l))==null?void 0:_.$el}),!0};const M=()=>{const _=d.style.value;if(f.left=_.left,f.top=_.top,f.transform=_.transform,_.background=e.background,_.color=e.color,typeof e.teleportToViewer=="undefined"||e.teleportToViewer){const O=d.attach.value;(O.bottom||O.top)&&!O.left&&!O.right&&(_.left="50%",_.transform="translate(-50%, 0)"),(O.left||O.right)&&!O.top&&!O.bottom&&(_.top="50%",_.transform="translate(0, -50%)")}_.width=`${e.width}px`,Object.assign(f,_)},S=Fm(_=>{const{Cartesian2:O,defined:I,getTimestamp:A,EllipsoidGeodesic:V}=Cesium,$=A();if($<v+250)return;v=$;const D=new V,G=_.canvas.clientWidth,q=_.canvas.clientHeight,H=_.camera.getPickRay(new O(G/2|0,q-1)),g=_.camera.getPickRay(new O(1+G/2|0,q-1)),b=_.globe,E=b.pick(H,_),L=b.pick(g,_);if(!I(E)||!I(L)){y.value=0,c.value="";return}const P=b.ellipsoid.cartesianToCartographic(E),T=b.ellipsoid.cartesianToCartographic(L);D.setEndPoints(P,T);const F=D.surfaceDistance,N=e.width-10;let j;for(let U=lv.length-1;!I(j)&&U>=0;--U)lv[U]/F<N&&(j=lv[U],w!==j&&(w=j,Ze(n,"distanceLegendEvt")&&t.emit("distanceLegendEvt",{type:"distanceLegend",distance:w,status:"changed"})));if(I(j)){let U;w>=1e3?U=(j/1e3).toString()+" km":U=j.toString()+" m",y.value=j/F|0,c.value=U}else y.value=0,c.value=""},500);return()=>{if(p.value&&c.value!==void 0){const _=R(Yi,{ref:l,class:`vc-distance-legend ${d.classes.value} ${e.customClass}`,style:f,stack:!0,noCaps:!0},()=>[R("label",null,c.value),R("div",{style:C.value,class:"vc-bar"})]);return!h&&e.teleportToViewer?R(Ur,{to:s.viewer._element},_):_}else return me("v-if")}}});const lv=[1,2,3,5,10,20,30,50,100,200,300,500,1e3,2e3,3e3,5e3,1e4,2e4,3e4,5e4,1e5,2e5,3e5,5e5,1e6,2e6,3e6,5e6,1e7,2e7,3e7,5e7],cP={..._o,compassOpts:{type:[Object,Boolean],default:()=>Gn(Df,["position","offset"])},zoomOpts:{type:[Object,Boolean],default:()=>Gn(jf,["position","offset"])},printOpts:{type:[Object,Boolean],default:()=>Gn(gE,["position","offset"])},locationOpts:{type:[Object,Boolean],default:()=>Gn(yE,["position","offset"])},otherOpts:{type:[Object,Boolean],default:()=>({position:"bottom-right",offset:[2,3],statusBarOpts:Gn(lP,["position","offset"]),distancelegendOpts:Gn(uP,["position","offset"])})},customClass:{type:String,default:""},teleportToViewer:{type:Boolean,default:!0}},Ml=Gn(cP),iG={...je,zoomEvt:e=>!0,compassEvt:e=>!0,locationEvt:e=>!0,printEvt:e=>!0,statusBarEvt:e=>!0,distanceLegendEvt:e=>!0},uv=cP;var dP=de({name:"VcNavigation",inheritAttrs:!1,props:uv,emits:iG,setup(e,t){const i=fe();i.cesiumClass="VcNavigation";const n=ht(e,t,i);if(n===void 0)return;const r=he(!1),{$services:a}=n,s=Sn(e),l=Sn(e.otherOpts||{position:"bottom-right"}),c=he(null),d=he(null),h=he(null),p=he(null),f=he(null),v=he(null),y=he(null),w=he(null),C=Ve({}),M=Ve({}),{emit:S}=t;Pe(()=>e,()=>{nt(()=>{var L,P,T,F,N,j;E(),(L=De(h))==null||L.reload(),(P=De(p))==null||P.reload(),(T=De(v))==null||T.reload(),(F=De(f))==null||F.reload(),(N=De(y))==null||N.reload(),(j=De(w))==null||j.reload()})},{deep:!0});const _=ge(()=>Object.assign({},Ml.compassOpts,e.compassOpts)),O=ge(()=>Object.assign({},Ml.zoomOpts,e.zoomOpts)),I=ge(()=>Object.assign({},Ml.printOpts,e.printOpts)),A=ge(()=>Object.assign({},Ml.locationOpts,e.locationOpts)),V=ge(()=>Object.assign({},Ml.otherOpts,e.otherOpts)),$=L=>{Ze(i,"compassEvt")&&S("compassEvt",L)},D=L=>{Ze(i,"zoomEvt")&&S("zoomEvt",L)},G=L=>{Ze(i,"printEvt")&&S("printEvt",L)},q=L=>{Ze(i,"locationEvt")&&S("locationEvt",L)},H=L=>{Ze(i,"statusBarEvt")&&S("statusBarEvt",L)},g=L=>{Ze(i,"distanceLegendEvt")&&S("distanceLegendEvt",L)};i.createCesiumObject=async()=>{var L;const{viewer:P}=a;return(L=P.viewerWidgetResized)==null||L.addEventListener(b),[c,d]},i.mount=async()=>{var L;r.value=!0,nt(()=>{E()});const{viewer:P}=a;return(L=P.viewerWidgetResized)==null||L.raiseEvent({type:i.cesiumClass,status:"mounted",target:De(c)}),!0},i.unmount=async()=>{var L,P;r.value=!1;const{viewer:T}=a;return(L=T.viewerWidgetResized)==null||L.removeEventListener(b),(P=T.viewerWidgetResized)==null||P.raiseEvent({type:i.cesiumClass,status:"unmounted",target:De(c)}),!0};const b=()=>{nt(()=>{E()})},E=()=>{var L,P,T,F,N;const j=(L=De(h))==null?void 0:L.$el;let U=0,te=0;if(j!==void 0&&j.nodeName!=="#comment"){const ne=getComputedStyle(j.parentNode).margin;te=parseInt(ne),U+=j.getBoundingClientRect().height+te*2}const ie=(P=De(p))==null?void 0:P.$el;ie!==void 0&&ie.nodeName!=="#comment"&&(U+=ie.getBoundingClientRect().height+te*2);const K=(T=De(f))==null?void 0:T.$el;K!==void 0&&K.nodeName!=="#comment"&&(U+=K.getBoundingClientRect().height+te*2);const Z=(F=De(v))==null?void 0:F.$el;Z!==void 0&&Z.nodeName!=="#comment"&&(U+=Z.getBoundingClientRect().height+te*2);const z=s.style.value,Q=s.attach.value;C.left=z.left,C.top=z.top,C.transform=z.transform,(typeof e.teleportToViewer=="undefined"||e.teleportToViewer)&&((Q.bottom||Q.top)&&!Q.left&&!Q.right&&(z.left="50%",z.transform="translate(-50%, 0)"),(Q.left||Q.right)&&!Q.top&&!Q.bottom&&(z.top="50%",z.transform="translate(0, -50%)")),Object.assign(C,z,{height:`${U}px`});const re=l.style.value,X=l.attach.value;M.left=re.left,M.top=re.top,M.transform=re.transform,(typeof e.teleportToViewer=="undefined"||e.teleportToViewer)&&((X.bottom||X.top)&&!X.left&&!X.right&&(re.left="50%",re.transform="translate(-50%, 0)"),(X.left||X.right)&&!X.top&&!X.bottom&&(re.top="50%",re.transform="translate(0, -50%)"));let J=0;const ae=(N=De(y))==null?void 0:N.$el;ae!==void 0&&ae.nodeName!=="#comment"&&(J+=ae.getBoundingClientRect().height),Object.assign(M,re,{height:`${J}px`})};return()=>{if(r.value){const L=[];_.value&&e.compassOpts!==!1?L.push(R("div",{class:"vc-navigation-control"},[R($f,{ref:h,..._.value,onCompassEvt:$})])):L.push(me("v-if")),O.value&&e.zoomOpts!==!1?L.push(R("div",{class:"vc-navigation-control"},[R(Vf,{ref:p,...O.value,onZoomEvt:D})])):L.push(me("v-if")),I.value&&e.printOpts!==!1?L.push(R("div",{class:"vc-navigation-control"},[R(Gf,{ref:f,...I.value,onPrintEvt:G})])):L.push(me("v-if")),A.value&&e.locationOpts!==!1?L.push(R("div",{class:"vc-navigation-control"},[R(Hf,{ref:v,...A.value,onLocationEvt:q})])):L.push(me("v-if"));let P=[R("div",{class:"vc-navigation-controls"},L)];P=Zn(t.slots.default,P);const T=[],F=R("div",{ref:c,class:`vc-navigation ${s.classes.value} ${e.customClass}`,style:C},P);if(e.teleportToViewer?T.push(R(Ur,{to:a.viewer._element},F)):T.push(F),e.otherOpts!==!1){const N=R("div",{ref:d,class:"vc-location-other-controls "+l.classes.value,style:M},[R(ov,{ref:y,...V.value.statusBarOpts,onStatusBarEvt:H}),R(sv,{ref:w,...V.value.distancelegendOpts,onDistanceLegendEvt:g})]);e.teleportToViewer?T.push(R(Ur,{to:a.viewer._element},N)):T.push(N)}return T}else return me("v-if")}}});function nG(e,{emit:t},i){const n={},r={},a={},s={};let l,c,d,h;const p=he(0);let f,v,y=0,w={},C=0,M,S,_,O={},I=0;const A=he(56),V=he(3);let $;const D=he(null),G=F=>{var N;F.stopPropagation&&F.stopPropagation(),F.preventDefault&&F.preventDefault(),(N=De(D))==null||N.hide();const{Cartesian2:j,SceneMode:U,Math:te}=Cesium;if(i.viewer.scene.mode===U.MORPHING)return!0;const ie=F.currentTarget,K=F.currentTarget.getBoundingClientRect(),Z=new j((K.right-K.left)/2,(K.bottom-K.top)/2);let z;F instanceof MouseEvent?(z=new j(F.clientX-K.left,F.clientY-K.top),$=new j(F.clientX,F.clientY)):F instanceof TouchEvent&&(z=new j(F.changedTouches[0].clientX-K.left,F.changedTouches[0].clientY-K.top),$=new j(F.changedTouches[0].clientX,F.changedTouches[0].clientY));const Q=j.subtract(z,Z,n),re=j.magnitude(Q);if(re>30&&re<45)E(ie,Q);else if(!(re>50&&re<70))b(ie,Q);else{const X=te.PI_OVER_TWO-Math.atan2(-Q.y,Q.x);X>=0&&X<=te.PI_OVER_TWO&&L(ie,Q)}},q=F=>{const{Cartesian2:N,Math:j}=Cesium,U=F.currentTarget.getBoundingClientRect(),te=new N((U.right-U.left)/2,(U.bottom-U.top)/2),ie=F.type==="mouseup"?new N(F.clientX-U.left,F.clientY-U.top):new N(F.changedTouches[0].clientX-U.left,F.changedTouches[0].clientY-U.top),K=N.subtract(ie,te,n),Z=N.magnitude(K);if(Z>30&&Z<45){const z=j.toDegrees(Math.atan2(-K.y,K.x)),Q=F.type==="mouseup"?new N(F.clientX,F.clientY):new N(F.changedTouches[0].clientX,F.changedTouches[0].clientY),re=Q.x-$.x,X=Q.y-$.y;if(Math.sqrt(re*re+X*X)>5)return;const J=j.toDegrees(p.value),ae=Math.abs(z-J),ne=i.viewer.scene;(z>0&&J>0&&J<90&&ae>80&&ae<100||ae>260&&ae<280)&&ne.camera.flyTo({destination:ne.camera.position,orientation:{heading:0,pitch:ne.camera.pitch}})}},H=F=>{const{Cartesian2:N,Cartesian3:j,defined:U,Matrix4:te,Ray:ie,SceneMode:K,Transforms:Z}=Cesium,{viewer:z}=i,Q=z.scene,re=Q.camera,X=Q.screenSpaceCameraController;if(Q.mode===K.MORPHING||!X.enableInputs)return!0;if(Q.mode===K.COLUMBUS_VIEW&&!X.enableTranslate||(Q.mode===K.SCENE3D||Q.mode===K.COLUMBUS_VIEW)&&(!X.enableLook||Q.mode===K.SCENE3D&&!X.enableRotate))return;const J=new N;J.x=Q.canvas.clientWidth/2,J.y=Q.canvas.clientHeight/2;const ae=new ie,ne=re.getPickRay(J,ae),ce=Q.globe.pick(ne,Q,s);if(!U(ce)){z.camera.flyHome();return}const le=Ze(i,"compassEvt");le&&t("compassEvt",{type:"reset",camera:z.camera,status:"start",target:F.currentTarget});const pe=Z.eastNorthUpToFixedFrame(ce||new j,z.scene.globe.ellipsoid),Ce=j.subtract(ce||new j,re.position,new j),Se=hE.createTween(Q,{destination:te.multiplyByPoint(pe,new j(0,0,j.magnitude(Ce)),new j),direction:te.multiplyByPointAsVector(pe,new j(0,0,-1),new j),up:te.multiplyByPointAsVector(pe,new j(0,1,0),new j),duration:e.duration,complete:()=>{le&&t("compassEvt",{type:"reset",camera:z.camera,status:"end",target:F.currentTarget})},cancel:()=>{le&&t("compassEvt",{type:"reset",camera:z.camera,status:"cancel",target:F.currentTarget})}});Q.tweens.add(Se)},g=()=>{const{defined:F}=Cesium;F(i.viewer)?(l&&(l(),l=void 0),l=i.viewer.scene.postRender.addEventListener(function(){p.value!==i.viewer.scene.camera.heading&&(p.value=i.viewer.scene.camera.heading)})):l&&(l(),l=void 0)},b=(F,N)=>{const{defined:j,getTimestamp:U,SceneMode:te,Math:ie,ScreenSpaceEventType:K}=Cesium,Z=i.viewer.scene,z=Z.screenSpaceCameraController;switch(Z.mode){case te.COLUMBUS_VIEW:if(z.enableLook)break;if(!z.enableTranslate||!z.enableTilt)return;break;case te.SCENE3D:if(z.enableLook)break;if(!z.enableTilt||!z.enableRotate)return;break;case Cesium.SceneMode.SCENE2D:if(!z.enableTranslate)return;break}M.removeInputAction(K.LEFT_UP),j(h)&&i.viewer.clock.onTick.removeEventListener(h),d=void 0,h=void 0,U();let Q=ie.PI_OVER_TWO-Math.atan2(-N.y,N.x);const re=Math.PI/4;let X=0;const J={LEFT:1,RIGHT:2,UP:3,DOWN:4};X=Q>=-re&&re>=Q?J.DOWN:Q>=re&&3*re>=Q?J.RIGHT:Q>=3*re&&5*re>=Q?J.UP:J.LEFT;const ae=Ze(i,"compassEvt");let ne="rotateEast";switch(X){case J.LEFT:ne="rotateWest";break;case J.RIGHT:ne="rotateEast";break;case J.UP:ne="rotateNorth";break;case J.DOWN:ne="rotateSouth"}ae&&t("compassEvt",{type:ne,camera:Z.camera,status:"start",target:F}),h=function(ce){const le=i.viewer.scene,pe=le.camera;switch(U(),Q=20*Math.abs(pe.positionCartographic.height/6378317)*5e-4,X){case J.LEFT:pe.rotateLeft(Q);break;case J.RIGHT:pe.rotateRight(Q);break;case J.UP:pe.rotate(pe.right,-Q);break;case J.DOWN:pe.rotate(pe.right,Q)}ae&&t("compassEvt",{type:ne,camera:le.camera,status:"changing",target:F})},d=function(ce){M.removeInputAction(K.LEFT_UP),j(h)&&i.viewer.clock.onTick.removeEventListener(h),d=void 0,h=void 0,ae&&t("compassEvt",{type:ne,camera:Z.camera,status:"end",target:F})},M.setInputAction(d,K.LEFT_UP),c=i.viewer.clock.onTick.addEventListener(h)},E=(F,N)=>{if(!e.enableCompassOuterRing)return;const j=i.viewer.scene;let U=j.camera;const te=j.screenSpaceCameraController;if(j.mode===Cesium.SceneMode.MORPHING||j.mode===Cesium.SceneMode.SCENE2D||!te.enableInputs||!te.enableLook&&(j.mode===Cesium.SceneMode.COLUMBUS_VIEW||j.mode===Cesium.SceneMode.SCENE3D&&!te.enableRotate))return;document.removeEventListener("mousemove",v,!1),document.removeEventListener("touchmove",v,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1);const{Cartesian2:ie,Cartesian3:K,defined:Z,Math:z,Matrix4:Q,Ray:re,Transforms:X}=Cesium;v=void 0,f=void 0;const J=Ze(i,"compassEvt");J&&t("compassEvt",{type:"rotate",camera:j.camera,status:"start",target:F}),y=Math.atan2(-N.y,N.x);const ae=new ie;ae.x=j.canvas.clientWidth/2,ae.y=j.canvas.clientHeight/2;const ne=new re,ce=U.getPickRay(ae,ne),le=j.globe.pick(ce,j,s);Z(le)?w=X.eastNorthUpToFixedFrame(le||new K,j.globe.ellipsoid,a):w=X.eastNorthUpToFixedFrame(U.positionWC,j.globe.ellipsoid,a);let pe=Q.clone(U.transform,r);U.lookAtTransform(w),C=Math.atan2(U.position.y,U.position.x),K.magnitude(new K(U.position.x,U.position.y,0)),U.lookAtTransform(pe),v=function(Ce){const Se=F.getBoundingClientRect(),Re=new ie((Se.right-Se.left)/2,(Se.bottom-Se.top)/2);let Me;Ce instanceof MouseEvent?Me=new ie(Ce.clientX-Se.left,Ce.clientY-Se.top):Ce instanceof TouchEvent&&(Me=new ie(Ce.changedTouches[0].clientX-Se.left,Ce.changedTouches[0].clientY-Se.top));const Te=ie.subtract(Me,Re,n),$e=Math.atan2(-Te.y,Te.x)-y,Le=z.zeroToTwoPi(C-$e);U=i.viewer.scene.camera,pe=Q.clone(U.transform,r),U.lookAtTransform(w);const Ie=Math.atan2(U.position.y,U.position.x);U.rotateRight(Le-Ie),U.lookAtTransform(pe),J&&t("compassEvt",{type:"rotate",camera:j.camera,status:"changing",target:F})},f=function(Ce){document.removeEventListener("mousemove",v,!1),document.removeEventListener("touchmove",v,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1),v=void 0,f=void 0,J&&t("compassEvt",{type:"rotate",camera:j.camera,status:"end",target:F})},document.addEventListener("mousemove",v,!1),document.addEventListener("touchmove",v,!1),document.addEventListener("mouseup",f,!1),document.addEventListener("touchend",f,!1)},L=(F,N)=>{const{Cartesian2:j,defined:U,Math:te,Matrix4:ie,ScreenSpaceEventType:K,Transforms:Z}=Cesium;M.removeInputAction(K.MOUSE_MOVE),M.removeInputAction(K.LEFT_UP),S=void 0,_=void 0,I=te.PI_OVER_TWO-Math.atan2(-N.y,N.x),I=I<0?0:I,I=I>te.PI_OVER_TWO?te.PI_OVER_TWO:I;const z=i.viewer.scene,Q=z.camera,re=new j;re.x=z.canvas.clientWidth/2,re.y=z.canvas.clientHeight/2;let X=Q.pickEllipsoid(re,z.globe.ellipsoid);if(!U(X))for(;re.y<z.canvas.clientHeight;)re.y+=5,X=Q.pickEllipsoid(re,z.globe.ellipsoid);const J=Ze(i,"compassEvt");J&&t("compassEvt",{type:"tilt",camera:z.camera,status:"start",target:F}),_r(X)&&U(X)&&(O=Z.eastNorthUpToFixedFrame(X,z.globe.ellipsoid)),S=ae=>{const ne=F.getBoundingClientRect(),ce=new Cesium.Cartesian2((ne.right-ne.left)/2,(ne.bottom-ne.top)/2),le=j.clone(ae.endPosition),pe=j.subtract(le,ce,n);let Ce=te.PI_OVER_TWO-Math.atan2(-pe.y,pe.x);Ce=Ce<0?0:Ce,Ce=Ce>te.PI_OVER_TWO?te.PI_OVER_TWO:Ce;const Se=i.viewer.scene.camera,Re=ie.clone(Se.transform,r);Se.lookAtTransform(O);const Me=Ce-I;Se.rotateUp(Me),I=Ce,Se.lookAtTransform(Re);let Te=Math.ceil(Ce/(Math.PI/40));Te=Te>19?19:Te;const $e=cv()[Te];A.value=$e.x,V.value=$e.y,J&&t("compassEvt",{type:"tilt",camera:z.camera,status:"changing",target:F})},_=function(ae){M.removeInputAction(K.MOUSE_MOVE),M.removeInputAction(K.LEFT_UP),S=void 0,_=void 0,J&&t("compassEvt",{type:"tilt",camera:z.camera,status:"end",target:F})},M.setInputAction(S,K.MOUSE_MOVE),M.setInputAction(_,K.LEFT_UP)},P=F=>{v!==void 0&&(F.cancel=!0)},T=()=>{const{Math:F}=Cesium,N=F.PI_OVER_TWO+i.viewer.scene.camera.pitch,j=Math.PI/2/20;let U=Math.floor(N/j);U=U>19?19:U,U=U<0?0:U,A.value=cv()[U].x,V.value=cv()[U].y};return{heading:p,handleDoubleClick:H,handleMouseDown:G,handleMouseUp:q,onTooltipBeforeShow:P,viewerChange:g,load:async(F,N)=>(i.viewer=F,p.value=F.scene.camera.heading,g(),M=new Cesium.ScreenSpaceEventHandler(N),T(),!0),unload:async()=>(document.removeEventListener("mousemove",v,!1),document.removeEventListener("touchmove",v,!1),document.removeEventListener("mouseup",f,!1),document.removeEventListener("touchend",f,!1),c&&c(),l&&l(),M==null||M.destroy(),!0),tiltbarLeft:A,tiltbarTop:V,tooltipRef:D}}function cv(){return[{x:56,y:3},{x:59,y:4},{x:64,y:5},{x:69,y:6},{x:74,y:7},{x:79,y:9},{x:84,y:12},{x:89,y:15},{x:92,y:19},{x:94,y:20},{x:99,y:25},{x:104,y:34},{x:106,y:40},{x:107,y:44},{x:107,y:46},{x:107,y:48},{x:107,y:50},{x:107,y:52},{x:107,y:54},{x:107,y:56}]}const dv={enableCompassOuterRing:{type:Boolean,default:!0},duration:{type:Number,default:1.5},tooltip:{type:[Boolean,Object],default:()=>({delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0})},autoHidden:{type:Boolean,default:!0},..._o},rG={...je,compassEvt:e=>!0};var hv=de({name:"VcCompassSm",props:dv,emits:rG,setup(e,t){var i;const n=fe();n.cesiumClass="VcCompassSm";const r=ht(e,t,n);if(r===void 0)return;ri();const a=bi(n),{$services:s}=r,l=nG(e,t,n),c=Sn(e),d=he(null),h=he(null),p=((i=a.proxy)==null?void 0:i.$options.name)==="VcNavigationSm",f=he(p),v=Ve({});Pe(()=>e,S=>{nt(()=>{n.mounted&&M()})},{deep:!0});const y=ge(()=>({left:l.tiltbarLeft.value+"px",top:l.tiltbarTop.value+"px",visibility:e.autoHidden?"hidden":"visible"})),w=ge(()=>({visibility:e.autoHidden?"hidden":"visible"})),C=ge(()=>({transform:"rotate(-"+l.heading.value+"rad)",WebkitTransform:"rotate(-"+l.heading.value+"rad)"}));n.createCesiumObject=async()=>{f.value=!0;const{viewer:S}=s;return new Promise((_,O)=>{nt(()=>{p||S._element.appendChild(De(d)),_(De(d))})})},n.mount=async()=>{var S;M();const{viewer:_}=s;return(S=_.viewerWidgetResized)==null||S.raiseEvent({type:n.cesiumClass,status:"mounted",target:De(d)}),l.load(s.viewer,De(d))},n.unmount=async()=>{var S;const{viewer:_}=s,O=_._element;return p||O.contains(De(d))&&O.removeChild(De(d)),(S=_.viewerWidgetResized)==null||S.raiseEvent({type:n.cesiumClass,status:"unmounted",target:De(d)}),l.unload()};const M=()=>{const S=c.style.value;v.left=S.left,v.top=S.top,v.transform=S.transform;const _=c.attach.value,O=De(h);if(O!==void 0){const I=O==null?void 0:O.getBoundingClientRect();S.width=`${I==null?void 0:I.width}px`,S.height=`${I==null?void 0:I.height}px`,(_.bottom||_.top)&&!_.left&&!_.right&&(S.left="50%",S.transform="translate(-50%, 0)"),(_.left||_.right)&&!_.top&&!_.bottom&&(S.top="50%",S.transform="translate(0, -50%)")}Object.assign(v,S)};return()=>{if(f.value){let S=[];return S=Zn(t.slots.default,S),S.push(R("div",{class:"vc-compass-tilt-sm",style:w.value})),S.push(R("div",{class:"vc-compass-tiltbar-sm",style:y.value})),S.push(R("div",{class:"vc-compass-arrows-sm",style:w.value})),S.push(R("div",{ref:h,class:"vc-compass-outer-ring-sm",style:C.value})),S.push(R("div",{class:"vc-arrows-e-sm",style:w.value})),S.push(R("div",{class:"vc-arrows-n-sm",style:w.value})),S.push(R("div",{class:"vc-arrows-s-sm",style:w.value})),S.push(R("div",{class:"vc-arrows-w-sm",style:w.value})),R("div",{ref:d,class:"vc-compass-sm "+c.classes.value,style:v,onMousedown:l.handleMouseDown,onMouseup:l.handleMouseUp,onTouchend:l.handleMouseUp,onTouchstart:l.handleMouseDown},S)}else return me("v-if")}}});function oG(e,{emit:t},i,n){const r=he(65),a=he(null),s=he(null),l=he(null);let c,d,h,p,f,v,y,w,C,M,S,_;const O=D=>{var G,q,H;const{defined:g,getTimestamp:b,SceneMode:E,ScreenSpaceEventType:L}=Cesium,{viewer:P}=n;(G=De(a))==null||G.hide(),(q=De(s))==null||q.hide(),(H=De(l))==null||H.hide(),c.removeInputAction(L.LEFT_UP),g(d)&&P.clock.onTick.removeEventListener(d),h=void 0,d=void 0,b();const T=P.scene.camera;d=()=>{P.scene.mode===E.COLUMBUS_VIEW||P.scene.mode===E.SCENE2D?T.zoomIn():V(1)},h=()=>{c.removeInputAction(L.LEFT_UP),g(d)&&P.clock.onTick.removeEventListener(d),h=void 0,d=void 0},c.setInputAction(h,L.LEFT_UP),p=P.clock.onTick.addEventListener(d)},I=D=>{var G,q,H;(G=De(a))==null||G.hide(),(q=De(s))==null||q.hide(),(H=De(l))==null||H.hide();const{defined:g,getTimestamp:b,SceneMode:E,ScreenSpaceEventType:L}=Cesium,{viewer:P}=n;c.removeInputAction(L.LEFT_UP),g(f)&&P.clock.onTick.removeEventListener(f),v=void 0,f=void 0,b();const T=P.scene.camera;f=()=>{P.scene.mode===E.COLUMBUS_VIEW||P.scene.mode===E.SCENE2D?T.zoomOut():V(-1)},v=()=>{c.removeInputAction(L.LEFT_UP),g(f)&&P.clock.onTick.removeEventListener(f),v=void 0,f=void 0},c.setInputAction(v,L.LEFT_UP),y=P.clock.onTick.addEventListener(f)},A=D=>{var G,q,H;(G=De(a))==null||G.hide(),(q=De(s))==null||q.hide(),(H=De(l))==null||H.hide();const{Cartesian2:g,defined:b,SceneMode:E}=Cesium,{viewer:L}=n;document.removeEventListener("mousemove",w,!1),document.removeEventListener("touchmove",w,!1),document.removeEventListener("mouseup",C,!1),document.removeEventListener("touchend",C,!1),b(M)&&L.clock.onTick.removeEventListener(M),C=void 0,M=void 0;const P=L.scene.camera;M=()=>{const T=r.value-65;T>0?L.scene.mode===E.COLUMBUS_VIEW||L.scene.mode===E.SCENE2D?P.zoomOut():V(-1):T<0&&(L.scene.mode===E.COLUMBUS_VIEW||L.scene.mode===E.SCENE2D?P.zoomIn():V(1))},w=T=>{const F=r.value,N=T.target.parentElement.getBoundingClientRect(),j=_.getBoundingClientRect(),U=new Cesium.Cartesian2;U.x=T.type==="touchmove"?T.changedTouches[0].clientX-j.left:T.clientX-j.left,U.y=T.type==="touchmove"?T.changedTouches[0].clientY-j.top:T.clientY-j.top;let te=new g(N.width-U.x,N.height-U.y).y-16;te=te<0?0:te,te=te>120?120:te,r.value=120-te,r.value-F>0?L.scene.mode===E.COLUMBUS_VIEW||L.scene.mode===E.SCENE2D?P.zoomOut():V(-1):L.scene.mode===E.COLUMBUS_VIEW||L.scene.mode===E.SCENE2D?P.zoomIn():V(1)},C=()=>{document.removeEventListener("mousemove",w,!1),document.removeEventListener("touchmove",w,!1),document.removeEventListener("mouseup",C,!1),document.removeEventListener("touchend",C,!1),b(M)&&L.clock.onTick.removeEventListener(M),C=void 0,w=void 0,M=void 0,r.value=65},document.addEventListener("mousemove",w,!1),document.addEventListener("touchmove",w,!1),document.addEventListener("mouseup",C,!1),document.addEventListener("touchend",C,!1),S=L.clock.onTick.addEventListener(M)},V=D=>{const{Cartesian2:G,Cartesian3:q,defined:H,Ellipsoid:g,Math:b}=Cesium,{viewer:E}=n,L=E.scene,P=L.camera,T=L.canvas,F=new G;F.x=T.clientWidth/2,F.y=T.clientHeight/2;const N=$(F);if(H(N)){const j=q.distance(P.position,N);let U=.0618*D*.2;U=j>300?U:2*U;const te=j*U,ie=new q;q.subtract(N,P.position,ie);const K=q.clone(P.right),Z=q.dot(ie,K),z=new q;q.multiplyByScalar(K,Z,z),q.subtract(ie,z,ie),q.normalize(ie,ie),P.move(ie,te);const Q=new q;q.normalize(N,Q);const re=P.pickEllipsoid(F,E.scene.globe.ellipsoid);if(_r(re)&&H(re)&&!isNaN(re.x)&&!isNaN(re.y)&&!isNaN(re.z)&&!(P.positionCartographic.height<0)){q.normalize(re,re);const X=q.angleBetween(Q,re);if(!b.equalsEpsilon(X,0,b.EPSILON10)){const J=q.cross(Q,re,new q);P.rotate(J,X),Ze(i,"zoomEvt")&&t("zoomEvt",{type:D===1?"zoomIn":"zoomOut",camera:E.camera,status:"end"})}}}},$=D=>{const{defined:G,Cartesian3:q}=Cesium,{viewer:H}=n,g=H.scene,b=g.globe,E=g.camera;if(G(b)){let L;g.pickPositionSupported&&(L=g.pickPositionWorldCoordinates(D));const P=E.getPickRay(D),T=b.pick(P,g),F=G(L)?q.distance(L,E.positionWC):Number.POSITIVE_INFINITY;return(_r(T)&&G(T)?q.distance(T,E.positionWC):Number.POSITIVE_INFINITY)>F?L:T}};return{handleZoomInMouseDown:O,handleZoomOutMouseDown:I,handleZoomBarScrollMouseDown:A,load:D=>(_=D,c=new Cesium.ScreenSpaceEventHandler(D),!0),unload:()=>(document.removeEventListener("mousemove",w,!1),document.removeEventListener("touchmove",w,!1),document.removeEventListener("mouseup",C,!1),document.removeEventListener("touchend",C,!1),p==null||p(),y==null||y(),S==null||S(),c==null||c.destroy(),!0),zoombarTop:r,zoomInTooltipRef:a,zoomOutTooltipRef:s,zoomBarTooltipRef:l,onTooltipBeforeShow:D=>{(w!==void 0||d!==void 0||f!==void 0)&&(D.cancel=!0)}}}const pv={..._o,autoHidden:{type:Boolean,default:!1},tooltip:{type:Object,default:()=>({delay:1e3,anchor:"bottom middle",offset:[0,20],zoomInTip:void 0,zoomOutTip:void 0,zoomBarTip:void 0})}},aG={...je,zoomEvt:e=>!0};var mv=de({name:"VcZoomControlSm",props:pv,emits:aG,setup(e,t){var i;const n=fe();n.cesiumClass="VcZoomControlSm",n.cesiumEvents=[];const r=he(),a=he(),s=he(),l=he(),c=((i=bi(n).proxy)==null?void 0:i.$options.name)==="VcNavigationSm",d=he(c),h=Ve({}),p=ht(e,t,n);if(p===void 0)return;const{t:f}=ri(),{$services:v}=p,y=Sn(e),w=oG(e,t,n,v);Pe(()=>e,S=>{nt(()=>{n.mounted&&M()})},{deep:!0});const C=ge(()=>({top:w.zoombarTop.value+"px"}));n.createCesiumObject=async()=>new Promise((S,_)=>{d.value=!0,nt(()=>{const O=De(r),{viewer:I}=v;if(c)S(O);else{const A=I._element;_r(O)&&(A==null||A.appendChild(O)),S(O)}})}),n.mount=async()=>{var S;M();const{viewer:_}=v;return(S=_.viewerWidgetResized)==null||S.raiseEvent({type:n.cesiumClass,status:"mounted",target:De(r)}),w.load(De(r))},n.unmount=async()=>{var S;const{viewer:_}=v;if(!c){const O=_._element,I=De(r);_r(I)&&O!=null&&O.contains(I)&&O.removeChild(I)}return(S=_.viewerWidgetResized)==null||S.raiseEvent({type:n.cesiumClass,status:"unmounted",target:De(r)}),w.unload()};const M=()=>{const S=y.style.value;if(h.left=S.left,h.top=S.top,h.transform=S.transform,h.visibility=e.autoHidden?"hidden":"visible",!c){const _=y.attach.value;(_.bottom||_.top)&&!_.left&&!_.right&&(S.left="50%",S.transform="translate(-50%, 0)"),(_.left||_.right)&&!_.top&&!_.bottom&&(S.top="50%",S.transform="translate(0, -50%)")}Object.assign(h,S)};return()=>{if(d.value){let S=[];return S=Zn(t.slots.default,S),S.push(R("div",{ref:a,class:"vc-zoomin-sm",onMousedown:w.handleZoomInMouseDown,onTouchstart:w.handleZoomInMouseDown},e.tooltip?R(xi,{ref:w.zoomInTooltipRef,...e.tooltip,onBeforeShow:w.onTooltipBeforeShow},()=>R("strong",{},e.tooltip.zoomInTip||f("vc.navigationSm.zoomCotrol.zoomInTip"))):me("v-if"))),S.push(R("div",{ref:l,class:"vc-zoomout-sm",onMousedown:w.handleZoomOutMouseDown,onTouchstart:w.handleZoomOutMouseDown},e.tooltip?R(xi,{ref:w.zoomInTooltipRef,...e.tooltip,onBeforeShow:w.onTooltipBeforeShow},()=>R("strong",{},e.tooltip.zoomOutTip||f("vc.navigationSm.zoomCotrol.zoomOutTip"))):me("v-if"))),S.push(R("div",{ref:s,class:"vc-zoombar-sm",style:C.value,onMousedown:w.handleZoomBarScrollMouseDown,onTouchstart:w.handleZoomBarScrollMouseDown},e.tooltip?R(xi,{ref:w.zoomInTooltipRef,...e.tooltip,onBeforeShow:w.onTooltipBeforeShow},()=>R("strong",{},e.tooltip.zoomBarTip||f("vc.navigationSm.zoomCotrol.zoomBarTip"))):me("v-if"))),R("div",{ref:r,class:"vc-zoom-control-sm "+y.classes.value,style:h},S)}else return me("v-if")}}});const hP={enableCompassOuterRing:!0,duration:1.5,autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}},pP={autoHidden:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20],tip:void 0}},fv={..._o,compassOpts:{type:[Boolean,Object],default:()=>hP},zoomOpts:{type:[Boolean,Object],default:()=>pP}},sG={...je,zoomEvt:e=>!0,compassEvt:e=>!0};var mP=de({name:"VcNavigationSm",inheritAttrs:!1,props:fv,emits:sG,setup(e,t){const i=fe();i.cesiumClass="VcNavigationSm";const n=ht(e,t,i);if(n===void 0)return;const r=he(!1),{$services:a}=n,s=Sn(e),l=he(null),c=he(null),d=he(null),h=Ve({}),{emit:p}=t;Pe(()=>e,()=>{nt(()=>{var S,_;M(),(S=De(c))==null||S.reload(),(_=De(d))==null||_.reload()})},{deep:!0});const f=ge(()=>Object.assign({},hP,e.compassOpts)),v=ge(()=>Object.assign({},pP,e.zoomOpts)),y=S=>{Ze(i,"compassEvt")&&p("compassEvt",S)},w=S=>{Ze(i,"zoomEvt")&&p("zoomEvt",S)};i.createCesiumObject=async()=>{var S;r.value=!0;const{viewer:_}=a;return(S=_.viewerWidgetResized)==null||S.addEventListener(C),new Promise((O,I)=>{nt(()=>{_._element.appendChild(De(l)),O(De(l))})})},i.mount=async()=>{var S;M();const{viewer:_}=a;return(S=_.viewerWidgetResized)==null||S.raiseEvent({type:i.cesiumClass,status:"mounted",target:De(l)}),!0},i.unmount=async()=>{var S,_;const{viewer:O}=a,I=O._element;return I.contains(De(l))&&I.removeChild(De(l)),(S=O.viewerWidgetResized)==null||S.removeEventListener(C),(_=O.viewerWidgetResized)==null||_.raiseEvent({type:i.cesiumClass,status:"unmounted",target:De(l)}),!0};const C=()=>{nt(()=>{M()})},M=()=>{const S=s.style.value,_=s.attach.value;h.left=S.left,h.top=S.top,h.transform=S.transform,(_.bottom||_.top)&&!_.left&&!_.right&&(S.left="50%",S.transform="translate(-50%, 0)"),(_.left||_.right)&&!_.top&&!_.bottom&&(S.top="50%",S.transform="translate(0, -50%)"),Object.assign(h,S)};return()=>{if(r.value){let S=[];return S=Zn(t.slots.default,S),f.value&&e.compassOpts!==!1&&S.push(R(hv,{ref:c,onCompassEvt:y,...f.value})),v.value&&e.zoomOpts!==!1&&S.push(R(mv,{ref:d,onZoomEvt:w,...v.value})),R("div",{ref:l,class:"vc-navigation-sm "+s.classes.value,style:h},S)}else return me("v-if")}}});const vv={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},width:{type:String,default:"150px"},height:{type:String,default:"150px"},border:{type:String,default:"solid 4px rgb(255, 255, 255)"},borderRadius:{type:String},toggleOpts:{type:Object},viewerOpts:{type:Object},centerRectColor:{type:[Object,Array,String],default:"#ff000080"},widthFactor:{type:Number,default:2},heightFactor:{type:Number,default:2},modelValue:{type:Boolean,default:!0}};var fP=de({name:"VcOverviewMap",props:vv,emits:{...je,"update:modelValue":e=>!0},setup(e,t){const i=fe();i.cesiumClass="VcOverviewMap",i.cesiumEvents=[];const n=ht(e,t,i);if(n===void 0)return;const{t:r}=ri(),{$services:a}=n,s=he(null),l=he(null),c=Ve({}),d=he(null),h=he(null),p=Sn(e),f=he(e.modelValue);let v=[],y,w;const C=ge(()=>Object.assign({},{color:"#fff",background:"#3f4854",icon:"vc-icons-overview-toggle",size:"15px",tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},e.toggleOpts)),M=ge(()=>Object.assign({},{removeCesiumScript:!1,showCredit:!1,sceneMode:2,containerId:"vc-overview-map"},e.viewerOpts));i.createCesiumObject=async()=>{const{viewer:$}=a;return $._element.appendChild(De(s)),[De(s),De(h)]},i.mount=async()=>{O();const{viewer:$}=a;return $.clock.onTick.addEventListener(S),!0},i.unmount=async()=>{const{viewer:$}=a,D=$._element;return $.clock.onTick.removeEventListener(S),D.contains(De(s))&&D.removeChild(De(s)),!0};const S=()=>{if(y){const{viewer:$}=a,D=$.camera.computeViewRectangle(),{defined:G}=Cesium;if(!G(D))return;const q=D.expand(e.widthFactor,e.heightFactor);y.camera.flyTo({destination:q.clone(),orientation:{heading:$.camera.heading,pitch:$.camera.pitch,roll:$.camera.roll},duration:0});const{Cartesian3:H,SceneTransforms:g}=Cesium,b=H.fromRadians(D.west,D.north),E=H.fromRadians(D.east,D.north),L=H.fromRadians(D.west,D.south),P=H.fromRadians(D.east,D.south),T=y.scene;ii(Cesium.VERSION,"1.121")?g.worldToWindowCoordinates(T,b):g.wgs84ToWindowCoordinates(T,b);const F=ii(Cesium.VERSION,"1.121")?g.worldToWindowCoordinates(T,b):g.wgs84ToWindowCoordinates(T,b),N=ii(Cesium.VERSION,"1.121")?g.worldToWindowCoordinates(T,E):g.wgs84ToWindowCoordinates(T,E),j=ii(Cesium.VERSION,"1.121")?g.worldToWindowCoordinates(T,L):g.wgs84ToWindowCoordinates(T,L),U=ii(Cesium.VERSION,"1.121")?g.worldToWindowCoordinates(T,P):g.wgs84ToWindowCoordinates(T,P);if(!G(F)||!G(N)||!G(j)||!G(U))return;const te=N.x-F.x,ie=j.y-F.y,K=(F.x+N.x)/2-te/2,Z=(F.y+j.y)/2-ie/2;if(te<=0||ie<=0)return;const z=new Cesium.BoundingRectangle(K,Z,te,ie);w.rectangle=z,w.material.uniforms.color=Je(e.centerRectColor),w.show=!0}},_=$=>{const{viewer:D}=$;y=D;const G=D.scene.screenSpaceCameraController;G.enableRotate=!1,G.enableTranslate=!1,G.enableZoom=!1,G.enableTilt=!1,G.enableLook=!1,y.scene.highDynamicRange=!1,y.scene.globe.enableLighting=!1,y.scene.globe.showWaterEffect=!1,y.scene.globe.depthTestAgainstTerrain=!1,y.scene.skyAtmosphere.show=!1,y.scene.fog.enabled=!1,y.scene.skyBox.show=!1,y.scene.sun.show=!1,y.scene.moon.show=!1,y.scene.highDynamicRange=!1,y.scene.globe.showGroundAtmosphere=!1,w=new Cesium.ViewportQuad(new Cesium.BoundingRectangle(150,100,100,50)),w.show=!1,y.scene.primitives.add(w)},O=()=>{var $;const D=p.style.value;if(c.left=D.left,c.top=D.top,c.transform=D.transform,c["pointer-events"]="none",D.borderRadius=e.borderRadius,D.border=e.border,f.value)D.width=e.width,D.height=e.height;else{const G=/(\d+)/g.exec(e.border),q=G!=null&&G.length?parseFloat(G[0]):0,H=getComputedStyle(($=De(l))==null?void 0:$.$el);D.width=`${parseFloat(H.width)+parseFloat(H.padding)+q}px`,D.height=`${parseFloat(H.height)+parseFloat(H.padding)+q}px`}Object.assign(c,D)},I=()=>{f.value?A():V(),f.value=!f.value,t.emit("update:modelValue",f.value)},A=()=>{var $;const D=/(\d+)/g.exec(e.border),G=D!=null&&D.length?parseFloat(D[0]):0,q=getComputedStyle(($=De(l))==null?void 0:$.$el);c.width=`${parseFloat(q.width)+parseFloat(q.padding)+G}px`,c.height=`${parseFloat(q.height)+parseFloat(q.padding)+G}px`},V=()=>{c.width=e.width,c.height=e.height};return Vt(()=>{v.forEach($=>$()),v=[]}),()=>{const $=[];return $.push(R(Yi,{ref:l,class:"toggle toggle-"+e.position+(f.value?"":" minimized "),flat:!0,dense:!0,icon:C.value.icon,size:C.value.size,style:{color:C.value.color,background:C.value.background,"pointer-events":"auto"},onClick:I},()=>C.value.tooltip?R(xi,{ref:d,...C.value.tooltip},()=>R("strong",{},C.value.tooltip.tip||r(`vc.overview.${f.value?"hidden":"show"}`))):me("v-if"))),$.push(R(dE,{ref:h,...M.value,onReady:_},()=>Lt(t.slots.default))),R("div",{ref:s,class:"vc-overview-map "+p.classes.value,style:c},$)}}});class Lr{constructor(t){this.id=t.id||Cesium.createGuid()}static getBoundingSphere(t,i){var n,r,a,s;const{Primitive:l,ClassificationPrimitive:c,GroundPolylinePrimitive:d,GroundPrimitive:h,Polyline:p}=Cesium;let f;return t instanceof c||t instanceof d?f=(r=(n=t._primitive)==null?void 0:n._boundingSphereWC)==null?void 0:r[0]:t instanceof l?f=(a=t._boundingSphereWC)==null?void 0:a[0]:t instanceof h?f=(s=t._boundingVolumes)==null?void 0:s[0]:t instanceof p?f=t._boundingVolumeWC:t instanceof Cesium.Entity&&(f=new Cesium.BoundingSphere,i.dataSourceDisplay.getBoundingSphere(t,!0,f)),f}static fromPickedFeature(t,i,n,r){var a,s,l,c,d;const h=new Lr({id:t.id});if(t.position)h.position=t.position;else if(t instanceof Cesium.Model)h.position=Cesium.Matrix4.getTranslation(t.modelMatrix,new Cesium.Cartesian3);else if(t instanceof Cesium.Cesium3DTileset){let p=i.content.tile.boundingSphere.center,f=(a=i==null?void 0:i.getProperty)==null?void 0:a.call(i,"position");Cesium.defined(f)&&(typeof f=="string"&&(f=JSON.parse(f)),p=Ot(f)),h.position=p}else h.position=(s=Lr.getBoundingSphere(t,n))==null?void 0:s.center;return h.cesiumObject=t,h.pickedFeature=i,h.windowPosition=r,h.description=(t==null?void 0:t.description)||((l=t==null?void 0:t.description)==null?void 0:l.getValue()),h.properties=(t==null?void 0:t.properties)||((c=t==null?void 0:t.properties)==null?void 0:c.getValue())||((d=t==null?void 0:t.feature)==null?void 0:d.properties),h}static fromImageryLayerFeature(t,i){const n=new Lr({id:t.name});return n.name=t.name,n.description=t.description,n.properties=t.properties,n.data=t.data,n.imageryLayer=t.imageryLayer,n.position=i.scene.globe.ellipsoid.cartographicToCartesian(t.position),n.coords=t.coords,n}}class lG{constructor(){const{knockout:t}=Cesium;this.allFeaturesAvailablePromise=void 0,this.isLoading=!0,this.pickPosition=void 0,this.features=[],this.error=void 0,this.providerCoords=void 0,t.track(this,["isLoading","features","error"])}}function uG(e,t,i,n){const{defined:r,Rectangle:a,Math:s}=Cesium,l=e.globe._surface._tilesToRender;let c;for(let h=0;!r(c)&&h<l.length;++h){const p=l[h];a.contains(p.rectangle,t)&&(c=p)}if(!r(c))return;const d=c.data.imagery;for(let h=d.length-1;h>=0;--h){const p=d[h],f=p.readyImagery;if(!r(f))continue;const v=f.imageryLayer.imageryProvider;if(i&&!r(v.pickFeatures)||!a.contains(f.rectangle,t))continue;const y=new a,w=1/1024;y.west=s.lerp(c.rectangle.west,c.rectangle.east,p.textureCoordinateRectangle.x-w),y.east=s.lerp(c.rectangle.west,c.rectangle.east,p.textureCoordinateRectangle.z+w),y.south=s.lerp(c.rectangle.south,c.rectangle.north,p.textureCoordinateRectangle.y-w),y.north=s.lerp(c.rectangle.south,c.rectangle.north,p.textureCoordinateRectangle.w+w),a.contains(y,t)&&n(f)}}function cG(e,t,i=[],n=[]){const{defined:r}=Cesium,a=t.globe.pick(e,t);if(!r(a))return;const s=t.globe.ellipsoid.cartesianToCartographic(a),l=[],c=[];if(uG(t,s,!0,function(d){if(n.indexOf(d.imageryLayer.vcId)!==-1||i.length&&i.indexOf(d.imageryLayer.vcId)===-1)return;const h=d.imageryLayer.imageryProvider.pickFeatures(d.x,d.y,d.level,s.longitude,s.latitude);r(h)&&(l.push(h),c.push(d.imageryLayer))}),l.length!==0)return Promise.all(l).then(function(d){const h=[];for(let p=0;p<d.length;++p){const f=d[p],v=c[p];if(r(f)&&f.length>0)for(let y=0;y<f.length;++y){const w=f[y];w.imageryLayer=v,r(w.position)||(w.position=s),h.push(w)}}return h})}function dG(e,t,i){const n="-1000px",r=he(n),a=he(n),s="",l=1,c=he(),d=he();let h,p;const f=he(null),v=he(null);let y=[],w=!1;const C=Ve({top:a.value,left:r.value,transform:s,opacity:l});y.push(Pe(v,q=>{var H,g,b;const E=q,{defined:L}=Cesium;if(L(E)&&L(E==null?void 0:E.position)){const{viewer:P}=i;c.value=(E==null?void 0:E.position)instanceof Cesium.Cartesian3?E==null?void 0:E.position:(H=E==null?void 0:E.position)==null?void 0:H.getValue(P.clock.currentTime),$(),(g=e.proxy)==null||g.$emit("pickEvt",E)}else D(),(b=e.proxy)==null||b.$emit("pickEvt",E);V()})),y.push(Pe(f,q=>{const{defined:H,Entity:g}=Cesium,b=q;if(!H(b))v.value=void 0;else{const E=new g({id:"__Vc__Pick__Location__"});E.position=b.pickPosition,v.value=E}nt(()=>{H(b.allFeaturesAvailablePromise)&&b.allFeaturesAvailablePromise.then(()=>{var E,L,P;const T=b.features.filter(F=>H(F));v.value=T.filter(M)[0],!H(v.value)&&T.length>0&&(v.value=T[0],w&&v.value instanceof Lr&&(P=(L=(E=v.value)==null?void 0:E.pickedFeature)==null?void 0:L.primitive)!=null&&P.position&&(v.value.position=v.value.pickedFeature.primitive.position))})})}));const M=q=>{const{defined:H}=Cesium;return H(q.properties)||H(q.description)},S=q=>{const{defined:H}=Cesium,{viewer:g}=i,b=g.scene,E=b.camera.getPickRay(q);let L=b.globe.pick(E,b);if(!H(L)&&(L=b.pickPosition(q),!H(L)))return;const P=b.globe.ellipsoid.cartesianToCartographic(L||new Cesium.Cartesian3),T=O(q),F=I(),N=t.allowFeatureInfoRequests?cG(E,b,t.includeImageryIds,t.excludeImageryIds):Promise.resolve(),j=_(F,L,T,[N],void 0,P.height,!1,g);f.value=j},_=(q,H,g,b,E,L,P,T)=>{const{defined:F,defaultValue:N}=Cesium;P=N(P,!1);const j=new lG;return j.providerCoords=q,j.pickPosition=H,j.allFeaturesAvailablePromise=Promise.all(b).then(function(U){j.isLoading=!1,j.features=U.reduce(function(te,ie,K){if(!F(ie))return te;const Z=ie.map(function(z){return F(E)&&(z.imageryLayer=E[K]),F(z.position)||(z.position=T.scene.globe.ellipsoid.cartesianToCartographic(H)),(!F(z.position.height)||z.position.height===0)&&(z.position.height=L),Lr.fromImageryLayerFeature(z,T)}.bind(this));return te.concat(Z)}.bind(this),N(g,[]))}).catch(function(){j.isLoading=!1,j.error="An unknown error occurred while picking features."}),j},O=q=>{var H,g;const b=[],{defined:E}=Cesium,{viewer:L}=i,P=L.scene.drillPick(q,t.limit);for(let T=0;T<P.length;++T){const F=P[T];let N=F.id;!E(N)&&E(F.primitive)&&(N=F.primitive);const j=(g=(H=F==null?void 0:F.primitive)==null?void 0:H._catalogItem)!=null?g:N==null?void 0:N._catalogItem;if(typeof(j==null?void 0:j.getFeaturesFromPickResult)=="function"){const U=j.getFeaturesFromPickResult.bind(j)(q,F);U&&(Array.isArray(U)?b.push(...U):b.push(U))}else{const U=F;if(U.id)if($t(U.id)&&U.id[0]instanceof Cesium.Entity){w=!0,U.id.forEach(te=>{const ie=Lr.fromPickedFeature(te,U,L,q);b.push(ie)});continue}else if(U.id instanceof Cesium.Entity){const te=Lr.fromPickedFeature(U.id,U,L,q);b.push(te),w=!1;continue}else w=!1;if(U.primitive){const te=Lr.fromPickedFeature(U.primitive,U,L,q);b.push(te)}else if(U.collection){const te=Lr.fromPickedFeature(U.collection,U,L,q);b.push(te)}}}return b},I=()=>{const q={},{viewer:H}=i,g=H.scene,b=function(E,L,P,T,F,N,j){if(L){const U=L.call(E,P,T,F,N,j);return E.url&&(q[E.url]={x:P,y:T,level:F}),E.pickFeatures=L,U}return Promise.reject(!1)};for(let E=0;E<g.imageryLayers.length;E++){const L=g.imageryLayers.get(E).imageryProvider;L.pickFeatures=b.bind(void 0,L,L.pickFeatures)}return q},A=(q,H)=>{const{viewer:g}=i;return ii(Cesium.VERSION,"1.121")?Cesium.SceneTransforms.worldToWindowCoordinates(g.scene,q,H):Cesium.SceneTransforms.wgs84ToWindowCoordinates(g.scene,q,H)},V=()=>{const{defined:q,Cartesian2:H}=Cesium;if(t.show&&q(c.value)){const g=A(c.value,new H);if(q(g)){const{viewer:b}=i,E=b.container,L=E.clientWidth,P=E.clientHeight,T=t.width,F=T*.5;g.x=Math.min(Math.max(g.x,-T),L+T)-F,g.y=Math.min(Math.max(g.y,-T),P+T)-F,C.left=Math.floor(g.x+.25)+"px",C.top=Math.floor(g.y+.25)+"px"}}},$=()=>{const{viewer:q}=i,{defined:H,EasingFunction:g}=Cesium;if(H(h)){if(p)return;h.cancelTween(),h=void 0}p=!0,h=q.scene.tweens.add({startObject:{scale:2,opacity:0,rotate:-180},stopObject:{scale:1,opacity:1,rotate:0},duration:.8,easingFunction:g.EXPONENTIAL_OUT,update:function(b){C.opacity=b.opacity,C.transform="scale("+b.scale+") rotate("+b.rotate+"deg)"},complete:function(){h=void 0},cancel:function(){h=void 0}})},D=()=>{const{viewer:q}=i,{defined:H,EasingFunction:g}=Cesium;if(H(h)){if(!p)return;h.cancelTween(),h=void 0}p=!1,h=q.scene.tweens.add({startObject:{scale:1,opacity:1},stopObject:{scale:1.5,opacity:0},duration:.8,easingFunction:g.EXPONENTIAL_OUT,update:function(b){C.opacity=b.opacity,C.transform="scale("+b.scale+") rotate(0deg)"},complete:function(){h=void 0},cancel:function(){h=void 0}})},G=()=>{V()};return Vt(()=>{y.forEach(q=>q()),y=[]}),Object.assign(e.proxy,{selectedFeature:v,position:c,computeScreenSpacePosition:A,update:V,animateAppear:$,animateDepart:D,getPickedFeatures:()=>f}),{pickFromScreenPosition:S,rootRef:d,rootStyle:C,onPostRender:G}}const gv={show:{type:Boolean,default:!0},width:{type:Number,default:50},height:{type:Number,default:50},allowFeatureInfoRequests:{type:Boolean,default:!0},includeImageryIds:{type:Array,default:()=>[]},excludeImageryIds:{type:Array,default:()=>[]},limit:{type:Number,default:25}},hG={...je,pickEvt:e=>!0};var vP=de({name:"VcSelectionIndicator",props:gv,emits:hG,setup(e,t){const i=fe();i.cesiumClass="VcSelectionIndicator",i.cesiumEvents=[];const n=ht(e,t,i);if(n===void 0)return;const{$services:r}=n;let a;const s=dG(i,e,r);return i.createCesiumObject=async()=>{const{viewer:l}=r;return l._element.appendChild(De(s.rootRef)),De(s.rootRef)},i.mount=async()=>{const{viewer:l}=r,{ScreenSpaceEventHandler:c,ScreenSpaceEventType:d}=Cesium;return a=new c(l.canvas),a.setInputAction(h=>{s.pickFromScreenPosition(h.position)},d.LEFT_CLICK),l.scene.postRender.addEventListener(s.onPostRender),!0},i.unmount=async()=>{const{viewer:l}=r,c=l._element;return c.contains(De(s.rootRef))&&c.removeChild(De(s.rootRef)),l.scene.postRender.removeEventListener(s.onPostRender),a.removeInputAction(Cesium.ScreenSpaceEventType.LEFT_CLICK),a.destroy(),a=void 0,!0},()=>R("div",{ref:s.rootRef,class:"vc-selection-indicator",style:s.rootStyle},R("img",{src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+DQo8c3ZnIHdpZHRoPSIxNzZweCIgaGVpZ2h0PSIxNzZweCIgdmlld0JveD0iMCAwIDE3NiAxNzYiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeG1sbnM6c2tldGNoPSJodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2gvbnMiPg0KICAgIDwhLS0gR2VuZXJhdG9yOiBTa2V0Y2ggMy4xLjEgKDg3NjEpIC0gaHR0cDovL3d3dy5ib2hlbWlhbmNvZGluZy5jb20vc2tldGNoIC0tPg0KICAgIDx0aXRsZT5Mb2NhdGlvblRhcmdldCArIFBhdGg8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPg0KICAgICAgICA8ZmlsdGVyIHg9Ii01MCUiIHk9Ii01MCUiIHdpZHRoPSIyMDAlIiBoZWlnaHQ9IjIwMCUiIGZpbHRlclVuaXRzPSJvYmplY3RCb3VuZGluZ0JveCIgaWQ9ImZpbHRlci0xIj4NCiAgICAgICAgICAgIDxmZU9mZnNldCBkeD0iMCIgZHk9IjAiIGluPSJTb3VyY2VBbHBoYSIgcmVzdWx0PSJzaGFkb3dPZmZzZXRPdXRlcjEiPjwvZmVPZmZzZXQ+DQogICAgICAgICAgICA8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIyIiBpbj0ic2hhZG93T2Zmc2V0T3V0ZXIxIiByZXN1bHQ9InNoYWRvd0JsdXJPdXRlcjEiPjwvZmVHYXVzc2lhbkJsdXI+DQogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCB2YWx1ZXM9IjAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgIDAgMCAwIDAgMCAgMCAwIDAgMC41MjY0NDY0NDUgMCIgaW49InNoYWRvd0JsdXJPdXRlcjEiIHR5cGU9Im1hdHJpeCIgcmVzdWx0PSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVDb2xvck1hdHJpeD4NCiAgICAgICAgICAgIDxmZU1lcmdlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0ic2hhZG93TWF0cml4T3V0ZXIxIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgICAgIDxmZU1lcmdlTm9kZSBpbj0iU291cmNlR3JhcGhpYyI+PC9mZU1lcmdlTm9kZT4NCiAgICAgICAgICAgIDwvZmVNZXJnZT4NCiAgICAgICAgPC9maWx0ZXI+DQogICAgICAgIDxmaWx0ZXIgeD0iLTUwJSIgeT0iLTUwJSIgd2lkdGg9IjIwMCUiIGhlaWdodD0iMjAwJSIgZmlsdGVyVW5pdHM9Im9iamVjdEJvdW5kaW5nQm94IiBpZD0iZmlsdGVyLTIiPg0KICAgICAgICAgICAgPGZlT2Zmc2V0IGR4PSIwIiBkeT0iMCIgaW49IlNvdXJjZUFscGhhIiByZXN1bHQ9InNoYWRvd09mZnNldE91dGVyMSI+PC9mZU9mZnNldD4NCiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiIGluPSJzaGFkb3dPZmZzZXRPdXRlcjEiIHJlc3VsdD0ic2hhZG93Qmx1ck91dGVyMSI+PC9mZUdhdXNzaWFuQmx1cj4NCiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IHZhbHVlcz0iMCAwIDAgMCAwICAgMCAwIDAgMCAwICAgMCAwIDAgMCAwICAwIDAgMCAwLjUyNjQ0NjQ0NSAwIiBpbj0ic2hhZG93Qmx1ck91dGVyMSIgdHlwZT0ibWF0cml4IiByZXN1bHQ9InNoYWRvd01hdHJpeE91dGVyMSI+PC9mZUNvbG9yTWF0cml4Pg0KICAgICAgICAgICAgPGZlTWVyZ2U+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJzaGFkb3dNYXRyaXhPdXRlcjEiPjwvZmVNZXJnZU5vZGU+DQogICAgICAgICAgICAgICAgPGZlTWVyZ2VOb2RlIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlTWVyZ2VOb2RlPg0KICAgICAgICAgICAgPC9mZU1lcmdlPg0KICAgICAgICA8L2ZpbHRlcj4NCiAgICA8L2RlZnM+DQogICAgPGcgaWQ9IlBhZ2UtMSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJBcnRib2FyZC0xIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNjkxLjAwMDAwMCwgLTQ5OC4wMDAwMDApIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZT0iI0ZGRkZGRiI+DQogICAgICAgICAgICA8ZyBpZD0iTG9jYXRpb25UYXJnZXQtKy1QYXRoIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg2OTkuMDAwMDAwLCA1MDYuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTgwLDE0NCBDMTE1LjM0NjIyNCwxNDQgMTQ0LDExNS4zNDYyMjQgMTQ0LDgwIEMxNDQsNDQuNjUzNzc2IDExNS4zNDYyMjQsMTYgODAsMTYgQzQ0LjY1Mzc3NiwxNiAxNiw0NC42NTM3NzYgMTYsODAgQzE2LDExNS4zNDYyMjQgNDQuNjUzNzc2LDE0NCA4MCwxNDQgWiBNMTYwLDgwIEwxNDQsODAgTTE2LDgwIEwwLDgwIE03OS42LC0wLjQgTDc5LjYsMTUuNiBNNzguOCwxNDQgTDc4LjgsMTYwIiBpZD0iTG9jYXRpb25UYXJnZXQiIHN0cm9rZS13aWR0aD0iNyIgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xKSI+PC9wYXRoPg0KICAgICAgICAgICAgICAgIDxjaXJjbGUgaWQ9IlBhdGgiIHN0cm9rZS13aWR0aD0iMiIgb3BhY2l0eT0iMC4yNTIyMTU0ODUiIGZpbHRlcj0idXJsKCNmaWx0ZXItMikiIGN4PSI4MCIgY3k9IjgwIiByPSI2Ij48L2NpcmNsZT4NCiAgICAgICAgICAgIDwvZz4NCiAgICAgICAgPC9nPg0KICAgIDwvZz4NCjwvc3ZnPg==",width:e.width,height:e.height}))}});const pG=[$f,Vf,Gf,Hf,ov,sv,dP,hv,mv,mP,fP,vP];pG.forEach(e=>{e.install=t=>{t.component(e.name,e)}});const yv=$f,bv=Vf,Cv=Gf,_v=Hf,wv=ov,xv=sv,Ev=dP,Pv=hv,Ov=mv,Mv=mP,Sv=fP,Tv=vP,li={externalLabel:!1,label:"",labelPosition:"right",hideLabel:!1,tabindex:void 0,disable:!1,outline:!1,push:!1,flat:!1,unelevated:!1,color:"primary",textColor:void 0,glossy:!1,labelClass:void 0,labelStyle:void 0,square:!1,tooltip:{delay:500,anchor:"bottom middle",offset:[0,20],tip:void 0}},ua={show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,0,0,127]}}}}}},Po={show:!0,color:"rgb(255,229,0)",pixelSize:8,outlineColor:"black",outlineWidth:1,disableDepthTestDistance:Number.POSITIVE_INFINITY},mG={show:!0,disableDepthTestDistance:Number.POSITIVE_INFINITY,verticalOrigin:1,image:""},ts={width:2,arcType:0,ellipsoid:void 0},fG={show:!0,enableMouseEvent:!0,asynchronous:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:[255,165,0,125]}}},faceForward:!0,renderState:{cull:{enabled:!1},depthTest:{enabled:!1}}}}},ui={show:!0,font:"16px Arial Microsoft YaHei sans-serif",scale:1,fillColor:"white",showBackground:!0,backgroundColor:{x:.165,y:.165,z:.165,w:.8},backgroundPadding:[7,5],horizontalOrigin:0,verticalOrigin:1,pixelOffset:[0,-9],disableDepthTestDistance:Number.POSITIVE_INFINITY},fi={icon:"vc-icons-move",size:"24px",color:"#1296db",background:"#fff",round:!0,flat:!1,label:void 0,stack:!1,dense:!0,tooltip:{delay:1e3,anchor:"bottom middle",offset:[0,20]}},cd={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Po,editorOpts:{delay:1e3,hideDelay:1e3,pixelOffset:[16,-8],move:Object.assign({},fi),remove:Object.assign({},fi,{icon:"vc-icons-remove"})},heightReference:1,disableDepthTest:!1,showLabel:!1,labelOpts:Object.assign({},ui,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]})},Iv={show:!0,showComponentLines:!1,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Po,polylineOpts:ts,primitiveOpts:ua,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},fi),removeAll:Object.assign({},fi,{icon:"vc-icons-delete"})},disableDepthTest:!1},gP={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Po,polylineOpts:ts,primitiveOpts:ua,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},fi),insert:Object.assign({},fi,{icon:"vc-icons-insert"}),remove:Object.assign({},fi,{icon:"vc-icons-remove"}),removeAll:Object.assign({},fi,{icon:"vc-icons-delete"})},loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:ui,labelsOpts:Object.assign({},ui,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},dd={show:!0,drawtip:{show:!0,pixelOffset:[32,32]},pointOpts:Po,polylineOpts:ts,primitiveOpts:Object.assign({},ua,{depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:"#51ff00"}}}}}}),polygonOpts:fG,editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},fi),insert:Object.assign({},fi,{icon:"vc-icons-insert"}),remove:Object.assign({},fi,{icon:"vc-icons-remove"}),removeAll:Object.assign({},fi,{icon:"vc-icons-delete"})},loop:!0,disableDepthTest:!1,showDistanceLabel:!1,showLabel:!1,showAngleLabel:!1,labelOpts:ui,labelsOpts:Object.assign({},ui,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})},Av=Object.assign({},dd,{pointOpts:Object.assign({},Po,{show:!1}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},fi),removeAll:Object.assign({},fi,{icon:"vc-icons-delete"})},edge:4,loop:!1,disableDepthTest:!1,showLabel:!1,showAngleLabel:!1,showDistanceLabel:!1,labelOpts:ui,labelsOpts:Object.assign({},ui,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]})}),vG=Object.assign({},Av,{edge:360}),gG=Object.assign({},Av,{edge:6,loop:!0}),yG=Object.assign({},li,{icon:"vc-icons-clear",color:"red"}),yP=Object.assign({},li,{icon:"vc-icons-drawing-regular"}),bP=Object.assign({},li,{icon:"vc-icons-drawing-circle"}),ji={...At,show:Boolean,editable:Boolean,drawtip:Object,pointOpts:Object,editorOpts:Object,mode:Number,preRenderDatas:Array,disableDepthTest:Boolean,distanceFormatter:Function,angleFormatter:Function,areaFormatter:Function},Dv={...it,position:{type:String,default:"bottom-left",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>e.length===2},mode:{type:Number,default:1},activeColor:{type:String,default:"positive"},editable:{type:Boolean},clampToGround:{type:Boolean},clearActionOpts:{type:Object,default:()=>yG}},bG=Object.assign({},li,{icon:"vc-icons-measure-distance"}),CP=Object.assign({},Iv,{labelOpts:Object.assign({},ui,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new Gi,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),CG=Object.assign({},li,{icon:"vc-icons-measure-component-distance"}),_G=Object.assign({},CP,{showComponentLines:!0,xLabelOpts:ui,xAngleLabelOpts:Object.assign({},ui,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[9,0]}),yLabelOpts:Object.assign({},ui,{horizontalOrigin:-1,pixelOffset:[-9,0]}),yAngleLabelOpts:Object.assign({},ui,{verticalOrigin:-1,pixelOffset:[0,9]})}),wG=Object.assign({},li,{icon:"vc-icons-measure-polyline-distance"}),_P=Object.assign({},gP,{measureUnits:new Gi,labelOpts:ui,labelsOpts:Object.assign({},ui,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),decimals:{distance:2,angle:2},showLabel:!0,showAngleLabel:!0,showDistanceLabel:!0,locale:void 0,loop:!1,autoUpdateLabelPosition:!0}),xG=Object.assign({},li,{icon:"vc-icons-measure-horizontal-distance"}),EG=Object.assign({},_P,{dashLineOpts:{width:2},dashLinePrimitiveOpts:Object.assign({},ua,{appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineDash",uniforms:{color:[255,255,0,255]}}}}}}),labelOpts:Object.assign({},ui,{horizontalOrigin:1,verticalOrigin:1,pixelOffset:[10,-10]}),labelsOpts:Object.assign({},ui,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDashedLine:!0}),PG=Object.assign({},li,{icon:"vc-icons-measure-vertical-distance"}),OG=Object.assign({},Iv,{labelOpts:Object.assign({},ui,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),measureUnits:new Gi,decimals:{distance:2,angle:2},locale:void 0,autoUpdateLabelPosition:!0}),MG=Object.assign({},li,{icon:"vc-icons-measure-height-from-terrain"}),SG=Object.assign({},cd,{polylineOpts:ts,labelOpts:Object.assign({},ui,{horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[10,10]}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},fi),removeAll:Object.assign({},fi,{icon:"vc-icons-delete"})},measureUnits:new Gi,decimals:{distance:2},locale:void 0,primitiveOpts:ua}),TG=Object.assign({},li,{icon:"vc-icons-measure-area"}),wP=Object.assign({},dd,{labelOpts:ui,labelsOpts:Object.assign({},ui,{scale:.8,horizontalOrigin:1,verticalOrigin:-1,pixelOffset:[5,5]}),showDistanceLabel:!0,showAngleLabel:!0,showLabel:!0,measureUnits:new Gi,decimals:{area:2,distance:2,angle:2},loop:!0,locale:void 0,autoUpdateLabelPosition:!0}),IG=Object.assign({},li,{icon:"vc-icons-measure-point-coordinates"}),AG=Object.assign({},cd,{heightReference:1,measureUnits:new Gi,drawtip:{show:!0,pixelOffset:[32,48]},labelOpts:Object.assign({},ui,{horizontalOrigin:1,verticalOrigin:0,pixelOffset:[10,0]}),decimals:{lng:6,lat:6,height:2,slope:3},locale:void 0,showLabel:!0}),DG=Object.assign({},li,{icon:"vc-icons-drawing-rectangle"}),Lv=Object.assign({},wP,{pointOpts:Object.assign({},Po,{show:!1}),drawtip:{show:!0,pixelOffset:[32,32]},editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},fi),removeAll:Object.assign({},fi,{icon:"vc-icons-delete"})},edge:4,loop:!1,showAngleLabel:!1}),LG=Object.assign({},Lv,{edge:6,loop:!0}),BG=Object.assign({},Lv,{edge:360,loop:!0,showDistanceLabel:!1,showAngleLabel:!1}),RG=Object.assign({},{}),FG=Object.assign({},li,{direction:"right",icon:"vc-icons-measurement-button",activeIcon:"vc-icons-measurement-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),xP=["distance","component-distance","polyline","horizontal","vertical","height","area","point","rectangle","regular","circle"],$G=e=>{let t=!0;return e.forEach(i=>{xP.includes(i)||(console.error(`VueCesium: unknown measurement type: ${i}`),t=!1)}),t},hd={...Dv,measurements:{type:Array,default:()=>xP,validator:$G},mainFabOpts:{type:Object,default:()=>FG},fabActionOpts:{type:Object,default:()=>RG},distanceActionOpts:{type:Object,default:()=>bG},distanceMeasurementOpts:{type:Object,default:()=>CP},componentDistanceActionOpts:{type:Object,default:()=>CG},componentDistanceMeasurementOpts:{type:Object,default:()=>_G},polylineActionOpts:{type:Object,default:()=>wG},polylineMeasurementOpts:{type:Object,default:()=>_P},horizontalActionOpts:{type:Object,default:()=>xG},horizontalMeasurementOpts:{type:Object,default:()=>EG},verticalActionOpts:{type:Object,default:()=>PG},verticalMeasurementOpts:{type:Object,default:()=>OG},heightActionOpts:{type:Object,default:()=>MG},heightMeasurementOpts:{type:Object,default:()=>SG},areaActionOpts:{type:Object,default:()=>TG},areaMeasurementOpts:{type:Object,default:()=>wP},pointActionOpts:{type:Object,default:()=>IG},pointMeasurementOpts:{type:Object,default:()=>AG},rectangleActionOpts:{type:Object,default:()=>DG},rectangleMeasurementOpts:{type:Object,default:()=>Lv},regularActionOpts:{type:Object,default:()=>yP},regularMeasurementOpts:{type:Object,default:()=>LG},circleActionOpts:{type:Object,default:()=>bP},circleMeasurementOpts:{type:Object,default:()=>BG}},jt=Gn(hd),Bv={...Qo,...Ia,...it,autoHidden:{type:Boolean,default:!0},customClass:String,teleport:Object},jG={...je,mouseenter:e=>!0,mouseleave:e=>!0,click:e=>!0};var Rv=de({name:"VcOverlayHtml",props:Bv,emits:jG,setup(e,t){const i=fe();i.cesiumClass="VcOverlayHtml",i.cesiumEvents=[];const n=ht(e,t,i);if(n===void 0)return;const{$services:r}=n,a=he(!1),s=he(null),l=Ve({}),c=he(null),d=he(null),h=he(null);let p=[];p.push(Pe(()=>e.position,I=>{d.value=Ot(I,r.viewer.scene.globe.ellipsoid)})),p.push(Pe(()=>e.pixelOffset,I=>{c.value=Jt(I)})),p.push(Pe(()=>e.show,I=>{l.display=I?"block":"none"})),i.createCesiumObject=async()=>De(s),i.mount=async()=>{const{viewer:I}=r;return a.value=!0,e.teleport&&e.teleport.to&&!e.teleport.disabled&&S(),c.value=Jt(e.pixelOffset),d.value=Ot(e.position,I.scene.globe.ellipsoid),I.scene.preRender.addEventListener(f),!0},i.unmount=async()=>{const{viewer:I}=r;return I.scene.preRender.removeEventListener(f),a.value=!1,e.teleport&&e.teleport.to&&!e.teleport.disabled&&_(),!0};const f=()=>{const{viewer:I}=r;if(d.value){const A=I.scene.cartesianToCanvasCoordinates(d.value,{});if(Cesium.defined(A)&&!Cesium.Cartesian2.equals(h.value,A))if(l.left=A.x+c.value.x+"px",l.top=A.y+c.value.y+"px",e.autoHidden&&I.scene.mode!==Cesium.SceneMode.SCENE2D&&I.scene.mode!==Cesium.SceneMode.MORPHING){const V=I.camera.position,$=I.scene.globe.ellipsoid.cartesianToCartographic(V);if(Cesium.defined($)){let D=$.height;D+=1*I.scene.globe.ellipsoid.maximumRadius,Cesium.Cartesian3.distance(V,d.value)>D||!e.show?l.display="none":l.display="block"}}else l.display="block";else Cesium.defined(A)||(l.display="none");h.value=A}};Vt(()=>{p.forEach(I=>I()),p=[]});const v=()=>a.value?R("div",{ref:s,class:`vc-html-container${e.customClass?" "+e.customClass:""}`,style:l,onMouseenter:w,onMouseleave:C,onClick:y},Lt(t.slots.default)):me("v-if"),y=I=>{t.emit("click",I)},w=I=>{t.emit("mouseenter",I)},C=I=>{t.emit("mouseleave",I)},M=()=>v(),{showPortal:S,hidePortal:_,renderPortal:O}=Wx(i,s,M);return e.teleport&&e.teleport.to&&!e.teleport.disabled?O:()=>v()}}),Fv={exports:{}};Fv.exports,function(e){(function(t,i,n){e.exports?e.exports=n():i[t]=n()})("h337",En,function(){var t={defaultRadius:40,defaultRenderer:"canvas2d",defaultGradient:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},defaultMaxOpacity:1,defaultMinOpacity:0,defaultBlur:.85,defaultXField:"x",defaultYField:"y",defaultValueField:"value",plugins:{}},i=function(){var d=function(f){this._coordinator={},this._data=[],this._radi=[],this._min=10,this._max=1,this._xField=f.xField||f.defaultXField,this._yField=f.yField||f.defaultYField,this._valueField=f.valueField||f.defaultValueField,f.radius&&(this._cfgRadius=f.radius)},h=t.defaultRadius;return d.prototype={_organiseData:function(p,f){var v=p[this._xField],y=p[this._yField],w=this._radi,C=this._data,M=this._max,S=this._min,_=p[this._valueField]||1,O=p.radius||this._cfgRadius||h;C[v]||(C[v]=[],w[v]=[]),C[v][y]?C[v][y]+=_:(C[v][y]=_,w[v][y]=O);var I=C[v][y];return I>M?(f?this.setDataMax(I):this._max=I,!1):I<S?(f?this.setDataMin(I):this._min=I,!1):{x:v,y,value:_,radius:O,min:S,max:M}},_unOrganizeData:function(){var p=[],f=this._data,v=this._radi;for(var y in f)for(var w in f[y])p.push({x:y,y:w,radius:v[y][w],value:f[y][w]});return{min:this._min,max:this._max,data:p}},_onExtremaChange:function(){this._coordinator.emit("extremachange",{min:this._min,max:this._max})},addData:function(){if(arguments[0].length>0)for(var p=arguments[0],f=p.length;f--;)this.addData.call(this,p[f]);else{var v=this._organiseData(arguments[0],!0);v&&(this._data.length===0&&(this._min=this._max=v.value),this._coordinator.emit("renderpartial",{min:this._min,max:this._max,data:[v]}))}return this},setData:function(p){var f=p.data,v=f.length;this._data=[],this._radi=[];for(var y=0;y<v;y++)this._organiseData(f[y],!1);return this._max=p.max,this._min=p.min||0,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},removeData:function(){},setDataMax:function(p){return this._max=p,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setDataMin:function(p){return this._min=p,this._onExtremaChange(),this._coordinator.emit("renderall",this._getInternalData()),this},setCoordinator:function(p){this._coordinator=p},_getInternalData:function(){return{max:this._max,min:this._min,data:this._data,radi:this._radi}},getData:function(){return this._unOrganizeData()}},d}(),n=function(){var d=function(v){var y=v.gradient||v.defaultGradient,w=document.createElement("canvas"),C=w.getContext("2d");w.width=256,w.height=1;var M=C.createLinearGradient(0,0,256,1);for(var S in y)M.addColorStop(S,y[S]);return C.fillStyle=M,C.fillRect(0,0,256,1),C.getImageData(0,0,256,1).data},h=function(v,y){var w=document.createElement("canvas"),C=w.getContext("2d"),M=v,S=v;if(w.width=w.height=v*2,y==1)C.beginPath(),C.arc(M,S,v,0,2*Math.PI,!1),C.fillStyle="rgba(0,0,0,1)",C.fill();else{var _=C.createRadialGradient(M,S,v*y,M,S,v);_.addColorStop(0,"rgba(0,0,0,1)"),_.addColorStop(1,"rgba(0,0,0,0)"),C.fillStyle=_,C.fillRect(0,0,2*v,2*v)}return w},p=function(S){for(var y=[],w=S.min,C=S.max,M=S.radi,S=S.data,_=Object.keys(S),O=_.length;O--;)for(var I=_[O],A=Object.keys(S[I]),V=A.length;V--;){var $=A[V],D=S[I][$],G=M[I][$];y.push({x:I,y:$,value:D,radius:G})}return{min:w,max:C,data:y}};function f(v){var y=v.container,w=this.shadowCanvas=document.createElement("canvas"),C=this.canvas=v.canvas||document.createElement("canvas");this._renderBoundaries=[1e4,1e4,0,0];var M=getComputedStyle(v.container)||{};C.className="heatmap-canvas",this._width=C.width=w.width=v.width||+M.width.replace(/px/,""),this._height=C.height=w.height=v.height||+M.height.replace(/px/,""),this.shadowCtx=w.getContext("2d"),this.ctx=C.getContext("2d"),C.style.cssText=w.style.cssText="position:absolute;left:0;top:0;",y.style.position="relative",y.appendChild(C),this._palette=d(v),this._templates={},this._setStyles(v)}return f.prototype={renderPartial:function(v){v.data.length>0&&(this._drawAlpha(v),this._colorize())},renderAll:function(v){this._clear(),v.data.length>0&&(this._drawAlpha(p(v)),this._colorize())},_updateGradient:function(v){this._palette=d(v)},updateConfig:function(v){v.gradient&&this._updateGradient(v),this._setStyles(v)},setDimensions:function(v,y){this._width=v,this._height=y,this.canvas.width=this.shadowCanvas.width=v,this.canvas.height=this.shadowCanvas.height=y},_clear:function(){this.shadowCtx.clearRect(0,0,this._width,this._height),this.ctx.clearRect(0,0,this._width,this._height)},_setStyles:function(v){this._blur=v.blur==0?0:v.blur||v.defaultBlur,v.backgroundColor&&(this.canvas.style.backgroundColor=v.backgroundColor),this._width=this.canvas.width=this.shadowCanvas.width=v.width||this._width,this._height=this.canvas.height=this.shadowCanvas.height=v.height||this._height,this._opacity=(v.opacity||0)*255,this._maxOpacity=(v.maxOpacity||v.defaultMaxOpacity)*255,this._minOpacity=(v.minOpacity||v.defaultMinOpacity)*255,this._useGradientOpacity=!!v.useGradientOpacity},_drawAlpha:function(C){for(var y=this._min=C.min,w=this._max=C.max,C=C.data||[],M=C.length,S=1-this._blur;M--;){var _=C[M],O=_.x,I=_.y,A=_.radius,V=Math.min(_.value,w),$=O-A,D=I-A,G=this.shadowCtx,q;this._templates[A]?q=this._templates[A]:this._templates[A]=q=h(A,S);var H=(V-y)/(w-y);G.globalAlpha=H<.01?.01:H,G.drawImage(q,$,D),$<this._renderBoundaries[0]&&(this._renderBoundaries[0]=$),D<this._renderBoundaries[1]&&(this._renderBoundaries[1]=D),$+2*A>this._renderBoundaries[2]&&(this._renderBoundaries[2]=$+2*A),D+2*A>this._renderBoundaries[3]&&(this._renderBoundaries[3]=D+2*A)}},_colorize:function(){var v=this._renderBoundaries[0],y=this._renderBoundaries[1],w=this._renderBoundaries[2]-v,C=this._renderBoundaries[3]-y,M=this._width,S=this._height,_=this._opacity,O=this._maxOpacity,I=this._minOpacity,A=this._useGradientOpacity;v<0&&(v=0),y<0&&(y=0),v+w>M&&(w=M-v),y+C>S&&(C=S-y);for(var V=this.shadowCtx.getImageData(v,y,w,C),$=V.data,D=$.length,G=this._palette,q=3;q<D;q+=4){var H=$[q],g=H*4;if(g){var b;_>0?b=_:H<O?H<I?b=I:b=H:b=O,$[q-3]=G[g],$[q-2]=G[g+1],$[q-1]=G[g+2],$[q]=A?G[g+3]:b}}this.ctx.putImageData(V,v,y),this._renderBoundaries=[1e3,1e3,0,0]},getValueAt:function(v){var y,w=this.shadowCtx,C=w.getImageData(v.x,v.y,1,1),M=C.data[3],S=this._max,_=this._min;return y=Math.abs(S-_)*(M/255)>>0,y},getDataURL:function(){return this.canvas.toDataURL()}},f}(),r=function(){var d=!1;return t.defaultRenderer==="canvas2d"&&(d=n),d}(),a={merge:function(){for(var c={},d=arguments.length,h=0;h<d;h++){var p=arguments[h];for(var f in p)c[f]=p[f]}return c}},s=function(){var d=function(){function v(){this.cStore={}}return v.prototype={on:function(y,w,C){var M=this.cStore;M[y]||(M[y]=[]),M[y].push(function(S){return w.call(C,S)})},emit:function(y,w){var C=this.cStore;if(C[y])for(var M=C[y].length,S=0;S<M;S++){var _=C[y][S];_(w)}}},v}(),h=function(f){var v=f._renderer,y=f._coordinator,w=f._store;y.on("renderpartial",v.renderPartial,v),y.on("renderall",v.renderAll,v),y.on("extremachange",function(C){f._config.onExtremaChange&&f._config.onExtremaChange({min:C.min,max:C.max,gradient:f._config.gradient||f._config.defaultGradient})}),w.setCoordinator(y)};function p(){var f=this._config=a.merge(t,arguments[0]||{});if(this._coordinator=new d,f.plugin){var v=f.plugin;if(t.plugins[v]){var y=t.plugins[v];this._renderer=new y.renderer(f),this._store=new y.store(f)}else throw new Error("Plugin '"+v+"' not found. Maybe it was not registered.")}else this._renderer=new r(f),this._store=new i(f);h(this)}return p.prototype={addData:function(){return this._store.addData.apply(this._store,arguments),this},removeData:function(){return this._store.removeData&&this._store.removeData.apply(this._store,arguments),this},setData:function(){return this._store.setData.apply(this._store,arguments),this},setDataMax:function(){return this._store.setDataMax.apply(this._store,arguments),this},setDataMin:function(){return this._store.setDataMin.apply(this._store,arguments),this},configure:function(f){return this._config=a.merge(this._config,f),this._renderer.updateConfig(this._config),this._coordinator.emit("renderall",this._store._getInternalData()),this},repaint:function(){return this._coordinator.emit("renderall",this._store._getInternalData()),this},getData:function(){return this._store.getData()},getDataURL:function(){return this._renderer.getDataURL()},getValueAt:function(f){return this._store.getValueAt?this._store.getValueAt(f):this._renderer.getValueAt?this._renderer.getValueAt(f):null}},p}(),l={create:function(c){return new s(c)},register:function(c,d){t.plugins[c]=d}};return l})}(Fv);var NG=Fv.exports,kG=Mp(NG);const $v={id:String,name:String,availability:Object,...it,description:[String,Object],...Qo,orientation:Object,...$2,parent:Object,billboard:Object,box:Object,corridor:Object,cylinder:Object,ellipse:Object,ellipsoid:Object,label:Object,model:Object,tileset:Object,path:Object,plane:Object,point:Object,polygon:Object,polyline:Object,properties:Object,polylineVolume:Object,rectangle:Object,wall:Object,...At},VG={...je,...za,definitionChanged:e=>!0,"update:billboard":e=>!0,"update:box":e=>!0,"update:corridor":e=>!0,"update:cylinder":e=>!0,"update:ellipse":e=>!0,"update:ellipsoid":e=>!0,"update:label":e=>!0,"update:model":e=>!0,"update:path":e=>!0,"update:plane":e=>!0,"update:point":e=>!0,"update:polygon":e=>!0,"update:polyline":e=>!0,"update:polylineVolume":e=>!0,"update:rectangle":e=>!0,"update:tileset":e=>!0,"update:wall":e=>!0};var pd=de({name:"VcEntity",props:$v,emits:VG,setup(e,t){const i=fe();i.cesiumClass="Entity",i.cesiumEvents=["definitionChanged"];const n=ht(e,t,i);if(n===void 0)return;const{$services:r}=n,{emit:a}=t;i.mount=async()=>{var l;const c=(l=r==null?void 0:r.entities)==null?void 0:l.add(i.cesiumObject);return r==null?void 0:r.entities.contains(c)},i.unmount=async()=>{var l;return(l=r==null?void 0:r.entities)==null?void 0:l.remove(i.cesiumObject)};const s=(l,c)=>(Ze(i,c)?a(c,l):i.cesiumObject&&(i.cesiumObject[c.substring(7)]=l),l&&(l._vcParent=i.cesiumObject),!0);return Object.assign(i.proxy,{__updateGraphics:s}),()=>{var l,c;return t.slots.default?R("i",{class:ye(((l=i.proxy)==null?void 0:l.$options.name)||""),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(((c=i.proxy)==null?void 0:c.$options.name)||""))}}});pd.install=e=>{e.component(pd.name,pd)};const EP=pd;var PP=EP;const OP=EP;var zG={imageryProvider:Object,...Oi,alpha:{type:[Number,Function],default:1},nightAlpha:{type:[Number,Function],default:1},dayAlpha:{type:[Number,Function],default:1},brightness:{type:[Number,Function],default:1},contrast:{type:[Number,Function],default:1},hue:{type:[Number,Function],default:0},saturation:{type:[Number,Function],default:1},gamma:{type:[Number,Function],default:1},splitDirection:{type:[Number,Function],default:0},minificationFilter:Number,magnificationFilter:Number,...it,maximumAnisotropy:Number,minimumTerrainLevel:Number,maximumTerrainLevel:Number,...q2,...Z2,colorToAlphaThreshold:{type:Number,default:.004},sortOrder:Number,vcId:String};const GG={...je,"update:imageryProvider":e=>!0,readyEvent:e=>!0,errorEvent:e=>!0},jv=zG;var md=de({name:"VcLayerImagery",props:jv,emits:GG,setup(e,t){const i=fe();i.cesiumClass="ImageryLayer",i.cesiumEvents=["readyEvent","errorEvent"];const n=ht(e,t,i);if(n===void 0)return;const{$services:r}=n,{emit:a}=t;i.createCesiumObject=async()=>{const l=n.transformProps(e);if(ii(Cesium.VERSION,"1.104")){const c=e.imageryProvider||Cesium.BingMapsImageryProvider.fromUrl(void 0,{key:""}),d=Cesium.ImageryLayer.fromProviderAsync(c,l);return d.errorEvent.addEventListener(h=>{}),d}else{const c=e.imageryProvider||{};return new Cesium.ImageryLayer(c,l)}},i.mount=async()=>{const{viewer:l}=r,c=i.cesiumObject;return c.sortOrder=e.sortOrder,c.vcId=e.vcId||Cesium.createGuid(),l.imageryLayers.add(c),!l.isDestroyed()&&l.imageryLayers.contains(c)},i.unmount=async()=>{const{viewer:l}=r,c=i.cesiumObject;return!l.isDestroyed()&&l.imageryLayers.remove(c)};const s=l=>{var c;if(xn(l))return(c=i.unmount)==null?void 0:c.call(i);{const d=i.cesiumObject;d._imageryProvider=l,Ze(i,"update:imageryProvider")&&a("update:imageryProvider",l)}return!0};return Object.assign(i.proxy,{__updateProvider:s}),()=>{var l,c;return t.slots.default?R("i",{class:ye(((l=i.proxy)==null?void 0:l.$options.name)||""),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(((c=i.proxy)==null?void 0:c.$options.name)||"v-if"))}}});md.install=e=>{e.component(md.name,md)};const MP=md;var SP=MP;const TP=MP,Nv={...Ys,...Ra,...it,...fc,...Xs,...Ks,...Js,...ia,...na,...cr,...hr,...mc,...At};var IP=de({name:"VcPrimitiveClassification",props:Nv,emits:dn,setup(e,t){var i;const n=fe();n.cesiumClass="ClassificationPrimitive",cn(e,t,n);const r=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?R("i",{class:ye(r),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(r))}});const kv={...Ys,...Ra,...it,...fc,...Xs,...Ks,...Js,...ia,...na,...cr,...hr,...mc,...At};var AP=de({name:"VcPrimitiveGround",props:kv,emits:dn,setup(e,t){var i;const n=fe();n.cesiumClass="GroundPrimitive",cn(e,t,n);const r=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?R("i",{class:ye(r),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(r))}});const Vv={...Ys,...Ra,...it,...Xs,...Ks,...Js,...ia,...na,...cr,...hr,...mc,...At};var DP=de({name:"VcPrimitiveGroundPolyline",props:Vv,emits:dn,setup(e,t){var i;const n=fe();n.cesiumClass="GroundPolylinePrimitive",cn(e,t,n);const r=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?R("i",{class:ye(r),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(r))}});const zv={...Hn,basePath:String,...it,...Wn,...Xo,...Wp,...qp,...vo,...ia,...Zp,...na,...Qp,...Ri,...hr,...vm,...Zi,...el,...ni,...Qr,...Yp,...Kp,...Jp,...Xp,...Ws,dequantizeInShader:{type:Boolean,default:!0},...lc,...em,..._m,...wm,...xm,...Ci,...Em,showOutline:{type:Boolean,default:!0},...At};var LP=de({name:"VcPrimitiveModel",props:zv,emits:{...dn,readyEvent:e=>!0,texturesReadyEvent:e=>!0,errorEvent:e=>!0},setup(e,t){const i=fe();i.cesiumClass="Model",i.cesiumEvents=["readyEvent","texturesReadyEvent","errorEvent"];const n=cn(e,t,i);return i.createCesiumObject=async()=>{const r=n==null?void 0:n.transformProps(e);return ii(Cesium.VERSION,"1.104")?await Cesium.Model.fromGltfAsync(r):Cesium.Model.fromGltf(r)},()=>{var r;return me(ye(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const Gv={...Ys,...Ra,...mm,...it,...Wn,...fc,...Xs,...Ks,...Js,...ia,cull:{type:Boolean,default:!0},...na,...hr,...Ri,...At};var BP=de({name:"VcPrimitive",props:Gv,emits:dn,setup(e,t){var i;const n=fe();n.cesiumClass="Primitive",cn(e,t,n);const r=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>{var a;return t.slots.default?R("i",{class:ye(r),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(((a=n.proxy)==null?void 0:a.$options.name)||""))}}});const UG={...dn,allTilesLoaded:()=>!0,initialTilesLoaded:()=>!0,loadProgress:(e,t)=>!0,tileFailed:(e,t)=>!0,tileLoad:e=>!0,tileUnload:e=>!0,tileVisible:e=>!0},Uv={url:[String,Object],...it,...Wn,modelUpAxis:{type:Number},modelForwardAxis:{type:Number},...Ri,...rm,maximumMemoryUsage:{type:Number},cacheBytes:{type:Number,default:536870912},maximumCacheOverflowBytes:{type:Number,default:536870912},cullWithChildrenBounds:{type:Boolean,default:!0},cullRequestsWhileMoving:{type:Boolean,default:!0},cullRequestsWhileMovingMultiplier:{type:Number,default:60},preloadWhenHidden:{type:Boolean,default:!1},preloadFlightDestinations:{type:Boolean,default:!0},preferLeaves:{type:Boolean,default:!1},dynamicScreenSpaceError:{type:Boolean,default:!1},dynamicScreenSpaceErrorDensity:{type:Number,default:.00278},dynamicScreenSpaceErrorFactor:{type:Number,default:4},dynamicScreenSpaceErrorHeightFalloff:{type:Number,default:.25},progressiveResolutionHeightFraction:{type:Number,default:.3},foveatedScreenSpaceError:{type:Boolean,default:!0},foveatedConeSize:{type:Number,default:.1},foveatedMinimumScreenSpaceErrorRelaxation:{type:Number,default:0},foveatedInterpolationCallback:Function,foveatedTimeDelay:{type:Number,default:.2},skipLevelOfDetail:{type:Boolean,default:!1},baseScreenSpaceError:{type:Number,default:1024},skipScreenSpaceErrorFactor:{type:Number,default:16},skipLevels:{type:Number,default:1},immediatelyLoadDesiredLevelOfDetail:{type:Boolean,default:!1},loadSiblings:{type:Boolean,default:!1},...Ws,...cr,...pt,pointCloudShading:Object,...lc,...ix,..._m,...wm,...xm,...nx,...Em,enableShowOutline:{type:Boolean,default:!0},showOutline:{type:Boolean,default:!0},...zi,vectorClassificationOnly:{type:Boolean,default:!1},vectorKeepDecodedPositions:{type:Boolean,default:!1},featureIdIndex:{type:Number,default:0},instanceFeatureIdIndex:{type:Number,default:0},featureIdLabel:{type:[String,Number]},instanceFeatureIdLabel:{type:[String,Number]},splitDirection:{type:Number,default:0},projectTo2D:{type:Boolean,default:!1},showCreditsOnScreen:{type:Boolean,default:!1},debugHeatmapTilePropertyName:String,debugFreezeFrame:{type:Boolean,default:!1},debugColorizeTiles:{type:Boolean,default:!1},...vm,...hr,debugShowContentBoundingVolume:{type:Boolean,default:!1},debugShowViewerRequestVolume:{type:Boolean,default:!1},debugShowGeometricError:{type:Boolean,default:!1},debugShowRenderingStatistics:{type:Boolean,default:!1},debugShowMemoryUsage:{type:Boolean,default:!1},debugShowUrl:{type:Boolean,default:!1},...At,enableModelExperimental:{type:Boolean,default:!1},...hm,properties:{type:Array},fragmentShader:String,replaceFS:Boolean,assetId:Number};var RP=de({name:"VcPrimitiveTileset",props:Uv,emits:UG,setup(e,t){const i=fe();i.cesiumClass="Cesium3DTileset",i.cesiumEvents=["allTilesLoaded","initialTilesLoaded","loadProgress","tileFailed","tileLoad","tileUnload","tileVisible"];const n=cn(e,t,i);i.proxy.creatingPromise.then(a=>{const s=a.cesiumObject;i.removeCallbacks.push(s.tileVisible.addEventListener(r))});const r=a=>{const s=a.content,l=s._model;for(let c=0;c<s.featuresLength;c++){const d=s.getFeature(c);e.properties&&e.properties.length&&e.properties.forEach(h=>{d.hasProperty(h.key)&&d.getProperty(h.key)===h.keyValue&&d.setProperty(h.propertyName,h.propertyValue)})}e.fragmentShader&&l&&l._sourcePrograms&&l._rendererResources&&(Object.keys(l._sourcePrograms).forEach(c=>{var d;const h=l._sourcePrograms[c],p=l._rendererResources.sourceShaders;if(e.replaceFS)p[h.fragmentShader]=e.fragmentShader;else{const f=p[h.fragmentShader],v=(d=n.$services.viewer.scene.context)==null?void 0:d.webgl2;p[h.fragmentShader]=f.replace(`${v?"out_FragColor":"gl_FragColor"} = vec4(color, 1.0);
}`,`${v?"out_FragColor":"gl_FragColor"}  = vec4(color, 1.0);
             ${e.fragmentShader}
}
            `)}}),l._shouldRegenerateShaders=!0)};return()=>{var a;return me(ye(((a=i.proxy)==null?void 0:a.$options.name)||""))}}});const Hv={...J2,...pm,enableShowOutline:{type:Boolean,default:!0},showOutline:{type:Boolean,default:!0},...At};var FP=de({name:"VcPrimitiveOsmBuildings",props:Hv,emits:{...dn},setup(e,t){const i=fe();i.cesiumClass="VcPrimitiveOsmBuildings";const n=cn(e,t,i);return i.createCesiumObject=async()=>{const r=n==null?void 0:n.transformProps(e);return r.style=r.tileStyle,delete r.tileStyle,ii(Cesium.VERSION,"1.104")?await Cesium.createOsmBuildingsAsync(r):Cesium.createOsmBuildings(r)},()=>{var r;return me(ye(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const HG={...dn,complete:e=>!0},Wv={...it,updateCallback:Function,emitter:Object,...Wn,emitterModelMatrix:Object,emissionRate:{type:Number,default:5},bursts:Array,loop:{type:Boolean,default:!0},scale:{type:Number,default:1},startScale:Number,endScale:Number,...Qr,...X2,...Y2,...Wu,...tx,...K2,...ex,...qu,speed:{type:Number,default:1},minimumSpeed:Number,maximumSpeed:Number,lifetime:{type:Number,default:Number.MAX_VALUE},particleLife:{type:Number,default:5},minimumParticleLife:Number,maximumParticleLife:Number,mass:{type:Number,default:1},minimumMass:Number,maximumMass:Number,...At};var $P=de({name:"VcPrimitiveParticle",props:Wv,emits:HG,setup(e,t){const i=fe();return i.cesiumClass="ParticleSystem",i.cesiumEvents=["complete"],cn(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}}),WG=`
  uniform sampler2D colorTexture;
  uniform vec4 u_color1;
  uniform vec4 u_color2;
  uniform float u_isShed;
  uniform sampler2D shadowMap_depthTexture;
  uniform mat4 shadowMap_matrix;
  uniform vec4 shadowMap_lightPositionEC;
  uniform vec3 shadowMap_lightDirectionEC;
  uniform float u_radius;
  uniform vec4 shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness;
  uniform vec4 shadowMap_texelSizeDepthBiasAndNormalShadingSmooth;
  uniform float czzj;
  uniform float dis;
  uniform float spzj;
  uniform float mixNum;
  uniform vec3 shadowMap_lightUp;
  uniform vec3 shadowMap_lightDir;
  uniform vec3 shadowMap_lightRight;
  in vec2 v_textureCoordinates;
  vec4 toEye(in vec2 uv, in float depth){
    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));
    vec4 posInCamera = czm_inverseProjection * vec4(xy, depth, 1.0);
    posInCamera =posInCamera / posInCamera.w;
    return posInCamera;
  }
  float getDepth(in vec4 depth){
    float z_window = czm_unpackDepth(depth);
    z_window = czm_reverseLogDepth(z_window);
    float n_range = czm_depthRange.near;
    float f_range = czm_depthRange.far;
    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
  }
  float _czm_sampleShadowMap(sampler2D shadowMap, vec2 uv){
    return texture(shadowMap, uv).r;
  }
  float _czm_shadowDepthCompare(sampler2D shadowMap, vec2 uv, float depth){
    return step(depth, _czm_sampleShadowMap(shadowMap, uv));
  }
  float _czm_shadowVisibility(sampler2D shadowMap, czm_shadowParameters shadowParameters){
    float depthBias = shadowParameters.depthBias;
    float depth = shadowParameters.depth;
    float nDotL = shadowParameters.nDotL;
    float normalShadingSmooth = shadowParameters.normalShadingSmooth;
    float darkness = shadowParameters.darkness;
    vec2 uv = shadowParameters.texCoords;
    depth -= depthBias;
    vec2 texelStepSize = shadowParameters.texelStepSize;
    float radius = 1.0;
    float dx0 = -texelStepSize.x * radius;
    float dy0 = -texelStepSize.y * radius;
    float dx1 = texelStepSize.x * radius;
    float dy1 = texelStepSize.y * radius;
    float visibility =
    (
    _czm_shadowDepthCompare(shadowMap, uv, depth)
    +_czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, 0.0), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(0.0, dy1), depth) +
    _czm_shadowDepthCompare(shadowMap, uv + vec2(dx1, dy1), depth)
    ) * (1.0 / 9.0)
    ;
    return visibility;
  }
  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point){
    vec3 v01 = point -planeOrigin;
    float d = dot(planeNormal, v01) ;
    return (point - planeNormal * d);
  }
  float ptm(vec3 pt){
    return sqrt(pt.x*pt.x + pt.y*pt.y + pt.z*pt.z);
  }
  void main()
  {
    const float PI = 3.141592653589793;
    vec4 color = texture(colorTexture, v_textureCoordinates);
    out_FragColor = color;
    if ( u_isShed < 0.5 )
        return;
    vec4 currD = texture(czm_globeDepthTexture, v_textureCoordinates);
    if( currD.r >= 1.0 )
        return;

    float depth = getDepth(currD);
    vec4 positionEC = toEye(v_textureCoordinates, depth);
    vec3 normalEC = vec3(1.0);
    czm_shadowParameters shadowParameters;
    shadowParameters.texelStepSize = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.xy;
    shadowParameters.depthBias = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.z;
    shadowParameters.normalShadingSmooth = shadowMap_texelSizeDepthBiasAndNormalShadingSmooth.w;
    shadowParameters.darkness = shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness.w;
    shadowParameters.depthBias *= max(depth * 0.01, 1.0);
    vec3 directionEC = normalize(positionEC.xyz - shadowMap_lightPositionEC.xyz);
    float nDotL = clamp(dot(normalEC, -directionEC), 0.0, 1.0);
    vec4 shadowPosition = shadowMap_matrix * positionEC;
    shadowPosition /= shadowPosition.w;
    if (any(lessThan(shadowPosition.xyz, vec3(0.0))) || any(greaterThan(shadowPosition.xyz, vec3(1.0))))
      return;

    vec4 lw = czm_inverseView* vec4(shadowMap_lightPositionEC.xyz, 1.0);
    vec4 vw = czm_inverseView* vec4(positionEC.xyz, 1.0);
    if(distance(lw.xyz,vw.xyz)> u_radius)
        return;

    shadowParameters.texCoords = shadowPosition.xy;
    shadowParameters.depth = shadowPosition.z;
    shadowParameters.nDotL = nDotL;
    float visibility = _czm_shadowVisibility(shadowMap_depthTexture, shadowParameters);
    if(visibility > 0.3 ){
      out_FragColor = mix(color,vec4(u_color1.rgb, 1.0),mixNum);
    }
    else{
      if(abs(shadowPosition.z-0.0)<0.01){
        return;
      }
      out_FragColor = mix(color,vec4(u_color2.rgb, 1.0),mixNum);
    }
  }
`;const qv={...el,fovH:{type:Number,default:90},fovV:{type:Number,default:60},offsetHeight:{type:Number,default:1.8},visibleColor:{type:[Object,Array,String],default:"#00ff00"},invisibleColor:{type:[Object,Array,String],default:"#ff0000"},showGridLine:{type:Boolean,default:!0},lineColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.4)"},faceColor:{type:[Object,Array,String],default:"rgba(255,255,255,0.1)"},show:{type:Boolean,default:!0},startPosition:{type:Object},endPosition:{type:Object},fragmentShader:{type:String},uniforms:Object};var qG=de({name:"VcViewshed",props:qv,emits:je,setup(e,t){const i=fe();i.cesiumClass="VcViewshed";const n=ht(e,t,i);if(n===void 0)return;const r=[];let a;r.push(Pe([()=>e.startPosition,()=>e.endPosition],([l,c])=>{i.mounted&&s(Ot(Hr(l)),Ot(Hr(c)))},{deep:!0})),r.push(Pe(()=>e.fovH,l=>{if(!i.mounted)return;const c=i.cesiumObject;c.fovH=l})),r.push(Pe(()=>e.fovV,l=>{if(!i.mounted)return;const c=i.cesiumObject;c.fovV=l})),r.push(Pe(()=>e.fovV,l=>{if(!i.mounted)return;const c=i.cesiumObject;c.fovV=l})),r.push(Pe(()=>e.offsetHeight,l=>{if(!i.mounted)return;const c=i.cesiumObject;c.offsetHeight=l})),r.push(Pe(()=>e.visibleColor,l=>{if(!i.mounted)return;const c=i.cesiumObject;c.visibleColor=Je(l)})),r.push(Pe(()=>e.invisibleColor,l=>{if(!i.mounted)return;const c=i.cesiumObject;c.invisibleColor=Je(l)})),r.push(Pe(()=>e.showGridLine,l=>{if(!i.mounted)return;const c=i.cesiumObject;c.showGridLine=l})),r.push(Pe(()=>e.show,l=>{if(!i.mounted)return;const c=i.cesiumObject;c.enabled=l})),Vt(()=>{r.forEach(l=>l()),r.length=0}),i.createCesiumObject=async()=>{const l=n.$services.viewer,c=new of(l.scene,{fovH:120,fovV:60,offsetHeight:1.8,visibleColor:Je(e.visibleColor),invisibleColor:Je(e.invisibleColor),showGridLine:e.showGridLine});return c._viewshedShadowMap.cascadesEnabled=!1,c._viewshedShadowMap.softShadows=!1,c._viewshedShadowMap.normalOffset=!1,c._viewshedShadowMap.fromLightSource=!1,c._viewshedShadowMap.enabled=!1,c.fovH=Cesium.Math.toRadians(e.fovH),c.fovV=Cesium.Math.toRadians(e.fovV),c.offsetHeight=e.offsetHeight,c.showGridLine=e.showGridLine,c.enabled=e.show,c.lineColor=Je(e.lineColor),c.faceColor=Je(e.faceColor),c},i.mount=async()=>{var l;const c=n.$services.viewer,d=i.cesiumObject,{Cartesian4:h,PostProcessStage:p,Cartesian2:f}=Cesium,v=(l=n.$services.viewer.scene.context)==null?void 0:l.webgl2;let y=WG;v||(y=y.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),y=y.replace(/texture\(/g,"texture2D("),y=y.replace(/out_FragColor/g,"gl_FragColor")),s(Ot(Hr(e.startPosition)),Ot(Hr(e.endPosition))),a=new p({fragmentShader:e.fragmentShader||y,uniforms:e.uniforms||{u_color1:function(){return d.visibleColor},u_color2:function(){return d.invisibleColor},u_isShed:function(){return d.shadowMap.enabled},u_radius:function(){return d.lightCamera.frustum.far},shadowMap_depthTexture:function(){return d.shadowMap.enabled?d.shadowMap._shadowMapTexture:c.scene.context.defaultTexture},shadowMap_matrix:function(){return d.shadowMap._shadowMapMatrix},shadowMap_cascadeSplits:function(){return d.shadowMap._cascadeSplits},shadowMap_cascadeMatrices:function(){return d.shadowMap._cascadeMatrices},shadowMap_lightDirectionEC:function(){return d.shadowMap._lightDirectionEC},shadowMap_lightPositionEC:function(){return d.shadowMap._lightPositionEC},shadowMap_cascadeDistances:function(){return d.shadowMap._cascadeDistances},shadowMap_normalOffsetScaleDistanceMaxDistanceAndDarkness:function(){const C=d.shadowMap._pointBias;return h.fromElements(C.normalOffsetScale,d.shadowMap._distance,d.shadowMap.maximumDistance,0,new h)},shadowMap_texelSizeDepthBiasAndNormalShadingSmooth:function(){const C=d.shadowMap._pointBias,M=new f;return M.x=1/d.shadowMap._textureSize.x,M.y=1/d.shadowMap._textureSize.y,h.fromElements(M.x,M.y,C.depthBias,C.normalShadingSmooth,new h)},czzj:function(){return d.lightCamera.frustum.fov},spzj:function(){return d.lightCamera.frustum.fov},mixNum:function(){return .5},shadowMap_lightUp:function(){return d.lightCamera.up},shadowMap_lightDir:function(){return d.lightCamera.direction},shadowMap_lightRight:function(){return d.lightCamera.right}}}),c.scene.postProcessStages.add(a);const w=n.$services.primitives;return w&&w.add(d)},i.unmount=async()=>{const l=n.$services.viewer;a&&l.scene.postProcessStages.remove(a);const c=n.$services.primitives,d=i.cesiumObject;return c&&c.remove(d)};const s=(l,c)=>{const d=i.cesiumObject,{Cartesian3:h}=Cesium;let p=h.subtract(c,l,new h);const f=h.magnitudeSquared(p),v=h.distance(c,l);if(f<.01||d.frustum.near>v)d.enabled=!1;else{d.enabled=!0,p=h.normalize(p,p);const y=h.normalize(c,new h);d.setView({destination:l,orientation:{direction:p,up:y}}),d.frustum.far=Math.max(v,1.1)}};return()=>{var l;return me(ye(((l=i.proxy)==null?void 0:l.$options.name)||""))}}});const Zv={...Qs,intervals:Object,...it,...Wn,...Ri,...Q2,shading:Object,...pm,...Ws,...At};var jP=de({name:"VcPrimitiveTimeDynamicPointCloud",props:Zv,emits:{...dn,frameChanged:e=>!0,frameFailed:e=>!0},setup(e,t){const i=fe();i.cesiumClass="VcPrimitiveTimeDynamicPointCloud",i.cesiumEvents=["frameChanged","frameFailed"];const n=cn(e,t,i);return i.createCesiumObject=async()=>{const r=n==null?void 0:n.transformProps(e);return r.style=r.tileStyle,delete r.tileStyle,new Cesium.TimeDynamicPointCloud(r)},()=>{var r;return me(ye(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const Qv={...Hn,name:String,...it,geoidTiledTerrainProvider:{type:Object},traceFetches:{type:Boolean,default:!1},cesium3dTilesetOptions:{type:Object},...At};var NP=de({name:"VcPrimitiveI3sDataProvider",props:Qv,emits:dn,setup(e,t){const i=fe();return i.cesiumClass="I3SDataProvider",cn(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Jv={provider:{type:Object},...Wn,...hm,...Qs,...At};var kP=de({name:"VcPrimitiveVoxel",props:Jv,emits:dn,setup(e,t){const i=fe();return i.cesiumClass="VoxelPrimitive",cn(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Xv={...it,enabled:{type:Boolean,default:!0},pixelRange:{type:Number,default:80},minimumClusterSize:{type:Number,default:2},clusterBillboards:{type:Boolean,default:!0},clusterLabels:{type:Boolean,default:!0},clusterPoints:{type:Boolean,default:!0},billboards:{type:Array,default:()=>[]},labels:{type:Array,default:()=>[]},points:{type:Array,default:()=>[]},...At};var VP=de({name:"VcPrimitiveCluster",props:Xv,emits:{...dn,clusterEvent:(e,t)=>!0},setup(e,t){var i;const n=fe();n.cesiumClass="VcPrimitiveCluster",n.cesiumEvents=["clusterEvent"];const r=cn(e,t,n),a=[];a.push(Pe(()=>e.show,h=>{const p=n.cesiumObject;p.show=h})),a.push(Pe(()=>e.enabled,h=>{const p=n.cesiumObject;p.enabled=h})),a.push(Pe(()=>e.minimumClusterSize,h=>{const p=n.cesiumObject;p.minimumClusterSize=h})),a.push(Pe(()=>e.clusterBillboards,h=>{const p=n.cesiumObject;p.clusterBillboards=h,n.proxy.reload()})),a.push(Pe(()=>e.clusterLabels,h=>{const p=n.cesiumObject;p.clusterLabels=h,n.proxy.reload()})),a.push(Pe(()=>e.clusterBillboards,h=>{const p=n.cesiumObject;p.clusterPoints=h,n.proxy.reload()})),a.push(Pe(()=>yt(e.billboards),(h,p)=>{if(!n.mounted)return;const f=n.cesiumObject._billboardCollection;if(h.length===p.length){const v=[];for(let y=0;y<h.length;y++){const w=h[y],C=p[y];JSON.stringify(w)!==JSON.stringify(C)&&v.push({newOptions:w,oldOptions:C})}v.forEach(y=>{const w=f._billboards.find(C=>(C==null?void 0:C.id)===y.oldOptions.id);w&&Object.keys(y.newOptions).forEach(C=>{y.oldOptions[C]!==y.newOptions[C]&&(w[C]=r==null?void 0:r.transformProp(C,y.newOptions[C]))})})}else{const v=Zt(h,p,"id"),y=Zt(p,h,"id"),w=[];for(let C=0;C<y.length;C++){const M=f._billboards.find(S=>S.id===y[C].id);M&&w.push(M)}w.forEach(C=>{f.remove(C)}),l(f,v),setTimeout(()=>{r.$services.viewer.scene.camera.changed.raiseEvent()})}},{deep:!0})),a.push(Pe(()=>yt(e.labels),(h,p)=>{if(!n.mounted)return;const f=n.cesiumObject._labelCollection;if(h.length===p.length){const v=[];for(let y=0;y<h.length;y++){const w=h[y],C=p[y];JSON.stringify(w)!==JSON.stringify(C)&&v.push({newOptions:w,oldOptions:C})}v.forEach(y=>{const w=f._labels.find(C=>C.id===y.oldOptions.id);w&&Object.keys(y.newOptions).forEach(C=>{y.oldOptions[C]!==y.newOptions[C]&&(w[C]=r.transformProp(C,y.newOptions[C]))})})}else{const v=Zt(h,p,"id"),y=Zt(p,h,"id"),w=[];for(let C=0;C<y.length;C++){const M=f._labels.find(S=>S.id===y[C].id);M&&w.push(M)}w.forEach(C=>{f.remove(C)}),c(f,v),setTimeout(()=>{r.$services.viewer.scene.camera.changed.raiseEvent()})}},{deep:!0})),a.push(Pe(()=>yt(e.points),(h,p)=>{if(!n.mounted)return;const f=n.cesiumObject._pointCollection;if(h.length===p.length){const v=[];for(let y=0;y<h.length;y++){const w=h[y],C=p[y];JSON.stringify(w)!==JSON.stringify(C)&&v.push({newOptions:w,oldOptions:C})}v.forEach(y=>{const w=f._pointPrimitives.find(C=>C&&C.id===y.oldOptions.id);w&&Object.keys(y.newOptions).forEach(C=>{y.oldOptions[C]!==y.newOptions[C]&&(w[C]=r.transformProp(C,y.newOptions[C]))})})}else{const v=Zt(h,p,"id"),y=Zt(p,h,"id"),w=[];for(let C=0;C<y.length;C++){const M=f._pointPrimitives.find(S=>S.id===y[C].id);M&&w.push(M)}w.forEach(C=>{f.remove(C)}),s(f,v),setTimeout(()=>{r.$services.viewer.scene.camera.changed.raiseEvent()})}},{deep:!0})),n.createCesiumObject=async()=>{const h=new Jm({show:e.show,enabled:e.enabled,pixelRange:e.pixelRange,minimumClusterSize:e.minimumClusterSize,clusterBillboards:e.clusterBillboards,clusterLabels:e.clusterLabels,clusterPoints:e.clusterPoints}),p=new Cesium.BillboardCollection;l(p,e.billboards);const f=new Cesium.LabelCollection;c(f,e.labels);const v=new Cesium.PointPrimitiveCollection;return s(v,e.points),h._billboardCollection=p,h._labelCollection=f,h._pointCollection=v,h._initialize(r.$services.viewer.scene),setTimeout(()=>{r.$services.viewer.scene.camera.changed.raiseEvent()}),h};const s=(h,p)=>{for(let f=0;f<p.length;f++){const v=p[f];v.id=Cesium.defined(v.id)?v.id:Cesium.createGuid();const y=r.transformProps(v),w=h.add(y);or(w,y)}},l=(h,p)=>{for(let f=0;f<p.length;f++){const v=p[f];v.id=Cesium.defined(v.id)?v.id:Cesium.createGuid();const y=r.transformProps(v),w=h.add(y);or(w,y)}},c=(h,p)=>{for(let f=0;f<p.length;f++){const v=p[f];v.id=Cesium.defined(v.id)?v.id:Cesium.createGuid();const y=r.transformProps(v),w=h.add(y);or(w,y)}};Vt(()=>{a.forEach(h=>h()),a.length=0});const d=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?R("i",{class:ye(d),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(d))}});const ZG=[IP,AP,DP,LP,BP,RP,FP,NP,kP,jP,$P,VP];ZG.forEach(e=>{e.install=t=>{t.component(e.name,e)}});const fd=IP,vd=AP,Sl=DP,Yv=LP,eo=BP,Kv=RP,e0=FP,t0=$P,i0=qG,n0=jP,r0=NP,o0=kP,a0=VP,s0={...it,...Oi,min:{type:Number,default:0},max:{type:Number,default:100},data:Array,options:Object,type:{type:String,default:"primitive"},segments:{type:Array,default:()=>[]},projection:{type:String,default:"3857"}};var zP=de({name:"VcOverlayHeatmap",props:s0,emits:je,setup(e,t){var i;const n=fe();n.cesiumClass="VcOverlayHeatmap",n.cesiumEvents=[];const r=ht(e,t,n);if(r===void 0)return;const a=he(null),s=he(null),l={minCanvasSize:700,maxCanvasSize:2e3,radiusFactor:60,spacingFactor:1.5,maxOpacity:.8,minOpacity:.1,blur:.85,gradient:{".3":"blue",".65":"yellow",".8":"orange",".95":"red"},xField:"x",yField:"y",valueField:"value",container:void 0},c=he(),d=he(),h=he(),p=he(),f=he(),v=he(!1),y=he();(i=bi(n).proxy.creatingPromise)==null||i.then(()=>{v.value=!0});const w=ge(()=>Object.assign({},l,e.options));let C=[];C.push(Pe(()=>h,O=>{d.value.fabric.uniforms.image=O.value,f.value.options.material.fabric.uniforms.image=O.value},{deep:!0})),C.push(Pe(()=>e.data,(O,I)=>{if(!n.mounted)return;const A=n.cesiumObject;Array.isArray(O)&&Array.isArray(I)?(_(O,A),h.value=A.getDataURL()):r.reload()},{deep:!0})),C.push(Pe(()=>[e.max,e.min],O=>{const I=n.cesiumObject;I.setDataMax(O[0]||0),I.setDataMin(O[1]||0),h.value=I.getDataURL()})),C.push(Pe(()=>[e.type,e.projection,e.rectangle],O=>{r.reload()})),C.push(Pe(()=>e.options,O=>{const I=n.cesiumObject;I.configure(O),h.value=I.getDataURL()},{deep:!0})),n.createCesiumObject=async()=>{const{WebMercatorProjection:O,GeographicProjection:I}=Cesium;s.value=e.projection==="3857"?new O:new I;const A=M();y.value=S(e.rectangle);const V=document.createElement("div");if(Cesium.defined(A)&&V.setAttribute("id",A),V.setAttribute("style","width: "+y.value.width+"px; height: "+y.value.height+"px; margin: 0px; display: none;"),document.body.appendChild(V),w.value.container=V,e.segments.length){w.value.gradient={};const D=e.max-e.min;for(let G=0;G<e.segments.length;G++)w.value.gradient[`${(e.segments[G][0]-e.min)/D}`]=Je(e.segments[G][1]).toCssColorString()}const $=kG.create(w.value);return V.children[0].setAttribute("id",A+"-hm"),Array.isArray(e.data)&&(_(e.data,$),d.value={fabric:{type:"Image",uniforms:{image:h.value,transparent:!0}}},f.value={type:"MaterialAppearance",options:{material:{fabric:{type:"Image",uniforms:{image:h.value}}}}}),$},n.unmount=async()=>(document.body.removeChild(n.cesiumObject._config.container),!0);const M=O=>{let I="";const A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let V=0;V<(O||8);V++)I+=A.charAt(Math.floor(Math.random()*A.length));return I},S=O=>{const I=Zo(O),A=s.value.project(new Cesium.Cartographic(I.west,I.south)),V=s.value.project(new Cesium.Cartographic(I.east,I.north)),$={north:V.y,east:V.x,south:A.y,west:A.x};let D=$.east>0&&$.west<0?$.east+Math.abs($.west):Math.abs($.east-$.west),G=$.north>0&&$.south<0?$.north+Math.abs($.south):Math.abs($.north-$.south),q=1;D>G&&D>w.value.maxCanvasSize?(q=D/w.value.maxCanvasSize,G/q<w.value.minCanvasSize&&(q=G/w.value.minCanvasSize)):G>D&&G>w.value.maxCanvasSize?(q=G/w.value.maxCanvasSize,G/q<w.value.minCanvasSize&&(q=D/w.value.minCanvasSize)):D<G&&D<w.value.minCanvasSize?(q=D/w.value.minCanvasSize,G/q>w.value.maxCanvasSize&&(q=G/w.value.maxCanvasSize)):G<D&&G<w.value.minCanvasSize&&(q=G/w.value.minCanvasSize,D/q>w.value.maxCanvasSize&&(q=D/w.value.maxCanvasSize)),D=D/q,G=G/q,Cesium.defined(w.value.radius)||(w.value.radius=D>G?D/w.value.radiusFactor:G/w.value.radiusFactor);const H=(w.value.radius||1)*w.value.spacingFactor,g=$.west,b=$.south;D=Math.round(D+H*2),G=Math.round(G+H*2),$.west-=H*q,$.east+=H*q,$.south-=H*q,$.north+=H*q;const E=s.value.unproject(new Cesium.Cartesian3($.west,$.south)),L=s.value.unproject(new Cesium.Cartesian3($.east,$.north)),P={north:Cesium.Math.toDegrees(L.latitude),east:Cesium.Math.toDegrees(L.longitude),south:Cesium.Math.toDegrees(E.latitude),west:Cesium.Math.toDegrees(E.longitude)};return c.value=P,{height:G,width:D,factor:q,xoffset:g,yoffset:b,spacing:H}},_=(O,I)=>{if(O){const{height:A,xoffset:V,yoffset:$,factor:D,spacing:G}=y.value,q=w.value.xField||"x",H=w.value.yField||"y",g=w.value.valueField||"value",b=[];for(let E=0;E<O.length;E++){const L=O[E];Cesium.defined(L.id)||(L.id=E);const P=s.value.project(Cesium.Cartographic.fromDegrees(L[q],L[H])),T={[q]:Math.round((P.x-V)/D+G),[H]:Math.round((P.y-$)/D+G),[g]:void 0};T[H]=A-T[H],(L[g]||L[g]===0)&&(T[g]=L[g]),!(T[g]>e.max||T[g]<e.min)&&b.push(T)}I.setData({min:e.min,max:e.max,data:b}),h.value=I.getDataURL()}};return Vt(()=>{C.forEach(O=>O()),C=[]}),Object.assign(n.proxy,{rootRef:a,childRef:p}),()=>{if(v.value){const O=[];return e.type==="entity"&&h.value?O.push(R(PP,{ref:p,show:e.show,rectangle:{coordinates:c.value,material:d.value}})):e.type==="primitive"?O.push(R(vd,{ref:p,show:e.show,appearance:f.value,releaseGeometryInstances:!1,geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.RectangleGeometry({rectangle:Zo(c.value)})})})):e.type==="imagery-layer"&&h.value&&O.push(R(SP,{ref:p,show:e.show,imageryProvider:new Cesium.SingleTileImageryProvider({url:h.value,rectangle:Zo(c.value)})})),R("i",{ref:a,class:"vc-overlay-heatmap",style:"display: none !important"},O)}else return me("v-if")}}});const l0={options:{type:Object,required:!0},autoHidden:{type:Boolean,default:!0},customClass:String,coordinateSystem:{type:String,default:"cesium"}};({...je});var GP=de({name:"VcOverlayEcharts",props:l0,emits:["beforeLoad","ready","destroyed","mouseenter","mouseleave","click"],setup(e,t){const i=fe();i.cesiumClass="VcOverlayEcharts",i.cesiumEvents=[];const n=ht(e,t,i);if(n===void 0)return;const{$services:r}=n,a=he(!1),s=he(),l=Ve({left:"0px",top:"0px",pointerEvents:"none",position:"absolute"});let c;const d=he(!0);let h=[];h.push(Pe(()=>e.options,S=>{n.reload()})),i.createCesiumObject=async()=>s.value,i.mount=async()=>{const{viewer:S}=r;return a.value=!0,nt(()=>{Pu.registerCoordinateSystem(e.coordinateSystem,v(S)),s.value&&(c=Pu.init(s.value),f(),S.scene.postRender.addEventListener(p))}),!0},i.unmount=async()=>{const{viewer:S}=r;return S.scene.postRender.removeEventListener(p),a.value=!1,!0};const p=()=>{if(d.value){const{viewer:S}=r;c.resize({width:S.canvas.width,height:S.canvas.height})}},f=()=>{d.value&&e.options&&c.setOption(e.options)},v=S=>{const _=function(O){this.viewer=O,this._mapOffset=[0,0]};return _.create=function(O){return O.eachSeries(function(I){I.get("coordinateSystem")===e.coordinateSystem&&(I.coordinateSystem=new _(S))}),[]},_.getDimensionsInfo=function(){return["x","y"]},_.dimensions=["x","y"],_.prototype.dimensions=["x","y"],_.prototype.setMapOffset=function(O){this._mapOffset=O},_.prototype.dataToPoint=function(O){const I=[],A=Cesium.Cartesian3.fromDegrees(O[0],O[1]);if(!A)return I;if(e.autoHidden){const $=Cesium.Ellipsoid.WGS84.geodeticSurfaceNormal(A,new Cesium.Cartesian3),D=this.viewer.camera.direction;if(Cesium.Cartesian3.dot($,D)>=0)return I}const V=this.viewer.scene.cartesianToCanvasCoordinates(A);return V?[V.x-this._mapOffset[0],V.y-this._mapOffset[1]]:I},_.prototype.pointToData=function(O){const I=this._mapOffset,A=S.scene.globe.ellipsoid,V=new Cesium.Cartesian3(O[1]+I[1],O[2]+I[2],0),$=A.cartesianToCartographic(V);return $?[$.longitude,$.latitude]:[0,0]},_.prototype.getviewerRect=function(){const O=this.viewer.canvas;return new Pu.graphic.BoundingRect(0,0,O.width,O.height)},_.prototype.getRoamTransform=function(){return Pu.matrix.create()},_},y=()=>a.value?R("div",{ref:s,class:`vc-echart-container${e.customClass?" "+e.customClass:""}`,style:l,onMouseenter:C,onMouseleave:M,onClick:w},Lt(t.slots.default)):me("v-if"),w=S=>{t.emit("click",S)},C=S=>{t.emit("mouseenter",S)},M=S=>{t.emit("mouseleave",S)};return Vt(()=>{h.forEach(S=>S()),h=[]}),()=>y()}});function UP(){const e=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new e({position:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:new Float32Array([-1,-1,0,1,-1,0,1,1,0,-1,1,0])}),st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:new Float32Array([0,0,1,0,1,1,0,1])})}),indices:new Uint32Array([3,2,0,0,2,1])})}function In(e,t){if(Cesium.defined(t)){const i={};i.arrayBufferView=t,e.source=i}return new Cesium.Texture(e)}function u0(e,t,i){return new Cesium.Framebuffer({context:e,colorTextures:[t],depthTexture:i})}function c0(e){const t={viewport:e.viewport,depthTest:e.depthTest,depthMask:e.depthMask,blending:e.blending};return Cesium.Appearance.getDefaultRenderState(!0,!1,t)}function QG(e){const t={},i=Cesium.Math.mod(e.west,Cesium.Math.TWO_PI),n=Cesium.Math.mod(e.east,Cesium.Math.TWO_PI),r=e.width;let a,s;r>Cesium.Math.THREE_PI_OVER_TWO?(a=0,s=Cesium.Math.TWO_PI):n-i<r?(a=i,s=i+r):(a=i,s=n),t.lon={min:Cesium.Math.toDegrees(a),max:Cesium.Math.toDegrees(s)};const l=e.south,c=e.north,d=e.height,h=d>Cesium.Math.PI/12?d/2:0;let p=Cesium.Math.clampToLatitudeRange(l-h),f=Cesium.Math.clampToLatitudeRange(c+h);return p<-Cesium.Math.PI_OVER_THREE&&(p=-Cesium.Math.PI_OVER_TWO),f>Cesium.Math.PI_OVER_THREE&&(f=Cesium.Math.PI_OVER_TWO),t.lat={min:Cesium.Math.toDegrees(p),max:Cesium.Math.toDegrees(f)},t}var JG=`

precision highp float;

// the size of UV textures: width = lon, height = lat*lev
uniform sampler2D U; // eastward wind
uniform sampler2D V; // northward wind
uniform sampler2D currentParticlesPosition; // (lon, lat, lev)

uniform vec3 dimension; // (lon, lat, lev)
uniform vec3 minimum; // minimum of each dimension
uniform vec3 maximum; // maximum of each dimension
uniform vec3 interval; // interval of each dimension

// used to calculate the wind norm
uniform vec2 uSpeedRange; // (min, max);
uniform vec2 vSpeedRange;
uniform float pixelSize;
uniform float speedFactor;

in vec2 v_textureCoordinates;

vec2 mapPositionToNormalizedIndex2D(vec3 lonLatLev) {
  // ensure the range of longitude and latitude
  lonLatLev.x = mod(lonLatLev.x, 360.0);
  lonLatLev.y = clamp(lonLatLev.y, -90.0, 90.0);

  vec3 index3D = vec3(0.0);
  index3D.x = (lonLatLev.x - minimum.x) / interval.x;
  index3D.y = (lonLatLev.y - minimum.y) / interval.y;
  index3D.z = (lonLatLev.z - minimum.z) / interval.z;

  // the st texture coordinate corresponding to (col, row) index
  // example
  // data array is [0, 1, 2, 3, 4, 5], width = 3, height = 2
  // the content of texture will be
  // t 1.0
  //    |  3 4 5
  //    |
  //    |  0 1 2
  //   0.0------1.0 s

  vec2 index2D = vec2(index3D.x, index3D.z * dimension.y + index3D.y);
  vec2 normalizedIndex2D = vec2(index2D.x / dimension.x, index2D.y / (dimension.y * dimension.z));
  return normalizedIndex2D;
}

float getWindComponent(sampler2D componentTexture, vec3 lonLatLev) {
  vec2 normalizedIndex2D = mapPositionToNormalizedIndex2D(lonLatLev);
  float result = texture(componentTexture, normalizedIndex2D).r;
  return result;
}

float interpolateTexture(sampler2D componentTexture, vec3 lonLatLev) {
  float lon = lonLatLev.x;
  float lat = lonLatLev.y;
  float lev = lonLatLev.z;

  float lon0 = floor(lon / interval.x) * interval.x;
  float lon1 = lon0 + 1.0 * interval.x;
  float lat0 = floor(lat / interval.y) * interval.y;
  float lat1 = lat0 + 1.0 * interval.y;

  float lon0_lat0 = getWindComponent(componentTexture, vec3(lon0, lat0, lev));
  float lon1_lat0 = getWindComponent(componentTexture, vec3(lon1, lat0, lev));
  float lon0_lat1 = getWindComponent(componentTexture, vec3(lon0, lat1, lev));
  float lon1_lat1 = getWindComponent(componentTexture, vec3(lon1, lat1, lev));

  float lon_lat0 = mix(lon0_lat0, lon1_lat0, lon - lon0);
  float lon_lat1 = mix(lon0_lat1, lon1_lat1, lon - lon0);
  float lon_lat = mix(lon_lat0, lon_lat1, lat - lat0);
  return lon_lat;
}

vec3 linearInterpolation(vec3 lonLatLev) {
  // https://en.wikipedia.org/wiki/Bilinear_interpolation
  float u = interpolateTexture(U, lonLatLev);
  float v = interpolateTexture(V, lonLatLev);
  float w = 0.0;
  return vec3(u, v, w);
}

vec2 lengthOfLonLat(vec3 lonLatLev) {
  // unit conversion: meters -> longitude latitude degrees
  // see https://en.wikipedia.org/wiki/Geographic_coordinate_system#Length_of_a_degree for detail

  // Calculate the length of a degree of latitude and longitude in meters
  float latitude = radians(lonLatLev.y);

  float term1 = 111132.92;
  float term2 = 559.82 * cos(2.0 * latitude);
  float term3 = 1.175 * cos(4.0 * latitude);
  float term4 = 0.0023 * cos(6.0 * latitude);
  float latLength = term1 - term2 + term3 - term4;

  float term5 = 111412.84 * cos(latitude);
  float term6 = 93.5 * cos(3.0 * latitude);
  float term7 = 0.118 * cos(5.0 * latitude);
  float longLength = term5 - term6 + term7;

  return vec2(longLength, latLength);
}

vec3 convertSpeedUnitToLonLat(vec3 lonLatLev, vec3 speed) {
  vec2 lonLatLength = lengthOfLonLat(lonLatLev);
  float u = speed.x / lonLatLength.x;
  float v = speed.y / lonLatLength.y;
  float w = 0.0;
  vec3 windVectorInLonLatLev = vec3(u, v, w);

  return windVectorInLonLatLev;
}

vec3 calculateSpeedByRungeKutta2(vec3 lonLatLev) {
  // see https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Second-order_methods_with_two_stages for detail
  const float h = 0.5;
  float speedScaleFactor = speedFactor * pixelSize;

  vec3 y_n = lonLatLev;
  vec3 f_n = linearInterpolation(lonLatLev);
  vec3 midpoint = y_n + 0.5 * h * convertSpeedUnitToLonLat(y_n, f_n) * speedScaleFactor;
  vec3 speed = h * linearInterpolation(midpoint) * speedScaleFactor;

  return speed;
}

float calculateWindNorm(vec3 speed) {
  vec3 percent = vec3(0.0);
  percent.x = (speed.x - uSpeedRange.x) / (uSpeedRange.y - uSpeedRange.x);
  percent.y = (speed.y - vSpeedRange.x) / (vSpeedRange.y - vSpeedRange.x);
  float norm = length(percent);

  return norm;
}

void main() {
  // texture coordinate must be normalized
  vec3 lonLatLev = texture(currentParticlesPosition, v_textureCoordinates).rgb;
  float speedScaleFactor = speedFactor * pixelSize;
  vec3 speed = calculateSpeedByRungeKutta2(lonLatLev);
  vec3 speedInLonLat = convertSpeedUnitToLonLat(lonLatLev, speed);

  vec4 particleSpeed = vec4(speedInLonLat, calculateWindNorm(speed / speedScaleFactor));
  out_FragColor = particleSpeed;
}
`;const XG=`
uniform sampler2D currentParticlesPosition; // (lon, lat, lev)
uniform sampler2D particlesSpeed; // (u, v, w, norm) Unit converted to degrees of longitude and latitude

in vec2 v_textureCoordinates;

void main() {
  // texture coordinate must be normalized
  vec3 lonLatLev = texture(currentParticlesPosition, v_textureCoordinates).rgb;
  vec3 speed = texture(particlesSpeed, v_textureCoordinates).rgb;
  vec3 nextParticle = lonLatLev + speed;

  out_FragColor = vec4(nextParticle, 0.0);
}
`,YG=`

uniform sampler2D nextParticlesPosition;
uniform sampler2D particlesSpeed; // (u, v, w, norm)

// range (min, max)
uniform vec2 lonRange;
uniform vec2 latRange;

uniform float randomCoefficient; // use to improve the pseudo-random generator
uniform float dropRate; // drop rate is a chance a particle will restart at random position to avoid degeneration
uniform float dropRateBump;

in vec2 v_textureCoordinates;

// pseudo-random generator
const vec3 randomConstants = vec3(12.9898, 78.233, 4375.85453);
const vec2 normalRange = vec2(0.0, 1.0);
float rand(vec2 seed, vec2 range) {
  vec2 randomSeed = randomCoefficient * seed;
  float temp = dot(randomConstants.xy, randomSeed);
  temp = fract(sin(temp) * (randomConstants.z + temp));
  return temp * (range.y - range.x) + range.x;
}

vec3 generateRandomParticle(vec2 seed, float lev) {
  // ensure the longitude is in [0, 360]
  float randomLon = mod(rand(seed, lonRange), 360.0);
  float randomLat = rand(-seed, latRange);

  return vec3(randomLon, randomLat, lev);
}

bool particleOutbound(vec3 particle) {
  return particle.y < -90.0 || particle.y > 90.0;
}

void main() {
  vec3 nextParticle = texture(nextParticlesPosition, v_textureCoordinates).rgb;
  vec4 nextSpeed = texture(particlesSpeed, v_textureCoordinates);
  float speedNorm = nextSpeed.a;
  float particleDropRate = dropRate + dropRateBump * speedNorm;

  vec2 seed1 = nextParticle.xy + v_textureCoordinates;
  vec2 seed2 = nextSpeed.xy + v_textureCoordinates;
  vec3 randomParticle = generateRandomParticle(seed1, nextParticle.z);
  float randomNumber = rand(seed2, normalRange);

  if (randomNumber < particleDropRate || particleOutbound(nextParticle)) {
    out_FragColor = vec4(randomParticle, 1.0); // 1.0 means this is a random particle
  } else {
    out_FragColor = vec4(nextParticle, 0.0);
  }
}
`;class is{constructor(t){this.commandType=t.commandType,this.geometry=t.geometry,this.attributeLocations=t.attributeLocations,this.primitiveType=t.primitiveType,this.uniformMap=t.uniformMap,this.vertexShaderSource=t.vertexShaderSource,this.fragmentShaderSource=t.fragmentShaderSource,this.rawRenderState=t.rawRenderState,this.framebuffer=t.framebuffer,this.outputTexture=t.outputTexture,this.autoClear=Cesium.defaultValue(t.autoClear,!1),this.preExecute=t.preExecute,this.show=!0,this.commandToExecute=void 0,this.clearCommand=void 0,this.autoClear&&(this.clearCommand=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:this.framebuffer,pass:Cesium.Pass.OPAQUE}))}createCommand(t){switch(this.commandType){case"Draw":{const i=Cesium.VertexArray.fromGeometry({context:t,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW}),n=Cesium.ShaderProgram.fromCache({context:t,attributeLocations:this.attributeLocations,vertexShaderSource:this.vertexShaderSource,fragmentShaderSource:this.fragmentShaderSource}),r=Cesium.RenderState.fromCache(this.rawRenderState);return new Cesium.DrawCommand({owner:this,vertexArray:i,primitiveType:this.primitiveType,uniformMap:this.uniformMap,modelMatrix:Cesium.Matrix4.IDENTITY,shaderProgram:n,framebuffer:this.framebuffer,renderState:r,pass:Cesium.Pass.OPAQUE})}case"Compute":return new Cesium.ComputeCommand({owner:this,fragmentShaderSource:this.fragmentShaderSource,uniformMap:this.uniformMap,outputTexture:this.outputTexture,persists:!0})}}setGeometry(t,i){this.geometry=i;const n=Cesium.VertexArray.fromGeometry({context:t,geometry:this.geometry,attributeLocations:this.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.commandToExecute.vertexArray=n}update(t){this.show&&(Cesium.defined(this.commandToExecute)||(this.commandToExecute=this.createCommand(t.context)),Cesium.defined(this.preExecute)&&this.preExecute(),Cesium.defined(this.clearCommand)&&t.commandList.push(this.clearCommand),t.commandList.push(this.commandToExecute))}isDestroyed(){return!1}destroy(){return Cesium.defined(this.commandToExecute)&&(this.commandToExecute.shaderProgram=this.commandToExecute.shaderProgram&&this.commandToExecute.shaderProgram.destroy()),Cesium.destroyObject(this)}}class HP{constructor(t,i,n,r){this.data=i,this.createWindTextures(t,i),this.createParticlesTextures(t,n,r),this.createComputingPrimitives(i,n,r,t)}createWindTextures(t,i){const n={context:t,width:i.dimensions.lon,height:i.dimensions.lat*i.dimensions.lev,pixelFormat:t!=null&&t.webgl2?Cesium.PixelFormat.RED:Cesium.PixelFormat.LUMINANCE,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})};this.windTextures={U:In(n,i.U.array),V:In(n,i.V.array)}}createParticlesTextures(t,i,n){const r={context:t,width:i.particlesTextureSize,height:i.particlesTextureSize,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.FLOAT,flipY:!1,sampler:new Cesium.Sampler({minificationFilter:Cesium.TextureMinificationFilter.NEAREST,magnificationFilter:Cesium.TextureMagnificationFilter.NEAREST})},a=this.randomizeParticles(i.maxParticles,n),s=new Float32Array(4*i.maxParticles).fill(0);this.particlesTextures={previousParticlesPosition:In(r,a),currentParticlesPosition:In(r,a),nextParticlesPosition:In(r,a),postProcessingPosition:In(r,a),particlesSpeed:In(r,s)}}randomizeParticles(t,i){const n=new Float32Array(4*t);for(let r=0;r<t;r++)n[4*r]=Cesium.Math.randomBetween(i.lonRange.x,i.lonRange.y),n[4*r+1]=Cesium.Math.randomBetween(i.latRange.x,i.latRange.y),n[4*r+2]=Cesium.Math.randomBetween(this.data.lev.min,this.data.lev.max),n[4*r+3]=0;return n}destroyParticlesTextures(){Object.keys(this.particlesTextures).forEach(t=>{this.particlesTextures[t].destroy()})}createComputingPrimitives(t,i,n,r){const a=r==null?void 0:r.webgl2;let s=JG;a||(s=s.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),s=s.replace(/texture\(/g,"texture2D("),s=s.replace(/out_FragColor/g,"gl_FragColor"));let l=XG;a||(l=l.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),l=l.replace(/texture\(/g,"texture2D("),l=l.replace(/out_FragColor/g,"gl_FragColor"));let c=YG;a||(c=c.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),c=c.replace(/texture\(/g,"texture2D("),c=c.replace(/out_FragColor/g,"gl_FragColor"));const d=new Cesium.Cartesian3(t.dimensions.lon,t.dimensions.lat,t.dimensions.lev),h=new Cesium.Cartesian3(t.lon.min,t.lat.min,t.lev.min),p=new Cesium.Cartesian3(t.lon.max,t.lat.max,t.lev.max),f=new Cesium.Cartesian3((p.x-h.x)/(d.x-1),(p.y-h.y)/(d.y-1),d.z>1?(p.z-h.z)/(d.z-1):1),v=new Cesium.Cartesian2(t.U.min,t.U.max),y=new Cesium.Cartesian2(t.V.min,t.V.max),w=this;this.primitives={calculateSpeed:new is({commandType:"Compute",uniformMap:{U:function(){return w.windTextures.U},V:function(){return w.windTextures.V},currentParticlesPosition:function(){return w.particlesTextures.currentParticlesPosition},dimension:function(){return d},minimum:function(){return h},maximum:function(){return p},interval:function(){return f},uSpeedRange:function(){return v},vSpeedRange:function(){return y},pixelSize:function(){return n.pixelSize},speedFactor:function(){return i.speedFactor}},fragmentShaderSource:new Cesium.ShaderSource({sources:[s]}),outputTexture:this.particlesTextures.particlesSpeed,preExecute:function(){const C=w.particlesTextures.previousParticlesPosition;w.particlesTextures.previousParticlesPosition=w.particlesTextures.currentParticlesPosition,w.particlesTextures.currentParticlesPosition=w.particlesTextures.postProcessingPosition,w.particlesTextures.postProcessingPosition=C,w.primitives.calculateSpeed.commandToExecute.outputTexture=w.particlesTextures.particlesSpeed}}),updatePosition:new is({commandType:"Compute",uniformMap:{currentParticlesPosition:function(){return w.particlesTextures.currentParticlesPosition},particlesSpeed:function(){return w.particlesTextures.particlesSpeed}},fragmentShaderSource:new Cesium.ShaderSource({sources:[l]}),outputTexture:this.particlesTextures.nextParticlesPosition,preExecute:function(){w.primitives.updatePosition.commandToExecute.outputTexture=w.particlesTextures.nextParticlesPosition}}),postProcessingPosition:new is({commandType:"Compute",uniformMap:{nextParticlesPosition:function(){return w.particlesTextures.nextParticlesPosition},particlesSpeed:function(){return w.particlesTextures.particlesSpeed},lonRange:function(){return n.lonRange},latRange:function(){return n.latRange},randomCoefficient:function(){return Math.random()},dropRate:function(){return i.dropRate},dropRateBump:function(){return i.dropRateBump}},fragmentShaderSource:new Cesium.ShaderSource({sources:[c]}),outputTexture:this.particlesTextures.postProcessingPosition,preExecute:function(){w.primitives.postProcessingPosition.commandToExecute.outputTexture=w.particlesTextures.postProcessingPosition}})}}}const KG=`
in vec2 st;
// it is not normal itself, but used to control lines drawing
in vec3 normal; // (point to use, offset sign, not used component)

uniform sampler2D previousParticlesPosition;
uniform sampler2D currentParticlesPosition;
uniform sampler2D postProcessingPosition;

uniform float particleHeight;

uniform float aspect;
uniform float pixelSize;
uniform float lineWidth;

struct adjacentPoints {
  vec4 previous;
  vec4 current;
  vec4 next;
};

vec3 convertCoordinate(vec3 lonLatLev) {
  // WGS84 (lon, lat, lev) -> ECEF (x, y, z)
  // read https://en.wikipedia.org/wiki/Geographic_coordinate_conversion#From_geodetic_to_ECEF_coordinates for detail

  // WGS 84 geometric constants
  float a = 6378137.0; // Semi-major axis
  float b = 6356752.3142; // Semi-minor axis
  float e2 = 6.69437999014e-3; // First eccentricity squared

  float latitude = radians(lonLatLev.y);
  float longitude = radians(lonLatLev.x);

  float cosLat = cos(latitude);
  float sinLat = sin(latitude);
  float cosLon = cos(longitude);
  float sinLon = sin(longitude);

  float N_Phi = a / sqrt(1.0 - e2 * sinLat * sinLat);
  float h = particleHeight; // it should be high enough otherwise the particle may not pass the terrain depth test

  vec3 cartesian = vec3(0.0);
  cartesian.x = (N_Phi + h) * cosLat * cosLon;
  cartesian.y = (N_Phi + h) * cosLat * sinLon;
  cartesian.z = ((b * b) / (a * a) * N_Phi + h) * sinLat;
  return cartesian;
}

vec4 calculateProjectedCoordinate(vec3 lonLatLev) {
  // the range of longitude in Cesium is [-180, 180] but the range of longitude in the NetCDF file is [0, 360]
  // [0, 180] is corresponding to [0, 180] and [180, 360] is corresponding to [-180, 0]
  lonLatLev.x = mod(lonLatLev.x + 180.0, 360.0) - 180.0;
  vec3 particlePosition = convertCoordinate(lonLatLev);
  vec4 projectedCoordinate = czm_modelViewProjection * vec4(particlePosition, 1.0);
  return projectedCoordinate;
}

vec4 calculateOffsetOnNormalDirection(vec4 pointA, vec4 pointB, float offsetSign) {
  vec2 aspectVec2 = vec2(aspect, 1.0);
  vec2 pointA_XY = (pointA.xy / pointA.w) * aspectVec2;
  vec2 pointB_XY = (pointB.xy / pointB.w) * aspectVec2;

  float offsetLength = lineWidth / 2.0;
  vec2 direction = normalize(pointB_XY - pointA_XY);
  vec2 normalVector = vec2(-direction.y, direction.x);
  normalVector.x = normalVector.x / aspect;
  normalVector = offsetLength * normalVector;

  vec4 offset = vec4(offsetSign * normalVector, 0.0, 0.0);
  return offset;
}

vec4 calculateOffsetOnMiterDirection(adjacentPoints projectedCoordinates, float offsetSign) {
  vec2 aspectVec2 = vec2(aspect, 1.0);

  vec4 PointA = projectedCoordinates.previous;
  vec4 PointB = projectedCoordinates.current;
  vec4 PointC = projectedCoordinates.next;

  vec2 pointA_XY = (PointA.xy / PointA.w) * aspectVec2;
  vec2 pointB_XY = (PointB.xy / PointB.w) * aspectVec2;
  vec2 pointC_XY = (PointC.xy / PointC.w) * aspectVec2;

  vec2 AB = normalize(pointB_XY - pointA_XY);
  vec2 BC = normalize(pointC_XY - pointB_XY);

  vec2 normalA = vec2(-AB.y, AB.x);
  vec2 tangent = normalize(AB + BC);
  vec2 miter = vec2(-tangent.y, tangent.x);

  float offsetLength = lineWidth / 2.0;
  float projection = dot(miter, normalA);
  vec4 offset = vec4(0.0);
  // avoid to use values that are too small
  if (projection > 0.1) {
      float miterLength = offsetLength / projection;
      offset = vec4(offsetSign * miter * miterLength, 0.0, 0.0);
      offset.x = offset.x / aspect;
  } else {
      offset = calculateOffsetOnNormalDirection(PointB, PointC, offsetSign);
  }

  return offset;
}

void main() {
  vec2 particleIndex = st;

  vec3 previousPosition = texture(previousParticlesPosition, particleIndex).rgb;
  vec3 currentPosition = texture(currentParticlesPosition, particleIndex).rgb;
  vec3 nextPosition = texture(postProcessingPosition, particleIndex).rgb;

  float isAnyRandomPointUsed = texture(postProcessingPosition, particleIndex).a +
    texture(currentParticlesPosition, particleIndex).a +
    texture(previousParticlesPosition, particleIndex).a;

  adjacentPoints projectedCoordinates;
  if (isAnyRandomPointUsed > 0.0) {
    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);
    projectedCoordinates.current = projectedCoordinates.previous;
    projectedCoordinates.next = projectedCoordinates.previous;
  } else {
    projectedCoordinates.previous = calculateProjectedCoordinate(previousPosition);
    projectedCoordinates.current = calculateProjectedCoordinate(currentPosition);
    projectedCoordinates.next = calculateProjectedCoordinate(nextPosition);
  }

  int pointToUse = int(normal.x);
  float offsetSign = normal.y;
  vec4 offset = vec4(0.0);
  // render lines with triangles and miter joint
  // read https://blog.scottlogic.com/2019/11/18/drawing-lines-with-webgl.html for detail
  if (pointToUse == -1) {
    offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.previous, projectedCoordinates.current, offsetSign);
    gl_Position = projectedCoordinates.previous + offset;
  } else {
    if (pointToUse == 0) {
      offset = pixelSize * calculateOffsetOnMiterDirection(projectedCoordinates, offsetSign);
      gl_Position = projectedCoordinates.current + offset;
    } else {
      if (pointToUse == 1) {
        offset = pixelSize * calculateOffsetOnNormalDirection(projectedCoordinates.current, projectedCoordinates.next, offsetSign);
        gl_Position = projectedCoordinates.next + offset;
      } else {

      }
    }
  }
}
`,eU=`
void main() {
  const vec4 white = vec4(1.0);
  out_FragColor = white;
}
`,tU=`
in vec3 position;
in vec2 st;

out vec2 textureCoordinate;

void main() {
  textureCoordinate = st;
  gl_Position = vec4(position, 1.0);
}
`,iU=`

uniform sampler2D segmentsColorTexture;
uniform sampler2D segmentsDepthTexture;

uniform sampler2D currentTrailsColor;
uniform sampler2D trailsDepthTexture;

uniform float fadeOpacity;

in vec2 textureCoordinate;

void main() {
  vec4 pointsColor = texture(segmentsColorTexture, textureCoordinate);
  vec4 trailsColor = texture(currentTrailsColor, textureCoordinate);

  trailsColor = floor(fadeOpacity * 255.0 * trailsColor) / 255.0; // make sure the trailsColor will be strictly decreased

  float pointsDepth = texture(segmentsDepthTexture, textureCoordinate).r;
  float trailsDepth = texture(trailsDepthTexture, textureCoordinate).r;
  float globeDepth = czm_unpackDepth(texture(czm_globeDepthTexture, textureCoordinate));

  out_FragColor = vec4(0.0);
  if (pointsDepth < globeDepth) {
    out_FragColor = out_FragColor + pointsColor;
  }
  if (trailsDepth < globeDepth) {
    out_FragColor = out_FragColor + trailsColor;
  }
  gl_FragDepth = min(pointsDepth, trailsDepth);
}
`,nU=`
uniform sampler2D trailsColorTexture;
uniform sampler2D trailsDepthTexture;

in vec2 textureCoordinate;

void main() {
  vec4 trailsColor = texture(trailsColorTexture, textureCoordinate);
  float trailsDepth = texture(trailsDepthTexture, textureCoordinate).r;
  float globeDepth = czm_unpackDepth(texture(czm_globeDepthTexture, textureCoordinate));

  if (trailsDepth < globeDepth) {
    out_FragColor = trailsColor;
  } else {
    out_FragColor = vec4(0.0);
  }
}
`;class WP{constructor(t,i,n,r,a){this.createRenderingTextures(t,i),this.createRenderingFramebuffers(t),this.createRenderingPrimitives(t,n,r,a)}createRenderingTextures(t,i){const n={context:t,width:t.drawingBufferWidth,height:t.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.RGBA,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_BYTE},r={context:t,width:t.drawingBufferWidth,height:t.drawingBufferHeight,pixelFormat:Cesium.PixelFormat.DEPTH_COMPONENT,pixelDatatype:Cesium.PixelDatatype.UNSIGNED_INT};this.textures={segmentsColor:In(n),segmentsDepth:In(r),currentTrailsColor:In(n),currentTrailsDepth:In(r),nextTrailsColor:In(n),nextTrailsDepth:In(r)}}createRenderingFramebuffers(t){this.framebuffers={segments:u0(t,this.textures.segmentsColor,this.textures.segmentsDepth),currentTrails:u0(t,this.textures.currentTrailsColor,this.textures.currentTrailsDepth),nextTrails:u0(t,this.textures.nextTrailsColor,this.textures.nextTrailsDepth)}}createSegmentsGeometry(t){const i=[];for(let p=0;p<t.particlesTextureSize;p++)for(let f=0;f<t.particlesTextureSize;f++)for(let v=0;v<6;v++)i.push(p/t.particlesTextureSize),i.push(f/t.particlesTextureSize);const n=new Float32Array(i),r=[],a=[-1,0,1],s=[-1,1];for(let p=0;p<t.maxParticles;p++)for(let f=0;f<a.length;f++)for(let v=0;v<s.length;v++)r.push(a[f]),r.push(s[v]),r.push(0);const l=new Float32Array(r),c=12*t.maxParticles,d=new Uint32Array(c);for(let p=0,f=0,v=0;p<t.maxParticles;p++)d[f++]=v+0,d[f++]=v+1,d[f++]=v+2,d[f++]=v+2,d[f++]=v+1,d[f++]=v+3,d[f++]=v+2,d[f++]=v+4,d[f++]=v+3,d[f++]=v+4,d[f++]=v+3,d[f++]=v+5,v+=6;const h=Cesium.GeometryAttributes;return new Cesium.Geometry({attributes:new h({st:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:2,values:n}),normal:new Cesium.GeometryAttribute({componentDatatype:Cesium.ComponentDatatype.FLOAT,componentsPerAttribute:3,values:l})}),indices:d})}createRenderingPrimitives(t,i,n,r){const a=this,s=t==null?void 0:t.webgl2;let l=KG;s||(l=l.replace("in vec2 st;","attribute vec2 st;"),l=l.replace("in vec3 normal;","attribute vec3 normal;"),l=l.replace(/texture\(/g,"texture2D("));let c=eU;s||(c=c.replace(/out_FragColor/g,"gl_FragColor"));let d=tU;s||(d=d.replace("out vec2 textureCoordinate;","varying vec2 textureCoordinate;"),d=d.replace("in vec3 position;","attribute vec3 position;"),d=d.replace("in vec2 st;","attribute vec2 st;"));let h=iU;s||(h=h.replace("in vec2 textureCoordinate;","varying vec2 textureCoordinate;"),h=h.replace(/out_FragColor/g,"gl_FragColor"),h=h.replace(/gl_FragDepth/g,"gl_FragDepthEXT"),h=h.replace(/texture\(/g,"texture2D("));let p=nU;s||(p=p.replace("in vec2 textureCoordinate;","varying vec2 textureCoordinate;"),p=p.replace(/out_FragColor/g,"gl_FragColor"),p=p.replace(/texture\(/g,"texture2D(")),this.primitives={segments:new is({commandType:"Draw",attributeLocations:{st:0,normal:1},geometry:this.createSegmentsGeometry(i),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{previousParticlesPosition:function(){return r.particlesTextures.previousParticlesPosition},currentParticlesPosition:function(){return r.particlesTextures.currentParticlesPosition},postProcessingPosition:function(){return r.particlesTextures.postProcessingPosition},aspect:function(){return t.drawingBufferWidth/t.drawingBufferHeight},pixelSize:function(){return n.pixelSize},lineWidth:function(){return i.lineWidth},particleHeight:function(){return i.particleHeight}},vertexShaderSource:new Cesium.ShaderSource({sources:[l]}),fragmentShaderSource:new Cesium.ShaderSource({sources:[c]}),rawRenderState:c0({viewport:void 0,depthTest:{enabled:!0},depthMask:!0}),framebuffer:this.framebuffers.segments,autoClear:!0}),trails:new is({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:UP(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{segmentsColorTexture:function(){return a.textures.segmentsColor},segmentsDepthTexture:function(){return a.textures.segmentsDepth},currentTrailsColor:function(){return a.framebuffers.currentTrails.getColorTexture(0)},trailsDepthTexture:function(){return a.framebuffers.currentTrails.depthTexture},fadeOpacity:function(){return i.fadeOpacity}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[d]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[h]}),rawRenderState:c0({viewport:void 0,depthTest:{enabled:!0,func:Cesium.DepthFunction.ALWAYS},depthMask:!0}),framebuffer:this.framebuffers.nextTrails,autoClear:!0,preExecute:function(){const f=a.framebuffers.currentTrails;a.framebuffers.currentTrails=a.framebuffers.nextTrails,a.framebuffers.nextTrails=f,a.primitives.trails.commandToExecute.framebuffer=a.framebuffers.nextTrails,a.primitives.trails.clearCommand.framebuffer=a.framebuffers.nextTrails}}),screen:new is({commandType:"Draw",attributeLocations:{position:0,st:1},geometry:UP(),primitiveType:Cesium.PrimitiveType.TRIANGLES,uniformMap:{trailsColorTexture:function(){return a.framebuffers.nextTrails.getColorTexture(0)},trailsDepthTexture:function(){return a.framebuffers.nextTrails.depthTexture}},vertexShaderSource:new Cesium.ShaderSource({defines:["DISABLE_GL_POSITION_LOG_DEPTH"],sources:[d]}),fragmentShaderSource:new Cesium.ShaderSource({defines:["DISABLE_LOG_DEPTH_FRAGMENT_WRITE"],sources:[p]}),rawRenderState:c0({viewport:void 0,depthTest:{enabled:!1},depthMask:!0,blending:{enabled:!0}}),framebuffer:void 0})}}}class rU{constructor(t,i,n,r){this.context=t,this.data=i,this.particleSystemOptions=n,this.viewerParameters=r,this.particlesComputing=new HP(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new WP(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}canvasResize(t){this.particlesComputing.destroyParticlesTextures(),Object.keys(this.particlesComputing.windTextures).forEach(i=>{this.particlesComputing.windTextures[i].destroy()}),Object.keys(this.particlesRendering.framebuffers).forEach(i=>{this.particlesRendering.framebuffers[i].destroy()}),this.context=t,this.particlesComputing=new HP(this.context,this.data,this.particleSystemOptions,this.viewerParameters),this.particlesRendering=new WP(this.context,this.data,this.particleSystemOptions,this.viewerParameters,this.particlesComputing)}clearFramebuffers(){const t=new Cesium.ClearCommand({color:new Cesium.Color(0,0,0,0),depth:1,framebuffer:void 0,pass:Cesium.Pass.OPAQUE});Object.keys(this.particlesRendering.framebuffers).forEach(i=>{t.framebuffer=this.particlesRendering.framebuffers[i],t.execute(this.context)})}refreshParticles(t){if(this.clearFramebuffers(),this.particlesComputing.destroyParticlesTextures(),this.particlesComputing.createParticlesTextures(this.context,this.particleSystemOptions,this.viewerParameters),t){const i=this.particlesRendering.createSegmentsGeometry(this.particleSystemOptions);this.particlesRendering.primitives.segments.geometry=i;const n=Cesium.VertexArray.fromGeometry({context:this.context,geometry:i,attributeLocations:this.particlesRendering.primitives.segments.attributeLocations,bufferUsage:Cesium.BufferUsage.STATIC_DRAW});this.particlesRendering.primitives.segments.commandToExecute.vertexArray=n}}applyParticleSystemOptions(t){let i=!1;this.particleSystemOptions.maxParticles!==t.maxParticles&&(i=!0),Object.keys(t).forEach(n=>{this.particleSystemOptions[n]=t[n]}),this.refreshParticles(i)}applyViewerParameters(t){Object.keys(t).forEach(i=>{this.viewerParameters[i]=t[i]}),this.refreshParticles(!1)}}function qP(e,t){const i=e-t*Math.floor(e/t);return i===t?0:i}function gd(e){return typeof e=="string"&&e.indexOf("/")>=0&&(e=e.split("/")),A8(e)&&e.length===2?e[0]/e[1]:+e}function oU(e,t){const i=Math.floor(e.size),n=Math.floor(t.size),r=i*n,a=gd(e.delta),s=gd(t.delta),l=gd(e.start),c=gd(t.start),d=Math.floor(i*a)>=360;function h(){return{width:i,height:n}}function p(){return d}function f(w,C){for(let M=C||0;M<r;M++){const S=M%i,_=Math.floor(M/i),O=l+S*a,I=c+_*s;if(w(O,I,M))return M+1}return NaN}function v(w,C){if(w===w&&C===C){const M=qP(w-l,360)/a,S=(C-c)/s,_=Math.round(M),O=Math.round(S);if(0<=O&&O<n&&0<=_&&(_<i||_===i&&d)){const I=O*i+_;return _===i?I-i:I}}return NaN}function y(w,C){if(w===w&&C===C){const M=qP(w-l,360)/a,S=(C-c)/s,_=Math.floor(M),O=Math.floor(S),I=_+1,A=O+1,V=M-_,$=S-O;if(0<=O&&A<n&&0<=_&&(I<i||I===i&&d)){const D=O*i+_;let G=D+1;const q=D+i;let H=q+1;return I===i&&(G-=i,H-=i),[D,G,q,H,V,$]}}return[NaN,NaN,NaN,NaN,NaN,NaN]}return{dimensions:h,isCylindrical:p,forEach:f,closest:v,closest4:y}}const d0={show:{type:Boolean,default:!0},data:{type:Object,required:!0},options:{type:Object,default:()=>({maxParticles:64*64,particleHeight:100,fadeOpacity:.996,dropRate:.003,dropRateBump:.01,speedFactor:1,lineWidth:4})},viewerParameters:Object};var ZP=de({name:"VcOverlayWindmap",props:d0,emits:je,setup(e,t){const i=fe();i.cesiumClass="VcOverlayHtml",i.cesiumEvents=[];const n=ht(e,t,i);if(n===void 0)return;const{$services:r}=n;let a,s,l,c;const d=ge(()=>{const O=Math.ceil(Math.sqrt(e.options.maxParticles)),I=O*O;return{particlesTextureSize:O,maxParticles:I,particleHeight:e.options.particleHeight,fadeOpacity:e.options.fadeOpacity,dropRate:e.options.dropRate,dropRateBump:e.options.dropRateBump,speedFactor:e.options.speedFactor,lineWidth:e.options.lineWidth}});let h=[];h.push(Pe(()=>e.show,O=>{l.show=O})),h.push(Pe(()=>e.data,O=>{i.proxy.reload()})),h.push(Pe(()=>d.value,O=>{const I=i.cesiumObject;I&&I.applyParticleSystemOptions(O)},{deep:!0})),h.push(Pe(()=>e.viewerParameters,O=>{S(),i.cesiumObject.applyViewerParameters(a)},{deep:!0})),i.createCesiumObject=async()=>{const{viewer:O}=r;l=new Cesium.PrimitiveCollection,s=new Cesium.BoundingSphere(Cesium.Cartesian3.ZERO,.99*6378137),a={lonRange:new Cesium.Cartesian2,latRange:new Cesium.Cartesian2,pixelSize:0};const I={start:e.data.lon.array[0],delta:e.data.lon.delta,size:e.data.lon.array.length},A={start:e.data.lat.array[0],delta:e.data.lat.delta,size:e.data.lat.array.length};return c=oU(I,A),S(),new rU(O.scene.context,e.data,d.value,a)},i.mount=async()=>{const{viewer:O}=r;O.scene.primitives.add(l);const I=O.scene,A=I.camera;return p(),A.moveStart.addEventListener(v),A.moveEnd.addEventListener(y),window.addEventListener("resize",C),I.preRender.addEventListener(M),!0},i.unmount=async()=>{f();const{viewer:O}=r,I=O.scene,A=I.camera;return f(),O.scene.primitives.remove(l),A.moveStart.removeEventListener(v),A.moveEnd.removeEventListener(y),window.removeEventListener("resize",C),I.preRender.removeEventListener(M),!0};const p=()=>{const O=i.cesiumObject;l.add(O.particlesComputing.primitives.calculateSpeed),l.add(O.particlesComputing.primitives.updatePosition),l.add(O.particlesComputing.primitives.postProcessingPosition),l.add(O.particlesRendering.primitives.segments),l.add(O.particlesRendering.primitives.trails),l.add(O.particlesRendering.primitives.screen)},f=()=>{const O=i.cesiumObject;l.remove(O.particlesComputing.primitives.calculateSpeed),l.remove(O.particlesComputing.primitives.updatePosition),l.remove(O.particlesComputing.primitives.postProcessingPosition),l.remove(O.particlesRendering.primitives.segments),l.remove(O.particlesRendering.primitives.trails),l.remove(O.particlesRendering.primitives.screen)},v=()=>{l.show=!1},y=()=>{S(),i.cesiumObject.applyViewerParameters(a),l.show=!0};let w=!1;const C=()=>{w=!0,l.show=!1,l.removeAll()},M=()=>{if(w){const{viewer:O}=r,I=O.scene;i.cesiumObject.canvasResize(I.context),w=!1,p(),l.show=!0}},S=()=>{const{viewer:O}=r,I=O.scene,A=I.camera;if(Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.latRange)&&Cesium.defined(e.viewerParameters.lonRange))a.lonRange=Jt(e.viewerParameters.lonRange),a.latRange=Jt(e.viewerParameters.latRange);else{const $=A.computeViewRectangle(I.globe.ellipsoid),D=QG($);a.lonRange.x=D.lon.min,a.lonRange.y=D.lon.max,a.latRange.x=D.lat.min,a.latRange.y=D.lat.max}const V=Cesium.defined(e.viewerParameters)&&Cesium.defined(e.viewerParameters.pixelSize)?e.viewerParameters.pixelSize:A.getPixelSize(s,I.drawingBufferWidth,I.drawingBufferHeight);V>0&&(a.pixelSize=V)},_=(O,I)=>{const A=c.closest(O,I);if(Cesium.defined(A))return[e.data.U.array[A],e.data.V.array[A]]};return Vt(()=>{h.forEach(O=>O()),h=[]}),Object.assign(i.proxy,{getNearestUV:_}),()=>{var O;return me(ye(((O=i.proxy)==null?void 0:O.$options.name)||"v-if"))}}});const h0={...it,name:{type:String,default:"__vc__overlay__dynamic__"},startTime:{type:[Object,String,Date]},stopTime:{type:[Object,String,Date]},currentTime:{type:[Object,String,Date]},clockRange:{type:Number,default:0},clockStep:{type:Number,default:1},shouldAnimate:{type:Boolean,default:!0},canAnimate:{type:Boolean,default:!0},multiplier:{type:Number,default:1},dynamicOverlays:{type:Array,default:()=>[]},defaultInterval:{type:Number,default:3},stopArrivedFlag:{type:String,default:"time"},positionPrecision:{type:Number,default:1e-7},timePrecision:{type:Number,default:.01}},aU={...je,"update:currentTime":e=>!0,"update:shouldAnimate":e=>!0,"update:canAnimate":e=>!0,"update:clockRange":e=>!0,"update:clockStep":e=>!0,"update:multiplier":e=>!0,"update:startTime":e=>!0,"update:stopTime":e=>!0,onStop:e=>!0,stopArrived:e=>!0};var QP=de({name:"VcOverlayDynamic",props:h0,emits:aU,setup(e,t){const i=fe();i.cesiumClass="VcOverlayDynamic",i.cesiumEvents=[];const n=ht(e,t,i);if(n===void 0)return;const{$services:r}=n,a=he([]),s=he({}),{emit:l}=t,c=he(null),d=he(null);let h,p=[];p.push(Pe(()=>e.show,_=>{const O=i.cesiumObject;O&&(O.show=_)})),p.push(Pe(()=>e.name,_=>{const O=i.cesiumObject;O&&(O.name=_)})),p.push(Pe(()=>e.startTime,_=>{const{viewer:O}=r;Cesium.defined(O)&&_&&(O.clock.startTime=ar(_))})),p.push(Pe(()=>e.stopTime,_=>{const{viewer:O}=r;Cesium.defined(O)&&_&&(O.clock.stopTime=ar(_))})),p.push(Pe(()=>e.currentTime,_=>{const{viewer:O}=r;Cesium.defined(O)&&_&&(O.clock.currentTime=ar(_))})),p.push(Pe(()=>e.multiplier,_=>{const{viewer:O}=r;Cesium.defined(O)&&(O.clock.multiplier=_)})),p.push(Pe(()=>e.clockStep,_=>{const{viewer:O}=r;Cesium.defined(O)&&(O.clock.clockStep=_)})),p.push(Pe(()=>e.clockRange,_=>{const{viewer:O}=r;Cesium.defined(O)&&(O.clock.clockRange=_)})),p.push(Pe(()=>e.canAnimate,_=>{const{viewer:O}=r;Cesium.defined(O)&&(O.clock.canAnimate=_)})),p.push(Pe(()=>e.shouldAnimate,_=>{const{viewer:O}=r;Cesium.defined(O)&&(O.clock.shouldAnimate=_)})),p.push(Pe(()=>yt(e.dynamicOverlays),(_,O)=>{if(!i.mounted)return;const I=i.cesiumObject;if(_.length===O.length){const A=[];for(let V=0;V<_.length;V++){const $=_[V],D=O[V],G=(q,H)=>{if(q!=="nodeTransformations"&&q!=="_definitionChanged")return H};JSON.stringify($,G)!==JSON.stringify(D,G)&&A.push({newOptions:$,oldOptions:D})}A.forEach(V=>{const $=I.entities.getById(V.oldOptions.id);if(Cesium.defined($)){if(V.oldOptions.id===V.newOptions.id)$&&Object.keys(V.newOptions).forEach(G=>{V.oldOptions[G]!==V.newOptions[G]&&($[G]=n.transformProp(G,V.newOptions[G]))});else if($){I.entities.remove($),g2(a.value,q=>q.id===$.id);const G=V.newOptions;v(I,[G])}const D=v2(a.value,G=>G.id===$.id);if(Cesium.defined(D)){const G=V.oldOptions.sampledPositions,q=V.newOptions.sampledPositions,H=Zt(q,G,"id");Zt(G,q,"id").forEach(g=>{g.time&&D._sampledPosition.removeSample(g.time)}),H.forEach(g=>{g.time?D.addPosition(g.position,g.time):g.interval&&D.addPosition(g.position,g.interval||e.defaultInterval)})}}})}else{const A=Zt(_,O,"id"),V=Zt(O,_,"id"),$=[];for(let D=0;D<V.length;D++){const G=I.entities.getById(V[D].id);$.push(G)}$.forEach(D=>{I.entities.remove(D),g2(a.value,G=>G.id===D.id)}),v(I,A)}},{deep:!0})),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name);const f=_=>{let O=Ze(i,"update:currentTime");!ar(e.currentTime).equalsEpsilon(_.currentTime,.001)&&O&&l("update:currentTime",_.currentTime),O=Ze(i,"update:shouldAnimate"),e.shouldAnimate!==_.shouldAnimate&&O&&l("update:shouldAnimate",_.shouldAnimate),O=Ze(i,"update:canAnimate"),e.canAnimate!==_.canAnimate&&O&&l("update:canAnimate",_.canAnimate),O=Ze(i,"update:clockRange"),e.clockRange!==_.clockRange&&O&&l("update:clockRange",_.clockRange),O=Ze(i,"update:clockStep"),e.clockStep!==_.clockStep&&O&&l("update:clockStep",_.clockStep),O=Ze(i,"update:multiplier"),e.multiplier!==_.multiplier&&O&&l("update:multiplier",_.multiplier),O=Ze(i,"update:startTime"),!ar(e.startTime).equalsEpsilon(_.startTime,.001)&&O&&l("update:startTime",_.startTime),O=Ze(i,"update:stopTime"),!ar(e.stopTime).equalsEpsilon(_.stopTime,.001)&&O&&l("update:stopTime",_.stopTime),y(_);const{JulianDate:I,Cartesian3:A}=Cesium;if(O=Ze(i,"stopArrived"),O&&e.shouldAnimate)for(let V=0;V<a.value.length;V++){const $=a.value[V],D=$._sampledPosition.getValue(_.currentTime),G=e.dynamicOverlays[V];for(let q=0;q<G.sampledPositions.length;q++){const H=G.sampledPositions[q],g=Ot(H.position),b=ar(H.time),E=A.equalsEpsilon(D,g,e.positionPrecision),L=I.equalsEpsilon(_.currentTime,b,e.timePrecision);let P=!1;switch(e.stopArrivedFlag){case"time":P=L;break;case"position":P=E;break;case"both":P=L&&E;break;case"or":P=L||E;break}if(P){l("stopArrived",{overlay:$,position:H,offset:h,clock:_,indexOverlay:V,indexPosition:q});break}}}},v=(_,O)=>{for(let I=0;I<O.length;I++){const A=O[I],V=n.transformProps(A),$=new Pc(V);a.value.push($);const D=_.entities.add($._entity);V.sampledPositions.forEach(G=>{G.time?$.addPosition(G.position,G.time):G.interval&&(G.time=$.addPosition(G.position,G.interval||e.defaultInterval))}),A.id!==D.id&&(A.id=D.id),or(D,V,["id"])}};i.mount=async()=>{const{viewer:_}=r,O=i.cesiumObject;return O.show=e.show,v(O,e.dynamicOverlays),_.dataSources.add(O).then(()=>{s.value.startTime=_.clock.startTime,s.value.stopTime=_.clock.stopTime,s.value.currentTime=_.clock.currentTime,s.value.multiplier=_.clock.multiplier,s.value.clockStep=_.clock.clockStep,s.value.clockRange=_.clock.clockRange,s.value.canAnimate=_.clock.canAnimate,s.value.shouldAnimate=_.clock.shouldAnimate,e.startTime&&(_.clock.startTime=ar(e.startTime)),e.stopTime&&(_.clock.stopTime=ar(e.stopTime)),e.currentTime&&(_.clock.currentTime=ar(e.currentTime)),_.clock.multiplier=e.multiplier,_.clock.clockStep=e.clockStep,_.clock.clockRange=e.clockRange,_.clock.canAnimate=!1,_.clock.shouldAnimate=e.shouldAnimate,_.clock.onTick.addEventListener(f);const I=Ze(i,"onStop");return I&&_.clock.onStop.addEventListener(I),!0})},i.unmount=async()=>{const{viewer:_}=r,O=i.cesiumObject;_.dataSources.remove(O,!0),_.clock.startTime=s.value.startTime,_.clock.stopTime=s.value.stopTime,_.clock.multiplier=s.value.multiplier,_.clock.clockStep=s.value.clockStep,_.clock.clockRange=s.value.clockRange,_.clock.canAnimate=s.value.canAnimate,_.clock.shouldAnimate=s.value.shouldAnimate,a.value.length=0,_.clock.onTick.removeEventListener(f);const I=Ze(i,"onStop");return I&&_.clock.onStop.removeEventListener(I),c.value&&(_.trackedEntity=void 0),!0};const y=_=>{var O,I,A,V,$,D,G,q;if(d.value&&c.value){const{viewer:H}=r;if(Cesium.JulianDate.greaterThan(_.currentTime,_.stopTime)){c.value=null;return}const g=c.value._sampledPosition.getValue(_.currentTime);let b=new Cesium.HeadingPitchRange;switch(d.value.mode){case"TP":b.heading=0,b.pitch=((I=(O=d.value)==null?void 0:O.offset)==null?void 0:I.pitch)||Cesium.Math.toRadians(-90),b.range=((V=(A=d.value)==null?void 0:A.offset)==null?void 0:V.range)||1e3;break;case"FP":{const E=Cesium.JulianDate.addSeconds(_.currentTime,.016666666666666666,new Cesium.JulianDate),L=c.value._sampledPosition.getValue(E)||g;g.equals(L)&&h?b=h:(b.heading=Cesium.Math.toRadians(B2(g,L)),b.pitch=(((D=($=d.value)==null?void 0:$.offset)==null?void 0:D.pitch)||Cesium.Math.toRadians(-45))+R2(g,L),b.range=((q=(G=d.value)==null?void 0:G.offset)==null?void 0:q.range)||500);break}case"CUSTOM":b=Bp(d.value.offset)}h=b,H.camera.lookAt(g,b)}},w=(_,O)=>{var I;const{viewer:A}=r;if(O=O||{mode:d.value===null?"FP":"FREE"},O.mode==="FREE"){A.camera.lookAtTransform(Cesium.Matrix4.IDENTITY),c.value&&(A.trackedEntity=void 0,c.value=null,d.value=null);return}c.value=C(_),A.trackedEntity=Hr(c.value._entity),O.mode==="TRACKED"?((I=O==null?void 0:O.viewFrom)!=null&&I.length&&(A.trackedEntity.viewFrom=new Cesium.Cartesian3(O.viewFrom[0],O.viewFrom[1],O.viewFrom[2])),d.value=null):d.value=O},C=_=>_ instanceof Pc?_:typeof _=="string"?v2(a.value,O=>O.id===_):typeof _=="number"?a.value[_]:a.value[0],M=(_,O)=>{const{viewer:I}=r;c.value&&(I.trackedEntity=void 0,c.value=null);let A;if(Cesium.defined(_))if(Array.isArray(_))if(_.length){const V=[];_.forEach($=>{const D=Hr(C($)._entity);V.push(D)}),A=V}else A=i.cesiumObject;else A=Hr(C(_)._entity);else A=i.cesiumObject;return O=O||{duration:3},Cesium.defined(O.offset)&&(O.offset=Bp(O.offset)),I.flyTo(A,O)},S=(_,O)=>{const{viewer:I}=r;c.value&&(I.trackedEntity=void 0,c.value=null);let A;if(Cesium.defined(_))if(Array.isArray(_))if(_.length){const V=[];_.forEach($=>{const D=Hr(C($)._entity);V.push(D)}),A=V}else A=i.cesiumObject;else A=Hr(C(_)._entity);else A=i.cesiumObject;return I.zoomTo(A,Cesium.defined(O)?Bp(O):void 0)};return Vt(()=>{p.forEach(_=>_()),p=[]}),Object.assign(i.proxy,{getOverlays:()=>a.value,getOverlay:C,trackOverlay:w,zoomToOverlay:S,flyToOverlay:M}),()=>{var _;return me(ye(((_=i.proxy)==null?void 0:_.$options.name)||""))}}});const p0={...el,...vc,...it,...At,...Wn,...hr,billboards:{type:Array,default:()=>[]}};var JP=de({name:"VcCollectionBillboard",props:p0,emits:Mn,setup(e,t){const i=fe();i.cesiumClass="BillboardCollection";const n=bo(e,t,i);let r=[];r.push(Pe(()=>yt(e.billboards),(s,l)=>{if(!i.mounted)return;const c=i.cesiumObject;if(s.length===l.length){const d=[];for(let h=0;h<s.length;h++){const p=s[h],f=l[h];JSON.stringify(p)!==JSON.stringify(f)&&d.push({newOptions:p,oldOptions:f})}d.forEach(h=>{const p=c._billboards.find(f=>(f==null?void 0:f.id)===h.oldOptions.id);p&&Object.keys(h.newOptions).forEach(f=>{h.oldOptions[f]!==h.newOptions[f]&&(p[f]=n==null?void 0:n.transformProp(f,h.newOptions[f]))})})}else{const d=Zt(s,l,"id"),h=Zt(l,s,"id"),p=[];for(let f=0;f<h.length;f++){const v=c._billboards.find(y=>y.id===h[f].id);v&&p.push(v)}p.forEach(f=>{c.remove(f)}),a(c,d)}},{deep:!0})),i.alreadyListening.push("billboards");const a=(s,l)=>{for(let c=0;c<l.length;c++){const d=l[c];d.id=Cesium.defined(d.id)?d.id:Cesium.createGuid();const h=n==null?void 0:n.transformProps(d),p=s.add(h);or(p,h)}};return i.createCesiumObject=async()=>{const s=n==null?void 0:n.transformProps(e),l=new Cesium.BillboardCollection(s);return a(l,e.billboards),l},Vt(()=>{r.forEach(s=>s()),r=[]}),()=>{var s,l;return t.slots.default?R("i",{class:ye(((s=i.proxy)==null?void 0:s.$options.name)||""),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(((l=i.proxy)==null?void 0:l.$options.name)||""))}}});const m0={...$p,...Qr,...Jo,...ni,...Vs,...Bi,...Zi,...zs,...vo,...Wu,...Ia,...Gs,...Qo,...Jr,...Xo,...Yo,...it,...qu,...Ko,...Us,...sr,...At};var XP=de({name:"VcBillboard",props:m0,emits:Mn,setup(e,t){const i=fe();return i.cesiumClass="Billboard",yo(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const f0={brightness:{type:Number,default:1},...Qr,maximumSize:{type:Object,watcherOptions:{cesiumObjectBuilder:Ot}},...Qo,scale:{type:Object,watcherOptions:{cesiumObjectBuilder:Jt}},...it,slice:{type:Number,default:-1}};var yd=de({name:"VcCumulusCloud",props:f0,emits:Mn,setup(e,t){const i=fe();return i.cesiumClass="CumulusCloud",yo(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const v0={...it,noiseDetail:{type:Number,default:16},noiseOffset:{type:Object},debugBillboards:{type:Boolean,default:!1},debugEllipsoids:{type:Boolean,default:!1},clouds:{type:Array,default:()=>[]}};var YP=de({name:"VcCollectionCloud",props:v0,emits:je,setup(e,t){var i;const n=fe();n.cesiumClass="CloudCollection";const r=bo(e,t,n);if(r===void 0)return;n.alreadyListening.push("clouds");let a=[];a.push(Pe(()=>yt(e.clouds),(c,d)=>{if(!n.mounted)return;const h=n.cesiumObject;if(c.length===d.length){const p=[];for(let f=0;f<c.length;f++){const v=c[f],y=d[f];JSON.stringify(v)!==JSON.stringify(y)&&p.push({newOptions:v,oldOptions:y})}p.forEach(f=>{const v=h._clouds.find(y=>y.id===f.oldOptions.id);v&&Object.keys(f.newOptions).forEach(y=>{f.oldOptions[y]!==f.newOptions[y]&&(v[y]=r.transformProp(y,f.newOptions[y]))})})}else{const p=Zt(c,d,"id"),f=Zt(d,c,"id"),v=[];for(let y=0;y<f.length;y++){const w=h._clouds.find(C=>C.id===f[y].id);w&&v.push(w)}v.forEach(y=>{h.remove(y)}),s(h,p)}},{deep:!0}));const s=(c,d)=>{for(let h=0;h<d.length;h++){const p=d[h];p.id=Cesium.defined(p.id)?p.id:Cesium.createGuid();const f=r.transformProps(p,yd.props),v=c.add(f);or(v,f)}};n.createCesiumObject=async()=>{const c=r.transformProps(e,yd.props),d=new Cesium.CloudCollection(c);return s(d,e.clouds),d},Vt(()=>{a.forEach(c=>c()),a=[]});const l=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?R("i",{class:ye(l),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(l))}});const g0={...Wn,...hr,...el,...vc,...it,...At,labels:{type:Array,default:()=>[]}};var KP=de({name:"VcCollectionLabel",props:g0,emits:Mn,setup(e,t){var i;const n=fe();n.cesiumClass="LabelCollection";const r=bo(e,t,n);if(r===void 0)return;n.alreadyListening.push("labels");let a=[];a.push(Pe(()=>yt(e.labels),(c,d)=>{if(!n.mounted)return;const h=n.cesiumObject;if(c.length===d.length){const p=[];for(let f=0;f<c.length;f++){const v=c[f],y=d[f];JSON.stringify(v)!==JSON.stringify(y)&&p.push({newOptions:v,oldOptions:y})}p.forEach(f=>{const v=h._labels.find(y=>y.id===f.oldOptions.id);v&&Object.keys(f.newOptions).forEach(y=>{f.oldOptions[y]!==f.newOptions[y]&&(v[y]=r.transformProp(y,f.newOptions[y]))})})}else{const p=Zt(c,d,"id"),f=Zt(d,c,"id"),v=[];for(let y=0;y<f.length;y++){const w=h._labels.find(C=>C.id===f[y].id);w&&v.push(w)}v.forEach(y=>{h.remove(y)}),s(h,p)}},{deep:!0}));const s=(c,d)=>{for(let h=0;h<d.length;h++){const p=d[h];p.id=Cesium.defined(p.id)?p.id:Cesium.createGuid();const f=r.transformProps(p),v=c.add(f);or(v,f)}};n.createCesiumObject=async()=>{const c=r.transformProps(e),d=new Cesium.LabelCollection(c);return s(d,e.labels),d},Vt(()=>{a.forEach(c=>c()),a=[]});const l=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?R("i",{class:ye(l),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(l))}});const y0={...zp,...Gp,...Jo,...ni,...Vs,...Up,...Np,...Zi,...zs,...vo,...zi,...Qi,...Ia,...Gs,...Qo,...Xo,...Yo,...it,...Vp,...kp,...jp,totalScale:{type:Number,default:1},...Ko,...Us,...At};var eO=de({name:"VcLabel",props:y0,emits:Mn,setup(e,t){const i=fe();return i.cesiumClass="Label",yo(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const b0={...Wn,...hr,...vc,...it,...At,points:{type:Array,default:()=>[]}};var tO=de({name:"VcCollectionPoint",props:b0,emits:Mn,setup(e,t){const i=fe();i.cesiumClass="PointPrimitiveCollection";const n=bo(e,t,i);if(n===void 0)return;i.alreadyListening.push("points");let r=[];r.push(Pe(()=>yt(e.points),(s,l)=>{if(!i.mounted)return;const c=i.cesiumObject;if(s.length===l.length){const d=[];for(let h=0;h<s.length;h++){const p=s[h],f=l[h];JSON.stringify(p)!==JSON.stringify(f)&&d.push({newOptions:p,oldOptions:f})}d.forEach(h=>{const p=c._pointPrimitives.find(f=>f&&f.id===h.oldOptions.id);p&&Object.keys(h.newOptions).forEach(f=>{h.oldOptions[f]!==h.newOptions[f]&&(p[f]=n.transformProp(f,h.newOptions[f]))})})}else{const d=Zt(s,l,"id"),h=Zt(l,s,"id"),p=[];for(let f=0;f<h.length;f++){const v=c._pointPrimitives.find(y=>y.id===h[f].id);v&&p.push(v)}p.forEach(f=>{c.remove(f)}),a(c,d)}},{deep:!0}));const a=(s,l)=>{for(let c=0;c<l.length;c++){const d=l[c];d.id=Cesium.defined(d.id)?d.id:Cesium.createGuid();const h=n.transformProps(d),p=s.add(h);or(p,h)}};return i.createCesiumObject=async()=>{const s=n.transformProps(e),l=new Cesium.PointPrimitiveCollection(s);return a(l,e.points),l},Vt(()=>{r.forEach(s=>s()),r=[]}),()=>{var s,l;return t.slots.default?R("i",{class:ye(((s=i.proxy)==null?void 0:s.$options.name)||""),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(((l=i.proxy)==null?void 0:l.$options.name)||""))}}});const C0={...Qr,...Jo,...ni,...vo,...zi,...Qi,...tm,...Qo,...Yo,...it,...Ko,...At};var iO=de({name:"VcPoint",props:C0,emits:Mn,setup(e,t){const i=fe();return i.cesiumClass="PointPrimitive",yo(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const sU={...Wn,...hr,...it,...At,polylines:{type:Array,default:()=>[]}};var nO=de({name:"VcCollectionPolyline",props:sU,emits:Mn,setup(e,t){var i;const n=fe();n.cesiumClass="PolylineCollection";const r=bo(e,t,n);if(r===void 0)return;n.alreadyListening.push("polylines");let a=[];a.push(Pe(()=>yt(e.polylines),(c,d)=>{if(!n.mounted)return;const h=n.cesiumObject;if(c.length===d.length){const p=[];for(let f=0;f<c.length;f++){const v=c[f],y=d[f];JSON.stringify(v)!==JSON.stringify(y)&&p.push({newOptions:v,oldOptions:y})}p.forEach(f=>{const v=h._polylines.find(y=>y.id===f.oldOptions.id);v&&Object.keys(f.newOptions).forEach(y=>{f.oldOptions[y]!==f.newOptions[y]&&(v[y]=r.transformProp(y,f.newOptions[y]))})})}else{const p=Zt(c,d,"id"),f=Zt(d,c,"id"),v=[];for(let y=0;y<f.length;y++){const w=h._polylines.find(C=>C.id===f[y].id);w&&v.push(w)}v.forEach(y=>{h.remove(y)}),s(h,p)}},{deep:!0}));const s=(c,d)=>{for(let h=0;h<d.length;h++){const p=d[h];p.id=Cesium.defined(p.id)?p.id:Cesium.createGuid();const f=r.transformProps(p),v=c.add(f);or(v,f)}};n.createCesiumObject=async()=>{const c=r.transformProps(e),d=new Cesium.PolylineCollection(c);return s(d,e.polylines),d},Vt(()=>{a.forEach(c=>c()),a=[]});const l=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?R("i",{class:ye(l),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(l))}});const _0={...ni,...vo,...fm,...sn,...ln,...it,...sr,...At};var rO=de({name:"VcPolyline",props:_0,emits:Mn,setup(e,t){const i=fe();return i.cesiumClass="Polyline",yo(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const w0={...it,destroyPrimitives:{type:Boolean,default:!0},...At,polygons:{type:Array,default:()=>[]}};var oO=de({name:"VcCollectionPrimitive",props:w0,emits:Mn,setup(e,t){var i;const n=fe();n.cesiumClass="PrimitiveCollection";const r=bo(e,t,n);if(r===void 0)return;n.alreadyListening.push("polygons");let a=[];a.push(Pe(()=>yt(e.polygons),(c,d)=>{if(!n.mounted)return;const h=n.cesiumObject;if(c.length===d.length){const p=[];for(let f=0;f<c.length;f++){const v=c[f],y=d[f];JSON.stringify(v)!==JSON.stringify(y)&&p.push({newOptions:v,oldOptions:y})}p.forEach(f=>{const v=h._primitives.find(y=>y._id===f.oldOptions.id);v&&Object.keys(f.newOptions).forEach(y=>{f.oldOptions[y]!==f.newOptions[y]&&(v[y]=r.transformProp(y,f.newOptions[y]))})})}else{const p=Zt(c,d,"id"),f=Zt(d,c,"id"),v=[];for(let y=0;y<f.length;y++){const w=h._primitives.find(C=>C.id===f[y].id);w&&v.push(w)}v.forEach(y=>{h.remove(y)}),s(h,p)}},{deep:!0}));const s=(c,d)=>{for(let h=0;h<d.length;h++){const p=d[h];p.id=Cesium.defined(p.id)?p.id:Cesium.createGuid();const f=r.transformProps(p),v=new Ec(f);v._vcParent=c,or(v,f),c.add(v)}};n.createCesiumObject=async()=>{const c=r.transformProps(e),d=new Cesium.PrimitiveCollection(c);return s(d,e.polygons),d},Vt(()=>{a.forEach(c=>c()),a=[]});const l=((i=n.proxy)==null?void 0:i.$options.name)||"";return()=>t.slots.default?R("i",{class:ye(l),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(l))}});const x0={...ln,...ra,...Ra,...mm,...it,...vo,...Xr,...cr,...qs,...pt,...ia,...na,...At};var aO=de({name:"VcPolygon",props:x0,emits:Mn,setup(e,t){const i=fe();i.cesiumClass="PolygonPrimitive";const n=yo(e,t,i);if(n===void 0)return;let r=[];return r.push(Pe(()=>e.clampToGround,a=>{const s=i.cesiumObject;s&&(s.clampToGround=a)})),r.push(Pe(()=>e.positions,a=>{const s=i.cesiumObject;s&&(s.positions=Un(a))})),r.push(Pe(()=>e.polygonHierarchy,a=>{const s=i.cesiumObject;s&&(s.polygonHierarchy=Tp(a))})),r.push(Pe(()=>e.appearance,a=>{const s=i.cesiumObject;s&&(s.appearance=Hu.call(i,a))})),r.push(Pe(()=>e.depthFailAppearance,a=>{const s=i.cesiumObject;s&&(s.depthFailAppearance=Hu.call(i,a))})),r.push(Pe(()=>e.show,a=>{const s=i.cesiumObject;s&&(s.show=a)})),r.push(Pe(()=>e.classificationType,a=>{const s=i.cesiumObject;s&&(s.classificationType=a)})),i.createCesiumObject=async()=>{const a=n.transformProps(e);return new Ec(a)},i.mount=async()=>{const a=n.$services.primitives,s=i.cesiumObject;return s._vcParent=a,a&&a.add(s)},i.unmount=async()=>{const a=n.$services.primitives,s=i.cesiumObject;return a&&!a.isDestroyed()&&a.remove(s)},Vt(()=>{r.forEach(a=>a()),r=[]}),()=>{var a;return me(ye(((a=i.proxy)==null?void 0:a.$options.name)||""))}}});const lU=[JP,YP,KP,tO,nO,oO,yd,XP,eO,iO,rO,aO];lU.forEach(e=>{e.install=t=>{t.component(e.name,e)}});const bd=JP,E0=YP,ca=KP,da=tO,P0=nO,Oo=oO,O0=XP,M0=yd,S0=eO,T0=iO,I0=rO,Mo=aO,A0={geometry:Object,...Wn,...vo,attributes:Object},uU={...je,"update:geometry":e=>!0};var Cd=de({name:"VcGeometryInstance",props:A0,emits:uU,setup(e,t){const i=fe();i.renderByParent=!0,i.cesiumClass="GeometryInstance",i.cesiumEvents=[];const n=ht(e,t,i);if(n===void 0)return;const{emit:r}=t,a=he(0);i.createCesiumObject=async()=>{const l=n.transformProps(e);return l.geometry||(l.geometry=new Cesium.Geometry({attributes:new Cesium.GeometryAttributes})),new Cesium.GeometryInstance(l)},i.mount=async()=>{var l;const c=bi(i).proxy;c.__childCount!==void 0&&(a.value=c.__childCount.value||0,c.__childCount.value+=1);const d=i.cesiumObject;return(l=c.__updateGeometryInstances)==null||l.call(c,d,a.value),!0},i.unmount=async()=>{var l;const c=i.cesiumObject,d=bi(i).proxy;return(l=d.__removeGeometryInstances)==null||l.call(d,c),!0};const s=l=>{if(Ze(i,"update:geometry"))r("update:geometry",l);else{const c=i.cesiumObject;c.geometry=l}return!0};return Gr(Wr,(()=>qo(n.getServices(),{get geometryInstance(){return i.cesiumObject}}))()),Object.assign(i.proxy,{__updateGeometry:s}),()=>{var l,c;return t.slots.default?R("i",{class:ye(((l=i.proxy)==null?void 0:l.$options.name)||""),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(((c=i.proxy)==null?void 0:c.$options.name)||"v-if"))}}});Cd.install=e=>{e.component(Cd.name,Cd)};const sO=Cd;var cU=sO;const to=sO,D0={...Zu,...Fi};var lO=de({name:"VcGeometryBox",props:D0,emits:je,setup(e,t){const i=fe();i.cesiumClass="BoxGeometry";const n=xt(e,t,i);return i.createCesiumObject=async()=>{const r=n==null?void 0:n.transformProps(e);return Cesium.BoxGeometry.fromDimensions(r)},()=>{var r;return me(ye(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const L0={...Zu};var uO=de({name:"VcGeometryBoxOutline",props:L0,emits:je,setup(e,t){const i=fe();i.cesiumClass="BoxOutlineGeometry";const n=xt(e,t,i);return i.createCesiumObject=async()=>{const r=n==null?void 0:n.transformProps(e);return Cesium.BoxOutlineGeometry.fromDimensions(r)},()=>{var r;return me(ye(((r=i.proxy)==null?void 0:r.$options.name)||"v-if"))}}});const B0={...tl,...il,...pt,...Bi,...Ut,...Fi,...Ji,...wr};var cO=de({name:"VcGeometryCircle",props:B0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="CircleGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const R0={...tl,...il,...pt,...Bi,...Ut,...Ji,...Da};var dO=de({name:"VcGeometryCircleOutline",props:R0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="CircleOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const F0={...ra,...pt,...Fi,...wr};var hO=de({name:"VcGeometryPolygonCoplanar",props:F0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="CoplanarPolygonGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const $0={...ra};var pO=de({name:"VcGeometryPolygonCoplanarOutline",props:$0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="CoplanarPolygonOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const j0={...ln,...sr,...pt,...Ut,...Bi,...Ji,...Fi,...ea};var mO=de({name:"VcGeometryCorridor",props:j0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="CorridorGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const N0={...ln,...sr,...pt,...Ut,...Bi,...Ji,...ea};var fO=de({name:"VcGeometryCorridorOutline",props:N0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="CorridorOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const k0={...Qu,...Ju,...Xu,...Yu,...Fi};var vO=de({name:"VcGeometryCylinder",props:k0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="CylinderGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const V0={...Qu,...Ju,...Xu,...Yu,...Da};var gO=de({name:"VcGeometryCylinderOutline",props:V0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="CylinderOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const z0={...tl,...Ku,...ec,...pt,...Bi,...Ji,...Jr,...wr,...Ut,...Fi};var yO=de({name:"VcGeometryEllipse",props:z0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="EllipseGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const G0={...tl,...Ku,...ec,...pt,...Bi,...Ji,...Jr,...wr,...Ut,...Da};var bO=de({name:"VcGeometryEllipseOutline",props:G0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="EllipseOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const U0={...tc,...ic,...nc,...rc,...oc,...ac,...La,...Ba,...Fi};var CO=de({name:"VcGeometryEllipsoid",props:U0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="EllipsoidGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const dU={...tc,...ic,...nc,...rc,...oc,...ac,...La,...Ba,...sc};var _O=de({name:"VcGeometryEllipsoidOutline",props:dU,emits:je,setup(e,t){const i=fe();return i.cesiumClass="EllipsoidOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const H0={...gm,...ym,...Fp,...Fi};var wO=de({name:"VcGeometryFrustum",props:H0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="FrustumGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const W0={...gm,...ym,...Fp};var xO=de({name:"VcGeometryFrustumOutline",props:W0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="FrustumOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const q0={...ln,...sr,...Ut,...fm,...Xr};var EO=de({name:"VcGeometryGroundPolyline",props:q0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="GroundPolylineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const Z0={...Fi};var PO=de({name:"VcGeometryPlane",props:Z0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="PlaneGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}}),OO=de({name:"VcGeometryPlaneOutline",emits:je,setup(e,t){const i=fe();return i.cesiumClass="PlaneOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const Q0={...ra,...Bi,...Ji,...Fi,...wr,...pt,...Ut,...uc,...im,...nm,...Xr};var MO=de({name:"VcGeometryPolygon",props:Q0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="PolygonGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const J0={...ra,...Bi,...Ji,...Fi,...pt,...Ut,...uc,...Xr};var SO=de({name:"VcGeometryPolygonOutline",props:J0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="PolygonOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const X0={...ln,...sr,...Pm,colorsPerVertex:{type:Boolean,default:!1},...Xr,...Ut,...Fi,...pt};var TO=de({name:"VcGeometryPolyline",props:X0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="PolylineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const Y0={...Cm,...bm,...pt,...Ut,...Fi,...ea};var IO=de({name:"VcGeometryPolylineVolume",props:Y0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="PolylineVolumeGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const K0={...Cm,...bm,...pt,...Ut,...ea};var AO=de({name:"VcGeometryPolylineVolumeOutline",props:K0,emits:je,setup(e,t){const i=fe();return i.cesiumClass="PolylineVolumeOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const eg={...Oi,...Fi,...pt,...Ut,...Bi,...Jr,...wr,...Ji};var DO=de({name:"VcGeometryRectangle",props:eg,emits:je,setup(e,t){const i=fe();return i.cesiumClass="RectangleGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const tg={...Oi,...pt,...Ut,...Bi,...Jr,...Ji};var LO=de({name:"VcGeometryRectangleOutline",props:tg,emits:je,setup(e,t){const i=fe();return i.cesiumClass="RectangleOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const ig={...ln,...Pm,colorsPerVertex:{type:Boolean,default:!1},...Xr,...Ut,...pt};var BO=de({name:"VcGeometrySimplePolyline",props:ig,emits:je,setup(e,t){const i=fe();return i.cesiumClass="SimplePolylineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const ng={...il,...La,...Ba,...Fi};var RO=de({name:"VcGeometrySphere",props:ng,emits:je,setup(e,t){const i=fe();return i.cesiumClass="SphereGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const rg={...il,...La,...Ba,...sc};var FO=de({name:"VcGeometrySphereOutline",props:rg,emits:je,setup(e,t){const i=fe();return i.cesiumClass="SphereOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const og={...ln,...Ut,...dc,...cc,...pt,...Fi};var $O=de({name:"VcGeometryWall",props:og,emits:je,setup(e,t){const i=fe();return i.cesiumClass="WallGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const ag={...ln,...Ut,...dc,...cc,...pt};var jO=de({name:"VcGeometryWallOutline",props:ag,emits:je,setup(e,t){const i=fe();return i.cesiumClass="WallOutlineGeometry",xt(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const hU=[lO,uO,cO,dO,hO,pO,mO,fO,vO,gO,yO,bO,CO,_O,wO,xO,EO,PO,OO,MO,SO,TO,IO,AO,DO,LO,BO,RO,FO,$O,jO];hU.forEach(e=>{e.install=t=>{t.component(e.name,e)}});const sg=lO,lg=uO,ug=cO,cg=dO,dg=hO,hg=pO,pg=mO,mg=fO,fg=vO,vg=gO,gg=yO,yg=bO,bg=CO,Cg=_O,_g=wO,wg=xO,Tl=EO,xg=PO,Eg=OO,_d=MO,Pg=SO,io=TO,Og=IO,Mg=AO,Sg=DO,Tg=LO,Ig=BO,Ag=RO,Dg=FO,Lg=$O,Bg=jO;var mn=63710088e-1,pU={centimeters:mn*100,centimetres:mn*100,degrees:mn/111325,feet:mn*3.28084,inches:mn*39.37,kilometers:mn/1e3,kilometres:mn/1e3,meters:mn,metres:mn,miles:mn/1609.344,millimeters:mn*1e3,millimetres:mn*1e3,nauticalmiles:mn/1852,radians:1,yards:mn*1.0936};function NO(e,t,i){i===void 0&&(i={});var n={type:"Feature"};return(i.id===0||i.id)&&(n.id=i.id),i.bbox&&(n.bbox=i.bbox),n.properties=t||{},n.geometry=e,n}function mU(e,t,i){if(i===void 0&&(i={}),!e)throw new Error("coordinates is required");if(!Array.isArray(e))throw new Error("coordinates must be an Array");if(e.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!VO(e[0])||!VO(e[1]))throw new Error("coordinates must contain numbers");var n={type:"Point",coordinates:e};return NO(n,t,i)}function fU(e,t,i){i===void 0&&(i={});for(var n=0,r=e;n<r.length;n++){var a=r[n];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}var l={type:"Polygon",coordinates:e};return NO(l,t,i)}function vU(e,t){t===void 0&&(t="kilometers");var i=pU[t];if(!i)throw new Error(t+" units is invalid");return e/i}function kO(e){var t=e%(2*Math.PI);return t*180/Math.PI}function Rg(e){var t=e%360;return t*Math.PI/180}function VO(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function gU(e){if(!e)throw new Error("coord is required");if(!Array.isArray(e)){if(e.type==="Feature"&&e.geometry!==null&&e.geometry.type==="Point")return e.geometry.coordinates;if(e.type==="Point")return e.coordinates}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return e;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function yU(e,t,i,n){n===void 0&&(n={});var r=gU(e),a=Rg(r[0]),s=Rg(r[1]),l=Rg(i),c=vU(t,n.units),d=Math.asin(Math.sin(s)*Math.cos(c)+Math.cos(s)*Math.sin(c)*Math.cos(l)),h=a+Math.atan2(Math.sin(l)*Math.sin(c)*Math.cos(s),Math.cos(c)-Math.sin(s)*Math.sin(d)),p=kO(h),f=kO(d);return mU([p,f],n.properties)}function bU(e,t,i){i===void 0&&(i={});for(var n=i.steps||64,r=i.properties?i.properties:!Array.isArray(e)&&e.type==="Feature"&&e.properties?e.properties:{},a=[],s=0;s<n;s++)a.push(yU(e,t,s*-360/n,i).geometry.coordinates);return a.push(a[0]),fU([a],r)}const zO={color:"#409eff",pixelSize:8,outlineColor:"rgba(0,0,0,0.6)",outlineWidth:1,disableDepthTestDistance:Number.POSITIVE_INFINITY},GO={enableMouseEvent:!1,asynchronous:!1,allowPicking:!0},UO={width:2,show:!0},HO={pixelOffset:[20,0],showBackground:!0,backgroundColor:"rgba(0,0,0,1)",enableMouseEvent:!1},Fg={typhoonRoutes:{type:Array},clampToGround:{type:Boolean,default:!1},radius7Color:{type:String,default:"rgba(68, 255, 230, 0.3)"},radius10Color:{type:String,default:"rgba(32, 237, 39, 0.3)"},radius12Color:{type:String,default:"rgba(255, 247, 16, 0.3)"},pointProps:{type:[Object,Function],default:()=>zO},linePrimitiveProps:{type:[Object,Function],default:()=>GO},lineGeometryProps:{type:[Object,Function],default:()=>UO},labelProps:{type:[Object,Function],default:()=>HO},circleOverlayPosition:{type:[String,Function],default:"-175px"},setsArray:{type:Array,default:()=>["\u4E2D\u592E\u53F0","\u65E5\u672C","\u7F8E\u56FD","\u97E9\u56FD","\u4E2D\u56FD\u9999\u6E2F"]}},CU={...je,mouseover:e=>!0,mouseout:e=>!0,click:e=>!0,clickout:e=>!0,forecastRouteAdded:e=>!0};var WO=de({name:"VcOverlayTyphoon",props:Fg,emits:CU,setup(e,t){const i=fe();i.cesiumClass="VcOverlayTyphoon",i.cesiumEvents=[];const n=ht(e,t,i);if(n===void 0)return;const{$services:r}=n,a=ks(i),{t:s}=ri(),l=he(null),c=Ve([]);i.createCesiumObject=async()=>l;const d=(_,O)=>{O.playIndex=_;const I=O.typhoonRoute.points[_];I.type="live",I.index=_,I.tfbh=O.name;const A=[I.lng,I.lat];O.positions.push(A);const V=typeof e.pointProps=="function"?Qt(yt(zO),e.pointProps(I)):e.pointProps;O.points.push({id:I.id||Cesium.createGuid(),position:A,onMouseover(D){t.emit("mouseover",D)},onMouseout(D){t.emit("mouseout",D)},onClick(D){p(I,O,_,!0),O.playIndex=I.index,t.emit("click",D)},onClickout(D){t.emit("clickout",D)},...V,...I});const $=O.points[_];$&&O.colors.push($.color),_===O.typhoonRoute.points.length-1&&p(I,O,_)},h=_=>{const O=c.findIndex(I=>I.name===_);if(O>=0){let I=0;const A=c[O];A.points.length=0,A.positions.length=0;const V=A.typhoonRoute;d(I,A),cancelAnimationFrame(A.playInterval);const $=()=>{I++,I>=V.points.length?cancelAnimationFrame(A.playInterval):d(I,A),A.playInterval=requestAnimationFrame($)};A.playInterval=requestAnimationFrame($)}else a.warn(s("vc.typhoon.warn")||"\u64AD\u653E\u53F0\u98CE\u5931\u8D25\uFF0C\u539F\u56E0\uFF1A\u672A\u627E\u5230\u5BF9\u5E94\u7F16\u53F7\u7684\u53F0\u98CE\u6570\u636E\u3002")},p=(_,O,I,A=!1)=>{O.children.length=0;let V=A?_.forecast||[]:[];if(!A)for(let $=0;$<e.setsArray.length;$++){const D=(G,q)=>{const H=(G==null?void 0:G.forecast)||[];if(V.push(...H),A)return;V=w8(V,(E,L)=>E.sets===L.sets);const g=e.setsArray[$],b=V.findIndex(E=>E.sets===g);if(b>-1)V[b].unshifted||(V[b].points.unshift({lat:G.lat,lng:G.lng}),V[b].unshifted=!0);else if(q>0){const E=O.typhoonRoute.points[q-1];D(E,q-1)}};D(_,I)}if(!(!V||V.length<=0)){for(let $=0;$<V.length;$++){const D=V[$],G=[],q=[],H={name:O.name+"_"+D.sets,typhoonRoute:D,show:!0,positions:q,points:G,type:"forc"};O.children.push(H),D.points.forEach((g,b)=>{const E=[g.lng,g.lat];H.positions.push(E),b===0&&A&&H.positions.unshift([_.lng,_.lat]),g.sets=D.sets,g.type="forc",g.index=b;const L=typeof e.pointProps=="function"?e.pointProps(g):e.pointProps;b!==0&&H.points.push({id:g.id||Cesium.createGuid(),position:E,onMouseover(P){t.emit("mouseover",P)},onMouseout(P){t.emit("mouseout",P)},onClick(P){t.emit("click",P)},...L,...g})})}t.emit("forecastRouteAdded",{livePoint:_,datasource:O,addedByClick:A})}},f=_=>{const O=[],I=[],A={name:_.tfbh,typhoonRoute:_,show:!0,positions:I,points:O,children:[],colors:[],type:"live"};return c.push(A),h(_.tfbh),A},v=(_,O)=>{const I=[];typeof _=="string"?I.push(_):I.push(..._);let A=null;I.forEach(V=>{var $;const D=[],G=c.find(g=>g.name===V);G&&G.typhoonRoute.points&&G.typhoonRoute.points.forEach(g=>{D.push([g.lng,g.lat])}),($=G==null?void 0:G.children)!=null&&$.length&&G.children.forEach(g=>{g.typhoonRoute.points.forEach(b=>{D.push([b.lng,b.lat])})});const q=Un(D),H=Cesium.BoundingSphere.fromPoints(q);A===null?A=H:A=Cesium.BoundingSphere.union(A,H)}),r.viewer.camera.flyToBoundingSphere(new Cesium.BoundingSphere(A.center,A.radius),{...O})},y=_=>{const O=c.indexOf(_);O>=0&&(clearInterval(_.playInterval),c.splice(O,1))},w=()=>{c.forEach(_=>{clearInterval(_.playInterval)}),c.length=0},C=(_,O)=>{let I=[];if(typeof O=="number")I=bU(_,O*1e3,{units:"meters"}).geometry.coordinates;else if(O.ne){const A={0:"ne",1:"nw",2:"sw",3:"se"};for(let V=0;V<4;V++){let $=parseFloat(O[A[V]])*1e3;$||($=0);for(let D=V*15;D<=(V+1)*15;D++){const G=6*D,q=_[0]+$*Math.cos(G*Math.PI/180)/111e3,H=_[1]+$*Math.sin(G*Math.PI/180)/111e3;I.push([q,H])}}}return I},M=(_,O)=>{const I=[];return _.forEach(A=>{if(A.positions.length>1){const V=typeof e.linePrimitiveProps=="function"?Qt(yt(GO),e.linePrimitiveProps(A)):e.linePrimitiveProps,$=typeof e.lineGeometryProps=="function"?Qt(yt(UO),e.lineGeometryProps(A)):e.lineGeometryProps;I.push(R(eo,{show:A.show,appearance:{type:A.type==="live"?"PolylineColorAppearance":"PolylineMaterialAppearance",options:{material:A.type==="live"?void 0:{fabric:{type:"PolylineDash",uniforms:{color:"#000000"}}},translucent:!0}},onMouseover:D=>{t.emit("mouseover",D)},onMouseout:D=>{t.emit("mouseout",D)},onClick:D=>{t.emit("click",D)},onClickout:D=>{t.emit("clickout",D)},...V},()=>R(to,{id:A.name||Cesium.createGuid()},()=>R(io,{positions:Un(A.positions),colors:A.colors,...$}))))}if(A.points.length&&I.push(R(da,{show:A.show,points:A.points,onReady:V=>{const{cesiumObject:$}=V,D=$.update;$.update=function(G){const q=G.commandList.length;D.call(this,G);const H=G.commandList.length;for(let g=q;g<H;++g)G.commandList[g].pass=Cesium.Pass.TRANSLUCENT,G.commandList[g].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1})}}})),A.type==="live"){const V=typeof e.labelProps=="function"?Qt(yt(HO),e.labelProps(A)):e.labelProps;I.push(R(ca,{show:A.show,enableMouseEvent:!1,labels:[{text:A.typhoonRoute.name,position:A.positions[0],...V}]}));const $=A.points[A.playIndex];O.length=O.push(R(Rv,{show:A.show,position:$.position,autoHidden:!0},()=>R("div",{class:"vc-typhoon-circle",style:{backgroundPosition:typeof e.circleOverlayPosition=="function"?e.circleOverlayPosition($):e.circleOverlayPosition}}))),($==null?void 0:$.radius7)>0&&I.push(R(Mo,{show:A.show,positions:C($.position,$.radius7_quad),clampToGround:e.clampToGround,asynchronous:!1,allowPicking:!1,enableMouseEvent:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:e.radius7Color}}}}},onReady:S})),($==null?void 0:$.radius10)>0&&I.push(R(Mo,{show:A.show,positions:C($.position,$.radius10_quad),clampToGround:e.clampToGround,asynchronous:!1,allowPicking:!1,enableMouseEvent:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:e.radius10Color}}}}},onReady:S})),($==null?void 0:$.radius12)>0&&I.push(R(Mo,{show:A.show,positions:C($.position,$.radius12_quad),clampToGround:e.clampToGround,asynchronous:!1,allowPicking:!1,enableMouseEvent:!1,classificationType:2,appearance:{type:"MaterialAppearance",options:{material:{fabric:{type:"Color",uniforms:{color:e.radius12Color}}}}},onReady:S}))}A.children&&I.push(...M(A.children,O))}),I},S=_=>{const O=_.cesiumObject,I=O.update;O.update=function(A){const V=A.commandList.length;I.call(this,A);const $=A.commandList.length;for(let D=V;D<$;++D)A.commandList[D].pass===Cesium.Pass.TRANSLUCENT&&(A.commandList[D].pass=Cesium.Pass.OPAQUE,A.commandList[D].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND}))}};return Object.assign(i.proxy,{addTyphoonRoute:f,playTyphoonRoute:h,flyToTyphoonRoute:v,showForecast:p,removeTyphoonData:y,removeAllTyphoonData:w,getTyphoonDatasources:()=>c}),e.typhoonRoutes.forEach(_=>{f(_)}),()=>{const _=[],O=M(c,_);return[R(Oo,{ref:l,show:!0},()=>O),..._]}}});const _U=[Rv,zP,GP,ZP,QP,WO];_U.forEach(e=>{e.install=t=>{t.component(e.name,e)}});const no=Rv,$g=zP,jg=GP,Ng=ZP,kg=QP,Vg=WO;function zg(e,t,i,n,r){i.cesiumClass=n,i.cesiumEvents=[];const{t:a}=ri(),{emit:s}=t,l=ye(n).split("-");n==="VcMeasurementDistance"&&e.showComponentLines&&(l[2]="component-distance"),(n==="VcDrawingRegular"||n==="VcMeasurementRegular")&&(e.edge===4&&(l[2]="rectangle"),e.edge===360&&(l[2]="circle"));let c=l[2];l[3]&&(c=`${l[2]}-${l[3]}`);const d=he(""),h=ge(()=>({drawingTipStart:e.drawtip.drawingTipStart||a(`${l[0]}.${l[1]}.${l[2]}.drawingTipStart`),drawingTipEnd:e.drawtip.drawingTipEnd||a(`${l[0]}.${l[1]}.${l[2]}.drawingTipEnd`),drawingTipEditing:e.drawtip.drawingTipEditing||a(`${l[0]}.${l[1]}.${l[2]}.drawingTipEditing`)})),p=he(ze.BeforeDraw),f=he(!1),v=he([0,0,0]),y=he(!1),w=he([0,0,0]),C=he(null),M=he(null),S=he(null),_=he(""),{registerTimeout:O,removeTimeout:I}=Am();return i.createCesiumObject=async()=>S,{drawingType:c,drawTip:d,drawTipOpts:h,drawStatus:p,canShowDrawTip:f,drawTipPosition:v,showEditor:y,editorPosition:w,mouseoverPoint:C,editingPoint:M,primitiveCollectionRef:S,editorType:_,onMouseoverPoints:A=>{var V,$;const{drawingHandlerActive:D,viewer:G}=r;e.editable&&p.value!==ze.Drawing&&D&&(A.pickedFeature.primitive.pixelSize=((V=e.pointOpts)==null?void 0:V.pixelSize)*1.5,I(),O(()=>{C.value=A.pickedFeature.primitive,w.value=A.pickedFeature.primitive.position,y.value=!0,f.value=!1,v.value=[0,0,0]},($=e.editorOpts)==null?void 0:$.delay)),s("mouseEvt",{type:A.type,name:c,target:A},G)},onMouseoutPoints:A=>{var V,$;const{viewer:D,selectedDrawingActionInstance:G}=r;e.editable&&(A.pickedFeature.primitive.pixelSize=((V=e.pointOpts)==null?void 0:V.pixelSize)*1,I(),O(()=>{w.value=[0,0,0],C.value=void 0,y.value=!1},($=e.editorOpts)==null?void 0:$.hideDelay),G&&(f.value=!0)),s("mouseEvt",{type:A.type,name:c,target:A},D)},onMouseenterEditor:A=>{I()},onMouseleaveEditor:A=>{var V;I(),O(()=>{var $;w.value=[0,0,0],C.value.pixelSize=(($=e.pointOpts)==null?void 0:$.pixelSize)*1,C.value=void 0,y.value=!1},(V=e.editorOpts)==null?void 0:V.hideDelay)},onPrimitiveCollectionReady:A=>{A.cesiumObject._vcId=n},onVcCollectionPointReady:function(A){const{cesiumObject:V}=A,$=V.update;V.update=function(D){const G=D.commandList.length;$.call(this,D);const q=D.commandList.length;for(let H=G;H<q;++H)D.commandList[H].pass=Cesium.Pass.TRANSLUCENT,D.commandList[H].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1})}},onVcPrimitiveReady:A=>{if(e.disableDepthTest)return;const V=A.cesiumObject,$=V.update;V.update=function(D){const G=D.commandList.length;$.call(this,D);const q=D.commandList.length;for(let H=G;H<q;++H)D.commandList[H].pass===Cesium.Pass.TRANSLUCENT&&(D.commandList[H].pass=Cesium.Pass.OPAQUE,D.commandList[H].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND}))}},onVcCollectionLabelReady:A=>{if(e.disableDepthTest)return;const V=A.cesiumObject,$=V.update;V.update=function(D){const G=D.commandList.length;$.call(this,D);const q=D.commandList.length;for(let H=G;H<q;++H)D.commandList[H].pass=Cesium.Pass.OVERLAY,D.commandList[H].renderState=Cesium.RenderState.fromCache({depthTest:{enabled:!1},depthMask:!1,blending:Cesium.BlendingState.ALPHA_BLEND})}}}}function ro(e,t,i){const n=fe(),r=ht(e,t,n);if(r===void 0)return;const{t:a}=ri(),s=r.$services,{emit:l}=t,{drawingType:c,drawTip:d,drawTipOpts:h,drawStatus:p,canShowDrawTip:f,drawTipPosition:v,showEditor:y,editorPosition:w,mouseoverPoint:C,editingPoint:M,primitiveCollectionRef:S,editorType:_,onMouseoverPoints:O,onMouseoutPoints:I,onMouseenterEditor:A,onMouseleaveEditor:V,onPrimitiveCollectionReady:$,onVcCollectionPointReady:D,onVcCollectionLabelReady:G,onVcPrimitiveReady:q}=zg(e,t,n,i,s),H=he([]);e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach(Z=>{const z={positions:Un(Z),show:!0,drawStatus:ze.AfterDraw,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};i==="VcMeasurementVertical"&&Object.assign(z,{draggingPlane:new Cesium.Plane(Cesium.Cartesian3.UNIT_X,0),surfaceNormal:new Cesium.Cartesian3}),H.value.push(z)});let g;const b=ge(()=>{const Z=[],{Cartesian3:z,Cartographic:Q,Rectangle:re,createGuid:X,defined:J,Math:ae,Ray:ne}=Cesium,{viewer:ce}=s,le=e.angleFormatter||Gi.angleToString,pe=e.distanceFormatter||Gi.distanceToString,Ce=e.areaFormatter||Gi.areaToString;return H.value.forEach(Se=>{var Re,Me,Te,$e,Le,Ie,We,Y,_e,Be,Fe,Bt,vi,Ke,Ee,Qe,He,Xe,_t;const wt=Se.positions[0],lt=Se.positions[1];if(z.equals(wt,lt))return;const ot=Ve([]),An=((Re=e.polylineOpts)==null?void 0:Re.arcType)===0?z.distance(wt,lt):Lp(wt,lt,s.viewer.scene.globe.ellipsoid),Ao=z.midpoint(wt,lt,{}),Do=B2(wt,lt),Dd=R2(wt,lt);Se.points=Se.positions.map(Nt=>({position:Nt}));const Tt={...Se,distance:An,heading:Do,pitch:Dd},Dl=Object.assign({},e.labelOpts,Tt.labelOpts);if(i==="VcDrawingRectangle"||i==="VcMeasurementRectangle"){const Nt=Q.fromCartesian(wt,ce.scene.globe.ellipsoid),ft=Q.fromCartesian(lt,ce.scene.globe.ellipsoid),Ei=Nt.height;!e.clampToGround&&(ft.height=Ei);const Ct=re.fromCartesianArray(Se.positions,ce.scene.globe.ellipsoid),Yt=[Ct.west,Ct.north,Ei,Ct.east,Ct.north,Ei,Ct.east,Ct.south,Ei,Ct.west,Ct.south,Ei,Ct.west,Ct.north,Ei],fr=z.fromRadiansArrayHeights(Yt,ce.scene.globe.ellipsoid);Object.assign(Tt,{polygonPositions:fr,height:Ei})}else if(i==="VcDrawingRegular"||i==="VcMeasurementRegular"){const Nt=Se.positions[0],ft=Se.positions[1],Ei=t7(Nt,ft,ce.scene);if(!xn(Ei)&&J(Ei)){const Ct=[],Yt=Q.fromCartesian(Nt,ce.scene.globe.ellipsoid),fr=Q.fromCartesian(ft,ce.scene.globe.ellipsoid);!e.clampToGround&&(fr.height=Yt.height),Ct.push(Q.toCartesian(fr,ce.scene.globe.ellipsoid));for(let vr=0;vr<(e.edge||4)-1;vr++){const ls=i7(Nt,Ei.heading+=Math.PI*2/(e.edge||4),An,ce.scene.globe.ellipsoid);Ct.push(ls)}Object.assign(Tt,{polygonPositions:Ct,height:Yt.height})}}else if(i==="VcAnalysisViewshed")Object.assign(Tt.viewshedOpts,{startPosition:wt,endPosition:lt});else if(i==="VcAnalysisSightline")if(e.sightlineType==="segment"){const Nt=[];Nt.push(wt);const ft=[];S.value.cesiumObject._primitives.forEach(Yt=>{Yt instanceof Cesium.PointPrimitiveCollection&&ft.push(...Yt._pointPrimitives),Yt instanceof Cesium.Primitive&&ft.push(Yt)});const Ei=F2(wt,lt,s.viewer,ft);J(Ei)&&Nt.push(Ei),Nt.push(lt);let Ct=0;for(let Yt=0;Yt<Nt.length-1;Yt++){const fr=z.distance(Nt[Yt],Nt[Yt+1]);Ct=Ct+fr}Object.assign(Tt,{positions:Nt,distance:Ct})}else e.sightlineType;else ot.push({position:Ao,id:X(),text:pe(An,(Me=e.measureUnits)==null?void 0:Me.distanceUnits,e.locale,(Te=e.decimals)==null?void 0:Te.distance),...Dl});if(Tt.polygonPositions&&Tt.polygonPositions.length){const Nt=Object.assign({},e.labelsOpts,Tt.labelsOpts),ft=Tt.polygonPositions.slice();e.loop&&ft.length>2&&ft.push(ft[0]);for(let Ct=0;Ct<ft.length-1;Ct++){let Yt=0;if((($e=e.polylineOpts)==null?void 0:$e.arcType)===0?Yt=Lp(ft[Ct],ft[Ct+1],s.viewer.scene.globe.ellipsoid):Yt=z.distance(ft[Ct],ft[Ct+1]),Yt>0&&ft.length>2&&e.showDistanceLabel&&ot.push({text:pe(Yt,(Le=e.measureUnits)==null?void 0:Le.distanceUnits,e.locale,(Ie=e.decimals)==null?void 0:Ie.distance),position:z.midpoint(ft[Ct],ft[Ct+1],{}),id:X(),...Nt}),ft.length>2&&e.showAngleLabel&&(Ct>0||e.loop)){const fr=ft[Ct===0?ft.length-2:Ct-1],vr=ft[Ct],ls=ft[Ct+1],Ll=z.subtract(fr,vr,{}),Bl=z.subtract(ls,vr,{});let Rl=0;z.ZERO.equals(Ll)||z.ZERO.equals(Bl)||(Rl=z.angleBetween(Ll,Bl)),ot.push({text:le(Rl,(We=e.measureUnits)==null?void 0:We.angleUnits,e.locale,(Y=e.decimals)==null?void 0:Y.angle),position:vr,id:X(),...Nt})}}const Ei=L2(ft);e.showLabel&&ot.push({text:Ce(Ei,(_e=e.measureUnits)==null?void 0:_e.areaUnits,e.locale,(Be=e.decimals)==null?void 0:Be.area),position:Se.positions[0],id:X(),...Dl})}e.showComponentLines&&(Object.assign(Tt,{xyPolylinePositions:[new z,new z,new z],xyBoxPositions:[new z,new z,new z],xDistance:0,yDistance:0,xAngle:0,yAngle:0}),L(Tt),ot.push({position:Tt.xLabelPosition,id:X(),text:pe(Tt.xDistance||0,(Fe=e.measureUnits)==null?void 0:Fe.distanceUnits,e.locale,(Bt=e.decimals)==null?void 0:Bt.distance),...e.xLabelOpts}),ot.push({position:Tt.yLabelPosition,id:X(),text:pe(Tt.yDistance||0,(vi=e.measureUnits)==null?void 0:vi.distanceUnits,e.locale,(Ke=e.decimals)==null?void 0:Ke.distance),...e.yLabelOpts}),ot.push({position:Tt.xAnglePosition,id:X(),text:le(Tt.xAngle||0,(Ee=e.measureUnits)==null?void 0:Ee.angleUnits,e.locale,(Qe=e.decimals)==null?void 0:Qe.angle),...e.xAngleLabelOpts}),ot.push({position:Tt.yAnglePosition,id:X(),text:le(Tt.yAngle||0,(He=e.measureUnits)==null?void 0:He.angleUnits,e.locale,(Xe=e.decimals)==null?void 0:Xe.angle),...e.yAngleLabelOpts})),Object.assign(Tt,{labels:ot}),Tt.positionsDegreesArray=Tt.positions.map(Nt=>{const ft=Cesium.Cartographic.fromCartesian(Nt,ce.scene.globe.ellipsoid);return[ae.toDegrees(ft.longitude),ae.toDegrees(ft.latitude),ft.height]}),(_t=Tt==null?void 0:Tt.polygonPositions)!=null&&_t.length&&(Tt.polygonPositionsDegreesArray=Tt.polygonPositions.map(Nt=>{const ft=Cesium.Cartographic.fromCartesian(Nt,ce.scene.globe.ellipsoid);return[ae.toDegrees(ft.longitude),ae.toDegrees(ft.latitude),ft.height]})),Z.push(Tt)}),Z});n.createCesiumObject=async()=>S,n.mount=async()=>{const{viewer:Z}=s;return e.autoUpdateLabelPosition&&(i==="VcMeasurementDistance"&&Z.scene.preRender.addEventListener(T),(i==="VcMeasurementRegular"||i==="VcMeasurementRectangle"||i==="VcDrawingRegular"||i==="VcDrawingRectangle")&&Z.scene.preRender.addEventListener(P)),!0},n.unmount=async()=>{const{viewer:Z}=s;return e.autoUpdateLabelPosition&&(i==="VcMeasurementDistance"&&Z.scene.preRender.removeEventListener(T),(i==="VcMeasurementRegular"||i==="VcMeasurementRectangle"||i==="VcDrawingRegular"||i==="VcDrawingRectangle")&&Z.scene.preRender.removeEventListener(P)),!0};const E=(Z,z)=>{const{defined:Q,SceneMode:re,Cartesian3:X,IntersectionTests:J,Plane:ae,SceneTransforms:ne,Ray:ce}=Cesium,{viewer:le}=s,pe=le.scene,Ce=pe.camera,Se=Ce.direction,Re=pe.frameState.mapProjection.ellipsoid,Me=Z.positions,Te=Me[0];let $e=Te,Le=Me[1],Ie=Z.draggingPlane,We=Z.surfaceNormal,Y=We;if(pe.mode===re.COLUMBUS_VIEW){Y=X.UNIT_X;const Fe=Re.cartesianToCartographic(Te,{});$e=pe.mapProjection.project(Fe,{}),X.fromElements($e.z,$e.x,$e.y,$e)}let _e=X.cross(Y,Se,{});_e=X.cross(Y,_e,_e),_e=X.normalize(_e,_e),Ie=ae.fromPointNormal($e,_e,Ie);const Be=Ce.getPickRay(z,new ce);if(Le=J.rayPlane(Be,Ie,{}),Q(Le)){if(pe.mode===re.COLUMBUS_VIEW){Le=X.fromElements(Le.y,Le.z,Le.x,Le);const Bt=pe.mapProjection.unproject(Le,{});Le=Re.cartographicToCartesian(Bt,Le)}(ii(Cesium.VERSION,"1.121")?ne.worldToWindowCoordinates:ne.wgs84ToWindowCoordinates)(pe,Me[0],{}).y<z.y&&(We=X.negate(We,{}));let Fe=X.subtract(Le,Te,{});return Fe=X.projectVector(Fe,We,Fe),Le=X.add(Te,Fe,Le),Le}},L=Z=>{const{Cartesian3:z,Math:Q,defined:re}=Cesium,{viewer:X}=s,J=X.scene.frameState.mapProjection.ellipsoid,ae=Z.positions[0],ne=Z.positions[1],ce=J.cartesianToCartographic(ae,{});if(!re(ce))return;const le=J.cartesianToCartographic(ne,{}),pe=ce.height,Ce=le.height;let Se,Re,Me,Te;pe<Ce?(Se=ae,Re=ne,Te=Ce,Me=pe):(Se=ne,Re=ae,Te=pe,Me=Ce);const $e=Z.xyPolylinePositions;if($e===void 0)return;$e[0]=Se,$e[2]=Re;let Le=J.geodeticSurfaceNormal(Se,{});Le=z.multiplyByScalar(Le,Te-Me,Le);const Ie=z.add(Se,Le,$e[1]);if(!(z.equalsEpsilon(Ie,Re,Q.EPSILON10)&&z.equalsEpsilon(Ie,Se,Q.EPSILON10))){let We=z.subtract(Re,Ie,{}),Y=z.subtract(Se,Ie,{});const _e=Math.min(z.magnitude(We),z.magnitude(Y)),Be=15<_e?.15*_e:.25*_e;We=z.normalize(We,We),Y=z.normalize(Y,Y),We=z.multiplyByScalar(We,Be,We),Y=z.multiplyByScalar(Y,Be,Y);const Fe=Z.xyBoxPositions;if(Fe===void 0)return;z.add(Ie,We,Fe[0]),z.add(Fe[0],Y,Fe[1]),z.add(Ie,Y,Fe[2]),Z.xLabelPosition=z.midpoint(Ie,Re,{}),Z.yLabelPosition=z.midpoint(Se,Ie,{}),Z.xAnglePosition=Re,Z.yAnglePosition=Se;const Bt=z.subtract(Ie,Re,{}),vi=z.subtract(Ie,Se,{});let Ke=z.subtract(Re,Se,{});Z.yAngle=z.angleBetween(vi,Ke),Ke=z.negate(Ke,Ke),Z.xAngle=z.angleBetween(Bt,Ke),Z.xDistance=z.magnitude(Bt),Z.yDistance=z.magnitude(vi)}},P=()=>{b.value.forEach((Z,z)=>{var Q;const re=Z.polygonPositions;if(!(re.length<2)){const{defined:X,SceneTransforms:J,Cartesian2:ae,HorizontalOrigin:ne}=Cesium,{viewer:ce}=s,le=ce.scene;let pe=Z.positions[0];const Ce=ii(Cesium.VERSION,"1.121")?J.worldToWindowCoordinates:J.wgs84ToWindowCoordinates,Se=Ce(le,pe,{});let Re=X(Se)?ae.clone(Se,{}):ae.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),Me=Re.y;const Te=((Q=S.value)==null?void 0:Q.cesiumObject)._primitives.filter(Le=>Le instanceof Cesium.LabelCollection)[z]._labels,$e=Te[Te.length-1];if(!$e)return;for(let Le=1;Le<re.length;Le++){const Ie=Ce(le,re[Le],{});if(X(Ie)){const We=(Re.y-Ie.y)/(Ie.x-Re.x),Y=Te[Le-1];Y&&Y!==$e&&X(Y==null?void 0:Y.horizontalOrigin)&&(Y.horizontalOrigin=0<We?ne.LEFT:ne.RIGHT),Ie.y<Me&&(Me=Ie.y,pe=re[Le]),Re=ae.clone(Ie,Re)}Z.drawStatus===ze.AfterDraw&&($e.position=pe)}}})},T=()=>{b.value.forEach((Z,z)=>{var Q,re,X;const{defined:J,SceneTransforms:ae,HorizontalOrigin:ne}=Cesium,{viewer:ce}=s,le=ce.scene,pe=(Q=S.value)==null?void 0:Q.cesiumObject,Ce=Z.positions,Se=Ce[0],Re=Ce[1],Me=ii(Cesium.VERSION,"1.121")?ae.worldToWindowCoordinates:ae.wgs84ToWindowCoordinates,Te=Me(le,Se,{}),$e=Me(le,Re,{});if(J(Te)&&J($e)){const Le=pe._primitives.filter(Ie=>Ie instanceof Cesium.LabelCollection);if(Le.length){const Ie=Le[z].get(0);let We,Y,_e,Be;e.showComponentLines&&(We=Le[z].get(2),Y=Le[z].get(3),_e=Jt((re=e.yLabelOpts)==null?void 0:re.pixelOffset),Be=Jt((X=e.xAngleLabelOpts)==null?void 0:X.pixelOffset)),(Te.y-$e.y)/($e.x-Te.x)>0?(!xn(We)&&!xn(_e)&&(_e.x=-9,We.pixelOffset=_e,We.horizontalOrigin=ne.RIGHT),!xn(Y)&&!xn(Be)&&(Be.x=12,Y.pixelOffset=Be,Y.horizontalOrigin=ne.LEFT),Ie.horizontalOrigin=ne.LEFT):(!xn(We)&&!xn(_e)&&(_e.x=9,We.pixelOffset=_e,We.horizontalOrigin=ne.LEFT),!xn(Y)&&!xn(Be)&&(Be.x=-12,Y.pixelOffset=Be,Y.horizontalOrigin=ne.RIGHT),Ie.horizontalOrigin=ne.RIGHT)}}})},F=(Z,z)=>{const{defined:Q,defaultValue:re,Cartesian3:X}=Cesium,{viewer:J}=s,ae=J.scene,ne=Z.positions;ne[0]=z;const ce=ae.frameState.mapProjection.ellipsoid,le=ce.cartesianToCartographic(z,{}),pe=ae.globe;le.height=Q(pe)?re(pe.getHeight(le),0):0,ne[1]=ce.cartographicToCartesian(le,{}),Z.distance=X.distance(ne[0],ne[1]),Z.labelPosition=X.midpoint(ne[0],ne[1],{})},N=()=>{const{Cartesian3:Z,Plane:z}=Cesium,Q={positions:[new Z,new Z],show:!1,drawStatus:ze.BeforeDraw,distance:0,labels:[],pointOpts:{},labelOpts:{},labelsOpts:{},polylineOpts:{},primitiveOpts:{},polygonOpts:{}};i==="VcMeasurementVertical"&&Object.assign(Q,{draggingPlane:new z(Z.UNIT_X,0),surfaceNormal:new Z}),H.value.push(Q),p.value=ze.BeforeDraw,f.value=!0,d.value=h.value.drawingTipStart},j=(Z=!0)=>{Z&&p.value===ze.Drawing&&H.value.pop();const z=M.value?M.value._vcPolylineIndx:H.value.length-1,Q=H.value[z];Q&&(Q.drawStatus=ze.AfterDraw),p.value=ze.AfterDraw,f.value=!1,v.value=[0,0,0]},U=(Z,z)=>{var Q;const{viewer:re,drawingFabInstance:X,selectedDrawingActionInstance:J,getWorldPosition:ae}=s,ne=X==null?void 0:X.proxy;if(z.button===2&&z.ctrl){const Le=ne.getDrawingActionInstance(c);ne.toggleAction(Le),nt(()=>{l("drawEvt",{name:c,finished:!0,windowPoistion:Z,type:"cancel"},re)});return}p.value===ze.AfterDraw&&N();const ce=M.value?M.value._vcPolylineIndx:H.value.length-1,le=H.value[ce],pe=le.positions,Ce=M.value?M.value._index:le.positions.length-1;if(z.button===2&&M.value){ne.editingActionName=void 0,le.positions[M.value._index]=g,p.value=ze.AfterDraw,le.drawStatus=ze.AfterDraw,M.value=void 0,d.value=h.value.drawingTipStart,f.value=Cesium.defined(J),i==="VcMeasurementHeight"&&F(le,g),nt(()=>{l("drawEvt",Object.assign({name:c,index:ce,pointIndex:Ce,renderDatas:H,finished:!0,windowPoistion:Z,type:"cancel"},b.value[ce]),re)});return}if(z.button!==0)return;const{defined:Se}=Cesium;let Re="new",Me,Te=!1;const $e=re.scene;if(p.value===ze.BeforeDraw){const Le=ae($e,Z,{});if(!Se(Le))return;if(pe[0]=Le,pe[1]=Le,le.show=!0,p.value=ze.Drawing,le.drawStatus=ze.Drawing,d.value=h.value.drawingTipEnd,Me=Le,Te=!1,i==="VcMeasurementVertical"){const Ie=$e.frameState.mapProjection.ellipsoid;le.surfaceNormal=Ie.geodeticSurfaceNormal(Le,le.surfaceNormal)}i==="VcMeasurementHeight"&&(F(le,Le),Te=!0,le.drawStatus=ze.AfterDraw,p.value=ze.AfterDraw,d.value=h.value.drawingTipStart,e.mode===1&&ne.toggleAction(J)),i==="VcAnalysisViewshed"&&(le.viewshedOpts={...e.viewshedOpts})}else{if(le.drawStatus=ze.AfterDraw,p.value=ze.AfterDraw,M.value){if(Xt().hasTouch===!0){const Le=ae($e,Z,{});Se(Le)&&(le.positions.splice(M.value._index,1,Le),M.value.pixelSize=((Q=e.pointOpts)==null?void 0:Q.pixelSize)*1)}M.value=void 0,ne.editingActionName=void 0,f.value=!1,v.value=[0,0,0],Re=_.value,J&&(d.value=h.value.drawingTipStart,f.value=!0)}else{if(i!=="VcMeasurementVertical"&&Xt().hasTouch===!0){const Le=ae($e,Z,{});if(Se(Le)){const Ie=le.positions;Ie[1]=Le}}e.mode===1&&ne.toggleAction(J)}Te=!0,Me=le.positions[1]}nt(()=>{l("drawEvt",Object.assign({index:ce,pointIndex:Ce,renderDatas:H,name:c,finished:Te,position:Me,windowPoistion:Z,type:Re},b.value[ce]),re)})},te=Z=>{const{viewer:z,getWorldPosition:Q}=s,re=z.scene,X=Q(re,Z,{}),{defined:J,Cartographic:ae}=Cesium;if(!J(X)||(v.value=X,p.value!==ze.Drawing)||i==="VcMeasurementVertical"&&re.mode===Cesium.SceneMode.SCENE2D)return;const ne=M.value?M.value._vcPolylineIndx:H.value.length-1,ce=H.value[ne],le=M.value?M.value._index:ce.positions.length-1;if(i==="VcMeasurementVertical"){const pe=E(ce,Z);if(!xn(pe)){const Ce=ce.positions.slice();Ce[M.value?M.value._index:1]=pe,ce.positions=Ce}}else if(i==="VcMeasurementHeight")F(ce,X);else if(i==="VcDrawingRectangle"||i==="VcDrawingRegular"||i==="VcMeasurementRegular"||i==="VcMeasurementRectangle"){const pe=ce.positions,Ce=pe[0],Se=ae.fromCartesian(Ce,z.scene.globe.ellipsoid),Re=ae.fromCartesian(X,z.scene.globe.ellipsoid);!e.clampToGround&&(Re.height=Se.height),pe[M.value?M.value._index:1]=ae.toCartesian(Re,z.scene.globe.ellipsoid)}else if(i==="VcAnalysisSightline"){const pe=ce.positions;if(M.value){const Ce=M.value._index>0?1:0;pe[Ce]=X}else pe[1]=X}else{const pe=ce.positions.slice();pe[M.value?M.value._index:1]=X,ce.positions=pe}nt(()=>{l("drawEvt",Object.assign({index:ne,pointIndex:le,renderDatas:H,name:c,finished:!1,position:ce.positions[1],windowPoistion:Z,type:M.value?_:"new"},b.value[ne]),z)})},ie=Z=>{var z,Q,re;if(w.value=[0,0,0],y.value=!1,!e.editable)return;_.value=Z;const{viewer:X,drawingFabInstance:J}=s;if(Z==="move"){d.value=h.value.drawingTipEditing,p.value=ze.Drawing,M.value=C.value,g=H.value[M.value._vcPolylineIndx].positions[M.value._index],f.value=!0;const ae=J==null?void 0:J.proxy;ae.editingActionName=c}else if(Z==="remove"){const ae=C.value._vcPolylineIndx;H.value[ae].positions.splice(C.value._index,1)}else if(Z==="removeAll"){const ae=C.value._vcPolylineIndx;H.value.splice(ae,1)}else{const ae=C.value._vcPolylineIndx,ne=H.value[ae];(re=(Q=(z=e.editorOpts)==null?void 0:z[Z])==null?void 0:Q.callback)==null||re.call(Q,ae,ne)}l("editorEvt",{type:Z,renderDatas:H,name:c,index:C.value._vcPolylineIndx,pointIndex:C.value._index,point:C.value},X)},K={computedRenderDatas:b,renderDatas:H,startNew:N,stop:j,clear:()=>{H.value=[],j()},handleMouseClick:U,handleMouseMove:te};return Object.assign(n.proxy,K),()=>{var Z,z,Q;const{createGuid:re}=Cesium,X=[];if(b.value.forEach((J,ae)=>{var ne;const ce=i==="VcDrawingRectangle"||i==="VcDrawingRegular"||i==="VcMeasurementRegular"||i==="VcMeasurementRectangle",le=ce?(ne=J.polygonPositions)==null?void 0:ne.slice():J.positions;ce&&(le==null||le.push(le[0]));const pe=Object.assign({},e.polylineOpts,J.polylineOpts);e.clampToGround&&delete pe.arcType;const Ce=Object.assign({},e.primitiveOpts,J.primitiveOpts);if(le!=null&&le.length&&(le==null?void 0:le.length)>1&&(X.push(R(e.clampToGround?Sl:eo,{...Ce,show:J.show&&Ce.show||e.editable||J.drawStatus===ze.Drawing,onReady:Re=>{var Me;(Me=Ce==null?void 0:Ce.onReady)==null||Me.call(Ce,Re),Re.cesiumObject._vcPolylineIndex=ae}},()=>R(to,{id:re()},()=>R(e.clampToGround?Tl:io,{positions:le,...pe})))),i==="VcAnalysisViewshed"&&X.push(R(i0,{...J.viewshedOpts}))),J.polygonPositions&&J.polygonPositions.length>2){const Re=Object.assign({},e==null?void 0:e.polygonOpts,J==null?void 0:J.polygonOpts);Re.clampToGround=e.clampToGround,X.push(R(Mo,{positions:le,show:J.show&&(Re==null?void 0:Re.show),...Re,onReady:Me=>{var Te;q(Me),(Te=Re==null?void 0:Re.onReady)==null||Te.call(Re,Me),Me.cesiumObject._vcPolylineIndex=ae}}))}J.xyPolylinePositions&&J.xyPolylinePositions.length>1&&X.push(R(eo,{show:J.show&&Ce||e.editable||J.drawStatus===ze.Drawing,...Ce,onReady:Re=>{var Me;(Me=Ce==null?void 0:Ce.onReady)==null||Me.call(Ce,Re),Re.cesiumObject._vcPolylineIndex=ae}},()=>R(to,{id:re()},()=>R(io,{positions:J.xyPolylinePositions,...pe})))),J.xyBoxPositions&&J.xyBoxPositions.length>1&&X.push(R(eo,{show:J.show&&Ce||e.editable||J.drawStatus===ze.Drawing,...Ce},()=>R(to,{id:re()},()=>R(io,{positions:J.xyBoxPositions,...pe}))));const Se=Object.assign({},e.pointOpts,J.pointOpts);X.push(R(da,{enableMouseEvent:e.enableMouseEvent,show:J.show,points:J.points.map((Re,Me)=>{const Te=Re.position,$e=Object.assign({},Se,Re);return{position:Te,id:re(),_vcPolylineIndx:ae,...$e,show:(($e==null?void 0:$e.show)||e.editable||J.drawStatus===ze.Drawing)&&(i==="VcAnalysisSightline"&&J.positions.length===3?Me!==1:!0)}}),onMouseover:O,onMouseout:I,onReady:D})),X.push(R(ca,{enableMouseEvent:e.enableMouseEvent,show:J.show,labels:J.labels,onReady:G}))}),(Z=e.drawtip)!=null&&Z.show&&f.value){const{viewer:J}=s;X.push(R(no,{position:v.value,pixelOffset:(z=e.drawtip)==null?void 0:z.pixelOffset,teleport:{to:J.container}},()=>R("div",{class:"vc-drawtip vc-tooltip--style"},d.value)))}if(y.value){const J=[];if(C.value){const ne=e.editorOpts;for(const ce in ne)if(!Array.isArray(ne[ce])&&typeof ne[ce]!="number"){const le={...ne[ce]};delete le.color,J.push(R(Yi,{style:{color:ne[ce].color,background:ne[ce].background},...le,onclick:ie.bind(void 0,ce)},()=>R(xi,{...ne[ce].tooltip},()=>{var pe;return R("strong",null,((pe=ne[ce].tooltip)==null?void 0:pe.tip)||a(`vc.measurement.editor.${ce}`))})))}}const{viewer:ae}=s;X.push(R(no,{position:w.value,pixelOffset:(Q=e.editorOpts)==null?void 0:Q.pixelOffset,teleport:{to:ae.container},onMouseenter:A,onMouseleave:V},()=>R("div",{class:"vc-editor"},J)))}return R(Oo,{ref:S,show:e.show,onReady:$},()=>X)}}var Gg=de({name:"VcMeasurementDistance",props:{...ji,showComponentLines:{type:Boolean,default:!1},measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,xLabelOpts:Object,xAngleLabelOpts:Object,yLabelOpts:Object,yAngleLabelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:si,setup(e,t){return ro(e,t,"VcMeasurementDistance")}});function ns(e,t,i){const n=fe(),r=ht(e,t,n);if(r===void 0)return;const{t:a}=ri(),s=r.$services,{emit:l}=t,{drawingType:c,drawTip:d,drawTipOpts:h,drawStatus:p,canShowDrawTip:f,drawTipPosition:v,showEditor:y,editorPosition:w,mouseoverPoint:C,editingPoint:M,primitiveCollectionRef:S,editorType:_,onMouseoverPoints:O,onMouseoutPoints:I,onMouseenterEditor:A,onMouseleaveEditor:V,onPrimitiveCollectionReady:$,onVcCollectionPointReady:D,onVcCollectionLabelReady:G,onVcPrimitiveReady:q}=zg(e,t,n,i,s);let H,g;const b=10,E=he([]);e.preRenderDatas&&e.preRenderDatas.length&&e.preRenderDatas.forEach(z=>{const Q={show:!0,positions:Un(z),tempPositions:[],drawStatus:ze.AfterDraw,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};E.value.push(Q)});const L=ge(()=>{const{Cartesian3:z,createGuid:Q,defined:re,Math:X}=Cesium,J=[],{viewer:ae}=s,ne=e.angleFormatter||Gi.angleToString,ce=e.distanceFormatter||Gi.distanceToString,le=e.areaFormatter||Gi.areaToString;return E.value.forEach((pe,Ce)=>{var Se,Re,Me,Te,$e,Le,Ie,We,Y;const _e=Ve([]),Be=[],Fe=[];let Bt=0;const vi=[];pe.points=pe.positions.map(Ee=>({position:Ee}));const Ke=pe.positions.slice();if(i==="VcAnalysisSightline"){const Ee=Ke.shift();Ee&&Ke.forEach(Qe=>{const He=[];He.push(Ee);const Xe=[];S.value.cesiumObject._primitives.forEach(ot=>{ot instanceof Cesium.PointPrimitiveCollection&&Xe.push(...ot._pointPrimitives),ot instanceof Cesium.Primitive&&Xe.push(ot)});const _t=F2(Ee,Qe,s.viewer,Xe);re(_t)&&He.push(_t),He.push(Qe);let wt=0;const lt=[];for(let ot=0;ot<He.length-1;ot++){const An=z.distance(He[ot],He[ot+1]);lt.push(An),wt=wt+An}J.push({...pe,positions:He,distance:wt,distances:lt})})}else{e.loop&&Ke.length>2&&Ke.push(Ke[0]);for(let He=0;He<Ke.length-1;He++){let Xe=0;((Se=e.polylineOpts)==null?void 0:Se.arcType)===0?Xe=Lp(Ke[He],Ke[He+1],s.viewer.scene.globe.ellipsoid):Xe=z.distance(Ke[He],Ke[He+1]),Be.push(Xe),Bt=Bt+Xe;const _t=Object.assign({},e.labelsOpts,pe.labelsOpts);if(Xe>0&&Ke.length>2&&e.showDistanceLabel&&_e.push({text:ce(Xe,(Re=e.measureUnits)==null?void 0:Re.distanceUnits,e.locale,(Me=e.decimals)==null?void 0:Me.distance),position:z.midpoint(Ke[He],Ke[He+1],{}),id:Q(),..._t}),Ke.length>2&&e.showAngleLabel&&(He>0||e.loop)){const wt=Ke[He===0?Ke.length-2:He-1],lt=Ke[He],ot=Ke[He+1],An=z.subtract(wt,lt,{}),Ao=z.subtract(ot,lt,{});let Do=0;z.ZERO.equals(An)||z.ZERO.equals(Ao)||(Do=z.angleBetween(An,Ao)),Fe.push(Do),_e.push({text:ne(Do,(Te=e.measureUnits)==null?void 0:Te.angleUnits,e.locale,($e=e.decimals)==null?void 0:$e.angle),position:lt,id:Q(),..._t})}e.showDashedLine&&(vi.push({positions:[Ke[He],P(Ke[He])]}),He===Ke.length-2&&vi.push({positions:[Ke[He+1],P(Ke[He+1])]}))}const Ee=L2(Ke),Qe=Object.assign({},e.labelOpts,pe.labelOpts);e.showLabel&&Ke.length&&(i.includes("Area")?_e.push({text:le(Ee,(Le=e.measureUnits)==null?void 0:Le.areaUnits,e.locale,(Ie=e.decimals)==null?void 0:Ie.area),position:Ke[Ke.length-1],id:Q(),...Qe}):_e.push({text:ce(Bt,(We=e.measureUnits)==null?void 0:We.distanceUnits,e.locale,(Y=e.decimals)==null?void 0:Y.distance),position:Ke[Ke.length-1],id:Q(),...Qe})),pe.positionsDegreesArray=pe.positions.map(He=>{const Xe=Cesium.Cartographic.fromCartesian(He,ae.scene.globe.ellipsoid);return[X.toDegrees(Xe.longitude),X.toDegrees(Xe.latitude),Xe.height]}),J.push({...pe,labels:_e,distance:Bt,distances:Be,area:Ee,angles:Fe,dashedLines:vi})}}),J});n.mount=async()=>{const{viewer:z}=s;return e.autoUpdateLabelPosition&&z.scene.preRender.addEventListener(T),!0},n.unmount=async()=>{const{viewer:z}=s;return e.autoUpdateLabelPosition&&z.scene.preRender.removeEventListener(T),!0};const P=z=>{const{defined:Q,defaultValue:re}=Cesium,{viewer:X}=s,J=X.scene,ae=J.globe,ne=J.frameState.mapProjection.ellipsoid,ce=ne.cartesianToCartographic(z);return ce.height=Q(ae)?re(ae.getHeight(ce),0):0,ne.cartographicToCartesian(ce)},T=()=>{L.value.forEach((z,Q)=>{var re,X;const J=z.positions;if(!(J.length<2)){const{defined:ae,SceneTransforms:ne,Cartesian2:ce,HorizontalOrigin:le}=Cesium,{viewer:pe}=s,Ce=pe.scene;let Se=J[0];const Re=ii(Cesium.VERSION,"1.121")?ne.worldToWindowCoordinates(Ce,Se,{}):ne.wgs84ToWindowCoordinates(Ce,Se,{});let Me=ae(Re)?ce.clone(Re,{}):ce.fromElements(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,{}),Te=Me.y;const $e=((re=S.value)==null?void 0:re.cesiumObject)._primitives.filter(Ie=>Ie instanceof Cesium.LabelCollection)[Q]._labels,Le=$e[$e.length-1];for(let Ie=1;Ie<J.length;Ie++){const We=ii(Cesium.VERSION,"1.121")?ne.worldToWindowCoordinates(Ce,J[Ie],{}):ne.wgs84ToWindowCoordinates(Ce,J[Ie],{});if(ae(We)){const Y=(Me.y-We.y)/(We.x-Me.x);$e[Ie-1]!==Le&&ae((X=$e[Ie-1])==null?void 0:X.horizontalOrigin)&&($e[Ie-1].horizontalOrigin=0<Y?le.LEFT:le.RIGHT),We.y<Te&&(Te=We.y,Se=J[Ie]),Me=ce.clone(We,Me)}z.drawStatus===ze.AfterDraw&&(Le.position=Se)}}})},F=()=>{const z={show:!1,positions:[],tempPositions:[],drawStatus:ze.BeforeDraw,loop:e.loop,distance:0,area:0,distances:[],labels:[],angles:[],polylineOpts:{},pointOpts:{},labelOpts:{},labelsOpts:{},primitiveOpts:{},polygonOpts:{}};if(i==="VcMeasurementHorizontal"){const{Cartesian3:Q,Plane:re}=Cesium;Object.assign(z,{dashedLines:[],heightPlane:new re(Q.UNIT_X,0),heightPlaneCV:new re(Q.UNIT_X,0),height:0,firstMove:!1,tempNextPos:new Q})}p.value=ze.BeforeDraw,E.value.push(z),f.value=!0,d.value=h.value.drawingTipStart},N=(z=!0)=>{z&&p.value===ze.Drawing&&E.value.pop();const Q=M.value?M.value._vcPolylineIndex:E.value.length-1,re=E.value[Q];re&&(re.positions=re.tempPositions,re.drawStatus=ze.AfterDraw),p.value=ze.AfterDraw,f.value=!1,v.value=[0,0,0]},j=(z,Q)=>{var re;const{viewer:X,drawingFabInstance:J,getWorldPosition:ae,selectedDrawingActionInstance:ne}=s,ce=J==null?void 0:J.proxy;if(Q.button===2&&Q.ctrl){const _e=ce.getDrawingActionInstance(c);ce.toggleAction(_e),nt(()=>{l("drawEvt",{name:c,finished:!0,windowPoistion:z,type:"cancel"},X)});return}p.value===ze.AfterDraw&&F();const{defined:le,Cartesian2:pe,Plane:Ce,Cartesian3:Se}=Cesium,Re=M.value?M.value._vcPolylineIndex:E.value.length-1,Me=E.value[Re],Te=Me.tempPositions,$e=M.value?M.value._index:Me.positions.length-1;if(Q.button===2&&M.value){_.value==="insert"?Me.positions.splice(M.value._index,1):Me.positions[M.value._index]=g,p.value=ze.AfterDraw,Me.drawStatus=ze.AfterDraw,M.value=void 0,d.value=h.value.drawingTipStart,ce.editingActionName=void 0,f.value=le(ne),nt(()=>{l("drawEvt",Object.assign({index:Re,pointIndex:$e,name:c,renderDatas:E,finished:!0,windowPoistion:z,type:"cancel"},L.value[Re]),X)});return}if(H=H||new Cesium.Cartesian2(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),pe.magnitude(pe.subtract(H,z,{}))<b||(Q.button===2&&p.value===ze.Drawing&&Te.length>1&&(Te.pop(),U(z)),Q.button!==0))return;const Le=X.scene,Ie=ae(Le,z,{});if(!le(Ie))return;let We=!1,Y="new";if(i==="VcMeasurementHorizontal"){if(M.value)p.value=ze.AfterDraw,M.value=void 0,We=!0,Y=_.value,d.value=h.value.drawingTipStart;else if(Te.length===0){const _e=Le.frameState.mapProjection.ellipsoid;Te.push(Ie),Me.positions=Te,Me.heightPlane=Ce.fromPointNormal(Ie,_e.geodeticSurfaceNormal(Ie,{}),Me.heightPlane);const Be=_e.cartesianToCartographic(Ie,{}),Fe=Le.mapProjection.project(Be,{}),Bt=Se.fromElements(Fe.z,Fe.x,Fe.y,Fe);Me.heightPlaneCV=Ce.fromPointNormal(Bt,Se.UNIT_X,Me.heightPlaneCV),Me.height=Be.height,Me.firstMove=!0,Me.drawStatus=ze.Drawing,Me.show=!0,p.value=ze.Drawing}else Te.push(Me.tempNextPos),Me.positions=Te,Me.firstMove=!0;d.value=h.value.drawingTipEnd}else{if(M.value){if(Xt().hasTouch===!0){const _e=ae(Le,z,{});le(_e)&&(Me.positions.splice(M.value._index,1,_e),M.value.pixelSize=((re=e.pointOpts)==null?void 0:re.pixelSize)*1)}p.value=ze.AfterDraw,M.value=void 0,We=!0,Y=_.value,d.value=h.value.drawingTipStart}else Te.push(Ie),Me.positions=Te,Me.show=!0,Me.drawStatus=ze.Drawing,p.value=ze.Drawing,f.value=!0,d.value=h.value.drawingTipEnd;Y!=="new"&&(ce.editingActionName=void 0,f.value=le(ne))}pe.clone(z,H),nt(()=>{l("drawEvt",Object.assign({index:Re,pointIndex:$e,name:c,renderDatas:E,finished:We,position:i==="VcMeasurementHorizontal"?Me.positions[Me.positions.length-1]:Ie,windowPoistion:z,type:Y},L.value[Re]),X)})},U=(z,Q)=>{const{viewer:re,getWorldPosition:X}=s,J=re.scene,ae=X(J,z,{}),{defined:ne}=Cesium;if(!ne(ae)||(v.value=ae,p.value!==ze.Drawing))return;const ce=M.value?M.value._vcPolylineIndex:E.value.length-1,le=E.value[ce],pe=M.value?M.value._index:le.positions.length-1;let Ce="new";if(i==="VcMeasurementHorizontal"){const{SceneMode:Se,IntersectionTests:Re,Cartesian3:Me}=Cesium,Te=J.frameState.mapProjection.ellipsoid,$e=le.positions,Le=J.camera.getPickRay(z);let Ie,We;if(J.mode===Se.SCENE3D&&le.heightPlane)Ie=Re.rayPlane(Le,le.heightPlane);else if(J.mode===Se.COLUMBUS_VIEW&&le.heightPlaneCV)Ie=Re.rayPlane(Le,le.heightPlaneCV),Ie=Me.fromElements(Ie.y,Ie.z,Ie.x,Ie),We=J.mapProjection.unproject(Ie),Ie=Te.cartographicToCartesian(We);else if(Ie=J.camera.pickEllipsoid(z,Te),ne(Ie)){const Y=Te.cartesianToCartographic(Ie);Y.height=le.height||0,Ie=Te.cartographicToCartesian(Y,Ie)}if(!ne(Ie))return;if(!le.firstMove&&Q!=null&&Q.shift){const Y=$e[$e.length-2],_e=le.tempNextPos,Be=Me.subtract(_e,Y,{});let Fe=Me.subtract(Ie,Y,{});Fe=Me.projectVector(Fe,Be,Fe),Ie=Me.add(Y,Fe,Ie)}if(M.value)le.positions.splice(M.value._index,1,Ie),Ce=_.value;else{const Y=le.tempPositions.slice();Y.push(Ie),le.positions=Y,le.firstMove=!1,le.tempNextPos=Object.assign(Ie),d.value=h.value.drawingTipEnd}}else if(M.value)le.positions.splice(M.value._index,1,ae),Ce=_.value;else{const Se=le.tempPositions.slice();Se.push(ae),le.positions=Se}nt(()=>{l("drawEvt",Object.assign({index:ce,pointIndex:pe,name:c,renderDatas:E,finished:!1,position:i==="VcMeasurementHorizontal"?le.positions[le.positions.length-1]:ae,windowPoistion:z,type:Ce},L.value[ce]),re)})},te=z=>{const{drawingFabInstance:Q,selectedDrawingActionInstance:re,viewer:X}=s;if(p.value===ze.Drawing){const J=M.value?M.value._vcPolylineIndex:E.value.length-1,ae=E.value[J],ne=M.value?M.value._index:ae.positions.length-1;N(!1),d.value=h.value.drawingTipStart,nt(()=>{l("drawEvt",Object.assign({index:J,pointIndex:ne,name:c,renderDatas:E,finished:!0,position:ae.positions[ae.positions.length-1],windowPoistion:z,type:"new"},L.value[J]),X),e.mode===1&&(Q==null?void 0:Q.proxy).toggleAction(re)})}},ie=()=>{let z=M.value._vcPolylineIndex,Q=M.value._index;if(i==="VcAnalysisSightline")for(let re=0;re<E.value.length;re++){const X=E.value[re];for(let J=0;J<X.positions.length;J++){const ae=X.positions[J];M.value.position.equals(ae)&&(z=re,Q=J)}}return[z,Q]},K=z=>{var Q,re,X;if(w.value=[0,0,0],y.value=!1,!e.editable)return;const{viewer:J,drawingFabInstance:ae}=s,ne=ae==null?void 0:ae.proxy;if(_.value=z,z==="move"){d.value=h.value.drawingTipEditing,p.value=ze.Drawing,M.value=C.value,f.value=!0;const ce=ie();M.value._vcPolylineIndex=ce[0],M.value._index=ce[1],g=E.value[ce[0]].positions[ce[1]],ne.editingActionName=c}else if(z==="insert"){const ce=C.value._vcPolylineIndex;E.value[ce].positions.splice(C.value._index,0,C.value.position),M.value=C.value,f.value=!0,p.value=ze.Drawing,d.value=h.value.drawingTipEditing,ne.editingActionName=c}else if(z==="remove"){const ce=C.value._vcPolylineIndex,le=E.value[ce];le.positions.length>2&&le.positions.splice(C.value._index,1)}else if(z==="removeAll"){const ce=C.value._vcPolylineIndex;E.value.splice(ce,1)}else{const ce=C.value._vcPolylineIndex,le=E.value[ce];(X=(re=(Q=e.editorOpts)==null?void 0:Q[z])==null?void 0:re.callback)==null||X.call(re,ce,le)}l("editorEvt",{type:z,renderDatas:E,name:c,polylineIndex:C.value._vcPolylineIndex,pointIndex:C.value._index,point:C.value},J)},Z={computedRenderDatas:L,renderDatas:E,startNew:F,stop:N,clear:()=>{E.value=[],N()},handleMouseClick:j,handleMouseMove:U,handleDoubleClick:te};return Object.assign(n.proxy,Z),()=>{var z,Q;const{createGuid:re,Cartesian3:X}=Cesium,J=[],ae=[];if(L.value.forEach((ne,ce)=>{var le,pe;const Ce=ne.positions.slice();if(Ce.length>1){ne.loop&&Ce.push(Ce[0]);const Te=Object.assign({},e.polylineOpts,ne.polylineOpts);e.clampToGround&&delete Te.arcType;const $e=Object.assign({},e.primitiveOpts,ne.primitiveOpts);J.push(R(e.clampToGround?Sl:eo,{show:ne.show&&$e.show||e.editable||ne.drawStatus===ze.Drawing,...$e,onReady:Le=>{var Ie;(Ie=$e==null?void 0:$e.onReady)==null||Ie.call($e,Le),Le.cesiumObject._vcPolylineIndex=ce}},()=>R(to,{id:re()},()=>R(e.clampToGround?Tl:io,{positions:Ce,...Te}))))}const Se=Object.assign({},e.dashLineOpts,ne.dashLineOpts),Re=Object.assign({},e.dashLinePrimitiveOpts,ne.dashLinePrimitiveOpts);(le=ne.dashedLines)==null||le.forEach(Te=>{J.push(R(eo,{show:ne.show&&e.dashLinePrimitiveOpts.show||e.editable||ne.drawStatus===ze.Drawing,...Re},()=>R(to,{id:re()},()=>R(io,{positions:Te.positions,...Se}))))});const Me=Object.assign({},e.pointOpts,ne.pointOpts);if(J.push(R(da,{enableMouseEvent:e.enableMouseEvent,show:ne.show,points:ne.points.map((Te,$e)=>{var Le;const Ie=Te.position;let We=!1;for(let Be=0;Be<ae.length;Be++)X.equals(Ie,ae[Be])&&(We=!0);const Y=(((Le=e.pointOpts)==null?void 0:Le.show)||e.editable||ne.drawStatus===ze.Drawing)&&(i==="VcAnalysisSightline"&&ne.positions.length===3?$e!==1:!0)&&!We;i==="VcAnalysisSightline"&&ae.push(Ie);const _e=Object.assign({},Me,Te);return{position:Ie,id:re(),_vcPolylineIndex:ce,show:Y,..._e}}),onMouseover:O,onMouseout:I,onReady:D})),J.push(R(ca,{enableMouseEvent:e.enableMouseEvent,show:ne.show,labels:ne.labels,onReady:G})),Ce.length>2&&(i.includes("Polygon")||i.includes("Area"))){const Te=Object.assign({},e.polygonOpts,ne.polygonOpts);J.push(R(Mo,{positions:Ce,clampToGround:e.clampToGround,show:ne.show&&((pe=e.polygonOpts)==null?void 0:pe.show),...Te,onReady:$e=>{var Le;q($e),(Le=Te==null?void 0:Te.onReady)==null||Le.call(Te,$e),$e.cesiumObject._vcPolylineIndex=ce}}))}}),(z=e.drawtip)!=null&&z.show&&f.value){const{viewer:ne}=s;J.push(R(no,{position:v.value,pixelOffset:e.drawtip.pixelOffset,teleport:{to:ne.container}},()=>R("div",{class:"vc-drawtip vc-tooltip--style"},d.value)))}if(y.value){const ne=[];if(C.value){const le=e.editorOpts;for(const pe in le)if(!Array.isArray(le[pe])&&typeof le[pe]!="number"){const Ce={...le[pe]};delete Ce.color,ne.push(R(Yi,{style:{color:le[pe].color,background:le[pe].background},...Ce,onclick:K.bind("polyline",pe)},()=>R(xi,{...le[pe].tooltip},()=>{var Se;return R("strong",null,((Se=le[pe].tooltip)==null?void 0:Se.tip)||a(`vc.drawing.editor.${pe}`))})))}}const{viewer:ce}=s;J.push(R(no,{position:w.value,pixelOffset:(Q=e.editorOpts)==null?void 0:Q.pixelOffset,teleport:{to:ce.container},onMouseenter:A,onMouseleave:V},()=>R("div",{class:"vc-editor"},ne)))}return R(Oo,{ref:S,show:e.show,onReady:$},()=>J)}}var Ug=de({name:"VcMeasurementPolyline",props:{...ji,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,measureUnits:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:si,setup(e,t){return ns(e,t,"VcMeasurementPolyline")}}),Hg=de({name:"VcMeasurementHorizontal",props:{...ji,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,dashLineOpts:Object,dashLinePrimitiveOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showLabel:Boolean,showAngleLabel:Boolean,showDashedLine:Boolean,showDistanceLabel:Boolean,autoUpdateLabelPosition:Boolean},emits:si,setup(e,t){return ns(e,t,"VcMeasurementHorizontal")}}),Wg=de({name:"VcMeasurementVertical",props:{...ji,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:si,setup(e,t){return ro(e,t,"VcMeasurementVertical")}}),qg=de({name:"VcMeasurementHeight",props:{...ji,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,labelOpts:Object,locale:String,decimals:Object,autoUpdateLabelPosition:Boolean},emits:si,setup(e,t){return ro(e,t,"VcMeasurementHeight")}});function Zg(e,t,i){const n=fe(),r=ht(e,t,n);if(r===void 0)return;const{t:a}=ri(),s=r.$services,{emit:l}=t,{drawingType:c,drawTip:d,drawTipOpts:h,drawStatus:p,canShowDrawTip:f,drawTipPosition:v,showEditor:y,editorPosition:w,mouseoverPoint:C,editingPoint:M,primitiveCollectionRef:S,editorType:_,onMouseoverPoints:O,onMouseoutPoints:I,onMouseenterEditor:A,onMouseleaveEditor:V,onPrimitiveCollectionReady:$,onVcCollectionPointReady:D,onVcCollectionLabelReady:G}=zg(e,t,n,i,s),q=he([]);let H,g=[];i==="VcDrawingPin"&&e.billboardOpts.image===""&&(e.billboardOpts.image=Cesium.buildModuleUrl("Assets/Textures/pin.svg")),g.push(Pe(()=>e.editable,K=>{const{drawingFabInstance:Z,selectedDrawingActionInstance:z}=s;K&&(z==null?void 0:z.name)===c&&(Z==null?void 0:Z.proxy).toggleAction(z)}));const b=(K,Z,z)=>{const Q=Cesium.Cartographic.fromCartesian(K,z.globe.ellipsoid),re=[Cesium.Math.toDegrees(Q.longitude),Cesium.Math.toDegrees(Q.latitude),Q.height];Z.positionDegrees=re},E=()=>{const{Cartesian3:K}=Cesium,Z={drawStatus:ze.Drawing,show:!1,position:new K,lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}};q.value.push(Z),p.value=ze.Drawing,f.value=!0,d.value=h.value.drawingTipStart},L=(K=!0)=>{K&&p.value===ze.Drawing&&q.value.pop();const Z=M.value?M.value._vcPolylineIndx:q.value.length-1,z=q.value[Z];z&&(z.drawStatus=ze.AfterDraw),p.value=ze.AfterDraw,f.value=!1,v.value=[0,0,0]},P=(K,Z)=>{const{viewer:z,drawingFabInstance:Q,getWorldPosition:re,selectedDrawingActionInstance:X}=s,J=Q==null?void 0:Q.proxy;if(Z.button===2&&Z.ctrl){const pe=J==null?void 0:J.getDrawingActionInstance(c);J==null||J.toggleAction(pe),nt(()=>{l("drawEvt",{name:c,finished:!0,windowPoistion:K,type:"cancel"},z)});return}const ae=M.value?M.value._vcPolylineIndx:q.value.length-1,ne=q.value[ae];if(Z.button===2&&M.value){J.editingActionName=void 0,q.value[ae]=H,p.value=ze.AfterDraw,q.value[ae].drawStatus=ze.AfterDraw,M.value=void 0,d.value=h.value.drawingTipStart,f.value=Cesium.defined(X),nt(()=>{l("drawEvt",{name:c,index:ae,renderDatas:q,finished:!0,windowPoistion:K,type:"cancel"},z)});return}if(Z.button!==0)return;const{defined:ce}=Cesium;let le="new";if(p.value===ze.BeforeDraw){const pe=z.scene,Ce=re(pe,K,{});if(!ce(Ce))return;ne.position=Ce,ne.show=!0,ne.drawStatus=ze.AfterDraw,p.value=ze.AfterDraw,d.value=h.value.drawingTipStart,nt(()=>{l("drawEvt",{index:ae,renderDatas:q,name:c,finished:!0,position:Ce,windowPoistion:K,type:le},z)})}else{p.value=ze.AfterDraw,ne.drawStatus=ze.AfterDraw;const pe=z.scene;if(Xt().hasTouch===!0){const Ce=re(pe,K,{});b(Ce,ne,pe),ce(Ce)&&(ne.position=Ce,ne.show=!0)}M.value?(M.value=void 0,J.editingActionName=void 0,f.value=!1,le=_.value):e.mode===1&&nt(()=>{J.toggleAction(X)}),X&&(d.value=h.value.drawingTipStart,f.value=!0),nt(()=>{l("drawEvt",{index:ae,renderDatas:q,name:c,finished:!0,position:q.value[ae].position,positionDegrees:q.value[ae].positionDegrees,windowPoistion:K,type:le},z)})}},T=K=>{const{viewer:Z,getWorldPosition:z}=s,Q=Z.scene,{defined:re,SceneMode:X}=Cesium;if(Q.mode!==X.MORPHING){const J=z(Q,K,{});if(!re(J)||(v.value=J,p.value===ze.AfterDraw&&E(),p.value!==ze.Drawing))return;const ae=M.value?M.value._vcPolylineIndx:q.value.length-1,ne=q.value[ae];ne.position=J,b(J,ne,Q),F(ne,K);const ce=M.value?_.value:"new";nt(()=>{l("drawEvt",{index:ae,renderDatas:q,name:c,finished:!1,position:J,positionDegrees:ne.positionDegrees,windowPoistion:K,type:ce},Z)})}},F=(K,Z)=>{const{viewer:z}=s,Q=z.scene,{defined:re,defaultValue:X,Math:J,SceneMode:ae}=Cesium,ne=Q.frameState.mapProjection.ellipsoid.cartesianToCartographic(K.position,{}),ce=Q.globe;let le=re(ce)?X(ce.getHeight(ne),0):0;le=e.heightReference===0?ne.height:ne.height-le,J.equalsEpsilon(le,0,J.EPSILON3)&&(le=0);let pe=0;Q.mode!==ae.SCENE2D&&(Z||(Z=Q.cartesianToCanvasCoordinates(K.position,{})),pe=N(Q,Z)),K.show=!0,K.lng=ne.longitude,K.lat=ne.latitude,K.height=le,K.slope=pe},N=(K,Z)=>{const{getWorldPosition:z}=s,{defined:Q,Cartesian2:re,Cartesian3:X,Math:J}=Cesium,ae=z(K,Z,{});if(Q(ae)){const ne=K.camera.position,ce=X.distance(ae,ne),le=[new X,new X,new X,new X,new X],pe=new X,Ce=new X;if(!(1e4<ce)){const Se=le[0],Re=le[1],Me=le[2],Te=le[3];let $e=K.frameState.mapProjection.ellipsoid.geodeticSurfaceNormal(ae,pe);$e=X.negate($e,$e);const Le=re.clone(Z,le[0]);Le.x-=2,Le.y-=2;const Ie=re.clone(Z,le[1]);Ie.x-=2,Ie.y+=2;const We=re.clone(Z,le[2]);We.x+=2,We.y+=2;const Y=re.clone(Z,le[3]);Y.x+=2,Y.y-=2;const _e=z(K,Le,Se),Be=z(K,Ie,Re),Fe=z(K,We,Me),Bt=z(K,Y,Te);let vi,Ke,Ee,Qe,He,Xe,_t,wt;Q(_e)&&(vi=X.subtract(_e,ae,Se),Ke=X.magnitude(vi)/ce<=.05?X.normalize(vi,Se):void 0),Q(Be)&&(Ee=X.subtract(Be,ae,Re),Qe=X.magnitude(Ee)/ce<=.05?X.normalize(Ee,Re):void 0),Q(Fe)&&(He=X.subtract(Fe,ae,Me),Xe=X.magnitude(He)/ce<=.05?X.normalize(He,Me):void 0),Q(Bt)&&(_t=X.subtract(Bt,ae,Te),wt=X.magnitude(_t)/ce<=.05?X.normalize(_t,Te):void 0);let lt=X.clone(X.ZERO,Ce),ot=le[4];if(Q(Ke)&&Q(Qe)&&(ot=X.normalize(X.cross(Ke,Qe,ot),ot),lt=X.add(lt,ot,lt)),Q(Qe)&&Q(Xe)&&(ot=X.normalize(X.cross(Qe,Xe,ot),ot),lt=X.add(lt,ot,lt)),Q(Xe)&&Q(wt)&&(ot=X.normalize(X.cross(Xe,wt,ot),ot),lt=X.add(lt,ot,lt)),Q(wt)&&Q(Ke)&&(ot=X.normalize(X.cross(wt,Ke,ot),ot),lt=X.add(lt,ot,lt)),!lt.equals(X.ZERO))return lt=X.normalize(lt,lt),J.asinClamped(Math.abs(Math.sin(X.angleBetween(lt,$e))))}}return 0},j=K=>{var Z,z,Q;if(w.value=[0,0,0],y.value=!1,!e.editable)return;_.value=K;const{viewer:re,drawingFabInstance:X}=s,J=X==null?void 0:X.proxy;if(K==="move")d.value=h.value.drawingTipEditing,p.value=ze.Drawing,M.value=C.value,f.value=!0,H=Object.assign({},q.value[M.value._vcPolylineIndx]),J.editingActionName=c;else if(K==="remove"){const ae=C.value._vcPolylineIndx;q.value.splice(ae,1)}else{const ae=C.value._vcPolylineIndx,ne=q.value[ae];(Q=(z=(Z=e.editorOpts)==null?void 0:Z[K])==null?void 0:z.callback)==null||Q.call(z,ae,ne)}l("editorEvt",{type:K,name:c,renderDatas:q,index:C.value._vcPolylineIndx,pointIndex:C.value._index,point:C.value},re)},U=()=>{q.value=[],L()},te=K=>{var Z,z,Q,re,X,J,ae,ne;const{viewer:ce}=s,le=ce.scene.frameState.mapProjection.ellipsoid.cartesianToCartographic(K.position,{});if(!Cesium.defined(le))return"";const pe=e.angleFormatter||Gi.angleToString,Ce=e.distanceFormatter||Gi.distanceToString;return`${a("vc.measurement.point.lng")}${pe(le.longitude,(Z=e.measureUnits)==null?void 0:Z.angleUnits,e.locale,(z=e.decimals)==null?void 0:z.lng)}
${a("vc.measurement.point.lat")}${pe(le.latitude,(Q=e.measureUnits)==null?void 0:Q.angleUnits,e.locale,(re=e.decimals)==null?void 0:re.lat)}
${a("vc.measurement.point.height")}${Ce(K.height,(X=e.measureUnits)==null?void 0:X.distanceUnits,e.locale,(J=e.decimals)==null?void 0:J.height)}
${a("vc.measurement.point.slope")}${pe(K.slope,(ae=e.measureUnits)==null?void 0:ae.slopeUnits,e.locale,(ne=e.decimals)==null?void 0:ne.slope)}`};if(e.preRenderDatas&&e.preRenderDatas.length){const{viewer:K}=s;e.preRenderDatas.forEach(Z=>{const z={drawStatus:ze.AfterDraw,show:!0,position:Ot(Z),lng:0,lat:0,height:0,slope:0,pointOpts:{},labelOpts:{},billboardOpts:{}},Q=Cesium.Cartographic.fromCartesian(z.position,K.scene.globe.ellipsoid);z.positionDegrees=[Cesium.Math.toDegrees(Q.longitude),Cesium.Math.toDegrees(Q.latitude),Q.height],F(z),q.value.push(z)})}Vt(()=>{g.forEach(K=>K()),g=[]});const ie={renderDatas:q,startNew:E,stop:L,clear:U,handleMouseClick:P,handleMouseMove:T};return Object.assign(n.proxy,ie),()=>{var K,Z,z;const{createGuid:Q}=Cesium,re=[],X=[],J=[],ae=[];if(q.value.forEach((ne,ce)=>{var le;const pe=Object.assign({},e.pointOpts,ne.pointOpts);X.push({position:ne.position,id:Q(),_vcPolylineIndx:ce,...pe,show:ne.show&&((le=e.pointOpts)==null?void 0:le.show)||e.editable||ne.drawStatus===ze.Drawing});const Ce=Object.assign({},e.labelOpts,ne.labelOpts);if(e.showLabel)if(i==="VcDrawingPin"){const Se=Object.assign({},e.billboardOpts,ne.billboardOpts);ae.push({position:ne.position,id:Q(),_vcPolylineIndx:ce,...Se}),Ce.text&&J.push({position:ne.position,id:Q(),...Ce})}else J.push({position:ne.position,id:Q(),text:te(ne),...Ce})}),re.push(R(da,{enableMouseEvent:e.enableMouseEvent,points:X,onMouseover:O,onMouseout:I,onReady:D})),re.push(R(ca,{enableMouseEvent:e.enableMouseEvent,labels:J,onReady:G})),i==="VcDrawingPin"&&re.push(R(bd,{enableMouseEvent:e.enableMouseEvent,billboards:ae})),(K=e.drawtip)!=null&&K.show&&f.value){const{viewer:ne}=s;re.push(R(no,{position:v.value,pixelOffset:(Z=e.drawtip)==null?void 0:Z.pixelOffset,teleport:{to:ne.container}},()=>R("div",{class:"vc-drawtip vc-tooltip--style"},d.value)))}if(y.value){const ne=[];if(C.value){const le=e.editorOpts;for(const pe in le)if(!Array.isArray(le[pe])&&typeof le[pe]!="number"){const Ce={...le[pe]};delete Ce.color,ne.push(R(Yi,{style:{color:le[pe].color,background:le[pe].background},...Ce,onclick:j.bind(void 0,pe)},()=>R(xi,{...le[pe].tooltip},()=>{var Se;return R("strong",null,((Se=le[pe].tooltip)==null?void 0:Se.tip)||a(`vc.drawing.editor.${pe}`))})))}}const{viewer:ce}=s;re.push(R(no,{position:w.value,pixelOffset:(z=e.editorOpts)==null?void 0:z.pixelOffset,teleport:{to:ce.container},onMouseenter:A,onMouseleave:V},()=>R("div",{class:"vc-editor"},ne)))}return R(Oo,{ref:S,show:e.show,onReady:$},()=>re)}}var Qg=de({name:"VcMeasurementPoint",props:{...ji,measureUnits:Object,labelOpts:Object,locale:String,decimals:Object,heightReference:Number,showLabel:Boolean},emits:si,setup(e,t){return Zg(e,t,"VcMeasurementPoint")}}),Jg=de({name:"VcMeasurementArea",props:{...ji,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,locale:String,decimals:Object,showDistanceLabel:Boolean,showAngleLabel:Boolean,showLabel:Boolean,loop:Boolean,clampToGround:Boolean,autoUpdateLabelPosition:Boolean},emits:si,setup(e,t){return ns(e,t,"VcMeasurementArea")}}),Xg=de({name:"VcMeasurementRectangle",props:{...ji,measureUnits:Object,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:si,setup(e,t){return ro(e,t,"VcMeasurementRectangle")}}),Yg=de({name:"VcMeasurementRegular",props:{...ji,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,labelOpts:Object,labelsOpts:Object,clampToGround:Boolean,edge:Number,measureUnits:Object,locale:String,decimals:Object,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:si,setup(e,t){return ro(e,t,"VcMeasurementRegular")}});function Kg(e,t,i,n,r,a,s){i.cesiumEvents=[];const l=ht(e,t,i);if(l===void 0)return;const{t:c}=ri(),{$services:d}=l,{emit:h}=t,p=he(!1),f=Ve({}),v=Sn(e),y=he(null),w=he(null),C=he(!1),M=he(null);let S,_;const O=(j,U)=>{var te,ie;const K=_==null?void 0:_.cmpRef.value;(te=K==null?void 0:K.handleMouseClick)==null||te.call(K,j.position,U);let Z;const z=i.proxy;if(z.editingActionName&&(Z=E(z.editingActionName)),Z&&Z!==_){const Q=Z.cmpRef.value;(ie=Q==null?void 0:Q.handleMouseClick)==null||ie.call(Q,j.position,U)}},I=(j,U)=>{var te,ie;const K=_==null?void 0:_.cmpRef.value;(te=K==null?void 0:K.handleMouseMove)==null||te.call(K,j.endPosition,U);let Z;const z=i.proxy;if(z.editingActionName&&(Z=E(z.editingActionName)),Z&&Z!==_){const Q=Z.cmpRef.value;(ie=Q==null?void 0:Q.handleMouseMove)==null||ie.call(Q,j.endPosition,U)}},A=(j,U)=>{var te,ie;const K=_==null?void 0:_.cmpRef.value;(te=K==null?void 0:K.handleDoubleClick)==null||te.call(K,j.position,U);let Z;const z=i.proxy;if(z.editingActionName&&(Z=E(z.editingActionName)),Z&&Z!==_){const Q=Z.cmpRef.value;(ie=Q==null?void 0:Q.handleDoubleClick)==null||ie.call(Q,j.position,U)}},{activate:V,deactivate:$,destroy:D,isActive:G}=Vm(d,{handleMouseClick:O,handleMouseMove:I,handleDoubleClick:A});i.createCesiumObject=async()=>(p.value=!0,S=new Hm,n.value),i.mount=async()=>(H(),C.value=!0,V(),!0),i.unmount=async()=>(_&&(b(_),_=void 0),$(),D(),C.value=!1,!0);const q=(j,U,te)=>{const{Cesium3DTileFeature:ie,Cesium3DTileset:K,Cartesian3:Z,defined:z,Model:Q,Ray:re}=Cesium;if(Cesium.SuperMapVersion)return j.pickPosition(U);let X;const J={},ae=new re;if(j.pickPositionSupported){S.hide(j);const ne=j.pick(U,1,1);if(S.restore(j),z(ne)&&(ne instanceof ie||ne.primitive instanceof K||ne.primitive instanceof Q||Cesium.S3MTilesLayer&&ne.primitive instanceof Cesium.S3MTilesLayer)&&(X=j.pickPosition(U,J),z(X)))return Z.clone(X,te)}if(z(j.globe)){const ne=j.camera.getPickRay(U,ae);return X=j.globe.pick(ne,j,J),z(X)?Z.clone(X,te):void 0}},H=()=>{var j;const U=v.style.value;f.left=U.left,f.top=U.top,f.transform=U.transform;const te=v.attach.value,ie=(j=De(w))==null?void 0:j.$el;if(ie!==void 0){const K=ie.getBoundingClientRect();U.width=`${K.width}px`,U.height=`${K.height}px`,(te.bottom||te.top)&&!te.left&&!te.right&&(U.left="50%",U.transform="translate(-50%, 0)"),(te.left||te.right)&&!te.top&&!te.bottom&&(U.top="50%",U.transform="translate(0, -50%)")}Object.assign(f,U)},g=he(null),b=j=>{var U;const{viewer:te}=d;if(zn(j)&&(j=E(j)),!j){l.logger.error("Invalid drawingActionOption or drawingActionOption name");return}const ie=L(j.name);if(ie!==-1){if(_!==void 0){_.actionOpts.color=g.value||"";const K=_.cmpRef.value;(U=K.stop)==null||U.call(K),_.isActive=!1,h("activeEvt",{type:_.name,option:_,isActive:!1},te)}(_==null?void 0:_.name)===(j==null?void 0:j.name)?(_=void 0,n.value[ie].actionOpts.color=g.value||"red"):nt(()=>{n.value[ie].cmpRef.value.startNew(),g.value=n.value[ie].actionOpts.color,n.value[ie].actionOpts.color=e.activeColor,n.value[ie].isActive=!0,_=n.value[ie],h("activeEvt",{type:_.name,option:_,isActive:!0},te)})}},E=j=>n.value.find(U=>U.name===j),L=j=>n.value.findIndex(U=>U.name===j),P=j=>{j?V():(_&&b(_),$()),r.modelValue=j,h("fabUpdated",j)},T=()=>{n.value.forEach(U=>{var te;(te=U.cmpRef.value)==null||te.clear()}),_&&b(_);const{viewer:j}=d;h("clearEvt",{type:"clear",option:a},j)},F=()=>qo(l.getServices(),{get drawingFabInstance(){return i},get selectedDrawingActionInstance(){return _},get getWorldPosition(){return q},get drawingHandlerActive(){return G}}),N=({cesiumObject:j})=>{j._vcId=s};return Gr(Wr,F()),Object.assign(i.proxy,{clearAll:T,deactivate:$,activate:V,toggleAction:b,getFabRef:()=>w.value,getDrawingActionInstance:E,getDrawingActionInstances:()=>n.value,getSelectedDrawingActionInstance:()=>_}),{renderContent:()=>{if(p.value){const j=[],U=[];n.value.forEach(ie=>{j.push(R(hl,{ref:ie.actionRef,style:ie.actionStyle,class:ie.actionClass,...ie.actionOpts,onClick:()=>{b(ie)}},()=>R(xi,{...ie.actionOpts.tooltip},()=>R("strong",null,ie.tip)))),ie.cmp&&U.push(R(ie.cmp,{ref:ie.cmpRef,editable:e.editable,clampToGround:e.clampToGround,mode:e.mode,onDrawEvt:(K,Z)=>{h("drawEvt",K,Z)},onEditorEvt:(K,Z)=>{h("editorEvt",K,Z)},onMouseEvt:(K,Z)=>{h("mouseEvt",K,Z)},...ie.cmpOpts}))}),n.value.length&&j.push(R(hl,{style:{background:a.color,color:a.textColor},class:"vc-draw-button vc-draw-clear",...a,onClick:T},()=>R(xi,{...a.tooltip},()=>R("strong",null,a.tooltip.tip||c(`vc.${s}.clear.tip`)))));const te=[];return C.value&&te.push(R("div",{ref:y,class:"vc-drawings-container "+v.classes.value,style:f},t.slots.body!==void 0?t.slots.body(n.value):R(Zc,{ref:w,class:"vc-draw-button",style:{background:r.color,color:r.textColor},...r,"onUpdate:modelValue":P},{default:()=>j,tooltip:()=>R(xi,{...r.tooltip},()=>R("strong",null,r.tooltip.tip||(r.modelValue?c("vc.drawing.collapse"):c("vc.drawing.expand"))))}))),te.push(R(Oo,{ref:M,show:e.show,onReady:N},()=>U)),te}else return me("v-if")}}}const wU={...si,fabUpdated:e=>!0,clearEvt:(e,t)=>!0};var wd=de({name:"VcMeasurements",props:hd,emits:wU,setup(e,t){var i;const n=fe();n.cesiumClass="VcMeasurements";const{t:r}=ri(),a=Ve(Object.assign({},jt.clearActionOpts,e.clearActionOpts)),s=Ve(Object.assign({},jt.mainFabOpts,e.mainFabOpts)),l=Ve(Object.assign({},jt.fabActionOpts,e.fabActionOpts)),c=Ve(Object.assign({},jt.distanceActionOpts,P("distanceActionOpts"))),d=Ve(Qt(yt(jt.distanceMeasurementOpts),e.distanceMeasurementOpts)),h=Ve(Object.assign({},jt.componentDistanceActionOpts,P("componentDistanceActionOpts"))),p=Ve(Qt(yt(jt.componentDistanceMeasurementOpts),e.componentDistanceMeasurementOpts)),f=Ve(Object.assign({},jt.polylineActionOpts,P("polylineActionOpts"))),v=Ve(Qt(yt(jt.polylineMeasurementOpts),e.polylineMeasurementOpts)),y=Ve(Object.assign({},jt.horizontalActionOpts,P("horizontalActionOpts"))),w=Ve(Qt(yt(jt.horizontalMeasurementOpts),e.horizontalMeasurementOpts)),C=Ve(Object.assign({},jt.verticalActionOpts,P("verticalActionOpts"))),M=Ve(Qt(yt(jt.verticalMeasurementOpts),e.verticalMeasurementOpts)),S=Ve(Object.assign({},jt.heightActionOpts,P("heightActionOpts"))),_=Ve(Qt(yt(jt.heightMeasurementOpts),e.heightMeasurementOpts)),O=Ve(Object.assign({},jt.areaActionOpts,P("areaActionOpts"))),I=Ve(Qt(yt(jt.areaMeasurementOpts),e.areaMeasurementOpts)),A=Ve(Object.assign({},jt.pointActionOpts,P("pointActionOpts"))),V=Ve(Qt(yt(jt.pointMeasurementOpts),e.pointMeasurementOpts)),$=Ve(Object.assign({},jt.rectangleActionOpts,P("rectangleActionOpts"))),D=Ve(Qt(yt(jt.rectangleMeasurementOpts),e.rectangleMeasurementOpts)),G=Ve(Object.assign({},jt.regularActionOpts,P("regularActionOpts"))),q=Ve(Qt(yt(jt.regularMeasurementOpts),e.regularMeasurementOpts)),H=Ve(Object.assign({},jt.circleActionOpts,P("circleActionOpts"))),g=Ve(Qt(yt(jt.circleMeasurementOpts),e.circleMeasurementOpts)),b={};b.distanceActionOpts=c,b.distanceMeasurementOpts=d,b.componentDistanceActionOpts=h,b.componentDistanceMeasurementOpts=p,b.polylineActionOpts=f,b.polylineMeasurementOpts=v,b.horizontalActionOpts=y,b.horizontalMeasurementOpts=w,b.verticalActionOpts=C,b.verticalMeasurementOpts=M,b.heightActionOpts=S,b.heightMeasurementOpts=_,b.areaActionOpts=O,b.areaMeasurementOpts=I,b.pointActionOpts=A,b.pointMeasurementOpts=V,b.rectangleActionOpts=$,b.rectangleMeasurementOpts=D,b.regularActionOpts=G,b.regularMeasurementOpts=q,b.circleActionOpts=H,b.circleMeasurementOpts=g,b.clearActionOpts=a;const E=ge(()=>e.measurements.map(T=>({name:T,type:"measurement",actionStyle:{background:b[`${Li(T)}ActionOpts`].color,color:b[`${Li(T)}ActionOpts`].textColor},actionClass:`vc-measure-${T} vc-measure-button`,actionRef:he(null),actionOpts:b[`${Li(T)}ActionOpts`],cmp:L(T),cmpRef:he(null),cmpOpts:b[`${Li(T)}MeasurementOpts`],tip:b[`${Li(T)}ActionOpts`].tooltip.tip||r(`vc.measurement.${T}.tip`),isActive:!1})));function L(T){switch(T){case"distance":case"component-distance":return Gg;case"polyline":return Ug;case"horizontal":return Hg;case"vertical":return Wg;case"height":return qg;case"point":return Qg;case"area":return Jg;case"rectangle":return Xg;case"regular":case"circle":return Yg;default:return}}function P(T){return ju(jt[T],e[T])?l:Object.assign({},l,e[T])}return(i=Kg(e,t,n,E,s,a,"measurement"))==null?void 0:i.renderContent}});wd.install=e=>{e.component(wd.name,wd)};const qO=wd;var xU=qO;const ZO=qO,EU=Object.assign({},li,{icon:"vc-icons-drawing-point"}),PU=Object.assign({},li,{icon:"vc-icons-drawing-polyline"}),OU=Object.assign({},li,{icon:"vc-icons-drawing-polygon"}),MU=Object.assign({},li,{icon:"vc-icons-drawing-rectangle"}),SU=Object.assign({},li,{icon:"vc-icons-drawing-pin"}),TU=Object.assign({},cd,{pointOpts:Object.assign({},Po,{show:!1}),billboardOpts:mG,labelOpts:Object.assign({},ui,{pixelOffset:[0,-30],verticalOrigin:1}),showLabel:!0}),IU=Object.assign({},{}),AU=Object.assign({},li,{direction:"right",icon:"vc-icons-drawing-button",activeIcon:"vc-icons-drawing-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),QO=["pin","point","polyline","polygon","rectangle","regular","circle"],DU=e=>{let t=!0;return e.forEach(i=>{QO.includes(i)||(console.error(`VueCesium: unknown drawing type: ${i}`),t=!1)}),t},xd={...Dv,drawings:{type:Array,default:()=>QO,validator:DU},mainFabOpts:{type:Object,default:()=>AU},fabActionOpts:{type:Object,default:()=>IU},pinActionOpts:{type:Object,default:()=>SU},pinDrawingOpts:{type:Object,default:()=>TU},pointActionOpts:{type:Object,default:()=>EU},pointDrawingOpts:{type:Object,default:()=>cd},polylineActionOpts:{type:Object,default:()=>PU},polylineDrawingOpts:{type:Object,default:()=>gP},polygonActionOpts:{type:Object,default:()=>OU},polygonDrawingOpts:{type:Object,default:()=>dd},rectangleActionOpts:{type:Object,default:()=>MU},rectangleDrawingOpts:{type:Object,default:()=>Av},circleActionOpts:{type:Object,default:()=>bP},circleDrawingOpts:{type:Object,default:()=>vG},regularActionOpts:{type:Object,default:()=>yP},regularDrawingOpts:{type:Object,default:()=>gG}},Ii=Gn(xd);var ey=de({name:"VcDrawingPin",props:{...ji,billboardOpts:Object,labelOpts:Object,heightReference:Number,showLabel:Boolean},emits:si,setup(e,t){return Zg(e,t,"VcDrawingPin")}}),ty=de({name:"VcDrawingPoint",props:{...ji,heightReference:Number,labelOpts:Object,showLabel:Boolean},emits:si,setup(e,t){return Zg(e,t,"VcDrawingPoint")}}),iy=de({name:"VcDrawingPolyline",props:{...ji,polylineOpts:Object,primitiveOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean},emits:si,setup(e,t){return ns(e,t,"VcDrawingPolyline")}}),ny=de({name:"VcDrawingPolygon",props:{...ji,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,loop:Boolean,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,autoUpdateLabelPosition:Boolean},emits:si,setup(e,t){return ns(e,t,"VcDrawingPolygon")}}),Ed=de({name:"VcDrawingRegular",props:{...ji,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,clampToGround:Boolean,edge:Number,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:si,setup(e,t){return ro(e,t,"VcDrawingRegular")}}),ry=de({name:"VcDrawingRectangle",props:{...ji,polylineOpts:Object,primitiveOpts:Object,polygonOpts:Object,clampToGround:Boolean,showLabel:Boolean,showDistanceLabel:Boolean,showAngleLabel:Boolean,labelOpts:Object,labelsOpts:Object,loop:Boolean,autoUpdateLabelPosition:Boolean},emits:si,setup(e,t){return ro(e,t,"VcDrawingRectangle")}});const LU={...si,fabUpdated:e=>!0,clearEvt:(e,t)=>!0};var Pd=de({name:"VcDrawings",props:xd,emits:LU,setup(e,t){var i;const n=fe();n.cesiumClass="VcDrawings";const{t:r}=ri(),a={},s=Ve(Object.assign({},Ii.clearActionOpts,e.clearActionOpts)),l=Ve(Object.assign({},Ii.mainFabOpts,e.mainFabOpts)),c=Ve(Object.assign({},Ii.fabActionOpts,e.fabActionOpts)),d=Ve(Object.assign({},Ii.pointActionOpts,D("pointActionOpts"))),h=Ve(Qt(yt(Ii.pointDrawingOpts),e.pointDrawingOpts)),p=Ve(Object.assign({},Ii.polylineActionOpts,D("polylineActionOpts"))),f=Ve(Qt(yt(Ii.polylineDrawingOpts),e.polylineDrawingOpts)),v=Ve(Object.assign({},Ii.polygonActionOpts,D("polygonActionOpts"))),y=Ve(Qt(yt(Ii.polygonDrawingOpts),e.polygonDrawingOpts)),w=Ve(Object.assign({},Ii.rectangleActionOpts,D("rectangleActionOpts"))),C=Ve(Qt(yt(Ii.rectangleDrawingOpts),e.rectangleDrawingOpts)),M=Ve(Object.assign({},Ii.circleActionOpts,D("circleActionOpts"))),S=Ve(Qt(yt(Ii.circleDrawingOpts),e.circleDrawingOpts)),_=Ve(Object.assign({},Ii.regularActionOpts,D("regularActionOpts"))),O=Ve(Qt(yt(Ii.regularDrawingOpts),e.regularDrawingOpts)),I=Ve(Object.assign({},Ii.pinActionOpts,D("pinActionOpts"))),A=Ve(Qt(yt(Ii.pinDrawingOpts),e.pinDrawingOpts));a.pointActionOpts=d,a.pointDrawingOpts=h,a.polylineActionOpts=p,a.polylineDrawingOpts=f,a.polygonActionOpts=v,a.polygonDrawingOpts=y,a.rectangleActionOpts=w,a.rectangleDrawingOpts=C,a.circleActionOpts=M,a.circleDrawingOpts=S,a.regularActionOpts=_,a.regularDrawingOpts=O,a.pinActionOpts=I,a.pinDrawingOpts=A,a.clearActionOpts=s;const V=ge(()=>e.drawings.map(G=>({name:G,type:"drawing",actionStyle:{background:a[`${Li(G)}ActionOpts`].color,color:a[`${Li(G)}ActionOpts`].textColor},actionClass:`vc-draw-${G} vc-draw-button`,actionRef:he(null),actionOpts:a[`${Li(G)}ActionOpts`],cmp:$(G),cmpRef:he(null),cmpOpts:a[`${Li(G)}DrawingOpts`],tip:a[`${Li(G)}ActionOpts`].tooltip.tip||r(`vc.drawing.${Li(G)}.tip`),isActive:!1})));function $(G){switch(G){case"pin":return ey;case"point":return ty;case"polyline":return iy;case"polygon":return ny;case"rectangle":return C.regular?Ed:ry;case"circle":case"regular":return Ed;default:return}}function D(G){return ju(Ii[G],e[G])?c:Object.assign({},c,e[G])}return(i=Kg(e,t,n,V,l,s,"drawing"))==null?void 0:i.renderContent}});Pd.install=e=>{e.component(Pd.name,Pd)};const JO=Pd;var BU=JO;const XO=JO;class RU{constructor(t){const{Resource:i,defaultValue:n,Credit:r,Event:a}=Cesium;this._url=t.url;const s=i.createIfNeeded(this._url);s.appendForwardSlash(),this._ready=!1,this._resource=s,this._tileDiscardPolicy=t.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=t.minimumLevel||0,this._maximumLevel=t.maximumLevel||20,this._tilingScheme=t.tilingScheme||new Cesium.WebMercatorTilingScheme,this._rectangle=t.rectangle||this._tilingScheme.rectangle;let l=t.credit;typeof l=="string"&&(l=new r(l)),this._credit=l,this.enablePickFeatures=n(t.enablePickFeatures,!1),this._hasAlphaChannel=n(t.hasAlphaChannel,!0),this._errorEvent=new a,this._readyPromise=al(),this._ready=!0,this._readyPromise.resolve(!0),this._subdomains=t.subdomains||["01","02","03","04"],this._domain=t.domain||"webst",this._style=t.mapStyle||"6",this._lang=t.lang||"zh_cn",this._scl=t.scl||"1",this._ltype=t.ltype||"0"}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(t,i,n){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,i,n,r){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,FU.call(this,t,i,n,r))}pickFeatures(t,i,n,r,a){}}function FU(e,t,i,n){let r=this._url;const a=this._subdomains;return r=r.replace("{domain}",this._domain).replace("{s}",a[(e+t+i)%a.length]).replace("{lang}",this._lang).replace("{style}",this._style).replace("{scl}",this._scl).replace("{ltype}",this._ltype).replace("{x}",e).replace("{y}",t).replace("{z}",i),this._resource.getDerivedResource({url:r,request:n})}const oy={url:{type:String,default:"https://{domain}{s}.is.autonavi.com/appmaptile?lang={lang}&size=1&style={style}&scl={scl}&ltype={ltype}&x={x}&y={y}&z={z}"},subdomains:{type:Array,default:()=>["01","02","03","04"]},domain:{type:String,default:"webst"},lang:{type:String,default:"zh_cn"},mapStyle:{type:String,default:"6"},scl:{type:String,default:"1"},ltype:{type:String,default:"0"},...Ci,...Pn,...un,...Oi,...dr,...ta};var YO=de({name:"VcImageryProviderAmap",props:oy,emits:Wt,setup(e,t){const i=fe();i.cesiumClass="AMapImageryProvider";const n=Ht(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{Cesium.AMapImageryProvider=Cesium.AMapImageryProvider||RU,n.unwatchFns.length===0&&n.setPropsWatcher(!0);const r=n.transformProps(e);return new Cesium.AMapImageryProvider(r)},()=>{var r;return me(ye(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const ay={url:{type:[String,Object],default:"https://services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer"},...om,...Zs,usePreCachedTilesIfAvailable:{type:Boolean,default:!0},...am,...hc,...Oi,...dr,...pt,...Ci,...xr,...Er,...un};var KO=de({name:"VcImageryProviderArcgis",props:ay,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="ArcGisMapServerImageryProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});class Dr{constructor(t,i){isNaN(t)&&(t=isNaN(t)?0:t),zn(t)&&(t=parseFloat(t)),isNaN(i)&&(i=isNaN(i)?0:i),zn(i)&&(i=parseFloat(i)),this.lng=t,this.lat=i}equals(t){return t&&this.lat===t.lat&&this.lng===t.lng}}Dr.isInRange=function(e){return e&&e.lng<=180&&e.lng>=-180&&e.lat<=74&&e.lat>=-74};class eM{constructor(t,i){this.x=t||0,this.y=i||0}equals(t){return t&&t.x===this.x&&t.y===this.y}}const $U=6378137,tM=[1289059486e-2,836237787e-2,5591021,348198983e-2,167804312e-2,0],Od=[75,60,45,30,15,0],jU=[[1410526172116255e-23,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,173379812e-1],[-7435856389565537e-24,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,1026014486e-2],[-3030883460898826e-23,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,685681737e-2],[-1981981304930552e-23,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,448277706e-2],[309191371068437e-23,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,25551644e-1],[2890871144776878e-24,8983055095805407e-21,-3068298e-14,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],iM=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,6477955746671607e-7,-4082003173641316e-6,1077490566351142e-5,-1517187553151559e-5,1205306533862167e-5,-5124939663577472e-6,9133119359512032e-7,67.5],[.00337398766765,111320.7020202162,4481351045890365e-9,-2339375119931662e-8,7968221547186455e-8,-1159649932797253e-7,9723671115602145e-8,-4366194633752821e-8,8477230501135234e-9,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837749470245e-9,992013.7397791013,-122195221711287e-8,1340652697009075e-9,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758690035394e-9,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]];class NU{getDistanceByMC(t,i){if(!t||!i||(t=this.inverse(t),!t))return 0;const n=So(t.lng),r=So(t.lat);if(i=this.inverse(i),!i)return 0;const a=So(i.lng),s=So(i.lat);return rM(n,a,r,s)}getDistanceByLL(t,i){if(!t||!i)return 0;t.lng=sy(t.lng,-180,180),t.lat=ly(t.lat,-74,74),i.lng=sy(i.lng,-180,180),i.lat=ly(i.lat,-74,74);const n=So(t.lng),r=So(t.lat),a=So(i.lng),s=So(i.lat);return rM(n,a,r,s)}inverse(t){let i;const n=new Dr(Math.abs(t.lng),Math.abs(t.lat));for(let a=0;a<tM.length;a++)if(n.lat>=tM[a]){i=jU[a];break}const r=nM(t,i);return new Dr(r==null?void 0:r.lng,r==null?void 0:r.lat)}forward(t){let i;t.lng=sy(t.lng,-180,180),t.lat=ly(t.lat,-74,74);const n=new Dr(t.lng,t.lat);for(let a=0;a<Od.length;a++)if(n.lat>=Od[a]){i=iM[a];break}if(!i){for(let a=Od.length-1;a>=0;a--)if(n.lat<=-Od[a]){i=iM[a];break}}const r=nM(t,i);return new Dr(r==null?void 0:r.lng,r==null?void 0:r.lat)}lngLatToMercator(t,i){return this.forward(t)}lngLatToPoint(t){const i=this.forward(t);return new eM(i.lng,i.lat)}mercatorToLngLat(t,i){return this.inverse(t)}pointToLngLat(t){const i=new Dr(t.x,t.y);return this.inverse(i)}pointToPixel(t,i,n,r,a){if(!t)return;t=this.lngLatToMercator(t,a),n=this.lngLatToMercator(n);const s=this.getZoomUnits(i),l=Math.round((t.lng-n.lng)/s+r.width/2),c=Math.round((n.lat-t.lat)/s+r.height/2);return new eM(l,c)}pixelToPoint(t,i,n,r,a){if(!t)return;const s=this.getZoomUnits(i),l=n.lng+s*(t.x-r.width/2),c=n.lat-s*(t.y-r.height/2),d=new Dr(l,c);return this.mercatorToLngLat(d,a)}getZoomUnits(t){return Math.pow(2,18-t)}}function nM(e,t){if(!e||!t)return;let i=t[0]+t[1]*Math.abs(e.lng);const n=Math.abs(e.lat)/t[9];let r=t[2]+t[3]*n+t[4]*n*n+t[5]*n*n*n+t[6]*n*n*n*n+t[7]*n*n*n*n*n+t[8]*n*n*n*n*n*n;return i*=e.lng<0?-1:1,r*=e.lat<0?-1:1,new Dr(i,r)}function sy(e,t,i){for(;e>i;)e-=i-t;for(;e<t;)e+=i-t;return e}function ly(e,t,i){return t!=null&&(e=Math.max(e,t)),i!=null&&(e=Math.min(e,i)),e}function rM(e,t,i,n){return $U*Math.acos(Math.sin(i)*Math.sin(n)+Math.cos(i)*Math.cos(n)*Math.cos(t-e))}function So(e){return Math.PI*e/180}class kU{constructor(t){const{defaultValue:i,Ellipsoid:n,WebMercatorProjection:r,Cartesian2:a,Cartographic:s,Math:l,Rectangle:c}=Cesium;t=t||{},this._ellipsoid=i(t.ellipsoid,n.WGS84),this._projection=new r(this._ellipsoid);const d=new NU;this._projection.project=function(f,v){return v=v||{},t.projectionTransforms&&t.projectionTransforms.from!==t.projectionTransforms.to&&(t.projectionTransforms.to.toUpperCase()==="WGS84"?(v=gx(l.toDegrees(f.longitude),l.toDegrees(f.latitude)),v=Gm(v[0],v[1])):v=Gm(l.toDegrees(f.longitude),l.toDegrees(f.latitude))),v[0]=Math.min(v[0],180),v[0]=Math.max(v[0],-180),v[1]=Math.min(v[1],74),v[1]=Math.max(v[1],-74),v=d.lngLatToPoint(new Dr(v[0],v[1])),new a(v.x,v.y)},this._projection.unproject=function(f,v){return v=v||{},v=d.mercatorToLngLat(new Dr(f.x,f.y)),v[0]=(v[0]+180)%360-180,t.projectionTransforms&&t.projectionTransforms.from!==t.projectionTransforms.to&&(t.projectionTransforms.to.toUpperCase()==="WGS84"?(v=zm(v.lng,v.lat),v=Um(v[0],v[1])):v=zm(v.lng,v.lat)),new s(Cesium.Math.toRadians(v[0]),Cesium.Math.toRadians(v[1]))},this._rectangleSouthwestInMeters=new a(-2003772637e-2,-1247410417e-2),this._rectangleNortheastInMeters=new a(2003772637e-2,1247410417e-2);const h=this._projection.unproject(this._rectangleSouthwestInMeters),p=this._projection.unproject(this._rectangleNortheastInMeters);this._rectangle=new c(h.longitude,h.latitude,p.longitude,p.latitude),this.resolutions=[];for(let f=0;f<19;f++)this.resolutions[f]=256*Math.pow(2,18-f)}getNumberOfXTilesAtLevel(t){return 1<<t}getNumberOfYTilesAtLevel(t){return 1<<t}rectangleToNativeRectangle(t,i){const{defined:n,Rectangle:r}=Cesium,a=this._projection,s=a.project(r.southwest(t)),l=a.project(r.northeast(t));return n(i)?(i.west=s.x,i.south=s.y,i.east=l.x,i.north=l.y,i):new r(s.x,s.y,l.x,l.y)}tileXYToNativeRectangle(t,i,n,r){const{defined:a,Rectangle:s}=Cesium,l=this.resolutions[n],c=t*l,d=(t+1)*l,h=((i=-i)+1)*l,p=i*l;return a(r)?(r.west=c,r.south=p,r.east=d,r.north=h,r):new s(c,p,d,h)}tileXYToRectangle(t,i,n,r){const{Cartesian2:a}=Cesium,s=this.tileXYToNativeRectangle(t,i,n,r),l=this._projection,c=l.unproject(new a(s.west,s.south)),d=l.unproject(new a(s.east,s.north));return s.west=c.longitude,s.south=c.latitude,s.east=d.longitude,s.north=d.latitude,s}positionToTileXY(t,i,n){const{Rectangle:r,defined:a,Cartesian2:s}=Cesium,l=this._rectangle;if(!r.contains(l,t))return;const c=this._projection.project(t);if(!a(c))return;const d=this.resolutions[i],h=Math.floor(c.x/d),p=-Math.floor(c.y/d);return a(n)?(n.x=h,n.y=p,n):new s(h,p)}get ellipsoid(){return this._ellipsoid}get rectangle(){return this._rectangle}get projection(){return this._projection}}class VU{constructor(t){const{Resource:i,defaultValue:n,Credit:r,Event:a}=Cesium;this._subdomains=n(t.subdomains,["0","1","2","3"]),t.url?this._url=t.url:t.mapStyle==="img"?this._url="//maponline{s}.bdimg.com/starpic/u=x={x};y={y};z={z};v=009;type=sate&qt=satepc&app=webearth2&udt={udt}&fm=46&v=009":t.mapStyle==="vec"?this._url="//maponline{s}.bdimg.com/tile/?qt={qt}&x={x}&y={y}&z={z}&styles={styles}&scaler={scale}&udt={udt}&from=jsapi3_0&showtext={showtext}":t.mapStyle==="traffic"?this._url="https://its.map.baidu.com/traffic/TrafficTileService?time={time}&label={labelStyle}&v=016&level={z}&x={x}&y={y}&scaler={scale}":this._url="//api.map.baidu.com/customimage/tile?&x={x}&y={y}&z={z}&udt={udt}&scale={scale}&ak={ak}&customid={mapStyle}";const s=i.createIfNeeded(this._url);s.appendForwardSlash(),this._ready=!1,this._resource=s,this._tileDiscardPolicy=t.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=t.minimumLevel||0,this._maximumLevel=t.maximumLevel||18,this._tilingScheme=new kU(t),this._rectangle=n(t.rectangle,this._tilingScheme.rectangle);let l=t.credit;typeof l=="string"&&(l=new r(l)),this._credit=l,this.enablePickFeatures=n(t.enablePickFeatures,!1),this._hasAlphaChannel=n(t.hasAlphaChannel,!0),this._errorEvent=new a,this._ready=!0,this._labelStyle=t.labelStyle||"web2D",this._showtext=t.showtext||"1",this._qt=t.qt,this._styles=t.styles,this._scale=t.scale,this._ak=t.ak,this._mapStyle=t.mapStyle}get url(){return this._resource.url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(t,i,n){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,i,n,r){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,zU.call(this,t,i,n,r))}pickFeatures(t,i,n,r,a){}}function zU(e,t,i,n){let r=this._url;const a=this._subdomains;return r=r.replace("{s}",a[(e+t+i)%a.length]).replace("{qt}",this._qt).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{styles}",this._styles).replace("{scale}",this._scale).replace("{mapStyle}",this._mapStyle).replace("{labelStyle}",this._labelStyle).replace("{ak}",this._ak).replace("{time}",String(new Date().getTime())).replace("{udt}",String(new Date().getTime())).replace("{showtext}",this._showtext),this._resource.getDerivedResource({url:r,request:n})}const uy={...Hn,...Oi,...pt,...Zs,...Ci,...Pn,...un,projectionTransforms:{type:[Boolean,Object],default:()=>({from:"BD09",to:"WGS84"})},scale:{type:String,default:"2"},ak:{type:String,default:"5ieMMexWmzB9jivTq6oCRX9j"},subdomains:{type:Array,default:()=>["0","1","2","3"]},mapStyle:{type:String,default:"vec"},qt:{type:String,default:"vtile"},styles:{type:String,default:"pl"},showtext:{type:String,default:"1"}};var oM=de({name:"VcImageryProviderBaidu",props:uy,emits:Wt,setup(e,t){const i=fe();i.cesiumClass="BaiduMapImageryProvider";const n=Ht(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{Cesium.BaiduMapImageryProvider=Cesium.BaiduMapImageryProvider||VU,n.unwatchFns.length===0&&n.setPropsWatcher(!0);const r=n.transformProps(e);return new Cesium.BaiduMapImageryProvider(r)},()=>{var r;return me(ye(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const cy={url:{type:[String,Object],default:"https://dev.virtualearth.net"},bmKey:String,tileProtocol:String,mapStyle:{type:String,default:"Aerial"},culture:{type:String,default:""},...pt,...Zs};var aM=de({name:"VcImageryProviderBing",props:cy,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="BingMapsImageryProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const dy={...Hn,...pt,...Zs,...Ci,metadata:Object};var sM=de({name:"VcImageryProviderGoogle",props:dy,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="GoogleEarthEnterpriseImageryProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const hy={...dr,...pt,cells:{type:Number,default:8},color:{type:[String,Object,Array],default:()=>[1,1,1,.4],watcherOptions:{cesiumObjectBuilder:Je}},...rx,glowWidth:{type:Number,default:6},backgroundColor:{type:[String,Array,Object],default:()=>[0,.5,0,.2],watcherOptions:{cesiumObjectBuilder:Je}},...xr,...Er,canvasSize:{type:Number,default:256}};var lM=de({name:"VcImageryProviderGrid",props:hy,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="GridImageryProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const uM={};var cM=de({name:"VcImageryProviderIon",props:{assetId:Number,...lm,server:[String,Object]},emits:Wt,setup(e,t){const i=fe();i.cesiumClass="IonImageryProvider";const n=Ht(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{const r=n.transformProps(e);return ii(Cesium.VERSION,"1.104")&&typeof Cesium[i.cesiumClass].fromAssetId=="function"?await Cesium.IonImageryProvider.fromAssetId(r.assetId,r):new Cesium.IonImageryProvider(r)},()=>{var r;return me(ye(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const py={url:{type:[String,Object],default:"https://api.mapbox.com/styles/v1/"},username:{type:String,default:"mapbox"},styleId:String,...lm,tilesize:{type:Number,default:512},scaleFactor:Boolean,...pt,...Pn,...un,...Oi,...Ci};var dM=de({name:"VcImageryProviderMapbox",props:py,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="MapboxStyleImageryProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const my={url:{type:String,default:"https://a.tile.openstreetmap.org"},...sm,...Oi,...Pn,...un,...pt,credit:{type:[String,Object],default:"MapQuest, Open Street Map and contributors, CC-BY-SA"}};var hM=de({name:"VcImageryProviderOsm",props:my,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="OpenStreetMapImageryProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const fy={...Hn,...Oi,...Ci,...pt,...xr,...Er};var pM=de({name:"VcImageryProviderSingletile",props:fy,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="SingleTileImageryProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Il={NONE:0,STORING:1,STORED:2,FAILED:3};class GU{constructor(t){if(!Cesium.defined(t.name))throw new Cesium.DeveloperError("options.name is required.");const i=window.indexedDB.open(this.dbname);this.layer=t.layer||null,this.storageType=t.storageType||"arrayBuffer",this.creatingTable=!1,this.cachestatus={},this.dbname=t.name;const n=this;return new Promise((r,a)=>{i.onsuccess=s=>{n.db=s.target.result,n.version=n.db.version,n.cachestatus=n.cachestatus||{},r(n)},i.onupgradeneeded=s=>{n.db=s.target.result,n.version=n.db.version,r(n)},i.onerror=s=>{n.db=null,a("create database fail, error code : "+s.target.errorcode)}})}checkObjectStoreExist(t){return Cesium.defined(this.db)?this.db.objectStoreNames.contains(t):!1}createObjectStore(t){return new Promise((i,n)=>{if(this.creatingTable)n(!1);else{if(this.db.objectStoreNames.contains(t)){n(!1);return}this.creatingTable=!0;const r=parseInt(this.db.version);this.db.close();const a=this,s=window.indexedDB.open(this.dbname,r+1);s.onupgradeneeded=l=>{const c=l.target.result;a.db=c;const d=c.createObjectStore(t,{keyPath:"id"});if(Cesium.defined(d)){d.createIndex("value","value",{unique:!1}),a.creatingTable=!1,a.cachestatus=a.cachestatus||{},a.cachestatus[t]={},a.db.close();const h=window.indexedDB.open(a.dbname);h.onsuccess=p=>{a.db=p.target.result,i(!0)}}else a.creatingTable=!1,i(!1)},s.onsuccess=l=>{l.target.result.close(),i(!0)},s.onerror=l=>{a.creatingTable=!1,n(!1)}}})}putElementInDB(t,i,n){return new Promise((r,a)=>{if(!Cesium.defined(this.db)){a(!1);return}const{cachestatus:s,db:l}=this;if(Cesium.defined(s[t])&&Cesium.defined(s[t][i]&&(s[t][i]===Il.STORING||s[t][i]===Il.STORED))){r(!1);return}if(l.objectStoreNames.contains(t)){s[t]=s[t]||{};try{const c=l.transaction([t],"readwrite").objectStore(t).add({id:i,value:n});s[t][i]=Il.STORING,c.onsuccess=d=>{s[t][i]=Il.STORED,r(!0)},c.onerror=d=>{s[t][i]=Il.FAILED,r(!1)}}catch(c){a(null);return}}else this.createObjectStore(t).then(()=>{const c=l.transaction([t],"readwrite").objectStore(t).add({id:i,value:n});c.onsuccess=function(d){r(!0)},c.onerror=function(d){a(!1)}},()=>{a(!1)})})}getElementFromDB(t,i){return new Promise((n,r)=>{const{db:a}=this;if(!Cesium.defined(a)||!a.objectStoreNames.contains(t))return null;try{const s=a.transaction([t]).objectStore(t).get(i);s.onsuccess=l=>Cesium.defined(l.target.result)?n(l.target.result.value):r(null),s.onerror=l=>{r(null)}}catch(s){r(null)}})}updateElementInDB(t,i,n){return new Promise((r,a)=>{const{db:s}=this;if(!Cesium.defined(s)){r(!1);return}if(!s.objectStoreNames.contains(t)){r(!1);return}try{const l=s.transaction([t],"readwrite").objectStore(t).put({id:i,value:n});l.onsuccess=()=>{r(!0)},l.onerror=()=>{r(!1)}}catch(l){r(!1)}})}removeElementFromDB(t,i){return new Promise((n,r)=>{const{db:a}=this;if(!Cesium.defined(a)){n(!1);return}if(!a.objectStoreNames.contains(t)){n(!1);return}try{const s=a.transaction([t],"readwrite").objectStore(t).delete(i);s.onsuccess=()=>{n(!0)},s.onerror=()=>{n(!1)}}catch(s){n(!1)}})}clear(t){return new Promise((i,n)=>{const{db:r}=this;if(!Cesium.defined(r)){i(!1);return}if(!r.objectStoreNames.contains(t)){i(!1);return}try{const a=r.transaction([t],"readwrite").objectStore(t).clear();a.onsuccess=()=>{i(!0)},a.onerror=()=>{i(!1)}}catch(a){i(!1)}})}}class UU{constructor(t){const{appendForwardSlash:i,Credit:n,defaultValue:r,defined:a,DeveloperError:s,Event:l,Resource:c,Math:d}=Cesium;t=r(t,{});const{url:h}=t;if(!a(h))throw new s("options.url is required.");const p=h.substring(0,h.indexOf("datas"));this.tablename=h.substring(0,h.indexOf("datas/")+6,h.length);const f=this;new GU({name:p+this.tablename}).then(w=>{f._indexedDBScheduler=w}),this._indexedDBSetting={isOpen:!1,clear:()=>{f._indexedDBScheduler.clear(f.tablename)}},this.isSci=!1,this.isTileMap=!1;const v=i(h);if(v.indexOf("rest/maps")>-1)this.isTileMap=!0,this.layersID=t.layersID;else{if(!(v.indexOf("rest/realspace")>-1))throw new s("The url type is not supported!");this.isSci=!0,this.layersID=void 0}this._url=v,this._resource=c.createIfNeeded(v),this._transparent=r(t.transparent,!0),this._name=t.name||"",this._urlTemplate=void 0,this._errorEvent=new l,this._fileExtension="png",this._tileWidth=256,this._tileHeight=256,this._minimumLevel=r(t.minimumLevel,0),this._maximumLevel=t.maximumLevel,this._rectangle=void 0,this._tilingScheme=void 0,this._tileDiscardPolicy=t.tileDiscardPolicy,this._fRatio=r(t.ratio,d.DEGREES_PER_RADIAN/6378137),this._scales=[],this._coordUnit="DEGREE";let y=r(t.credit,new n("MapQuest, SuperMap iServer Imagery"));typeof y=="string"&&(y=new n(y)),this._credit=y,this._ready=!1,this._readyPromise=al(),this._options=t}get url(){return this._url}get name(){return this._name}set name(t){this._name=t}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this._ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this._ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get credit(){return this._credit}get hasAlphaChannel(){return!0}get readyPromise(){return this._readyPromise.promise}get ratio(){return this._fRatio}set ratio(t){this._fRatio=t}get tileDiscardPolicy(){return this._tileDiscardPolicy}getTileCredits(t,i,n){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,i,n,r){const{defined:a,DeveloperError:s,ImageryProvider:l}=Cesium;if(!this.ready)throw new s("requestImage must not be called before the imagery provider is ready.");const c=WU.call(this,t,i,n),d=this._resource.getDerivedResource({url:c,request:r}),h=this;if(this._indexedDBSetting.isOpen){if(a(this._indexedDBScheduler)){const p=this._indexedDBScheduler.getElementFromDB(this.tablename,c);try{return p.then(f=>{if(a(f)){const v=new Image;return v.src=f,v}return l.loadImage(h,d)})}catch(f){return l.loadImage(h,d)}}}else return l.loadImage(this,d)}pickFeatures(t,i,n,r,a){}async init(){await qU.call(this)}}let mM={};const vy=["1.690163571602655E-9","3.3803271432053056E-9","6.760654286410611E-9","1.3521308572821242E-8","2.7042617145642484E-8","5.408523429128511E-8","1.0817046858256998E-7","2.1634093716513974E-7","4.3268187433028044E-7","8.653637486605571E-7","1.7307274973211203E-6","3.4614549946422405E-6","6.9229099892844565E-6","1.3845819978568952E-5","2.7691639957137904E-5","5.53832799142758E-5","1.107665598285516E-4","2.215331196571032E-4","4.430662393142064E-4","8.861324786284128E-4","1.772264957256826E-3","3.544529914513652E-3"],HU=[1690163571602655e-24,33803271432053056e-25,6760654286410611e-24,13521308572821242e-24,27042617145642484e-24,5408523429128511e-23,10817046858256998e-23,21634093716513974e-23,43268187433028044e-23,8653637486605571e-22,17307274973211203e-22,34614549946422405e-22,69229099892844565e-22,13845819978568952e-21,27691639957137904e-21,553832799142758e-19,.0001107665598285516,.0002215331196571032,.0004430662393142064,.0008861324786284128,.001772264957256826,.003544529914513652];function WU(e,t,i){let n;if(this.isTileMap){if(this._coordUnit==="DEGREE"){const r=vy[i+1]||vy[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",r)}else if(this._coordUnit==="METER"){const r=vy[i];n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{scale}",r)}}else n=this._urlTemplate.replace("{x}",e).replace("{y}",t).replace("{level}",i).replace("{fileExtension}",this._fileExtension);return n}async function qU(){const{Resource:e}=Cesium;if(this.isTileMap)try{const t=await e.fetchJsonp({url:this._options.url+".jsonp",queryParameters:{f:"json"}});YU.call(this,t)}catch(t){vM.call(this)}else try{const t=await e.fetchText({url:this.url+"config"});QU.call(this,t)}catch(t){vM.call(this)}}function ZU(e){for(let t=HU.length;t--;)if(e[t]<=e)return t}function QU(e){const t=JU.call(this,e),{defaultValue:i,defined:n,GeographicTilingScheme:r,Math:a,Rectangle:s}=Cesium;this._fileExtension=i(t.fileExtentName,"png"),this._tileWidth=i(t.imageSizeWidth,256),this._tileHeight=i(t.imageSizeHeight,256);const l=t.levels,c=l.length;if(this._minimumLevel=i(l[0],0),this._maximumLevel=i(l[c-1],c-1),n(this._tilingScheme)||(this._tilingScheme=new r({ellipsoid:this._options.ellipsoid})),!n(this._rectangle)&&t.left&&t.right&&t.top&&t.bottom){const f=a.toRadians(t.left),v=a.toRadians(t.right),y=a.toRadians(t.bottom),w=a.toRadians(t.top);this._rectangle=new s(f,y,v,w)}const d=this._tilingScheme;this._rectangle.west<d.rectangle.west&&(this._rectangle.west=d.rectangle.west),this._rectangle.east>d.rectangle.east&&(this._rectangle.east=d.rectangle.east),this._rectangle.south<d.rectangle.south&&(this._rectangle.south=d.rectangle.south),this._rectangle.north>d.rectangle.north&&(this._rectangle.north=d.rectangle.north);const h=d.positionToTileXY(s.southwest(this._rectangle),this._minimumLevel),p=d.positionToTileXY(s.northeast(this._rectangle),this._minimumLevel);(window.Math.abs(p.x-h.x)+1)*(window.Math.abs(p.y-h.y)+1)>4&&(this._minimumLevel=0),this._tilingScheme=d,this._urlTemplate=this._url+"data/index/{y}/{x}.{fileExtension}?level={level}",this._ready=!0,this._readyPromise.resolve(!0)}function JU(e){e=new DOMParser().parseFromString(e,"application/xml");const t="http://www.supermap.com/SuperMapCache/sci3d",i=e.childNodes[0],n=Md(i,"Levels",t),r=XU(n,"Level",t)||[],a=[];for(let w=0;w<r.length;w++)a.push(parseInt(r[w].textContent,10));const s=Md(i,"Bounds",t),l=rs(s,"Left",t),c=rs(s,"Right",t),d=rs(s,"Top",t),h=rs(s,"Bottom",t),p=fM(i,"FileExtentName",t),f=rs(i,"CellWidth",t),v=rs(i,"CellHeight",t),y=fM(i,"CacheName",t);return this._name=y||"",{left:l,right:c,top:d,bottom:h,fileExtentName:p,levels:a,imageSizeWidth:f,imageSizeHeight:v}}function fM(e,t,i){const n=Md(e,t,i);return Cesium.defined(n)?n.textContent.trim():void 0}function rs(e,t,i){const n=Md(e,t,i);if(Cesium.defined(n)){const r=parseFloat(n.textContent);return isNaN(r)?void 0:r}}function Md(e,t,i){if(Cesium.defined(e)){const n=e.childNodes,r=n.length;for(let a=0;a<r;a++){const s=n[a];if(s.localName===t&&i.indexOf(s.namespaceURI)!==-1)return s}}}function XU(e,t,i){if(Cesium.defined(e)){const n=[],r=e.getElementsByTagNameNS("*",t),a=r.length;for(let s=0;s<a;s++){const l=r[s];l.localName===t&&i.indexOf(l.namespaceURI)!==-1&&n.push(l)}return n}}function YU(e){const{Cartesian3:t,defaultValue:i,defined:n,GeographicTilingScheme:r,Math:a,Rectangle:s,WebMercatorTilingScheme:l}=Cesium,c=e.prjCoordSys.coordUnit;this._coordUnit=c;const d=e.bounds,h=e.visibleScales;if(n(h)&&h.length>1&&n(this._maximumLevel)){const p=h[h.length-1];this._maximumLevel=ZU(p)}if(c==="DEGREE")this._tilingScheme=new r,d.left=a.clamp(d.left,-180,180),d.bottom=a.clamp(d.bottom,-90,90),d.right=a.clamp(d.right,-180,180),d.top=a.clamp(d.top,-90,90),this._rectangle=s.fromDegrees(d.left,d.bottom,d.right,d.top),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-180,"y":90}';else{const p=new t(d.left,d.bottom,0);p.x=Math.max(-20037508342789244e-9,p.x),p.y=Math.max(-20037508342789244e-9,p.y);const f=new t(d.right,d.top,0);f.x=Math.min(20037508342789244e-9,f.x),f.y=Math.min(20037508342789244e-9,f.y),this._tilingScheme=new l;const v=this._tilingScheme.projection.unproject(p),y=this._tilingScheme.projection.unproject(f);this._rectangle=new s(v.longitude,v.latitude,y.longitude,y.latitude),this._urlTemplate=this._url+'tileImage.png?transparent={transparent}&cacheEnabled=true&width=256&height=256&x={x}&y={y}&scale={scale}&redirect=false&overlapDisplayed=false&origin={"x":-20037508.342789248 ,"y":20037508.342789095}'}this._urlTemplate=this._urlTemplate.replace("{transparent}",this._transparent),this.layersID&&(this._urlTemplate=this._urlTemplate+"&layersID="+this.layersID),this._rectangle||(this._rectangle=i(this._options.rectangle,this._tilingScheme.rectangle)),this._ready=!0,this._readyPromise.resolve(!0)}function vM(){const{TileProviderError:e,RuntimeError:t}=Cesium,i="An error occurred while accessing "+this._url+".";mM=e.reportError(mM,this,this._errorEvent,i,0,0,0,new Error(i)),this._readyPromise.reject(new t(i))}const gy={url:String,...Pn,...un,name:String,transparent:{type:Boolean,default:!0},credit:{type:[String,Object],default:"MapQuest, SuperMap iServer Imagery"},...ta};var gM=de({name:"VcImageryProviderSupermap",props:gy,emits:Wt,setup(e,t){const i=fe();i.cesiumClass="SuperMapImageryProvider";const n=Ht(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{Cesium.SuperMapImageryProvider=Cesium.SuperMapImageryProvider||UU,n.unwatchFns.length===0&&n.setPropsWatcher(!0);const r=n.transformProps(e),a=new Cesium.SuperMapImageryProvider(r);return Cesium.SuperMapVersion||await a.init(),a},()=>{var r;return me(ye(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const yM={img:"//p{s}.map.gtimg.com/sateTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",terrain:"//p{s}.map.gtimg.com/demTiles/{z}/{sx}/{sy}/{x}_{reverseY}.jpg&scene=0",vector:"//rt{s}.map.gtimg.com/tile?z={z}&x={x}&y={reverseY}&type=vector&styleid={style}&scene=0"};class KU{constructor(t){const{Resource:i,defaultValue:n,Credit:r,Event:a}=Cesium;this._subdomains=t.subdomains||["1","2","3"],this._url=t.url||[t.protocol||"",yM[t.mapStyle]||yM.vector].join("");const s=i.createIfNeeded(this._url);s.appendForwardSlash(),this._ready=!1,this._resource=s,this._tileDiscardPolicy=t.tileDiscardPolicy,this._tileWidth=256,this._tileHeight=256,this._minimumLevel=t.minimumLevel||0,this._maximumLevel=t.maximumLevel||20,this._tilingScheme=new Cesium.WebMercatorTilingScheme,this._rectangle=n(t.rectangle,this._tilingScheme.rectangle);let l=t.credit;typeof l=="string"&&(l=new r(l)),this._credit=l,this.enablePickFeatures=n(t.enablePickFeatures,!1),this._hasAlphaChannel=n(t.hasAlphaChannel,!0),this._errorEvent=new a,this._readyPromise=al(),this._ready=!0,this._readyPromise.resolve(!0),this._style=t.styleId}get url(){return this._resource._url}get proxy(){return this._resource.proxy}get tileWidth(){if(!this._ready)throw new Cesium.DeveloperError("tileWidth must not be called before the imagery provider is ready.");return this._tileWidth}get tileHeight(){if(!this._ready)throw new Cesium.DeveloperError("tileHeight must not be called before the imagery provider is ready.");return this._tileHeight}get maximumLevel(){if(!this._ready)throw new Cesium.DeveloperError("maximumLevel must not be called before the imagery provider is ready.");return this._maximumLevel}get minimumLevel(){if(!this.ready)throw new Cesium.DeveloperError("minimumLevel must not be called before the imagery provider is ready.");return this._minimumLevel}get tilingScheme(){if(!this._ready)throw new Cesium.DeveloperError("tilingScheme must not be called before the imagery provider is ready.");return this._tilingScheme}get rectangle(){if(!this.ready)throw new Cesium.DeveloperError("rectangle must not be called before the imagery provider is ready.");return this._rectangle}get tileDiscardPolicy(){if(!this.ready)throw new Cesium.DeveloperError("tileDiscardPolicy must not be called before the imagery provider is ready.");return this._tileDiscardPolicy}get errorEvent(){return this._errorEvent}get ready(){return this._ready}get readyPromise(){return this._readyPromise.promise}get credit(){if(!this.ready)throw new Cesium.DeveloperError("credit must not be called before the imagery provider is ready.");return this._credit}get hasAlphaChannel(){if(!this.ready)throw new Cesium.DeveloperError("hasAlphaChannel must not be called before the imagery provider is ready.");return this._hasAlphaChannel}getTileCredits(t,i,n){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,i,n,r){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");return Cesium.ImageryProvider.loadImage(this,eH.call(this,t,i,n,r))}pickFeatures(t,i,n,r,a){}}function eH(e,t,i,n){let r=this._url;const a=this._subdomains,s=this.tilingScheme.getNumberOfYTilesAtLevel(i)-t-1;return r=r.replace("{s}",a[(e+t+i)%a.length]).replace("{style}",this._style).replace("{x}",e).replace("{y}",-t).replace("{z}",i).replace("{sx}",e>>4).replace("{sy}",(1<<i)-t>>4).replace("{reverseY}",s),this._resource.getDerivedResource({url:r,request:n})}const yy={...Hn,subdomains:{type:Array,default:()=>["1","2","3"]},mapStyle:{type:String,default:"vector"},styleId:{type:String,default:"1"},protocol:String,...Ci,...Pn,...un,...Oi,...dr,...ta};var bM=de({name:"VcImageryProviderTencent",props:yy,emits:Wt,setup(e,t){const i=fe();i.cesiumClass="TencentImageryProvider";const n=Ht(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{Cesium.TencentImageryProvider=Cesium.TencentImageryProvider||KU,n.unwatchFns.length===0&&n.setPropsWatcher(!0);const r=n.transformProps(e);return new Cesium.TencentImageryProvider(r)},()=>{var r;return me(ye(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const Ni={IMG_W:"img_w",IMG_C:"img_c",CIA_W:"cia_w",CIA_C:"cia_c",VEC_W:"vec_w",VEC_C:"vec_c",TER_W:"ter_w",TER_C:"ter_c",CVA_W:"cva_w",CVA_C:"cva_c",CTA_W:"cta_w",CTA_C:"cta_c",EIA_W:"eia_w",EIA_C:"eia_c",EVA_W:"eva_w",EVA_C:"eva_c",IBO_C:"ibo_c",IBO_W:"ibo_w"};var by={exports:{}},Al={exports:{}};/*! https://mths.be/punycode v1.4.0 by @mathias */Al.exports;var CM;function tH(){return CM||(CM=1,function(e,t){(function(i){var n=t&&!t.nodeType&&t,r=e&&!e.nodeType&&e,a=typeof En=="object"&&En;(a.global===a||a.window===a||a.self===a)&&(i=a);var s,l=2147483647,c=36,d=1,h=26,p=38,f=700,v=72,y=128,w="-",C=/^xn--/,M=/[^\x20-\x7E]/,S=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=c-d,I=Math.floor,A=String.fromCharCode,V;function $(N){throw new RangeError(_[N])}function D(N,j){for(var U=N.length,te=[];U--;)te[U]=j(N[U]);return te}function G(N,j){var U=N.split("@"),te="";U.length>1&&(te=U[0]+"@",N=U[1]),N=N.replace(S,".");var ie=N.split("."),K=D(ie,j).join(".");return te+K}function q(N){for(var j=[],U=0,te=N.length,ie,K;U<te;)ie=N.charCodeAt(U++),ie>=55296&&ie<=56319&&U<te?(K=N.charCodeAt(U++),(K&64512)==56320?j.push(((ie&1023)<<10)+(K&1023)+65536):(j.push(ie),U--)):j.push(ie);return j}function H(N){return D(N,function(j){var U="";return j>65535&&(j-=65536,U+=A(j>>>10&1023|55296),j=56320|j&1023),U+=A(j),U}).join("")}function g(N){return N-48<10?N-22:N-65<26?N-65:N-97<26?N-97:c}function b(N,j){return N+22+75*(N<26)-((j!=0)<<5)}function E(N,j,U){var te=0;for(N=U?I(N/f):N>>1,N+=I(N/j);N>O*h>>1;te+=c)N=I(N/O);return I(te+(O+1)*N/(N+p))}function L(N){var j=[],U=N.length,te,ie=0,K=y,Z=v,z,Q,re,X,J,ae,ne,ce,le;for(z=N.lastIndexOf(w),z<0&&(z=0),Q=0;Q<z;++Q)N.charCodeAt(Q)>=128&&$("not-basic"),j.push(N.charCodeAt(Q));for(re=z>0?z+1:0;re<U;){for(X=ie,J=1,ae=c;re>=U&&$("invalid-input"),ne=g(N.charCodeAt(re++)),(ne>=c||ne>I((l-ie)/J))&&$("overflow"),ie+=ne*J,ce=ae<=Z?d:ae>=Z+h?h:ae-Z,!(ne<ce);ae+=c)le=c-ce,J>I(l/le)&&$("overflow"),J*=le;te=j.length+1,Z=E(ie-X,te,X==0),I(ie/te)>l-K&&$("overflow"),K+=I(ie/te),ie%=te,j.splice(ie++,0,K)}return H(j)}function P(N){var j,U,te,ie,K,Z,z,Q,re,X,J,ae=[],ne,ce,le,pe;for(N=q(N),ne=N.length,j=y,U=0,K=v,Z=0;Z<ne;++Z)J=N[Z],J<128&&ae.push(A(J));for(te=ie=ae.length,ie&&ae.push(w);te<ne;){for(z=l,Z=0;Z<ne;++Z)J=N[Z],J>=j&&J<z&&(z=J);for(ce=te+1,z-j>I((l-U)/ce)&&$("overflow"),U+=(z-j)*ce,j=z,Z=0;Z<ne;++Z)if(J=N[Z],J<j&&++U>l&&$("overflow"),J==j){for(Q=U,re=c;X=re<=K?d:re>=K+h?h:re-K,!(Q<X);re+=c)pe=Q-X,le=c-X,ae.push(A(b(X+pe%le,0))),Q=I(pe/le);ae.push(A(b(Q,0))),K=E(U,ce,te==ie),U=0,++te}++U,++j}return ae.join("")}function T(N){return G(N,function(j){return C.test(j)?L(j.slice(4).toLowerCase()):j})}function F(N){return G(N,function(j){return M.test(j)?"xn--"+P(j):j})}if(s={version:"1.3.2",ucs2:{decode:q,encode:H},decode:L,encode:P,toASCII:F,toUnicode:T},n&&r)if(e.exports==n)r.exports=s;else for(V in s)s.hasOwnProperty(V)&&(n[V]=s[V]);else i.punycode=s})(En)}(Al,Al.exports)),Al.exports}var Sd={exports:{}};/*!
 * URI.js - Mutating URLs
 * IPv6 Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */Sd.exports;var _M;function iH(){return _M||(_M=1,function(e){(function(t,i){e.exports?e.exports=i():t.IPv6=i(t)})(En,function(t){var i=t&&t.IPv6;function n(a){var s=a.toLowerCase(),l=s.split(":"),c=l.length,d=8;l[0]===""&&l[1]===""&&l[2]===""?(l.shift(),l.shift()):l[0]===""&&l[1]===""?l.shift():l[c-1]===""&&l[c-2]===""&&l.pop(),c=l.length,l[c-1].indexOf(".")!==-1&&(d=7);var h;for(h=0;h<c&&l[h]!=="";h++);if(h<d)for(l.splice(h,1,"0000");l.length<d;)l.splice(h,0,"0000");for(var p,f=0;f<d;f++){p=l[f].split("");for(var v=0;v<3&&(p[0]==="0"&&p.length>1);v++)p.splice(0,1);l[f]=p.join("")}var y=-1,w=0,C=0,M=-1,S=!1;for(f=0;f<d;f++)S?l[f]==="0"?C+=1:(S=!1,C>w&&(y=M,w=C)):l[f]==="0"&&(S=!0,M=f,C=1);C>w&&(y=M,w=C),w>1&&l.splice(y,w,""),c=l.length;var _="";for(l[0]===""&&(_=":"),f=0;f<c&&(_+=l[f],f!==c-1);f++)_+=":";return l[c-1]===""&&(_+=":"),_}function r(){return t.IPv6===this&&(t.IPv6=i),this}return{best:n,noConflict:r}})}(Sd)),Sd.exports}var Td={exports:{}};/*!
 * URI.js - Mutating URLs
 * Second Level Domain (SLD) Support
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */Td.exports;var wM;function nH(){return wM||(wM=1,function(e){(function(t,i){e.exports?e.exports=i():t.SecondLevelDomains=i(t)})(En,function(t){var i=t&&t.SecondLevelDomains,n={list:{ac:" com gov mil net org ",ae:" ac co gov mil name net org pro sch ",af:" com edu gov net org ",al:" com edu gov mil net org ",ao:" co ed gv it og pb ",ar:" com edu gob gov int mil net org tur ",at:" ac co gv or ",au:" asn com csiro edu gov id net org ",ba:" co com edu gov mil net org rs unbi unmo unsa untz unze ",bb:" biz co com edu gov info net org store tv ",bh:" biz cc com edu gov info net org ",bn:" com edu gov net org ",bo:" com edu gob gov int mil net org tv ",br:" adm adv agr am arq art ato b bio blog bmd cim cng cnt com coop ecn edu eng esp etc eti far flog fm fnd fot fst g12 ggf gov imb ind inf jor jus lel mat med mil mus net nom not ntr odo org ppg pro psc psi qsl rec slg srv tmp trd tur tv vet vlog wiki zlg ",bs:" com edu gov net org ",bz:" du et om ov rg ",ca:" ab bc mb nb nf nl ns nt nu on pe qc sk yk ",ck:" biz co edu gen gov info net org ",cn:" ac ah bj com cq edu fj gd gov gs gx gz ha hb he hi hl hn jl js jx ln mil net nm nx org qh sc sd sh sn sx tj tw xj xz yn zj ",co:" com edu gov mil net nom org ",cr:" ac c co ed fi go or sa ",cy:" ac biz com ekloges gov ltd name net org parliament press pro tm ",do:" art com edu gob gov mil net org sld web ",dz:" art asso com edu gov net org pol ",ec:" com edu fin gov info med mil net org pro ",eg:" com edu eun gov mil name net org sci ",er:" com edu gov ind mil net org rochest w ",es:" com edu gob nom org ",et:" biz com edu gov info name net org ",fj:" ac biz com info mil name net org pro ",fk:" ac co gov net nom org ",fr:" asso com f gouv nom prd presse tm ",gg:" co net org ",gh:" com edu gov mil org ",gn:" ac com gov net org ",gr:" com edu gov mil net org ",gt:" com edu gob ind mil net org ",gu:" com edu gov net org ",hk:" com edu gov idv net org ",hu:" 2000 agrar bolt casino city co erotica erotika film forum games hotel info ingatlan jogasz konyvelo lakas media news org priv reklam sex shop sport suli szex tm tozsde utazas video ",id:" ac co go mil net or sch web ",il:" ac co gov idf k12 muni net org ",in:" ac co edu ernet firm gen gov i ind mil net nic org res ",iq:" com edu gov i mil net org ",ir:" ac co dnssec gov i id net org sch ",it:" edu gov ",je:" co net org ",jo:" com edu gov mil name net org sch ",jp:" ac ad co ed go gr lg ne or ",ke:" ac co go info me mobi ne or sc ",kh:" com edu gov mil net org per ",ki:" biz com de edu gov info mob net org tel ",km:" asso com coop edu gouv k medecin mil nom notaires pharmaciens presse tm veterinaire ",kn:" edu gov net org ",kr:" ac busan chungbuk chungnam co daegu daejeon es gangwon go gwangju gyeongbuk gyeonggi gyeongnam hs incheon jeju jeonbuk jeonnam k kg mil ms ne or pe re sc seoul ulsan ",kw:" com edu gov net org ",ky:" com edu gov net org ",kz:" com edu gov mil net org ",lb:" com edu gov net org ",lk:" assn com edu gov grp hotel int ltd net ngo org sch soc web ",lr:" com edu gov net org ",lv:" asn com conf edu gov id mil net org ",ly:" com edu gov id med net org plc sch ",ma:" ac co gov m net org press ",mc:" asso tm ",me:" ac co edu gov its net org priv ",mg:" com edu gov mil nom org prd tm ",mk:" com edu gov inf name net org pro ",ml:" com edu gov net org presse ",mn:" edu gov org ",mo:" com edu gov net org ",mt:" com edu gov net org ",mv:" aero biz com coop edu gov info int mil museum name net org pro ",mw:" ac co com coop edu gov int museum net org ",mx:" com edu gob net org ",my:" com edu gov mil name net org sch ",nf:" arts com firm info net other per rec store web ",ng:" biz com edu gov mil mobi name net org sch ",ni:" ac co com edu gob mil net nom org ",np:" com edu gov mil net org ",nr:" biz com edu gov info net org ",om:" ac biz co com edu gov med mil museum net org pro sch ",pe:" com edu gob mil net nom org sld ",ph:" com edu gov i mil net ngo org ",pk:" biz com edu fam gob gok gon gop gos gov net org web ",pl:" art bialystok biz com edu gda gdansk gorzow gov info katowice krakow lodz lublin mil net ngo olsztyn org poznan pwr radom slupsk szczecin torun warszawa waw wroc wroclaw zgora ",pr:" ac biz com edu est gov info isla name net org pro prof ",ps:" com edu gov net org plo sec ",pw:" belau co ed go ne or ",ro:" arts com firm info nom nt org rec store tm www ",rs:" ac co edu gov in org ",sb:" com edu gov net org ",sc:" com edu gov net org ",sh:" co com edu gov net nom org ",sl:" com edu gov net org ",st:" co com consulado edu embaixada gov mil net org principe saotome store ",sv:" com edu gob org red ",sz:" ac co org ",tr:" av bbs bel biz com dr edu gen gov info k12 name net org pol tel tsk tv web ",tt:" aero biz cat co com coop edu gov info int jobs mil mobi museum name net org pro tel travel ",tw:" club com ebiz edu game gov idv mil net org ",mu:" ac co com gov net or org ",mz:" ac co edu gov org ",na:" co com ",nz:" ac co cri geek gen govt health iwi maori mil net org parliament school ",pa:" abo ac com edu gob ing med net nom org sld ",pt:" com edu gov int net nome org publ ",py:" com edu gov mil net org ",qa:" com edu gov mil net org ",re:" asso com nom ",ru:" ac adygeya altai amur arkhangelsk astrakhan bashkiria belgorod bir bryansk buryatia cbg chel chelyabinsk chita chukotka chuvashia com dagestan e-burg edu gov grozny int irkutsk ivanovo izhevsk jar joshkar-ola kalmykia kaluga kamchatka karelia kazan kchr kemerovo khabarovsk khakassia khv kirov koenig komi kostroma kranoyarsk kuban kurgan kursk lipetsk magadan mari mari-el marine mil mordovia mosreg msk murmansk nalchik net nnov nov novosibirsk nsk omsk orenburg org oryol penza perm pp pskov ptz rnd ryazan sakhalin samara saratov simbirsk smolensk spb stavropol stv surgut tambov tatarstan tom tomsk tsaritsyn tsk tula tuva tver tyumen udm udmurtia ulan-ude vladikavkaz vladimir vladivostok volgograd vologda voronezh vrn vyatka yakutia yamal yekaterinburg yuzhno-sakhalinsk ",rw:" ac co com edu gouv gov int mil net ",sa:" com edu gov med net org pub sch ",sd:" com edu gov info med net org tv ",se:" a ac b bd c d e f g h i k l m n o org p parti pp press r s t tm u w x y z ",sg:" com edu gov idn net org per ",sn:" art com edu gouv org perso univ ",sy:" com edu gov mil net news org ",th:" ac co go in mi net or ",tj:" ac biz co com edu go gov info int mil name net nic org test web ",tn:" agrinet com defense edunet ens fin gov ind info intl mincom nat net org perso rnrt rns rnu tourism ",tz:" ac co go ne or ",ua:" biz cherkassy chernigov chernovtsy ck cn co com crimea cv dn dnepropetrovsk donetsk dp edu gov if in ivano-frankivsk kh kharkov kherson khmelnitskiy kiev kirovograd km kr ks kv lg lugansk lutsk lviv me mk net nikolaev od odessa org pl poltava pp rovno rv sebastopol sumy te ternopil uzhgorod vinnica vn zaporizhzhe zhitomir zp zt ",ug:" ac co go ne or org sc ",uk:" ac bl british-library co cym gov govt icnet jet lea ltd me mil mod national-library-scotland nel net nhs nic nls org orgn parliament plc police sch scot soc ",us:" dni fed isa kids nsn ",uy:" com edu gub mil net org ",ve:" co com edu gob info mil net org web ",vi:" co com k12 net org ",vn:" ac biz com edu gov health info int name net org pro ",ye:" co com gov ltd me net org plc ",yu:" ac co edu gov org ",za:" ac agric alt bourse city co cybernet db edu gov grondar iaccess imt inca landesign law mil net ngo nis nom olivetti org pix school tm web ",zm:" ac co com edu gov net org sch ",com:"ar br cn de eu gb gr hu jpn kr no qc ru sa se uk us uy za ",net:"gb jp se uk ",org:"ae",de:"com "},has:function(r){var a=r.lastIndexOf(".");if(a<=0||a>=r.length-1)return!1;var s=r.lastIndexOf(".",a-1);if(s<=0||s>=a-1)return!1;var l=n.list[r.slice(a+1)];return l?l.indexOf(" "+r.slice(s+1,a)+" ")>=0:!1},is:function(r){var a=r.lastIndexOf(".");if(a<=0||a>=r.length-1)return!1;var s=r.lastIndexOf(".",a-1);if(s>=0)return!1;var l=n.list[r.slice(a+1)];return l?l.indexOf(" "+r.slice(0,a)+" ")>=0:!1},get:function(r){var a=r.lastIndexOf(".");if(a<=0||a>=r.length-1)return null;var s=r.lastIndexOf(".",a-1);if(s<=0||s>=a-1)return null;var l=n.list[r.slice(a+1)];return!l||l.indexOf(" "+r.slice(s+1,a)+" ")<0?null:r.slice(s+1)},noConflict:function(){return t.SecondLevelDomains===this&&(t.SecondLevelDomains=i),this}};return n})}(Td)),Td.exports}/*!
 * URI.js - Mutating URLs
 *
 * Version: 1.19.11
 *
 * Author: Rodney Rehm
 * Web: http://medialize.github.io/URI.js/
 *
 * Licensed under
 *   MIT License http://www.opensource.org/licenses/mit-license
 *
 */by.exports,function(e){(function(t,i){e.exports?e.exports=i(tH(),iH(),nH()):t.URI=i(t.punycode,t.IPv6,t.SecondLevelDomains,t)})(En,function(t,i,n,r){var a=r&&r.URI;function s(g,b){var E=arguments.length>=1,L=arguments.length>=2;if(!(this instanceof s))return E?L?new s(g,b):new s(g):new s;if(g===void 0){if(E)throw new TypeError("undefined is not a valid argument for URI");typeof location!="undefined"?g=location.href+"":g=""}if(g===null&&E)throw new TypeError("null is not a valid argument for URI");return this.href(g),b!==void 0?this.absoluteTo(b):this}function l(g){return/^[0-9]+$/.test(g)}s.version="1.19.11";var c=s.prototype,d=Object.prototype.hasOwnProperty;function h(g){return g.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function p(g){return g===void 0?"Undefined":String(Object.prototype.toString.call(g)).slice(8,-1)}function f(g){return p(g)==="Array"}function v(g,b){var E={},L,P;if(p(b)==="RegExp")E=null;else if(f(b))for(L=0,P=b.length;L<P;L++)E[b[L]]=!0;else E[b]=!0;for(L=0,P=g.length;L<P;L++){var T=E&&E[g[L]]!==void 0||!E&&b.test(g[L]);T&&(g.splice(L,1),P--,L--)}return g}function y(g,b){var E,L;if(f(b)){for(E=0,L=b.length;E<L;E++)if(!y(g,b[E]))return!1;return!0}var P=p(b);for(E=0,L=g.length;E<L;E++)if(P==="RegExp"){if(typeof g[E]=="string"&&g[E].match(b))return!0}else if(g[E]===b)return!0;return!1}function w(g,b){if(!f(g)||!f(b)||g.length!==b.length)return!1;g.sort(),b.sort();for(var E=0,L=g.length;E<L;E++)if(g[E]!==b[E])return!1;return!0}function C(g){var b=/^\/+|\/+$/g;return g.replace(b,"")}s._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,preventInvalidHostname:s.preventInvalidHostname,duplicateQueryParameters:s.duplicateQueryParameters,escapeQuerySpace:s.escapeQuerySpace}},s.preventInvalidHostname=!1,s.duplicateQueryParameters=!1,s.escapeQuerySpace=!0,s.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,s.idn_expression=/[^a-z0-9\._-]/i,s.punycode_expression=/(xn--)/i,s.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,s.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,s.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?]))/ig,s.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?]+$/,parens:/(\([^\)]*\)|\[[^\]]*\]|\{[^}]*\}|<[^>]*>)/g},s.leading_whitespace_expression=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,s.ascii_tab_whitespace=/[\u0009\u000A\u000D]+/g,s.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},s.hostProtocols=["http","https"],s.invalid_hostname_characters=/[^a-zA-Z0-9\.\-:_]/,s.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},s.getDomAttribute=function(g){if(!(!g||!g.nodeName)){var b=g.nodeName.toLowerCase();if(!(b==="input"&&g.type!=="image"))return s.domAttributes[b]}};function M(g){return escape(g)}function S(g){return encodeURIComponent(g).replace(/[!'()*]/g,M).replace(/\*/g,"%2A")}s.encode=S,s.decode=decodeURIComponent,s.iso8859=function(){s.encode=escape,s.decode=unescape},s.unicode=function(){s.encode=S,s.decode=decodeURIComponent},s.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/ig,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/ig,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}},urnpath:{encode:{expression:/%(21|24|27|28|29|2A|2B|2C|3B|3D|40)/ig,map:{"%21":"!","%24":"$","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"=","%40":"@"}},decode:{expression:/[\/\?#:]/g,map:{"/":"%2F","?":"%3F","#":"%23",":":"%3A"}}}},s.encodeQuery=function(g,b){var E=s.encode(g+"");return b===void 0&&(b=s.escapeQuerySpace),b?E.replace(/%20/g,"+"):E},s.decodeQuery=function(g,b){g+="",b===void 0&&(b=s.escapeQuerySpace);try{return s.decode(b?g.replace(/\+/g,"%20"):g)}catch(E){return g}};var _={encode:"encode",decode:"decode"},O,I=function(g,b){return function(E){try{return s[b](E+"").replace(s.characters[g][b].expression,function(L){return s.characters[g][b].map[L]})}catch(L){return E}}};for(O in _)s[O+"PathSegment"]=I("pathname",_[O]),s[O+"UrnPathSegment"]=I("urnpath",_[O]);var A=function(g,b,E){return function(L){var P;E?P=function(j){return s[b](s[E](j))}:P=s[b];for(var T=(L+"").split(g),F=0,N=T.length;F<N;F++)T[F]=P(T[F]);return T.join(g)}};s.decodePath=A("/","decodePathSegment"),s.decodeUrnPath=A(":","decodeUrnPathSegment"),s.recodePath=A("/","encodePathSegment","decode"),s.recodeUrnPath=A(":","encodeUrnPathSegment","decode"),s.encodeReserved=I("reserved","encode"),s.parse=function(g,b){var E;return b||(b={preventInvalidHostname:s.preventInvalidHostname}),g=g.replace(s.leading_whitespace_expression,""),g=g.replace(s.ascii_tab_whitespace,""),E=g.indexOf("#"),E>-1&&(b.fragment=g.substring(E+1)||null,g=g.substring(0,E)),E=g.indexOf("?"),E>-1&&(b.query=g.substring(E+1)||null,g=g.substring(0,E)),g=g.replace(/^(https?|ftp|wss?)?:+[/\\]*/i,"$1://"),g=g.replace(/^[/\\]{2,}/i,"//"),g.substring(0,2)==="//"?(b.protocol=null,g=g.substring(2),g=s.parseAuthority(g,b)):(E=g.indexOf(":"),E>-1&&(b.protocol=g.substring(0,E)||null,b.protocol&&!b.protocol.match(s.protocol_expression)?b.protocol=void 0:g.substring(E+1,E+3).replace(/\\/g,"/")==="//"?(g=g.substring(E+3),g=s.parseAuthority(g,b)):(g=g.substring(E+1),b.urn=!0))),b.path=g,b},s.parseHost=function(g,b){g||(g=""),g=g.replace(/\\/g,"/");var E=g.indexOf("/"),L,P;if(E===-1&&(E=g.length),g.charAt(0)==="[")L=g.indexOf("]"),b.hostname=g.substring(1,L)||null,b.port=g.substring(L+2,E)||null,b.port==="/"&&(b.port=null);else{var T=g.indexOf(":"),F=g.indexOf("/"),N=g.indexOf(":",T+1);N!==-1&&(F===-1||N<F)?(b.hostname=g.substring(0,E)||null,b.port=null):(P=g.substring(0,E).split(":"),b.hostname=P[0]||null,b.port=P[1]||null)}return b.hostname&&g.substring(E).charAt(0)!=="/"&&(E++,g="/"+g),b.preventInvalidHostname&&s.ensureValidHostname(b.hostname,b.protocol),b.port&&s.ensureValidPort(b.port),g.substring(E)||"/"},s.parseAuthority=function(g,b){return g=s.parseUserinfo(g,b),s.parseHost(g,b)},s.parseUserinfo=function(g,b){var E=g,L=g.indexOf("\\");L!==-1&&(g=g.replace(/\\/g,"/"));var P=g.indexOf("/"),T=g.lastIndexOf("@",P>-1?P:g.length-1),F;return T>-1&&(P===-1||T<P)?(F=g.substring(0,T).split(":"),b.username=F[0]?s.decode(F[0]):null,F.shift(),b.password=F[0]?s.decode(F.join(":")):null,g=E.substring(T+1)):(b.username=null,b.password=null),g},s.parseQuery=function(g,b){if(!g)return{};if(g=g.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!g)return{};for(var E={},L=g.split("&"),P=L.length,T,F,N,j=0;j<P;j++)T=L[j].split("="),F=s.decodeQuery(T.shift(),b),N=T.length?s.decodeQuery(T.join("="),b):null,F!=="__proto__"&&(d.call(E,F)?((typeof E[F]=="string"||E[F]===null)&&(E[F]=[E[F]]),E[F].push(N)):E[F]=N);return E},s.build=function(g){var b="",E=!1;return g.protocol&&(b+=g.protocol+":"),!g.urn&&(b||g.hostname)&&(b+="//",E=!0),b+=s.buildAuthority(g)||"",typeof g.path=="string"&&(g.path.charAt(0)!=="/"&&E&&(b+="/"),b+=g.path),typeof g.query=="string"&&g.query&&(b+="?"+g.query),typeof g.fragment=="string"&&g.fragment&&(b+="#"+g.fragment),b},s.buildHost=function(g){var b="";if(g.hostname)s.ip6_expression.test(g.hostname)?b+="["+g.hostname+"]":b+=g.hostname;else return"";return g.port&&(b+=":"+g.port),b},s.buildAuthority=function(g){return s.buildUserinfo(g)+s.buildHost(g)},s.buildUserinfo=function(g){var b="";return g.username&&(b+=s.encode(g.username)),g.password&&(b+=":"+s.encode(g.password)),b&&(b+="@"),b},s.buildQuery=function(g,b,E){var L="",P,T,F,N;for(T in g)if(T!=="__proto__"&&d.call(g,T))if(f(g[T]))for(P={},F=0,N=g[T].length;F<N;F++)g[T][F]!==void 0&&P[g[T][F]+""]===void 0&&(L+="&"+s.buildQueryParameter(T,g[T][F],E),b!==!0&&(P[g[T][F]+""]=!0));else g[T]!==void 0&&(L+="&"+s.buildQueryParameter(T,g[T],E));return L.substring(1)},s.buildQueryParameter=function(g,b,E){return s.encodeQuery(g,E)+(b!==null?"="+s.encodeQuery(b,E):"")},s.addQuery=function(g,b,E){if(typeof b=="object")for(var L in b)d.call(b,L)&&s.addQuery(g,L,b[L]);else if(typeof b=="string"){if(g[b]===void 0){g[b]=E;return}else typeof g[b]=="string"&&(g[b]=[g[b]]);f(E)||(E=[E]),g[b]=(g[b]||[]).concat(E)}else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter")},s.setQuery=function(g,b,E){if(typeof b=="object")for(var L in b)d.call(b,L)&&s.setQuery(g,L,b[L]);else if(typeof b=="string")g[b]=E===void 0?null:E;else throw new TypeError("URI.setQuery() accepts an object, string as the name parameter")},s.removeQuery=function(g,b,E){var L,P,T;if(f(b))for(L=0,P=b.length;L<P;L++)g[b[L]]=void 0;else if(p(b)==="RegExp")for(T in g)b.test(T)&&(g[T]=void 0);else if(typeof b=="object")for(T in b)d.call(b,T)&&s.removeQuery(g,T,b[T]);else if(typeof b=="string")E!==void 0?p(E)==="RegExp"?!f(g[b])&&E.test(g[b])?g[b]=void 0:g[b]=v(g[b],E):g[b]===String(E)&&(!f(E)||E.length===1)?g[b]=void 0:f(g[b])&&(g[b]=v(g[b],E)):g[b]=void 0;else throw new TypeError("URI.removeQuery() accepts an object, string, RegExp as the first parameter")},s.hasQuery=function(g,b,E,L){switch(p(b)){case"String":break;case"RegExp":for(var P in g)if(d.call(g,P)&&b.test(P)&&(E===void 0||s.hasQuery(g,P,E)))return!0;return!1;case"Object":for(var T in b)if(d.call(b,T)&&!s.hasQuery(g,T,b[T]))return!1;return!0;default:throw new TypeError("URI.hasQuery() accepts a string, regular expression or object as the name parameter")}switch(p(E)){case"Undefined":return b in g;case"Boolean":var F=!!(f(g[b])?g[b].length:g[b]);return E===F;case"Function":return!!E(g[b],b,g);case"Array":if(!f(g[b]))return!1;var N=L?y:w;return N(g[b],E);case"RegExp":return f(g[b])?L?y(g[b],E):!1:!!(g[b]&&g[b].match(E));case"Number":E=String(E);case"String":return f(g[b])?L?y(g[b],E):!1:g[b]===E;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},s.joinPaths=function(){for(var g=[],b=[],E=0,L=0;L<arguments.length;L++){var P=new s(arguments[L]);g.push(P);for(var T=P.segment(),F=0;F<T.length;F++)typeof T[F]=="string"&&b.push(T[F]),T[F]&&E++}if(!b.length||!E)return new s("");var N=new s("").segment(b);return(g[0].path()===""||g[0].path().slice(0,1)==="/")&&N.path("/"+N.path()),N.normalize()},s.commonPath=function(g,b){var E=Math.min(g.length,b.length),L;for(L=0;L<E;L++)if(g.charAt(L)!==b.charAt(L)){L--;break}return L<1?g.charAt(0)===b.charAt(0)&&g.charAt(0)==="/"?"/":"":((g.charAt(L)!=="/"||b.charAt(L)!=="/")&&(L=g.substring(0,L).lastIndexOf("/")),g.substring(0,L+1))},s.withinString=function(g,b,E){E||(E={});var L=E.start||s.findUri.start,P=E.end||s.findUri.end,T=E.trim||s.findUri.trim,F=E.parens||s.findUri.parens,N=/[a-z0-9-]=["']?$/i;for(L.lastIndex=0;;){var j=L.exec(g);if(!j)break;var U=j.index;if(E.ignoreHtml){var te=g.slice(Math.max(U-3,0),U);if(te&&N.test(te))continue}for(var ie=U+g.slice(U).search(P),K=g.slice(U,ie),Z=-1;;){var z=F.exec(K);if(!z)break;var Q=z.index+z[0].length;Z=Math.max(Z,Q)}if(Z>-1?K=K.slice(0,Z)+K.slice(Z).replace(T,""):K=K.replace(T,""),!(K.length<=j[0].length)&&!(E.ignore&&E.ignore.test(K))){ie=U+K.length;var re=b(K,U,ie,g);if(re===void 0){L.lastIndex=ie;continue}re=String(re),g=g.slice(0,U)+re+g.slice(ie),L.lastIndex=U+re.length}}return L.lastIndex=0,g},s.ensureValidHostname=function(g,b){var E=!!g,L=!!b,P=!1;if(L&&(P=y(s.hostProtocols,b)),P&&!E)throw new TypeError("Hostname cannot be empty, if protocol is "+b);if(g&&g.match(s.invalid_hostname_characters)){if(!t)throw new TypeError('Hostname "'+g+'" contains characters other than [A-Z0-9.-:_] and Punycode.js is not available');if(t.toASCII(g).match(s.invalid_hostname_characters))throw new TypeError('Hostname "'+g+'" contains characters other than [A-Z0-9.-:_]')}},s.ensureValidPort=function(g){if(g){var b=Number(g);if(!(l(b)&&b>0&&b<65536))throw new TypeError('Port "'+g+'" is not a valid port')}},s.noConflict=function(g){if(g){var b={URI:this.noConflict()};return r.URITemplate&&typeof r.URITemplate.noConflict=="function"&&(b.URITemplate=r.URITemplate.noConflict()),r.IPv6&&typeof r.IPv6.noConflict=="function"&&(b.IPv6=r.IPv6.noConflict()),r.SecondLevelDomains&&typeof r.SecondLevelDomains.noConflict=="function"&&(b.SecondLevelDomains=r.SecondLevelDomains.noConflict()),b}else r.URI===this&&(r.URI=a);return this},c.build=function(g){return g===!0?this._deferred_build=!0:(g===void 0||this._deferred_build)&&(this._string=s.build(this._parts),this._deferred_build=!1),this},c.clone=function(){return new s(this)},c.valueOf=c.toString=function(){return this.build(!1)._string};function V(g){return function(b,E){return b===void 0?this._parts[g]||"":(this._parts[g]=b||null,this.build(!E),this)}}function $(g,b){return function(E,L){return E===void 0?this._parts[g]||"":(E!==null&&(E=E+"",E.charAt(0)===b&&(E=E.substring(1))),this._parts[g]=E,this.build(!L),this)}}c.protocol=V("protocol"),c.username=V("username"),c.password=V("password"),c.hostname=V("hostname"),c.port=V("port"),c.query=$("query","?"),c.fragment=$("fragment","#"),c.search=function(g,b){var E=this.query(g,b);return typeof E=="string"&&E.length?"?"+E:E},c.hash=function(g,b){var E=this.fragment(g,b);return typeof E=="string"&&E.length?"#"+E:E},c.pathname=function(g,b){if(g===void 0||g===!0){var E=this._parts.path||(this._parts.hostname?"/":"");return g?(this._parts.urn?s.decodeUrnPath:s.decodePath)(E):E}else return this._parts.urn?this._parts.path=g?s.recodeUrnPath(g):"":this._parts.path=g?s.recodePath(g):"/",this.build(!b),this},c.path=c.pathname,c.href=function(g,b){var E;if(g===void 0)return this.toString();this._string="",this._parts=s._parts();var L=g instanceof s,P=typeof g=="object"&&(g.hostname||g.path||g.pathname);if(g.nodeName){var T=s.getDomAttribute(g);g=g[T]||"",P=!1}if(!L&&P&&g.pathname!==void 0&&(g=g.toString()),typeof g=="string"||g instanceof String)this._parts=s.parse(String(g),this._parts);else if(L||P){var F=L?g._parts:g;for(E in F)E!=="query"&&d.call(this._parts,E)&&(this._parts[E]=F[E]);F.query&&this.query(F.query,!1)}else throw new TypeError("invalid input");return this.build(!b),this},c.is=function(g){var b=!1,E=!1,L=!1,P=!1,T=!1,F=!1,N=!1,j=!this._parts.urn;switch(this._parts.hostname&&(j=!1,E=s.ip4_expression.test(this._parts.hostname),L=s.ip6_expression.test(this._parts.hostname),b=E||L,P=!b,T=P&&n&&n.has(this._parts.hostname),F=P&&s.idn_expression.test(this._parts.hostname),N=P&&s.punycode_expression.test(this._parts.hostname)),g.toLowerCase()){case"relative":return j;case"absolute":return!j;case"domain":case"name":return P;case"sld":return T;case"ip":return b;case"ip4":case"ipv4":case"inet4":return E;case"ip6":case"ipv6":case"inet6":return L;case"idn":return F;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return N}return null};var D=c.protocol,G=c.port,q=c.hostname;c.protocol=function(g,b){if(g&&(g=g.replace(/:(\/\/)?$/,""),!g.match(s.protocol_expression)))throw new TypeError('Protocol "'+g+`" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]`);return D.call(this,g,b)},c.scheme=c.protocol,c.port=function(g,b){return this._parts.urn?g===void 0?"":this:(g!==void 0&&(g===0&&(g=null),g&&(g+="",g.charAt(0)===":"&&(g=g.substring(1)),s.ensureValidPort(g))),G.call(this,g,b))},c.hostname=function(g,b){if(this._parts.urn)return g===void 0?"":this;if(g!==void 0){var E={preventInvalidHostname:this._parts.preventInvalidHostname},L=s.parseHost(g,E);if(L!=="/")throw new TypeError('Hostname "'+g+'" contains characters other than [A-Z0-9.-]');g=E.hostname,this._parts.preventInvalidHostname&&s.ensureValidHostname(g,this._parts.protocol)}return q.call(this,g,b)},c.origin=function(g,b){if(this._parts.urn)return g===void 0?"":this;if(g===void 0){var E=this.protocol(),L=this.authority();return L?(E?E+"://":"")+this.authority():""}else{var P=s(g);return this.protocol(P.protocol()).authority(P.authority()).build(!b),this}},c.host=function(g,b){if(this._parts.urn)return g===void 0?"":this;if(g===void 0)return this._parts.hostname?s.buildHost(this._parts):"";var E=s.parseHost(g,this._parts);if(E!=="/")throw new TypeError('Hostname "'+g+'" contains characters other than [A-Z0-9.-]');return this.build(!b),this},c.authority=function(g,b){if(this._parts.urn)return g===void 0?"":this;if(g===void 0)return this._parts.hostname?s.buildAuthority(this._parts):"";var E=s.parseAuthority(g,this._parts);if(E!=="/")throw new TypeError('Hostname "'+g+'" contains characters other than [A-Z0-9.-]');return this.build(!b),this},c.userinfo=function(g,b){if(this._parts.urn)return g===void 0?"":this;if(g===void 0){var E=s.buildUserinfo(this._parts);return E&&E.substring(0,E.length-1)}else return g[g.length-1]!=="@"&&(g+="@"),s.parseUserinfo(g,this._parts),this.build(!b),this},c.resource=function(g,b){var E;return g===void 0?this.path()+this.search()+this.hash():(E=s.parse(g),this._parts.path=E.path,this._parts.query=E.query,this._parts.fragment=E.fragment,this.build(!b),this)},c.subdomain=function(g,b){if(this._parts.urn)return g===void 0?"":this;if(g===void 0){if(!this._parts.hostname||this.is("IP"))return"";var E=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,E)||""}else{var L=this._parts.hostname.length-this.domain().length,P=this._parts.hostname.substring(0,L),T=new RegExp("^"+h(P));if(g&&g.charAt(g.length-1)!=="."&&(g+="."),g.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");return g&&s.ensureValidHostname(g,this._parts.protocol),this._parts.hostname=this._parts.hostname.replace(T,g),this.build(!b),this}},c.domain=function(g,b){if(this._parts.urn)return g===void 0?"":this;if(typeof g=="boolean"&&(b=g,g=void 0),g===void 0){if(!this._parts.hostname||this.is("IP"))return"";var E=this._parts.hostname.match(/\./g);if(E&&E.length<2)return this._parts.hostname;var L=this._parts.hostname.length-this.tld(b).length-1;return L=this._parts.hostname.lastIndexOf(".",L-1)+1,this._parts.hostname.substring(L)||""}else{if(!g)throw new TypeError("cannot set domain empty");if(g.indexOf(":")!==-1)throw new TypeError("Domains cannot contain colons");if(s.ensureValidHostname(g,this._parts.protocol),!this._parts.hostname||this.is("IP"))this._parts.hostname=g;else{var P=new RegExp(h(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(P,g)}return this.build(!b),this}},c.tld=function(g,b){if(this._parts.urn)return g===void 0?"":this;if(typeof g=="boolean"&&(b=g,g=void 0),g===void 0){if(!this._parts.hostname||this.is("IP"))return"";var E=this._parts.hostname.lastIndexOf("."),L=this._parts.hostname.substring(E+1);return b!==!0&&n&&n.list[L.toLowerCase()]&&n.get(this._parts.hostname)||L}else{var P;if(g)if(g.match(/[^a-zA-Z0-9-]/))if(n&&n.is(g))P=new RegExp(h(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(P,g);else throw new TypeError('TLD "'+g+'" contains characters other than [A-Z0-9]');else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");P=new RegExp(h(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(P,g)}else throw new TypeError("cannot set TLD empty");return this.build(!b),this}},c.directory=function(g,b){if(this._parts.urn)return g===void 0?"":this;if(g===void 0||g===!0){if(!this._parts.path&&!this._parts.hostname)return"";if(this._parts.path==="/")return"/";var E=this._parts.path.length-this.filename().length-1,L=this._parts.path.substring(0,E)||(this._parts.hostname?"/":"");return g?s.decodePath(L):L}else{var P=this._parts.path.length-this.filename().length,T=this._parts.path.substring(0,P),F=new RegExp("^"+h(T));return this.is("relative")||(g||(g="/"),g.charAt(0)!=="/"&&(g="/"+g)),g&&g.charAt(g.length-1)!=="/"&&(g+="/"),g=s.recodePath(g),this._parts.path=this._parts.path.replace(F,g),this.build(!b),this}},c.filename=function(g,b){if(this._parts.urn)return g===void 0?"":this;if(typeof g!="string"){if(!this._parts.path||this._parts.path==="/")return"";var E=this._parts.path.lastIndexOf("/"),L=this._parts.path.substring(E+1);return g?s.decodePathSegment(L):L}else{var P=!1;g.charAt(0)==="/"&&(g=g.substring(1)),g.match(/\.?\//)&&(P=!0);var T=new RegExp(h(this.filename())+"$");return g=s.recodePath(g),this._parts.path=this._parts.path.replace(T,g),P?this.normalizePath(b):this.build(!b),this}},c.suffix=function(g,b){if(this._parts.urn)return g===void 0?"":this;if(g===void 0||g===!0){if(!this._parts.path||this._parts.path==="/")return"";var E=this.filename(),L=E.lastIndexOf("."),P,T;return L===-1?"":(P=E.substring(L+1),T=/^[a-z0-9%]+$/i.test(P)?P:"",g?s.decodePathSegment(T):T)}else{g.charAt(0)==="."&&(g=g.substring(1));var F=this.suffix(),N;if(F)g?N=new RegExp(h(F)+"$"):N=new RegExp(h("."+F)+"$");else{if(!g)return this;this._parts.path+="."+s.recodePath(g)}return N&&(g=s.recodePath(g),this._parts.path=this._parts.path.replace(N,g)),this.build(!b),this}},c.segment=function(g,b,E){var L=this._parts.urn?":":"/",P=this.path(),T=P.substring(0,1)==="/",F=P.split(L);if(g!==void 0&&typeof g!="number"&&(E=b,b=g,g=void 0),g!==void 0&&typeof g!="number")throw new Error('Bad segment "'+g+'", must be 0-based integer');if(T&&F.shift(),g<0&&(g=Math.max(F.length+g,0)),b===void 0)return g===void 0?F:F[g];if(g===null||F[g]===void 0)if(f(b)){F=[];for(var N=0,j=b.length;N<j;N++)!b[N].length&&(!F.length||!F[F.length-1].length)||(F.length&&!F[F.length-1].length&&F.pop(),F.push(C(b[N])))}else(b||typeof b=="string")&&(b=C(b),F[F.length-1]===""?F[F.length-1]=b:F.push(b));else b?F[g]=C(b):F.splice(g,1);return T&&F.unshift(""),this.path(F.join(L),E)},c.segmentCoded=function(g,b,E){var L,P,T;if(typeof g!="number"&&(E=b,b=g,g=void 0),b===void 0){if(L=this.segment(g,b,E),!f(L))L=L!==void 0?s.decode(L):void 0;else for(P=0,T=L.length;P<T;P++)L[P]=s.decode(L[P]);return L}if(!f(b))b=typeof b=="string"||b instanceof String?s.encode(b):b;else for(P=0,T=b.length;P<T;P++)b[P]=s.encode(b[P]);return this.segment(g,b,E)};var H=c.query;return c.query=function(g,b){if(g===!0)return s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof g=="function"){var E=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace),L=g.call(this,E);return this._parts.query=s.buildQuery(L||E,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this}else return g!==void 0&&typeof g!="string"?(this._parts.query=s.buildQuery(g,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):H.call(this,g,b)},c.setQuery=function(g,b,E){var L=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if(typeof g=="string"||g instanceof String)L[g]=b!==void 0?b:null;else if(typeof g=="object")for(var P in g)d.call(g,P)&&(L[P]=g[P]);else throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");return this._parts.query=s.buildQuery(L,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof g!="string"&&(E=b),this.build(!E),this},c.addQuery=function(g,b,E){var L=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.addQuery(L,g,b===void 0?null:b),this._parts.query=s.buildQuery(L,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof g!="string"&&(E=b),this.build(!E),this},c.removeQuery=function(g,b,E){var L=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.removeQuery(L,g,b),this._parts.query=s.buildQuery(L,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),typeof g!="string"&&(E=b),this.build(!E),this},c.hasQuery=function(g,b,E){var L=s.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return s.hasQuery(L,g,b,E)},c.setSearch=c.setQuery,c.addSearch=c.addQuery,c.removeSearch=c.removeQuery,c.hasSearch=c.hasQuery,c.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},c.normalizeProtocol=function(g){return typeof this._parts.protocol=="string"&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!g)),this},c.normalizeHostname=function(g){return this._parts.hostname&&(this.is("IDN")&&t?this._parts.hostname=t.toASCII(this._parts.hostname):this.is("IPv6")&&i&&(this._parts.hostname=i.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!g)),this},c.normalizePort=function(g){return typeof this._parts.protocol=="string"&&this._parts.port===s.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!g)),this},c.normalizePath=function(g){var b=this._parts.path;if(!b)return this;if(this._parts.urn)return this._parts.path=s.recodeUrnPath(this._parts.path),this.build(!g),this;if(this._parts.path==="/")return this;b=s.recodePath(b);var E,L="",P,T;for(b.charAt(0)!=="/"&&(E=!0,b="/"+b),(b.slice(-3)==="/.."||b.slice(-2)==="/.")&&(b+="/"),b=b.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),E&&(L=b.substring(1).match(/^(\.\.\/)+/)||"",L&&(L=L[0]));P=b.search(/\/\.\.(\/|$)/),P!==-1;){if(P===0){b=b.substring(3);continue}T=b.substring(0,P).lastIndexOf("/"),T===-1&&(T=P),b=b.substring(0,T)+b.substring(P+3)}return E&&this.is("relative")&&(b=L+b.substring(1)),this._parts.path=b,this.build(!g),this},c.normalizePathname=c.normalizePath,c.normalizeQuery=function(g){return typeof this._parts.query=="string"&&(this._parts.query.length?this.query(s.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!g)),this},c.normalizeFragment=function(g){return this._parts.fragment||(this._parts.fragment=null,this.build(!g)),this},c.normalizeSearch=c.normalizeQuery,c.normalizeHash=c.normalizeFragment,c.iso8859=function(){var g=s.encode,b=s.decode;s.encode=escape,s.decode=decodeURIComponent;try{this.normalize()}finally{s.encode=g,s.decode=b}return this},c.unicode=function(){var g=s.encode,b=s.decode;s.encode=S,s.decode=unescape;try{this.normalize()}finally{s.encode=g,s.decode=b}return this},c.readable=function(){var g=this.clone();g.username("").password("").normalize();var b="";if(g._parts.protocol&&(b+=g._parts.protocol+"://"),g._parts.hostname&&(g.is("punycode")&&t?(b+=t.toUnicode(g._parts.hostname),g._parts.port&&(b+=":"+g._parts.port)):b+=g.host()),g._parts.hostname&&g._parts.path&&g._parts.path.charAt(0)!=="/"&&(b+="/"),b+=g.path(!0),g._parts.query){for(var E="",L=0,P=g._parts.query.split("&"),T=P.length;L<T;L++){var F=(P[L]||"").split("=");E+="&"+s.decodeQuery(F[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),F[1]!==void 0&&(E+="="+s.decodeQuery(F[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}b+="?"+E.substring(1)}return b+=s.decodeQuery(g.hash(),!0),b},c.absoluteTo=function(g){var b=this.clone(),E=["protocol","username","password","hostname","port"],L,P,T;if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(g instanceof s||(g=new s(g)),b._parts.protocol||(b._parts.protocol=g._parts.protocol,this._parts.hostname))return b;for(P=0;T=E[P];P++)b._parts[T]=g._parts[T];return b._parts.path?(b._parts.path.substring(-2)===".."&&(b._parts.path+="/"),b.path().charAt(0)!=="/"&&(L=g.directory(),L=L||(g.path().indexOf("/")===0?"/":""),b._parts.path=(L?L+"/":"")+b._parts.path,b.normalizePath())):(b._parts.path=g._parts.path,b._parts.query||(b._parts.query=g._parts.query)),b.build(),b},c.relativeTo=function(g){var b=this.clone().normalize(),E,L,P,T,F;if(b._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(g=new s(g).normalize(),E=b._parts,L=g._parts,T=b.path(),F=g.path(),T.charAt(0)!=="/")throw new Error("URI is already relative");if(F.charAt(0)!=="/")throw new Error("Cannot calculate a URI relative to another relative URI");if(E.protocol===L.protocol&&(E.protocol=null),E.username!==L.username||E.password!==L.password||E.protocol!==null||E.username!==null||E.password!==null)return b.build();if(E.hostname===L.hostname&&E.port===L.port)E.hostname=null,E.port=null;else return b.build();if(T===F)return E.path="",b.build();if(P=s.commonPath(T,F),!P)return b.build();var N=L.path.substring(P.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return E.path=N+E.path.substring(P.length)||"./",b.build()},c.equals=function(g){var b=this.clone(),E=new s(g),L={},P={},T={},F,N,j;if(b.normalize(),E.normalize(),b.toString()===E.toString())return!0;if(F=b.query(),N=E.query(),b.query(""),E.query(""),b.toString()!==E.toString()||F.length!==N.length)return!1;L=s.parseQuery(F,this._parts.escapeQuerySpace),P=s.parseQuery(N,this._parts.escapeQuerySpace);for(j in L)if(d.call(L,j)){if(f(L[j])){if(!w(L[j],P[j]))return!1}else if(L[j]!==P[j])return!1;T[j]=!0}for(j in P)if(d.call(P,j)&&!T[j])return!1;return!0},c.preventInvalidHostname=function(g){return this._parts.preventInvalidHostname=!!g,this},c.duplicateQueryParameters=function(g){return this._parts.duplicateQueryParameters=!!g,this},c.escapeQuerySpace=function(g){return this._parts.escapeQuerySpace=!!g,this},s})}(by);var rH=by.exports,oH=Mp(rH);const xM={},EM={},Cy={},PM={},_y={},os={};class aH{constructor(t){Object.keys(Ni).forEach(h=>{switch(xM[Ni[h]]=t.protocol+"://{s}.tianditu.gov.cn/"+Ni[h]+"/wmts",EM[Ni[h]]=Ni[h].slice(0,3),Cy[Ni[h]]=Ni[h].slice(4),PM[Ni[h]]="tiles",Cy[Ni[h]]==="w"?_y[Ni[h]]="900913":_y[Ni[h]]="4490",Ni[h]){case"img_w":case"img_c":case"cia_w":case"cia_c":case"cta_w":case"cta_c":os[Ni[h]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18"];break;case"vec_w":case"vec_c":case"cva_w":case"cva_c":os[Ni[h]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"];break;case"ter_w":case"ter_c":os[Ni[h]]=["1","2","3","4","5","6","7","8","9","10","11","12","13","14"];break;case"eia_w":case"eia_c":case"eva_w":case"eva_c":case"ibo_c":case"ibo_w":os[Ni[h]]=["1","2","3","4","5","6","7","8","9","10"];break}});const{Credit:i,Resource:n,defaultValue:r,Event:a,GeographicTilingScheme:s,WebMercatorTilingScheme:l}=Cesium;t=r(t,{}),this._mapStyle=r(t.mapStyle,Ni.IMG_W),this._url=t.url||r(t.url,xM[this._mapStyle]);const c=n.createIfNeeded(this._url);c.appendForwardSlash(),this._ready=!1,this._resource=c,this._token=t.token,this._layer=r(t.layer,EM[this._mapStyle]),this._style=r(t.style,"default"),this._tileMatrixSetID=r(t.tileMatrixSetID,Cy[this._mapStyle]),this._tileMatrixLabels=r(t.tileMatrixLabels,os[this._mapStyle]),this._format=r(t.format,PM[this._mapStyle]),this._epsgCode=_y[this._mapStyle],this._tilingScheme=this._epsgCode==="900913"?new l:new s,this._tileWidth=r(t.tileWidth,256),this._tileHeight=r(t.tileHeight,256),this._minimumLevel=r(t.minimumLevel,0),this._maximumLevel=r(t.maximumLevel,os[this._mapStyle].length),this._rectangle=r(t.rectangle,this._tilingScheme.rectangle),this._errorEvent=new a;const d=r(t.credit,"\u5929\u5730\u56FE\u5168\u7403\u5F71\u50CF\u670D\u52A1");this._credit=typeof d=="string"?new i(d):d,this._subdomains=r(t.subdomains,["t0","t1","t2","t3","t4","t5","t6","t7"]),this._tileDiscardPolicy=t.tileDiscardPolicy,this._ready=!0}getTileCredits(t,i,n){if(!this.ready)throw new Cesium.DeveloperError("getTileCredits must not be called before the imagery provider is ready.")}requestImage(t,i,n,r){if(!this.ready)throw new Cesium.DeveloperError("requestImage must not be called before the imagery provider is ready.");const a=sH.call(this,t,i,n,r);return Cesium.ImageryProvider.loadImage(this,a)}pickFeatures(t,i,n,r,a){}get url(){return this._resource.url}get proxy(){return this._resource.proxy}get mapStyle(){return this._mapStyle}get tileWidth(){return this._tileWidth}get tileHeight(){return this._tileHeight}get maximumLevel(){return this._maximumLevel}get minimumLevel(){return this._minimumLevel}get tilingScheme(){return this._tilingScheme}get rectangle(){return this._rectangle}get errorEvent(){return this._errorEvent}get ready(){return!0}get credit(){return this._credit}get hasAlphaChannel(){return!0}get tileDiscardPolicy(){return this._tileDiscardPolicy}}function sH(e,t,i,n){var r;const{combine:a,defined:s,defaultValue:l,queryToObject:c,objectToQuery:d}=Cesium,h=Object.freeze,p=h({service:"WMTS",version:"1.0.0",request:"GetTile"});this._epsgCode==="900913"&&(i-=1);const f=this._tileMatrixLabels,v=s(f)?f[i]:i.toString(),y=this._subdomains;let w=this._url.replace("{s}",y[(e+t+i)%y.length]);const C=new oH(w);let M=c(l((r=C.query)==null?void 0:r.call(C),""));M=a(p,M),M.tilematrix=v,M.layer=this._layer,M.style=this._style,M.tilerow=t,M.tilecol=e,M.tilematrixset=this._tileMatrixSetID,M.format=this._format;const S=d(M);return w=C.toString()+"?"+S,s(this._proxy)&&(w=this._proxy.getURL(w)),s(this._token)&&(w+="&tk="+this._token),this._resource.getDerivedResource({url:w,request:n})}const wy={...Hn,...Pn,...un,...Oi,mapStyle:{type:String,default:"img_w",validator:e=>["cia_c","cia_w","cta_c","cta_w","cva_c","cva_w","eia_c","eia_w","eva_c","eva_w","img_c","img_w","ter_c","ter_w","vec_c","vec_w","ibo_c","ibo_w"].includes(e)},token:String,protocol:{type:String,default:"https"},credit:{type:[String,Object],default:"\u5929\u5730\u56FE\u5168\u7403\u5F71\u50CF\u670D\u52A1"},...ta};var OM=de({name:"VcImageryProviderTianditu",props:wy,emits:Wt,setup(e,t){const i=fe();i.cesiumClass="TiandituImageryProvider";const n=Ht(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{Cesium.TiandituImageryProvider=Cesium.TiandituImageryProvider||aH,n.unwatchFns.length===0&&n.setPropsWatcher(!0);const r=n.transformProps(e);return new Cesium.TiandituImageryProvider(r)},()=>{var r;return me(ye(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const xy={...dr,...pt,color:{type:[Object,String,Array],default:"YELLOW"},...xr,...Er};var MM=de({name:"VcImageryProviderTileCoordinates",props:xy,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="TileCoordinatesImageryProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Ey={url:[String,Object],...sm,...Ci,...Pn,...un,...Oi,...dr,...pt,...xr,...Er,flipXY:Boolean,...ta};var SM=de({name:"VcImageryProviderTms",props:Ey,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="TileMapServiceImageryProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Py={...Hn,...um,...Ci,...Pn,...un,...Oi,...dr,...pt,...xr,...Er,dir:{type:String,reqiured:!0},scales:{type:Array,default:()=>[1/295829355,1/147914678,1/73957339,1/36978669,1/18489335,1/9244667,1/4622334,1/2311167,1/1155583,1/577792,1/288896,1/144448,1/72224,1/36112,1/18056,1/9026,1/4514]}};var TM=de({name:"VcImageryProviderTiledcache",props:Py,emits:Wt,setup(e,t){const i=fe();i.cesiumClass="UrlTemplateImageryProvider";const n=Ht(e,t,i);if(n===void 0)return;i.createCesiumObject=async()=>{const a=n.transformProps(e),{Credit:s,defined:l,defaultValue:c,DeveloperError:d,Ellipsoid:h,GeographicTilingScheme:p,Rectangle:f,Resource:v,UrlTemplateImageryProvider:y}=Cesium,{url:w,dir:C,format:M}=a;if(!l(w))throw new d("options.url is required.");if(!l(C))throw new d("options.dir is required.");const S=v.createIfNeeded(w);S.url+=`?dir=${C}&scale={scale}&col={x}&row={y}&format=${M}`;const _=c(a.tilingScheme,new p({ellipsoid:c(a.ellipsoid,h.WGS84),numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1})),O=c(a.tileWidth,256),I=c(a.tileHeight,256),A=a.maximumLevel,V=c(a.minimumLevel,0),$=c(a.rectangle,_.rectangle),D=_.positionToTileXY(f.southwest($),V),G=_.positionToTileXY(f.northeast($),V),q=(Math.abs(G.x-D.x)+1)*(Math.abs(G.y-D.y)+1);if(q>4)throw new d("The rectangle and minimumLevel indicate that there are "+q+" tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.");let H=c(a.credit,"");return typeof H=="string"&&(H=new s(H)),new y({url:S,credit:H,tilingScheme:_,tileWidth:O,tileHeight:I,minimumLevel:V,maximumLevel:A,rectangle:$,customTags:{scale:(g,b,E,L)=>{const P=1/e.scales[L];return r(g,"{scale}",P)}}})};const r=(a,s,l)=>{if(a&&a.urlSchemeZeroPadding&&Object.prototype.hasOwnProperty.call(a.urlSchemeZeroPadding,s)){const c=a.urlSchemeZeroPadding[s];if(typeof c=="string"){const d=c.length;d>1&&(l=l.length>=d?l:new Array(d-l.toString().length+1).join("0")+l)}}return l};return()=>{var a;return me(ye(((a=i.proxy)==null?void 0:a.$options.name)||""))}}});const Oy={...Hn,pickFeaturesUrl:[String,Object],urlSchemeZeroPadding:Object,...pc,...Ci,...Pn,...un,...Oi,...dr,...pt,...xr,...Er,hasAlphaChannel:{type:Boolean,default:!0},...cm,...hc,customTags:Object,...ta};var IM=de({name:"VcImageryProviderUrltemplate",props:Oy,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="UrlTemplateImageryProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const My={...Hn,...am,parameters:Object,getFeatureInfoParameters:Object,...hc,...cm,...Oi,...dr,...pt,...xr,...Er,...Pn,...un,crs:String,srs:String,...Ci,...pc,...Qs,...dm,getFeatureInfoUrl:[String,Object]};var AM=de({name:"VcImageryProviderWms",props:My,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="WebMapServiceImageryProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Sy={...Hn,...um,layer:{type:String,required:!0},wmtsStyle:{type:String,required:!0},tileMatrixSetID:{type:String,required:!0},tileMatrixLabels:Array,...Qs,...dm,dimensions:Object,...xr,...Er,...dr,...Oi,...Pn,...un,...pt,...Ci,...pc};var DM=de({name:"VcImageryProviderWmts",props:Sy,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="WebMapTileServiceImageryProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Ty={url:[String,Object],requestVertexNormals:{type:Boolean,default:!1},requestWaterMask:{type:Boolean,default:!1},requestMetadata:{type:Boolean,default:!0},assetId:Number,...pt,...Ci};var LM=de({name:"VcTerrainProviderCesium",props:Ty,emits:Wt,setup(e,t){const i=fe();i.cesiumClass="CesiumTerrainProvider";const n=Ht(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{n.unwatchFns.length===0&&n.setPropsWatcher(!0);const r=n.transformProps(e);return Cesium.defined(e.assetId)&&typeof Cesium[i.cesiumClass].fromIonAssetId=="function"?await Cesium.CesiumTerrainProvider.fromIonAssetId(e.assetId,r):typeof Cesium[i.cesiumClass].fromUrl=="function"?Cesium.defined(r.url)?await Cesium.CesiumTerrainProvider.fromUrl(r.url,r):await Cesium.createWorldTerrainAsync({requestVertexNormals:r.requestVertexNormals,requestWaterMask:r.requestWaterMask}):Cesium.defined(r.url)?new Cesium.CesiumTerrainProvider(r):Cesium.createWorldTerrain({requestVertexNormals:r.requestVertexNormals,requestWaterMask:r.requestWaterMask})},()=>{var r;return me(ye(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const Iy={url:{type:[String,Object],default:"https://elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"},...pt,...om};var BM=de({name:"VcTerrainProviderArcgis",props:Iy,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="ArcGISTiledElevationTerrainProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Ay={url:{type:[String,Object],default:"https://www.vr-theworld.com/vr-theworld/tiles1.0.0/73/"},...pt,...Ci};var RM=de({name:"VcTerrainProviderVrTheworld",props:Ay,emits:Wt,setup(e,t){const i=fe();return i.cesiumClass="VRTheWorldTerrainProvider",Ht(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const Dy={url:{type:String,default:"https://{s}.tianditu.gov.cn/"},subdomains:{type:Array,default:()=>["t0","t1","t2","t3","t4","t5","t6","t7"]},pluginPath:{type:String,default:"https://api.tianditu.gov.cn/cdn/plugins/cesium/cesiumTdt.js"},dataType:{type:String,default:"int",validator:e=>["int","float"].includes(e)},tileType:{type:String,default:"heightmap",validator:e=>["heightmap","quantized-mesh"].includes(e)},token:String};var FM=de({name:"VcTerrainProviderTianditu",props:Dy,emits:Wt,setup(e,t){const i=fe();i.cesiumClass="GeoTerrainProvider";const n=Ht(e,t,i);if(n===void 0)return;const{emit:r}=t,a=xc();let s;return i.createCesiumObject=async()=>new Promise((l,c)=>{s=document.createElement("script"),document.body.appendChild(s),s.src=e.pluginPath,s.onload=()=>{n.unwatchFns.length===0&&n.setPropsWatcher(!0);const d=[];for(let h=0;h<e.subdomains.length;h++){const p=e.url.replace("{s}",e.subdomains[h])+"mapservice/swdx?tk="+e.token;d.push(p)}l(new Cesium.GeoTerrainProvider({urls:d}))}}),i.unmount=async()=>{var l;const c=new Cesium.EllipsoidTerrainProvider;return(l=c==null?void 0:c.readyPromise)==null||l.then(()=>{Ze(i,"readyPromise")&&r("readyPromise",c,a==null?void 0:a.viewer,i.proxy)}),a&&(a.viewer.terrainProvider=c),s==null||s.parentNode.removeChild(s),!0},()=>{var l;return me(ye(((l=i.proxy)==null?void 0:l.$options.name)||""))}}});const lH=[YO,KO,oM,aM,sM,lM,cM,dM,hM,pM,gM,bM,OM,MM,SM,TM,IM,AM,DM,LM,BM,RM,FM];lH.forEach(e=>{e.install=t=>{t.component(e.name,e)}});const Ly=YO,By=KO,Ry=oM,Fy=aM,$y=sM,jy=lM,Ny=cM,ky=dM,Vy=hM,zy=pM,Gy=gM,Uy=bM,Hy=OM,Wy=MM,qy=SM,Zy=TM,Qy=IM,Jy=AM,Xy=DM,Yy=LM,Ky=BM,e1=RM,t1=FM,i1={...it,...At,entities:{type:Array,default:()=>[]},name:String,destroy:{type:Boolean,default:!1}};var $M=de({name:"VcDatasourceCustom",props:i1,emits:Ua,setup(e,t){const i=fe();return i.cesiumClass="CustomDataSource",Fa(e,t,i),i.createCesiumObject=async()=>new Cesium.CustomDataSource(e.name),()=>{var n,r;return t.slots.default?R("i",{class:ye(((n=i.proxy)==null?void 0:n.$options.name)||""),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(((r=i.proxy)==null?void 0:r.$options.name)||""))}}});const n1={...it,...At,entities:{type:Array,default:()=>[]},czml:{type:[String,Object,Array],required:!0},...gc,...Ci,destroy:{type:Boolean,default:!1}};var jM=de({name:"VcDatasourceCzml",props:n1,emits:Ua,setup(e,t){const i=fe();i.cesiumClass="CzmlDataSource";const n=Fa(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{const r=n.transformProps(e);return Cesium.CzmlDataSource.load(e.czml,r)},()=>{var r,a;return t.slots.default?R("i",{class:ye(((r=i.proxy)==null?void 0:r.$options.name)||""),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(((a=i.proxy)==null?void 0:a.$options.name)||""))}}});const r1={...it,...At,entities:{type:Array,default:()=>[]},...Om,...gc,describe:[Function,Object],markerSize:{type:Number,default:48},markerSymbol:String,markerColor:{type:[Object,String,Array],default:()=>({x:.2549019607843137,y:.4117647058823529,z:.8823529411764706}),watcherOptions:{cesiumObjectBuilder:Je}},stroke:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0}),watcherOptions:{cesiumObjectBuilder:Je}},strokeWidth:{type:Number,default:2},fill:{type:[Object,String,Array],default:()=>({x:1,y:1,z:0,w:.39215686274509803}),watcherOptions:{cesiumObjectBuilder:Je}},...qs,...Ci,destroy:{type:Boolean,default:!1}};var NM=de({name:"VcDatasourceGeojson",props:r1,emits:Ua,setup(e,t){const i=fe();i.cesiumClass="GeoJsonDataSource";const n=Fa(e,t,i);if(n!==void 0)return i.createCesiumObject=async()=>{const r=n.transformProps(e);return Cesium.GeoJsonDataSource.load(e.data,r)},()=>{var r,a;return t.slots.default?R("i",{class:ye(((r=i.proxy)==null?void 0:r.$options.name)||""),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(((a=i.proxy)==null?void 0:a.$options.name)||""))}}});const o1={...it,...At,entities:{type:Array,default:()=>[]},...Om,camera:Object,canvas:HTMLCanvasElement,...gc,...qs,...pt,...Ci,destroy:{type:Boolean,default:!1},screenOverlayContainer:[Element,String]};var kM=de({name:"VcDatasourceKml",props:o1,emits:Ua,setup(e,t){const i=fe();i.cesiumClass="KmlDataSource";const n=Fa(e,t,i),r=xc();return i.createCesiumObject=async()=>{const a=n==null?void 0:n.transformProps(e);return a.camera||(a.camera=r==null?void 0:r.viewer.camera),a.canvas||(a.canvas=r==null?void 0:r.viewer.canvas),Cesium.KmlDataSource.load(e.data||"",a)},()=>{var a,s;return t.slots.default?R("i",{class:ye(((a=i.proxy)==null?void 0:a.$options.name)||""),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(((s=i.proxy)==null?void 0:s.$options.name)||""))}}});const uH=[$M,jM,NM,kM];uH.forEach(e=>{e.install=t=>{t.component(e.name,e)}});const a1=$M,s1=jM,l1=NM,u1=kM,c1={...Wu,...Xo,...Ia,...Vs,...zs,...Us,...Zi,...Qr,...Jr,...$p,...qu,...sr,...Bi,...Yo,...Ko,...Gs,...Jo,...it,...ni,...j2};var VM=de({name:"VcGraphicsBillboard",props:c1,emits:Ga,setup(e,t){const i=fe();return i.cesiumClass="BillboardGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const d1={...it,...Zu,...Zi,...lr,...sn,...ur,...zi,...Qi,...Ri,...ni};var zM=de({name:"VcGraphicsBox",props:d1,emits:Ga,setup(e,t){const i=fe();return i.cesiumClass="BoxGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const cH={...it,...ln,...sr,...Bi,...Zi,...Ji,...Hs,...ea,...Ut,...lr,...sn,...ur,...zi,...Qi,...Ri,...ni,...cr,...Aa};var GM=de({name:"VcGraphicsCorridor",props:cH,emits:Ga,setup(e,t){const i=fe();return i.cesiumClass="CorridorGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const h1={...it,...Qu,...Ju,...Xu,...Zi,...lr,...sn,...ur,...zi,...Qi,...Da,...Yu,...Ri,...ni};var UM=de({name:"VcGraphicsCylinder",props:h1,emits:Ga,setup(e,t){const i=fe();return i.cesiumClass="CylinderGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const p1={...it,...Ku,...ec,...Bi,...Zi,...Ji,...Hs,...Jr,...wr,...Ut,...lr,...sn,...ur,...zi,...Qi,...Da,...Ri,...ni,...cr,...Aa};var HM=de({name:"VcGraphicsEllipse",props:p1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="EllipseGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const m1={...it,...tc,...ic,...nc,...rc,...oc,...ac,...Zi,...lr,...sn,...ur,...zi,...Qi,...La,...Ba,...sc,...Ri,...ni};var WM=de({name:"VcGraphicsEllipsoid",props:m1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="EllipsoidGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const f1={...it,...jp,...Np,...kp,...Xo,...Vp,...zp,...Gp,...Ia,...Vs,...zs,...Us,...Zi,...Up,...zi,...Qi,...Ko,...Gs,...Yo,...ni,...Jo};var qM=de({name:"VcGraphicsLabel",props:f1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="LabelGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const v1={...it,...Hp,...Xo,...Wp,...qp,...Zp,...N2,...Qp,...Ri,...Zi,...Jp,...Xp,...Qr,...Yp,...Kp,...lc,...em,...ni,...k2,...V2,...Ws};var ZM=de({name:"VcGraphicsModel",props:v1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="ModelGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const g1={...it,leadTime:[Number,Object,Function],trailTime:[Number,Object,Function],...sr,resolution:{type:[Number,Object,Function],default:60},...sn,...ni};var QM=de({name:"VcGraphicsPath",props:g1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="PathGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||""))}}});const y1={...it,...z2,dimensions:{type:[Object,Array,Function],watcherOptions:{cesiumObjectBuilder:Jt}},...lr,...sn,...ur,...zi,...Qi,...Ri,...ni};var JM=de({name:"VcGraphicsPlane",props:y1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="PlaneGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const b1={...it,...tm,...Zi,...Qr,...zi,...Qi,...Yo,...Ko,...ni,...Jo};var XM=de({name:"VcGraphicsPoint",props:b1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="PointGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const C1={...it,...G2,...Bi,...Zi,...Ji,...Hs,...wr,...Ut,...lr,...sn,...ur,...zi,...Qi,...uc,...im,...nm,...Xr,...Ri,...ni,...cr,...Aa};var YM=de({name:"VcGraphicsPolygon",props:C1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="PolygonGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const _1={...it,...ln,...sr,...Ut,...sn,...U2,...Xr,...qs,...Ri,...ni,...cr,...Aa};var KM=de({name:"VcGraphicsPolyline",props:_1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="PolylineGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const w1={...it,...ln,...H2,...ea,...Ut,...lr,...sn,...ur,...zi,...Qi,...Ri,...ni};var eS=de({name:"VcGraphicsPolylineVolume",props:w1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="PolylineVolumeGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const x1={...it,...W2,...Bi,...Zi,...Ji,...Hs,...Jr,...wr,...Ut,...lr,...sn,...ur,...zi,...Qi,...Ri,...ni,...cr,...Aa};var tS=de({name:"VcGraphicsRectangle",props:x1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="RectangleGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const E1={...it,...Hp,...rm};var iS=de({name:"VcGraphicsTileset",props:E1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="Cesium3DTilesetGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const P1={...it,...ln,...cc,...dc,...Ut,...lr,...sn,...ur,...zi,...Qi,...Ri,...ni};var nS=de({name:"VcGraphicsWall",props:P1,emits:je,setup(e,t){const i=fe();return i.cesiumClass="WallGraphics",_i(e,t,i),()=>{var n;return me(ye(((n=i.proxy)==null?void 0:n.$options.name)||"v-if"))}}});const dH=[VM,zM,GM,UM,HM,WM,qM,ZM,QM,JM,XM,YM,KM,eS,tS,iS,nS];dH.forEach(e=>{e.install=t=>{t.component(e.name,e)}});const O1=VM,M1=zM,S1=GM,T1=UM,I1=HM,A1=WM,D1=qM,L1=ZM,B1=QM,R1=JM,F1=XM,$1=YM,j1=KM,N1=eS,k1=tS,V1=iS,z1=nS,hH={fragmentShader:String,uniforms:Object,textureScale:{type:Number,default:1},forcePowerOfTwo:{type:Boolean,default:!1},sampleMode:Number,pixelFormat:Number,pixelDatatype:Number,...ox,...ax,name:String},G1=hH;var U1=de({name:"VcPostProcessStage",props:G1,emits:je,setup(e,t){const i=fe();i.cesiumClass="PostProcessStage",i.cesiumEvents=[];const n=ht(e,t,i);if(n===void 0)return;const{$services:r}=n;return i.mount=async()=>{const{postProcessStages:a}=r,s=a.add(i.cesiumObject);return a.contains(s)},i.unmount=async()=>{const{postProcessStages:a}=r;return a==null?void 0:a.remove(i.cesiumObject)},()=>{var a;return me(ye(((a=i.proxy)==null?void 0:a.$options.name)||""))}}}),pH=`
  uniform sampler2D colorTexture;
  uniform sampler2D depthTexture;
  in vec2 v_textureCoordinates;
  uniform vec4 u_scanCenterEC;
  uniform vec3 u_scanPlaneNormalEC;
  uniform vec3 u_scanLineNormalEC;
  uniform float u_radius;
  uniform vec4 u_scanColor;
  vec4 toEye(in vec2 uv, in float depth)
  {
    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));
    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);
    posInCamera =posInCamera / posInCamera.w;
    return posInCamera;
  }
  bool isPointOnLineRight(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)
  {
    vec3 v01 = testPt - ptOnLine;
    normalize(v01);
    vec3 temp = cross(v01, lineNormal);
    float d = dot(temp, u_scanPlaneNormalEC);
    return d > 0.5;
  }
  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)
  {
    vec3 v01 = point -planeOrigin;
    float d = dot(planeNormal, v01) ;
    return (point - planeNormal * d);
  }
  float distancePointToLine(in vec3 ptOnLine, in vec3 lineNormal, in vec3 testPt)
  {
    vec3 tempPt = pointProjectOnPlane(lineNormal, ptOnLine, testPt);
    return length(tempPt - ptOnLine);
  }
  float getDepth(in vec4 depth)
  {
    float z_window = czm_unpackDepth(depth);
    z_window = czm_reverseLogDepth(z_window);
    float n_range = czm_depthRange.near;
    float f_range = czm_depthRange.far;
    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
  }
  void main()
  {
    out_FragColor = texture(colorTexture, v_textureCoordinates);
    float depth = getDepth( texture(depthTexture, v_textureCoordinates));
    vec4 viewPos = toEye(v_textureCoordinates, depth);
    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);
    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);
    float twou_radius = u_radius * 2.0;
    if(dis < u_radius)
    {
      float f0 = 1.0 -abs(u_radius - dis) / u_radius;
      f0 = pow(f0, 64.0);
      vec3 lineEndPt = vec3(u_scanCenterEC.xyz) + u_scanLineNormalEC * u_radius;
      float f = 0.0;
      if(isPointOnLineRight(u_scanCenterEC.xyz, u_scanLineNormalEC.xyz, prjOnPlane.xyz))
      {
        float dis1= length(prjOnPlane.xyz - lineEndPt);
        f = abs(twou_radius -dis1) / twou_radius;
        f = pow(f, 3.0);
      }
      out_FragColor = mix(out_FragColor, u_scanColor, f + f0);
    }
  }
`;function mH(e){return{webgl:t=>{var i;const{viewer:n}=e,r=(i=e.viewer.scene.context)==null?void 0:i.webgl2;let a=pH;r||(a=a.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),a=a.replace(/texture\(/g,"texture2D("),a=a.replace(/out_FragColor/g,"gl_FragColor"));const s=Cesium.Cartographic.fromCartesian(t.position,n.scene.globe.ellipsoid),l=Cesium.Cartographic.toCartesian(s,n.scene.globe.ellipsoid),c=new Cesium.Cartesian4(l.x,l.y,l.z,1),d=new Cesium.Cartographic(s.longitude,s.latitude,s.height+500),h=Cesium.Cartographic.toCartesian(d,n.scene.globe.ellipsoid),p=new Cesium.Cartesian4(h.x,h.y,h.z,1),f=new Cesium.Cartographic(s.longitude+Cesium.Math.toRadians(.001),s.latitude,s.height),v=Cesium.Cartographic.toCartesian(f,n.scene.globe.ellipsoid),y=new Cesium.Cartesian4(v.x,v.y,v.z,1),w=new Cesium.Quaternion,C=new Cesium.Matrix3,M=new Date().getTime(),S=new Cesium.Cartesian4,_=new Cesium.Cartesian4,O=new Cesium.Cartesian4,I=new Cesium.Cartesian3,A=new Cesium.Cartesian3,V={u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,c,S)},u_scanPlaneNormalEC:function(){const $=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,c,S),D=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,p,_);return I.x=D.x-$.x,I.y=D.y-$.y,I.z=D.z-$.z,Cesium.Cartesian3.normalize(I,I),I},u_radius:t.radius,u_scanLineNormalEC:function(){const $=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,c,S),D=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,p,_),G=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,y,O);I.x=D.x-$.x,I.y=D.y-$.y,I.z=D.z-$.z,Cesium.Cartesian3.normalize(I,I),A.x=G.x-$.x,A.y=G.y-$.y,A.z=G.z-$.z;const q=(new Date().getTime()-M)%t.interval/t.interval;return Cesium.Quaternion.fromAxisAngle(I,q*Cesium.Math.PI*2,w),Cesium.Matrix3.fromQuaternion(w,C),Cesium.Matrix3.multiplyByVector(C,A,A),Cesium.Cartesian3.normalize(A,A),A},u_scanColor:t.color};return{shaderSource:a,uniforms:V}}}}var fH=`
  uniform sampler2D colorTexture;
  uniform sampler2D depthTexture;
  in vec2 v_textureCoordinates;
  uniform vec4 u_scanCenterEC;
  uniform vec3 u_scanPlaneNormalEC;
  uniform float u_radius;
  uniform vec4 u_scanColor;
  vec4 toEye(in vec2 uv, in float depth)
  {
    vec2 xy = vec2((uv.x * 2.0 - 1.0),(uv.y * 2.0 - 1.0));
    vec4 posInCamera =czm_inverseProjection * vec4(xy, depth, 1.0);
    posInCamera =posInCamera / posInCamera.w;
    return posInCamera;
  }
  vec3 pointProjectOnPlane(in vec3 planeNormal, in vec3 planeOrigin, in vec3 point)
  {
    vec3 v01 = point -planeOrigin;
    float d = dot(planeNormal, v01) ;
    return (point - planeNormal * d);
  }
  float getDepth(in vec4 depth)
  {
    float z_window = czm_unpackDepth(depth);
    z_window = czm_reverseLogDepth(z_window);
    float n_range = czm_depthRange.near;
    float f_range = czm_depthRange.far;
    return (2.0 * z_window - n_range - f_range) / (f_range - n_range);
  }
  void main()
  {
    out_FragColor = texture(colorTexture, v_textureCoordinates);
    float depth = getDepth( texture(depthTexture, v_textureCoordinates));
    vec4 viewPos = toEye(v_textureCoordinates, depth);
    vec3 prjOnPlane = pointProjectOnPlane(u_scanPlaneNormalEC.xyz, u_scanCenterEC.xyz, viewPos.xyz);
    float dis = length(prjOnPlane.xyz - u_scanCenterEC.xyz);
    if(dis < u_radius)
    {
      float f = 1.0 -abs(u_radius - dis) / u_radius;
      f = pow(f, 4.0);
      out_FragColor = mix(out_FragColor, u_scanColor, f);
    }
  }
`;function vH(e){return{webgl:t=>{var i;const{viewer:n}=e,r=(i=n.scene.context)==null?void 0:i.webgl2;let a=fH;r||(a=a.replace("in vec2 v_textureCoordinates;","varying vec2 v_textureCoordinates;"),a=a.replace(/texture\(/g,"texture2D("),a=a.replace(/out_FragColor/g,"gl_FragColor"));const s=Cesium.Cartographic.fromCartesian(t.position,n.scene.globe.ellipsoid),l=Cesium.Cartographic.toCartesian(s,n.scene.globe.ellipsoid),c=new Cesium.Cartesian4(l.x,l.y,l.z,1),d=new Cesium.Cartographic(s.longitude,s.latitude,s.height+500),h=Cesium.Cartographic.toCartesian(d,n.scene.globe.ellipsoid),p=new Cesium.Cartesian4(h.x,h.y,h.z,1),f=new Date().getTime(),v=new Cesium.Cartesian4,y=new Cesium.Cartesian4,w=new Cesium.Cartesian3,C={u_scanCenterEC:function(){return Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,c,v)},u_scanPlaneNormalEC:function(){const M=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,c,v),S=Cesium.Matrix4.multiplyByVector(n.camera.viewMatrix,p,y);return w.x=S.x-M.x,w.y=S.y-M.y,w.z=S.z-M.z,Cesium.Cartesian3.normalize(w,w),w},u_radius:function(){return t.radius*((new Date().getTime()-f)%t.interval)/t.interval},u_scanColor:t.color};return{shaderSource:a,uniforms:C}}}}const gH={position:[0,0],radius:1500,interval:3500,color:[0,0,0,255]},H1={type:{type:String,default:"radar"},options:Object};var rS=de({name:"VcPostProcessStageScan",props:H1,emits:je,setup(e,t){const i=fe();i.cesiumClass="VcPostProcessStageScan",i.cesiumEvents=[];const n=ht(e,t,i);if(n===void 0)return;const r=he(""),a=he(null),{$services:s}=n,l=mH(s),c=vH(s);let d=[];const h=ge(()=>Object.assign({},gH,e.options));return d.push(Pe(()=>h,p=>{i.mounted&&i.proxy.reload()},{deep:!0})),i.createCesiumObject=async()=>{const p=n.transformProps(h.value);let f;return e.type==="radar"?f=l.webgl(p):e.type==="circle"&&(f=c.webgl(p)),r.value=f.shaderSource,a.value=f.uniforms,!0},Vt(()=>{d.forEach(p=>p()),d=[]}),()=>R(U1,{fragmentShader:r.value,uniforms:a.value})}});const W1={postProcesses:{type:Array,default:()=>[]}};var oS=de({name:"VcPostProcessStageCollection",props:W1,emits:je,setup(e,t){const i=fe();i.cesiumClass="PostProcessStageCollection",i.cesiumEvents=[];const n=ht(e,t,i);if(n===void 0)return;const{$services:r}=n,a=[];let s=[];return s.push(Pe(()=>e.postProcesses,l=>{var c,d;i.mounted&&((d=(c=i.proxy).reload)==null||d.call(c))},{deep:!0})),i.createCesiumObject=async()=>a,i.mount=async()=>{const{postProcessStages:l}=r;return e.postProcesses.forEach(c=>{const d=n.transformProps(c);a.push(l.add(new Cesium.PostProcessStage(d)))}),!0},i.unmount=async()=>{const{postProcessStages:l}=r;return a.forEach(c=>{l.remove(c)}),a.length=0,!0},Vt(()=>{s.forEach(l=>l()),s=[]}),()=>{var l,c;return t.slots.default?R("i",{class:ye(((l=i.proxy)==null?void 0:l.$options.name)||""),style:{display:"none !important"}},Lt(t.slots.default)):me(ye(((c=i.proxy)==null?void 0:c.$options.name)||""))}}});const yH=[U1,rS,oS];yH.forEach(e=>{e.install=t=>{t.component(e.name,e)}});const q1=U1,Z1=rS,Q1=oS;var Id=de({name:"VcConfigProvider",props:{locale:{type:Object,default:()=>lx},cesiumPath:{type:String,default:"https://unpkg.com/cesium@latest/Build/Cesium/Cesium.js"},accessToken:{type:String,default:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiI2OGE2MjZlOC1mMzhiLTRkZjQtOWEwZi1jZTE0MWY0YzhlMTAiLCJpZCI6MjU5LCJpYXQiOjE2NDM3MjU1NzZ9.ptZ5tVXvMmuWRC0WhjtYTg-17nQh14fgxBsx0HJiVXQ"},reloadMode:{type:String,default:"all"}},setup(e,{slots:t}){const i=C2(e);return()=>LD(t,"default",{config:i==null?void 0:i.value})}});Id.install=e=>{e.component(Id.name,Id)};const aS=Id;var bH=aS;const sS=aS,CH={...je,stop:e=>!0};var lS=de({name:"VcAnalysisFlood",props:{minHeight:{type:Number,default:-1},maxHeight:{type:Number,default:8888},speed:{type:Number,default:10},loop:{type:Boolean,default:!1},color:{type:[Object,Array,String],default:"rgba(40,150,200,0.6)"},...ra},emits:CH,setup(e,t){var i;const n=fe();n.cesiumClass="VcAnalysisFlood",n.cesiumEvents=[];const r=ht(e,t,n);if(r===void 0)return;const{emit:a}=t,s=he(!1);(i=bi(n).proxy.creatingPromise)==null||i.then(()=>{s.value=!0});const l=he(!1),c=he(null),d=he(-1),h=he(null);let p=!1,f=[];f.push(Pe(()=>e.minHeight,M=>{d.value=M})),n.createCesiumObject=async()=>{const{ColorGeometryInstanceAttribute:M}=Cesium;return c.value={color:M.fromColor(Je(e.color))},h.value},n.mount=async()=>{const{viewer:M}=r.$services;return M.clock.onTick.addEventListener(v),!0},n.unmount=async()=>{const{viewer:M}=r.$services;return M.clock.onTick.removeEventListener(v),d.value=-1,l.value=!1,!0};const v=()=>{l.value&&(d.value<=e.maxHeight?(d.value+=e.speed,p=!1):(Ze(n,"stop")&&a("stop",h.value),p=!0,e.loop?d.value=e.minHeight:l.value=!1))},y=M=>{d.value=Cesium.defined(M)?M:e.minHeight,l.value=!0},w=()=>{l.value=!l.value,p&&(d.value=e.minHeight)},C=()=>{d.value=-1,l.value=!1};return Vt(()=>{f.forEach(M=>M()),f=[]}),Object.assign(n.proxy,{start:y,pause:w,stop:C,getCurrentHeight:()=>d.value}),()=>{if(s.value){const{createGuid:M}=Cesium;return R(fd,{asynchronous:!1,ref:h},()=>R(to,{id:M(),attributes:c.value},()=>R(_d,{extrudedHeight:d.value,polygonHierarchy:e.polygonHierarchy})))}else return me("v-if")}}});const _H=Object.assign({},li,{icon:"vc-icons-analysis-sightline"}),wH=Object.assign({},Iv,{polylineOpts:Object.assign({},ts,{colors:["#51ff00","red"]}),primitiveOpts:Object.assign({},ua,{appearance:{type:"PolylineColorAppearance"},depthFailAppearance:{type:"PolylineColorAppearance"}}),sightlineType:"polyline"}),xH=Object.assign({},li,{icon:"vc-icons-analysis-viewshed"}),EH=Object.assign({},dd,{pointOpts:Object.assign({},Po,{show:!1}),polylineOpts:Object.assign({},ts,{width:15}),primitiveOpts:Object.assign({},ua,{show:!1,appearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}},depthFailAppearance:{type:"PolylineMaterialAppearance",options:{material:{fabric:{type:"PolylineArrow",uniforms:{color:[255,255,0,255]}}}}}}),editorOpts:{pixelOffset:[16,-8],delay:1e3,hideDelay:1e3,move:Object.assign({},fi),removeAll:Object.assign({},fi,{icon:"vc-icons-delete"})},viewshedOpts:{fovH:90,fovV:60,offsetHeight:1.8,visibleColor:"#00ff00",invisibleColor:"#ff0000",showGridLine:!0,faceColor:"rgba(255,255,255,0.1)",lineColor:"rgba(255,255,255,0.4)"}}),PH=Object.assign({},{}),OH=Object.assign({},li,{direction:"right",icon:"vc-icons-analysis-button",activeIcon:"vc-icons-analysis-button",verticalActionsAlign:"center",hideIcon:!1,persistent:!1,modelValue:!0,hideActionOnClick:!1,color:"info"}),uS=["sightline","viewshed"],MH=e=>{let t=!0;return e.forEach(i=>{uS.includes(i)||(console.error(`VueCesium: unknown analysis type: ${i}`),t=!1)}),t},Ad={...Dv,analyses:{type:Array,default:()=>uS,validator:MH},mainFabOpts:{type:Object,default:()=>OH},fabActionOpts:{type:Object,default:()=>PH},sightlineActionOpts:{type:Object,default:()=>_H},sightlineAnalysisOpts:{type:Object,default:()=>wH},viewshedActionOpts:{type:Object,default:()=>xH},viewshedAnalysisOpts:{type:Object,default:()=>EH}},To=Gn(Ad);var J1=de({name:"VcAnalysisSightline",props:{...ji,polylineOpts:Object,polygonOpts:Object,primitiveOpts:Object,sightlineType:{type:String,default:"polyline"}},emits:si,setup(e,t){if(e.sightlineType==="segment"||e.sightlineType==="circle")return ro(e,t,"VcAnalysisSightline");if(e.sightlineType==="polyline")return ns(e,t,"VcAnalysisSightline")}}),X1=de({name:"VcAnalysisViewshed",props:{...ji,polylineOpts:Object,primitiveOpts:Object,viewshedOpts:Object},emits:si,setup(e,t){return ro(e,t,"VcAnalysisViewshed")}});const SH={...si,fabUpdated:e=>!0,clearEvt:(e,t)=>!0};var cS=de({name:"VcAnalyses",props:Ad,emits:SH,setup(e,t){var i;const n=fe();n.cesiumClass="VcAnalyses";const{t:r}=ri(),a={},s=Ve(Object.assign({},To.clearActionOpts,e.clearActionOpts)),l=Ve(Object.assign({},To.mainFabOpts,e.mainFabOpts)),c=Ve(Object.assign({},To.fabActionOpts,e.fabActionOpts)),d=Ve(Object.assign({},To.sightlineActionOpts,w("sightlineActionOpts"))),h=Ve(Qt(yt(To.sightlineAnalysisOpts),e.sightlineAnalysisOpts)),p=Ve(Object.assign({},To.viewshedActionOpts,w("viewshedActionOpts"))),f=Ve(Qt(yt(To.viewshedAnalysisOpts),e.viewshedAnalysisOpts));a.sightlineActionOpts=d,a.sightlineAnalysisOpts=h,a.viewshedActionOpts=p,a.viewshedAnalysisOpts=f,a.clearActionOpts=s;const v=ge(()=>e.analyses.map(C=>({name:C,type:"analysis",actionStyle:{background:a[`${Li(C)}ActionOpts`].color,color:a[`${Li(C)}ActionOpts`].textColor},actionClass:`vc-analysis-${C} vc-analysis-button`,actionRef:he(null),actionOpts:a[`${Li(C)}ActionOpts`],cmp:y(C),cmpRef:he(null),cmpOpts:a[`${Li(C)}AnalysisOpts`],tip:a[`${Li(C)}ActionOpts`].tooltip.tip||r(`vc.analysis.${Li(C)}.tip`),isActive:!1})));function y(C){switch(C){case"sightline":return J1;case"viewshed":return X1;default:return}}function w(C){return ju(To[C],e[C])?c:Object.assign({},c,e[C])}return(i=Kg(e,t,n,v,l,s,"analysis"))==null?void 0:i.renderContent}});const TH=[lS,cS];TH.forEach(e=>{e.install=t=>{t.component(e.name,e)}});const Y1=lS,K1=cS;var IH=[Af,yv,bv,Cv,_v,wv,xv,Ev,Pv,Ov,Mv,Sv,Tv,xU,BU,SP,Ly,By,Ry,Fy,$y,jy,Ny,ky,Vy,zy,Gy,Uy,Hy,Wy,qy,Zy,Qy,Jy,Xy,Yy,Ky,e1,t1,a1,s1,l1,u1,PP,O1,M1,S1,T1,I1,A1,D1,L1,B1,R1,F1,$1,j1,N1,k1,V1,z1,fd,vd,Sl,Yv,eo,Kv,e0,n0,r0,o0,t0,a0,bd,E0,ca,da,P0,Oo,O0,M0,S0,T0,I0,Mo,cU,sg,lg,ug,cg,dg,hg,pg,mg,fg,vg,gg,yg,bg,Cg,_g,wg,Tl,xg,Eg,_d,Pg,io,Og,Mg,Sg,Tg,Ig,Ag,Dg,Lg,Bg,no,$g,Ng,kg,jg,Vg,q1,Z1,Q1,Yi,Yr,xi,Tf,qc,xf,dl,Ef,Pf,Of,zc,Gc,Uc,Hc,Mf,Wc,Sf,Zc,hl,If,bH,Y1,K1],eb=xp([...IH]);const dS=eb.install,hS=eb.version;var AH=Object.freeze({__proto__:null,install:dS,version:hS,default:eb,makeInstaller:xp,VcAnalysisSightline:J1,VcAnalysisViewshed:X1,analysesProps:Ad,VcAnalysisFlood:Y1,VcAnalyses:K1,VcConfigProvider:sS,compassProps:Ff,distanceLegendProps:av,myLocationProps:Uf,navigationProps:uv,navigationSmProps:fv,zoomControlSmProps:pv,compassSmProps:dv,printProps:zf,selectionIndicatorProps:gv,statusBarProps:rv,overviewProps:vv,zoomControlProps:kf,VcCompass:yv,VcZoomControl:bv,VcPrint:Cv,VcMyLocation:_v,VcStatusBar:wv,VcDistanceLegend:xv,VcNavigation:Ev,VcCompassSm:Pv,VcZoomControlSm:Ov,VcNavigationSm:Mv,VcOverviewMap:Sv,VcSelectionIndicator:Tv,customDatasourceProps:i1,czmlDatasourceProps:n1,geojsonDatasourceProps:r1,kmlDatasourceProps:o1,VcDatasourceCustom:a1,VcDatasourceCzml:s1,VcDatasourceGeojson:l1,VcDatasourceKml:u1,VcDrawingPin:ey,VcDrawingPoint:ty,VcDrawingPolygon:ny,VcDrawingPolyline:iy,VcDrawingRectangle:ry,VcDrawingRegular:Ed,drawingsProps:xd,VcDrawings:XO,entityProps:$v,VcEntity:OP,boxGeometryProps:D0,boxOutlineGeometryProps:L0,circleGeometryProps:B0,circleOutlineGeometryProps:R0,polygonCoplanarProps:F0,polygonCoplanarOutlineProps:$0,corridorGeometryProps:j0,corridorOutlineGeometryProps:N0,cylinderGeometryProps:k0,cylinderOutlineGeometryProps:V0,ellipseGeometryProps:z0,ellipseOutlineGeometryProps:G0,ellipsoidGeometryProps:U0,frustumGeometryProps:H0,frustumOutlineGeometryProps:W0,groundPolylineGeometryProps:q0,planeGeometryProps:Z0,polygonGeometryProps:Q0,polygonOutlineGeometryProps:J0,polylineGeometryProps:X0,polylineVolumeGeometryProps:Y0,polylineVolumeOutlineGeometryProps:K0,rectangleGeometryProps:eg,rectangleOutlineGeometryProps:tg,simplePolylineGeometryProps:ig,sphereGeometryProps:ng,sphereGeometryOutlineProps:rg,wallGeometryProps:og,wallOutlineProps:ag,VcGeometryBox:sg,VcGeometryBoxOutline:lg,VcGeometryCircle:ug,VcGeometryCircleOutline:cg,VcGeometryPolygonCoplanar:dg,VcGeometryPolygonCoplanarOutline:hg,VcGeometryCorridor:pg,VcGeometryCorridorOutline:mg,VcGeometryCylinder:fg,VcGeometryCylinderOutline:vg,VcGeometryEllipse:gg,VcGeometryEllipseOutline:yg,VcGeometryEllipsoid:bg,VcGeometryEllipsoidOutline:Cg,VcGeometryFrustum:_g,VcGeometryFrustumOutline:wg,VcGeometryGroundPolyline:Tl,VcGeometryPlane:xg,VcGeometryPlaneOutline:Eg,VcGeometryPolygon:_d,VcGeometryPolygonOutline:Pg,VcGeometryPolyline:io,VcGeometryPolylineVolume:Og,VcGeometryPolylineVolumeOutline:Mg,VcGeometryRectangle:Sg,VcGeometryRectangleOutline:Tg,VcGeometrySimplePolyline:Ig,VcGeometrySphere:Ag,VcGeometrySphereOutline:Dg,VcGeometryWall:Lg,VcGeometryWallOutline:Bg,geometryInstanceProps:A0,VcGeometryInstance:to,billboarGraphicsProps:c1,boxGraphicsProps:d1,cylinderGraphicsProps:h1,ellipseGraphicsProps:p1,ellipsoidGraphicsProps:m1,labelGraphicsProps:f1,modelGraphicsProps:v1,pathGraphicsProps:g1,planeGraphicsProps:y1,pointGraphicsProps:b1,polygonGraphicsProps:C1,polylineGraphicsProps:_1,polylineVolumeGraphicsProps:w1,rectangleGraphicsProps:x1,tilesetGraphicsProps:E1,wallGraphicsProps:P1,VcGraphicsBillboard:O1,VcGraphicsBox:M1,VcGraphicsCorridor:S1,VcGraphicsCylinder:T1,VcGraphicsEllipse:I1,VcGraphicsEllipsoid:A1,VcGraphicsLabel:D1,VcGraphicsModel:L1,VcGraphicsPath:B1,VcGraphicsPlane:R1,VcGraphicsPoint:F1,VcGraphicsPolygon:$1,VcGraphicsPolyline:j1,VcGraphicsPolylineVolume:N1,VcGraphicsRectangle:k1,VcGraphicsTileset:V1,VcGraphicsWall:z1,imageryLayerProps:jv,VcLayerImagery:TP,VcMeasurementDistance:Gg,VcMeasurementPolyline:Ug,VcMeasurementHorizontal:Hg,VcMeasurementVertical:Wg,VcMeasurementHeight:qg,VcMeasurementPoint:Qg,VcMeasurementArea:Jg,VcMeasurementRectangle:Xg,VcMeasurementRegular:Yg,measurementsProps:hd,VcMeasurements:ZO,dynamicOverlayProps:h0,echartsOverlayProps:l0,heatmapOverlayProps:s0,htmlOverlayProps:Bv,windmapOverlayProps:d0,typhoonOverlayProps:Fg,VcOverlayHtml:no,VcOverlayHeatmap:$g,VcOverlayEcharts:jg,VcOverlayWind:Ng,VcOverlayDynamic:kg,VcOverlayTyphoon:Vg,postProcessStageProps:G1,postProcessStageCollectionProps:W1,postProcessStageScanProps:H1,VcPostProcessStage:q1,VcPostProcessStageScan:Z1,VcPostProcessStageCollection:Q1,billboardProps:m0,billboardCollectionProps:p0,cumulusCloudProps:f0,cloudCollectionProps:v0,labelProps:y0,labelCollectionProps:g0,pointProps:C0,pointCollectionProps:b0,polygonProps:x0,polylineProps:_0,primitiveCollectionProps:w0,VcCollectionBillboard:bd,VcCollectionCloud:E0,VcCollectionLabel:ca,VcCollectionPoint:da,VcCollectionPolyline:P0,VcCollectionPrimitive:Oo,VcBillboard:O0,VcCumulusCloud:M0,VcLabel:S0,VcPoint:T0,VcPolyline:I0,VcPolygon:Mo,classificationPrimitiveProps:Nv,groundPrimitiveProps:kv,groundPolylinePrimitiveProps:Vv,modelPrimitiveProps:zv,osmBuildingsProps:Hv,particlePrimitiveProps:Wv,primitiveProps:Gv,tilesetPrimitiveProps:Uv,viewshedProps:qv,timeDynamicPointCloudProps:Zv,i3sDataProviderProps:Qv,voxelPromitiveProps:Jv,primitiveClusterProps:Xv,VcPrimitiveClassification:fd,VcPrimitiveGround:vd,VcPrimitiveGroundPolyline:Sl,VcPrimitiveModel:Yv,VcPrimitive:eo,VcPrimitiveTileset:Kv,VcPrimitiveOsmBuildings:e0,VcPrimitiveParticle:t0,VcViewshed:i0,VcPrimitiveTimeDynamicPointCloud:n0,VcPrimitiveI3sDataProvider:r0,VcPrimitiveVoxel:o0,VcPrimitiveCluster:a0,amapImageryProviderProps:oy,arcgisImageryProviderProps:ay,arcgisTerrainProviderProps:Iy,baiduImageryProviderProps:uy,bingImageryProviderProps:cy,cesiumTerrainProviderProps:Ty,googleImageryProviderProps:dy,gridImageryProviderProps:hy,ionImageryProviderProps:uM,mapboxImageryProviderProps:py,osmImageryProviderProps:my,singletileImageryProviderProps:fy,supermapImageryProviderProps:gy,tencentImageryProviderProps:yy,tiandituImageryProviderProps:wy,tiandituTerrainProviderProps:Dy,tileCoordinatesImageryProviderProps:xy,tmsImageryProviderProps:Ey,tiledcacheImageryProviderProps:Py,urltemplateImageryProviderProps:Oy,vrTheworldImageryProviderProps:Ay,wmsImageryProviderProps:My,wmtsImageryProviderProps:Sy,VcImageryProviderAmap:Ly,VcImageryProviderArcgis:By,VcImageryProviderBaidu:Ry,VcImageryProviderBing:Fy,VcImageryProviderGoogle:$y,VcImageryProviderGrid:jy,VcImageryProviderIon:Ny,VcImageryProviderMapbox:ky,VcImageryProviderOsm:Vy,VcImageryProviderSingletile:zy,VcImageryProviderSupermap:Gy,VcImageryProviderTencent:Uy,VcImageryProviderTianditu:Hy,VcImageryProviderTileCoordinates:Wy,VcImageryProviderTms:qy,VcImageryProviderTiledcache:Zy,VcImageryProviderUrltemplate:Qy,VcImageryProviderWms:Jy,VcImageryProviderWmts:Xy,VcTerrainProviderCesium:Yy,VcTerrainProviderArcgis:Ky,VcTerrainProviderVrTheworld:e1,VcTerrainProviderTianditu:t1,ajaxBarProps:vf,btnProps:df,fabProps:Cf,fabActionProps:_f,iconProps:cf,skeletonTypes:gf,skeletonAnimations:yf,skeletonProps:bf,SpinnerBall:Sc,SpinnerBars:Tc,SpinnerDots:Ic,SpinnerGears:Ac,SpinnerHourglass:Dc,SpinnerIos:Lc,SpinnerOrbit:Bc,SpinnerOval:Rc,SpinnerPuff:Fc,SpinnerRings:$c,SpinnerTail:jc,Spinner:ul,tooltipProps:mf,sliderProps:wf,VcBtn:Yi,VcIcon:Yr,VcSpinnerBall:xf,VcSpinnerBars:dl,VcSpinnerDots:Ef,VcSpinnerGears:Pf,VcSpinnerHourglass:Of,VcSpinnerIos:zc,VcSpinnerOrbit:Gc,VcSpinnerOval:Uc,VcSpinnerPuff:Hc,VcSpinnerRings:Mf,VcSpinnerTail:Wc,VcSpinner:Sf,VcTooltip:xi,VcAjaxBar:Tf,VcSkeleton:qc,VcFab:Zc,VcFabAction:hl,VcSlider:If,viewerProps:lf,VcViewer:Af,Ripple:$m,TouchHold:ol,TouchRepeat:mx,TouchPan:km,useCommon:ht,useDatasources:Fa,useEvents:yc,useGeometries:xt,useGraphics:_i,useHandler:Vm,usePrimitiveCollectionItems:yo,usePrimitiveCollections:bo,usePrimitives:cn,useProviders:Ht,useVueCesium:xc,buildTranslator:Mm,translate:Sm,buildLocaleContext:Tm,useLocale:ri,VisibilityState:Hm,DrawStatus:ze,MeasureUnits:Gi,DistanceUnits:mi,AreaUnits:oi,VolumeUnits:Si,AngleUnits:ai,PolygonPrimitive:Ec,DynamicOverlay:Pc,DebugCameraPrimitive:Wm,PrimitiveCluster:Jm,RectangleExtend:tf,ShadowMapShaderExtend:rf,MaterialExtend:Pp,VcCircleWaveMaterialProperty:Io,VcLineFlowMaterialProperty:as,VcLineTrailMaterialProperty:ss,Viewshed:of,VcTimeline:Rx,commonEmits:je,pickEventEmits:za,graphicsEmits:Ga,providerEmits:Wt,primitiveEmits:dn,primitiveCollectionEmits:Mn,datasourceEmits:Ua,drawingEmit:si});export{ai as AngleUnits,oi as AreaUnits,Wm as DebugCameraPrimitive,mi as DistanceUnits,ze as DrawStatus,Pc as DynamicOverlay,Pp as MaterialExtend,Gi as MeasureUnits,Ec as PolygonPrimitive,Jm as PrimitiveCluster,tf as RectangleExtend,$m as Ripple,rf as ShadowMapShaderExtend,ul as Spinner,Sc as SpinnerBall,Tc as SpinnerBars,Ic as SpinnerDots,Ac as SpinnerGears,Dc as SpinnerHourglass,Lc as SpinnerIos,Bc as SpinnerOrbit,Rc as SpinnerOval,Fc as SpinnerPuff,$c as SpinnerRings,jc as SpinnerTail,ol as TouchHold,km as TouchPan,mx as TouchRepeat,Tf as VcAjaxBar,K1 as VcAnalyses,Y1 as VcAnalysisFlood,J1 as VcAnalysisSightline,X1 as VcAnalysisViewshed,O0 as VcBillboard,Yi as VcBtn,Io as VcCircleWaveMaterialProperty,bd as VcCollectionBillboard,E0 as VcCollectionCloud,ca as VcCollectionLabel,da as VcCollectionPoint,P0 as VcCollectionPolyline,Oo as VcCollectionPrimitive,yv as VcCompass,Pv as VcCompassSm,sS as VcConfigProvider,M0 as VcCumulusCloud,a1 as VcDatasourceCustom,s1 as VcDatasourceCzml,l1 as VcDatasourceGeojson,u1 as VcDatasourceKml,xv as VcDistanceLegend,ey as VcDrawingPin,ty as VcDrawingPoint,ny as VcDrawingPolygon,iy as VcDrawingPolyline,ry as VcDrawingRectangle,Ed as VcDrawingRegular,XO as VcDrawings,OP as VcEntity,Zc as VcFab,hl as VcFabAction,sg as VcGeometryBox,lg as VcGeometryBoxOutline,ug as VcGeometryCircle,cg as VcGeometryCircleOutline,pg as VcGeometryCorridor,mg as VcGeometryCorridorOutline,fg as VcGeometryCylinder,vg as VcGeometryCylinderOutline,gg as VcGeometryEllipse,yg as VcGeometryEllipseOutline,bg as VcGeometryEllipsoid,Cg as VcGeometryEllipsoidOutline,_g as VcGeometryFrustum,wg as VcGeometryFrustumOutline,Tl as VcGeometryGroundPolyline,to as VcGeometryInstance,xg as VcGeometryPlane,Eg as VcGeometryPlaneOutline,_d as VcGeometryPolygon,dg as VcGeometryPolygonCoplanar,hg as VcGeometryPolygonCoplanarOutline,Pg as VcGeometryPolygonOutline,io as VcGeometryPolyline,Og as VcGeometryPolylineVolume,Mg as VcGeometryPolylineVolumeOutline,Sg as VcGeometryRectangle,Tg as VcGeometryRectangleOutline,Ig as VcGeometrySimplePolyline,Ag as VcGeometrySphere,Dg as VcGeometrySphereOutline,Lg as VcGeometryWall,Bg as VcGeometryWallOutline,O1 as VcGraphicsBillboard,M1 as VcGraphicsBox,S1 as VcGraphicsCorridor,T1 as VcGraphicsCylinder,I1 as VcGraphicsEllipse,A1 as VcGraphicsEllipsoid,D1 as VcGraphicsLabel,L1 as VcGraphicsModel,B1 as VcGraphicsPath,R1 as VcGraphicsPlane,F1 as VcGraphicsPoint,$1 as VcGraphicsPolygon,j1 as VcGraphicsPolyline,N1 as VcGraphicsPolylineVolume,k1 as VcGraphicsRectangle,V1 as VcGraphicsTileset,z1 as VcGraphicsWall,Yr as VcIcon,Ly as VcImageryProviderAmap,By as VcImageryProviderArcgis,Ry as VcImageryProviderBaidu,Fy as VcImageryProviderBing,$y as VcImageryProviderGoogle,jy as VcImageryProviderGrid,Ny as VcImageryProviderIon,ky as VcImageryProviderMapbox,Vy as VcImageryProviderOsm,zy as VcImageryProviderSingletile,Gy as VcImageryProviderSupermap,Uy as VcImageryProviderTencent,Hy as VcImageryProviderTianditu,Wy as VcImageryProviderTileCoordinates,Zy as VcImageryProviderTiledcache,qy as VcImageryProviderTms,Qy as VcImageryProviderUrltemplate,Jy as VcImageryProviderWms,Xy as VcImageryProviderWmts,S0 as VcLabel,TP as VcLayerImagery,as as VcLineFlowMaterialProperty,ss as VcLineTrailMaterialProperty,Jg as VcMeasurementArea,Gg as VcMeasurementDistance,qg as VcMeasurementHeight,Hg as VcMeasurementHorizontal,Qg as VcMeasurementPoint,Ug as VcMeasurementPolyline,Xg as VcMeasurementRectangle,Yg as VcMeasurementRegular,Wg as VcMeasurementVertical,ZO as VcMeasurements,_v as VcMyLocation,Ev as VcNavigation,Mv as VcNavigationSm,kg as VcOverlayDynamic,jg as VcOverlayEcharts,$g as VcOverlayHeatmap,no as VcOverlayHtml,Vg as VcOverlayTyphoon,Ng as VcOverlayWind,Sv as VcOverviewMap,T0 as VcPoint,Mo as VcPolygon,I0 as VcPolyline,q1 as VcPostProcessStage,Q1 as VcPostProcessStageCollection,Z1 as VcPostProcessStageScan,eo as VcPrimitive,fd as VcPrimitiveClassification,a0 as VcPrimitiveCluster,vd as VcPrimitiveGround,Sl as VcPrimitiveGroundPolyline,r0 as VcPrimitiveI3sDataProvider,Yv as VcPrimitiveModel,e0 as VcPrimitiveOsmBuildings,t0 as VcPrimitiveParticle,Kv as VcPrimitiveTileset,n0 as VcPrimitiveTimeDynamicPointCloud,o0 as VcPrimitiveVoxel,Cv as VcPrint,Tv as VcSelectionIndicator,qc as VcSkeleton,If as VcSlider,Sf as VcSpinner,xf as VcSpinnerBall,dl as VcSpinnerBars,Ef as VcSpinnerDots,Pf as VcSpinnerGears,Of as VcSpinnerHourglass,zc as VcSpinnerIos,Gc as VcSpinnerOrbit,Uc as VcSpinnerOval,Hc as VcSpinnerPuff,Mf as VcSpinnerRings,Wc as VcSpinnerTail,wv as VcStatusBar,Ky as VcTerrainProviderArcgis,Yy as VcTerrainProviderCesium,t1 as VcTerrainProviderTianditu,e1 as VcTerrainProviderVrTheworld,Rx as VcTimeline,xi as VcTooltip,Af as VcViewer,i0 as VcViewshed,bv as VcZoomControl,Ov as VcZoomControlSm,of as Viewshed,Hm as VisibilityState,Si as VolumeUnits,vf as ajaxBarProps,oy as amapImageryProviderProps,Ad as analysesProps,ay as arcgisImageryProviderProps,Iy as arcgisTerrainProviderProps,uy as baiduImageryProviderProps,c1 as billboarGraphicsProps,p0 as billboardCollectionProps,m0 as billboardProps,cy as bingImageryProviderProps,D0 as boxGeometryProps,d1 as boxGraphicsProps,L0 as boxOutlineGeometryProps,df as btnProps,Tm as buildLocaleContext,Mm as buildTranslator,Ty as cesiumTerrainProviderProps,B0 as circleGeometryProps,R0 as circleOutlineGeometryProps,Nv as classificationPrimitiveProps,v0 as cloudCollectionProps,je as commonEmits,Ff as compassProps,dv as compassSmProps,j0 as corridorGeometryProps,N0 as corridorOutlineGeometryProps,f0 as cumulusCloudProps,i1 as customDatasourceProps,k0 as cylinderGeometryProps,h1 as cylinderGraphicsProps,V0 as cylinderOutlineGeometryProps,n1 as czmlDatasourceProps,Ua as datasourceEmits,AH as default,av as distanceLegendProps,si as drawingEmit,xd as drawingsProps,h0 as dynamicOverlayProps,l0 as echartsOverlayProps,z0 as ellipseGeometryProps,p1 as ellipseGraphicsProps,G0 as ellipseOutlineGeometryProps,U0 as ellipsoidGeometryProps,m1 as ellipsoidGraphicsProps,$v as entityProps,_f as fabActionProps,Cf as fabProps,H0 as frustumGeometryProps,W0 as frustumOutlineGeometryProps,r1 as geojsonDatasourceProps,A0 as geometryInstanceProps,dy as googleImageryProviderProps,Ga as graphicsEmits,hy as gridImageryProviderProps,q0 as groundPolylineGeometryProps,Vv as groundPolylinePrimitiveProps,kv as groundPrimitiveProps,s0 as heatmapOverlayProps,Bv as htmlOverlayProps,Qv as i3sDataProviderProps,cf as iconProps,jv as imageryLayerProps,dS as install,uM as ionImageryProviderProps,o1 as kmlDatasourceProps,g0 as labelCollectionProps,f1 as labelGraphicsProps,y0 as labelProps,xp as makeInstaller,py as mapboxImageryProviderProps,hd as measurementsProps,v1 as modelGraphicsProps,zv as modelPrimitiveProps,Uf as myLocationProps,uv as navigationProps,fv as navigationSmProps,Hv as osmBuildingsProps,my as osmImageryProviderProps,vv as overviewProps,Wv as particlePrimitiveProps,g1 as pathGraphicsProps,za as pickEventEmits,Z0 as planeGeometryProps,y1 as planeGraphicsProps,b0 as pointCollectionProps,b1 as pointGraphicsProps,C0 as pointProps,$0 as polygonCoplanarOutlineProps,F0 as polygonCoplanarProps,Q0 as polygonGeometryProps,C1 as polygonGraphicsProps,J0 as polygonOutlineGeometryProps,x0 as polygonProps,X0 as polylineGeometryProps,_1 as polylineGraphicsProps,_0 as polylineProps,Y0 as polylineVolumeGeometryProps,w1 as polylineVolumeGraphicsProps,K0 as polylineVolumeOutlineGeometryProps,W1 as postProcessStageCollectionProps,G1 as postProcessStageProps,H1 as postProcessStageScanProps,Xv as primitiveClusterProps,Mn as primitiveCollectionEmits,w0 as primitiveCollectionProps,dn as primitiveEmits,Gv as primitiveProps,zf as printProps,Wt as providerEmits,eg as rectangleGeometryProps,x1 as rectangleGraphicsProps,tg as rectangleOutlineGeometryProps,gv as selectionIndicatorProps,ig as simplePolylineGeometryProps,fy as singletileImageryProviderProps,yf as skeletonAnimations,bf as skeletonProps,gf as skeletonTypes,wf as sliderProps,rg as sphereGeometryOutlineProps,ng as sphereGeometryProps,rv as statusBarProps,gy as supermapImageryProviderProps,yy as tencentImageryProviderProps,wy as tiandituImageryProviderProps,Dy as tiandituTerrainProviderProps,xy as tileCoordinatesImageryProviderProps,Py as tiledcacheImageryProviderProps,E1 as tilesetGraphicsProps,Uv as tilesetPrimitiveProps,Zv as timeDynamicPointCloudProps,Ey as tmsImageryProviderProps,mf as tooltipProps,Sm as translate,Fg as typhoonOverlayProps,Oy as urltemplateImageryProviderProps,ht as useCommon,Fa as useDatasources,yc as useEvents,xt as useGeometries,_i as useGraphics,Vm as useHandler,ri as useLocale,yo as usePrimitiveCollectionItems,bo as usePrimitiveCollections,cn as usePrimitives,Ht as useProviders,xc as useVueCesium,hS as version,lf as viewerProps,qv as viewshedProps,Jv as voxelPromitiveProps,Ay as vrTheworldImageryProviderProps,og as wallGeometryProps,P1 as wallGraphicsProps,ag as wallOutlineProps,d0 as windmapOverlayProps,My as wmsImageryProviderProps,Sy as wmtsImageryProviderProps,kf as zoomControlProps,pv as zoomControlSmProps};
//# sourceMappingURL=index.full.min.mjs.map
