{"version":3,"file":"VcLineTrailMaterialProperty.js","sources":["../../../../../../packages/shared/extends/materials/VcLineTrailMaterialProperty.ts"],"sourcesContent":["/*\n * @Author: zouyaoji@https://github.com/zouyaoji\n * @Date: 2023-08-17 23:55:24\n * @Description: Do not edit\n * @LastEditors: zouyaoji 370681295@qq.com\n * @LastEditTime: 2024-02-29 00:43:57\n * @FilePath: \\vue-cesium\\packages\\shared\\extends\\materials\\VcLineTrailMaterialProperty.ts\n */\nimport { getCesiumColor, getCesiumValue } from '@vue-cesium/utils/util'\nimport VcBaseMaterialProperty from './VcBaseMaterialProperty'\n\nexport default class VcLineTrailMaterialProperty extends VcBaseMaterialProperty {\n  image: string\n  color: Cesium.Color\n  axisY: boolean\n  time: number\n  duration: number\n  repeat: Cesium.Cartesian2\n  loop: boolean\n  lastTime: number\n  _time: number\n\n  constructor(options: any = {}) {\n    super(options)\n    const { Color, Cartesian2, defined } = Cesium\n    this.image = options.image ?? options.url\n    this.color = options.color ?? new Color(1, 0, 0, 1)\n    this.axisY = options.axisY ?? false\n    this.time = options.time ?? 0\n    this.repeat = options.repeat ?? new Cartesian2(1, 1)\n    this.loop = options.loop ?? true\n    this.duration = options.duration ?? 3\n    this._time = (new Date()).getTime()\n  }\n\n  getType(value) {\n    return 'VcLineTrail'\n  }\n\n  getValue(time: Cesium.JulianDate, result?): VcLineTrailMaterialProperty {\n    const { Color, Cartesian2, defined } = Cesium\n    !defined(result) && (result = {})\n\n    if (this.lastTime >= 0.99 && !this.loop) {\n      return result\n    }\n\n    result.image = this.image\n    result.color = getCesiumColor(this.color, new Color(1, 1, 1, 0), time)\n    result.repeat = getCesiumValue(this.repeat, Cartesian2, time)\n    result.axisY = this.axisY\n    result.time = (((new Date()).getTime() - this._time) % this.duration) / this.duration\n    this.lastTime = result.time\n    return result as VcLineTrailMaterialProperty\n  }\n\n  equals(other: VcLineTrailMaterialProperty) {\n    const reData =\n      this === other ||\n      (other instanceof VcLineTrailMaterialProperty &&\n        Cesium.Property['equals'](this.color, other.color) &&\n        Cesium.Property['equals'](this.repeat, other.repeat) &&\n        this.image === other.image &&\n        this.axisY === other.axisY &&\n        this.duration === other.duration)\n    return reData\n  }\n}\n"],"names":["VcBaseMaterialProperty","getCesiumColor","getCesiumValue"],"mappings":"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"}