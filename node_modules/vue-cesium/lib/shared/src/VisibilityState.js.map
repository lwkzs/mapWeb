{"version":3,"file":"VisibilityState.js","sources":["../../../../../packages/shared/src/VisibilityState.ts"],"sourcesContent":["class VisibilityState {\n  states: any\n  count: number\n  constructor() {\n    this.states = new Cesium.ManagedArray()\n    this.count = 0\n  }\n\n  hidePrimitiveCollection(primitiveCollection: Cesium.PrimitiveCollection) {\n    const { PrimitiveCollection, Cesium3DTileset, Model } = Cesium\n    const length = primitiveCollection.length\n    for (let i = 0; i < length; i++) {\n      const primitive = primitiveCollection.get(i)\n      if (primitive instanceof PrimitiveCollection) {\n        this.hidePrimitiveCollection(primitive)\n      } else {\n        this.states.push(primitive.show)\n        primitive instanceof Cesium3DTileset || primitive instanceof Model || (primitive.show = false)\n      }\n    }\n  }\n\n  restorePrimitiveCollection(primitiveCollection: Cesium.PrimitiveCollection) {\n    const { PrimitiveCollection } = Cesium\n    const length = primitiveCollection.length\n    for (let i = 0; i < length; i++) {\n      const primitive = primitiveCollection.get(i)\n      if (primitive instanceof PrimitiveCollection) {\n        this.restorePrimitiveCollection(primitive)\n      } else {\n        primitive.show = this.states.get(this.count++)\n      }\n    }\n  }\n\n  hide(scene: Cesium.Scene) {\n    this.states.length = 0\n    this.hidePrimitiveCollection(scene.primitives)\n    this.hidePrimitiveCollection(scene.groundPrimitives)\n  }\n\n  restore(scene: Cesium.Scene) {\n    this.count = 0\n    this.restorePrimitiveCollection(scene.primitives)\n    this.restorePrimitiveCollection(scene.groundPrimitives)\n  }\n}\n\nexport default VisibilityState\n"],"names":[],"mappings":";;;;;AAAA,MAAM,eAAgB,CAAA;AAAA,EAGpB,WAAc,GAAA;AACZ,IAAK,IAAA,CAAA,MAAA,GAAS,IAAI,MAAA,CAAO,YAAa,EAAA,CAAA;AACtC,IAAA,IAAA,CAAK,KAAQ,GAAA,CAAA,CAAA;AAAA,GACf;AAAA,EAEA,wBAAwB,mBAAiD,EAAA;AACvE,IAAA,MAAM,EAAE,mBAAA,EAAqB,eAAiB,EAAA,KAAA,EAAU,GAAA,MAAA,CAAA;AACxD,IAAA,MAAM,SAAS,mBAAoB,CAAA,MAAA,CAAA;AACnC,IAAA,KAAA,IAAS,CAAI,GAAA,CAAA,EAAG,CAAI,GAAA,MAAA,EAAQ,CAAK,EAAA,EAAA;AAC/B,MAAM,MAAA,SAAA,GAAY,mBAAoB,CAAA,GAAA,CAAI,CAAC,CAAA,CAAA;AAC3C,MAAA,IAAI,qBAAqB,mBAAqB,EAAA;AAC5C,QAAA,IAAA,CAAK,wBAAwB,SAAS,CAAA,CAAA;AAAA,OACjC,MAAA;AACL,QAAK,IAAA,CAAA,MAAA,CAAO,IAAK,CAAA,SAAA,CAAU,IAAI,CAAA,CAAA;AAC/B,QAAA,SAAA,YAAqB,eAAmB,IAAA,SAAA,YAAqB,KAAU,KAAA,SAAA,CAAU,IAAO,GAAA,KAAA,CAAA,CAAA;AAAA,OAC1F;AAAA,KACF;AAAA,GACF;AAAA,EAEA,2BAA2B,mBAAiD,EAAA;AAC1E,IAAM,MAAA,EAAE,qBAAwB,GAAA,MAAA,CAAA;AAChC,IAAA,MAAM,SAAS,mBAAoB,CAAA,MAAA,CAAA;AACnC,IAAA,KAAA,IAAS,CAAI,GAAA,CAAA,EAAG,CAAI,GAAA,MAAA,EAAQ,CAAK,EAAA,EAAA;AAC/B,MAAM,MAAA,SAAA,GAAY,mBAAoB,CAAA,GAAA,CAAI,CAAC,CAAA,CAAA;AAC3C,MAAA,IAAI,qBAAqB,mBAAqB,EAAA;AAC5C,QAAA,IAAA,CAAK,2BAA2B,SAAS,CAAA,CAAA;AAAA,OACpC,MAAA;AACL,QAAA,SAAA,CAAU,IAAO,GAAA,IAAA,CAAK,MAAO,CAAA,GAAA,CAAI,KAAK,KAAO,EAAA,CAAA,CAAA;AAAA,OAC/C;AAAA,KACF;AAAA,GACF;AAAA,EAEA,KAAK,KAAqB,EAAA;AACxB,IAAA,IAAA,CAAK,OAAO,MAAS,GAAA,CAAA,CAAA;AACrB,IAAK,IAAA,CAAA,uBAAA,CAAwB,MAAM,UAAU,CAAA,CAAA;AAC7C,IAAK,IAAA,CAAA,uBAAA,CAAwB,MAAM,gBAAgB,CAAA,CAAA;AAAA,GACrD;AAAA,EAEA,QAAQ,KAAqB,EAAA;AAC3B,IAAA,IAAA,CAAK,KAAQ,GAAA,CAAA,CAAA;AACb,IAAK,IAAA,CAAA,0BAAA,CAA2B,MAAM,UAAU,CAAA,CAAA;AAChD,IAAK,IAAA,CAAA,0BAAA,CAA2B,MAAM,gBAAgB,CAAA,CAAA;AAAA,GACxD;AACF;;;;"}