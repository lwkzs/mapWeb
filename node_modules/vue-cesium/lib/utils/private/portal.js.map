{"version":3,"file":"portal.js","sources":["../../../../../packages/utils/private/portal.ts"],"sourcesContent":["/*\n * @Author: zouyaoji@https://github.com/zouyaoji\n * @Date: 2021-04-06 09:21:02\n * @LastEditTime: 2021-10-02 10:54:02\n * @LastEditors: zouyaoji\n * @Description:\n * @FilePath: \\vue-cesium@next\\packages\\utils\\private\\portal.ts\n */\nimport { getParentVm } from './vm'\n\nexport const portalList: Array<any> = []\n\nexport function getPortalVm(el) {\n  return portalList.find(vm => vm.__vcPortalInnerRef.value !== null && vm.__vcPortalInnerRef.value.contains(el))\n}\n\nexport function closePortalMenus(vm, evt) {\n  do {\n    if (vm.$options.name === 'VcMenu') {\n      vm.hide(evt)\n\n      // is this a point of separation?\n      if (vm.$props.separateClosePopup === true) {\n        return getParentVm(vm)\n      }\n    } else if (vm.__vcPortalInnerRef !== void 0) {\n      // treat it as point of separation if parent is QPopupProxy\n      // (so mobile matches desktop behavior)\n      // and hide it too\n      const parent = getParentVm(vm)\n\n      if (parent !== void 0 && parent.$options.name === 'VcPopupProxy') {\n        vm.hide(evt)\n        return parent\n      } else {\n        return vm\n      }\n    }\n\n    vm = getParentVm(vm)\n  } while (vm !== void 0 && vm !== null)\n}\n\nexport function closePortals(vm, evt, depth) {\n  while (depth !== 0 && vm !== void 0 && vm !== null) {\n    if (vm.__vcPortalInnerRef !== void 0) {\n      depth--\n\n      if (vm.$options.name === 'VcMenu') {\n        vm = closePortalMenus(vm, evt)\n        continue\n      }\n\n      vm.hide(evt)\n    }\n\n    vm = getParentVm(vm)\n  }\n}\n"],"names":["vm","getParentVm"],"mappings":";;;;;;;AAUO,MAAM,aAAyB,GAAC;AAEhC,SAAS,YAAY,EAAI,EAAA;AAC9B,EAAA,OAAO,UAAW,CAAA,IAAA,CAAK,CAAM,EAAA,KAAA,EAAA,CAAG,kBAAmB,CAAA,KAAA,KAAU,IAAQ,IAAA,EAAA,CAAG,kBAAmB,CAAA,KAAA,CAAM,QAAS,CAAA,EAAE,CAAC,CAAA,CAAA;AAC/G,CAAA;AAEgB,SAAA,gBAAA,CAAiBA,MAAI,GAAK,EAAA;AACxC,EAAG,GAAA;AACD,IAAI,IAAAA,IAAA,CAAG,QAAS,CAAA,IAAA,KAAS,QAAU,EAAA;AACjC,MAAAA,IAAA,CAAG,KAAK,GAAG,CAAA,CAAA;AAGX,MAAI,IAAAA,IAAA,CAAG,MAAO,CAAA,kBAAA,KAAuB,IAAM,EAAA;AACzC,QAAA,OAAOC,eAAYD,IAAE,CAAA,CAAA;AAAA,OACvB;AAAA,KACF,MAAA,IAAWA,IAAG,CAAA,kBAAA,KAAuB,KAAQ,CAAA,EAAA;AAI3C,MAAM,MAAA,MAAA,GAASC,eAAYD,IAAE,CAAA,CAAA;AAE7B,MAAA,IAAI,MAAW,KAAA,KAAA,CAAA,IAAU,MAAO,CAAA,QAAA,CAAS,SAAS,cAAgB,EAAA;AAChE,QAAAA,IAAA,CAAG,KAAK,GAAG,CAAA,CAAA;AACX,QAAO,OAAA,MAAA,CAAA;AAAA,OACF,MAAA;AACL,QAAO,OAAAA,IAAA,CAAA;AAAA,OACT;AAAA,KACF;AAEA,IAAAA,IAAA,GAAKC,eAAYD,IAAE,CAAA,CAAA;AAAA,GACrB,QAASA,IAAO,KAAA,KAAA,CAAA,IAAUA,IAAO,KAAA,IAAA,EAAA;AACnC,CAAA;AAEgB,SAAA,YAAA,CAAaA,IAAI,EAAA,GAAA,EAAK,KAAO,EAAA;AAC3C,EAAA,OAAO,KAAU,KAAA,CAAA,IAAKA,IAAO,KAAA,KAAA,CAAA,IAAUA,SAAO,IAAM,EAAA;AAClD,IAAI,IAAAA,IAAA,CAAG,uBAAuB,KAAQ,CAAA,EAAA;AACpC,MAAA,KAAA,EAAA,CAAA;AAEA,MAAI,IAAAA,IAAA,CAAG,QAAS,CAAA,IAAA,KAAS,QAAU,EAAA;AACjC,QAAKA,IAAA,GAAA,gBAAA,CAAiBA,MAAI,GAAG,CAAA,CAAA;AAC7B,QAAA,SAAA;AAAA,OACF;AAEA,MAAAA,IAAA,CAAG,KAAK,GAAG,CAAA,CAAA;AAAA,KACb;AAEA,IAAAA,IAAA,GAAKC,eAAYD,IAAE,CAAA,CAAA;AAAA,GACrB;AACF;;;;;;;"}